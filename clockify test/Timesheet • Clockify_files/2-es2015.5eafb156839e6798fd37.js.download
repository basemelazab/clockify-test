(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+/oa":function(e,t,i){"use strict";function n(e){return e.map(e=>e.name).sort((function(e,t){return e>t?1:t>e?-1:0})).join("\r\n")}i.d(t,"a",(function(){return n}))},"+EM1":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._backgroundColor=e,this._hoverBackgroundColor=e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor=e}get hoverBackgroundColor(){return this._hoverBackgroundColor}set hoverBackgroundColor(e){this._hoverBackgroundColor=e}toChartReadable(){return{backgroundColor:this.backgroundColor,hoverBackgroundColor:this.hoverBackgroundColor}}}},"+Two":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("6FRn"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[s.a],imports:[[n.c,r.d]]}),e})()},"+dED":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("Ymxs"),r=i("xoOP"),o=i("B1Fc"),a=i("3Pt+"),c=i("sYmb");let l=(()=>{class e extends o.a{constructor(e,t,i,s,r,o){super(e,t,i,s,r),this.element=e,this.renderer=t,this.viewContainer=i,this.toaster=s,this.model=r,this.translateService=o,this.maxNumber=21474836,this.minNumber=0,this.decimal=!0,this.maxNumberOfDecimals=2,this.allowedValues=[],this.inputChange=new n.n,this.inputCharacterChange=new n.n}onInput(e){if(this.isAllowsedValue(e))return this.model.valueAccessor.writeValue(e),void this.inputCharacterChange.emit(e);let t;this.minNumber<0&&e.startsWith("-")&&(t=!0),e=(e=e.replace(/,/g,".")).replace(this.decimal?/[^0-9.]/g:/[^0-9]/g,""),t&&(e="-"+e);const i=e.indexOf(".");if(-1!=i){const t=(e=e.substring(0,i+this.maxNumberOfDecimals+1)).lastIndexOf(".");i!=t&&(e=e.substring(0,t))}this.validate(e,!0)?this.inputCharacterChange.emit(Number(e)):e&&Object(r.u)(e)&&Number(e)>this.maxNumber&&(e=e.substring(0,e.length-1)),this.model.valueAccessor.writeValue(e)}onChange(){let e=this.element.nativeElement.value||"0";if(this.isAllowsedValue(e))return this.model.valueAccessor.writeValue(e),void this.emitOnChange(e);if(!this.validate(e))return void this.model.valueAccessor.writeValue(this.ngModel);const t=Number(e);this.decimal||Number(e)%1==0?this.decimal&&Number(e)%1!=0&&(e=(Math.round(100*Number(e))/100).toString()):e=Math.floor(t).toString(),this.templateError&&this.viewContainer.clear(),this.renderer.removeClass(this.element.nativeElement,this.errorClass);const i=Number(e);this.model.valueAccessor.writeValue(i),this.emitOnChange(i)}emitOnChange(e){this.inputChange.emit(e)}isAllowsedValue(e){return this.allowedValues&&this.allowedValues.indexOf(e)>-1}validate(e,t){const i=this.translateService.instant("SHARED_MODULES.INPUT_NUMBER.NUMBER_INVALID_ERROR_MSG");if(!Object(r.u)(e))return this.handleError(i,t),!1;const n=Number(e),s=this.translateService.instant("SHARED_MODULES.INPUT_NUMBER.NUMBER_TOO_SMALL_ERROR_MSG",{minNumber:this.minNumber});if(n<this.minNumber)return this.handleError(s,t),!1;if(n>this.maxNumber){const e=this.translateService.instant("SHARED_MODULES.INPUT_NUMBER.NUMBER_TOO_BIG_ERROR_MSG",{maxNumber:this.maxNumber});return this.handleError(e,t),!1}return!0}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.F),n.Rb(n.P),n.Rb(s.a),n.Rb(a.v),n.Rb(c.f))},e.\u0275dir=n.Mb({type:e,selectors:[["","inputNumber",""]],hostBindings:function(e,t){1&e&&n.jc("input",(function(e){return t.onInput(e.target.value)}))("change",(function(){return t.onChange()}))},inputs:{maxNumber:"maxNumber",minNumber:"minNumber",decimal:"decimal",maxNumberOfDecimals:"maxNumberOfDecimals",allowedValues:"allowedValues"},outputs:{inputChange:"inputChange",inputCharacterChange:"inputCharacterChange"},features:[n.zb]}),e})()},"+yX9":function(e,t,i){"use strict";i.d(t,"a",(function(){return _})),i.d(t,"b",(function(){return R}));var n=i("tk/3"),s=i("FwEu"),r=i("k2Yt"),o=i("1Tmk"),a=i("XNiG"),c=i("2Vo4"),l=i("z6cu"),u=i("lJxs"),d=i("vkgz"),h=i("JIr8"),p=i("fkOE"),b=i("DVUX"),f=i("pCw1"),m=i("wHJU"),g=i("SO3W");class v{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._policyId=null==e?void 0:e.policyId,this._userId=null==e?void 0:e.userId,this._balance=null==e?void 0:e.balance,this._used=null==e?void 0:e.used,this._policy=null==e?void 0:e.policy}get id(){return this._id}get workspaceId(){return this._workspaceId}get policyId(){return this._policyId}get userId(){return this._userId}get balance(){return this._balance}get used(){return this._used}get policy(){return this._policy}}var C=i("D2Bs"),E=i("GYbH");class w{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._policyId=null==e?void 0:e.policyId,this._userId=null==e?void 0:e.userId,this._date=null==e?void 0:e.date,this._authorName=null==e?void 0:e.authorName,this._balance=null==e?void 0:e.balance,this._action=null==e?void 0:e.action,this._note=null==e?void 0:e.note,this._timeOffPeriod=new E.a(null==e?void 0:e.timeOffPeriod),this._timeUnit=null==e?void 0:e.timeUnit}get id(){return this._id}get workspaceId(){return this._workspaceId}get policyId(){return this._policyId}get userId(){return this._userId}get date(){return this._date}get authorName(){return this._authorName}get balance(){return this._balance}get action(){return this._action}get note(){return this._note}get timeOffPeriod(){return this._timeOffPeriod}get timeUnit(){return this._timeUnit}}var S=i("hkzH"),y=i("saCy"),O=i("yK97"),A=i("wd/R"),k=i("Y/0s"),T=i("uI7B"),D=i("fXoL"),I=i("sYmb"),_=function(e){return e[e.CREATED=0]="CREATED",e[e.DELETED=1]="DELETED",e[e.APPROVED=2]="APPROVED",e[e.REJECTED=3]="REJECTED",e}({});let R=(()=>{class e{constructor(e,t,i,n){this.http=e,this.toaster=t,this.workspaceService=i,this.translateService=n,this.requestUpdated=new a.a,this.requestCreated=new a.a,this.holidaysChanged=new a.a,this.hasPendingRequests=new a.a,this.policiesUpdated=new a.a,this.balanceAdjusted=new a.a,this.assignments=new c.a(null)}getTimeOffPolicies(e){var t,i;const s=this.workspaceService.getDefaultWorkspaceId(),r=(new n.h).append("page",(null===(t=e.page)||void 0===t?void 0:t.toString())||"1").append("page-size",(null===(i=e.limit)||void 0===i?void 0:i.toString())||"40").append("name",e.name||"").append("status",e.status||"ALL");return this.http.get(`${p.f}/workspaces/${s}/policies`,{params:r}).pipe(Object(u.a)(e=>e.map(e=>new f.a(e))),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get policies failed.")))}createTimeOffPolicy(e){var t,i,n,s,r,o;const a=this.workspaceService.getDefaultWorkspaceId(),c={name:e.name,allowNegativeBalance:e.allowNegativeBalance,allowHalfDay:e.allowHalfDay,archived:e.archived,timeUnit:e.timeUnit,everyoneIncludingNew:e.everyoneIncludingNew,users:{contains:null===(t=e.users)||void 0===t?void 0:t.contains,ids:null===(i=e.users)||void 0===i?void 0:i.ids,status:null===(n=e.users)||void 0===n?void 0:n.status},userGroups:{contains:null===(s=e.userGroups)||void 0===s?void 0:s.contains,ids:null===(r=e.userGroups)||void 0===r?void 0:r.ids,status:null===(o=e.userGroups)||void 0===o?void 0:o.status},approve:{requiresApproval:e.approve.requiresApproval,teamManagers:e.approve.teamManagers,specificMembers:e.approve.specificMembers}};return e.automaticAccrual.active&&(c.automaticAccrual={amount:e.automaticAccrual.amount,period:e.automaticAccrual.period,timeUnit:e.timeUnit}),e.approve.specificMembers&&(c.approve.userIds=e.approve.userIds),this.http.post(`${p.f}/workspaces/${a}/policies`,c).pipe(Object(u.a)(e=>new f.a(e)),Object(d.a)(()=>{this.policiesUpdated.next(!0),this.toaster.pop("success",this.translateService.instant("PTO.POLICY.CREATE_SUCCESS_MESSAGE",{policyName:e.name}))},t=>{var i;(null===(i=t.error)||void 0===i?void 0:i.message)&&t.error.message.includes("[name]")?this.toaster.pop("error",this.translateService.instant("PTO.POLICY.ALREADY_EXISTS_MESSAGE",{policyName:e.name})):this.toaster.pop("error",t.error&&t.error.message||this.translateService.instant("PTO.POLICY.CREATE_POLICY_FAILED"))}))}editTimeOffPolicy(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId(),s={name:t.name,allowNegativeBalance:t.allowNegativeBalance,allowHalfDay:t.allowHalfDay,archived:i,timeUnit:t.timeUnit,everyoneIncludingNew:t.everyoneIncludingNew,users:{contains:t.users.contains,ids:t.users.ids,status:t.users.status},userGroups:{contains:t.userGroups.contains,ids:t.userGroups.ids,status:t.userGroups.status},approve:{requiresApproval:t.approve.requiresApproval,teamManagers:t.approve.teamManagers,specificMembers:t.approve.specificMembers}};return t.approve.specificMembers&&(s.approve.userIds=t.approve.userIds),t.automaticAccrual.period&&(s.automaticAccrual={amount:t.automaticAccrual.amount,period:t.automaticAccrual.period,timeUnit:t.timeUnit}),this.http.put(`${p.f}/workspaces/${n}/policies/${e}`,s).pipe(Object(u.a)(e=>new f.a(e)),Object(d.a)(()=>{this.policiesUpdated.next(!0)},e=>this.toaster.pop("error",e.error&&e.error.message||"Edit policy failed.")))}restorePolicy(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.f}/workspaces/${t}/policies/${e}/restore`,{}).pipe(Object(u.a)(e=>new f.a(e)),Object(d.a)(()=>{this.policiesUpdated.next(!0),this.toaster.pop("success",this.translateService.instant("PTO.POLICY.UPDATE_POLICY_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||"Restore policy failed.")))}archivePolicy(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.f}/workspaces/${t}/policies/${e}/archive`,{}).pipe(Object(u.a)(e=>new f.a(e)),Object(d.a)(()=>{this.policiesUpdated.next(!0),this.toaster.pop("success",this.translateService.instant("PTO.POLICY.UPDATE_POLICY_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||"Archive policy failed.")))}getTimeOffPolicy(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`${p.f}/workspaces/${t}/policies/${e}`).pipe(Object(u.a)(e=>new f.a(e)),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get policy failed.")))}deleteTimeOfPolicy(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`${p.f}/workspaces/${t}/policies/${e}`).pipe(Object(d.a)(()=>{this.policiesUpdated.next(!0),this.toaster.pop("success",this.translateService.instant("PTO.POLICY.DELETE_POLICY_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("PTO.POLICY.DELETE_POLICY_FAILED"))))}getHolidaysOf(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=new n.h;return(null==e?void 0:e.userId)&&(i=i.append("assigned-to",e.userId)),(null==e?void 0:e.start)&&(null==e?void 0:e.end)&&(i=i.append("start",e.start),i=i.append("end",e.end)),this.http.get(`${p.f}/workspaces/${t}/holidays/inPeriod`,{params:i}).pipe(Object(u.a)(e=>e.map(e=>this.setPeriodForHoliday(e))),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get holidays failed.")))}getAllHolidays(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=new n.h;return e&&(i=i.append("assigned-to",e)),this.http.get(`${p.f}/workspaces/${t}/holidays`,{params:i}).pipe(Object(u.a)(e=>e.map(e=>this.setPeriodForHoliday(e))),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get holidays failed.")))}createHoliday(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`${p.f}/workspaces/${t}/holidays`,{name:e.name,users:{contains:e.users.contains,ids:e.users.ids,status:e.users.status},userGroups:{contains:e.userGroups.contains,ids:e.userGroups.ids,status:e.userGroups.status},datePeriod:{startDate:e.period.start,endDate:e.period.end},occursAnnually:e.occursAnnually,everyoneIncludingNew:e.everyoneIncludingNew}).pipe(Object(u.a)(e=>this.setPeriodForHoliday(e)),Object(d.a)(()=>{this.toaster.pop("success",this.translateService.instant("PTO.HOLIDAY.CREATE_SUCCESS_MESSAGE",{holidayName:e.name}))},t=>{var i;(null===(i=t.error)||void 0===i?void 0:i.message)&&t.error.message.includes("[name]")?this.toaster.pop("error",this.translateService.instant("PTO.HOLIDAY.ALREADY_EXISTS_MESSAGE",{holidayName:e.name})):this.toaster.pop("error",t.error&&t.error.message||this.translateService.instant("PTO.HOLIDAY.CREATE_HOLIDAY_FAILED"))}))}editHoliday(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`${p.f}/workspaces/${i}/holidays/${t}`,{name:e.name,users:{contains:e.users.contains,ids:e.users.ids,status:e.users.status},userGroups:{contains:e.userGroups.contains,ids:e.userGroups.ids,status:e.userGroups.status},datePeriod:{startDate:e.period.start,endDate:e.period.end},occursAnnually:e.occursAnnually,everyoneIncludingNew:e.everyoneIncludingNew}).pipe(Object(u.a)(e=>this.setPeriodForHoliday(e)),Object(d.a)(()=>{this.toaster.pop("success",this.translateService.instant("PTO.HOLIDAY.UPDATE_SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("PTO.HOLIDAY.UPDATE_HOLIDAY_FAILED"))}))}deleteHoliday(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`${p.f}/workspaces/${t}/holidays/${e}`).pipe(Object(u.a)(e=>this.setPeriodForHoliday(e)),Object(d.a)(()=>{this.toaster.pop("success",this.translateService.instant("PTO.HOLIDAY.DELETE_HOLIDAY_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("PTO.HOLIDAY.DELETE_HOLIDAY_FAILED"))))}createTimeOffRequest(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n={timeOffPeriod:e.timeOffPeriod.toObject(),note:e.note};return this.http.post(`${p.f}/workspaces/${i}/policies/${t}/requests`,n).pipe(Object(u.a)(e=>new g.a(e)),Object(d.a)(e=>{this.requestUpdated.next(_.CREATED),this.requestCreated.next(e),this.hasPendingRequests.next(e.status.statusType===y.a.PENDING)},e=>this.toaster.pop("error",e.error&&e.error.message||"Create time off request failed.")))}deleteTimeOffRequest(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`${p.f}/workspaces/${i}/policies/${t}/requests/${e}`).pipe(Object(u.a)(e=>new g.a(e)),Object(d.a)(()=>{this.requestUpdated.next(_.DELETED),this.toaster.pop("success",this.translateService.instant("PTO.REQUEST.REJECT_WITHDRAWN_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("PTO.REQUEST.REJECT_WITHDRAWN_FAILED"))))}approveTimeOffRequest(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.f}/workspaces/${i}/policies/${t}/requests/${e}/approve`,{}).pipe(Object(u.a)(e=>new g.a(e)),Object(d.a)(()=>{this.requestUpdated.next(_.APPROVED),this.toaster.pop("success",this.translateService.instant("PTO.REQUEST.APPROVE_REQUEST_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("PTO.REQUEST.APPROVE_REQUEST_FAILED"))))}rejectTimeOffRequest(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.f}/workspaces/${n}/policies/${t}/requests/${e}/reject`,{rejectionNote:i}).pipe(Object(u.a)(e=>new g.a(e)),Object(d.a)(()=>{this.requestUpdated.next(_.REJECTED),this.toaster.pop("success",this.translateService.instant("PTO.REQUEST.REJECT_REQUEST_SUCCESS"))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("PTO.REQUEST.REJECT_REQUEST_FAILED"))))}getPolicyAssignments(){const e=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`${p.f}/workspaces/${e}/policies/assignments`).pipe(Object(u.a)(e=>e.map(e=>new v(e))),Object(d.a)(e=>{this.assignments.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||"Get assignments failed.")))}getTimeOffRequests(t){var i,n,s,r,o,a;const c=this.workspaceService.getDefaultWorkspaceId(),l={start:null===(i=null==t?void 0:t.start)||void 0===i?void 0:i.toString(),end:null===(n=null==t?void 0:t.end)||void 0===n?void 0:n.toString(),timeline:null==t?void 0:t.timeLine,page:null==t?void 0:t.page,pageSize:null==t?void 0:t.pageSize,status:null==t?void 0:t.status,users:{contains:e.getContainsFilterUsers(t),ids:(null===(s=t.users)||void 0===s?void 0:s.ids)||[],status:(null===(r=t.users)||void 0===r?void 0:r.status)||"ALL"},userGroups:{contains:e.getContainsFilterUserGroups(t),ids:(null===(o=t.userGroups)||void 0===o?void 0:o.ids)||[],status:(null===(a=t.userGroups)||void 0===a?void 0:a.status)||"ALL"}};return this.http.post(`${p.f}/workspaces/${c}/requests`,l).pipe(Object(u.a)(e=>({requests:e.requests.map(e=>new g.a(e)),count:e.count})),Object(d.a)(e=>{(null==t?void 0:t.status.includes("PENDING"))&&this.hasPendingRequests.next(e.requests.filter(e=>e.status.statusType===y.a.PENDING&&e.canBeApproved).length>0)},e=>this.toaster.pop("error",e.error&&e.error.message||"Get requests failed.")))}static getContainsFilterUserGroups(e){var t,i,n,s,r;return((null===(t=e.users)||void 0===t?void 0:t.ids)&&0!==(null===(i=e.users)||void 0===i?void 0:i.ids.length)||(null===(n=e.userGroups)||void 0===n?void 0:n.ids)&&0!==(null===(s=e.userGroups)||void 0===s?void 0:s.ids.length))&&(null===(r=e.userGroups)||void 0===r?void 0:r.contains)||S.d.DOES_NOT_CONTAIN}static getContainsFilterUsers(e){var t,i,n,s,r;return((null===(t=e.users)||void 0===t?void 0:t.ids)&&0!==(null===(i=e.users)||void 0===i?void 0:i.ids.length)||(null===(n=e.userGroups)||void 0===n?void 0:n.ids)&&0!==(null===(s=e.userGroups)||void 0===s?void 0:s.ids.length))&&(null===(r=e.users)||void 0===r?void 0:r.contains)||S.d.DOES_NOT_CONTAIN}getTimeLine(t){var i,n,s,r;const o=this.workspaceService.getDefaultWorkspaceId(),a={start:null==t?void 0:t.start,end:null==t?void 0:t.end,users:{contains:e.getContainsFilterUsers(t),ids:null===(i=t.users)||void 0===i?void 0:i.ids,status:null===(n=t.users)||void 0===n?void 0:n.status},userGroups:{contains:e.getContainsFilterUserGroups(t),ids:null===(s=t.userGroups)||void 0===s?void 0:s.ids,status:null===(r=t.userGroups)||void 0===r?void 0:r.status}};return this.http.post(`${p.f}/workspaces/${o}/timeline`,a).pipe(Object(u.a)(e=>e.users.map(e=>new k.a(e))),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get timeline failed.")))}getBalanceForUser(e,t){var i,s;const r=this.workspaceService.getDefaultWorkspaceId();let o=new n.h;return e.page&&(o=o.append("page",null===(i=null==e?void 0:e.page)||void 0===i?void 0:i.toString())),e.pageSize&&(o=o.append("page-size",null===(s=null==e?void 0:e.pageSize)||void 0===s?void 0:s.toString())),e.sort&&(o=o.append("sort",null==e?void 0:e.sort)),e.sortOrder&&(o=o.append("sort-order",null==e?void 0:e.sortOrder)),e.withArchived&&(o=o.append("with-archived",null==e?void 0:e.withArchived)),this.http.get(`${p.f}/workspaces/${r}/balance/user/${t}`,{params:o}).pipe(Object(u.a)(e=>({balances:e.balances.map(e=>new C.a(e)),count:e.count})),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get balance failed.")))}getBalanceForPolicy(e,t){var i,s;const r=this.workspaceService.getDefaultWorkspaceId();let o=new n.h;return e.page&&(o=o.append("page",null===(i=null==e?void 0:e.page)||void 0===i?void 0:i.toString())),e.pageSize&&(o=o.append("page-size",null===(s=null==e?void 0:e.pageSize)||void 0===s?void 0:s.toString())),e.sort&&(o=o.append("sort",null==e?void 0:e.sort)),e.sortOrder&&(o=o.append("sort-order",null==e?void 0:e.sortOrder)),this.http.get(`${p.f}/workspaces/${r}/balance/policy/${t}`,{params:o}).pipe(Object(u.a)(e=>({balances:e.balances.map(e=>new C.a(e)),count:e.count})),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get balance failed.")))}adjustBalance(e,t,i,n){const s=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.f}/workspaces/${s}/balance/policy/${t}`,{userIds:e,note:i,value:n}).pipe(Object(d.a)(()=>{this.balanceAdjusted.next(!0)},e=>this.toaster.pop("error",e.error&&e.error.message||"Adjust balance failed.")))}balanceHistory(e,t,i,s){const r=this.workspaceService.getDefaultWorkspaceId();let o=new n.h;return i&&(o=o.append("page",null==i?void 0:i.toString())),s&&(o=o.append("page-size",null==s?void 0:s.toString())),this.http.get(`${p.f}/workspaces/${r}/policies/${e}/users/${t}`,{params:o}).pipe(Object(u.a)(e=>e.map(e=>new w(e))),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get balance history failed.")))}getSpecificUsers(e,t=!1){var i,s,o;const a=this.workspaceService.getDefaultWorkspaceId();let c=new n.h;return e.page&&(c=c.append("page",null===(i=null==e?void 0:e.page)||void 0===i?void 0:i.toString())),e.pageSize&&(c=c.append("page-size",null===(s=null==e?void 0:e.limit)||void 0===s?void 0:s.toString())),e.name&&(c=c.append("search",null===(o=null==e?void 0:e.name)||void 0===o?void 0:o.toString())),e.status&&(c=c.append("status",null==e?void 0:e.status)),t&&(c=c.append("filter-team","true")),this.http.get(`${p.f}/workspaces/${a}/specific-member/users`,{params:c}).pipe(Object(u.a)(e=>({users:e.members.map(e=>new r.a(e)),userCount:e.count})),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get members failed.")))}filterUsersByStatus(e,t){const i=this.workspaceService.getDefaultWorkspaceId();let s=new n.h;return e.status&&(s=s.append("status",null==e?void 0:e.status)),this.http.post(`${p.f}/workspaces/${i}/specific-member/users/status`,t,{params:s}).pipe(Object(u.a)(e=>e),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get members failed.")))}getAllSpecificUsers(e){var t,i,s;const o=this.workspaceService.getDefaultWorkspaceId();let a=new n.h;return e.page&&(a=a.append("page",null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())),e.pageSize&&(a=a.append("page-size",null===(i=null==e?void 0:e.limit)||void 0===i?void 0:i.toString())),e.name&&(a=a.append("search",null===(s=null==e?void 0:e.name)||void 0===s?void 0:s.toString())),e.status&&(a=a.append("status",null==e?void 0:e.status)),this.http.get(`${p.f}/workspaces/${o}/specific-member/all-users`,{params:a}).pipe(Object(u.a)(e=>({users:e.members.map(e=>new r.a(e)),userCount:e.count})),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get members failed.")))}getSpecificGroups(e){var t,i,s;const o=this.workspaceService.getDefaultWorkspaceId();let a=new n.h;return e.page&&(a=a.append("page",null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())),e.pageSize&&(a=a.append("page-size",null===(i=null==e?void 0:e.limit)||void 0===i?void 0:i.toString())),e.name&&(a=a.append("search",null===(s=null==e?void 0:e.name)||void 0===s?void 0:s.toString())),this.http.get(`${p.f}/workspaces/${o}/specific-member/user-groups`,{params:a}).pipe(Object(u.a)(e=>({groups:e.members.map(e=>new r.a(e)),groupsCount:e.count})),Object(d.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||"Get members failed.")))}getUsers(e,t){let i=e.status;"ALL"===i?i=[s.a.ACTIVE,s.a.INACTIVE]:i||(i=[s.a.ACTIVE,s.a.INACTIVE,s.a.PENDING]);const o=(new n.h).append("email",e.email||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"").append("page-size",e.limit||"").append("statuses",i);return this.http.get(`/users/workspaces/${t}/with-pending`,{params:o}).pipe(Object(u.a)(e=>(e.users=e.users.map(e=>new r.a(e)),e)),Object(d.a)(e=>{this.workspaceService.allUsers$.next(e)}))}setPeriodForHoliday(e){const t=new m.a(e);return t.period=new O.a({start:A(t.datePeriod.startDate).startOf("day"),end:A(t.datePeriod.endDate).endOf("day")}),t}getPoliciesAssignedToUser(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`${p.f}/workspaces/${t}/policies/users/${e}`).pipe(Object(h.a)(e=>(this.toaster.pop("error",e.error&&e.error.message||"Get policies assigned to users failed."),Object(l.a)(e))))}getPolicyAssignmentsForUser(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`${p.f}/workspaces/${t}/policies/assignments/users/${e}`).pipe(Object(u.a)(e=>e.map(e=>new v(e))),Object(h.a)(e=>(this.toaster.pop("error",e.error&&e.error.message||"Get policies assignments for user failed."),Object(l.a)(e))))}createTimeOffRequestForUser(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`${p.f}/workspaces/${t}/policies/${e.policyId}/users/${e.userId}/requests`,{timeOffPeriod:e.timeOffPeriod.toObject(),note:e.note}).pipe(Object(h.a)(e=>(this.toaster.pop("error",e.error&&e.error.message||"Get policies assignments for user failed."),Object(l.a)(e))),Object(u.a)(e=>new g.a(e)),Object(d.a)(e=>{this.requestUpdated.next(_.CREATED),this.requestCreated.next(e),this.hasPendingRequests.next(e.status.statusType===y.a.PENDING)}))}checkIfSuperiorOfTeamMembersHaveAssignedPolicies(){const e=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`${p.f}/workspaces/${e}/policies/assignments/team`).pipe(Object(h.a)(e=>(this.toaster.pop("error",e.error.message),Object(l.a)(e))))}getTeamMembers(e,t=!1){const i=this.workspaceService.getDefaultWorkspaceId();let s=new n.h;return s=s.append("page",e.page.toString()),s=s.append("status",e.status),(e.name||e.email)&&(s=s.append("search",e.name||e.email)),this.http.get(`${p.f}/workspaces/${i}/${t?"admin":"manager"}/users`,{params:s}).pipe(Object(h.a)(e=>Object(l.a)(e)),Object(u.a)(e=>e.members.map(e=>new T.a(e))))}}return e.\u0275fac=function(t){return new(t||e)(D.fc(n.c),D.fc(b.d),D.fc(o.a),D.fc(I.f))},e.\u0275prov=D.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"/2Gs":function(e,t,i){"use strict";i.d(t,"b",(function(){return b})),i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("lvCY"),r=i("Ymxs"),o=i("cpn4"),a=i("1G5W"),c=i("XNiG"),l=i("EcEN"),u=i("sYmb"),d=i("ofXK");const h=["fileInput"];function p(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"label",1),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Xb(4,"input",2,3),n.jc("change",(function(){return n.Oc(e),n.nc().uploadFile()})),n.Wb(),n.Ub()}if(2&e){const e=n.nc();n.Cb(1),n.Hb("cl-disabled",e.disabled),n.xc("for",e.uid),n.wc("ngClass",e.btnClasses),n.Cb(1),n.bd(" ",n.pc(3,9,e.text),"\n"),n.Cb(2),n.xc("id",e.uid),n.xc("name",e.uid),n.wc("disabled",e.importInProgress||e.disabled)("accept",e.accept)}}var b=function(e){return e.IMAGES="image/*",e.XML="text/xml",e.CSV=".csv",e}({}),f=function(e){return e.IMAGE="image",e.CONFIG="config",e}({});let m=(()=>{class e{constructor(e,t,i,s){this.fileService=e,this.toaster=t,this.cd=i,this.translateService=s,this.text="SHARED_MODULES.BTN_UPLOAD_FILE.CHOOSE_FILE_TEXT",this.btnClasses="cl-btn cl-btn-primary",this.onUploaded=new n.n,this.onError=new n.n,this.onUploadStart=new n.n,this.maxMB=1,this.accept=b.IMAGES,this.isVisible=!0,this.unsubscribe$=new c.a}ngOnInit(){this.uid=Object(l.v4)()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}uploadFile(){const e=this.inputEl.nativeElement,t=e.files.length,i=new FormData,n=this.accept===b.IMAGES?f.IMAGE:f.CONFIG;if(t>0&&e.files.item(0)){const t=e.files.item(0),r=t.type;if(this.accept===b.IMAGES&&s.v.indexOf(r)<0)return void this.toaster.pop("error","Supported Formats are: png, jpg, gif.");if(this.accept===b.XML&&r!==this.accept){const e=this.translateService.instant("GLOBAL.UPLOAD_TYPE_ERROR_MESSAGE",{accept:this.accept,type:r});return void this.toaster.pop("error",e)}if(this.accept===b.CSV&&r&&r!==this.accept&&"text/csv"!==r&&"application/vnd.ms-excel"!==r){const e=this.translateService.instant("SHARED_MODULES.BTN_UPLOAD_FILE.UPLOAD_CSV_FILE_TYPE_ERROR_MSG",{type:r});return void this.toaster.pop("error",e)}if(t.size>1024*this.maxMB*1024){const e=this.translateService.instant("SHARED_MODULES.BTN_UPLOAD_FILE.FILE_SIZE_ERROR_MSG",{size:this.maxMB});return void this.toaster.pop("error",e)}i.append("file",t),this.sendRequest(i,n,t.name),this.clearInput()}}sendRequest(e,t,i){this.inProgress=!0,this.onUploadStart.emit(),this.fileService.uploadFile(e,t).pipe(Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.onUploaded.emit(e.url),this.inProgress=!1},this.errorCallback.bind(this))}errorCallback(e){this.inProgress=!1,this.clearInput(),this.onError.emit(e),this.resetView()}clearInput(){try{this.inputEl.nativeElement.value=""}catch(e){}}resetView(){this.isVisible=!1,this.isVisible=!0,this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(r.a),n.Rb(n.h),n.Rb(u.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["btn-upload-file"]],viewQuery:function(e,t){var i;1&e&&n.gd(h,!0),2&e&&n.Kc(i=n.kc())&&(t.inputEl=i.first)},inputs:{text:"text",disabled:"disabled",btnClasses:"btnClasses",maxMB:"maxMB",accept:"accept"},outputs:{onUploaded:"onUploaded",onError:"onError",onUploadStart:"onUploadStart"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cl-btn","pointer","cl-mb-0",3,"ngClass","for"],["type","file","tabindex","0",1,"pointer",2,"width","0","overflow","hidden",3,"id","disabled","name","accept","change"],["fileInput",""]],template:function(e,t){1&e&&n.Xc(0,p,6,11,"ng-container",0),2&e&&n.wc("ngIf",t.isVisible)},directives:[d.u,d.r],pipes:[u.e],encapsulation:2}),e})()},"/DYx":function(e,t,i){"use strict";i.d(t,"a",(function(){return B}));var n=i("fXoL"),s=i("B01t"),r=i("wd/R"),o=i("lGQG"),a=i("ZHjv"),c=i("jtSf"),l=i("eDxF"),u=i("XNiG"),d=i("pLZG"),h=i("1G5W"),p=i("Kj3r"),b=i("xoOP"),f=i("1Tmk"),m=i("i/9y"),g=i("RWlN"),v=i("bGsH"),C=i("hV/V"),E=i("sYmb"),w=i("1kSV"),S=i("ofXK"),y=i("tyNb");const O=["limitPopover"];function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.jc("click",(function(){return n.Oc(e),n.nc(2).openDatepicker()})),n.Sb(1,"img",10),n.Xb(2,"span",13),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-datepicker-disabled",e.disableOpenPicker),n.Cb(3),n.bd(" ",n.pc(4,3,e.label)," ")}}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",7),n.Xc(1,A,5,5,"div",8),n.Xb(2,"a",9),n.jc("click",(function(){return n.Oc(e),n.nc().openDatepicker()})),n.Sb(3,"img",10),n.Xb(4,"input",11),n.jc("showDaterangepicker",(function(){return n.Oc(e),n.nc().onDatepickerOpen()}))("hideDaterangepicker",(function(t){return n.Oc(e),n.nc().onDatepickerClose(t)}))("selected",(function(t){return n.Oc(e),n.nc().selectedDate(t)})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.label&&!e.isDatepickerOpen),n.Cb(3),n.wc("options",e.options)}}function T(e,t){if(1&e&&(n.Xb(0,"div"),n.Xb(1,"span",17),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(2),n.bd(" ",n.pc(3,1,e.label)," ")}}function D(e,t){if(1&e&&(n.Xb(0,"a",18),n.Sb(1,"input",19),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.wc("options",e.options)}}function I(e,t){if(1&e&&(n.Xb(0,"div",14),n.Xc(1,T,4,3,"div",15),n.Xc(2,D,2,1,"a",16),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.label),n.Cb(1),n.wc("ngIf",!e.label)}}function _(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",20),n.jc("click",(function(){return n.Oc(e),n.nc().changeDateWithArrow(!1)})),n.Sb(1,"img",21),n.Wb()}if(2&e){const e=n.nc();n.wc("disabled",e.disableDatepicker)}}function R(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",20),n.jc("click",(function(){return n.Oc(e),n.nc().changeDateWithArrow(!0)})),n.Sb(1,"img",22),n.Wb()}if(2&e){const e=n.nc();n.wc("disabled",e.disableDatepicker)}}function L(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"SHARED_MODULES.SINGLE_DATE_PICKER.MAX_RANGE_INFO")," "))}const x=function(e,t){return{type:e,count:t}};function P(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",n.qc(2,1,"SHARED_MODULES.SINGLE_DATE_PICKER.AUTOMATIC_DELETE_INFO_WITH_PARAMS",n.Cc(4,x,e.resourceType,e.onlyLastDays))," ")}}const j=function(){return["/upgrade"]};function M(e,t){1&e&&(n.Vb(0),n.Xb(1,"a",25),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Zc(4),n.oc(5,"translate"),n.Ub()),2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(7,j)),n.Cb(1),n.ad(n.pc(3,3,"GLOBAL.UPGRADE_BTN")),n.Cb(2),n.bd(" ",n.pc(5,5,"SHARED_MODULES.SINGLE_DATE_PICKER.UPGRADE_TO_ENTERPRISE_PART_2")," "))}function X(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"SHARED_MODULES.SINGLE_DATE_PICKER.UPGRADE_TO_ENTERPRISE_FULL")," "))}function F(e,t){if(1&e&&(n.Xc(0,P,3,7,"ng-container",15),n.Xc(1,M,6,8,"ng-container",15),n.Xc(2,X,3,3,"ng-container",15)),2&e){const e=n.nc(2);n.wc("ngIf",e.resourceType),n.Cb(1),n.wc("ngIf",e.isAdminOrOwner&&!e.resourceType),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner&&!e.resourceType)}}function W(e,t){if(1&e&&(n.Xc(0,L,3,3,"ng-container",23),n.Xc(1,F,3,3,"ng-template",null,24,n.Yc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.isReportPage)("ngIfElse",e)}}let B=(()=>{class e{constructor(e,t,i,s,r){this.authService=e,this.workspaceService=t,this.translate=i,this.translationStore=s,this.renderer=r,this.resourceType=null,this.dateRangeOut=new n.n,this.isReportPage=!1,this.addOptionsContainer=!1,this.opensTo="left",this.forceDefaultLabel=!1,this.format="YYYY-MM-DD",this.emitDebouncer$=new u.a,this.unsubscribe$=new u.a}set noInitialDateRange(e){e&&(this.label="GLOBAL.SELECT_RANGEE_LABEL"),this._noInitialDateRange=e}get noInitialDateRange(){return this._noInitialDateRange}set timeEntriesDateRange(e){if(!e)return;const t=r.utc(e.start),i=r().set({date:t.date(),month:t.month(),year:t.year()}).startOf("day"),n=r.utc(e.end),s=r().set({date:n.date(),month:n.month(),year:n.year()}).startOf("day");this.daterange={start:i,end:s},this.checkForChanges&&(this.isWeekly&&this.setWeeklyDate(i),this.isDaily&&this.setDailyDate(i),this.setDateToPicker(this.daterange.start,this.daterange.end),this.setLabelAndZoomLevel()),this.lastValues={start:this.daterange.start.clone(),end:this.daterange.end.clone()}}set isWeekly(e){this._isWeekly=e,this.checkForChanges&&this.initRanges()}get isWeekly(){return this._isWeekly}set isDaily(e){this._isDaily=e,this.checkForChanges&&this.initRanges()}get isDaily(){return this._isDaily}set isDailyOrWeekly(e){this._isDailyOrWeekly=e,this.checkForChanges&&this.initRanges()}get isDailyOrWeekly(){return this._isDailyOrWeekly}set enableMonthlyRangesOnly(e){this._enableMonthlyRangesOnly=e,this.checkForChanges&&this.initRanges()}get enableMonthlyRangesOnly(){return this._enableMonthlyRangesOnly}set enableFutureRangesforWeekAndMonth(e){this._enableFutureRangesforWeekAndMonth=e,this.checkForChanges&&this.initRanges()}get enableFutureRangesforWeekAndMonth(){return this._enableFutureRangesforWeekAndMonth}set minDate(e){this._minDate=e||null}get minDate(){return this._minDate}set maxDate(e){this._maxDate=e||null}get maxDate(){return this._maxDate}ngOnInit(){const e=this.authService.getUser();this.timeZone=e&&e.settings?e.settings.timeZone:"Etc/UTC",this.format=e&&e.settings?e.settings.dateFormat:"MM/DD/YYYY",this.startOfWeek=this.startOfWeek||(e&&e.settings?e.settings.weekStart:v.b.MONDAY),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.authService.permissionData$.pipe(Object(d.a)(e=>null!==e),Object(h.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.isAdminOrOwner=e});const t=Object(a.f)(this.startOfWeek);this.daterange||(this.daterange=this.isDaily?{start:r().startOf("day"),end:r().endOf("day")}:{start:t.startOf("day"),end:t.clone().add(6,"days").endOf("day")}),this.initOptions(this.daterange.start,this.daterange.end),this.noInitialDateRange||this.setLabelAndZoomLevel(),this.checkForChanges=!0,this.emitDebouncer$.pipe(Object(p.a)(400)).subscribe(()=>this.emitDateRange()),this.checkHasUnlimitedReports()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}selectedDate(e){this.onSelectedDate(e.start,e.end,e.label),this.forceDefaultLabel&&(this.label=e.label),this.isDateSelected=!0}onDatepickerOpen(){this.isDateSelected=!1,this.isDatepickerOpen=!0}openDatepicker(){this.disableOpenPicker||this.disableDatepicker||this.isDatepickerOpen||(this.picker.datePicker&&this.picker.datePicker.show(),this.cssClass&&this.renderer.addClass(document.getElementsByTagName("body")[0],this.cssClass))}onDatepickerClose(e){this.isDatepickerOpen=!1,this.isDateSelected||(setTimeout(()=>{this.onSelectedDate(e.picker.startDate,e.picker.endDate,e.picker.chosenLabel)}),this.cssClass&&this.renderer.removeClass(document.getElementsByTagName("body")[0],this.cssClass))}onSelectedDate(e,t,i){const n=e.clone(),s=t.clone();this.isWeekly&&!i?this.setWeeklyDate(n):this.isDaily&&!i?this.setDailyDate(n):(this.daterange.start=n,this.daterange.end=s),this.setLabelAndZoomLevel(),this.emitDebouncer$.next()}changeDateWithArrow(e){if(this.isDaily&&this.onlyLastDays){if(this.daterange.start.endOf("day").isAfter(r().startOf("day"))&&e)return;if(this.daterange.start.startOf("day").isBefore(r().subtract(this.onlyLastDays-1,"day").endOf("day"))&&!e)return void this.limitPopover.open()}this.zoomLevel===g.a.YEAR||this.zoomLevel===g.a.MONTH?this.setYearAndMonth(e):this.zoomLevel===g.a.WEEK?this.setWeekAndCustomDate(e):this.setDailyAndCustomDate(e),this.setDateToPicker(this.daterange.start,this.daterange.end),this.setLabelAndZoomLevel(),this.emitDebouncer$.next()}checkHasUnlimitedReports(){!this.isReportPage&&this.workspaceService.defaultWorkspace$&&this.workspaceService.defaultWorkspace$.pipe(Object(d.a)(e=>!!e),Object(h.a)(this.unsubscribe$)).subscribe(e=>this.hasUnlimitedReports=e.features.includes(m.a.UNLIMITED_REPORTS))}setWeeklyDate(e){const t=Object(c.h)(e,this.startOfWeek),i=t.clone().add(6,"day").endOf("day");this.daterange.start=t,this.daterange.end=i,this.setDateToPicker(t,i)}setDailyDate(e){const t=e.clone().startOf("day"),i=t.clone().endOf("day");this.daterange.start=t,this.daterange.end=i,this.setDateToPicker(t,i)}setYearAndMonth(e){const t=this.zoomLevel;let i=this.daterange.end.clone().diff(this.daterange.start,t)+1;i=i<1?1:i,e?(this.daterange.start=this.daterange.start.add(i,t).startOf(t),this.daterange.end=this.daterange.end.add(i,t).endOf(t)):(this.daterange.start=this.daterange.start.subtract(i,t).startOf(t),this.daterange.end=this.daterange.end.subtract(i,t).endOf(t))}setWeekAndCustomDate(e){const t=this.daterange.end.diff(this.daterange.start,"days");e?(this.daterange.start=this.daterange.end.clone(),this.daterange.start.add(1,"day").endOf("day"),this.daterange.end.add(t+1,"day").endOf("day")):(this.daterange.end=this.daterange.start.clone(),this.daterange.start.subtract(1,"day").endOf("day"),this.daterange.end.subtract(1,"day").endOf("day"),this.daterange.start.subtract(t,"day").endOf("day"))}setDailyAndCustomDate(e){e?(this.daterange.start.add(1,"day").startOf("day"),this.daterange.end.add(1,"day").endOf("day")):(this.daterange.start.subtract(1,"day").startOf("day"),this.daterange.end.subtract(1,"day").endOf("day"))}emitDateRange(e=!0){if(!this.hasUnlimitedReports&&Object(b.x)(this.daterange.start,this.daterange.end))return this.limitPopover.open(),void this.setDateToPicker(this.lastValues.start,this.lastValues.end);if(e&&this.lastValues&&this.lastValues.start.isSame(this.daterange.start,"day")&&this.lastValues.end.isSame(this.daterange.end,"day"))return;this.lastValues={start:this.daterange.start.clone(),end:this.daterange.end.clone()};let t=this.daterange.start.clone().startOf("day"),i=this.daterange.end.clone().endOf("day");if(this.getOfUtc||(t=t.add(t.utcOffset(),"m"),i=i.add(i.utcOffset(),"m")),this.dateRangeOut.emit({dateRange:{start:t,end:i,label:this.label},zoomLevel:this.zoomLevel?this.zoomLevel:g.a.WEEK}),this.isWeekly){const e=r.utc(t),i=r().set({date:e.date(),month:e.month(),year:e.year()}).startOf("day"),n=i.clone().add(6,"day").endOf("day");this.setDateToPicker(i,n)}}setDateToPicker(e=this.daterange.start,t=this.daterange.end){this.picker&&(this.picker.datePicker.setStartDate(e.clone()),this.picker.datePicker.setEndDate(t.clone()))}initOptions(e,t){const i=this.translationStore.getCurrentLang(),n=Object(c.e)(i,"dd"),s=r().locale(i);this.options={locale:{format:this.format,firstDay:(["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"].indexOf(this.startOfWeek)+1)%7,daysOfWeek:n,monthNames:s.localeData().monthsShort()},isInvalidDate:e=>Object(c.a)(r(e._d),this.workingDays,this.holidays),alwaysShowCalendars:!0,startDate:e,endDate:t,timePicker:!1,autoApply:!0,opens:this.opensTo||"left",drops:"down",showCustomRangeLabel:!1,minDate:r(0)},this.minDate&&(this.options.minDate=this.minDate),this.maxDate&&(this.options.maxDate=this.maxDate),this.addOptionsContainer&&(this.options.parentEl=$("#container")),this.initRanges()}initRanges(){if(this.disableRanges)return;const e=Object(a.f)(this.startOfWeek);this.isWeekly?(this.options.showRanges=!0,this.options.ranges={[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.LAST_WEEK)]:[r(e.clone()).subtract(1,"week"),r(e.clone()).subtract(1,"day")]}):this.isDaily?(this.options.showRanges=!0,this.options.ranges={[this.translate.instant(l.a.TODAY)]:[r().startOf("day"),r().endOf("day")],[this.translate.instant(l.a.YESTERDAY)]:[r().subtract(1,"day").startOf("day"),r().subtract(1,"day").endOf("day")]}):this.isDailyOrWeekly?(this.options.showRanges=!0,this.options.ranges={[this.translate.instant(l.a.TODAY)]:[r().startOf("day"),r().endOf("day")],[this.translate.instant(l.a.YESTERDAY)]:[r().subtract(1,"day").startOf("day"),r().subtract(1,"day").endOf("day")],[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.LAST_WEEK)]:[r(e.clone()).subtract(1,"week"),r(e.clone()).subtract(1,"day")]}):this.isMinWeek?(this.options.showRanges=!1,this.options.ranges={[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.NEXT_WEEK)]:[r(e.clone()).add(1,"week"),r(e.clone()).add(2,"week").subtract(1,"day")],[this.translate.instant(l.a.NEXT_TWO_WEEKS)]:[r(e.clone()).add(1,"week"),r(e.clone()).add(3,"week").subtract(1,"day")],[this.translate.instant(l.a.THIS_MONTH)]:[r().startOf("month"),r().endOf("month")],[this.translate.instant(l.a.NEXT_MONTH)]:[r().add(1,"month").startOf("month"),r().add(1,"month").endOf("month")],[this.translate.instant(l.a.THIS_YEAR)]:[r().startOf("year"),r().endOf("year")],[this.translate.instant(l.a.NEXT_YEAR)]:[r().add(1,"year").startOf("year"),r().add(1,"year").endOf("year")]}):this.timeOffRequest?(this.options.showRanges=!1,this.options.ranges={[this.translate.instant(l.a.TODAY)]:[r(),r()],[this.translate.instant(l.a.YESTERDAY)]:[r().subtract(1,"day"),r().subtract(1,"day")],[this.translate.instant(l.a.TOMORROW)]:[r().add(1,"day"),r().add(1,"day")],[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.NEXT_WEEK)]:[r(e.clone()).add(1,"week"),r(e.clone()).add(2,"week").subtract(1,"day")],[this.translate.instant(l.a.NEXT_TWO_WEEKS)]:[r(e.clone()).add(1,"week"),r(e.clone()).add(3,"week").subtract(1,"day")]}):this.enableMonthlyRangesOnly?(this.options.showRanges=!0,this.options.ranges={[this.translate.instant(l.a.TODAY)]:[r(),r()],[this.translate.instant(l.a.YESTERDAY)]:[r().subtract(1,"day"),r().subtract(1,"day")],[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.LAST_WEEK)]:[r(e.clone()).subtract(1,"week"),r(e.clone()).subtract(1,"day")],[this.translate.instant(l.a.PAST_TWO_WEEKS)]:[r(e.clone()).subtract(2,"week"),r(e.clone()).subtract(1,"day")],[this.translate.instant(l.a.THIS_MONTH)]:[r().startOf("month"),r().endOf("month")],[this.translate.instant(l.a.LAST_MONTH)]:[r().subtract(1,"month").startOf("month"),r().subtract(1,"month").endOf("month")]}):this.enableFutureRangesforWeekAndMonth?(this.options.showRanges=!0,this.options.ranges={[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.NEXT_WEEK)]:[r(e.clone()).add(1,"week"),r(e.clone()).add(2,"week").subtract(1,"day")],[this.translate.instant(l.a.NEXT_TWO_WEEKS)]:[r(e.clone()).add(1,"week"),r(e.clone()).add(3,"week").subtract(1,"day")],[this.translate.instant(l.a.THIS_MONTH)]:[r().startOf("month"),r().endOf("month")],[this.translate.instant(l.a.NEXT_MONTH)]:[r().add(1,"month").startOf("month"),r().add(1,"month").endOf("month")]}):(this.options.showRanges=!1,this.options.ranges={[this.translate.instant(l.a.TODAY)]:[r(),r()],[this.translate.instant(l.a.YESTERDAY)]:[r().subtract(1,"day"),r().subtract(1,"day")],[this.translate.instant(l.a.THIS_WEEK)]:[e.clone(),r(e.clone()).add(6,"days")],[this.translate.instant(l.a.LAST_WEEK)]:[r(e.clone()).subtract(1,"week"),r(e.clone()).subtract(1,"day")],[this.translate.instant(l.a.PAST_TWO_WEEKS)]:[r(e.clone()).subtract(2,"week"),r(e.clone()).subtract(1,"day")],[this.translate.instant(l.a.THIS_MONTH)]:[r().startOf("month"),r().endOf("month")],[this.translate.instant(l.a.LAST_MONTH)]:[r().subtract(1,"month").startOf("month"),r().subtract(1,"month").endOf("month")],[this.translate.instant(l.a.THIS_YEAR)]:[r().startOf("year"),r().endOf("year")],[this.translate.instant(l.a.LAST_YEAR)]:[r().subtract(1,"year").startOf("year"),r().subtract(1,"year").endOf("year")]})}setLabelAndZoomLevel(){const{labelPrint:e,zoomLevel:t,label:i}=Object(c.d)(this.daterange,this.startOfWeek,this.translate,this.translationStore,this.showYear);this.zoomLevel=t,this.labelPrint=e,(!this.forceDefaultLabel||this.forceDefaultLabel&&Object(c.i)(this.daterange.start))&&(this.label=i)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(f.a),n.Rb(E.f),n.Rb(C.a),n.Rb(n.F))},e.\u0275cmp=n.Lb({type:e,selectors:[["datepicker-range"]],viewQuery:function(e,t){var i;1&e&&(n.gd(s.b,!0),n.gd(O,!0)),2&e&&(n.Kc(i=n.kc())&&(t.picker=i.first),n.Kc(i=n.kc())&&(t.limitPopover=i.first))},inputs:{disableDatepicker:"disableDatepicker",removeArrows:"removeArrows",disableOpenPicker:"disableOpenPicker",onlyLastDays:"onlyLastDays",getOfUtc:"getOfUtc",resourceType:"resourceType",showYear:"showYear",workingDays:"workingDays",holidays:"holidays",isMinWeek:"isMinWeek",disableRanges:"disableRanges",timeOffRequest:"timeOffRequest",noInitialDateRange:"noInitialDateRange",timeEntriesDateRange:"timeEntriesDateRange",isWeekly:"isWeekly",isDaily:"isDaily",isDailyOrWeekly:"isDailyOrWeekly",enableMonthlyRangesOnly:"enableMonthlyRangesOnly",enableFutureRangesforWeekAndMonth:"enableFutureRangesforWeekAndMonth",hasUnlimitedReports:"hasUnlimitedReports",isReportPage:"isReportPage",startOfWeek:"startOfWeek",addOptionsContainer:"addOptionsContainer",opensTo:"opensTo",minDate:"minDate",maxDate:"maxDate",cssClass:"cssClass",forceDefaultLabel:"forceDefaultLabel"},outputs:{dateRangeOut:"dateRangeOut"},decls:11,vars:8,consts:[["id","container","triggers","manual","placement","bottom",1,"cl-btn-group","cl-d-flex",3,"ngbPopover"],["limitPopover","ngbPopover"],["class","cl-d-print-none cl-relative cl-datepicker-wrapper",4,"ngIf"],["class","cl-d-print-none cl-datepicker-wrapper cl-w-100",4,"ngIf"],["class","cl-btn cl-btn-fixed-40 cl-btn-outline-light cl-d-print-none",3,"disabled","click",4,"ngIf"],[1,"cl-btn","cl-text-left","cl-btn-outline-light","pointer","cl-d-none","cl-d-print-block"],["popContentLimit",""],[1,"cl-d-print-none","cl-relative","cl-datepicker-wrapper"],["class","cl-datepicker-fake-input cl-d-flex cl-align-items-center pointer cl-px-2 cl-btn cl-btn-outline-light",3,"cl-datepicker-disabled","click",4,"ngIf"],[1,"cl-btn","cl-btn-outline-light","cl-py-0","cl-px-2","cl-d-flex",2,"opacity","1",3,"click"],["src","assets/images/ui-icons/calendar.svg"],["daterangepicker","",1,"cl-border-0","cl-bg-transparent","cl-datepickerrange","cl-btn","cl-pr-0","cl-text-left",3,"options","showDaterangepicker","hideDaterangepicker","selected"],[1,"cl-datepicker-fake-input","cl-d-flex","cl-align-items-center","pointer","cl-px-2","cl-btn","cl-btn-outline-light",3,"click"],[1,"cl-datepickerrange","cl-pl-2","cl-cut-text","cl-text-left"],[1,"cl-d-print-none","cl-datepicker-wrapper","cl-w-100"],[4,"ngIf"],["class","cl-btn cl-btn-outline-light cl-p-0 cl-pr-2 cl-cursor-default cl-disabled",4,"ngIf"],[1,"cl-d-block","cl-btn","cl-btn-outline-light","cl-datepickerrange"],[1,"cl-btn","cl-btn-outline-light","cl-p-0","cl-pr-2","cl-cursor-default","cl-disabled"],["daterangepicker","",1,"cl-border-0","cl-bg-transparent","cl-datepickerrange","cl-btn","cl-pr-0",3,"options"],[1,"cl-btn","cl-btn-fixed-40","cl-btn-outline-light","cl-d-print-none",3,"disabled","click"],["src","assets/images/ui-icons/chevron-left.svg"],["src","assets/images/ui-icons/chevron-right.svg"],[4,"ngIf","ngIfElse"],["upgradeTemplate",""],[3,"routerLink"]],template:function(e,t){if(1&e&&(n.Xb(0,"div",0,1),n.Xc(2,k,5,2,"div",2),n.Xc(3,I,3,2,"div",3),n.Xc(4,_,2,1,"button",4),n.Xc(5,R,2,1,"button",4),n.Xb(6,"span",5),n.Zc(7),n.oc(8,"translate"),n.Wb(),n.Wb(),n.Xc(9,W,3,2,"ng-template",null,6,n.Yc)),2&e){const e=n.Lc(10);n.wc("ngbPopover",e),n.Cb(2),n.wc("ngIf",!t.disableDatepicker),n.Cb(1),n.wc("ngIf",t.disableDatepicker),n.Cb(1),n.wc("ngIf",!t.removeArrows),n.Cb(1),n.wc("ngIf",!t.removeArrows),n.Cb(2),n.bd(" ",n.pc(8,6,t.labelPrint)," ")}},directives:[w.M,S.u,s.b,y.g],pipes:[E.e],encapsulation:2}),e})()},"/b/a":function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i("BO2n"),s=i("f0Wu"),r=i("sNAh"),o=i("g7VG"),a=i("IP1A"),c=i("fXoL"),l=i("ofXK"),u=i("3Pt+"),d=i("+dED"),h=i("62PR"),p=i("1kSV"),b=i("sYmb");function f(e,t){1&e&&(c.Xb(0,"span",31),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_RATE_TO_WORKSPACE")," "))}const m=function(e){return{userName:e}};function g(e,t){if(1&e&&(c.Xb(0,"span",31),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e){const e=c.nc();c.Cb(1),c.bd(" ",c.qc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_WORKSPACE_MEMBER",c.Bc(4,m,e.user.name))," ")}}function v(e,t){1&e&&(c.Xb(0,"span",31),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_PROJECT")," "))}function C(e,t){1&e&&(c.Xb(0,"span",31),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_TASK")," "))}function E(e,t){if(1&e&&(c.Xb(0,"span",31),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e){const e=c.nc();c.Cb(1),c.bd(" ",c.qc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_ALL_CREATED_BY",c.Bc(4,m,e.user.name))," ")}}function w(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",32),c.Xb(1,"span",33),c.Xb(2,"a",29),c.jc("click",(function(){return c.Oc(e),c.nc().costRate.amount=null})),c.Zc(3),c.oc(4,"translate"),c.Wb(),c.Wb(),c.Wb()}2&e&&(c.Cb(3),c.ad(c.pc(4,1,"SHARED_MODULES.CUSTOM_FIELD.CLEAR_LABEL")))}function S(e,t){1&e&&(c.Sb(0,"div",34),c.oc(1,"translate")),2&e&&(c.xc("popoverTitle",c.pc(1,2,"SHARED_MODULES.COST_RATE.UPGRADE_TEXT")),c.wc("autoClose","outside"))}const y=function(e){return{start:e}};let O=(()=>{class e extends a.a{constructor(){super(...arguments),this._costRate=new o.a}set costRate(e){e&&(this._costRate=new o.a(e),this.costRate.amount=e.amount)}get costRate(){return this._costRate}ngOnInit(){super.ngOnInit(),this.costRate.since=s().startOf("day").toISOString(),this.responseBackup=this.costRate.generateReponse(this.updateSince)}get isModelChanged(){const e=this.costRate.generateReponse(this.updateSince);return!r.a.areResponsesEqual(e,this.responseBackup)}showUnset(){return this.type!==n.a.WORKSPACE&&this.costRate&&null!==this.costRate.amount}save(){if(!this.isModelChanged)return;const e=this.costRate.generateReponse(this.updateSince);this.saveRate.emit(e)}pickedDate({start:e}){this.costRate.since=e}}return e.\u0275fac=function(t){return A(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["cost-rate"]],inputs:{costRate:"costRate"},features:[c.zb],decls:53,vars:48,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],["role","alert",1,"cl-alert","cl-alert-info","cl-fade","cl-show",3,"ngSwitch"],["class","cl-text-break",4,"ngSwitchCase"],["class","cl-text-break",4,"ngSwitchDefault"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-lg-6"],["for","costRate"],[1,"cl-input-group"],["ngbAutofocus","","type","text","inputNumber","","id","costRate","spellcheck","false","autocomplete","off",1,"cl-form-control",3,"placeholder","decimal","ngModel","keyup.enter","inputCharacterChange","inputChange"],["costRateInput",""],["class","cl-input-group-append",4,"ngIf"],[1,"cl-form-row","cl-position-relative"],["class","cl-blocker","ngbPopover","Upgrade to apply retroactively",3,"popoverTitle","autoClose",4,"ngIf"],[1,"cl-form-group","cl-col-12"],[1,"cl-col-12"],[1,"cl-d-flex","cl-align-items-start","cl-align-items-md-center","cl-flex-column","cl-flex-md-row"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","recursiveCostRate","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","recursiveCostRate",1,"cl-custom-control-label"],[1,"cl-d-flex","cl-align-items-center","cl-my-2","cl-my-md-0","cl-ml-n4","cl-ml-md-0"],["placement","right",1,"cl-d-inline-flex","cl-align-items-center",2,"position","relative",3,"maxDate","debounce","mode","textualDate","dateTime","pickedDate"],[1,"cl-form-group","cl-col-12","cl-mt-lg-2"],["type","radio","id","allEntries","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","allEntries",1,"cl-custom-control-label"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-text-break"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],["ngbPopover","Upgrade to apply retroactively",1,"cl-blocker",3,"popoverTitle","autoClose"]],template:function(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Zc(2),c.oc(3,"translate"),c.Wb(),c.Xb(4,"button",2),c.jc("click",(function(){return t.close()})),c.Xb(5,"span"),c.Sb(6,"img",3),c.Wb(),c.Wb(),c.Wb(),c.Xb(7,"div",4),c.Xb(8,"div",5),c.Xc(9,f,3,3,"span",6),c.Xc(10,g,3,6,"span",6),c.Xc(11,v,3,3,"span",6),c.Xc(12,C,3,3,"span",6),c.Xc(13,E,3,6,"span",7),c.Wb(),c.Xb(14,"div",8),c.Xb(15,"div",9),c.Xb(16,"label",10),c.Zc(17),c.oc(18,"translate"),c.Wb(),c.Xb(19,"div",11),c.Xb(20,"input",12,13),c.jc("keyup.enter",(function(){return c.Oc(e),c.Lc(21).blur(),t.save()}))("inputCharacterChange",(function(e){return t.costRate.amount=e}))("inputChange",(function(e){return t.costRate.amount=e})),c.oc(22,"translate"),c.Wb(),c.Xc(23,w,5,3,"div",14),c.Wb(),c.Wb(),c.Wb(),c.Xb(24,"div",15),c.Xc(25,S,2,4,"div",16),c.Xb(26,"label",17),c.Zc(27),c.oc(28,"translate"),c.Wb(),c.Xb(29,"div",18),c.Xb(30,"div",19),c.Xb(31,"div",20),c.Xb(32,"input",21),c.jc("ngModelChange",(function(e){return t.updateSince=e})),c.Wb(),c.Xb(33,"label",22),c.Zc(34),c.oc(35,"translate"),c.Wb(),c.Wb(),c.Xb(36,"div",23),c.Xb(37,"single-date-picker2",24),c.jc("pickedDate",(function(e){return t.pickedDate(e)})),c.Wb(),c.Zc(38),c.oc(39,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Xb(40,"div",25),c.Xb(41,"div",20),c.Xb(42,"input",26),c.jc("ngModelChange",(function(e){return t.updateSince=e})),c.Wb(),c.Xb(43,"label",27),c.Zc(44),c.oc(45,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(46,"div",28),c.Xb(47,"a",29),c.jc("click",(function(){return t.close()})),c.Zc(48),c.oc(49,"translate"),c.Wb(),c.Xb(50,"button",30),c.jc("click",(function(){return t.save()})),c.Zc(51),c.oc(52,"translate"),c.Wb(),c.Wb()}2&e&&(c.Cb(2),c.ad(c.pc(3,28,null===t.costRate.amount?"GLOBAL.SET_RATE_LABEL":"SHARED_MODULES.SHARED.EDIT_RATE_BTN")),c.Cb(6),c.wc("ngSwitch",t.type),c.Cb(1),c.wc("ngSwitchCase",t.rateType.WORKSPACE),c.Cb(1),c.wc("ngSwitchCase",t.rateType.WORKSPACE_MEMBER),c.Cb(1),c.wc("ngSwitchCase",t.rateType.PROJECT),c.Cb(1),c.wc("ngSwitchCase",t.rateType.TASK),c.Cb(5),c.ad(c.pc(18,30,"SHARED_MODULES.COST_RATE.NEW_COST_RATE_LABEL")),c.Cb(3),c.xc("placeholder",c.pc(22,32,"SHARED_MODULES.SHARED.ENTER_RATE_PLACEHOLDER")),c.wc("decimal",!0)("ngModel",t.costRate.amount),c.Cb(3),c.wc("ngIf",t.showUnset()),c.Cb(2),c.wc("ngIf",!t.hasHistoricRateFeature),c.Cb(2),c.ad(c.pc(28,34,"SHARED_MODULES.COST_RATE.APPLY_RATE_TO_LABEL")),c.Cb(5),c.wc("value",!0)("ngModel",t.updateSince),c.Cb(2),c.bd(" ",c.pc(35,36,"SHARED_MODULES.SHARED.ENTRIES_FROM_PART_1")," "),c.Cb(3),c.wc("maxDate",t.maxDate)("debounce",!1)("mode","date_only")("textualDate",!0)("dateTime",c.Bc(46,y,t.costRate.since)),c.Cb(1),c.bd(" ",c.pc(39,38,"SHARED_MODULES.SHARED.ENTRIES_FROM_PART_2")," "),c.Cb(4),c.wc("value",!1)("ngModel",t.updateSince),c.Cb(2),c.bd(" ",c.pc(45,40,"SHARED_MODULES.SHARED.ENTRIES_PAST_FUTURE_INFO")," "),c.Cb(4),c.ad(c.pc(49,42,"GLOBAL.CANCEL_BTN")),c.Cb(2),c.wc("disabled",!t.isModelChanged),c.Cb(1),c.ad(c.pc(52,44,"GLOBAL.SAVE_LABEL")))},directives:[l.y,l.z,l.A,u.c,d.a,u.s,u.v,l.u,u.A,h.a,p.M],pipes:[b.e],encapsulation:2,changeDetection:0}),e})();const A=c.Zb(O)},"/pT+":function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("fXoL"),s=i("XNiG"),r=i("OmiP"),o=i("AY7I"),a=i("SxV6"),c=i("1G5W"),l=i("IzEk"),u=i("hkzH"),d=i("8+Zx"),h=i("ePBx"),p=i("nQ1P"),b=i("Y9C3"),f=i("1Tmk"),m=i("KBaq"),g=i("s5zK"),v=i("rnVd"),C=i("i/9y"),E=i("SvJf"),w=i("Y9WU"),S=i("3Pt+"),y=i("tyNb"),O=i("1kSV"),A=i("sYmb"),k=i("kKK/"),T=i("ofXK"),D=i("rf9C");const I=["dropdown"],_=["scheduleFeaturePopover"];function R(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"dropdown-items",16,17),n.jc("onChanged",(function(t){n.Oc(e);const i=n.nc();return i.visibleToUserGroup=t,i.resetRecipients()})),n.oc(3,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("list",e.userGroupsDropdown)("title",n.pc(3,4,"REPORTS.SHARE_REPORT.VIEW_PERMIT_TOOLTIP"))("value",e.visibleToUserGroup)("isUserGroupEmpty",e.isUserGroupEmpty)}}const L=function(e){return{openAs:e}};function x(e,t){if(1&e&&(n.Xb(0,"div",2),n.Xb(1,"div",7),n.Sb(2,"input",18),n.Xb(3,"label",19),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(4),n.bd(" ",n.qc(5,1,"REPORTS.SHARE_REPORT.OPEN_AS_PARAMETER_LABEL",n.Bc(4,L,e.dateRangeLabel.toLowerCase()))," ")}}function P(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",25),n.jc("click",(function(){return n.Oc(e),n.nc(2).checkTooltip()})),n.Wb()}}function j(e,t){if(1&e&&(n.Xb(0,"div",20),n.Xc(1,P,1,0,"div",21),n.Xb(2,"div",7),n.Sb(3,"input",22),n.Xb(4,"label",23,24),n.Zc(6),n.oc(7,"translate"),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(),t=n.Lc(31);n.Cb(1),n.wc("ngIf",e.disableScheduleToEmail),n.Cb(3),n.wc("ngbPopover",t),n.Cb(2),n.bd(" ",n.pc(7,3,"REPORTS.SHARE_REPORT.MAIL.SCHEDULE_MAIL_LABEL")," ")}}function M(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"span",26),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Xb(4,"dropdown-checkbox-wrapper",27),n.jc("onChange",(function(t){return n.Oc(e),n.nc().recipientSelected(t)})),n.oc(5,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.ad(n.pc(3,5,"REPORTS.SHARE_REPORT.MAIL.RECIPIENTS_LABEL")),n.Cb(2),n.wc("title",n.pc(5,7,e.isSaved?"GLOBAL.USERS_LABEL":"REPORTS.SHARE_REPORT.MAIL.SELECT_USERS_TOOLTIP"))("type",e.ReportFilter.USERS_AND_GROUP)("valuesData",e.scheduleValuesData)("constrainContainsFilter",e.userGroupContainsFilter)}}function X(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",2),n.Xb(1,"dropdown-items",5),n.jc("onChanged",(function(t){return n.Oc(e),n.nc().scheduledReport.type=t})),n.oc(2,"translate"),n.Wb(),n.Xb(3,"span",28),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("value",e.scheduledReport&&e.scheduledReport.type)("list",e.sendReportDropdowns)("title",n.pc(2,4,"REPORTS.SHARE_REPORT.MAIL.SEND_REPORT_TOOLTIP")),n.Cb(3),n.ad(n.pc(5,6,e.scheduledReport&&e.scheduledReport.type==e.ScheduledReportType.MONTHLY?"REPORTS.SHARE_REPORT.MAIL.MAIL_INFO_TEXT_1":"REPORTS.SHARE_REPORT.MAIL.MAIL_INFO_TEXT_2"))}}function F(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"REPORTS.SHARE_REPORT.REPORT_RELATIVE_DATE_LABEL")," "))}const W=function(){return{plan:"pro"}};function B(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",33),n.jc("click",(function(){return n.Oc(e),n.nc(3).addEventToDataLayerAndDismiss()})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.wc("queryParams",n.Ac(4,W)),n.Cb(1),n.bd(" ",n.pc(2,2,"GLOBAL.UPGRADE_BTN")," "))}function N(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",34),n.jc("click",(function(){return n.Oc(e),n.nc(3).modalService.dismissAll()})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.wc("queryParams",n.Ac(4,W)),n.Cb(1),n.bd(" ",n.pc(2,2,"GLOBAL.UPGRADE_BTN")," "))}function G(e,t){if(1&e&&(n.Xc(0,B,3,5,"a",31),n.Xc(1,N,3,5,"ng-template",null,32,n.Yc),n.Zc(3),n.oc(4,"translate")),2&e){const e=n.Lc(2),t=n.nc(2);n.wc("ngIf",!t.everHadPaidSubscription)("ngIfElse",e),n.Cb(3),n.bd(" ",n.pc(4,3,"REPORTS.SHARE_REPORT.UPGRADE_TO_SCEDULE_REPORT_PART_2")," ")}}function U(e,t){if(1&e&&(n.Xc(0,F,3,3,"ng-container",29),n.Xc(1,G,5,5,"ng-template",null,30,n.Yc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",!t.shareForm.value.relativeDateRange)("ngIfElse",e)}}let V=(()=>{class e{constructor(e,t,i,o,a,c,l,d,h){this.formBuilder=e,this.cd=t,this.router=i,this.modalService=o,this.userGroupServiceOld=a,this.workspaceService=c,this.paymentService=l,this.translateService=d,this.analyticsService=h,this.reportName="",this.isPublic=!0,this.fixedDate=!1,this.scheduledReport=null,this.confirmButtonCopy=this.translateService.instant("REPORTS.SHARE_REPORT.CREATE_LINK_BTN"),this.onClose=new n.n,this.onShare=new n.n,this.visibilityDropdowns=[new r.a(!0,this.translateService.instant("REPORTS.SHARE_REPORT.VISIBILITY_OPTIONS_LABELS.PUBLIC")),new r.a(!1,this.translateService.instant("REPORTS.SHARE_REPORT.VISIBILITY_OPTIONS_LABELS.PRIVATE"))],this.sendReportDropdowns=[new r.a(p.a.DAILY,this.translateService.instant("REPORTS.SHARE_REPORT.SHEDULED_REPORT_TYPES_LABELS.DAILY_REPORT_LABEL")),new r.a(p.a.WEEKLY,this.translateService.instant("GLOBAL.WEEKLY_REPORTS_LABEL")),new r.a(p.a.MONTHLY,this.translateService.instant("GLOBAL.MONTHLY_LABEL"))],this.ReportFilter=u.i,this.unsubscribe$=new s.a,this.ScheduledReportType=p.a,this.isSelfHosted=m.a.environment.selfHosted}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasScheduleReportsFeature=this.workspace.hasFeature(C.a.SCHEDULED_REPORTS),this.shareForm=this.formBuilder.group({name:[this.reportName,[o.a.required,o.a.minLength(2)]],fixedDate:[this.fixedDate],relativeDateRange:[this.dateRangeType!==v.a.ABSOLUTE],isScheduledReport:[this.scheduledReport&&this.scheduledReport.type]}),this.userGroupServiceOld.userGroups.pipe(Object(a.a)(),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.userGroupsDropdown=[],this.initUserGroupsForSaveDialog(e)}),this.userGroupServiceOld.getAllUserGroups(),this.subscribeToRelativeDateChanges(),this.initDefaultScheduledReport(),this.scheduleValuesData=d.a.containsFilterToCheckboxValues(this.scheduledReport.recipients,u.k,Object(u.q)()),this.setUserGroupContainsFilter(),this.checkSubscription()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}checkSubscription(){this.isAdminOrOwner&&!this.isSelfHosted&&(this.paymentService.everHadPaidSubscription.pipe(Object(l.a)(1),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.everHadPaidSubscription=e,this.cd.markForCheck()}),this.paymentService.getEverHadSubscription())}get disableScheduleToEmail(){return this.dateRangeType===v.a.ABSOLUTE||!this.shareForm.value.relativeDateRange||!this.hasScheduleReportsFeature}get isScheduleEmailValid(){var e;return!this.shareForm.value.isScheduledReport||(null===(e=this.scheduleValuesData)||void 0===e?void 0:e.isDirty())}recipientSelected(e){this.scheduleValuesData=e}resetRecipients(){this.scheduleValuesData=d.a.clone(this.scheduleValuesData),this.scheduleValuesData.reset(),this.setUserGroupContainsFilter()}navigateToUpgrade(){this.modalService.dismissAll(),this.router.navigate(["/upgrade"])}subscribeToRelativeDateChanges(){this.shareForm.get("relativeDateRange").valueChanges.pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>this.refreshIsScheduleReports(e))}refreshIsScheduleReports(e){e||this.shareForm.patchValue({isScheduledReport:!1})}initUserGroupsForSaveDialog(e){var t;e&&(this.userGroupsDropdown=e.map(e=>new r.a(e.id,"Admins"==e.name?this.translateService.instant("REPORTS.SHARE_REPORT.USER_GROUPS_LABELS.ONLY_ADMINS_LABEL"):e.name)),this.visibleToUserGroup||(this.visibleToUserGroup=null===(t=e[0])||void 0===t?void 0:t.id),this.cd.markForCheck(),this.dropdownItems&&this.dropdownItems.triggerDetection(),0===e.length&&(this.isUserGroupEmpty=!0))}closeModal(){this.onClose.emit()}onSubmit(){setTimeout(()=>{if(this.inProgress)return;this.scheduledReport.recipients=this.scheduleValuesData.getContainsFilter(u.k);const e={name:this.shareForm.value.name.trim(),isPublic:this.isPublic,isRelativeDateRange:this.dateRangeLabel&&this.shareForm.value.relativeDateRange,fixedDate:this.shareForm.value.fixedDate,scheduledReport:this.shareForm.value.isScheduledReport?this.scheduledReport:null};this.isPublic||(e.visibleToUserGroup=this.visibleToUserGroup),this.onShare.emit(e),this.analyticsService.addEvent(new E.a({event:"submit",value:"Create link",section:"Reports",section2:"Summary/Detailed/Weekly",section3:"Share report"}))})}initDefaultScheduledReport(){this.scheduledReport||(this.scheduledReport=new b.a({recipients:{contains:u.d.CONTAINS,ids:[]},type:p.a.WEEKLY}))}setUserGroupContainsFilter(){this.userGroupContainsFilter={contains:u.d.CONTAINS,ids:!this.isPublic&&this.visibleToUserGroup?[this.visibleToUserGroup]:[]}}checkTooltip(){this.disableScheduleToEmail?this.openTooltip():this.scheduleFeaturePopover.close()}openTooltip(){this.scheduleFeaturePopover.isOpen()||this.scheduleFeaturePopover.open()}addEventToDataLayerAndDismiss(){this.modalService.dismissAll(),this.analyticsService.addEvent(new E.a({event:"submit",value:"Pro",section:"Reports",section2:"Summary/Detailed/Weekly",section3:"Share report",section4:"Upgrade"}))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(S.f),n.Rb(n.h),n.Rb(y.d),n.Rb(O.q),n.Rb(h.a),n.Rb(f.a),n.Rb(g.a),n.Rb(A.f),n.Rb(w.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["share-report"]],viewQuery:function(e,t){var i;1&e&&(n.gd(I,!0),n.gd(_,!0)),2&e&&(n.Kc(i=n.kc())&&(t.dropdownItems=i.first),n.Kc(i=n.kc())&&(t.scheduleFeaturePopover=i.first))},inputs:{isSaved:"isSaved",inProgress:"inProgress",reportName:"reportName",isPublic:"isPublic",visibleToUserGroup:"visibleToUserGroup",dateRangeType:"dateRangeType",dateRangeLabel:"dateRangeLabel",fixedDate:"fixedDate",scheduledReport:"scheduledReport",confirmButtonCopy:"confirmButtonCopy",isAdminOrOwner:"isAdminOrOwner"},outputs:{onClose:"onClose",onShare:"onShare"},decls:32,vars:28,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"cl-modal-body"],[1,"cl-form-group"],["for","reportName"],["type","text","ngbAutofocus","","autocomplete","off","formControlName","name","id","reportName",1,"cl-form-control",3,"placeholder"],[1,"cl-make-dropdown-large",3,"value","list","title","onChanged"],["class","cl-form-group",4,"ngIf"],[1,"cl-custom-control","cl-custom-switch"],["formControlName","fixedDate","type","checkbox","id","fixed",1,"cl-custom-control-input"],["for","fixed",1,"cl-custom-control-label"],["src","assets/images/ui-icons/info-9.svg","placement","top",1,"cl-ml-2",3,"ngbTooltip"],["class","cl-form-group cl-relative",4,"ngIf"],[1,"cl-modal-footer"],["tabindex","0",1,"cl-color-blue",3,"click","keyup.enter"],["type","submit","tabindex","0",1,"cl-btn","cl-btn-primary",3,"disabled"],["popContent",""],[3,"list","title","value","isUserGroupEmpty","onChanged"],["dropdown",""],["formControlName","relativeDateRange","type","checkbox","id","relative-range",1,"cl-custom-control-input"],["for","relative-range",1,"cl-custom-control-label"],[1,"cl-form-group","cl-relative"],["class","cl-blocker","style","opacity: 0;",3,"click",4,"ngIf"],["formControlName","isScheduledReport","type","checkbox","id","schedule-to-email",1,"cl-custom-control-input"],["placement","right","triggers","manual","container","body","for","schedule-to-email",1,"cl-custom-control-label",3,"ngbPopover"],["scheduleFeaturePopover","ngbPopover"],[1,"cl-blocker",2,"opacity","0",3,"click"],[1,"cl-mb-1","cl-d-inline-block"],[3,"title","type","valuesData","constrainContainsFilter","onChange"],[1,"cl-mt-1","cl-d-inline-block","cl-opacity-5"],[4,"ngIf","ngIfElse"],["upgradeTemplate",""],["routerLink","/upgrade","clickCloseDropdown","",3,"queryParams","click",4,"ngIf","ngIfElse"],["FreePlanDesktopTempl",""],["routerLink","/upgrade","clickCloseDropdown","",3,"queryParams","click"],["routerLink","/subscription","fragment","plans","clickCloseDropdown","",3,"queryParams","click"]],template:function(e,t){1&e&&(n.Xb(0,"form",0),n.jc("ngSubmit",(function(){return t.onSubmit()})),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"label",3),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Sb(6,"input",4),n.oc(7,"translate"),n.Wb(),n.Xb(8,"div",2),n.Xb(9,"dropdown-items",5),n.jc("onChanged",(function(e){return t.isPublic=e,t.resetRecipients()})),n.oc(10,"translate"),n.Wb(),n.Wb(),n.Xc(11,R,4,6,"div",6),n.Xc(12,x,6,6,"div",6),n.Xb(13,"div",2),n.Xb(14,"div",7),n.Sb(15,"input",8),n.Xb(16,"label",9),n.Zc(17),n.oc(18,"translate"),n.Wb(),n.Sb(19,"img",10),n.oc(20,"translate"),n.Wb(),n.Wb(),n.Xc(21,j,8,5,"div",11),n.Xc(22,M,6,9,"div",6),n.Xc(23,X,6,8,"div",6),n.Wb(),n.Xb(24,"div",12),n.Xb(25,"a",13),n.jc("click",(function(){return t.closeModal()}))("keyup.enter",(function(){return t.closeModal()})),n.Zc(26),n.oc(27,"translate"),n.Wb(),n.Xb(28,"button",14),n.Zc(29),n.Wb(),n.Wb(),n.Wb(),n.Xc(30,U,3,2,"ng-template",null,15,n.Yc)),2&e&&(n.wc("formGroup",t.shareForm),n.Cb(4),n.ad(n.pc(5,16,"REPORTS.SHARED.REPORT_NAME_LABEL")),n.Cb(2),n.xc("placeholder",n.pc(7,18,"GLOBAL.DESCRIPTION_LABEL")),n.Cb(3),n.wc("value",t.isPublic)("list",t.visibilityDropdowns)("title",n.pc(10,20,"REPORTS.EDIT.VISABILITY_HEADER")),n.Cb(2),n.wc("ngIf",!t.isPublic),n.Cb(1),n.wc("ngIf",t.dateRangeLabel),n.Cb(5),n.bd(" ",n.pc(18,22,"REPORTS.SHARE_REPORT.LOCK_DATES_LABEL")," "),n.Cb(2),n.wc("ngbTooltip",n.pc(20,24,"REPORTS.SHARE_REPORT.LOCKED_DATES_INFO_TOOLTIP")),n.Cb(2),n.wc("ngIf",t.isAdminOrOwner),n.Cb(1),n.wc("ngIf",t.shareForm.value.isScheduledReport),n.Cb(1),n.wc("ngIf",t.shareForm.value.isScheduledReport),n.Cb(3),n.ad(n.pc(27,26,"GLOBAL.CLOSE_BTN")),n.Cb(2),n.wc("disabled",t.inProgress||t.shareForm.invalid||!t.isScheduleEmailValid),n.Cb(1),n.ad(t.confirmButtonCopy))},directives:[S.I,S.t,S.k,S.c,S.s,S.i,k.a,T.u,S.a,O.bb,O.M,D.a,y.g],pipes:[A.e],encapsulation:2}),e})()},"/uUt":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7o/Q");function s(e,t){return i=>i.lift(new r(e,t))}class r{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new o(e,this.compare,this.keySelector))}}class o extends n.a{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(n){return this.destination.error(n)}let i=!1;if(this.hasKey)try{const{compare:e}=this;i=e(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}},"/wxh":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("tk/3"),s=i("1Tmk"),r=i("DVUX"),o=i("XNiG"),a=i("z6cu"),c=i("lJxs"),l=i("vkgz"),u=i("JIr8"),d=i("p0l5"),h=i("fXoL"),p=i("sYmb");let b=(()=>{class e{constructor(e,t,i,n){this.http=e,this.toaster=t,this.workspaceService=i,this.translateService=n,this.newCategory=new o.a,this.deletedCategory=new o.a}create(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/expenses/categories`,{name:e.name,hasUnitPrice:e.hasUnitPrice,priceInCents:100*e.amount,unit:e.unit}).pipe(Object(c.a)(e=>(this.toaster.pop("success",this.translateService.instant("EXPENSES.CATEGORIES.CREATE.MODAL.SUCCESS_MESSAGE")),{category:new d.a(e)})),Object(l.a)(e=>{this.newCategory.next(e.category)}),Object(u.a)(e=>(this.toaster.pop("error",(null==e?void 0:e.error)&&(null==e?void 0:e.error.message)||this.translateService.instant("EXPENSES.CATEGORIES.CREATE.MODAL.FAILED_MESSAGE")),Object(a.a)(e))))}edit(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n={name:e.name,hasUnitPrice:e.hasUnitPrice,priceInCents:Math.round(100*e.amount),unit:e.unit};return this.http.put(`/workspaces/${i}/expenses/categories/${t}`,n).pipe(Object(c.a)(e=>(this.toaster.pop("success",this.translateService.instant("EXPENSES.CATEGORIES.EDIT.MODAL.SUCCESS_MESSAGE")),{category:new d.a(e)})),Object(u.a)(e=>(this.toaster.pop("error",(null==e?void 0:e.error)&&(null==e?void 0:e.error.message)||this.translateService.instant("EXPENSES.CATEGORIES.EDIT.MODAL.FAILED_MESSAGE")),Object(a.a)(e))))}getExpenseCategories(e){var t,i;const s=this.workspaceService.getDefaultWorkspaceId();let r=(new n.h).append("page",(null===(t=e.page)||void 0===t?void 0:t.toString())||"1").append("page-size",(null===(i=e.pageSize)||void 0===i?void 0:i.toString())||"50");return e.hasOwnProperty("archived")&&(r=r.append("archived",e.archived.toString())),e.name&&(r=r.append("name",e.name)),this.http.get(`/workspaces/${s}/expenses/categories`,{params:r}).pipe(Object(c.a)(e=>({categories:e.categories.map(e=>new d.a(e)),count:e.count}),e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.CATEGORIES.GET.FAILED_MESSAGE"))))}updateStatus(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`/workspaces/${i}/expenses/categories/${e}/archived`,{archived:t}).pipe(Object(c.a)(e=>(this.toaster.pop("success",this.translateService.instant("EXPENSES.CATEGORIES.EDIT.MODAL.SUCCESS_MESSAGE")),{category:new d.a(e)})),Object(l.a)(()=>{},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.CATEGORIES.EDIT.MODAL.FAILED_MESSAGE"))))}delete(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/expenses/categories/${e.id}`).pipe(Object(c.a)(e=>{this.toaster.pop("success",this.translateService.instant("EXPENSES.CATEGORIES.DELETE.MODAL.SUCCESS_MESSAGE"))}),Object(l.a)(()=>{this.deletedCategory.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.CATEGORIES.DELETE.MODAL.FAILED_MESSAGE"))))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(n.c),h.fc(r.d),h.fc(s.a),h.fc(p.f))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"0EQZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return o}));var n=i("7+OI"),s=i("LRne"),r=(i("XNiG"),i("fXoL"));function o(e){return e&&"function"==typeof e.connect}class a extends class{}{constructor(e){super(),this._data=e}connect(){return Object(n.a)(this._data)?this._data:Object(s.a)(this._data)}disconnect(){}}let c=(()=>{class e{constructor(){this._listeners=[]}notify(e,t){for(let i of this._listeners)i(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})()},"0Gvx":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.d]]}),e})()},"0b3Z":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return t.length>0&&"everyone"===t[0]?"GLOBAL.EVERYONE_LABEL":(e||[]).map(e=>e.name).join(", ")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"displayUserAndGroupName",type:e,pure:!0}),e})()},"1+qu":function(e,t,i){"use strict";i.d(t,"a",(function(){return H})),i("uHlu");var n=i("lvCY"),s=i("fXoL"),r=i("sYmb"),o=i("ofXK"),a=i("5SNR"),c=i("r21O"),l=i("rg2B"),u=i("Lwft");function d(e,t){1&e&&s.Tb(0)}const h=function(e){return{"cl-extended":e}};function p(e,t){if(1&e){const e=s.Yb();s.Xb(0,"a",22),s.jc("click",(function(){s.Oc(e);const t=s.nc(2);return t.group.isExpanded=!t.group.isExpanded})),s.Xb(1,"span",23),s.Zc(2),s.Wb(),s.Wb()}if(2&e){const e=s.nc(2);s.Cb(1),s.wc("ngClass",s.Bc(2,h,e.group.isExpanded)),s.Cb(1),s.ad(e.group.children.length)}}function b(e,t){1&e&&(s.Xb(0,"span",24),s.Xb(1,"span",25),s.Zc(2,"0"),s.Wb(),s.Wb())}function f(e,t){if(1&e&&s.Sb(0,"i",26),2&e){const e=s.nc(2);s.Wc("background-color",e.group.color||e.NO_DATA_COLOR)}}function m(e,t){if(1&e&&(s.Xb(0,"span",27),s.Zc(1),s.Wb()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" - ",e.group.clientName," ")}}function g(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"timeFormatOrDash"),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",s.qc(2,1,e.group.duration,e.format)," ")}}function v(e,t){if(1&e&&(s.Xb(0,"span"),s.Zc(1),s.Wb()),2&e){const e=s.nc(3);s.Cb(1),s.bd(" ",e.currency," ")}}function C(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"roundIfWholeNumber"),s.oc(3,"centsToDollars"),s.Xc(4,v,2,1,"span",21),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",e.group.amount?s.pc(2,2,s.pc(3,4,e.group.amount)):"\u2014","\xa0 "),s.Cb(3),s.wc("ngIf",e.showCurrency&&e.group.amount)}}function E(e,t){if(1&e&&(s.Xb(0,"div",13),s.Xc(1,p,3,4,"a",14),s.Xc(2,b,3,0,"span",15),s.Xb(3,"div",16),s.Xc(4,f,1,2,"i",17),s.Xb(5,"span",18),s.Zc(6),s.oc(7,"translate"),s.Wb(),s.Xc(8,m,2,1,"span",19),s.Wb(),s.Xb(9,"span",20),s.Xc(10,g,3,4,"ng-container",21),s.Xc(11,C,5,6,"ng-container",21),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Cb(1),s.wc("ngIf",e.group.children),s.Cb(1),s.wc("ngIf",!e.group.children&&1===e.level),s.Cb(2),s.wc("ngIf",e.isProject),s.Cb(1),s.Wc("color",e.isProject&&(e.group.color||e.NO_DATA_COLOR)),s.wc("title",e.tooltip),s.Cb(1),s.bd(" ",e.group.name||s.pc(7,10,e.isProject?"REPORTS.WEEKLY.WITHOUT_LABELS.PROJECT":"REPORTS.WEEKLY.WITHOUT_LABELS.USER")," "),s.Cb(2),s.wc("ngIf",e.isProject&&e.group.clientName),s.Cb(2),s.wc("ngIf",e.showTime),s.Cb(1),s.wc("ngIf",!e.showTime)}}function w(e,t){1&e&&s.Tb(0)}const S=function(e){return{day:e}};function y(e,t){if(1&e&&s.Xc(0,w,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[0]))}}function O(e,t){1&e&&s.Tb(0)}function A(e,t){if(1&e&&s.Xc(0,O,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[1]))}}function k(e,t){1&e&&s.Tb(0)}function T(e,t){if(1&e&&s.Xc(0,k,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[2]))}}function D(e,t){1&e&&s.Tb(0)}function I(e,t){if(1&e&&s.Xc(0,D,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[3]))}}function _(e,t){1&e&&s.Tb(0)}function R(e,t){if(1&e&&s.Xc(0,_,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[4]))}}function L(e,t){1&e&&s.Tb(0)}function x(e,t){if(1&e&&s.Xc(0,L,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[5]))}}function P(e,t){1&e&&s.Tb(0)}function j(e,t){if(1&e&&s.Xc(0,P,1,0,"ng-container",0),2&e){const e=s.nc(),t=s.Lc(20);s.wc("ngTemplateOutlet",t)("ngTemplateOutletContext",s.Bc(2,S,e.group.days[6]))}}function M(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"timeFormatOrDash"),s.Ub()),2&e){const e=s.nc().day,t=s.nc();s.Cb(1),s.bd(" ",s.qc(2,1,e.duration,t.format)," ")}}function X(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"roundIfWholeNumber"),s.oc(3,"centsToDollars"),s.Ub()),2&e){const e=s.nc().day;s.Cb(1),s.bd(" ",e.amount?s.pc(2,1,s.pc(3,3,e.amount)):"\u2014"," ")}}function F(e,t){if(1&e&&(s.Xc(0,M,3,4,"ng-container",21),s.Xc(1,X,4,5,"ng-container",21)),2&e){const e=s.nc();s.wc("ngIf",e.showTime),s.Cb(1),s.wc("ngIf",!e.showTime)}}function W(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"timeFormatOrDash"),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",s.qc(2,1,e.group.duration,e.format)," ")}}function B(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.Ub()),2&e){const e=s.nc(3);s.Cb(1),s.bd(" ",e.currency," ")}}function N(e,t){if(1&e&&(s.Vb(0),s.Xb(1,"span",18),s.oc(2,"roundIfWholeNumber"),s.oc(3,"centsToDollars"),s.Zc(4),s.oc(5,"roundIfWholeNumber"),s.oc(6,"centsToDollars"),s.Xc(7,B,2,1,"ng-container",21),s.Wb(),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.xc("title",e.group.amount&&e.group.amount>999999?s.pc(2,3,s.pc(3,5,e.group.amount)):""),s.Cb(3),s.bd(" ",e.group.amount?s.pc(5,7,s.pc(6,9,e.group.amount)):"\u2014","\xa0 "),s.Cb(3),s.wc("ngIf",e.showCurrency&&e.group.amount)}}function G(e,t){if(1&e&&(s.Xb(0,"div",16),s.Xc(1,W,3,4,"ng-container",21),s.Xc(2,N,8,11,"ng-container",21),s.Wb()),2&e){const e=s.nc();s.Cb(1),s.wc("ngIf",e.showTime),s.Cb(1),s.wc("ngIf",!e.showTime)}}const U=function(e){return{labels:e}},V=function(e,t,i,n,s,r,o,a,c){return[e,t,i,n,s,r,o,a,c]};let H=(()=>{class e{constructor(e,t){this.cd=e,this.translateService=t,this.NO_DATA_COLOR=n.p}set isExpanded(e){this.group.isExpanded=e}get labels(){return this._labels}set week(e){if(!e)return;const t=e.map(e=>e.locale(this.lang).format("dd, MMM D"));this._labels=["",...t,this.translateService.instant("GLOBAL.TOTALS_LABEL")]}ngOnInit(){this.generatePlaceholder()}ngAfterViewInit(){this.cd.detectChanges()}generatePlaceholder(){this.tooltip=this.group.name||this.translateService.instant(this.isProject?"REPORTS.WEEKLY.WITHOUT_LABELS.PROJECT":"REPORTS.WEEKLY.WITHOUT_LABELS.USER"),this.isProject&&this.group.clientName&&(this.tooltip+=" - "+this.group.clientName)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.h),s.Rb(r.f))},e.\u0275cmp=s.Lb({type:e,selectors:[["weekly-group"],["","weekly-group",""]],inputs:{group:"group",format:"format",level:"level",isExpanded:"isExpanded",isExpandedMobileView:"isExpandedMobileView",isProject:"isProject",isDesktop:"isDesktop",lang:"lang",week:"week",currency:"currency",showCurrency:"showCurrency",showTime:"showTime"},decls:23,vars:17,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","isExpanded","templates"],["responsive",""],["nameTemplate",""],["day0",""],["day1",""],["day2",""],["day3",""],["day4",""],["day5",""],["day6",""],["dayTemplate",""],["totalTemplate",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100"],["class","cl-badge-same-entries-wrapper",3,"click",4,"ngIf"],["class","cl-badge-same-entries-wrapper",4,"ngIf"],[1,"cl-cut-text"],["class","cl-entry__project__dot",3,"background-color",4,"ngIf"],[3,"title"],["class","cl-text-gray-9",4,"ngIf"],[1,"cl-d-flex","cl-d-lg-custom-none","cl-ml-auto","cl-mr-2"],[4,"ngIf"],[1,"cl-badge-same-entries-wrapper",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0","cl-ml-lg-custom-2",3,"ngClass"],[1,"cl-badge-same-entries-wrapper"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0","cl-ml-lg-custom-2"],[1,"cl-entry__project__dot"],[1,"cl-text-gray-9"]],template:function(e,t){if(1&e&&(s.Xc(0,d,1,0,"ng-container",0),s.Sb(1,"responsive-row",1,2),s.Xc(3,E,12,12,"ng-template",null,3,s.Yc),s.Xc(5,y,1,4,"ng-template",null,4,s.Yc),s.Xc(7,A,1,4,"ng-template",null,5,s.Yc),s.Xc(9,T,1,4,"ng-template",null,6,s.Yc),s.Xc(11,I,1,4,"ng-template",null,7,s.Yc),s.Xc(13,R,1,4,"ng-template",null,8,s.Yc),s.Xc(15,x,1,4,"ng-template",null,9,s.Yc),s.Xc(17,j,1,4,"ng-template",null,10,s.Yc),s.Xc(19,F,2,2,"ng-template",null,11,s.Yc),s.Xc(21,G,3,2,"ng-template",null,12,s.Yc)),2&e){const e=s.Lc(2),i=s.Lc(4),n=s.Lc(6),r=s.Lc(8),o=s.Lc(10),a=s.Lc(12),c=s.Lc(14),l=s.Lc(16),u=s.Lc(18),d=s.Lc(22);s.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",s.Bc(5,U,t.labels)),s.Cb(1),s.wc("isDesktop",t.isDesktop)("isExpanded",t.isExpandedMobileView)("templates",s.Jc(7,V,[i,n,r,o,a,c,l,u,d]))}},directives:[o.B,a.a,o.u,o.r],pipes:[r.e,c.a,l.a,u.a],encapsulation:2,changeDetection:0}),e})()},"1Mzi":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},"1ROj":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.d]]}),e})()},"1Y3z":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ur}));var n=i("1G5W"),s=i("NHP+"),r=i("aLCL"),o=i("O3o7"),a=i("Qyj8"),c=i("lGQG"),l=i("i/9y"),u=i("1Tmk"),d=i("hl/z"),h=i("HApq"),p=i("Jzhb"),b=i("AEYL"),f=i("fXoL"),m=i("tyNb"),g=i("1kSV"),v=i("sYmb"),C=i("ofXK"),E=i("33WN"),w=i("QKuU"),S=i("eGqU"),y=i("lvCY"),O=i("IzEk"),A=i("YjdQ"),k=i("T+Hu"),T=i("cp0P"),D=i("LRne"),I=i("PW4C"),_=i("K6Ak"),R=i("ePBx"),L=i("3Pt+"),x=i("C0N5"),P=i("pLZG"),j=i("tQGB"),M=i("XNiG"),X=i("sNAh"),F=i("aDua"),W=i("g7VG");i("j4ir");const B=function(e){return{billableRate:e}};function N(e,t){if(1&e&&(f.Xb(0,"div",9),f.Xb(1,"span",5),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.bd(" ",f.qc(3,1,"PROJECTS.ACCESS_USER_TABLE.BILLABLE_RATE_LABEL",f.Bc(4,B,null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency))," ")}}function G(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",7),f.Xc(2,N,4,6,"div",8),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(2),f.wc("ngIf",!e.onlyAdminCanSeeAndChangeBillable||e.adminOrOwner)}}const U=function(e){return{costRate:e}};function V(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"span",5),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.bd(" ",f.qc(3,1,"PROJECTS.SHARED.COST_RATE_LABEL",f.Bc(4,U,null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency))," ")}}function H(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",7),f.Xc(2,V,4,6,"div",10),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(2),f.wc("ngIf",e.canSeeRates&&e.hasLaborCostFeature&&(null==e.workspace?null:e.workspace.isCostRateActive))}}function Y(e,t){1&e&&(f.Xb(0,"th",12),f.Xb(1,"div",13),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.bd(" ",f.pc(3,1,"GLOBAL.EDIT_LABEL")," "))}function $(e,t){if(1&e&&(f.Vb(0),f.Xb(1,"th",2),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xc(4,G,3,1,"th",3),f.Xc(5,H,3,1,"th",3),f.Xb(6,"th",4),f.Xb(7,"span",5),f.Zc(8),f.oc(9,"translate"),f.Wb(),f.Wb(),f.Xc(10,Y,4,3,"th",6),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.Db("colspan",e.colspan),f.Cb(1),f.bd(" ",f.pc(3,6,"GLOBAL.NAME_LABEL")," "),f.Cb(2),f.wc("ngIf",e.canSeeRates),f.Cb(1),f.wc("ngIf",e.canSeeRates),f.Cb(3),f.bd(" ",f.pc(9,8,"GLOBAL.ROLE_LABEL")," "),f.Cb(2),f.wc("ngIf",e.hasEditPermission)}}function z(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",14),f.Xb(1,"div",15),f.Zc(2),f.oc(3,"translate"),f.Xb(4,"div",16),f.Xb(5,"a",17),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(6,"span",18),f.Sb(7,"img",19),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.bd(" ",f.pc(3,2,"GLOBAL.NAME_LABEL")," "),f.Cb(5),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let Z=(()=>{class e{constructor(e,t){this.workspaceService=e,this.authService=t,this.colspan=1,this.onExpandAll=new f.n,this.isExpandAll=!1,this.unsubscribe$=new s.a}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.authService.permissionData$.pipe(Object(P.a)(e=>null!==e),Object(n.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.adminOrOwner=e}),this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(u.a),f.Rb(c.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-table-header"],["","access-user-table-header",""]],inputs:{isDesktop:"isDesktop",workspace:"workspace",canSeeRates:"canSeeRates",hasLaborCostFeature:"hasLaborCostFeature",hasEditPermission:"hasEditPermission",colspan:"colspan",isAdminOrOwner:"isAdminOrOwner"},outputs:{onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-h5","cl-mb-0","cl-pl-lg-3","cl-text-gray-6-dark-mode"],[4,"ngIf"],[1,"cl-responsive-table-td-3"],[1,"cl-h5","cl-ml-lg-custom-n2","cl-text-gray-6-dark-mode"],["class","cl-responsive-table-td-2",4,"ngIf"],[1,"cl-d-flex"],["class","cl-project-table-access-billable-rate",4,"ngIf"],[1,"cl-project-table-access-billable-rate"],["class","cl-project-table-access-cost-rate",4,"ngIf"],[1,"cl-project-table-access-cost-rate"],[1,"cl-responsive-table-td-2"],[1,"cl-h5","cl-mb-0","cl-text-lg-custom-right","cl-d-block","cl-d-lg-none"],["colspan","5",1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Xc(0,$,11,10,"ng-container",0),f.Xc(1,z,8,4,"ng-template",null,1,f.Yc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[C.u],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();i("Tj/N");var K=i("FwEu"),q=i("BO2n"),J=i("xoOP"),Q=i("5SNR"),ee=i("+dED"),te=i("AHJ+"),ie=i("gzhl"),ne=i("/b/a");const se=["hourlyRateInput"];function re(e,t){1&e&&f.Tb(0)}function oe(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Zc(2),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.Wc("text-decoration",e.isUserInactive?"line-through":"none"),f.xc("title",e.user.name||e.user.email),f.Cb(1),f.bd(" ",e.user.name||e.user.email," ")}}function ae(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"span",21),f.Xb(2,"a",22),f.jc("click",(function(){f.Oc(e);const t=f.nc(3),i=f.Lc(16);return t.openModal(i,"md")})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.CHANGE_LABEL")," "))}function ce(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",15),f.Xb(1,"div",16),f.Xb(2,"input",17,18),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(3).blur()})),f.Wb(),f.Xc(4,ae,5,3,"div",19),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(2),f.yc("id","hourlyRate_",e.user.id,""),f.wc("ngModel",e.hourlyRatePlaceholder),f.Cb(2),f.wc("ngIf",e.hasEditPermission)}}function le(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xc(1,ce,5,3,"div",14),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",e.canSeeRates&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner))}}function ue(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"span",21),f.Xb(2,"a",22),f.jc("click",(function(){f.Oc(e);const t=f.nc(3),i=f.Lc(18);return t.openModal(i,"md")})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.CHANGE_LABEL")," "))}function de(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",24),f.Xb(1,"div",16),f.Xb(2,"input",25,26),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(3).blur()})),f.Wb(),f.Xc(4,ue,5,3,"div",19),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(2),f.yc("id","costRate_",e.user.id,""),f.wc("ngModel",e.costRatePlaceholder),f.Cb(2),f.wc("ngIf",e.hasEditPermission)}}function he(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xc(1,de,5,3,"div",23),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",e.canSeeRates&&e.hasCostRateFeatures&&(null==e.workspace?null:e.workspace.isCostRateActive))}}function pe(e,t){1&e&&(f.Xb(0,"div",28),f.Xb(1,"span",29),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.bd(" ",f.pc(3,1,"PROJECTS.ACCESS_USER_TABLE.MANAGER_LABEL")," "))}function be(e,t){1&e&&(f.Xb(0,"div",28),f.Xb(1,"span",29),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.bd(" ",f.pc(3,1,"GLOBAL.ADMIN_LABEL")," "))}function fe(e,t){1&e&&(f.Xb(0,"div",28),f.Xb(1,"span",29),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.bd(" ",f.pc(3,1,"GLOBAL.OWNER_LABEL")," "))}function me(e,t){1&e&&(f.Xb(0,"div",28),f.Xb(1,"span",29),f.Zc(2,"-"),f.Wb(),f.Wb())}function ge(e,t){if(1&e&&(f.Xc(0,pe,4,3,"div",27),f.Xc(1,be,4,3,"div",27),f.Xc(2,fe,4,3,"div",27),f.Xc(3,me,3,0,"div",27)),2&e){const e=f.nc();f.wc("ngIf",e.isManager&&!e.isAdmin&&!e.isOwner),f.Cb(1),f.wc("ngIf",e.isAdmin&&!e.isOwner),f.Cb(1),f.wc("ngIf",e.isOwner),f.Cb(1),f.wc("ngIf",!e.isOwner&&!e.isAdmin&&!e.isManager)}}function ve(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",38),f.jc("click",(function(){return f.Oc(e),f.nc(4).changeManagerRights()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}if(2&e){const e=f.nc(4);f.Cb(1),f.bd(" ",f.pc(2,1,e.isManager?"PROJECTS.ACCESS_USER_TABLE.REVOKE_MANAGER_RIGHTS_LABEL":"PROJECTS.ACCESS_USER_TABLE.GIVE_MANAGER_RIGHTS_LABEL")," ")}}function Ce(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",35),f.Xb(1,"div",36),f.Xc(2,ve,3,3,"a",37),f.Xb(3,"a",38),f.jc("click",(function(){f.Oc(e);const t=f.nc(3),i=f.Lc(14);return t.modalService.open(i,{centered:!0})})),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.wc("ngIf",e.isAdminOrOwner&&!e.isAdmin&&!e.isOwner),f.Cb(2),f.bd(" ",f.pc(5,2,"GLOBAL.REMOVE_LABEL")," ")}}function Ee(e,t){1&e&&(f.Xb(0,"div",31),f.Xb(1,"div",32),f.Sb(2,"img",33),f.Wb(),f.Xc(3,Ce,6,4,"div",34),f.Wb())}function we(e,t){if(1&e&&f.Xc(0,Ee,4,0,"div",30),2&e){const e=f.nc();f.wc("ngIf",e.hasEditPermission)}}const Se=function(e){return{userName:e}};function ye(e,t){if(1&e){const e=f.Yb();f.Xb(0,"simple-modal",39),f.jc("confirmed",(function(i){f.Oc(e);const n=t.$implicit,s=f.nc();return n.close(i),s.deleteUser.emit()}))("close",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.oc(1,"translate"),f.oc(2,"translate"),f.Xb(3,"p",40),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title",f.pc(1,4,"GLOBAL.REMOVE_LABEL"))("isDanger",!0)("btnText",f.pc(2,6,"GLOBAL.REMOVE_LABEL")),f.Cb(4),f.bd(" ",f.qc(5,8,"PROJECTS.ACCESS_USER_TABLE.REMOVE_USER_WARNING",f.Bc(11,Se,e.user.name||e.user.email))," ")}}function Oe(e,t){if(1&e){const e=f.Yb();f.Xb(0,"hourly-rate",41),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateHourlyRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("user",e.user)("hourlyRate",e.hourlyRate)("type",e.rateType.PROJECT_MEMBER)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}function Ae(e,t){if(1&e){const e=f.Yb();f.Xb(0,"cost-rate",42),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateCostRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.PROJECT_MEMBER)("costRate",e.costRate)("user",e.user)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}const ke=function(e){return{labels:e}},Te=function(e,t,i,n,s){return[e,t,i,n,s]},De=function(e,t,i,n){return[e,t,i,n]},Ie=function(e,t,i){return[e,t,i]},_e=function(e,t){return[e,t]};let Re=(()=>{class e{constructor(e,t,i){this.workspaceService=e,this.modalService=t,this.cd=i,this.hourlyRateUpdated=new f.n,this.costRateUpdated=new f.n,this.managerRightsUpdated=new f.n,this.projectManagersUpdated=new f.n,this.deleteUser=new f.n,this.hideZeroRates=!0,this.rateType=q.a,this.hourlyRate=new X.a,this.costRate=new W.a}set projectManagerIds(e){this._projectManagerIds=e,this.setManagerPermission()}get projectManagerIds(){return this._projectManagerIds}set adminIds(e){e&&(this.isAdmin=e.includes(this.user.id))}set ownerIds(e){e&&(this.isOwner=e.includes(this.user.id))}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus,this.activeBillable=this.workspace.activeBillableHours,this.inItRates(),this.hasCostRateFeatures=this.workspace.hasFeature(l.a.LABOR_COST),this.isUserInactive=null==this.workspace.memberships.filter(e=>e.userId===this.user.id)[0]||this.workspace.memberships.filter(e=>e.userId===this.user.id)[0].membershipStatus===K.a.INACTIVE,this.setCostRateLabel(),this.setHourlyRateLabel()}ngAfterViewInit(){this.cd.detectChanges()}inItRates(){const e=this.project.memberships.filter(e=>e.userId===this.user.id),t=e[0].hourlyRate,i=e[0].costRate;this.hourlyRate.amount=t?t.amount:0,this.hourlyRate.currency=this.workspace.hourlyRate.currency,this.costRate.amount=i?i.amount:null,this.costRate.currency=this.workspace.costRate.currency}updateHourlyRate(e){e&&e.amount/100/100===this.hourlyRate.amount||(this.hourlyRate.amount=e.amount,this.hourlyRateUpdated.emit(e),this.setHourlyRateLabel(),this.cd.detectChanges())}updateCostRate(e){e.amount!==this.costRate.amount&&(this.costRate.amount=e.amount,this.costRateUpdated.emit(e),this.setCostRateLabel(),this.cd.detectChanges())}setCostRateLabel(){this.costRatePlaceholder=Object(J.m)(this.costRate)}setHourlyRateLabel(){this.hourlyRatePlaceholder=Object(J.n)(this.hourlyRate)}changeManagerRights(){this.managerRightsUpdated.emit(this.isManager),this.isManager=!this.isManager}setHourlyRate(){this.hideZeroRates=!1,setTimeout(()=>{this.hourlyRateInput.nativeElement.select()},100)}setManagerPermission(){this.isManager=this.projectManagerIds&&this.projectManagerIds.indexOf(this.user.id)>-1}refreshManagePermission(){this.setManagerPermission(),this.cd.detectChanges()}openModal(e){this.modalService.open(e,{centered:!0})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(u.a),f.Rb(g.q),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-table-row"],["","access-user-table-row",""]],viewQuery:function(e,t){var i;1&e&&f.gd(se,!0),2&e&&f.Kc(i=f.kc())&&(t.hourlyRateInput=i.first)},inputs:{user:"user",project:"project",workspace:"workspace",labels:"labels",isDesktop:"isDesktop",hasEditPermission:"hasEditPermission",isAdminOrOwner:"isAdminOrOwner",canSeeRates:"canSeeRates",hasHistoricRatesFeature:"hasHistoricRatesFeature",expandAll:"expandAll",projectManagerIds:"projectManagerIds",adminIds:"adminIds",ownerIds:"ownerIds"},outputs:{hourlyRateUpdated:"hourlyRateUpdated",costRateUpdated:"costRateUpdated",managerRightsUpdated:"managerRightsUpdated",projectManagersUpdated:"projectManagersUpdated",deleteUser:"deleteUser"},decls:19,vars:25,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["deleteModal",""],["hourlyRateModal",""],["costRateModal",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-py-0","cl-py-lg-custom-2","cl-pl-lg-2","cl-pl-lg-custom-0","cl-pr-2"],[1,"cl-cut-text","cl-text-dark",3,"title"],[1,"cl-d-flex","cl-flex-column","cl-flex-lg-row"],["class","cl-component-divided-left cl-project-table-access-billable-rate",4,"ngIf"],[1,"cl-component-divided-left","cl-project-table-access-billable-rate"],[1,"cl-input-group","cl-input-group-sm","cl-flex-nowrap"],["type","text","name","hourlyRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-input-h-rate-sm","cl-flex-grow-0","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"id","ngModel","keyup.enter"],["hourlyRateInput",""],["class","cl-input-group-append",4,"ngIf"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],[1,"cl-color-blue",3,"click"],["class","cl-component-divided-left cl-project-table-access-cost-rate",4,"ngIf"],[1,"cl-component-divided-left","cl-project-table-access-cost-rate"],["type","text","name","costRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-input-h-rate-sm","cl-flex-grow-0","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"id","ngModel","keyup.enter"],["costRateInput",""],["class","cl-component-divided-left cl-w-100",4,"ngIf"],[1,"cl-component-divided-left","cl-w-100"],[1,"cl-text-dark"],["class","cl-dropdown cl-d-flex cl-justify-content-end cl-hover-pointer","dropdown","",4,"ngIf"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg","closeDropdown",""],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[3,"title","isDanger","btnText","confirmed","close"],[1,"cl-text-muted","cl-cut-text-wrap"],[3,"user","hourlyRate","type","hasHistoricRateFeature","onClose","saveRate"],[3,"type","costRate","user","hasHistoricRateFeature","onClose","saveRate"]],template:function(e,t){if(1&e&&(f.Xc(0,re,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.Xc(3,oe,3,4,"ng-template",null,3,f.Yc),f.Xc(5,le,2,1,"ng-template",null,4,f.Yc),f.Xc(7,he,2,1,"ng-template",null,5,f.Yc),f.Xc(9,ge,4,4,"ng-template",null,6,f.Yc),f.Xc(11,we,1,1,"ng-template",null,7,f.Yc),f.Xc(13,ye,6,13,"ng-template",null,8,f.Yc),f.Xc(15,Oe,1,4,"ng-template",null,9,f.Yc),f.Xc(17,Ae,1,4,"ng-template",null,10,f.Yc)),2&e){const e=f.Lc(2),i=f.Lc(4),n=f.Lc(6),s=f.Lc(8),r=f.Lc(10),o=f.Lc(12);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(5,ke,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",t.canSeeRates&&t.hasEditPermission&&t.activeBillable?f.Fc(7,Te,i,n,s,r,o):t.canSeeRates?f.Ec(13,De,i,n,s,r):t.hasEditPermission?f.Dc(18,Ie,i,r,o):f.Cc(22,_e,i,s))("isExpanded",t.expandAll)}},directives:[C.B,Q.a,C.u,L.c,ee.a,L.s,L.v,w.a,S.a,te.a,ie.a,ne.a],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();function Le(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",5),f.Xb(1,"tr",6,7),f.jc("hourlyRateUpdated",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().hourlyRateUpdated(n,i)}))("costRateUpdated",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().costRateUpdated(n,i)}))("managerRightsUpdated",(function(i){f.Oc(e);const n=t.$implicit,s=f.Lc(2);return f.nc().updatedManagerRights(n,i,s)}))("deleteUser",(function(){f.Oc(e);const i=t.$implicit;return f.nc().deleteUser(i.id)})),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc();f.Cb(1),f.wc("user",e)("project",i.project)("workspace",i.workspace)("labels",i.labels)("isDesktop",i.isDesktop)("projectManagerIds",i.projectManagerIds)("adminIds",i.adminIds)("ownerIds",i.ownerIds)("hasEditPermission",i.hasEditPermission)("isAdminOrOwner",i.isAdminOrOwner)("canSeeRates",i.canSeeRates)("hasHistoricRatesFeature",i.hasHistoricRatesFeature)("expandAll",i.expandAll)}}let xe=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c,l){this.browserService=e,this.workspaceService=t,this.projectService=i,this.userService=n,this.authService=s,this.projectsCommunicationService=r,this.loader=o,this.cd=a,this.systemSettingsService=c,this.translate=l,this.membershipsUpdated=new f.n,this.managerRightsUpdated=new f.n,this.userRemoved=new f.n,this.updateProject=new f.n,this.usersNumber=new f.n,this.page=1,this.limit=y.j,this.expandAll=!1,this.colspan=1,this.unsubscribe$=new M.a,this.translatedLabels=Object.values(l.instant(["GLOBAL.NAME_LABEL","GLOBAL.BILLABLE_RATE_LABEL","GLOBAL.COST_RATE_LABEL","GLOBAL.ROLE_LABEL","GLOBAL.EDIT_LABEL"])),this.labels=this.translatedLabels}set project(e){this._project=e,this.pager?this.setPagination({page:1,limit:50}):this.getUsersFromProject()}get project(){return this._project}set hasEditPermission(e){this._hasEditPermission=e,this.changeLabels()}get hasEditPermission(){return this._hasEditPermission}set canSeeRates(e){this._canSeeRates=e,this.changeLabels()}get canSeeRates(){return this._canSeeRates}ngOnInit(){this.setIsAdmin(),this.loader.showBar(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasHistoricRatesFeature=this.workspace.hasFeature(l.a.HISTORIC_RATES),this.setBrowserWidth(),this.activeBillable=this.workspace.activeBillableHours}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setIsAdmin(){this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.authService.permissionData$.pipe(Object(P.a)(e=>null!==e),Object(n.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.isAdminOrOwner=e,this.cd.detectChanges()})}setBrowserWidth(){this.browserService.isBreakpointLgCustom$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setPagination(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.getUsersFromProject()}hourlyRateUpdated(e,t){const i=new X.a({amount:t.amount,currency:this.workspace.hourlyRate.currency||"USD",since:t.since});this.projectService.setUsersHourlyRateForProject(this.project.id,e.id,i).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.membershipsUpdated.emit(e)})}costRateUpdated(e,t){const i=new W.a({amount:t.amount,currency:this.workspace.costRate.currency||"USD",since:t.since});this.projectService.setUsersCostRateForProject(this.project.id,e.id,i).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.membershipsUpdated.emit(e)})}updatedManagerRights(e,t,i){t?this.projectService.removePermission(this.project.id,e.id,"PROJECT_MANAGER").pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(()=>{const t=this.projectManagerIds.filter(t=>t!==e.id);this.projectManagerIds=t,this.managerRightsUpdated.emit(t)},()=>null==i?void 0:i.refreshManagePermission()):this.projectService.addPermission(this.project.id,e.id,"PROJECT_MANAGER").pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.projectManagerIds.push(e.id),this.managerRightsUpdated.emit(this.projectManagerIds)},()=>null==i?void 0:i.refreshManagePermission())}deleteUser(e){const t=this.usersOfProject.filter(t=>t.id===e)[0];this.projectService.removeUserFromProject(this.project.id,e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(i=>{this.projectsCommunicationService.removedUserFromProject$.next(e),this.project=new o.a(i),this.usersOfProject=this.usersOfProject.filter(t=>t.id!==e),this.userRemoved.emit(t),this.updateProject.emit(i),this.cd.detectChanges()})}getUsersFromProject(){this.userService.getUsersWithCount({projectId:this.project.id,page:this.page,limit:this.limit}).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.usersOfProject=this.filterUsers(e.users),this.usersCount=e.count,this.usersNumber.emit(this.usersCount),this.loader.hide(),this.cd.detectChanges()},()=>{this.loader.hide()})}filterUsers(e){return e.filter(e=>this.workspace.memberships.filter(t=>t.userId===e.id).length)}expandAllRows(e){this.expandAll=e}changeLabels(){this.labels=this.canSeeRates&&this.hasEditPermission?this.translatedLabels:this.canSeeRates?this.translatedLabels.filter(e=>e!==this.translatedLabels[2]):this.hasEditPermission?this.translatedLabels.filter(e=>e!==this.translatedLabels[1]&&e!==this.translatedLabels[2]):[this.translatedLabels[0],this.translatedLabels[2]],this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(j.a),f.Rb(u.a),f.Rb(r.a),f.Rb(a.a),f.Rb(c.a),f.Rb(b.a),f.Rb(d.a),f.Rb(f.h),f.Rb(h.a),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-table"]],viewQuery:function(e,t){var i;1&e&&f.gd(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",projectManagerIds:"projectManagerIds",adminIds:"adminIds",ownerIds:"ownerIds",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates"},outputs:{membershipsUpdated:"membershipsUpdated",managerRightsUpdated:"managerRightsUpdated",userRemoved:"userRemoved",updateProject:"updateProject",usersNumber:"usersNumber"},decls:7,vars:11,consts:[["data-toggle-column","last",1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-9","cl-project-table-access"],["access-user-table-header","",3,"isDesktop","workspace","canSeeRates","hasLaborCostFeature","hasEditPermission","colspan","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],[1,"cl-row-hover-shadow"],["access-user-table-row","",3,"user","project","workspace","labels","isDesktop","projectManagerIds","adminIds","ownerIds","hasEditPermission","isAdminOrOwner","canSeeRates","hasHistoricRatesFeature","expandAll","hourlyRateUpdated","costRateUpdated","managerRightsUpdated","deleteUser"],["userTableRow",""]],template:function(e,t){1&e&&(f.Xb(0,"table",0),f.Xb(1,"thead"),f.Xb(2,"tr",1),f.jc("onExpandAll",(function(e){return t.expandAllRows(e)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Xc(4,Le,3,13,"div",2),f.Wb(),f.Wb(),f.Xb(5,"div",3),f.Xb(6,"pager",4),f.jc("pageChanged",(function(e){return t.setPagination(e)}))("limitChanged",(function(e){return t.setPagination(e)})),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.wc("isDesktop",t.isDesktop)("workspace",t.workspace)("canSeeRates",t.canSeeRates)("hasLaborCostFeature",t.hasHistoricRatesFeature)("hasEditPermission",t.hasEditPermission)("colspan",t.colspan),f.Cb(2),f.wc("ngForOf",t.usersOfProject),f.Cb(2),f.wc("visible",t.usersCount>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.usersCount))},directives:[Z,C.t,F.a,Re],encapsulation:2,changeDetection:0}),e})();function Pe(e,t){if(1&e&&(f.Vb(0),f.Xb(1,"th",2),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.Db("colspan",e.colspan),f.Cb(1),f.bd(" ",f.pc(3,2,"GLOBAL.NAME_LABEL")," ")}}function je(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",3),f.Xb(1,"div",4),f.Zc(2),f.oc(3,"translate"),f.Xb(4,"div",5),f.Xb(5,"a",6),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(6,"span",7),f.Sb(7,"img",8),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.bd(" ",f.pc(3,2,"GLOBAL.NAME_LABEL")," "),f.Cb(5),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let Me=(()=>{class e{constructor(){this.colspan=1,this.onExpandAll=new f.n,this.isExpandAll=!1}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-group-table-header"],["","access-user-group-table-header",""]],inputs:{isDesktop:"isDesktop",colspan:"colspan"},outputs:{onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-h5","cl-mb-0","cl-pl-lg-3"],[1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Xc(0,Pe,4,4,"ng-container",0),f.Xc(1,je,8,4,"ng-template",null,1,f.Yc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[C.u],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();i("Oieg");const Xe=["deleteModal"];function Fe(e,t){1&e&&f.Tb(0)}function We(e,t){1&e&&f.Sb(0,"span",14)}function Be(e,t){if(1&e&&(f.Vb(0),f.Xc(1,We,1,0,"span",12),f.Xb(2,"span",13),f.Zc(3),f.Wb(),f.Ub()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.userGroup.userNames),f.Cb(2),f.ad(e.userGroup.userNames)}}function Ne(e,t){if(1&e&&(f.Xb(0,"div",7),f.Xb(1,"div",8),f.Xb(2,"span",9),f.Xb(3,"span",10),f.Zc(4),f.Wb(),f.Xc(5,Be,4,2,"ng-container",11),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.zc("title","",e.userGroup.name," - ",e.userGroup.userNames,""),f.Cb(3),f.ad(e.userGroup.name),f.Cb(1),f.wc("ngIf",e.isDesktop)}}function Ge(e,t){if(1&e&&(f.Xb(0,"div",15),f.Xb(1,"div",8),f.Xb(2,"span",9),f.Xb(3,"span",10),f.Zc(4),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.xc("title",e.userGroup.userNames),f.Cb(3),f.ad(e.userGroup.userNames)}}function Ue(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",20),f.Xb(1,"div",21),f.Xb(2,"a",22),f.jc("click",(function(){f.Oc(e);const t=f.nc(2);return t.removeUserGroup(t.userGroup)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.REMOVE_LABEL")," "))}function Ve(e,t){1&e&&(f.Xb(0,"div",16),f.Xb(1,"div",17),f.Sb(2,"img",18),f.Wb(),f.Xc(3,Ue,5,3,"div",19),f.Wb())}const He=function(e){return{userGroupName:e}};function Ye(e,t){if(1&e){const e=f.Yb();f.Xb(0,"simple-modal",23),f.jc("confirmed",(function(i){f.Oc(e);const n=t.$implicit,s=f.nc();return n.close(i),s.deleteUserGroup(s.userGroupToRemove.id)}))("close",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.oc(1,"translate"),f.oc(2,"translate"),f.Xb(3,"p",24),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title",f.pc(1,4,"GLOBAL.REMOVE_LABEL"))("isDanger",!0)("btnText",f.pc(2,6,"GLOBAL.REMOVE_LABEL")),f.Cb(4),f.bd(" ",f.qc(5,8,"PROJECTS.EDIT_PROJECT_ACCESS.REMOVE_USER_GROUP_WARNING",f.Bc(11,He,e.userGroupToRemove.name))," ")}}const $e=function(e){return{labels:e}},ze=function(e,t){return[e,t]},Ze=function(e,t,i){return[e,t,i]},Ke=function(e){return[e]};let qe=(()=>{class e{constructor(e,t,i,n){this.projectService=e,this.modalService=t,this.cd=i,this.translate=n,this.userGroupRemoved=new f.n,this.updateProject=new f.n,this.unsubscribe$=new M.a}ngOnInit(){this.labels=Object.values(this.translate.instant(["GLOBAL.NAME_LABEL","GLOBAL.MEMBERS_LABEL","GLOBAL.EDIT_LABEL"]))}ngAfterViewInit(){this.cd.detectChanges()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}removeUserGroup(e){this.userGroupToRemove=e,this.modalService.open(this.deleteModal,{centered:!0})}deleteUserGroup(e){const t=this.userGroupsOfProject.filter(t=>t.id===e)[0];this.projectService.removeUserGroupFromProject(this.project.id,e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(i=>{this.project=new o.a(i),this.userGroupsOfProject=this.userGroupsOfProject.filter(t=>t.id!==e),this.userGroupRemoved.emit(t),this.updateProject.emit(this.project),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(r.a),f.Rb(g.q),f.Rb(f.h),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-group-table-row"],["","access-user-group-table-row",""]],viewQuery:function(e,t){var i;1&e&&f.gd(Xe,!0),2&e&&f.Kc(i=f.kc())&&(t.deleteModal=i.first)},inputs:{userGroup:"userGroup",isDesktop:"isDesktop",hasEditPermission:"hasEditPermission",expandAll:"expandAll",userGroupsOfProject:"userGroupsOfProject",project:"project"},outputs:{userGroupRemoved:"userGroupRemoved",updateProject:"updateProject"},decls:11,vars:19,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["deleteModal",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100"],[1,"cl-cut-text",3,"title"],[1,"cl-listing-project-client"],[1,"cl-text-dark"],[4,"ngIf"],["class","cl-h-line-divider",4,"ngIf"],[1,"cl-listing-client"],[1,"cl-h-line-divider"],[1,"cl-component-divided-left","cl-w-100","ng-star-inserted"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg","closeDropdown",""],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[3,"title","isDanger","btnText","confirmed","close"],[1,"cl-text-muted","cl-cut-text-wrap"]],template:function(e,t){if(1&e&&(f.Xc(0,Fe,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.Xc(3,Ne,6,4,"ng-template",null,3,f.Yc),f.Xc(5,Ge,5,2,"ng-template",null,4,f.Yc),f.Xc(7,Ve,4,0,"ng-template",null,5,f.Yc),f.Xc(9,Ye,6,13,"ng-template",null,6,f.Yc)),2&e){const e=f.Lc(2),i=f.Lc(4),n=f.Lc(6),s=f.Lc(8);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(5,$e,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",t.hasEditPermission?t.isDesktop?f.Cc(7,ze,i,s):f.Dc(10,Ze,i,n,s):t.isDesktop?f.Bc(14,Ke,i):f.Cc(16,ze,i,n))("isExpanded",t.expandAll)}},directives:[C.B,Q.a,C.u,w.a,S.a,te.a],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();function Je(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",4),f.Xb(1,"tr",5),f.jc("userGroupRemoved",(function(t){return f.Oc(e),f.nc().userGroupRemovedPropagate(t)}))("updateProject",(function(t){return f.Oc(e),f.nc().updateProjectPropagate(t)})),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc();f.Cb(1),f.wc("userGroup",e)("isDesktop",i.isDesktop)("hasEditPermission",i.hasEditPermission)("expandAll",i.expandAll)("userGroupsOfProject",i.userGroupsOfProject)("project",i.project)}}function Qe(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",6),f.Xb(1,"pager",7),f.jc("pageChanged",(function(t){return f.Oc(e),f.nc().setPagination(t)}))("limitChanged",(function(t){return f.Oc(e),f.nc().setPagination(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(1),f.wc("visible",e.userGroupsCount>e.limit||e.limit>50)("page",e.page)("limit",e.limit)("total",e.userGroupsCount)}}let et=(()=>{class e{constructor(e,t,i,n,s,r,o){this.userService=e,this.userGroupService=t,this.projectService=i,this.browserService=n,this.loader=s,this.modalService=r,this.cd=o,this.userGroupRemoved=new f.n,this.updateProject=new f.n,this.groupsNumber=new f.n,this.userGroupsOfProject=[],this.page=1,this.limit=y.j,this.expandAll=!1,this.colspan=2,this.unsubscribe$=new M.a}set project(e){this._project=e,this.pager?this.setPagination({page:1,limit:50}):this.getUserGroupsFromProject()}get project(){return this._project}set hasEditPermission(e){this._hasEditPermission=e,this.checkColspan(this.isDesktop,e)}get hasEditPermission(){return this._hasEditPermission}ngOnInit(){this.loader.showBar(),this.setBrowserWidth()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setPagination(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.getUserGroupsFromProject()}setBrowserWidth(){this.browserService.isBreakpointLgCustom$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.checkColspan(e,this.hasEditPermission),this.cd.detectChanges()})}getUserGroupsFromProject(){this.userGroupService.getUserGroups({projectId:this.project.id,page:this.page,limit:this.limit}).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.userGroupsCount=e.count,this.groupsNumber.emit(this.userGroupsCount),this.getUsersFromUserGroups(e.groups),this.cd.detectChanges()},()=>{this.loader.hide()})}getUsersFromUserGroups(e){let t=[];if(e.forEach(e=>{t=[...t,...e.userIds]}),0==t.length)return this.userGroupsOfProject=e,void this.loader.hide();this.userService.getUsersByIds(Array.from(new Set(t))).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.userGroupsOfProject=e,this.userGroupsOfProject.forEach(e=>{const i=t.filter(t=>e.userIds.indexOf(t.id)>-1).map(e=>e.name||e.email);e.userNames=i&&i.length>0?i.join(", "):""}),this.loader.hide(),this.cd.detectChanges()},()=>{this.userGroupsOfProject=e,this.loader.hide(),this.cd.detectChanges()})}deleteUserGroup(e){const t=this.userGroupsOfProject.filter(t=>t.id===e)[0];this.projectService.removeUserGroupFromProject(this.project.id,e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(i=>{this.project=new o.a(i),this.userGroupsOfProject=this.userGroupsOfProject.filter(t=>t.id!==e),this.userGroupRemoved.emit(t),this.updateProject.emit(this.project),this.cd.detectChanges()})}userGroupRemovedPropagate(e){this.userGroupRemoved.emit(e)}updateProjectPropagate(e){this.updateProject.emit(e)}expandAllRows(e){this.expandAll=e}checkColspan(e,t){this.colspan=t&&!e?3:!t&&e?1:2}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(R.a),f.Rb(r.a),f.Rb(j.a),f.Rb(d.a),f.Rb(g.q),f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["access-user-group-table"]],viewQuery:function(e,t){var i;1&e&&f.gd(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",hasEditPermission:"hasEditPermission"},outputs:{userGroupRemoved:"userGroupRemoved",updateProject:"updateProject",groupsNumber:"groupsNumber"},decls:6,vars:4,consts:[["data-toggle-column","last",1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-9","cl-project-table-access-group"],["access-user-group-table-header","",3,"isDesktop","colspan","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],["class","cl-mt-2 cl-mt-lg-3",4,"ngIf"],[1,"cl-row-hover-shadow"],["access-user-group-table-row","",3,"userGroup","isDesktop","hasEditPermission","expandAll","userGroupsOfProject","project","userGroupRemoved","updateProject"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"]],template:function(e,t){1&e&&(f.Xb(0,"table",0),f.Xb(1,"thead"),f.Xb(2,"tr",1),f.jc("onExpandAll",(function(e){return t.expandAllRows(e)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Xc(4,Je,2,6,"div",2),f.Wb(),f.Wb(),f.Xc(5,Qe,2,4,"div",3)),2&e&&(f.Cb(2),f.wc("isDesktop",t.isDesktop)("colspan",t.colspan),f.Cb(2),f.wc("ngForOf",t.userGroupsOfProject),f.Cb(1),f.wc("ngIf",t.userGroupsOfProject&&t.userGroupsOfProject.length>0))},directives:[Me,C.t,C.u,qe,F.a],encapsulation:2,changeDetection:0}),e})();function tt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",9),f.Xb(1,"div",10),f.Xb(2,"div",11),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Xb(5,"div",12),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Wb(),f.Xb(8,"div",10),f.Xb(9,"div",13),f.Xb(10,"input",14),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().project.public=t}))("ngModelChange",(function(){return f.Oc(e),f.nc().updateVisibility()})),f.Wb(),f.Xb(11,"label",15),f.Zc(12),f.oc(13,"translate"),f.Wb(),f.Wb(),f.Xb(14,"div",13),f.Xb(15,"input",16),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().project.public=t}))("ngModelChange",(function(){return f.Oc(e),f.nc().updateVisibility()})),f.Wb(),f.Xb(16,"label",17),f.Zc(17),f.oc(18,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(3),f.bd(" ",f.pc(4,8,"REPORTS.EDIT.VISABILITY_HEADER")," "),f.Cb(3),f.bd(" ",f.pc(7,10,e.project.public?"PROJECTS.EDIT_PROJECT_ACCESS.PUBLIC_PROJECT_INFO":"PROJECTS.EDIT_PROJECT_ACCESS.PRIVATE_PROJECT_INFO")," "),f.Cb(4),f.wc("value",!1)("ngModel",e.project.public),f.Cb(2),f.bd(" ",f.pc(13,12,"GLOBAL.PRIVATE_LABEL")," "),f.Cb(3),f.wc("value",!0)("ngModel",e.project.public),f.Cb(2),f.bd(" ",f.pc(18,14,"GLOBAL.PUBLIC_LABEL")," ")}}function it(e,t){1&e&&f.Sb(0,"hr",18)}function nt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",25),f.Xb(1,"checkbox-filter-dropdown",26),f.jc("emitSelected",(function(t){return f.Oc(e),f.nc(2).userDropdownClosed(t)}))("loadMore",(function(t){return f.Oc(e),f.nc(2).loadMoreUsers(t)}))("userFilterChanged",(function(t){return f.Oc(e),f.nc(2).userFilterChanged(t)}))("emitSelectionOfAllEntities",(function(t){return f.Oc(e),f.nc(2).selectedAllUsers(t)})),f.oc(2,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("entity","team")("hasWithoutEntity",!1)("entityMap",e.teamMaps)("withoutSelected",!1)("selectedAll",e.selectAllUsers)("showSelectAll",!1)("saveSelected",!0)("queryStatus",e.queryStatus)("isUserDropdown",!0)("placeholder",f.pc(2,10,"GLOBAL.FIND_TEAM_LABEL"))}}function st(e,t){1&e&&(f.Xb(0,"div",19),f.Xb(1,"div",20),f.Xb(2,"a",21),f.Sb(3,"img",22),f.Xb(4,"span",23),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Wb(),f.Xc(7,nt,3,12,"div",24),f.Wb(),f.Wb()),2&e&&(f.Cb(5),f.bd(" ",f.pc(6,1,"GLOBAL.ADD_MEMEBERS_BTN")," "))}function rt(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"div",28),f.Xb(2,"span",29),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.USERS_LABEL")," "))}function ot(e,t){if(1&e){const e=f.Yb();f.Xb(0,"access-user-table",30),f.jc("membershipsUpdated",(function(t){return f.Oc(e),f.nc().onHourlyRateChanged(t)}))("managerRightsUpdated",(function(t){return f.Oc(e),f.nc().updatedProjectManagers(t)}))("userRemoved",(function(t){return f.Oc(e),f.nc().userRemoved(t)}))("updateProject",(function(t){return f.Oc(e),f.nc().updateProject(t)}))("usersNumber",(function(t){return f.Oc(e),f.nc().setNumberOfUsers(t)})),f.Wb()}if(2&e){const e=f.nc();f.wc("project",e.project)("projectManagerIds",e.projectManagerIds)("adminIds",e.adminIds)("ownerIds",e.ownerIds)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates&&e.activeBillable)}}function at(e,t){1&e&&(f.Xb(0,"div",27),f.Xb(1,"div",28),f.Xb(2,"span",29),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.GROUPS_LABEL")," "))}function ct(e,t){if(1&e){const e=f.Yb();f.Xb(0,"access-user-group-table",31),f.jc("userGroupRemoved",(function(t){return f.Oc(e),f.nc().userGroupRemoved(t)}))("updateProject",(function(t){return f.Oc(e),f.nc().updateProject(t)}))("groupsNumber",(function(t){return f.Oc(e),f.nc().setNumberOfGroups(t)})),f.Wb()}if(2&e){const e=f.nc();f.wc("project",e.project)("hasEditPermission",e.hasEditPermission)}}let lt=(()=>{class e{constructor(e,t,i,n,r,o,a,c,l){this.userService=e,this.userGroupService=t,this.projectService=i,this.titleService=n,this.loader=r,this.uiSettingsService=o,this.workspaceService=a,this.cd=c,this.translate=l,this.membershipsChanged=new f.n,this.projectManagersUpdated=new f.n,this.page=1,this.limit=y.j,this.teamMaps=[],this.selectAllUsers=!1,this.numberOfUsers=1,this.numberOfGroups=1,this.queryStatus="ACTIVE",this.userRefreshListAfterFilterChange=!1,this.unsubscribe$=new s.a}ngOnInit(){this.titleService.setCustomTitle(this.translate.instant("PROJECTS.EDIT_SECTION.PROJECT_NAME_ACCESS",{name:this.project.name})),this.shouldShowUsers=!!this.uiSettingsService.getSettings(I.b.PROJECT_ACCESS_DATA),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.teamMaps.push(Object(k.a)("Groups",this.translate.instant("GLOBAL.GROUPS_LABEL"),[])),this.teamMaps.push(Object(k.a)("Users",this.translate.instant("GLOBAL.USERS_LABEL"),[])),this.loader.hide(),this.activeBillable=this.workspace.activeBillableHours,this.getUsersAndUserGroups({})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}loadMoreUsers(e){this.refreshUserList=!1,this.userRefreshListAfterFilterChange=!1,this.getUsersAndUserGroups(e)}userFilterChanged(e){this.refreshUserList=!0,this.queryStatus=e.status,this.userRefreshListAfterFilterChange=!0,this.getUsersAndUserGroups(e)}getUsersAndUserGroups(e){e.status=this.queryStatus,e.statuses=this.queryStatus,e.email=e.name;const t=[];t.push(Object(k.a)("Groups",this.translate.instant("GLOBAL.GROUPS_LABEL"),[])),t.push(Object(k.a)("Users",this.translate.instant("GLOBAL.USERS_LABEL"),[])),this.refreshUserList||(this.teamMaps[0].value.forEach(e=>{t[0].value.push(e)}),this.teamMaps[1].value.forEach(e=>{t[1].value.push(e)}));const i=this.project.memberships.map(e=>e.userId);("INACTIVE"===e.status?Object(T.a)([Object(D.a)(null),this.workspaceService.getUsers(e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$))]):Object(T.a)([this.userGroupService.getUserGroups(e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)),this.workspaceService.getUsers(e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$))])).subscribe(([e,n])=>{if(e){const n=e.groups.filter(e=>-1===i.indexOf(e.id)&&"Admins"!==e.name).map(e=>new A.a(e));t[0].value=[...t[0].value,...n]}else t[0].value=[];if(n){const e=n.users.filter(e=>-1===i.indexOf(e.id)).map(e=>new A.a(e));t[1].value=[...t[1].value,...e]}this.teamMaps=t,this.cd.detectChanges()})}setNumberOfGroups(e){this.numberOfGroups=e}setNumberOfUsers(e){this.numberOfUsers=e}userDropdownClosed(e){const t=!!e.entities[0]&&e.entities[0].value.some(e=>e.selected),i=!!e.entities[1]&&e.entities[1].value.some(e=>e.selected);if(!t&&!i)return this.refreshUserList=!0,this.userFilterChanged({status:this.queryStatus}),void(this.userRefreshListAfterFilterChange=!1);const s=!e.name&&e.selectedAll,r=e.entities[0].value.filter(e=>e.selected===!s);this.numberOfGroups+=r.length;const o=e.entities[1].value.filter(e=>e.selected===!s);this.numberOfUsers+=o.length;const a=r.map(e=>e.entity.id),c=o.map(e=>e.entity.id);this.projectService.addUsersAndUserGroupsToProject(this.project.id,c,a,s).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.project=e,this.membershipsChanged.emit(e),this.refreshUserList=!0,this.userFilterChanged({status:this.queryStatus}),this.userRefreshListAfterFilterChange=!1})}onHourlyRateChanged(e){this.project.memberships=e.memberships,this.membershipsChanged.emit(e)}updatedProjectManagers(e){this.projectManagerIds=e,this.projectManagersUpdated.emit(e)}showUsers(e){this.shouldShowUsers=e,this.setLocalStorageSettings(),this.cd.detectChanges()}updateVisibility(){this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe()}userRemoved(e){this.userFilterChanged({status:this.queryStatus})}userGroupRemoved(e){this.userFilterChanged({status:this.queryStatus})}selectedAllUsers(e){this.selectAllUsers=e}updateProject(e){this.project=o.a.clone(e),this.membershipsChanged.emit(e)}setLocalStorageSettings(){this.uiSettingsService.setSettings(I.b.PROJECT_ACCESS_DATA,this.shouldShowUsers)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(R.a),f.Rb(r.a),f.Rb(_.a),f.Rb(d.a),f.Rb(I.a),f.Rb(u.a),f.Rb(f.h),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-access"]],inputs:{project:"project",projectManagerIds:"projectManagerIds",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates",adminIds:"adminIds",ownerIds:"ownerIds",activeBillable:"activeBillable"},outputs:{membershipsChanged:"membershipsChanged",projectManagersUpdated:"projectManagersUpdated"},decls:10,vars:7,consts:[["id","project-access","role","tabpanel",1,"cl-tab-pane","cl-active"],["class","cl-form-row",4,"ngIf"],["class","cl-mt-0",4,"ngIf"],[1,"cl-pb-2","cl-pb-lg-3"],[1,"cl-row","cl-align-items-center","cl-justify-content-between"],["class","cl-col cl-d-flex",4,"ngIf"],["class","cl-card cl-border-bottom-0 cl-mb-0",4,"ngIf"],[3,"project","projectManagerIds","adminIds","ownerIds","hasEditPermission","canSeeRates","membershipsUpdated","managerRightsUpdated","userRemoved","updateProject","usersNumber",4,"ngIf"],[3,"project","hasEditPermission","userGroupRemoved","updateProject","groupsNumber",4,"ngIf"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12"],[1,"cl-h2","cl-mb-0"],[1,"cl-text-gray-9","cl-w-lg-75"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","customRadioInline4-1","name","customRadioInline4",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline4-1",1,"cl-custom-control-label"],["type","radio","id","customRadioInline4-2","name","customRadioInline4",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline4-2",1,"cl-custom-control-label"],[1,"cl-mt-0"],[1,"cl-col","cl-d-flex"],["dropdown","",1,"cl-dropdown","cl-dropdown-large","cl-d-inline-flex","cl-align-items-center","cl-justify-content-end"],["closeDropdown","","id","dropdownMenuButton",1,"cl-d-flex","cl-color-blue","cl-py-2"],["src","assets/images/ui-icons/plus-blue.svg"],["closeDropdown","",1,"cl-ml-2"],["class","cl-dropdown-menu cl-prevent-close",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-prevent-close"],[3,"entity","hasWithoutEntity","entityMap","withoutSelected","selectedAll","showSelectAll","saveSelected","queryStatus","isUserDropdown","placeholder","emitSelected","loadMore","userFilterChanged","emitSelectionOfAllEntities"],[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[3,"project","projectManagerIds","adminIds","ownerIds","hasEditPermission","canSeeRates","membershipsUpdated","managerRightsUpdated","userRemoved","updateProject","usersNumber"],[3,"project","hasEditPermission","userGroupRemoved","updateProject","groupsNumber"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xc(1,tt,19,16,"div",1),f.Xc(2,it,1,0,"hr",2),f.Xb(3,"div",3),f.Xb(4,"div",4),f.Xc(5,st,8,3,"div",5),f.Wb(),f.Wb(),f.Xc(6,rt,5,3,"div",6),f.Xc(7,ot,1,6,"access-user-table",7),f.Xc(8,at,5,3,"div",6),f.Xc(9,ct,1,2,"access-user-group-table",8),f.Wb()),2&e&&(f.Cb(1),f.wc("ngIf",t.hasEditPermission),f.Cb(1),f.wc("ngIf",t.hasEditPermission),f.Cb(3),f.wc("ngIf",t.hasEditPermission),f.Cb(1),f.wc("ngIf",t.numberOfUsers>0),f.Cb(1),f.wc("ngIf",t.numberOfUsers>0),f.Cb(1),f.wc("ngIf",t.numberOfGroups>0),f.Cb(1),f.wc("ngIf",t.numberOfGroups>0))},directives:[C.u,L.A,L.c,L.s,L.v,w.a,S.a,x.a,xe,et],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();var ut=i("wd/R"),dt=i("Cpkn"),ht=i("wkZx"),pt=i("G4ky"),bt=i("KnX9"),ft=i("wlsK"),mt=i("tnjF"),gt=i("jy+1"),vt=i("rsZi"),Ct=function(e){return e.NAME="NAME",e.STATUS="STATUS",e.PROGRESS="PROGRESS",e.EARNING="EARNING",e.ESTIMATE="ESTIMATE",e.BUDGET_ESTIMATE="BUDGET_ESTIMATE",e}({});function Et(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",7),f.Xb(1,"div",8),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.NAME)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.bd(" ",f.pc(4,5,"GLOBAL.NAME_LABEL")," ")}}function wt(e,t){1&e&&(f.Xb(0,"th"),f.Xb(1,"div",10),f.Xb(2,"div",11),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"PROJECTS.SHARED.ASSIGNEES_LABEL")," "))}function St(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",12),f.Xb(1,"div",13),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.EARNING)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.EARNING&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.EARNING&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.bd(" ",f.pc(4,5,"GLOBAL.AMOUNT_LABEL")," ")}}function yt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",12),f.Xb(1,"div",10),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.STATUS)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.bd(" ",f.pc(4,5,"GLOBAL.TRACKED_LABEL")," ")}}function Ot(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",12),f.Xb(1,"div",10),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.STATUS)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.STATUS&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.bd(" ",f.pc(4,5,"GLOBAL.STATUS_LABEL")," ")}}function At(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th"),f.Xb(1,"div",14),f.Xb(2,"a",9),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.SortBy.PROGRESS)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(2),f.Hb("cl-up",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.bd(" ",f.pc(4,5,"PROJECTS.SHARED.PROGRESS_LABEL")," ")}}function kt(e,t){1&e&&(f.Vb(0,3),f.Xc(1,Et,5,7,"th",4),f.oc(2,"translate"),f.Xc(3,wt,5,3,"th",5),f.oc(4,"translate"),f.Xc(5,St,5,7,"th",6),f.oc(6,"translate"),f.Xc(7,yt,5,7,"th",6),f.oc(8,"translate"),f.Xc(9,Ot,5,7,"th",6),f.oc(10,"translate"),f.Xc(11,At,5,7,"th",5),f.oc(12,"translate"),f.Ub()),2&e&&(f.wc("ngSwitch",t.$implicit),f.Cb(1),f.wc("ngSwitchCase",f.pc(2,7,"GLOBAL.NAME_LABEL")),f.Cb(2),f.wc("ngSwitchCase",f.pc(4,9,"PROJECTS.LABELS.ASSIGNEE")),f.Cb(2),f.wc("ngSwitchCase",f.pc(6,11,"GLOBAL.AMOUNT_LABEL")),f.Cb(2),f.wc("ngSwitchCase",f.pc(8,13,"GLOBAL.TRACKED_LABEL")),f.Cb(2),f.wc("ngSwitchCase",f.pc(10,15,"GLOBAL.STATUS_LABEL")),f.Cb(2),f.wc("ngSwitchCase",f.pc(12,17,"PROJECTS.SHARED.PROGRESS_LABEL")))}function Tt(e,t){if(1&e&&(f.Vb(0),f.Xc(1,kt,13,19,"ng-container",2),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.wc("ngForOf",e.labels)}}function Dt(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",15),f.Xb(1,"div",16),f.Zc(2),f.oc(3,"translate"),f.Xb(4,"div",8),f.Xb(5,"a",17),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(6,"span",18),f.Sb(7,"img",19),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.bd(" ",f.pc(3,2,"GLOBAL.NAME_LABEL")," "),f.Cb(5),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let It=(()=>{class e{constructor(){this.onChangeSortOrder=new f.n,this.onChangeSortColumn=new f.n,this.onExpandAll=new f.n,this.isExpandAll=!1,this.EstimateType=pt.a,this.SortBy=Ct,this.SortOrder=vt.a}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}changeSort(e){e!==this.sortBy?this.onChangeSortColumn.emit(e):this.onChangeSortOrder.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["status-tasks-table-header"],["","status-tasks-table-header",""]],inputs:{isDesktop:"isDesktop",currency:"currency",sortBy:"sortBy",sortOrder:"sortOrder",estimateType:"estimateType",labels:"labels"},outputs:{onChangeSortOrder:"onChangeSortOrder",onChangeSortColumn:"onChangeSortColumn",onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[3,"ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","cl-h6 cl-mb-0 cl-pl-lg-3",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","cl-text-right",4,"ngSwitchCase"],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-ml-lg-custom-n2"],[1,"cl-h5","cl-mb-0","cl-text-gray-6-dark-mode"],[1,"cl-text-right"],[1,"cl-mr-lg-custom-n2"],[1,"cl-d-flex","cl-justify-content-end"],["colspan","5",1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Xc(0,Tt,2,1,"ng-container",0),f.Xc(1,Dt,8,4,"ng-template",null,1,f.Yc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[C.u,C.t,C.y,C.z],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();var _t=i("bzkB"),Rt=i("rg2B");function Lt(e,t){1&e&&f.Tb(0)}function xt(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Zc(2),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.Wc("text-decoration","DONE"===e.task.status?"line-through":"none"),f.xc("title",e.task.name),f.Cb(1),f.bd(" ",e.task.name," ")}}function Pt(e,t){if(1&e&&(f.Xb(0,"div",12),f.Xb(1,"div",13),f.oc(2,"translate"),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.xc("title",f.pc(2,2,e.makeTitleForTableRowComponent())),f.Cb(2),f.bd(" ",f.pc(4,4,e.makeTitleForTableRowComponent())," ")}}function jt(e,t){if(1&e&&(f.Xb(0,"div",18),f.Zc(1),f.oc(2,"translate"),f.oc(3,"roundIfWholeNumber"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.dd(" ",f.pc(2,3,"PROJECTS.PROJECTS_TABLE.OF_LABEL")," ",f.qc(3,5,e.estimate,2),"",e.isTimeEstimate?"h":" "+e.currency," ")}}function Mt(e,t){if(1&e&&(f.Xb(0,"div",14),f.Xb(1,"div",15),f.Xb(2,"div",16),f.Zc(3),f.oc(4,"roundIfWholeNumber"),f.Wb(),f.Xc(5,jt,4,8,"div",17),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(3),f.cd(" ",f.qc(4,3,e.isTimeEstimate?e.tracked:e.task.earning,2),"",e.isTimeEstimate?"h":" "+e.currency," "),f.Cb(2),f.wc("ngIf",e.estimate)}}function Xt(e,t){if(1&e&&(f.Xb(0,"div",21),f.Sb(1,"percentage-progress-bar",22),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("percentage",e.task.progress)("showPercentageOutsideOfProgress",!0)}}function Ft(e,t){1&e&&(f.Xb(0,"div",23),f.Xb(1,"div",15),f.Zc(2,"-"),f.Wb(),f.Wb())}function Wt(e,t){if(1&e&&(f.Xc(0,Xt,2,2,"div",19),f.Xc(1,Ft,3,0,"ng-template",null,20,f.Yc)),2&e){const e=f.Lc(2),t=f.nc();f.wc("ngIf",t.task.progress)("ngIfElse",e)}}function Bt(e,t){if(1&e&&(f.Xb(0,"div",24),f.Xb(1,"div",25),f.Zc(2),f.oc(3,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(2),f.bd(" ",f.pc(3,1,e.tracked),"h ")}}function Nt(e,t){if(1&e&&(f.Xb(0,"div",27),f.Zc(1),f.oc(2,"roundIfWholeNumber"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.cd(" ",f.qc(2,2,e.task.earning,0)," "," "+e.currency," ")}}function Gt(e,t){if(1&e&&f.Xc(0,Nt,3,5,"div",26),2&e){const e=f.nc();f.wc("ngIf",e.canSeeRates)}}function Ut(e,t){1&e&&f.Sb(0,"div",28)}const Vt=function(e){return{labels:e}},Ht=function(e,t,i,n,s,r,o){return[e,t,i,n,s,r,o]};let Yt=(()=>{class e{constructor(e){this.cd=e,this.EstimateType=pt.a}set allAssigneesOfProject(e){e&&(this._allAssigneesOfProject=e||[],this.addAssigneeNames())}get allAssigneesOfProject(){return this._allAssigneesOfProject}ngAfterViewInit(){this.isTimeEstimate=this.estimateType===pt.a.TIME_ESTIMATE;const e=Object(ut.duration)(this.task.duration);this.tracked=e.asHours(),this.setEstimateAndPercentage(),this.cd.detectChanges()}addAssigneeNames(){(this.task.assigneeIds||(this.task.assigneeNames="",this.task.assigneeNames))&&(this.task.userGroupNames||(this.task.userGroupNames=""),(this.task.assigneeIds||this.task.userGroupNames)&&(this.task.assigneeNames=this.filterAndJoinNames(this.task.assigneeIds),this.task.userGroupNames=this.filterAndJoinNames(this.task.userGroupIds)))}filterAndJoinNames(e){const t=this.allAssigneesOfProject.filter(t=>e.indexOf(t.id)>-1).map(e=>e.name||e.email);return t.sort(Object(gt.c)(e=>e,!1)),t.join(", ")}setEstimateAndPercentage(){if(this.isTimeEstimate){const e=Object(ut.duration)(this.task.estimate);this.estimate=e.asHours()}else this.estimate=this.task.budgetEstimate}makeTitleForTableRowComponent(){return 0===this.task.assigneeIds.length&&0===this.task.userGroupIds.length?"PROJECTS.PROJECTS_TABLE.ANYONE_LABEL":0===this.task.userGroupIds.length&&this.task.assigneeIds.length>0?this.task.assigneeNames:this.task.userGroupIds.length>0&&0===this.task.assigneeIds.length?this.task.userGroupNames:`${this.task.userGroupNames}, ${this.task.assigneeNames}`}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(f.h))},e.\u0275cmp=f.Lb({type:e,selectors:[["status-tasks-table-row"],["","status-tasks-table-row",""]],inputs:{task:"task",allAssigneesOfProject:"allAssigneesOfProject",labels:"labels",isDesktop:"isDesktop",currency:"currency",canSeeRates:"canSeeRates",hideProgressColumn:"hideProgressColumn",expandAll:"expandAll",estimateType:"estimateType",taskColumns:"taskColumns"},decls:18,vars:23,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["dummyCol2",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-pr-3"],[1,"cl-cut-text","cl-text-dark",3,"title"],[1,"cl-component-divided-left","cl-text-right","cl-text-lg-left","cl-w-100"],[1,"cl-cut-text","cl-text-dark","cl-w-100",3,"title"],[1,"cl-component-divided-left","cl-d-flex","cl-my-auto","cl-text-right"],[1,"cl-w-100"],[1,"cl-text-dark"],["class","cl-text-gray-9 cl-small",4,"ngIf"],[1,"cl-text-gray-9","cl-small"],["class","cl-px-2 cl-component-divided-left cl-text-right cl-w-100",4,"ngIf","ngIfElse"],["noEstimate",""],[1,"cl-px-2","cl-component-divided-left","cl-text-right","cl-w-100"],[1,"cl-w-sm-75","cl-d-block","cl-ml-auto",3,"percentage","showPercentageOutsideOfProgress"],[1,"cl-px-2","cl-component-divided-left","cl-w-100","cl-text-right"],[1,"cl-component-divided-left","cl-w-100"],[1,"cl-w-100","cl-text-right"],["class","cl-px-3 cl-d-flex cl-justify-content-center cl-justify-content-md-end cl-text-dark cl-text-center cl-text-lg-right",4,"ngIf"],[1,"cl-px-3","cl-d-flex","cl-justify-content-center","cl-justify-content-md-end","cl-text-dark","cl-text-center","cl-text-lg-right"],[1,"cl-px-3","cl-d-flex"]],template:function(e,t){if(1&e&&(f.Xc(0,Lt,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.oc(3,"columnDecider"),f.Xc(4,xt,3,4,"ng-template",null,3,f.Yc),f.Xc(6,Pt,5,6,"ng-template",null,4,f.Yc),f.Xc(8,Mt,6,6,"ng-template",null,5,f.Yc),f.Xc(10,Wt,3,2,"ng-template",null,6,f.Yc),f.Xc(12,Bt,4,3,"ng-template",null,7,f.Yc),f.Xc(14,Gt,1,1,"ng-template",null,8,f.Yc),f.Xc(16,Ut,1,0,"ng-template",null,9,f.Yc)),2&e){const e=f.Lc(2),i=f.Lc(5),n=f.Lc(7),s=f.Lc(9),r=f.Lc(11),o=f.Lc(13),a=f.Lc(15);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(13,Vt,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",f.tc(3,5,f.Hc(15,Ht,t.taskColumns,i,n,s,r,o,a)))("isExpanded",t.expandAll)}},directives:[C.B,Q.a,C.u,bt.a],pipes:[_t.a,v.e,Rt.a],encapsulation:2,changeDetection:0}),e})();var $t=i("6yyQ");function zt(e,t){if(1&e&&(f.Xb(0,"div",5),f.Sb(1,"tr",6),f.Wb()),2&e){const e=t.$implicit,i=f.nc();f.Cb(1),f.wc("task",e)("isDesktop",i.isDesktop)("labels",i.labels)("currency",i.currency)("taskColumns",i.taskColumns)("expandAll",i.expandAll)("estimateType",i.project.estimateType)("allAssigneesOfProject",i.allAssigneesOfProject)("canSeeRates",i.canSeeRates)("hideProgressColumn",i.hideProgressColumn)}}let Zt=(()=>{class e{constructor(e,t,i,n,s){this.browserService=e,this.cd=t,this.authService=i,this.workspaceService=n,this.translate=s,this.EstimateType=pt.a,this.page=1,this.limit=y.j,this.sortBy=Ct.NAME,this.sortOrder=vt.a.ASCENDING,this.expandAll=!1,this.unsubscribe$=new M.a}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.setBrowserWidth(),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.mapper=e=>e.name.toLowerCase(),this.tasks=this.project.tasks.sort(Object(gt.a)(this.mapper,!1)),this.tasks.forEach(e=>{e.earning=this.projectStatus.taskStatus[e.id]?this.projectStatus.taskStatus[e.id].totalAmount/100:0}),this.tasks.forEach(e=>{e.duration=this.projectStatus.taskStatus[e.id]?this.getTaskDuration(this.project,e):Object(ut.duration)(0)}),this.hideProgressColumn=this.project.estimateType===pt.a.NO_ESTIMATE||(this.project.estimateType===pt.a.TIME_ESTIMATE?"MANUAL"===this.project.timeEstimate.type:"MANUAL"===this.project.budgetEstimate.type),this.setLabelsAndColumns(),this.checksForWithoutTask(),this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus}getTaskDuration(e,t){return this.excludeNonBillable(e)?Object(ut.duration)(Object(ut.duration)(this.projectStatus.taskStatus[t.id].billable).asMilliseconds()):Object(ut.duration)(Object(ut.duration)(this.projectStatus.taskStatus[t.id].billable).asMilliseconds()+Object(ut.duration)(this.projectStatus.taskStatus[t.id].nonBillable).asMilliseconds())}excludeNonBillable(e){return this.project.estimateType===pt.a.TIME_ESTIMATE&&!e.timeEstimate.includeNonBillable}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngAfterViewInit(){this.cd.detectChanges()}setBrowserWidth(){this.browserService.isBreakpointLg$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setPagination(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.cd.detectChanges()}sortTasksByName(){this.mapper=e=>e.name.toLowerCase(),this.sortTasks()}sortTasksByStatus(){this.mapper=e=>Object(ut.duration)(e.duration).asHours(),this.sortTasks()}sortTasksByProgress(){this.mapper=this.project.estimateType===pt.a.TIME_ESTIMATE?e=>Object(ut.duration)(e.estimate).asHours()?100*Object(ut.duration)(e.duration).asHours()/Object(ut.duration)(e.estimate).asHours():0:e=>e.budgetEstimate?100*e.earning/e.budgetEstimate:0,this.sortTasks()}sortTasksByEarning(){this.mapper=e=>e.earning,this.sortTasks()}sortTasks(){this.tasks=[...this.project.tasks.sort(Object(gt.a)(this.mapper,this.sortOrder===vt.a.DESCENDING))],this.cd.detectChanges()}checksForWithoutTask(){this.project.tasks.some(e=>"without"===e.id)&&this.project.tasks.pop();const e=Object(ut.duration)(this.getProjectDuration()).asMilliseconds();let t=0;for(var i=0;i<this.project.tasks.length;i++)t+=Object(ut.duration)(this.project.tasks[i].duration).asMilliseconds();const n=e-t;if(n>0){const e=new mt.a({id:"without",name:this.translate.instant("GLOBAL.WITHOUT_TASK_LABEL"),duration:Object(ut.duration)(n),assigneeIds:[],userGroupIds:[],earning:this.projectStatus.totalAmount-this.tasks.map(e=>e.earning).reduce((e,t)=>e+t,0)});this.project.tasks.push(e)}}getProjectDuration(){return this.excludeNonBillable(this.project)?Object(ut.duration)(this.projectStatus.billable).asMilliseconds():Object(ut.duration)(this.projectStatus.nonBillable).asMilliseconds()+Object(ut.duration)(this.projectStatus.billable).asMilliseconds()}changeSortOrder(){this.sortOrder=this.sortOrder===vt.a.ASCENDING?vt.a.DESCENDING:vt.a.ASCENDING,this.sortTasks()}changeSortColumn(e){this.sortBy=e,this.sortOrder=vt.a.ASCENDING,this.sortBy===Ct.NAME?this.sortTasksByName():this.sortBy===Ct.STATUS?this.sortTasksByStatus():this.sortBy===Ct.PROGRESS?this.sortTasksByProgress():this.sortBy===Ct.EARNING&&this.sortTasksByEarning()}expandAllRows(e){this.expandAll=e}setLabelsAndColumns(){this.labels=Object.values(this.translate.instant(["GLOBAL.NAME_LABEL","PROJECTS.LABELS.ASSIGNEE"])),this.taskColumns=["col1","col2"],this.project.estimateType===pt.a.TIME_ESTIMATE?this.canSeeRates&&this.workspace.activeBillableHours&&(!this.workspace.onlyAdminsCanChangeBillableStatus||this.isAdminOrOwner)&&(this.labels.push(this.translate.instant("GLOBAL.AMOUNT_LABEL")),this.taskColumns.push("col6")):(this.labels.push(this.translate.instant("GLOBAL.TRACKED_LABEL")),this.taskColumns.push("col5")),this.hideProgressColumn?this.project.estimateType===pt.a.TIME_ESTIMATE?(this.labels.push(this.translate.instant("GLOBAL.TRACKED_LABEL")),this.taskColumns.push("col5")):this.canSeeRates&&this.workspace.activeBillableHours&&(!this.workspace.onlyAdminsCanChangeBillableStatus||this.isAdminOrOwner)&&(this.labels.push(this.translate.instant("GLOBAL.AMOUNT_LABEL")),this.taskColumns.push("col6")):((this.workspace.activeBillableHours&&(!this.workspace.onlyAdminsCanChangeBillableStatus||this.isAdminOrOwner)&&this.canSeeRates||this.project.estimateType!==pt.a.PROJECT_BUDGET)&&(this.labels.push(this.translate.instant("GLOBAL.STATUS_LABEL")),this.taskColumns.push("col3")),this.workspace.activeBillableHours&&(this.labels.push(this.translate.instant("PROJECTS.SHARED.PROGRESS_LABEL")),this.taskColumns.push("col4")))}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(j.a),f.Rb(f.h),f.Rb(c.a),f.Rb(u.a),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["status-tasks-table"]],viewQuery:function(e,t){var i;1&e&&f.gd(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",projectStatus:"projectStatus",currency:"currency",allAssigneesOfProject:"allAssigneesOfProject",canSeeRates:"canSeeRates"},decls:8,vars:15,consts:[[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-project-table-status-tasks"],["status-tasks-table-header","",3,"sortOrder","sortBy","isDesktop","currency","estimateType","labels","onChangeSortOrder","onChangeSortColumn","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],[1,"cl-row-hover-shadow"],["status-tasks-table-row","",1,"cl-text-gray-9",3,"task","isDesktop","labels","currency","taskColumns","expandAll","estimateType","allAssigneesOfProject","canSeeRates","hideProgressColumn"]],template:function(e,t){1&e&&(f.Xb(0,"table",0),f.Xb(1,"thead"),f.Xb(2,"tr",1),f.jc("onChangeSortOrder",(function(){return t.changeSortOrder()}))("onChangeSortColumn",(function(e){return t.changeSortColumn(e)}))("onExpandAll",(function(e){return t.expandAllRows(e)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Xc(4,zt,2,10,"div",2),f.oc(5,"paginate"),f.Wb(),f.Wb(),f.Xb(6,"div",3),f.Xb(7,"pager",4),f.jc("pageChanged",(function(e){return t.setPagination(e)}))("limitChanged",(function(e){return t.setPagination(e)})),f.Wb(),f.Wb()),2&e&&(f.Cb(2),f.wc("sortOrder",t.sortOrder)("sortBy",t.sortBy)("isDesktop",t.isDesktop)("currency",t.currency)("estimateType",t.project.estimateType)("labels",t.labels),f.Cb(2),f.wc("ngForOf",f.rc(5,11,t.tasks,t.page,t.limit)),f.Cb(3),f.wc("visible",t.project.tasks.length>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.project.tasks.length))},directives:[It,C.t,F.a,Yt],pipes:[$t.a],encapsulation:2,changeDetection:0}),e})();var Kt=i("87RK");function qt(e,t){1&e&&(f.Xb(0,"div",14),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.ad(f.pc(2,1,"PROJECTS.SHARED.REMAINING_LABEL")))}function Jt(e,t){1&e&&(f.Xb(0,"div",14),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.ad(f.pc(2,1,"PROJECTS.EDIT_PROJECT_STATUS.OVERAGE_LABEL")))}function Qt(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xc(1,qt,3,3,"div",20),f.Xc(2,Jt,3,3,"div",20),f.Xb(3,"div",21),f.Zc(4),f.oc(5,"roundIfWholeNumber"),f.oc(6,"simpleAbs"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(1),f.wc("ngIf",e.remaining>0),f.Cb(1),f.wc("ngIf",e.remaining<0),f.Cb(2),f.bd(" ",f.qc(5,3,f.pc(6,6,e.remaining),2)," h ")}}function ei(e,t){1&e&&(f.Xb(0,"span"),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.bd("(",f.pc(2,1,"GLOBAL.BILLABLE_LABEL"),")"))}function ti(e,t){1&e&&f.Sb(0,"hr")}function ii(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xb(4,"div",22),f.Zc(5),f.oc(6,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad(f.pc(3,2,"GLOBAL.BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(6,4,e.billable,2)," h ")}}function ni(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xb(4,"div",23),f.Zc(5),f.oc(6,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad(f.pc(3,2,"GLOBAL.NON_BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(6,4,e.nonBillable,2)," h ")}}function si(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Xb(6,"div",15),f.Zc(7),f.oc(8,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(9,"hr"),f.Xb(10,"div",13),f.Xb(11,"div",14),f.Zc(12),f.oc(13,"translate"),f.Wb(),f.Xb(14,"div",22),f.Zc(15),f.oc(16,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xb(17,"div",13),f.Xb(18,"div",14),f.Zc(19),f.oc(20,"translate"),f.Wb(),f.Xb(21,"div",23),f.Zc(22),f.oc(23,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(4),f.ad(f.pc(5,6,"PAGES.DASHBOARD.TEAM_ACTIVITIES.HEADER.TOTAL_TRACKED")),f.Cb(3),f.bd(" ",f.qc(8,8,e.tracked,2)," h "),f.Cb(5),f.ad(f.pc(13,11,"GLOBAL.BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(16,13,e.billable,2)," h "),f.Cb(4),f.ad(f.pc(20,16,"GLOBAL.NON_BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(23,18,e.nonBillable,2)," h ")}}function ri(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Xb(6,"div",24),f.Zc(7),f.oc(8,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(4),f.ad(f.pc(5,3,"GLOBAL.AMOUNT_LABEL")),f.Cb(3),f.cd(" ",f.qc(8,5,e.projectStatus.totalAmount,2)," ",e.currency," ")}}function oi(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Xb(2,"div",12),f.Xb(3,"div",13),f.Xb(4,"div",14),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Xb(7,"div",15),f.Zc(8),f.oc(9,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(10,"hr"),f.Xc(11,Qt,7,8,"div",16),f.Xb(12,"div",13),f.Xb(13,"div",14),f.Zc(14),f.oc(15,"translate"),f.Xc(16,ei,3,3,"span",17),f.Wb(),f.Xb(17,"div",18),f.Zc(18),f.oc(19,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xc(20,ti,1,0,"hr",17),f.Xc(21,ii,7,7,"div",16),f.Xc(22,ni,7,7,"div",16),f.Wb(),f.Wb(),f.Xc(23,si,24,21,"div",19),f.Xc(24,ri,9,8,"div",19),f.Wb()),2&e){const e=f.nc(2);f.Cb(5),f.ad(f.pc(6,11,"PROJECTS.EDIT_PROJECT_STATUS.TIME_EST_LABEL")),f.Cb(3),f.bd(" ",f.qc(9,13,e.projectEstimate,2)," h "),f.Cb(3),f.wc("ngIf",0!=e.remaining),f.Cb(3),f.bd(" ",f.pc(15,16,"GLOBAL.TRACKED_LABEL")," "),f.Cb(2),f.wc("ngIf",e.isExcludeNonBillable()),f.Cb(2),f.bd(" ",f.qc(19,18,e.isExcludeNonBillable()?e.billable:e.tracked,2)," h "),f.Cb(2),f.wc("ngIf",!e.isExcludeNonBillable()&&e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",!e.isExcludeNonBillable()&&e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",!e.isExcludeNonBillable()&&e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.isExcludeNonBillable()),f.Cb(1),f.wc("ngIf",e.canSeeRates&&e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner))}}function ai(e,t){1&e&&(f.Xb(0,"div",14),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.ad(f.pc(2,1,"PROJECTS.SHARED.REMAINING_LABEL")))}function ci(e,t){1&e&&(f.Xb(0,"div",14),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.ad(f.pc(2,1,"PROJECTS.EDIT_PROJECT_STATUS.OVERAGE_LABEL")))}function li(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xc(1,ai,3,3,"div",20),f.Xc(2,ci,3,3,"div",20),f.Xb(3,"div",28),f.Zc(4),f.oc(5,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(4);f.Cb(1),f.wc("ngIf",e.remaining>0),f.Cb(1),f.wc("ngIf",e.remaining<0),f.Cb(2),f.cd(" ",f.qc(5,4,e.remaining,2)," ",e.currency," ")}}function ui(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Xb(6,"div",26),f.Zc(7),f.oc(8,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Sb(9,"hr"),f.Xc(10,li,6,7,"div",16),f.Xb(11,"div",13),f.Xb(12,"div",14),f.Zc(13),f.oc(14,"translate"),f.Wb(),f.Xb(15,"div",27),f.Zc(16),f.oc(17,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(4),f.ad(f.pc(5,7,"PROJECTS.SHARED.PROJECT_BUDGET_LABEL")),f.Cb(3),f.cd(" ",f.qc(8,9,e.projectEstimate,2)," ",e.currency," "),f.Cb(3),f.wc("ngIf",0!=e.remaining),f.Cb(3),f.ad(f.pc(14,12,"GLOBAL.AMOUNT_LABEL")),f.Cb(3),f.cd(" ",f.qc(17,14,e.projectStatus.totalAmount,2)," ",e.currency," ")}}function di(e,t){1&e&&f.Sb(0,"hr")}function hi(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xb(4,"div",29),f.Zc(5),f.oc(6,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad(f.pc(3,2,"GLOBAL.BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(6,4,e.billable,2)," h ")}}function pi(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xb(4,"div",30),f.Zc(5),f.oc(6,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad(f.pc(3,2,"GLOBAL.NON_BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(6,4,e.nonBillable,2)," h ")}}function bi(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xc(1,ui,18,17,"div",19),f.Xb(2,"div",11),f.Xb(3,"div",12),f.Xb(4,"div",13),f.Xb(5,"div",14),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Xb(8,"div",25),f.Zc(9),f.oc(10,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xc(11,di,1,0,"hr",17),f.Xc(12,hi,7,7,"div",16),f.Xc(13,pi,7,7,"div",16),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.canSeeRates&&e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(5),f.ad(f.pc(7,6,"GLOBAL.TRACKED_LABEL")),f.Cb(3),f.bd(" ",f.qc(10,8,e.tracked,2)," h "),f.Cb(2),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner))}}function fi(e,t){1&e&&f.Sb(0,"hr")}function mi(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xb(4,"div",32),f.Zc(5),f.oc(6,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad(f.pc(3,2,"GLOBAL.BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(6,4,e.billable,2)," h ")}}function gi(e,t){if(1&e&&(f.Xb(0,"div",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Xb(4,"div",33),f.Zc(5),f.oc(6,"roundIfWholeNumber"),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(2),f.ad(f.pc(3,2,"GLOBAL.NON_BILLABLE_LABEL")),f.Cb(3),f.bd(" ",f.qc(6,4,e.nonBillable,2)," h ")}}function vi(e,t){if(1&e&&(f.Xb(0,"div",11),f.Xb(1,"div",12),f.Xb(2,"div",13),f.Xb(3,"div",14),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Xb(6,"div",34),f.Zc(7),f.oc(8,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(3);f.Cb(4),f.ad(f.pc(5,3,"GLOBAL.AMOUNT_LABEL")),f.Cb(3),f.cd(" ",f.qc(8,5,e.projectStatus.totalAmount,2)," ",e.currency," ")}}function Ci(e,t){if(1&e&&(f.Xb(0,"div",10),f.Xb(1,"div",11),f.Xb(2,"div",12),f.Xb(3,"div",13),f.Xb(4,"div",14),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Xb(7,"div",31),f.Zc(8),f.oc(9,"roundIfWholeNumber"),f.Wb(),f.Wb(),f.Xc(10,fi,1,0,"hr",17),f.Xc(11,mi,7,7,"div",16),f.Xc(12,gi,7,7,"div",16),f.Wb(),f.Wb(),f.Xc(13,vi,9,8,"div",19),f.Wb()),2&e){const e=f.nc(2);f.Cb(5),f.ad(f.pc(6,6,"GLOBAL.TRACKED_LABEL")),f.Cb(3),f.bd(" ",f.qc(9,8,e.tracked,2)," h "),f.Cb(2),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.canSeeRates&&e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner))}}function Ei(e,t){if(1&e&&(f.Xb(0,"div"),f.Sb(1,"percentage-progress-bar",35),f.Wb()),2&e){const e=f.nc(2);f.Hb("cl-d-none",(!e.activeBillable||e.onlyAdminCanSeeAndChangeBillable&&!e.isAdminOrOwner)&&e.project.estimateType===e.EstimateType.NO_ESTIMATE),f.Cb(1),f.wc("percentage",e.projectStatus.progress)("showPercentageOutsideOfProgress",!0)("centerText",!0)}}function wi(e,t){1&e&&(f.Xb(0,"div",44),f.Sb(1,"span",45),f.Xb(2,"span",46),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.ad(f.pc(4,1,"GLOBAL.BILLABLE_LABEL")))}function Si(e,t){1&e&&(f.Xb(0,"div",44),f.Sb(1,"span",47),f.Xb(2,"span",46),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.ad(f.pc(4,1,"GLOBAL.NON_BILLABLE_LABEL")))}function yi(e,t){1&e&&(f.Xb(0,"div",44),f.Sb(1,"span",48),f.Xb(2,"span",46),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.ad(f.pc(4,1,"PROJECTS.SHARED.REMAINING_LABEL")))}function Oi(e,t){1&e&&(f.Xb(0,"div",44),f.Sb(1,"span",45),f.Xb(2,"span",46),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.ad(f.pc(4,1,"GLOBAL.TRACKED_LABEL")))}function Ai(e,t){if(1&e&&(f.Xb(0,"div",42),f.Xc(1,wi,5,3,"div",43),f.Xc(2,Si,5,3,"div",43),f.Xc(3,yi,5,3,"div",43),f.Xc(4,Oi,5,3,"div",43),f.Wb()),2&e){const e=f.nc(4);f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)&&!e.isExcludeNonBillable()),f.Cb(1),f.wc("ngIf",e.projectEstimate&&e.remaining>0),f.Cb(1),f.wc("ngIf",!e.activeBillable||e.onlyAdminCanSeeAndChangeBillable&&!e.isAdminOrOwner)}}function ki(e,t){1&e&&(f.Xb(0,"div",44),f.Sb(1,"span",45),f.Xb(2,"span",46),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.ad(f.pc(4,1,"GLOBAL.AMOUNT_LABEL")))}function Ti(e,t){1&e&&(f.Xb(0,"div",44),f.Sb(1,"span",48),f.Xb(2,"span",46),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.ad(f.pc(4,1,"PROJECTS.SHARED.REMAINING_LABEL")))}function Di(e,t){if(1&e&&(f.Xb(0,"div",42),f.Xc(1,ki,5,3,"div",43),f.Xc(2,Ti,5,3,"div",43),f.Wb()),2&e){const e=f.nc(4);f.Cb(1),f.wc("ngIf",e.activeBillable&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),f.Cb(1),f.wc("ngIf",e.remaining>0)}}function Ii(e,t){if(1&e&&(f.Xb(0,"div",39),f.Sb(1,"doughnut-chart",40),f.oc(2,"roundIfWholeNumber"),f.oc(3,"roundIfWholeNumber"),f.Xc(4,Ai,5,4,"div",41),f.Xc(5,Di,3,2,"div",41),f.Wb()),2&e){const e=f.nc(3);f.Cb(1),f.wc("doughnutChart",e.pieChartValues)("doughnutChartColors",e.doughnutChartColors)("doughnutChartData",e.doughnutChartData)("doughnutChartLabels",e.doughnutChartLabels)("currency",e.currency)("format",e.format)("totalTime",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&e.activeBillable?e.isNoEstimate?"":f.qc(2,15,e.projectStatus.totalAmount,2)+" "+e.currency:f.qc(3,18,e.getTotalTimeForChart(),2)+" h")("asString",!0)("canSeeRates",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&!e.isNoEstimate)("hideDuration",e.project.estimateType===e.EstimateType.PROJECT_BUDGET)("isBillabilityType",!0)("noTooltip",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&!e.canSeeRates)("tooltipToLeft",!1),f.Cb(3),f.wc("ngIf",e.project.estimateType===e.EstimateType.TIME_ESTIMATE||e.project.estimateType===e.EstimateType.NO_ESTIMATE),f.Cb(1),f.wc("ngIf",e.project.estimateType===e.EstimateType.PROJECT_BUDGET)}}function _i(e,t){if(1&e&&(f.Xb(0,"div",36),f.Xb(1,"div",37),f.Xc(2,Ii,6,21,"div",38),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(2),f.wc("ngIf",e.pieChartValues)}}function Ri(e,t){if(1&e&&(f.Xb(0,"div",49),f.Xb(1,"div",50),f.Xb(2,"div",51),f.Xb(3,"span",52),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Sb(6,"status-tasks-table",53),f.Wb()),2&e){const e=f.nc(2);f.Cb(4),f.ad(f.pc(5,6,"GLOBAL.TASKS_LABEL")),f.Cb(2),f.wc("project",e.project)("projectStatus",e.projectStatus)("currency",e.currency)("allAssigneesOfProject",e.allAssigneesOfProject)("canSeeRates",e.canSeeRates)}}function Li(e,t){if(1&e&&(f.Xb(0,"div",1),f.Xb(1,"div",2),f.Xc(2,oi,25,21,"div",3),f.Xc(3,bi,14,11,"div",3),f.Xc(4,Ci,14,11,"div",3),f.Xb(5,"div",4),f.Xb(6,"div",5),f.Xb(7,"div",6),f.Xc(8,Ei,2,5,"div",7),f.Xc(9,_i,3,1,"div",8),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xc(10,Ri,7,8,"div",9),f.Wb()),2&e){const e=f.nc();f.Cb(2),f.wc("ngIf",e.project.estimateType===e.EstimateType.TIME_ESTIMATE&&!e.isNoEstimate),f.Cb(1),f.wc("ngIf",e.project.estimateType===e.EstimateType.PROJECT_BUDGET&&!e.isNoEstimate),f.Cb(1),f.wc("ngIf",e.project.estimateType===e.EstimateType.NO_ESTIMATE||e.isNoEstimate),f.Cb(4),f.wc("ngIf",e.project.progress),f.Cb(1),f.wc("ngIf",e.pieChartValues),f.Cb(1),f.wc("ngIf",e.project.tasks)}}let xi=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c){this.workspaceService=e,this.userService=t,this.userGroupService=i,this.authService=n,this.projectService=s,this.titleService=r,this.loader=o,this.cd=a,this.translate=c,this.EstimateType=pt.a,this.doughnutChartColors=[{backgroundColor:["#E4EAEE","#AED581","#8BC34A"],hoverBackgroundColor:["#E4EAEE","#AED581","#8BC34A"],borderWidth:0}],this.unsubscribe$=new M.a}ngOnInit(){this.translations=this.translate.instant(["PROJECTS.SHARED.REMAINING_LABEL","GLOBAL.AMOUNT_LABEL","GLOBAL.NON_BILLABLE_LABEL","GLOBAL.BILLABLE_LABEL","GLOBAL.TRACKED_LABEL"]),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.projectService.getProjectStatus(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.projectService.getProject(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=new o.a(t),this.projectStatus=new dt.a(e),this.titleService.setCustomTitle(this.translate.instant("PROJECTS.EDIT_SECTION.PROJECT_NAME_STATUS",{name:this.project.name}));const i=this.workspaceService.getLocalDefaultWorkspace();this.format=i.getTimeFormat(),this.currency=!this.activeBillable||this.workspace.onlyAdminsCanChangeBillableStatus&&!this.isAdminOrOwner?"h":i.hourlyRate.currency||"USD",this.project.estimateType===pt.a.TIME_ESTIMATE&&this.getTimeEstimate(),this.project.estimateType===pt.a.PROJECT_BUDGET&&this.getProjectBudget(),(this.project.estimateType===pt.a.PROJECT_BUDGET&&!this.activeBillable||this.workspace.onlyAdminsCanChangeBillableStatus&&!this.isAdminOrOwner)&&(this.project.estimateType=pt.a.NO_ESTIMATE),this.totalTime=Object(ut.duration)(this.projectStatus.billable).asHours()+Object(ut.duration)(this.projectStatus.nonBillable).asHours(),this.tracked=this.totalTime,this.billable=Object(ut.duration)(this.projectStatus.billable).asHours(),this.nonBillable=Object(ut.duration)(this.projectStatus.nonBillable).asHours(),this.setIsNoEstimate(),this.calculateRemaining(),this.fillPieChart(),this.getTaskAssigneesOfProject(),this.cd.detectChanges(),this.cd.detectChanges()})}),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.activeBillable=this.workspace.activeBillableHours,this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}fillPieChart(){if(this.pieChartValues=[],this.project.estimateType===pt.a.PROJECT_BUDGET)this.doughnutChartData=[this.remaining>0?this.remaining:0,0,this.isNoEstimate?this.projectStatus.progress:this.projectStatus.totalAmount],this.doughnutChartLabels=[this.translations["PROJECTS.SHARED.REMAINING_LABEL"],"",this.translations["GLOBAL.AMOUNT_LABEL"]],this.doughnutChartLabels.forEach(e=>{this.pieChartValues.push({clientName:"",color:this.doughnutChartColors[this.doughnutChartLabels.indexOf(e)],duration:Object(ut.duration)(0,"h"),earned:e===this.translations["PROJECTS.SHARED.REMAINING_LABEL"]?100*(this.project.budgetEstimate.estimate-this.projectStatus.totalAmount):100*this.projectStatus.totalAmount,label:e,projectName:""})});else if(this.isExcludeNonBillable())this.fillWithNonBillablePieChart();else{this.doughnutChartData=[!this.isNoEstimate&&this.remaining>0?this.remaining:0,!this.activeBillable||this.onlyAdminCanSeeAndChangeBillable&&!this.isAdminOrOwner?null:this.nonBillable,!this.activeBillable||this.onlyAdminCanSeeAndChangeBillable&&!this.isAdminOrOwner?this.tracked:this.billable],this.doughnutChartLabels=[this.translations["PROJECTS.SHARED.REMAINING_LABEL"],!this.activeBillable||this.onlyAdminCanSeeAndChangeBillable&&!this.isAdminOrOwner?null:this.translations["GLOBAL.NON_BILLABLE_LABEL"],!this.activeBillable||this.onlyAdminCanSeeAndChangeBillable&&!this.isAdminOrOwner?this.translations["GLOBAL.TRACKED_LABEL"]:this.translations["GLOBAL.BILLABLE_LABEL"]];for(let e=0;e<this.doughnutChartLabels.length;e++)this.pieChartValues.push({clientName:"",color:this.doughnutChartColors[e],duration:Object(ut.duration)(this.doughnutChartData[e],"h"),earned:this.projectStatus.totalAmount,label:this.doughnutChartLabels[e],projectName:""})}this.loader.hide(),this.cd.detectChanges()}isExcludeNonBillable(){return this.project.estimateType===pt.a.TIME_ESTIMATE&&this.activeBillable&&!this.project.timeEstimate.includeNonBillable}getTaskAssigneesOfProject(){let e=[];this.project.tasks.forEach(t=>{e=[...new Set([...e,...t.assigneeIds])]});let t=[];if(this.project.tasks.forEach(e=>{t=[...new Set([...t,...e.userGroupIds])]}),0===e.length&&0===t.length)this.allAssigneesOfProject=[],this.cd.detectChanges();else{const i=0===e.length?Object(D.a)(null):this.userService.getUsersByIds(e).pipe(Object(n.a)(this.unsubscribe$)),s=0===t.length?Object(D.a)(null):this.userGroupService.getAllUserGroupByIds(t).pipe(Object(n.a)(this.unsubscribe$));Object(T.a)([i,s]).subscribe(([e,t])=>{this.allAssigneesOfProject=[...e||[],...t||[]],this.cd.detectChanges()})}}getTimeEstimate(){if("MANUAL"===this.project.timeEstimate.type)this.projectEstimate=this.project.timeEstimate.estimate;else{const e=Object(ht.a)(this.project.tasks.map(e=>e.estimate));this.projectEstimate=e.asHours()}}getProjectBudget(){this.projectEstimate="MANUAL"===this.project.budgetEstimate.type?this.project.budgetEstimate.estimate:this.project.tasks.map(e=>e.budgetEstimate||0).reduce((e,t)=>e+t,0)}calculateRemaining(){if(this.project.estimateType===pt.a.TIME_ESTIMATE){let e=Object(ut.duration)(this.projectStatus.billable).asMilliseconds();this.isExcludeNonBillable()||(e+=Object(ut.duration)(this.projectStatus.nonBillable).asMilliseconds()),this.remaining=this.projectEstimate-Object(ut.duration)(e).asHours()}this.project.estimateType===pt.a.PROJECT_BUDGET&&(this.remaining=this.projectEstimate-this.projectStatus.totalAmount,this.isNoEstimate&&(this.remaining=100-this.projectStatus.progress)),this.cd.detectChanges()}setIsNoEstimate(){this.isNoEstimate=this.project.estimateType===pt.a.PROJECT_BUDGET&&0===this.projectEstimate||this.project.estimateType===pt.a.TIME_ESTIMATE&&0===this.projectEstimate||this.project.estimateType===pt.a.NO_ESTIMATE}fillWithNonBillablePieChart(){this.doughnutChartColors=[{backgroundColor:["#E4EAEE","#8BC34A"],hoverBackgroundColor:["#E4EAEE","#8BC34A"],borderWidth:0}],this.doughnutChartData=[this.remaining>0?this.remaining:0,this.billable],this.doughnutChartLabels=[this.translations["PROJECTS.SHARED.REMAINING_LABEL"],this.translations["GLOBAL.BILLABLE_LABEL"]];for(let e=0;e<this.doughnutChartLabels.length;e++)this.pieChartValues.push({clientName:"",color:this.doughnutChartColors[0],duration:Object(ut.duration)(this.doughnutChartData[e],"h"),earned:this.projectStatus.totalAmount,label:this.doughnutChartLabels[e],projectName:""})}getTotalTimeForChart(){return this.isExcludeNonBillable()?this.billable:this.totalTime}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(u.a),f.Rb(a.a),f.Rb(R.a),f.Rb(c.a),f.Rb(r.a),f.Rb(_.a),f.Rb(d.a),f.Rb(f.h),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-status"]],inputs:{projectId:"projectId",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates"},decls:1,vars:1,consts:[["class","cl-tab-pane cl-active","id","project-status","role","tabpanel",4,"ngIf"],["id","project-status","role","tabpanel",1,"cl-tab-pane","cl-active"],[1,"cl-row","cl-d-flex","cl-flex-wrap"],["class","cl-d-flex cl-flex-column cl-col-lg-4",4,"ngIf"],[1,"cl-col-lg-8"],[1,"cl-card","cl-border-bottom","cl-mb-0"],[1,"cl-card-body"],[3,"cl-d-none",4,"ngIf"],["class","cl-mt-3",4,"ngIf"],["class","cl-page-component-wrapper cl-mb-0 cl-mt-3",4,"ngIf"],[1,"cl-d-flex","cl-flex-column","cl-col-lg-4"],[1,"cl-card","cl-border-bottom"],[1,"cl-card-body","cl-py-2"],[1,"cl-d-flex","cl-justify-content-between","cl-w-100","cl-align-items-center"],[1,"cl-h5","cl-mb-0"],["data-cy","time-estimate",1,"cl-h2","cl-mb-0"],["class","cl-d-flex cl-justify-content-between cl-w-100 cl-align-items-center",4,"ngIf"],[4,"ngIf"],["data-cy","time-tracked-estimate",1,"cl-h2","cl-mb-0"],["class","cl-card cl-border-bottom",4,"ngIf"],["class","cl-h5 cl-mb-0",4,"ngIf"],["data-cy","time-remaining-estimate",1,"cl-h2","cl-mb-0"],["data-cy","time-billable-estimate",1,"cl-h2","cl-mb-0"],["data-cy","time-non-billable-estimate",1,"cl-h2","cl-mb-0"],["data-cy","billable-amount-estimate",1,"cl-h2","cl-mb-0"],["data-cy","time-tracked-budget",1,"cl-h2","cl-mb-0"],["data-cy","project-budget",1,"cl-h2","cl-mb-0"],["data-cy","time-amount-budget",1,"cl-h2","cl-mb-0"],["data-cy","time-remaining-budget",1,"cl-h2","cl-mb-0"],["data-cy","time-billable-budget",1,"cl-h2","cl-mb-0"],["data-cy","time-non-billable-budget",1,"cl-h2","cl-mb-0"],["data-cy","time-tracked",1,"cl-h2","cl-mb-0"],["data-cy","time-billable",1,"cl-h2","cl-mb-0"],["data-cy","time-non-billable",1,"cl-h2","cl-mb-0"],["data-cy","billable-amount",1,"cl-h2","cl-mb-0"],[3,"percentage","showPercentageOutsideOfProgress","centerText"],[1,"cl-mt-3"],[1,"cl-row","cl-justify-content-center"],["class","cl-col-lg-8 cl-col-xl-6",4,"ngIf"],[1,"cl-col-lg-8","cl-col-xl-6"],[3,"doughnutChart","doughnutChartColors","doughnutChartData","doughnutChartLabels","currency","format","totalTime","asString","canSeeRates","hideDuration","isBillabilityType","noTooltip","tooltipToLeft"],["class","cl-mt-3 chart-legend-wrapper",4,"ngIf"],[1,"cl-mt-3","chart-legend-wrapper"],["class","chart-legend-item",4,"ngIf"],[1,"chart-legend-item"],[1,"chart-legend-item-color","chart-legend-item-color-billable"],[1,"chart-legend-item-text"],[1,"chart-legend-item-color","chart-legend-item-color-non-billable"],[1,"chart-legend-item-color","chart-legend-item-color-remaining"],[1,"cl-page-component-wrapper","cl-mb-0","cl-mt-3"],[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[3,"project","projectStatus","currency","allAssigneesOfProject","canSeeRates"]],template:function(e,t){1&e&&f.Xc(0,Li,11,6,"div",0),2&e&&f.wc("ngIf",t.projectStatus)},directives:[C.u,bt.a,ft.a,Zt],pipes:[v.e,Rt.a,Kt.a],encapsulation:2,changeDetection:0}),e})();var Pi=i("zDGq"),ji=i("fFwQ"),Mi=i("wMS7"),Xi=i.n(Mi),Fi=i("DVUX");const Wi=["note"],Bi=["noteSize"],Ni=["noteFormated"],Gi=["scrollIndicator"];function Ui(e,t){if(1&e){const e=f.Yb();f.Xb(0,"textarea",12,13),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).projectNote=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).onModelChange()}))("paste",(function(){return f.Oc(e),f.nc(2).onPaste()}))("blur",(function(){return f.Oc(e),f.nc(2).updateNote()})),f.Wb()}if(2&e){const e=f.nc(2);f.Wc("height",e.minHeight),f.Hb("cl-is-invalid",e.availableCharacters<0),f.wc("ngModel",e.projectNote)("disabled",!e.hasEditPermission)}}const Vi=function(e,t){return{exceededBy:e,limit:t}};function Hi(e,t){if(1&e&&(f.Xb(0,"div",14),f.Xb(1,"span",15),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Hb("cl-invalid-feedback",e.availableCharacters<0),f.Cb(2),f.bd(" ",f.qc(3,3,"PROJECTS.EDIT_PROJECT_NOTE.CHARACTER_LIMIT_EXCEEDED_WARNING",f.Cc(6,Vi,-1*e.availableCharacters,e.limit))," ")}}function Yi(e,t){if(1&e&&(f.Vb(0),f.Xc(1,Ui,2,6,"textarea",9),f.Sb(2,"div",null,10),f.Xc(4,Hi,4,9,"div",11),f.Ub()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",e.focused),f.Cb(3),f.wc("ngIf",e.availableCharacters<0)}}function $i(e,t){1&e&&(f.Xb(0,"a",16),f.oc(1,"translate"),f.Sb(2,"img",17),f.Wb()),2&e&&f.xc("ngbTooltip",f.pc(1,1,"PROJECTS.EDIT_PROJECT_NOTE.ADD_MEDIA_TOOLTIP"))}function zi(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",18,19),f.jc("click",(function(){return f.Oc(e),f.nc().focusToNote()})),f.Wb()}if(2&e){const e=f.nc();f.Hb("cl-typo-reset-clickable",e.hasEditPermission)}}let Zi=(()=>{class e{constructor(e,t,i,n,r,o){this.projectService=e,this.titleService=t,this.cd=i,this.toaster=n,this.keyboardService=r,this.translate=o,this.limit=16384,this.minHeight="auto",this.unsubscribe$=new s.a}set project(e){this._project=e,e&&(this.titleService.setCustomTitle(this._project.name+" - Note"),this.textAreaAdjust()),e&&this.noteFormated&&this.setMarkup()}get project(){return this._project}set hasEditPermission(e){this._hasEditPermission=e,this.isInitialized&&this.setNoteFormated()}get hasEditPermission(){return this._hasEditPermission}ngOnInit(){this.projectNote=this.project.note,Xi.a.addHook("afterSanitizeAttributes",e=>{"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener"))}),this.keyboardService.keyboardCtrlEnter$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.note&&this.note.nativeElement.blur()}),this.setMarkup(),this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}updateNote(){if(setTimeout(()=>{this.showLink=!1,this.cd.destroyed||this.cd.detectChanges()},200),this.checkLimit(),this.setAvailableCharacters(),this.projectNote===this.project.note)return void this.setMarkup();const e=o.a.clone(this.project);this.project.note=this.projectNote,this.setMarkup(),this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.project=e},()=>{this.project=e,this.setMarkup()})}checkLimit(){this.projectNote.length>this.limit&&(this.projectNote=this.projectNote.substring(0,this.limit),this.toaster.pop("success",this.translate.instant("PROJECTS.MESSAGES.UPDATE_PROJECT_NOTE_SUCCESS_WITH_LIMIT",{limit:this.limit})))}focusToNote(){this.hasEditPermission&&(this.textAreaAdjust(),this.showLink=!0,this.focused=!0,this.cd.detectChanges(),this.note.nativeElement.focus())}setMarkup(){this.noteFormated||(this.focused=!1,this.cd.detectChanges()),this.setNoteFormated()}setNoteFormated(){if(!this.noteFormated)return;const e=this.project.note,t=this.hasEditPermission?this.translate.instant("PROJECTS.LABELS.NOTE_PLACEHOLDER"):"";let i=Object(J.i)(e||t);i=Object(J.a)(i);const n=Object(ji.marked)(i);this.noteFormated.nativeElement.innerHTML=this.sanitizeHtml(n)}sanitizeHtml(e){return Xi.a.sanitize(e,{FORBID_TAGS:["img"]})}onModelChange(){this.textAreaAdjust(),this.setAvailableCharacters(),this.highlightExtraText()}setAvailableCharacters(){this.availableCharacters=this.limit-this.projectNote.length}textAreaAdjust(){setTimeout(()=>{if(this.cd.destroyed)return;const e=this.noteSize.nativeElement;e.style.height="1px",e.style.height=25+e.scrollHeight+"px";let t=this.noteSize.nativeElement.offsetHeight;t?(t=t<200?200:t,this.minHeight=t+"px"):this.minHeight="auto",this.cd.detectChanges()})}onPaste(){setTimeout(()=>{this.scrollIndicator&&this.scrollIndicator.nativeElement.scrollIntoView()},100)}highlightExtraText(){if(this.projectNote.length<=this.limit)return;const e=this.note.nativeElement;e.select(),e.setSelectionRange(this.limit,this.projectNote.length)}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(r.a),f.Rb(_.a),f.Rb(f.h),f.Rb(Fi.d),f.Rb(Pi.a),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-note"]],viewQuery:function(e,t){var i;1&e&&(f.gd(Wi,!0),f.gd(Bi,!0),f.gd(Ni,!0),f.gd(Gi,!0)),2&e&&(f.Kc(i=f.kc())&&(t.note=i.first),f.Kc(i=f.kc())&&(t.noteSize=i.first),f.Kc(i=f.kc())&&(t.noteFormated=i.first),f.Kc(i=f.kc())&&(t.scrollIndicator=i.first))},inputs:{project:"project",hasEditPermission:"hasEditPermission"},decls:10,vars:4,consts:[[1,"cl-tab-pane","cl-active"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5"],[1,"cl-relative"],["name","noteSize","rows","10",1,"cl-form-control","cl-editable-fake-textarea",3,"ngModel"],["noteSize",""],[4,"ngIf"],["triggers","hover","placement","top","href","https://clockify.me/help/projects/formatting-project-note","target","blank","class","cl-absolute cl-t-0 cl-r-0 cl-mr-1 cl-mt-1 cl-d-flex",3,"ngbTooltip",4,"ngIf"],["class","cl-typo-reset",3,"cl-typo-reset-clickable","click",4,"ngIf"],["class","cl-form-control cl-editable-textarea","name","projectNote","rows","10",3,"cl-is-invalid","height","ngModel","disabled","ngModelChange","paste","blur",4,"ngIf"],["scrollIndicator",""],["class","cl-d-block",3,"cl-invalid-feedback",4,"ngIf"],["name","projectNote","rows","10",1,"cl-form-control","cl-editable-textarea",3,"ngModel","disabled","ngModelChange","paste","blur"],["note",""],[1,"cl-d-block"],[1,"cl-float-right","cl-d-inline-block"],["triggers","hover","placement","top","href","https://clockify.me/help/projects/formatting-project-note","target","blank",1,"cl-absolute","cl-t-0","cl-r-0","cl-mr-1","cl-mt-1","cl-d-flex",3,"ngbTooltip"],["src","assets/images/ui-icons/info-icon.svg"],[1,"cl-typo-reset",3,"click"],["noteFormated",""]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"form"),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Sb(5,"textarea",4,5),f.Xc(7,Yi,5,2,"ng-container",6),f.Xc(8,$i,3,3,"a",7),f.Wb(),f.Xc(9,zi,2,2,"div",8),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(5),f.wc("ngModel",t.projectNote),f.Cb(2),f.wc("ngIf",t.focused),f.Cb(1),f.wc("ngIf",t.showLink&&t.hasEditPermission),f.Cb(1),f.wc("ngIf",!t.focused))},directives:[L.I,L.t,L.u,L.c,L.s,L.v,C.u,g.bb],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();var Ki=i("Jmk/"),qi=i("UMzN"),Ji=i("2rWG"),Qi=i("LfE4"),en=i("lp//"),tn=i("VHTt"),nn=function(e){return e.MONTHLY="MONTHLY",e}({}),sn=i("Y9WU"),rn=i("SvJf"),on=i("sbmM"),an=i("qUN8"),cn=i("iNpZ"),ln=i("kKK/"),un=i("ydbL"),dn=i("4olG");class hn{constructor(e){this._projectId=e&&e.projectId,this._value=e&&e.value,this._status=e&&e.status}get projectId(){return this._projectId}get value(){return this._value}get status(){return this._status}set value(e){this._value=e}}var pn=i("VYrk"),bn=i("fANO"),fn=i("FsCY"),mn=i("JO38");const gn=function(){return["/upgrade"]},vn=function(){return{plan:"pro"}};function Cn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",3),f.Xb(1,"info"),f.Zc(2),f.oc(3,"translate"),f.Xb(4,"a",4),f.jc("click",(function(){return f.Oc(e),f.nc().analyticsService.addEventOnSettingsChanged("Pro","Upgrade","Projects","Edit","Custom Field")})),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Wb(),f.Wb()}2&e&&(f.Cb(2),f.bd(" ",f.pc(3,4,"SHARED_MODULES.CUSTOM_FIELD.PRO_FEATURE_LABEL_PART_1")," "),f.Cb(2),f.wc("routerLink",f.Ac(8,gn))("queryParams",f.Ac(9,vn)),f.Cb(1),f.bd(" ",f.pc(6,6,"GLOBAL.UPGRADE_BTN")," "))}function En(e,t){1&e&&f.Sb(0,"div",18)}function wn(e,t){1&e&&(f.Xb(0,"div",19),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.ADD_FIELDS_LABEL")," "))}function Sn(e,t){1&e&&(f.Xb(0,"div",19),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.ADDITIONAL_FIELDS_LABEL")," "))}function yn(e,t){1&e&&(f.Xb(0,"div",25),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.AVAILABLE_LABEL")," "))}function On(e,t){1&e&&(f.Xb(0,"div",26),f.Zc(1),f.oc(2,"translate"),f.Xb(3,"div",27),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb()),2&e&&(f.Cb(1),f.bd(" ",f.pc(2,2,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.NO_AVAILABLE_FIELDS_NOTIFICATION")," "),f.Cb(3),f.bd(" ",f.pc(5,4,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.CREATE_MORE_FIELDS_NOTIFICATION")," "))}function An(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.Xb(2,"input",30),f.jc("ngModelChange",(function(i){return f.Oc(e),t.$implicit.selected=i}))("change",(function(){f.Oc(e);const i=t.$implicit,n=f.nc(3);return n.update(i,n.customFieldStatus.INVISIBLE)})),f.Wb(),f.Xb(3,"label",31),f.Xb(4,"div",32),f.Zc(5),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit;f.Cb(2),f.wc("ngModel",e.selected)("id","available"+e.name),f.Cb(1),f.wc("for","available"+e.name),f.Cb(2),f.ad(e.name)}}function kn(e,t){if(1&e&&(f.Xb(0,"div",20),f.Xb(1,"div",21),f.Xc(2,yn,3,3,"div",22),f.Xc(3,On,6,6,"div",23),f.Xc(4,An,6,4,"div",24),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(2),f.wc("ngIf",e.filterOfStatus(e.customFields,e.customFieldStatus.INACTIVE).length),f.Cb(1),f.wc("ngIf",!e.filterOfStatus(e.customFields,e.customFieldStatus.INACTIVE).length),f.Cb(1),f.wc("ngForOf",e.filterOfStatus(e.customFields,e.customFieldStatus.INACTIVE))}}function Tn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"div",35),f.Xb(2,"div",36),f.Xb(3,"input",30),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().$implicit.isProjectVisible=t}))("change",(function(){f.Oc(e);const t=f.nc().$implicit,i=f.nc(2);var n;return i.addOrChangeStatus(t,t.isProjectVisible?i.customFieldStatus.VISIBLE:i.customFieldStatus.INVISIBLE,null==(n=t.getProjectValue(i.projectId))?null:n.value)})),f.Wb(),f.Xb(4,"label",31),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(7,"div",37),f.Xb(8,"span",32),f.Zc(9),f.Wb(),f.Wb(),f.Xb(10,"div",38),f.Xb(11,"custom-field-value",39),f.jc("valueChanged",(function(t){f.Oc(e);const i=f.nc().$implicit,n=f.nc(2);return n.addOrChangeStatus(i,i.isProjectVisible?n.customFieldStatus.VISIBLE:n.customFieldStatus.INVISIBLE,t)})),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc().$implicit;f.Cb(3),f.wc("ngModel",e.isProjectVisible)("id","visibility"+e.name),f.Cb(1),f.wc("for","visibility"+e.name),f.Cb(1),f.bd(" ",f.pc(6,6,"GLOBAL.VISIBLE_LABEL")," "),f.Cb(4),f.ad(e.name),f.Cb(2),f.wc("customField",e.customFieldValueOfProject)}}function Dn(e,t){if(1&e&&(f.Xb(0,"div"),f.Xc(1,Tn,12,8,"div",33),f.Wb()),2&e){const e=t.$implicit;f.Cb(1),f.wc("ngIf",e.selected)}}function In(e,t){if(1&e&&(f.Xb(0,"div",5),f.Xc(1,En,1,0,"div",6),f.Xb(2,"div",7),f.Xb(3,"div",8),f.Xc(4,wn,3,3,"div",9),f.Xc(5,Sn,3,3,"div",9),f.Xb(6,"div",10),f.Zc(7),f.oc(8,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(9,"div",7),f.Xb(10,"div",8),f.Xb(11,"div",7),f.Xb(12,"div",11),f.Xb(13,"div",12),f.Xb(14,"button",13),f.Zc(15),f.oc(16,"translate"),f.Wb(),f.Xc(17,kn,5,3,"div",14),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(18,"div",7),f.Xb(19,"div",15),f.Xb(20,"div",16),f.Xc(21,Dn,2,1,"div",17),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngIf",!e.hasCustomFieldFeature),f.Cb(3),f.wc("ngIf",!e.hasCustomFieldFeature),f.Cb(1),f.wc("ngIf",e.hasCustomFieldFeature),f.Cb(2),f.bd(" ",f.pc(8,6,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.CUSTOM_FIELDS_EXPLANATION")," "),f.Cb(8),f.bd(" ",f.pc(16,8,"PROJECTS.EDIT_PROJECT_CUSTOM_FIELDS.ADD_MORE_FIELDS_BTN")," "),f.Cb(6),f.wc("ngForOf",e.customFields)}}let _n=(()=>{class e{constructor(e,t,i){this.analyticsService=e,this.cd=t,this.customFieldService=i,this.unsubscribe$=new s.a,this.customFieldStatus=dn.a,this.filterOfStatus=un.a.filterByStatus,this.statuses=[dn.a.INACTIVE,dn.a.VISIBLE,dn.a.INVISIBLE]}set customFields(e){this._customFields=e,e&&(this.createLists(e),this.cd.detectChanges())}get customFields(){return this._customFields}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}createLists(e){e.forEach(e=>{e.selected=e.isActive()||!!e.getProjectValue(this.projectId),e.isProjectVisible=e.isProjectValueVisible(this.projectId),e.customFieldValueOfProject=new pn.a({customFieldId:e.id,customField:e,value:e.getProjectValue(this.projectId)?e.getProjectValue(this.projectId).value:e.workspaceDefaultValue})})}update(e,t){null!=e.getProjectValue(this.projectId)?this.customFieldService.removeProjectDefaultValue(e.id,this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe():this.addOrChangeStatus(e,t)}addOrChangeStatus(e,t,i){const s=new hn({projectId:this.projectId,status:t,value:this.getValue(e,i)});this.customFieldService.editProjectDefaultValue(e.id,s).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.customFields.map(t=>{t.id===e.id&&(t.projectDefaultValues=e.projectDefaultValues)})},t=>{e.isProjectVisible=!1,this.cd.detectChanges()})}getValue(e,t){const i=null==t?e.workspaceDefaultValue:t;return e.type===bn.b.NUMBER?i&&""!=i?Number(i):null:i}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(sn.a),f.Rb(f.h),f.Rb(en.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-custom-fields"]],inputs:{projectId:"projectId",hasCustomFieldFeature:"hasCustomFieldFeature",customFields:"customFields"},decls:3,vars:2,consts:[[1,"cl-mt-0"],["class","cl-form-group cl-mt-2 cl-mt-lg-0",4,"ngIf"],["class","cl-relative",4,"ngIf"],[1,"cl-form-group","cl-mt-2","cl-mt-lg-0"],[1,"cl-btn",3,"routerLink","queryParams","click"],[1,"cl-relative"],["class","cl-blocker",4,"ngIf"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5"],["class","cl-h2 cl-mb-0",4,"ngIf"],[1,"cl-text-gray-9","cl-w-lg-75"],[1,"cl-form-group","cl-mb-0","cl-col-md-12","cl-col-lg-6"],["dropdownKey","",1,"cl-dropdown"],["type","button","dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text","cl-pr-3"],["class","cl-dropdown-menu cl-mw-100 cl-prevent-close",4,"dropdownKeyContent"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-custom-5"],[1,"cl-card","cl-mb-0","cl-border-bottom-0"],[4,"ngFor","ngForOf"],[1,"cl-blocker"],[1,"cl-h2","cl-mb-0"],[1,"cl-dropdown-menu","cl-mw-100","cl-prevent-close"],[1,"cl-scroll-area"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item-padding",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item-padding"],[1,"cl-h6","cl-mb-0"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"],["class","cl-component-row cl-px-0 cl-border-bottom",4,"ngIf"],[1,"cl-component-row","cl-px-0","cl-border-bottom"],[1,"cl-px-2","cl-px-lg-3"],[1,"cl-custom-control","cl-custom-switch"],[1,"cl-component-divided-left","cl-justify-content-start","cl-cut-text-wrapper"],[1,"cl-component-divided-left","cl-ml-auto"],[1,"cl-cut-text-wrapper",3,"customField","valueChanged"]],template:function(e,t){1&e&&(f.Sb(0,"hr",0),f.Xc(1,Cn,7,10,"div",1),f.Xc(2,In,22,10,"div",2)),2&e&&(f.Cb(1),f.wc("ngIf",!t.hasCustomFieldFeature),f.Cb(1),f.wc("ngIf",t.customFields||!t.hasCustomFieldFeature))},directives:[C.u,fn.a,m.g,Ji.a,on.a,an.a,C.t,L.a,L.s,L.v,mn.a],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();var Rn=i("Tg7i");const Ln=["clientDropdown"],xn=["hourlyRateInput"],Pn=["estimateInput"],jn=["resetPopover"],Mn=["excludePopover"];function Xn(e,t){if(1&e&&(f.Xb(0,"span",30),f.Zc(1),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.bd(" ",e.project.client.name," ")}}const Fn=function(e){return{projectGroupingLabel:e}};function Wn(e,t){if(1&e&&(f.Xb(0,"span",30),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.bd(" ",f.qc(2,1,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_GROUPING_LABEL_MISSING_EXPLANATION",f.Bc(4,Fn,e.groupingLabelPlural))," ")}}function Bn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",31),f.Xb(1,"filter-dropdown",32),f.jc("emitSelected",(function(t){return f.Oc(e),f.nc().clientSelected(t)}))("loadMore",(function(t){return f.Oc(e),f.nc().loadMoreClients(t)}))("createAndSet",(function(t){return f.Oc(e),f.nc().createAndSetClient(t)}))("nameFilterChanged",(function(t){return f.Oc(e),f.nc().clientFilterChanged(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(1),f.wc("entity",e.groupingLabel)("entityInPlural",e.groupingLabelPlural)("entities",e.clients)("canUserCreate",e.canUserCreateClient)}}function Nn(e,t){1&e&&f.Sb(0,"hr",7)}function Gn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",1),f.Xb(1,"div",2),f.Xb(2,"div",3),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Xb(5,"div",9),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Wb(),f.Xb(8,"div",2),f.Xb(9,"div",33),f.Xb(10,"div",34),f.Xb(11,"input",35),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().project.billable=t}))("ngModelChange",(function(){f.Oc(e);const t=f.nc();return t.updateProject(t.project)})),f.Wb(),f.Xb(12,"label",36),f.Zc(13),f.oc(14,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(3),f.bd(" ",f.pc(4,4,"PROJECTS.EDIT_PROJECT_SETTINGS.DEFAULT_BILLABLE_STATUS_LABEL")," "),f.Cb(3),f.bd(" ",f.pc(7,6,"PROJECTS.EDIT_PROJECT_SETTINGS.DEFAULT_BILLABLE_STATUS_EXPLANATION")," "),f.Cb(5),f.wc("ngModel",e.project.billable),f.Cb(2),f.bd(" ",f.pc(14,8,"GLOBAL.CONFIRM_LABEL")," ")}}function Un(e,t){1&e&&f.Sb(0,"hr",7)}function Vn(e,t){1&e&&(f.Vb(0),f.Zc(1),f.oc(2,"translate"),f.Ub()),2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"GLOBAL.CHANGE_LABEL")," "))}const Hn=function(e){return{hourlyRate:e}};function Yn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",1),f.Xb(1,"div",2),f.Xb(2,"div",3),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Xb(5,"div",9),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Wb(),f.Xb(8,"div",1),f.Xb(9,"div",2),f.Xb(10,"label",37),f.Zc(11),f.oc(12,"translate"),f.Wb(),f.Xb(13,"div",38),f.Sb(14,"input",39),f.Xb(15,"div",40),f.Xb(16,"span",41),f.Xb(17,"a",42,43),f.jc("click",(function(){f.Oc(e);const t=f.Lc(18),i=f.nc(),n=f.Lc(62);return t.blur(),i.openModal(n)}))("keyup.enter",(function(){f.Oc(e);const t=f.nc(),i=f.Lc(62);return t.openModal(i)})),f.Xc(19,Vn,3,3,"ng-container",44),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(),t=f.Lc(45);f.Cb(3),f.bd(" ",f.pc(4,6,"PROJECTS.EDIT_PROJECT_SETTINGS.BILLABLE_RATE_LABEL")," "),f.Cb(3),f.bd(" ",f.pc(7,8,"PROJECTS.EDIT_PROJECT_SETTINGS.BILLABLE_RATE_EXPLANATION")," "),f.Cb(5),f.bd(" ",f.qc(12,10,"PROJECTS.SHARED.HOURLY_RATE_LABEL",f.Bc(13,Hn,null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency))," "),f.Cb(3),f.wc("ngModel",e.hourlyRatePlaceholder),f.Cb(5),f.wc("ngIf",null==e.project.hourlyRate?null:e.project.hourlyRate.amount)("ngIfElse",t)}}function $n(e,t){1&e&&(f.Vb(0),f.Zc(1),f.oc(2,"translate"),f.Ub()),2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"GLOBAL.CHANGE_LABEL")," "))}const zn=function(e){return{costRate:e}};function Zn(e,t){if(1&e){const e=f.Yb();f.Vb(0),f.Sb(1,"hr",7),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Xb(7,"div",9),f.Zc(8),f.oc(9,"translate"),f.Wb(),f.Wb(),f.Xb(10,"div",1),f.Xb(11,"div",2),f.Xb(12,"label",37),f.Zc(13),f.oc(14,"translate"),f.Wb(),f.Xb(15,"div",38),f.Sb(16,"input",45),f.Xb(17,"div",40),f.Xb(18,"span",41),f.Xb(19,"a",42,43),f.jc("click",(function(){f.Oc(e);const t=f.Lc(20),i=f.nc(),n=f.Lc(64);return t.blur(),i.openModal(n)}))("keyup.enter",(function(){f.Oc(e);const t=f.nc(),i=f.Lc(64);return t.openModal(i)})),f.Xc(21,$n,3,3,"ng-container",44),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Ub()}if(2&e){const e=f.nc(),t=f.Lc(45);f.Cb(5),f.bd(" ",f.pc(6,6,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_COST_RATE_LABEL")," "),f.Cb(3),f.bd(" ",f.pc(9,8,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_COST_RATE_EXPLANATION")," "),f.Cb(5),f.bd(" ",f.qc(14,10,"PROJECTS.SHARED.COST_RATE_LABEL",f.Bc(13,zn,null==e.workspace||null==e.workspace.hourlyRate?null:e.workspace.hourlyRate.currency))," "),f.Cb(3),f.wc("ngModel",e.costRatePlaceholder),f.Cb(5),f.wc("ngIf",null!==(null==e.project.costRate?null:e.project.costRate.amount))("ngIfElse",t)}}function Kn(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"GLOBAL.SET_RATE_LABEL")," ")}function qn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",62),f.Xb(1,"input",63),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).project.timeEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeEstimateType("MANUAL")})),f.Wb(),f.Xb(2,"label",64),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("value","MANUAL")("ngModel",e.project.timeEstimate.type),f.Cb(2),f.bd(" ",f.pc(4,3,"GLOBAL.MANUAL_LABEL")," ")}}function Jn(e,t){if(1&e){const e=f.Yb();f.Xb(0,"input",67),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(3).project.budgetEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(3).changeEstimateType("MANUAL")})),f.Wb()}if(2&e){const e=f.nc(3);f.wc("value","MANUAL")("ngModel",e.project.budgetEstimate.type)}}function Qn(e,t){if(1&e&&(f.Xb(0,"div",62),f.Xc(1,Jn,1,2,"input",65),f.Xb(2,"label",66),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.project.estimateType==e.EstimateType.PROJECT_BUDGET),f.Cb(2),f.bd(" ",f.pc(4,2,"GLOBAL.MANUAL_LABEL")," ")}}function es(e,t){1&e&&(f.Zc(0),f.oc(1,"lowercase"),f.oc(2,"translate")),2&e&&f.bd(" ",f.pc(1,1,f.pc(2,3,"GLOBAL.HOURS_LABEL"))," ")}function ts(e,t){if(1&e&&f.Zc(0),2&e){const e=f.nc(2);f.bd(" ",e.workspace.hourlyRate.currency," ")}}function is(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"PROJECTS.SHARED.PER_MONTH_LABEL")," ")}function ns(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",68),f.Xb(1,"input",69),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).project.timeEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeEstimateType("AUTO")})),f.Wb(),f.Xb(2,"label",70),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("value","AUTO")("ngModel",e.project.timeEstimate.type),f.Cb(2),f.bd(" ",f.pc(4,3,"PROJECTS.EDIT_PROJECT_SETTINGS.TASK_BASED_LABEL")," ")}}function ss(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",68),f.Xb(1,"input",71),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).project.budgetEstimate.type=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeEstimateType("AUTO")})),f.Wb(),f.Xb(2,"label",72),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("value","AUTO")("ngModel",e.project.budgetEstimate.type),f.Cb(2),f.bd(" ",f.pc(4,3,"PROJECTS.EDIT_PROJECT_SETTINGS.TASK_BASED_LABEL")," ")}}function rs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",73),f.jc("click",(function(){return f.Oc(e),f.nc(2).checkRecurringTooltip()})),f.Wb()}2&e&&f.Wc("z-index",2)}function os(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"PROJECTS.EDIT_PROJECT_SETTINGS.ESTIMATE_RESET_LABEL")," ")}function as(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"PROJECTS.EDIT_PROJECT_SETTINGS.BUDGET_RESET_LABEL")," ")}function cs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",73),f.jc("click",(function(){return f.Oc(e),f.nc(3).checkExcludeTooltip()})),f.Wb()}2&e&&f.Wc("z-index",2)}function ls(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",23),f.Xc(1,cs,1,2,"div",54),f.Xb(2,"div",55),f.Xb(3,"input",74),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).includeNonBillable=t}))("ngModelChange",(function(){return f.Oc(e),f.nc(2).changeIncludeNonBillable()})),f.Wb(),f.Xb(4,"label",75,76),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2),t=f.Lc(68);f.Cb(1),f.wc("ngIf",!e.hasExcludeNonBillableFeature),f.Cb(1),f.Hb("disable-area",!e.hasExcludeNonBillableFeature),f.Cb(1),f.wc("ngModel",e.includeNonBillable)("disabled",!e.hasExcludeNonBillableFeature),f.Cb(1),f.wc("popoverClass","cl-popover-lg-single-line")("ngbPopover",t),f.Cb(2),f.bd(" ",f.pc(7,8,"PROJECTS.EDIT_PROJECT_SETTINGS.ESTIMATE_INCLUDES_NON_BILLABLE")," ")}}function us(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"div",23),f.Xb(2,"div",46),f.Xc(3,qn,5,5,"div",47),f.Xc(4,Qn,5,4,"div",47),f.Xb(5,"div",48),f.Xb(6,"input",49,50),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(7).blur()}))("inputChange",(function(t){f.Oc(e);const i=f.nc();return i.projectEstimate=t,i.updateProjectEstimate()})),f.Wb(),f.Xb(8,"span",51),f.Xc(9,es,3,5,"ng-template",52),f.Xc(10,ts,1,1,"ng-template",52),f.Xc(11,is,2,3,"ng-template",52),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(12,"div",23),f.Xc(13,ns,5,5,"div",53),f.Xc(14,ss,5,5,"div",53),f.Wb(),f.Xb(15,"div",23),f.Xc(16,rs,1,2,"div",54),f.Xb(17,"div",55),f.Xb(18,"input",56),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().resetEveryMonth=t}))("ngModelChange",(function(){return f.Oc(e),f.nc().changeReset()})),f.Wb(),f.Xb(19,"label",57,58),f.Xc(21,os,2,3,"ng-template",59),f.Xc(22,as,2,3,"ng-template",null,60,f.Yc),f.Wb(),f.Wb(),f.Wb(),f.Xc(24,ls,8,10,"div",61),f.Wb()}if(2&e){const e=f.Lc(23),t=f.nc(),i=f.Lc(66);f.Cb(3),f.wc("ngIf",t.project.estimateType==t.EstimateType.TIME_ESTIMATE),f.Cb(1),f.wc("ngIf",t.project.estimateType==t.EstimateType.PROJECT_BUDGET),f.Cb(2),f.wc("disabled",t.project.estimateType===t.EstimateType.TIME_ESTIMATE&&"AUTO"===t.project.timeEstimate.type||t.project.estimateType===t.EstimateType.PROJECT_BUDGET&&"AUTO"===t.project.budgetEstimate.type)("ngModel",t.projectEstimate),f.Cb(3),f.wc("ngIf",t.project.estimateType==t.EstimateType.TIME_ESTIMATE),f.Cb(1),f.wc("ngIf",t.project.estimateType!=t.EstimateType.TIME_ESTIMATE),f.Cb(1),f.wc("ngIf",t.resetEveryMonth),f.Cb(2),f.wc("ngIf",t.project.estimateType==t.EstimateType.TIME_ESTIMATE),f.Cb(1),f.wc("ngIf",t.project.estimateType==t.EstimateType.PROJECT_BUDGET),f.Cb(2),f.wc("ngIf",!t.hasMonthlyEstimateReset),f.Cb(1),f.Hb("disable-area",!t.hasMonthlyEstimateReset),f.Cb(1),f.wc("ngModel",t.resetEveryMonth)("disabled",!t.hasMonthlyEstimateReset),f.Cb(1),f.wc("popoverClass","cl-popover-lg-single-line")("ngbPopover",i),f.Cb(2),f.wc("ngIf",t.project.estimateType==t.EstimateType.TIME_ESTIMATE)("ngIfElse",e),f.Cb(3),f.wc("ngIf",t.isAllowedToExcludeNonBillable())}}function ds(e,t){if(1&e){const e=f.Yb();f.Xb(0,"hourly-rate",77),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateHourlyRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.PROJECT)("hourlyRate",e.project.hourlyRate)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}function hs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"cost-rate",78),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateCostRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.PROJECT)("costRate",e.project.costRate)("hasHistoricRateFeature",e.hasHistoricRatesFeature)}}const ps=function(){return{plan:"pro"}};function bs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",82),f.jc("click",(function(){return f.Oc(e),f.nc(2).addEventAndDismiss()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.wc("queryParams",f.Ac(4,ps)),f.Cb(1),f.bd(" ",f.pc(2,2,"GLOBAL.UPGRADE_BTN"),""))}function fs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",83),f.jc("click",(function(){return f.Oc(e),f.nc(2).addEventAndDismiss()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"GLOBAL.UPGRADE_BTN"),""))}function ms(e,t){if(1&e&&(f.Xb(0,"span",79),f.Xc(1,bs,3,5,"a",80),f.Xc(2,fs,3,3,"ng-template",null,81,f.Yc),f.Zc(4),f.oc(5,"translate"),f.Wb()),2&e){const e=f.Lc(3),t=f.nc();f.Cb(1),f.wc("ngIf",!t.everHadPaidSubscription)("ngIfElse",e),f.Cb(3),f.bd(" ",f.pc(5,3,"PROJECTS.EDIT_PROJECT_SETTINGS.UPGRADE_LABEL_2")," ")}}function gs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",82),f.jc("click",(function(){return f.Oc(e),f.nc(2).modalService.dismissAll()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.wc("queryParams",f.Ac(4,ps)),f.Cb(1),f.bd(" ",f.pc(2,2,"GLOBAL.UPGRADE_BTN"),""))}function vs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",83),f.jc("click",(function(){return f.Oc(e),f.nc(2).modalService.dismissAll()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"GLOBAL.UPGRADE_BTN"),""))}function Cs(e,t){if(1&e&&(f.Xb(0,"span",79),f.Xc(1,gs,3,5,"a",80),f.Xc(2,vs,3,3,"ng-template",null,81,f.Yc),f.Zc(4),f.oc(5,"translate"),f.Wb()),2&e){const e=f.Lc(3),t=f.nc();f.Cb(1),f.wc("ngIf",!t.everHadPaidSubscription)("ngIfElse",e),f.Cb(3),f.bd(" ",f.pc(5,3,"PROJECTS.EDIT_PROJECT_SETTINGS.UPGRADE_LABEL_EXCLUDE")," ")}}let Es=(()=>{class e{constructor(e,t,i,n,r,o,a,c,l,u){this.projectService=e,this.clientService=t,this.titleService=i,this.cd=n,this.modalService=r,this.customFieldService=o,this.workspaceService=a,this.translate=c,this.authService=l,this.analyticsService=u,this.emitUpdate=new f.n,this.EstimateType=pt.a,this.rateType=q.a,this.clients=[],this.hideZeroRates=!0,this.hideZeroEstimate=!0,this.unsubscribe$=new s.a}ngOnInit(){this.translations=this.translate.instant(["PROJECTS.DROPDOWN.NO_ESTIMATE","PROJECTS.SHARED.TIME_ESTIMATE","PROJECTS.SHARED.PROJECT_BUDGET_LABEL","PROJECTS.DROPDOWN.SET_BUDGET_ADMIN_POPUP","PROJECTS.DROPDOWN.SET_BUDGET_POPUP"]),this.authService.permissionData$.pipe(Object(P.a)(e=>null!==e),Object(n.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.adminOrOwner=e}),this.resetEveryMonth=this.project.estimateType===pt.a.TIME_ESTIMATE?!!this.project.timeEstimate.resetOption:!!this.project.budgetEstimate.resetOption,this.includeNonBillable=this.project.estimateType!==pt.a.TIME_ESTIMATE||this.project.timeEstimate.includeNonBillable,this.titleService.setCustomTitle(this.translate.instant("PROJECTS.EDIT_SECTION.PROJECT_NAME_SETTINGS",{name:this.project.name})),this.initializeProjectValues(),this.getClients({});const e=this.workspaceService.getLocalDefaultWorkspace();this.hasCustomFieldFeature=e.hasFeature(l.a.CUSTOM_FIELDS),this.hasHistoricRatesFeature=e.hasFeature(l.a.HISTORIC_RATES),this.hasProjectBudgetFeature=e.hasFeature(l.a.PROJECT_BUDGET),this.hasMonthlyEstimateReset=e.hasFeature(l.a.RECURRING_ESTIMATES),this.hasExcludeNonBillableFeature=e.hasFeature(l.a.EXCLUDE_NON_BILLABLE_FROM_ESTIMATE),this.hasCustomFieldFeature&&this.customFieldService.get().pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.customFields=e,this.cd.detectChanges()}),this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus,this.activeBillable=this.workspace.activeBillableHours,this.setEstimateDropdown(),this.canUserCreateClient=this.authService.isAdminOrOwner()||!e.onlyAdminsCreateProject,this.groupingLabel=this.workspaceService.generateClientLabel(e.projectGroupingLabel),this.groupingLabelPlural=this.workspaceService.generateClientsLabel(e.projectGroupingLabel)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}initializeProjectValues(){this.projectName=this.project.name,this.setHourlyRateLabel(),this.setCostRateLabel(),this.getProjectEstimate()}setCostRateLabel(){this.costRatePlaceholder=Object(J.m)(this.project&&this.project.costRate)}setHourlyRateLabel(){this.hourlyRatePlaceholder=Object(J.n)(this.project&&this.project.hourlyRate)}getClients(e){e.archived=Qi.a.ACTIVE,this.clientService.getClients(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.refreshClientList&&(this.clients=[]),this.clients=[...this.clients,...e],this.cd.detectChanges()})}loadMoreClients(e){this.refreshClientList=!1,this.getClients(e)}clientFilterChanged(e){this.refreshClientList=!0,this.getClients(e)}updateProject(e){this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=new o.a(t),this.project.tasks=e.tasks,this.getProjectEstimate(),this.emitUpdate.emit(this.project),this.cd.detectChanges()},()=>{this.project=e,this.initializeProjectValues(),this.emitUpdate.emit(this.project),this.cd.detectChanges()})}updateEstimate(e){this.projectService.updateEstimate(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=t,this.resetEveryMonth=this.project.estimateType===pt.a.TIME_ESTIMATE?!!this.project.timeEstimate.resetOption:!!this.project.budgetEstimate.resetOption,this.project.tasks=e.tasks,this.getProjectEstimate(),this.emitUpdate.emit(this.project),this.cd.detectChanges()},()=>{this.project=e,this.initializeProjectValues(),this.emitUpdate.emit(this.project),this.cd.detectChanges()})}clientSelected(e){if(this.project.client&&e.id===this.project.client.id)return;const t=o.a.clone(this.project);this.project.client=e,this.project.clientId=e.id,this.updateProject(t),this.clientDropdown.forceClose()}createAndSetClient(e){this.clientService.createClient(e,this.groupingLabel).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientSelected(new qi.a(e))})}updateProjectName(){if(this.projectName!==this.project.name){const e=o.a.clone(this.project);this.project.name=this.projectName,this.updateProject(e)}}addColor(e){if(this.project.color!==e){const t=o.a.clone(this.project);this.project.color=e,this.updateProject(t)}}updateHourlyRate(e){const t=o.a.clone(this.project);this.project.hourlyRate||(this.project.hourlyRate=new X.a);const i=e.amount?e.amount:0;this.project.hourlyRate.amount=Number(i),this.projectService.updateHourlyRate(this.project.id,i,e.currency,e.since).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=new o.a(t),this.emitUpdate.emit(t),this.setHourlyRateLabel(),this.cd.detectChanges(),this.analyticsService.addEvent(new rn.a({event:"change",amount:e.amount,value:e.since,section:"Projects",section2:"Settings",section3:"Project billable rate",section4:"Hourly rate"}))},()=>{this.project=t,this.cd.detectChanges()})}updateCostRate(e){const t=o.a.clone(this.project),i=e.amount;this.project.hourlyRate.amount=Number(i),this.projectService.updateCostRate(this.project.id,i,e.currency,e.since).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.project=new o.a(t),this.emitUpdate.emit(t),this.setCostRateLabel(),this.cd.detectChanges(),this.analyticsService.addEvent(new rn.a({event:"change",amount:e.amount,value:e.since,section:"Projects",section2:"Settings",section3:"Project cost rate",section4:"Cost Rate"}))},()=>{this.project=t,this.cd.detectChanges()})}updateProjectEstimate(){const e=o.a.clone(this.project);this.project.estimateType===pt.a.TIME_ESTIMATE?this.project.timeEstimate.estimate=Number(this.projectEstimate):this.project.estimateType===pt.a.PROJECT_BUDGET&&(this.project.budgetEstimate.estimate=Number(this.projectEstimate)),this.updateEstimate(e)}changeEstimateType(e){this.getProjectEstimate(),this.project.estimateType==pt.a.TIME_ESTIMATE?this.project.timeEstimate.type=e:this.project.estimateType==pt.a.PROJECT_BUDGET&&(this.project.budgetEstimate.type=e),this.updateProjectEstimate(),this.analyticsService.addEvent(new rn.a({event:"select",value:e,section:"Projects",section2:"Settings",section3:"Project estimate"}))}getProjectEstimate(){if("MANUAL"===(this.project.estimateType===pt.a.TIME_ESTIMATE?this.project.timeEstimate.type:this.project.budgetEstimate.type))this.projectEstimate=this.project.estimateType===pt.a.TIME_ESTIMATE?this.project.timeEstimate.estimate:this.project.budgetEstimate.estimate;else{const e=Object(ht.a)(this.project.tasks.map(e=>e.estimate)),t=this.project.tasks.map(e=>e.budgetEstimate||0).reduce((e,t)=>e+t,0);this.projectEstimate=this.project.estimateType===pt.a.TIME_ESTIMATE?e.asHours():t}}setHourlyRate(){this.hideZeroRates=!1,setTimeout(()=>{this.hourlyRateInput.nativeElement.select()},100)}setProjectEstimate(){this.hideZeroEstimate=!1,setTimeout(()=>{this.estimateInput.nativeElement.select()},100)}openModal(e){this.modalService.open(e,{centered:!0})}changeTypeOfEstimate(e){var t;const i=o.a.clone(this.project);this.project.estimateType=e,this.updateEstimate(i),this.analyticsService.addEvent(new rn.a({event:"select",value:null===(t=this.project)||void 0===t?void 0:t.estimateType,section:"Projects",section2:"Settings",section3:"Project estimate"}))}changeReset(){const e=this.resetEveryMonth?nn.MONTHLY:null,t=o.a.clone(this.project);this.project.estimateType===pt.a.TIME_ESTIMATE&&(this.project.timeEstimate.resetOption=e),this.project.estimateType===pt.a.PROJECT_BUDGET&&(this.project.budgetEstimate.resetOption=e),this.updateEstimate(t),this.analyticsService.addEvent(new rn.a({event:"switch",value:this.resetEveryMonth,section:"Projects",section2:"Settings",section3:"Project estimate",section4:"Estimate resets every month"}))}changeIncludeNonBillable(){if(this.project.estimateType===pt.a.PROJECT_BUDGET)return;const e=o.a.clone(this.project);this.project.timeEstimate.includeNonBillable=this.includeNonBillable,this.updateEstimate(e)}setEstimateDropdown(){this.estimateDropdown=[new tn.a(pt.a.NO_ESTIMATE,this.translations["PROJECTS.DROPDOWN.NO_ESTIMATE"],this.translations["PROJECTS.DROPDOWN.NO_ESTIMATE"]),new tn.a(pt.a.TIME_ESTIMATE,this.translations["PROJECTS.SHARED.TIME_ESTIMATE"],this.translations["PROJECTS.SHARED.TIME_ESTIMATE"]),new tn.a(pt.a.PROJECT_BUDGET,this.translations["PROJECTS.SHARED.PROJECT_BUDGET_LABEL"],this.translations["PROJECTS.SHARED.PROJECT_BUDGET_LABEL"],this.canSeeRates&&!this.hasProjectBudgetFeature,this.canSeeRates?this.hasProjectBudgetFeature?null:this.translations["PROJECTS.DROPDOWN.SET_BUDGET_POPUP"]:this.translations["PROJECTS.DROPDOWN.SET_BUDGET_ADMIN_POPUP"])],this.workspace.activeBillableHours&&(this.workspace.activeBillableHours||!this.workspace.onlyAdminsCanChangeBillableStatus||this.adminOrOwner)||(this.estimateDropdown=this.estimateDropdown.filter(e=>e.value!=pt.a.PROJECT_BUDGET),this.project.estimateType===pt.a.PROJECT_BUDGET&&(this.project.estimateType=pt.a.NO_ESTIMATE))}checkRecurringTooltip(){this.hasProjectBudgetFeature?this.resetPopover.close():this.openRecurringTooltip()}openRecurringTooltip(){this.resetPopover.isOpen()||this.resetPopover.open()}checkExcludeTooltip(){this.hasExcludeNonBillableFeature?this.excludePopover.close():this.openExcludeTooltip()}openExcludeTooltip(){this.excludePopover.isOpen()||this.excludePopover.open()}isAllowedToExcludeNonBillable(){return this.project.estimateType==pt.a.TIME_ESTIMATE&&this.workspace.activeBillableHours&&(this.adminOrOwner||!this.workspace.onlyAdminsCanChangeBillableStatus)}addEventAndDismiss(){this.modalService.dismissAll(),this.analyticsService.addEvent(new rn.a({event:"submit",value:"Pro",section:"Projects",section2:"Settings",section3:"Estimate resets every month",section4:"Upgrade"}))}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(r.a),f.Rb(Ki.a),f.Rb(_.a),f.Rb(f.h),f.Rb(g.q),f.Rb(en.a),f.Rb(u.a),f.Rb(v.f),f.Rb(c.a),f.Rb(sn.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-settings"]],viewQuery:function(e,t){var i;1&e&&(f.gd(Ln,!0),f.gd(xn,!0),f.gd(Pn,!0),f.gd(jn,!0),f.gd(Mn,!0)),2&e&&(f.Kc(i=f.kc())&&(t.clientDropdown=i.first),f.Kc(i=f.kc())&&(t.hourlyRateInput=i.first),f.Kc(i=f.kc())&&(t.estimateInput=i.first),f.Kc(i=f.kc())&&(t.resetPopover=i.first),f.Kc(i=f.kc())&&(t.excludePopover=i.first))},inputs:{project:"project",workspace:"workspace",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates"},outputs:{emitUpdate:"emitUpdate"},decls:69,vars:35,consts:[[1,"cl-tab-pane","cl-active"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-12"],[1,"cl-h2","cl-mb-0"],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5"],["type","text","autocomplete","off","name","projectName",1,"cl-form-control",3,"ngModel","ngModelChange","blur","keyup.enter"],["projectNameInput",""],[1,"cl-mt-0"],[1,"cl-h2","cl-mb-0","cl-text-capitalize"],[1,"cl-text-gray-9","cl-w-lg-75"],[1,"cl-form-group","cl-mb-0","cl-col-md-12","cl-col-lg-5"],[1,"cl-form-group","cl-col-md-6"],["dropdownKey","",1,"cl-dropdown"],["clientDropdown","dropdownKey"],["dropdownKeyButton","","type","button","id","dropdownMenuButton",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text-wrapper","cl-d-flex","cl-pr-3"],["class","cl-cut-text",4,"ngIf","ngIfElse"],["showGroupingLabel",""],["class","cl-dropdown-menu",4,"dropdownKeyContent"],[3,"colorEditProject","color"],["class","cl-mt-0",4,"ngIf"],["class","cl-form-row",4,"ngIf"],[4,"ngIf"],["setRate",""],[1,"cl-form-group","cl-col-md-12","cl-col-lg-5","cl-p-0"],[1,"cl-d-inline-block","cl-w-50",3,"list","value","isDisabled","onChanged"],[3,"projectId","customFields","hasCustomFieldFeature"],["hourlyRateModal",""],["costRateModal",""],["popContent",""],["popContentExclude",""],[1,"cl-cut-text"],[1,"cl-dropdown-menu"],[3,"entity","entityInPlural","entities","canUserCreate","emitSelected","loadMore","createAndSet","nameFilterChanged"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","customSwitch3","name","projectBillable",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customSwitch3",1,"cl-custom-control-label"],[1,"cl-ml-1"],[1,"cl-input-group","cl-ml-1"],["type","text","name","projectHourlyRate","autocomplete","off","readonly","",1,"cl-form-control","cl-cut-text",3,"ngModel"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],["tabindex","0",1,"cl-color-blue",3,"click","keyup.enter"],["emailBtn",""],[4,"ngIf","ngIfElse"],["type","text","name","projectCostRate","autocomplete","off","readonly","",1,"cl-form-control","cl-cut-text",3,"ngModel"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline","cl-align-items-center"],["class","cl-custom-control-inline",4,"ngIf"],[1,"cl-d-inline-flex","cl-align-items-center"],["type","text","id","projectEstimate","name","projectEstimate","spellcheck","false","inputNumber","","autocomplete","off",1,"cl-form-control","cl-input-5-digits","cl-text-center",3,"disabled","ngModel","keyup.enter","inputChange"],["estimateInput",""],[1,"cl-ml-2","cl-text-gray-9"],[3,"ngIf"],["class","cl-custom-control cl-custom-radio cl-custom-control-inline",4,"ngIf"],["class","cl-blocker",3,"zIndex","click",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox","cl-custom-control-inline","cl-custom-switch"],["type","checkbox","id","reset",1,"cl-custom-control-input",3,"ngModel","disabled","ngModelChange"],["placement","right","triggers","manual","container","body","for","reset",1,"cl-custom-control-label",3,"popoverClass","ngbPopover"],["resetPopover","ngbPopover"],[3,"ngIf","ngIfElse"],["budgetResetNotification",""],["class","cl-form-group cl-col-md-12 cl-col-lg-5 cl-p-0",4,"ngIf"],[1,"cl-custom-control-inline"],["type","radio","id","customRadioInline2","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline2",1,"cl-custom-control-label"],["type","radio","id","customRadioInline3","name","customRadioInline1","class","cl-custom-control-input",3,"value","ngModel","ngModelChange",4,"ngIf"],["for","customRadioInline3",1,"cl-custom-control-label"],["type","radio","id","customRadioInline3","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","customRadioInline1","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline1",1,"cl-custom-control-label"],["type","radio","id","customRadioInline4","name","customRadioInline1",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","customRadioInline4",1,"cl-custom-control-label"],[1,"cl-blocker",3,"click"],["type","checkbox","id","exclude",1,"cl-custom-control-input",3,"ngModel","disabled","ngModelChange"],["placement","right","triggers","manual","container","body","for","exclude",1,"cl-custom-control-label",3,"popoverClass","ngbPopover"],["excludePopover","ngbPopover"],[3,"type","hourlyRate","hasHistoricRateFeature","onClose","saveRate"],[3,"type","costRate","hasHistoricRateFeature","onClose","saveRate"],[1,"cl-popover-wrapper"],["routerLink","/upgrade","clickCloseDropdown","",3,"queryParams","click",4,"ngIf","ngIfElse"],["FreePlanDesktopTempl",""],["routerLink","/upgrade","clickCloseDropdown","",3,"queryParams","click"],["routerLink","/subscription","fragment","plans","clickCloseDropdown","",3,"click"]],template:function(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",0),f.Xb(1,"div"),f.Xb(2,"div",1),f.Xb(3,"div",2),f.Xb(4,"div",3),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Wb(),f.Xb(7,"div",4),f.Xb(8,"input",5,6),f.jc("ngModelChange",(function(e){return t.projectName=e}))("blur",(function(){return t.updateProjectName()}))("keyup.enter",(function(){return f.Oc(e),f.Lc(9).blur()})),f.Wb(),f.Wb(),f.Wb(),f.Sb(10,"hr",7),f.Xb(11,"div",1),f.Xb(12,"div",2),f.Xb(13,"div",8),f.Zc(14),f.Wb(),f.Xb(15,"div",9),f.Zc(16),f.oc(17,"translate"),f.Wb(),f.Wb(),f.Xb(18,"div",10),f.Xb(19,"div",1),f.Xb(20,"div",11),f.Xb(21,"div",12,13),f.Xb(23,"button",14),f.Xc(24,Xn,2,1,"span",15),f.Xc(25,Wn,3,6,"ng-template",null,16,f.Yc),f.Wb(),f.Xc(27,Bn,2,4,"div",17),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Sb(28,"hr",7),f.Xb(29,"div",1),f.Xb(30,"div",2),f.Xb(31,"div",3),f.Zc(32),f.oc(33,"translate"),f.Wb(),f.Xb(34,"div",9),f.Zc(35),f.oc(36,"translate"),f.Wb(),f.Wb(),f.Xb(37,"div",2),f.Xb(38,"color-chooser",18),f.jc("color",(function(e){return t.addColor(e)})),f.Wb(),f.Wb(),f.Wb(),f.Xc(39,Nn,1,0,"hr",19),f.Xc(40,Gn,15,10,"div",20),f.Xc(41,Un,1,0,"hr",19),f.Xc(42,Yn,20,15,"div",20),f.Xc(43,Zn,22,15,"ng-container",21),f.Xc(44,Kn,2,3,"ng-template",null,22,f.Yc),f.Sb(46,"hr",7),f.Xb(47,"div",1),f.Xb(48,"div",2),f.Xb(49,"div",3),f.Zc(50),f.oc(51,"translate"),f.Wb(),f.Xb(52,"div",9),f.Zc(53),f.oc(54,"translate"),f.Wb(),f.Wb(),f.Xb(55,"div",2),f.Xb(56,"div"),f.Xb(57,"div",23),f.Xb(58,"dropdown-items",24),f.jc("onChanged",(function(e){return t.changeTypeOfEstimate(e)})),f.Wb(),f.Wb(),f.Xc(59,us,25,19,"div",21),f.Wb(),f.Wb(),f.Wb(),f.Sb(60,"edit-project-custom-fields",25),f.Wb(),f.Wb(),f.Xc(61,ds,1,3,"ng-template",null,26,f.Yc),f.Xc(63,hs,1,3,"ng-template",null,27,f.Yc),f.Xc(65,ms,6,5,"ng-template",null,28,f.Yc),f.Xc(67,Cs,6,5,"ng-template",null,29,f.Yc)}if(2&e){const e=f.Lc(26);f.Cb(5),f.bd(" ",f.pc(6,23,"GLOBAL.NAME_LABEL")," "),f.Cb(3),f.wc("ngModel",t.projectName),f.Cb(6),f.bd(" ",t.groupingLabel," "),f.Cb(2),f.bd(" ",f.pc(17,25,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_GROUPING_LABEL_EXPLANATION")," "),f.Cb(8),f.wc("ngIf",t.project.client&&t.project.client.id)("ngIfElse",e),f.Cb(8),f.bd(" ",f.pc(33,27,"PROJECTS.SHARED.COLOR_LABEL")," "),f.Cb(3),f.bd(" ",f.pc(36,29,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_COLOR_EXPLANATION")," "),f.Cb(3),f.wc("colorEditProject",t.project.color),f.Cb(1),f.wc("ngIf",t.activeBillable&&(!t.onlyAdminCanSeeAndChangeBillable||t.adminOrOwner)),f.Cb(1),f.wc("ngIf",t.activeBillable&&(!t.onlyAdminCanSeeAndChangeBillable||t.adminOrOwner)),f.Cb(1),f.wc("ngIf",t.canSeeRates&&t.workspace.activeBillableHours),f.Cb(1),f.wc("ngIf",t.canSeeRates&&t.workspace.activeBillableHours),f.Cb(1),f.wc("ngIf",t.canSeeRates&&t.hasHistoricRatesFeature&&(null==t.workspace?null:t.workspace.isCostRateActive)&&t.activeBillable),f.Cb(7),f.bd(" ",f.pc(51,31,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_ESTIMATE_LABEL")," "),f.Cb(3),f.bd(" ",f.pc(54,33,"PROJECTS.EDIT_PROJECT_SETTINGS.PROJECT_ESTIMATE_EXPLANATION")," "),f.Cb(5),f.wc("list",t.estimateDropdown)("value",t.project.estimateType)("isDisabled",t.project.estimateType===t.EstimateType.PROJECT_BUDGET&&!t.canSeeRates),f.Cb(1),f.wc("ngIf",t.project.estimateType===t.EstimateType.TIME_ESTIMATE||t.project.estimateType===t.EstimateType.PROJECT_BUDGET&&t.canSeeRates),f.Cb(1),f.wc("projectId",t.project.id)("customFields",t.customFields)("hasCustomFieldFeature",t.hasCustomFieldFeature)}},directives:[L.c,L.s,L.v,Ji.a,on.a,C.u,an.a,cn.a,ln.a,_n,Rn.a,L.a,ee.a,g.M,L.A,ie.a,ne.a,m.g],pipes:[v.e,C.q],encapsulation:2,changeDetection:0}),e})();var ws=i("Kj3r"),Ss=i("i6c7"),ys=i("QTph");function Os(e,t){1&e&&(f.Xb(0,"th"),f.Xb(1,"div",5),f.Xb(2,"div",6),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.BILLABLE_LABEL")," "))}const As=function(e){return{hourlyRate:e}};function ks(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",9),f.Xb(2,"div",6),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(3),f.bd(" ",f.qc(4,1,"PROJECTS.SHARED.HOURLY_RATE_LABEL",f.Bc(4,As,e.workspace.hourlyRate.currency))," ")}}const Ts=function(e){return{costRate:e}};function Ds(e,t){if(1&e&&(f.Xb(0,"th"),f.Xb(1,"div",9),f.Xb(2,"div",6),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()),2&e){const e=f.nc(2);f.Cb(3),f.bd(" ",f.qc(4,1,"PROJECTS.SHARED.COST_RATE_LABEL",f.Bc(4,Ts,e.workspace.hourlyRate.currency))," ")}}function Is(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"PROJECTS.EDIT_PROJECT_TASKS.BUDGET_LABEL")," ")}function _s(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"PROJECTS.SHARED.TIME_ESTIMATE")," ")}function Rs(e,t){1&e&&(f.Zc(0),f.oc(1,"translate")),2&e&&f.bd(" ",f.pc(1,1,"PROJECTS.SHARED.PER_MONTH_LABEL")," ")}function Ls(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",11),f.Xb(1,"a",4),f.jc("click",(function(){f.Oc(e);const t=f.nc(3);return t.changeSort(t.estimateType===t.EstimateType.TIME_ESTIMATE?t.SortBy.ESTIMATE:t.SortBy.BUDGET_ESTIMATE)})),f.Xc(2,Is,2,3,"ng-template",12),f.Xc(3,_s,2,3,"ng-template",12),f.Xc(4,Rs,2,3,"ng-template",12),f.Zc(5),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(1),f.Hb("cl-up",e.sortBy===e.SortBy.ESTIMATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-up",e.sortBy===e.SortBy.BUDGET_ESTIMATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.BUDGET_ESTIMATE&&e.sortOrder===e.SortOrder.DESCENDING)("cl-down",e.sortBy===e.SortBy.ESTIMATE&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.wc("ngIf",e.estimateType===e.EstimateType.PROJECT_BUDGET),f.Cb(1),f.wc("ngIf",e.estimateType!==e.EstimateType.PROJECT_BUDGET),f.Cb(1),f.wc("ngIf",e.isPerMonth),f.Cb(1),f.bd(" ",e.estimateType===e.EstimateType.PROJECT_BUDGET?" ("+e.currency+")":" (h)"," ")}}function xs(e,t){if(1&e&&(f.Xb(0,"th"),f.Xc(1,Ls,6,12,"div",10),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.showEstimate)}}function Ps(e,t){if(1&e){const e=f.Yb();f.Vb(0),f.Xb(1,"th",2),f.Xb(2,"div",3),f.Xb(3,"a",4),f.jc("click",(function(){f.Oc(e);const t=f.nc();return t.changeSort(t.SortBy.NAME)})),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xb(6,"th"),f.Xb(7,"div",5),f.Xb(8,"div",6),f.Zc(9),f.oc(10,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xc(11,Os,5,3,"th",7),f.Xc(12,ks,5,6,"th",7),f.Xc(13,Ds,5,6,"th",7),f.Xc(14,xs,2,1,"th",7),f.Sb(15,"th",8),f.Ub()}if(2&e){const e=f.nc();f.Cb(3),f.Hb("cl-up",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.DESCENDING),f.Cb(1),f.bd(" ",f.pc(5,10,"GLOBAL.NAME_LABEL")," "),f.Cb(5),f.bd(" ",f.pc(10,12,"PROJECTS.SHARED.ASSIGNEES_LABEL")," "),f.Cb(2),f.wc("ngIf",e.taskColumns.includes("col3")),f.Cb(1),f.wc("ngIf",e.taskColumns.includes("col4")),f.Cb(1),f.wc("ngIf",e.taskColumns.includes("col5")),f.Cb(1),f.wc("ngIf",e.taskColumns.includes("col6"))}}function js(e,t){if(1&e){const e=f.Yb();f.Xb(0,"th",13),f.Xb(1,"div",14),f.Zc(2),f.oc(3,"translate"),f.Xb(4,"div",3),f.Xb(5,"a",15),f.jc("click",(function(){return f.Oc(e),f.nc().expandAll()})),f.Xb(6,"span",16),f.Sb(7,"img",17),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.bd(" ",f.pc(3,2,"GLOBAL.NAME_LABEL")," "),f.Cb(5),f.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",f.Qc)}}let Ms=(()=>{class e{constructor(){this.onChangeSortOrder=new f.n,this.onChangeSortColumn=new f.n,this.onExpandAll=new f.n,this.isExpandAll=!1,this.SortBy=Ct,this.EstimateType=pt.a,this.SortOrder=vt.a}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}changeSort(e){e!==this.sortBy?this.onChangeSortColumn.emit(e):this.onChangeSortOrder.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Lb({type:e,selectors:[["tasks-table-header"],["","tasks-table-header",""]],inputs:{estimateType:"estimateType",isPerMonth:"isPerMonth",currency:"currency",showEstimate:"showEstimate",isDesktop:"isDesktop",sortBy:"sortBy",sortOrder:"sortOrder",workspace:"workspace",taskColumns:"taskColumns"},outputs:{onChangeSortOrder:"onChangeSortOrder",onChangeSortColumn:"onChangeSortColumn",onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-ml-lg-custom-n2"],[1,"cl-h5","cl-mb-0","cl-text-gray-6-dark-mode"],[4,"ngIf"],[2,"width","46px"],[1,"cl-ml-lg-custom-n2","cl-d-inline-block"],["class","cl-mr-lg-custom-n2 cl-text-right",4,"ngIf"],[1,"cl-mr-lg-custom-n2","cl-text-right"],[3,"ngIf"],["colspan","4",1,"cl-pl-lg-custom-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(f.Xc(0,Ps,16,14,"ng-container",0),f.Xc(1,js,8,4,"ng-template",null,1,f.Yc)),2&e){const e=f.Lc(2);f.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[C.u],pipes:[v.e],encapsulation:2,changeDetection:0}),e})();var Xs=i("GsAO");const Fs=["taskEstimateInput"];function Ws(e,t){1&e&&f.Tb(0)}function Bs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"input",14,15),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc(2).taskName=t}))("blur",(function(){return f.Oc(e),f.nc(2).updateTaskName()}))("keyup.enter",(function(){return f.Oc(e),f.Lc(1).blur()})),f.Wb()}if(2&e){const e=f.nc(2);f.Wc("text-decoration","DONE"===e.task.status?"line-through":"none"),f.wc("ngModel",e.taskName)("disabled",!e.hasEditPermission)}}function Ns(e,t){if(1&e&&(f.Xb(0,"span",16),f.Zc(1),f.Wb()),2&e){const e=f.nc(2);f.Wc("text-decoration","DONE"===e.task.status?"line-through":"none"),f.Cb(1),f.ad(e.taskName)}}function Gs(e,t){if(1&e&&(f.Xc(0,Bs,2,4,"input",12),f.Xc(1,Ns,2,3,"span",13)),2&e){const e=f.nc();f.wc("ngIf",e.hasEditPermission),f.Cb(1),f.wc("ngIf",!e.hasEditPermission)}}function Us(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",22),f.Xb(1,"checkbox-filter-dropdown",23),f.jc("emitSelected",(function(t){return f.Oc(e),f.nc(2).userDropdownClosed(t)}))("loadMore",(function(t){return f.Oc(e),f.nc(2).loadMoreUsers(t)}))("userFilterChanged",(function(t){return f.Oc(e),f.nc(2).userFilterChanged(t)}))("clearSelectedList",(function(){return f.Oc(e),f.nc(2).clearSelectedList()}))("emitSelectionOfAllEntities",(function(t){return f.Oc(e),f.nc(2).selectedAllUsers(t)})),f.oc(2,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("entity","team")("placeholder",f.pc(2,9,"GLOBAL.FIND_TEAM_LABEL"))("hasWithoutEntity",!1)("entityMap",e.teamMaps)("withoutSelected",!1)("selectedAll",e.selectAllUsers)("showSelectAll",!1)("saveSelected",!0)("queryStatus",e.query.status)}}function Vs(e,t){if(1&e&&(f.Xb(0,"div",17),f.Xb(1,"div",18),f.Xb(2,"div",19),f.Xb(3,"span",20),f.Zc(4),f.Wb(),f.Wb(),f.Wb(),f.Xc(5,Us,3,11,"div",21),f.Wb()),2&e){const e=f.nc();f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.Hb("cl-dropdown-toggle",e.hasEditPermission)("cl-hover-pointer",e.hasEditPermission),f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.Hb("cl-dropdown-toggle",e.hasEditPermission),f.xc("title",e.makeTitleForDropDown()),f.Db("doNotOpen",e.hasEditPermission?null:""),f.Cb(1),f.bd(" ",e.makeTitleForDropDown()," ")}}function Hs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",24),f.Xb(1,"div",25),f.Xb(2,"input",26),f.jc("change",(function(){return f.Oc(e),f.nc().updateTask()}))("ngModelChange",(function(t){return f.Oc(e),f.nc().task.billable=t})),f.Wb(),f.Xb(3,"label",27),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.yc("id","taskBillableEnabled + ",e.task.id,""),f.wc("disabled",!e.isAdminOrOwner&&!e.isProjectManager)("ngModel",e.task.billable),f.Cb(1),f.yc("for","taskBillableEnabled + ",e.task.id,""),f.Cb(1),f.bd(" ",f.pc(5,5,"GLOBAL.CONFIRM_LABEL")," ")}}function Ys(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"span",35),f.Xb(2,"a",36),f.jc("click",(function(){f.Oc(e);const t=f.nc(2),i=f.Lc(19);return t.openModal(i)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.CHANGE_LABEL")," "))}function $s(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.Xb(2,"div",30),f.Xb(3,"input",31,32),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(4).blur()})),f.Wb(),f.Xc(5,Ys,5,3,"div",33),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(3),f.wc("ngModel",e.hourlyRatePlaceholder),f.Cb(2),f.wc("ngIf",e.isAdminOrOwner||e.isProjectManager)}}function zs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",34),f.Xb(1,"span",35),f.Xb(2,"a",36),f.jc("click",(function(){f.Oc(e);const t=f.nc(2),i=f.Lc(21);return t.openModal(i)})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Wb(),f.Wb()}2&e&&(f.Cb(3),f.bd(" ",f.pc(4,1,"GLOBAL.CHANGE_LABEL"),""))}function Zs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",37),f.Xb(2,"div",30),f.Xb(3,"input",38,39),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(4).blur()})),f.Wb(),f.Xc(5,zs,5,3,"div",33),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(3),f.wc("ngModel",e.costRatePlaceholder),f.Cb(2),f.wc("ngIf",e.isAdminOrOwner||e.isProjectManager)}}function Ks(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",44),f.jc("click",(function(){return f.Oc(e),f.nc(3).setTaskEstimate()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"PROJECTS.EDIT_PROJECT_TASKS.SET_LABEL")," "))}function qs(e,t){1&e&&(f.Xb(0,"span",16),f.Zc(1,"--"),f.Wb())}function Js(e,t){if(1&e&&(f.Xb(0,"div",41),f.Xc(1,Ks,3,3,"a",42),f.Xc(2,qs,2,0,"span",43),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(1),f.wc("ngIf",!e.hasEditPermission)}}function Qs(e,t){if(1&e){const e=f.Yb();f.Xb(0,"input",46,47),f.jc("keyup.enter",(function(){return f.Oc(e),f.Lc(1).blur()}))("inputChange",(function(t){return f.Oc(e),f.nc(3).updateTaskEstimate(t)})),f.Wb()}if(2&e){const e=f.nc(3);f.yc("id","taskEstimate_",e.taskName,""),f.wc("disabled",!e.hasEditPermission)("ngModel",e.taskEstimate)}}function er(e,t){if(1&e&&(f.Xb(0,"span",16),f.Zc(1),f.Wb()),2&e){const e=f.nc(3);f.Cb(1),f.ad(e.taskEstimate)}}function tr(e,t){if(1&e&&(f.Xb(0,"div",41),f.Xc(1,Qs,2,3,"input",45),f.Xc(2,er,2,1,"span",43),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(1),f.wc("ngIf",!e.hasEditPermission)}}function ir(e,t){if(1&e&&(f.Xc(0,Js,3,2,"div",40),f.Xc(1,tr,3,2,"div",40)),2&e){const e=f.nc();f.wc("ngIf",e.hideZeroRates&&(!e.taskEstimate||0===e.taskEstimate)),f.Cb(1),f.wc("ngIf",!e.hideZeroRates||e.taskEstimate&&0!==e.taskEstimate)}}function nr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",55),f.jc("click",(function(){return f.Oc(e),f.nc(4).emitDelete.emit()})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"GLOBAL.DELETE_BTN"),""))}function sr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",53),f.Xb(1,"div",54),f.Xb(2,"a",55),f.jc("click",(function(){return f.Oc(e),f.nc(3).updateTaskStatus()})),f.Zc(3),f.oc(4,"translate"),f.Wb(),f.Xc(5,nr,3,3,"a",56),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(3),f.bd(" ",f.pc(4,2,"DONE"===e.task.status?"PROJECTS.EDIT_PROJECT_TASKS.MARK_AS_ACTIVE_LABEL":"PROJECTS.EDIT_PROJECT_TASKS.MARK_AS_DONE_LABEL")," "),f.Cb(2),f.wc("ngIf","DONE"===e.task.status&&e.hasDeletePermission)}}function rr(e,t){1&e&&(f.Xb(0,"div",49),f.Xb(1,"div",50),f.Sb(2,"img",51),f.Wb(),f.Xc(3,sr,6,4,"div",52),f.Wb())}function or(e,t){if(1&e&&f.Xc(0,rr,4,0,"div",48),2&e){const e=f.nc();f.wc("ngIf",e.hasEditPermission)}}function ar(e,t){if(1&e){const e=f.Yb();f.Xb(0,"hourly-rate",57),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateHourlyRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.TASK)("hourlyRate",e.task.hourlyRate)("hasHistoricRateFeature",!0)}}function cr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"cost-rate",58),f.jc("onClose",(function(){return t.$implicit.close()}))("saveRate",(function(i){f.Oc(e);const n=t.$implicit;return f.nc().updateCostRate(i),n.close()})),f.Wb()}if(2&e){const e=f.nc();f.wc("type",e.rateType.TASK)("costRate",e.task.costRate)("hasHistoricRateFeature",!0)}}const lr=function(e){return{labels:e}},ur=function(e,t,i,n,s,r,o,a){return[e,t,i,n,s,r,o,a]};let dr=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.userService=e,this.userGroupServiceV1=t,this.userGroupService=i,this.taskService=n,this.modalService=s,this.workspaceService=r,this.cd=o,this.translate=a,this.limit=50,this.emitDelete=new f.n,this.emitUpdate=new f.n,this.emitHourlyRate=new f.n,this.emitCostRate=new f.n,this.filterChanged=new f.n,this.assigneesChanged=new f.n,this.teamMaps=[],this.refreshUserList=!0,this.hideZeroRates=!0,this.rateType=q.a,this.EstimateType=pt.a,this.query={text:null,page:1,status:"ACTIVE"},this.unsubscribe$=new M.a}set task(e){e&&(this._task=e,this.addAssigneeNames())}get task(){return this._task}set allAssigneesOfProject(e){e&&(this._allAssigneesOfProject=e||[],this.addAssigneeNames())}get allAssigneesOfProject(){return this._allAssigneesOfProject}set project(e){e&&(this._project=e,this.teamMapFilledIndicator||this.fillTeamMap(),this.addAssigneeNames())}get project(){return this._project}set usersAndGroups(e){e&&(this._usersAndGroups=e,this.project?this.fillTeamMap():this.teamMapFilledIndicator=!1,this.addAssigneeNames())}get usersAndGroups(){return this._usersAndGroups}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.cd.detectChanges(),this.taskName=this.task.name,this.taskEstimate=this.project.estimateType===pt.a.TIME_ESTIMATE?Object(ut.duration)(this.task.estimate).asHours():this.task.budgetEstimate,this.teamMaps.push(Object(k.a)("Groups",this.translate.instant("GLOBAL.GROUPS_LABEL"),[])),this.teamMaps.push(Object(k.a)("Users",this.translate.instant("GLOBAL.USERS_LABEL"),[])),this.setCostRateLabel(),this.setHourlyRateLabel(),this.activeBillable=this.workspace.activeBillableHours}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngAfterViewInit(){this.cd.detectChanges()}addAssigneeNames(){this.task.assigneeIds||(this.task.assigneeNames=""),this.task.userGroupIds||(this.task.userGroupNames=""),(this.task.assigneeIds||this.task.userGroupIds)&&this.allAssigneesOfProject&&(this.task.assigneeNames=this.filterAndJoinNames(this.task.assigneeIds),this.task.userGroupNames=this.filterAndJoinNames(this.task.userGroupIds),this.cd.detectChanges())}filterAndJoinNames(e){const t=this.allAssigneesOfProject.filter(t=>e.indexOf(t.id)>-1).map(e=>e.name||e.email);return t.sort(Object(gt.c)(e=>e,!1)),t.join(", ")}setCostRateLabel(){this.costRatePlaceholder=Object(J.m)(this.task.costRate)}openModal(e){this.modalService.open(e,{centered:!0})}setHourlyRateLabel(){this.hourlyRatePlaceholder=Object(J.n)(this.task.hourlyRate)}userDropdownClosed(e){const t=e.entities[0].value.filter(t=>t.selected===!e.selectedAll).map(e=>e.entity.id),i=e.entities[1].value.filter(t=>t.selected===!e.selectedAll).map(e=>e.entity.id),n=this.users.map(e=>e.id),s=this.userGroups.map(e=>e.id),r=[...this.task.assigneeIds.filter(e=>-1===n.indexOf(e))],o=[...this.task.userGroupIds.filter(e=>-1===s.indexOf(e))];this.task.assigneeIds=0===r.length?i:[...i,...r],this.task.userGroupIds=0===o.length?t:[...t,...o],this.assigneesChanged.emit({task:this.task,all:!e.selectedAll}),("ACTIVE"!==this.query.status||this.query.text||1!=this.query.page)&&this.userFilterChanged({status:"ACTIVE",page:1})}loadMoreUsers(e){this.query.page=e.page,this.refreshUserList=!1,this.getUsersAndUserGroups(e)}userFilterChanged(e){this.refreshUserList=!0,this.task.assigneeIds=this.task.assigneeIds.filter(t=>t!=e.unselectedEntities),this.task.userGroupIds=this.task.userGroupIds.filter(t=>t!=e.unselectedEntities),this.query.status=e.status,this.query.text=e.name,this.query.page=e.page,this.getUsersAndUserGroups(e)}updateTaskName(){this.taskName!==this.task.name&&(this.task.name=this.taskName,this.updateTask())}getUsersAndUserGroups(e){this.filterChanged.emit(e)}fillTeamMap(){var e,t;const i=[];i.push(Object(k.a)("Groups",this.translate.instant("GLOBAL.GROUPS_LABEL"),[])),i.push(Object(k.a)("Users",this.translate.instant("GLOBAL.USERS_LABEL"),[])),this.refreshUserList||(this.teamMaps[0].value.forEach(e=>{i[0].value.push(e)}),this.teamMaps[1].value.forEach(e=>{i[1].value.push(e)}));const n=this.project.memberships.map(e=>e.userId),s=null===(e=this.usersAndGroups)||void 0===e?void 0:e.groups,r=null===(t=this.usersAndGroups)||void 0===t?void 0:t.users;if(s){this.userGroups=this.userGroups&&!this.refreshUserList?[...this.userGroups,...s.groups]:s.groups;const e=s.groups.filter(e=>(this.project.public||n.indexOf(e.id)>-1)&&"Admins"!==e.name).map(e=>new A.a(e,!!this.task.userGroupIds&&this.task.userGroupIds.indexOf(e.id)>-1));i[0].value=[...i[0].value,...e]}else i[0].value=[];if(r){if(!this.project.public&&r.users)return;const e=this.project.public?r.users:r;this.users=this.users&&!this.refreshUserList?[...this.users,...e]:e;const t=e.map(e=>new A.a(e,!!this.task.assigneeIds&&this.task.assigneeIds.indexOf(e.id)>-1));i[1].value=[...i[1].value,...t],this.cd.detectChanges()}this.teamMaps=i,this.teamMapFilledIndicator=!0,this.cd.detectChanges()}updateTaskEstimate(e){this.taskEstimate=e,this.project.estimateType===pt.a.PROJECT_BUDGET?this.task.budgetEstimate=Number(e):this.task.estimate=Object(ut.duration)(Number(e),"h").toISOString(),this.updateTask()}updateTaskStatus(){this.task.status="ACTIVE"===this.task.status?"DONE":"ACTIVE",this.updateTask()}updateTask(){this.emitUpdate.emit(this.task)}updateHourlyRate(e){const t=new X.a({amount:e.amount?e.amount:0,currency:this.workspace.hourlyRate.currency||"USD",since:e.since});this.task.hourlyRate=t,this.emitHourlyRate.emit(this.task)}updateCostRate(e){const t=new W.a({amount:null!==e.amount?e.amount:null,currency:this.workspace.hourlyRate.currency||"USD",since:e.since});this.task.costRate=t,this.emitCostRate.emit(this.task)}setTaskEstimate(){this.hideZeroRates=!1,setTimeout(()=>{this.taskEstimateInput.nativeElement.select()},100)}clearSelectedList(){this.task.assigneeIds=[]}selectedAllUsers(e){this.selectAllUsers=e}makeTitleForDropDown(){return 0===this.task.assigneeIds.length&&0===this.task.userGroupIds.length?this.translate.instant("PROJECTS.PROJECTS_TABLE.ANYONE_LABEL"):0===this.task.userGroupIds.length&&this.task.assigneeIds.length>0?this.task.assigneeNames:this.task.userGroupIds.length>0&&0===this.task.assigneeIds.length?this.task.userGroupNames:`${this.task.userGroupNames}, ${this.task.assigneeNames}`}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(a.a),f.Rb(ys.a),f.Rb(R.a),f.Rb(Ss.a),f.Rb(g.q),f.Rb(u.a),f.Rb(f.h),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["tasks-table-row"],["","tasks-table-row",""]],viewQuery:function(e,t){var i;1&e&&f.gd(Fs,!0),2&e&&f.Kc(i=f.kc())&&(t.taskEstimateInput=i.first)},inputs:{task:"task",allAssigneesOfProject:"allAssigneesOfProject",isDesktop:"isDesktop",labels:"labels",hasEditPermission:"hasEditPermission",hasDeletePermission:"hasDeletePermission",project:"project",isAdminOrOwner:"isAdminOrOwner",expandAll:"expandAll",limit:"limit",showEstimate:"showEstimate",taskColumns:"taskColumns",isProjectManager:"isProjectManager",usersAndGroups:"usersAndGroups"},outputs:{emitDelete:"emitDelete",emitUpdate:"emitUpdate",emitHourlyRate:"emitHourlyRate",emitCostRate:"emitCostRate",filterChanged:"filterChanged",assigneesChanged:"assigneesChanged"},decls:22,vars:25,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["hourlyRateModal",""],["costRateModal",""],["type","text","class","cl-form-control cl-input-description cl-py-2 cl-ml-n2 cl-px-2 tr-reset-min-h",3,"text-decoration","ngModel","disabled","ngModelChange","blur","keyup.enter",4,"ngIf"],["class","cl-text-dark",3,"text-decoration",4,"ngIf"],["type","text",1,"cl-form-control","cl-input-description","cl-py-2","cl-ml-n2","cl-px-2","tr-reset-min-h",3,"ngModel","disabled","ngModelChange","blur","keyup.enter"],["taskNameInput",""],[1,"cl-text-dark"],["dropdown","",1,"cl-dropdown","cl-dropdown-large"],["closeDropdown","","role","button",1,"cl-component-divided-left","cl-d-flex","cl-no-arrow"],[1,"cl-cut-text-wrapper","cl-w-100","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-start"],["closeDropdown","",1,"cl-cut-text","cl-badge","cl-badge-tag",3,"title"],["class","cl-dropdown-menu cl-lg-down-r-0",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-lg-down-r-0"],[3,"entity","placeholder","hasWithoutEntity","entityMap","withoutSelected","selectedAll","showSelectAll","saveSelected","queryStatus","emitSelected","loadMore","userFilterChanged","clearSelectedList","emitSelectionOfAllEntities"],[1,"cl-component-divided-left"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox",1,"cl-custom-control-input",3,"disabled","ngModel","id","change","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-d-flex","cl-flex-column","cl-flex-lg-row"],[1,"cl-component-divided-left","cl-team-table-members-billable-rate","cl-mb-2","cl-mb-lg-0"],[1,"cl-input-group","cl-input-group-sm"],["type","text","name","hourlyRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"ngModel","keyup.enter"],["hourlyRateInput",""],["class","cl-input-group-append",4,"ngIf"],[1,"cl-input-group-append"],[1,"cl-input-group-text","cl-bg-white"],[1,"cl-color-blue",3,"click"],[1,"cl-component-divided-left","cl-team-table-members-cost-rate"],["type","text","name","costRate","spellcheck","false","inputNumber","","autocomplete","off","readonly","",1,"cl-form-control","cl-text-lg-left","tr-reset-min-h","cl-cursor-disabled",3,"ngModel","keyup.enter"],["costRateInput",""],["class","cl-component-divided-left cl-w-100 cl-justify-content-lg-end",4,"ngIf"],[1,"cl-component-divided-left","cl-w-100","cl-justify-content-lg-end"],[3,"click",4,"ngIf"],["class","cl-text-dark",4,"ngIf"],[3,"click"],["class","cl-form-control cl-input-6-digits-text-cut cl-py-2 cl-text-center cl-text-lg-right tr-reset-min-h cl-mx-n2","type","text","name","taskEstimate","spellcheck","false","inputNumber","","autocomplete","off",3,"id","disabled","ngModel","keyup.enter","inputChange",4,"ngIf"],["type","text","name","taskEstimate","spellcheck","false","inputNumber","","autocomplete","off",1,"cl-form-control","cl-input-6-digits-text-cut","cl-py-2","cl-text-center","cl-text-lg-right","tr-reset-min-h","cl-mx-n2",3,"id","disabled","ngModel","keyup.enter","inputChange"],["taskEstimateInput",""],["class","cl-dropdown cl-d-flex cl-justify-content-end cl-hover-pointer","dropdown","",4,"ngIf"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],[3,"type","hourlyRate","hasHistoricRateFeature","onClose","saveRate"],[3,"type","costRate","hasHistoricRateFeature","onClose","saveRate"]],template:function(e,t){if(1&e&&(f.Xc(0,Ws,1,0,"ng-container",0),f.Sb(1,"responsive-row",1,2),f.oc(3,"taskColumnDecider"),f.Xc(4,Gs,2,2,"ng-template",null,3,f.Yc),f.Xc(6,Vs,6,12,"ng-template",null,4,f.Yc),f.Xc(8,Hs,6,7,"ng-template",null,5,f.Yc),f.Xc(10,$s,6,2,"ng-template",null,6,f.Yc),f.Xc(12,Zs,6,2,"ng-template",null,7,f.Yc),f.Xc(14,ir,2,2,"ng-template",null,8,f.Yc),f.Xc(16,or,1,1,"ng-template",null,9,f.Yc),f.Xc(18,ar,1,3,"ng-template",null,10,f.Yc),f.Xc(20,cr,1,3,"ng-template",null,11,f.Yc)),2&e){const e=f.Lc(2),i=f.Lc(5),n=f.Lc(7),s=f.Lc(9),r=f.Lc(11),o=f.Lc(13),a=f.Lc(15),c=f.Lc(17);f.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",f.Bc(14,lr,t.labels)),f.Cb(1),f.wc("isDesktop",t.isDesktop)("templates",f.tc(3,5,f.Ic(16,ur,t.taskColumns,i,n,s,r,o,a,c)))("isExpanded",t.expandAll)}},directives:[C.B,Q.a,C.u,L.c,L.s,L.v,w.a,S.a,x.a,L.a,ee.a,ie.a,ne.a],pipes:[Xs.a,v.e],encapsulation:2,changeDetection:0}),e})();var hr=i("kojQ");function pr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",20),f.jc("click",(function(){f.Oc(e);const i=t.$implicit,n=f.nc(2);return n.setStatus(i),n.setLocalStorageSettings()})),f.Zc(1),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc(2);f.Hb("cl-active",i.taskStatus.value===e.value),f.Cb(1),f.bd(" ",e.label," ")}}function br(e,t){if(1&e&&(f.Xb(0,"div",18),f.Xc(1,pr,2,3,"a",19),f.Wb()),2&e){const e=f.nc();f.Cb(1),f.wc("ngForOf",e.statusDropdownValues)}}function fr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",21),f.Xb(1,"form"),f.Xb(2,"div",22),f.Xb(3,"div",23),f.Xb(4,"input",24),f.jc("ngModelChange",(function(t){return f.Oc(e),f.nc().newTaskName=t})),f.oc(5,"translate"),f.Wb(),f.Wb(),f.Xb(6,"div",25),f.Xb(7,"button",26),f.jc("click",(function(){return f.Oc(e),f.nc().createTask()}))("keyup.enter",(function(){return f.Oc(e),f.nc().createTask()})),f.Zc(8),f.oc(9,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(4),f.wc("placeholder",f.pc(5,3,"PROJECTS.PROJECTS_TABLE.ADD_TASK_PLACEHOLDER"))("ngModel",e.newTaskName),f.Cb(4),f.bd(" ",f.pc(9,5,"GLOBAL.ADD_LABEL")," ")}}function mr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",30),f.Xb(1,"tr",31),f.jc("emitDelete",(function(){f.Oc(e);const i=t.$implicit,n=f.nc(2),s=f.Lc(22);return n.openDeleteModal(i,s)}))("emitUpdate",(function(t){return f.Oc(e),f.nc(2).updateTask(t)}))("emitHourlyRate",(function(t){return f.Oc(e),f.nc(2).updateHourlyRate(t)}))("emitCostRate",(function(t){return f.Oc(e),f.nc(2).updateCostRate(t)}))("filterChanged",(function(t){return f.Oc(e),f.nc(2).getUsersAndUserGroups(t)}))("assigneesChanged",(function(t){return f.Oc(e),f.nc(2).assigneesChanged(t)})),f.Wb(),f.Wb()}if(2&e){const e=t.$implicit,i=f.nc(2);f.Cb(1),f.wc("task",e)("allAssigneesOfProject",i.allAssigneesOfProject)("isDesktop",i.isDesktop)("labels",i.labels)("hasEditPermission",i.hasEditPermission)("hasDeletePermission",i.hasDeletePermission)("taskColumns",i.taskColumns)("isProjectManager",i.isProjectManagerForThisProject)("isAdminOrOwner",i.isAdminOrOwner)("project",i.project)("expandAll",i.expandAll)("limit",i.limit)("usersAndGroups",i.usersAndGroups)}}function gr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"table",27),f.Xb(1,"thead"),f.Xb(2,"tr",28),f.jc("onChangeSortOrder",(function(){return f.Oc(e),f.nc().changeSortOrder()}))("onChangeSortColumn",(function(t){return f.Oc(e),f.nc().changeSortColumn(t)}))("onExpandAll",(function(t){return f.Oc(e),f.nc().expandAllRows(t)})),f.Wb(),f.Wb(),f.Xb(3,"tbody"),f.Xc(4,mr,2,13,"div",29),f.oc(5,"paginate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(2),f.wc("sortOrder",e.sortOrder)("sortBy",e.sortBy)("showEstimate",e.showEstimate)("isDesktop",e.isDesktop)("currency",e.workspace&&e.workspace.hourlyRate.currency)("estimateType",e.project.estimateType)("isPerMonth",e.isPerMonth)("workspace",e.workspace)("taskColumns",e.taskColumns),f.Cb(2),f.wc("ngForOf",f.rc(5,10,e.filteredTasks,e.page,e.limit))}}const vr=function(e){return{taskName:e}};function Cr(e,t){if(1&e&&(f.Xb(0,"span",35),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" ",f.qc(2,1,"PROJECTS.EDIT_PROJECT_TASKS.TASK_INFORMATION_LOSS_WARNING",f.Bc(4,vr,e.selectedTask.name))," ")}}function Er(e,t){if(1&e){const e=f.Yb();f.Xb(0,"delete-confirm-modal",32),f.jc("onDelete",(function(){f.Oc(e);const i=t.$implicit;return f.nc().deleteTask(i)}))("onClose",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.oc(1,"translate"),f.oc(2,"translate"),f.Xc(3,Cr,3,6,"span",33),f.Xb(4,"p",34),f.Zc(5),f.oc(6,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.wc("title",f.pc(1,6,"GLOBAL.DELETE_BTN"))("btnText",f.pc(2,8,"GLOBAL.DELETE_BTN"))("showConfirmation",e.workspace.timeApprovalEnabled)("inProgress",e.inProgress),f.Cb(3),f.wc("ngIf",e.workspace.timeApprovalEnabled),f.Cb(2),f.bd(" ",f.qc(6,10,"PROJECTS.EDIT_PROJECT_TASKS.REMOVE_TASK_WARNING",f.Bc(13,vr,e.selectedTask.name))," ")}}let wr=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c,l,u,d,h,p,b,m,g){this.taskService=e,this.userService=t,this.userGroupServiceV1=i,this.projectService=n,this.userGroupService=s,this.browserService=r,this.titleService=o,this.activatedRoute=a,this.workspaceService=c,this.authService=l,this.router=u,this.modalService=d,this.loader=h,this.uiSettingsService=p,this.cd=b,this.translate=m,this.analyticsService=g,this.emitUpdate=new f.n,this.filteredTasks=[],this.page=1,this.newTaskName="",this.expandAll=!1,this.debouncer$=new M.a,this.taskColumns=[],this.EstimateType=pt.a,this.ResetOption=nn,this.unsubscribe$=new M.a,this.statusDropdownValues=[new tn.a("ACTIVE",m.instant("PROJECTS.DROPDOWN.ACTIVE_TASKS")),new tn.a("DONE",m.instant("PROJECTS.DROPDOWN.DONE_TASKS")),new tn.a("",m.instant("PROJECTS.DROPDOWN.ALL_TASKS"))],this.initSavedData()}set project(e){e&&(this._project=e,this.titleService.setCustomTitle(this.translate.instant("PROJECTS.EDIT_SECTION.PROJECT_NAME_TASKS",{name:this._project.name})),this.initFilter(this.taskStatus),this.getTaskAssigneesOfProject(),this.getUsersAndUserGroups({status:"ACTIVE",page:1,limit:50}))}get project(){return this._project}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.setBrowserWidth(),this.checkProjectManager(),this.initFilter(this.taskStatus),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.loader.hide(),this.setShowEstimate(),this.isPerMonth=this.showEstimate&&this.project.estimateType===pt.a.TIME_ESTIMATE&&this.project.timeEstimate.resetOption===nn.MONTHLY||this.project.estimateType===pt.a.PROJECT_BUDGET&&this.project.budgetEstimate.resetOption===nn.MONTHLY,this.setTaskLabelsAndColumns(),this.cd.detectChanges(),this.activatedRoute.queryParams.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.page=Number(e.page)||1,this.limit=Number(e.limit)||this.limit,this.cd.detectChanges()}),this.setDebouncer(),this.activeBillable=this.workspace.activeBillableHours,this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}checkProjectManager(){this.authService.permissionData$.pipe(Object(P.a)(e=>null!==e),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isProjectManagerForThisProject=e.isProjectManagerFor(this.project.id)})}initSavedData(){const e=this.uiSettingsService.getSettings(I.b.PROJECT_TASKS_DATA)||{},t=e.hasOwnProperty("filter");this.taskStatus=t?tn.a.getDropdownOf(this.statusDropdownValues,e.filter):this.statusDropdownValues[0],this.limit=e.limit||y.j,this.sortBy=e.sortBy||Ct.NAME,this.sortOrder=e.sortOrder||vt.a.ASCENDING,this.sortBy===Ct.NAME?this.mapper=e=>e.name.toLowerCase():this.sortBy===Ct.ESTIMATE?this.mapper=e=>e.estimate?Object(ut.duration)(e.estimate).asHours():0:this.sortBy===Ct.BUDGET_ESTIMATE&&(this.mapper=e=>e.budgetEstimate)}setBrowserWidth(){this.browserService.isBreakpointLg$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setDebouncer(){this.debouncer$.pipe(Object(ws.a)(350),Object(n.a)(this.unsubscribe$)).subscribe(()=>{const e=this.name?this.name.toLowerCase():"";this.filteredTasks=[...this.project.tasks].filter(t=>-1!==t.name.toLowerCase().indexOf(e)).sort(Object(gt.a)(this.mapper,this.sortOrder===vt.a.DESCENDING)),this.taskStatus&&this.filterByStatus(),this.cd.detectChanges()})}filterByStatus(){this.filteredTasks=this.taskStatus.value?[...this.filteredTasks].filter(e=>e.status===this.taskStatus.value).sort(Object(gt.a)(this.mapper,this.sortOrder===vt.a.DESCENDING)):[...this.filteredTasks].sort(Object(gt.a)(this.mapper,this.sortOrder===vt.a.DESCENDING))}setStatus(e){this.taskStatus=e,this.debouncer$.next()}searchChanged(){this.debouncer$.next()}initFilter(e){this.taskStatus=e,e.value?(this.filteredTasks=this.project.tasks.filter(t=>t.status===e.value).sort(Object(gt.a)(this.mapper,this.sortOrder===vt.a.DESCENDING)),this.cd.detectChanges()):this.filteredTasks=[...this.project.tasks].sort(Object(gt.a)(this.mapper,this.sortOrder===vt.a.DESCENDING)),this.page>1&&50*(this.page-1)===this.filteredTasks.length&&this.setPagination({page:this.page-1})}setPagination(e){this.page=!e.page&&e.limit&&e.limit!==this.limit?1:e.page?e.page:this.page,this.limit=e.limit?e.limit:this.limit,this.pager.setPaginationManually(e),this.setPaginationUrl(e),this.cd.detectChanges()}setPaginationUrl(e){this.router.navigate([],{queryParams:{page:this.page,limit:this.limit}}),this.setLocalStorageSettings()}createTask(){this.newTaskName.trim()&&this.taskService.create(this.newTaskName,this.project.id).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.filteredTasks=[e,...this.filteredTasks],this.project.tasks=[e,...this.project.tasks],this.newTaskName="",this.cd.detectChanges(),this.analyticsService.addEvent(new rn.a({event:"submit",value:"ButtonName",section:"Projects",section2:"Tasks"}))})}openDeleteModal(e,t){this.selectedTask=e,this.modalService.open(t,{centered:!0})}deleteTask(e){this.inProgress=!0,this.taskService.delete(this.selectedTask).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.project.tasks=this.project.tasks.filter(e=>e.id!==this.selectedTask.id),this.filteredTasks=this.filteredTasks.filter(e=>e.id!==this.selectedTask.id),this.inProgress=!1,e.close(),this.cd.detectChanges()},()=>{this.inProgress=!1,this.cd.detectChanges()})}updateTask(e){this.taskService.update(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe()}updateHourlyRate(e){this.taskService.updateHourlyRate(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.filteredTasks=this.filteredTasks.map(e=>(e.id===t.id&&(e=t),e)),this.cd.detectChanges(),this.analyticsService.addEvent(new rn.a({event:"change",value:null==e?void 0:e.hourlyRate.since,amount:null==e?void 0:e.hourlyRate.amount,section:"Projects",section2:"Tasks",section3:"Task Hourly Rate"}))})}updateCostRate(e){this.taskService.updateCostRate(e).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.filteredTasks=this.filteredTasks.map(e=>(e.id===t.id&&(e=t),e)),this.cd.detectChanges(),this.analyticsService.addEvent(new rn.a({event:"change",value:null==e?void 0:e.costRate.since,amount:null==e?void 0:e.costRate.amount,section:"Projects",section2:"Tasks",section3:"Task Cost Rate"}))})}getUsersAndUserGroups(e){e.statuses=e.status,("INACTIVE"===e.status?Object(T.a)([Object(D.a)(null),this.getMethodDependOnProjectAccess(e)]):Object(T.a)([this.getGroupsDependingOnProjectAccess(e),this.getMethodDependOnProjectAccess(e)])).subscribe(([e,t])=>{this.usersAndGroups={groups:e,users:t},this.cd.detectChanges()})}getMethodDependOnProjectAccess(e){return this.project.public?this.workspaceService.getUsers(e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)):(e.projectId=this.project.id,"ACTIVE"===e.statuses&&(e.statuses=["ACTIVE","PENDING"]),this.userService.getUsersAndUsersFromUserGroupsAssignedToProject(e).pipe(Object(n.a)(this.unsubscribe$)))}assigneesChanged(e){this.taskService.update(e.task,e.all).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.getTaskAssigneesOfProject()})}getGroupsDependingOnProjectAccess(e){return this.project.public||(e.projectId=this.project.id),this.userGroupService.getUserGroups(e).pipe(Object(O.a)(1),Object(n.a)(this.unsubscribe$))}getTaskAssigneesOfProject(){let e=[];this.project.tasks.forEach(t=>{e=[...new Set([...e,...t.assigneeIds])]});let t=[];if(this.project.tasks.forEach(e=>{t=[...new Set([...t,...e.userGroupIds])]}),0===e.length&&0===t.length)this.allAssigneesOfProject=[],this.cd.detectChanges();else{const i=0===e.length?Object(D.a)(null):this.userService.getUsersByIds(e).pipe(Object(n.a)(this.unsubscribe$)),s=0===t.length?Object(D.a)(null):this.userGroupService.getAllUserGroupByIds(t).pipe(Object(n.a)(this.unsubscribe$));Object(T.a)([i,s]).subscribe(([e,t])=>{this.allAssigneesOfProject=[...e||[],...t||[]],this.cd.detectChanges()})}}sortTasksByName(){this.mapper=e=>e.name.toLowerCase(),this.sortTasks()}sortTasksByEstimate(){this.mapper=this.project.estimateType===pt.a.TIME_ESTIMATE?e=>e.estimate?Object(ut.duration)(e.estimate).asHours():0:e=>e.budgetEstimate,this.sortTasks()}sortTasks(){this.initFilter(this.taskStatus),this.setLocalStorageSettings(),this.cd.detectChanges()}setLocalStorageSettings(){this.uiSettingsService.setSettings(I.b.PROJECT_TASKS_DATA,{sortBy:this.sortBy,sortOrder:this.sortOrder,limit:this.limit,filter:this.taskStatus.value})}changeSortOrder(){this.sortOrder=this.sortOrder===vt.a.ASCENDING?vt.a.DESCENDING:vt.a.ASCENDING,this.sortTasks()}changeSortColumn(e){this.sortBy=e,this.sortOrder=vt.a.ASCENDING,this.sortBy===Ct.NAME?this.sortTasksByName():this.sortTasksByEstimate()}expandAllRows(e){this.expandAll=e}setShowEstimate(){this.showEstimate=!(this.project.estimateType!==pt.a.PROJECT_BUDGET||!this.canSeeRates||!this.canSeeProjectStatus||"AUTO"!==this.project.budgetEstimate.type)||this.project.estimateType===pt.a.TIME_ESTIMATE&&"AUTO"===this.project.timeEstimate.type}setTaskLabelsAndColumns(){this.taskColumns=["col1","col2"],this.labels=Object.values(this.translate.instant(["GLOBAL.NAME_LABEL","PROJECTS.LABELS.ASSIGNEE"])),this.workspace.taskBillableEnabled&&(!this.workspace.onlyAdminsCanChangeBillableStatus||this.isAdminOrOwner)&&this.workspace.activeBillableHours&&(this.labels.push(this.translate.instant("GLOBAL.BILLABLE_LABEL")),this.taskColumns.push("col3")),this.workspace.taskRateEnabled&&(!this.workspace.onlyAdminsSeeBillableRates||this.isAdminOrOwner)&&this.workspace.activeBillableHours&&(this.labels.push(this.translate.instant("PROJECTS.LABELS.HOURLY_RATE",{currency:this.workspace.hourlyRate.currency})),this.taskColumns.push("col4")),this.workspace.taskRateEnabled&&this.workspace.isCostRateActive&&(!this.workspace.onlyAdminsSeeBillableRates||this.isAdminOrOwner)&&this.workspace.activeBillableHours&&(this.labels.push(this.translate.instant("PROJECTS.LABELS.COST_RATE",{currency:this.workspace.hourlyRate.currency})),this.taskColumns.push("col5")),this.project.estimateType===pt.a.PROJECT_BUDGET&&this.showEstimate&&(!this.workspace.onlyAdminsSeeBillableRates||this.isAdminOrOwner)&&this.workspace.activeBillableHours&&(this.labels.push(this.translate.instant(this.isPerMonth?"PROJECTS.LABELS.BUDGET":"PROJECTS.LABELS.BUDGET_PER_MONTH",{currency:this.workspace.hourlyRate.currency})),this.taskColumns.push("col6")),this.project.estimateType===pt.a.TIME_ESTIMATE&&this.showEstimate&&(this.labels.push(this.translate.instant(this.isPerMonth?"PROJECTS.LABELS.TIME_ESTIMATE":"PROJECTS.LABELS.TIME_ESTIMATE_PER_MONTH")),this.taskColumns.push("col6")),this.labels.push(this.translate.instant("GLOBAL.EDIT_LABEL")),this.taskColumns.push("col7"),this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(Ss.a),f.Rb(a.a),f.Rb(ys.a),f.Rb(r.a),f.Rb(R.a),f.Rb(j.a),f.Rb(_.a),f.Rb(m.a),f.Rb(u.a),f.Rb(c.a),f.Rb(m.d),f.Rb(g.q),f.Rb(d.a),f.Rb(I.a),f.Rb(f.h),f.Rb(v.f),f.Rb(sn.a))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project-tasks"]],viewQuery:function(e,t){var i;1&e&&f.gd(F.a,!0),2&e&&f.Kc(i=f.kc())&&(t.pager=i.first)},inputs:{project:"project",hasEditPermission:"hasEditPermission",canSeeRates:"canSeeRates",canSeeProjectStatus:"canSeeProjectStatus",hasDeletePermission:"hasDeletePermission"},outputs:{emitUpdate:"emitUpdate"},decls:23,vars:14,consts:[["id","project-tasks","role","tabpanel",1,"cl-tab-pane","cl-active"],[1,"cl-pb-2","cl-pb-lg-3"],[1,"cl-row","cl-align-items-center"],[1,"cl-col-lg-custom-4","cl-mr-auto","cl-mb-2","cl-mb-lg-custom-0"],[1,"cl-d-flex"],["dropdown","","closeDropdown","",1,"cl-dropdown","cl-hover-pointer","cl-d-inline-block"],["role","button","closeDropdown","",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle","cl-text-left"],["class","cl-dropdown-menu",4,"dropdownContent"],[1,"cl-form-group","cl-mb-2","cl-mb-lg-custom-0","cl-ml-2","cl-w-100"],["type","text",1,"cl-form-control",3,"ngModel","placeholder","ngModelChange"],["class","cl-col-lg-custom-3",4,"ngIf"],[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],["class","cl-table cl-table-bordered cl-remove-cell-borders cl-text-gray-9 cl-project-table-tasks","data-toggle-column","last",4,"ngIf"],[1,"cl-mt-2","cl-mt-lg-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],["deleteModal",""],[1,"cl-dropdown-menu"],["class","cl-dropdown-item","closeDropdown","",3,"cl-active","click",4,"ngFor","ngForOf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[1,"cl-col-lg-custom-3"],[1,"cl-form-row"],[1,"cl-col"],["type","text","autocomplete","off","name","taskName",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],[1,"cl-col-auto"],["type","submit",1,"cl-btn","cl-btn-primary",3,"click","keyup.enter"],["data-toggle-column","last",1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-9","cl-project-table-tasks"],["tasks-table-header","",3,"sortOrder","sortBy","showEstimate","isDesktop","currency","estimateType","isPerMonth","workspace","taskColumns","onChangeSortOrder","onChangeSortColumn","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-row-hover-shadow"],["tasks-table-row","",3,"task","allAssigneesOfProject","isDesktop","labels","hasEditPermission","hasDeletePermission","taskColumns","isProjectManager","isAdminOrOwner","project","expandAll","limit","usersAndGroups","emitDelete","emitUpdate","emitHourlyRate","emitCostRate","filterChanged","assigneesChanged"],[3,"title","btnText","showConfirmation","inProgress","onDelete","onClose"],["class","cl-text-break cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],[1,"cl-text-muted","cl-cut-text-wrap"],[1,"cl-text-break","cl-alert","cl-alert-warning","cl-justify-content-center"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"div",1),f.Xb(2,"div",2),f.Xb(3,"div",3),f.Xb(4,"div",4),f.Xb(5,"div",5),f.Xb(6,"div",6),f.Zc(7),f.Wb(),f.Xc(8,br,2,1,"div",7),f.Wb(),f.Xb(9,"div",8),f.Xb(10,"input",9),f.jc("ngModelChange",(function(){return t.searchChanged()}))("ngModelChange",(function(e){return t.name=e})),f.oc(11,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xc(12,fr,10,7,"div",10),f.Wb(),f.Wb(),f.Xb(13,"div",11),f.Xb(14,"div",12),f.Xb(15,"span",13),f.Zc(16),f.oc(17,"translate"),f.Wb(),f.Wb(),f.Wb(),f.Xc(18,gr,6,14,"table",14),f.Xb(19,"div",15),f.Xb(20,"pager",16),f.jc("pageChanged",(function(e){return t.setPagination(e)}))("limitChanged",(function(e){return t.setPagination(e)})),f.Wb(),f.Wb(),f.Wb(),f.Xc(21,Er,7,15,"ng-template",null,17,f.Yc)),2&e&&(f.Cb(7),f.bd(" ",t.taskStatus.label," "),f.Cb(3),f.wc("ngModel",t.name)("placeholder",f.pc(11,10,"PROJECTS.PROJECTS_TABLE.SEARCH_PLACEHOLDER")),f.Cb(2),f.wc("ngIf",t.hasEditPermission||t.isProjectManagerForThisProject),f.Cb(4),f.bd(" ",f.pc(17,12,"GLOBAL.TASKS_LABEL")," "),f.Cb(2),f.wc("ngIf",t.filteredTasks),f.Cb(2),f.wc("visible",t.filteredTasks&&t.filteredTasks.length>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.filteredTasks&&t.filteredTasks.length))},directives:[w.a,S.a,L.c,L.s,L.v,C.u,F.a,C.t,L.I,L.t,L.u,Ms,dr,hr.a],pipes:[v.e,$t.a],encapsulation:2,changeDetection:0}),e})();function Sr(e,t){1&e&&f.Sb(0,"img",29)}function yr(e,t){if(1&e&&(f.Xb(0,"p",30),f.Zc(1),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" ",e.project.client.name," ")}}function Or(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",41),f.jc("click",(function(){return f.Oc(e),f.nc(4).router.navigateByUrl("upgrade")})),f.Zc(1),f.oc(2,"translate"),f.Wb(),f.Zc(3),f.oc(4,"translate")}2&e&&(f.Cb(1),f.bd(" ",f.pc(2,2,"GLOBAL.UPGRADE_BTN")," "),f.Cb(2),f.bd(" ",f.pc(4,4,"PROJECTS.SHARED.UPGRADE_MESSAGE.PART_2")," "))}function Ar(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",42,43),f.jc("click",(function(){f.Oc(e);const t=f.Lc(1);return f.nc(4).setAsTemplate(t)})),f.Zc(2),f.oc(3,"translate"),f.Wb()}if(2&e){f.nc();const e=f.Lc(3),t=f.nc(3);f.wc("ngbPopover",e),f.Db("closeDropdown",t.hasProjectTemplateFeature?"":null),f.Cb(2),f.bd(" ",f.pc(3,3,t.project.isTemplate?"PROJECTS.SHARED.DONT_USE_AS_TEMPLATE_LABEL":"PROJECTS.SHARED.SET_AS_TEMPLATE_LABEL")," ")}}function kr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"a",39),f.jc("click",(function(){f.Oc(e);const t=f.nc(4),i=f.Lc(2);return t.openModal(i)})),f.Zc(1),f.oc(2,"translate"),f.Wb()}2&e&&(f.Cb(1),f.bd(" ",f.pc(2,1,"GLOBAL.DELETE_BTN")," "))}function Tr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div",35),f.Xb(1,"div",36),f.Xc(2,Or,5,6,"ng-template",null,37,f.Yc),f.Xc(4,Ar,4,5,"a",38),f.Xb(5,"a",39),f.jc("click",(function(){return f.Oc(e),f.nc(3).archiveProject()})),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Xc(8,kr,3,3,"a",40),f.Wb(),f.Wb()}if(2&e){const e=f.nc(3);f.Cb(4),f.wc("ngIf",e.hasCreatePermissions),f.Cb(2),f.bd(" ",f.pc(7,3,e.project.archived?"GLOBAL.RESTORE_LABEL":"GLOBAL.ARCHIVE_LABEL")," "),f.Cb(2),f.wc("ngIf",e.project.archived)}}function Dr(e,t){1&e&&(f.Xb(0,"div",31),f.Xb(1,"button",32),f.Sb(2,"img",33),f.Wb(),f.Xc(3,Tr,9,5,"div",34),f.Wb())}function Ir(e,t){if(1&e){const e=f.Yb();f.Xb(0,"li",19),f.Xb(1,"a",44),f.jc("click",(function(){return f.Oc(e),f.nc(2).showTab("status")})),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.Hb("cl-active","status"===e.fragment),f.Cb(1),f.bd(" ",f.pc(3,3,"GLOBAL.STATUS_LABEL")," ")}}function _r(e,t){if(1&e){const e=f.Yb();f.Xb(0,"li",19),f.Xb(1,"a",45),f.jc("click",(function(){return f.Oc(e),f.nc(2).showTab("note")})),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.Hb("cl-active","note"===e.fragment),f.Cb(1),f.bd(" ",f.pc(3,3,"GLOBAL.NOTE_LABEL")," ")}}function Rr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"li",19),f.Xb(1,"a",46),f.jc("click",(function(){return f.Oc(e),f.nc(2).showTab("settings")})),f.Zc(2),f.oc(3,"translate"),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.Hb("cl-active","settings"===e.fragment),f.Cb(1),f.bd(" ",f.pc(3,3,"PROJECTS.EDIT_PROJECT_PAGE.PROJECT_SETTINGS")," ")}}function Lr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"edit-project-access",47),f.jc("membershipsChanged",(function(t){return f.Oc(e),f.nc(2).updateMembershipsFromProject(t)}))("projectManagersUpdated",(function(t){return f.Oc(e),f.nc(2).updatedProjectManagers(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("projectManagerIds",e.projectManagerIds)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)("adminIds",e.adminIds)("ownerIds",e.ownerIds)}}function xr(e,t){if(1&e&&(f.Xb(0,"div"),f.Sb(1,"edit-project-status",48),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("projectId",e.project.id)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)}}function Pr(e,t){if(1&e&&(f.Xb(0,"div"),f.Sb(1,"edit-project-note",49),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("hasEditPermission",e.hasEditPermission)}}function jr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"edit-project-settings",50),f.jc("emitUpdate",(function(t){return f.Oc(e),f.nc(2).updateProject(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("workspace",e.workspace)("hasEditPermission",e.hasEditPermission)("canSeeRates",e.canSeeRates)}}function Mr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"div"),f.Xb(1,"edit-project-tasks",51),f.jc("emitUpdate",(function(t){return f.Oc(e),f.nc(2).updateProject(t)})),f.Wb(),f.Wb()}if(2&e){const e=f.nc(2);f.Cb(1),f.wc("project",e.project)("canSeeRates",e.canSeeRates)("canSeeProjectStatus",e.canSeeProjectStatus)("hasDeletePermission",e.hasEditPermission)("hasEditPermission",e.hasEditPermission||!e.workspace.onlyAdminsCreateTask)}}function Xr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"main",2),f.Xb(1,"div",3),f.Xb(2,"div",4),f.Xb(3,"div",5),f.Xb(4,"div",6),f.Xb(5,"a",7),f.jc("click",(function(){return f.Oc(e),f.nc().router.navigate(["/projects"])})),f.Zc(6),f.oc(7,"translate"),f.Wb(),f.Xb(8,"h1",8),f.Zc(9),f.Xc(10,Sr,1,0,"img",9),f.Wb(),f.Xc(11,yr,2,1,"p",10),f.Wb(),f.Xb(12,"div",11),f.Xb(13,"div",12),f.Xb(14,"div",13),f.Xb(15,"button",14),f.jc("click",(function(){return f.Oc(e),f.nc().toggleFavorite()})),f.Sb(16,"img",15),f.Wb(),f.Wb(),f.Xc(17,Dr,4,0,"div",16),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(18,"div",17),f.Xb(19,"ul",18),f.Xb(20,"li",19),f.Xb(21,"a",20),f.jc("click",(function(){return f.Oc(e),f.nc().showTab("tasks")})),f.Zc(22),f.oc(23,"translate"),f.Wb(),f.Wb(),f.Xb(24,"li",19),f.Xb(25,"a",21),f.jc("click",(function(){return f.Oc(e),f.nc().showTab("access")})),f.Zc(26),f.oc(27,"translate"),f.Wb(),f.Wb(),f.Xc(28,Ir,4,5,"li",22),f.Xc(29,_r,4,5,"li",22),f.Xc(30,Rr,4,5,"li",22),f.Wb(),f.Wb(),f.Xb(31,"div",23),f.Xb(32,"div",24),f.Xb(33,"div",25),f.Vb(34,26),f.Xc(35,Lr,2,6,"div",27),f.Xc(36,xr,2,3,"div",27),f.Xc(37,Pr,2,2,"div",27),f.Xc(38,jr,2,4,"div",27),f.Xc(39,Mr,2,5,"div",28),f.Ub(),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){const e=f.nc();f.Cb(6),f.bd(" ",f.pc(7,20,"GLOBAL.PROJECTS_LABEL")," "),f.Cb(3),f.bd(" ",e.project.name," "),f.Cb(1),f.wc("ngIf",e.project.isTemplate),f.Cb(1),f.wc("ngIf",e.project.client),f.Cb(5),f.wc("src",e.project.favorite?"assets/images/ui-icons/favorites-active.svg":"assets/images/ui-icons/favorites-normal.svg",f.Qc),f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(4),f.Hb("cl-active","tasks"===e.fragment),f.Cb(1),f.bd(" ",f.pc(23,22,"GLOBAL.TASKS_LABEL")," "),f.Cb(3),f.Hb("cl-active","access"===e.fragment),f.Cb(1),f.bd(" ",f.pc(27,24,"GLOBAL.ACCESS_LABEL")," "),f.Cb(2),f.wc("ngIf",e.canSeeProjectStatus),f.Cb(1),f.wc("ngIf",e.hasEditPermission||e.project.note),f.Cb(1),f.wc("ngIf",e.hasEditPermission),f.Cb(4),f.wc("ngSwitch",e.fragment),f.Cb(1),f.wc("ngSwitchCase","access"),f.Cb(1),f.wc("ngSwitchCase","status"),f.Cb(1),f.wc("ngSwitchCase","note"),f.Cb(1),f.wc("ngSwitchCase","settings")}}const Fr=function(e){return{projectName:e}};function Wr(e,t){if(1&e&&(f.Xb(0,"span",57),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" ",f.qc(2,1,"PROJECTS.SHARED.PROJECT_TIME_INFO_LOSS_WARNING",f.Bc(4,Fr,"'"+e.project.name+"'"))," ")}}function Br(e,t){if(1&e&&(f.Xb(0,"p",58),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" ",f.qc(2,1,"PROJECTS.SHARED.TIME_ENTRIES_INFO_LOSS_WARNING",f.Bc(4,Fr,e.project.name))," ")}}function Nr(e,t){if(1&e&&(f.Xb(0,"p",58),f.Zc(1),f.oc(2,"translate"),f.Wb()),2&e){const e=f.nc(2);f.Cb(1),f.bd(" ",f.qc(2,1,"PROJECTS.SHARED.TIME_ENTRIES_AND_EXPENSES_INFO_LOSS_WARNING",f.Bc(4,Fr,e.project.name))," ")}}function Gr(e,t){if(1&e){const e=f.Yb();f.Xb(0,"delete-confirm-modal",52),f.jc("onDelete",(function(){f.Oc(e);const i=t.$implicit;return f.nc().deleteProject(i)}))("onClose",(function(i){return f.Oc(e),t.$implicit.close(i)})),f.oc(1,"translate"),f.oc(2,"translate"),f.Xb(3,"p",53),f.Zc(4),f.oc(5,"translate"),f.Wb(),f.Xc(6,Wr,3,6,"span",54),f.Xc(7,Br,3,6,"p",55),f.Xc(8,Nr,3,6,"ng-template",null,56,f.Yc),f.Wb()}if(2&e){const e=f.Lc(9),t=f.nc();f.wc("title",f.pc(1,8,"GLOBAL.DELETE_BTN"))("showConfirmation",t.workspace.timeApprovalEnabled)("btnText",f.pc(2,10,"GLOBAL.DELETE_BTN"))("inProgress",t.inProgress),f.Cb(4),f.bd(" ",f.qc(5,12,"PROJECTS.EDIT_PROJECT_PAGE.DELETE_PROJECT_WARNING",f.Bc(15,Fr,t.project.name))," "),f.Cb(2),f.wc("ngIf",t.workspace.timeApprovalEnabled),f.Cb(1),f.wc("ngIf",!t.workspace.expensesEnabled)("ngIfElse",e)}}let Ur=(()=>{class e{constructor(e,t,i,n,r,o,a,c,l,u,d,h){this.router=e,this.route=t,this.projectService=i,this.workspaceService=n,this.userService=r,this.systemSettingsService=o,this.authService=a,this.modalService=c,this.loader=l,this.projectsCommunicationService=u,this.cd=d,this.translate=h,this.fragment="tasks",this.unsubscribe$=new s.a}ngOnInit(){this.route.fragment.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.projectId&&"tasks"===e&&this.getProject(),this.fragment=e||"tasks"}),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasProjectTemplateFeature=this.workspace.hasFeature(l.a.PROJECT_TEMPLATES),this.user=this.authService.getUser(),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.projectId=this.router.url.split("/")[2],this.hasCreatePermissions=this.isAdminOrOwner||!this.workspace.onlyAdminsCreateProject,this.canSeeRates=this.isAdminOrOwner||!this.workspace.onlyAdminsSeeBillableRates,this.getProject(),this.getProjectPermissions(),this.subscribeToDeletedUser()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}updateMembershipsFromProject(e){this.project.memberships=e.memberships}getProject(){this.projectService.getProject(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{"status"===this.fragment&&this.loader.show("GLOBAL.LOADER_LOADING"),this.project=new o.a(e),this.cd.detectChanges()})}getProjectPermissions(){this.projectService.getAllAuthorizationsForProject(this.projectId).pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.projectManagerIds=e.filter(e=>e.name===p.a.PROJECT_MANAGER).map(e=>e.userId),this.adminIds=e.filter(e=>e.name===p.a.ADMIN).map(e=>e.userId),this.ownerIds=e.filter(e=>e.name===p.a.OWNER).map(e=>e.userId),this.hasEditPermission=this.isAdminOrOwner||this.projectManagerIds.indexOf(this.user.id)>-1,this.canSeeProjectStatus=this.hasEditPermission||!this.workspace.onlyAdminsSeeProjectStatus,(!this.hasEditPermission&&"settings"===this.fragment||!this.canSeeProjectStatus&&"status"===this.fragment)&&this.router.navigate([],{fragment:"tasks"}),this.cd.detectChanges()})}toggleFavorite(){this.project.favorite=!this.project.favorite,this.project.favorite?this.projectService.makeProjectFavorite(this.project):this.projectService.removeProjectAsFavorite(this.project.id)}setAsTemplate(e){this.hasProjectTemplateFeature?(this.project.isTemplate=!this.project.isTemplate,this.projectService.updateIsProjectTemplate(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe()):e.isOpen()?e.close():e.open()}archiveProject(){this.project.archived=!this.project.archived,this.projectService.updateProject(this.project).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.router.navigate(["/projects"])})}deleteProject(e){this.inProgress=!0,this.projectService.deleteProject(this.project.id).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{e.close(),this.inProgress=!1,this.router.navigate(["/projects"])},()=>this.inProgress=!1)}openModal(e){this.modalService.open(e,{centered:!0})}showTab(e){this.router.navigate([],{fragment:e,queryParams:{}})}updateProject(e){this.getProject()}updatedProjectManagers(e){this.projectManagerIds=e,this.cd.detectChanges()}subscribeToDeletedUser(){this.projectsCommunicationService.removedUserFromProject$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{const t=e===this.authService.getUser().id;!this.isAdminOrOwner&&t&&(this.project.public?this.getProjectPermissions():this.router.navigate(["/projects"]))})}}return e.\u0275fac=function(t){return new(t||e)(f.Rb(m.d),f.Rb(m.a),f.Rb(r.a),f.Rb(u.a),f.Rb(a.a),f.Rb(h.a),f.Rb(c.a),f.Rb(g.q),f.Rb(d.a),f.Rb(b.a),f.Rb(f.h),f.Rb(v.f))},e.\u0275cmp=f.Lb({type:e,selectors:[["edit-project"]],decls:3,vars:1,consts:[["class","cl-page-wrapper",4,"ngIf"],["deleteModal",""],[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-end"],[1,"cl-col-lg-8"],[1,"cl-d-inline-block","cl-mb-2","cl-d-print-none",3,"click"],[1,"cl-mb-2","cl-mb-lg-0"],["src","assets/images/ui-icons/template.svg","class","cl-d-print-none",4,"ngIf"],["class","cl-mb-3 cl-mb-lg-0 cl-text-gray-6",4,"ngIf"],[1,"cl-col-lg-4"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-lg-end"],[1,"cl-page-header-action","cl-d-print-none"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-btn-fixed-40",3,"click"],[3,"src"],["class","cl-page-header-action cl-d-print-none","dropdown","",4,"ngIf"],[1,"cl-scroll-tabs-wrapper"],["tabs","","role","tablist",1,"cl-nav","cl-nav-tabs","cl-m-0","cl-scroll-tabs"],[1,"cl-nav-item"],["role","tab","data-cy","edit-tasks-project",1,"cl-nav-link",3,"click"],["role","tab","data-cy","edit-access-project",1,"cl-nav-link",3,"click"],["class","cl-nav-item",4,"ngIf"],[1,"cl-card"],[1,"cl-card-body"],["id","nav-tabContent",1,"cl-tab-content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["src","assets/images/ui-icons/template.svg",1,"cl-d-print-none"],[1,"cl-mb-3","cl-mb-lg-0","cl-text-gray-6"],["dropdown","",1,"cl-page-header-action","cl-d-print-none"],["type","button","role","button","closeDropdown","",1,"cl-btn","cl-btn-outline-light","cl-btn-fixed-40","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["class","cl-dropdown-menu cl-dropdown-menu-right cl-md-down-l-0",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right","cl-md-down-l-0"],[1,"cl-scroll-area"],["popContent",""],["class","cl-dropdown-item","closeDropdown","","triggers","manual","placement","left","container","body",3,"ngbPopover","click",4,"ngIf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],[3,"click"],["closeDropdown","","triggers","manual","placement","left","container","body",1,"cl-dropdown-item",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["role","tab","data-cy","edit-status-project",1,"cl-nav-link",3,"click"],["role","tab","data-cy","edit-note-project",1,"cl-nav-link",3,"click"],["role","tab","data-cy","edit-settings-project",1,"cl-nav-link",3,"click"],[3,"project","projectManagerIds","hasEditPermission","canSeeRates","adminIds","ownerIds","membershipsChanged","projectManagersUpdated"],[3,"projectId","hasEditPermission","canSeeRates"],[3,"project","hasEditPermission"],[3,"project","workspace","hasEditPermission","canSeeRates","emitUpdate"],[3,"project","canSeeRates","canSeeProjectStatus","hasDeletePermission","hasEditPermission","emitUpdate"],[3,"title","showConfirmation","btnText","inProgress","onDelete","onClose"],[1,"cl-h2","cl-cut-text-wrap"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],["class","cl-text-muted cl-cut-text-wrap",4,"ngIf","ngIfElse"],["warningWithExpense",""],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"],[1,"cl-text-muted","cl-cut-text-wrap"]],template:function(e,t){1&e&&(f.Xc(0,Xr,40,26,"main",0),f.Xc(1,Gr,10,17,"ng-template",null,1,f.Yc)),2&e&&f.wc("ngIf",t.project)},directives:[C.u,E.a,C.y,C.z,C.A,w.a,S.a,g.M,lt,xi,Zi,Es,wr,hr.a],pipes:[v.e],encapsulation:2,changeDetection:0}),e})()},"1YN2":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("XNiG"),r=i("Kj3r"),o=i("1G5W"),a=i("PW4C"),c=i("qb1n");let l=(()=>{class e{constructor(e,t,i,r){this.renderer=e,this.resizeableService=t,this.uiSettingsService=i,this.elementRef=r,this.resizeDebouncer$=new s.a,this.unsubscribe$=new s.a,this.onResize=new n.n,this.isResizeable=!0,this.resizeableClass="cl-scroll-area",this.minHeight=100,this.maxHeight=600,this.resizeableName=a.b.RESIZEABLE_PICKER_DIMENSIONS,this._resizeToLeft=!1,this.mouseResizeClass="cl-mouse-resizer",this.start=e=>{try{this.emit(!0),e.preventDefault(),this.originalWidth=parseFloat(getComputedStyle(this.rootElement,null).getPropertyValue("width").replace("px","")),this.originalHeight=parseFloat(getComputedStyle(this.element,null).getPropertyValue("height").replace("px","")),this.originalMouseX=e.pageX,this.originalMouseY=e.pageY}catch(e){}this.listenWindowMouseMove=this.renderer.listen("window","mousemove",this.resize),this.listenWindowMouseUp=this.renderer.listen("window","mouseup",this.stopResize)},this.resize=e=>{try{if(e.preventDefault(),this.resizeBtn.classList.contains(this.mouseResizeClass)){const t=this.element.getBoundingClientRect().height;t<this.maxHeight&&(this.element.style.maxHeight=t+10+"px"),this.isSizeChanged=!0;const i=this.originalHeight+(e.pageY-this.originalMouseY);this.rootElement.style.width=(this.resizeToLeft?this.originalWidth-(e.pageX-this.originalMouseX):this.originalWidth+(e.pageX-this.originalMouseX))+"px",i>this.minHeight&&(this.element.style.height=i+"px")}}catch(e){}},this.stopResize=e=>{try{if(e.preventDefault(),this.listenWindowMouseMove(),this.listenWindowMouseUp(),this.isSizeChanged){this.isSizeChanged=!1;const e=this.element.getBoundingClientRect();this.uiSettingsService.setSettings(this.resizeableName,{width:e.width,height:e.height}),setTimeout(()=>{this.emit(!1)})}}catch(e){}}}set resizeToLeft(e){this._resizeToLeft=e,this.mouseResizeClass=this.resizeToLeft?"cl-mouse-resizer-left":"cl-mouse-resizer"}get resizeToLeft(){return this._resizeToLeft}ngOnInit(){if(this.isResizeable){this.resizeDebouncer$.pipe(Object(r.a)(80),Object(o.a)(this.unsubscribe$)).subscribe(()=>this.initDimensions());try{this.resizeBtn=this.renderer.createElement("div"),this.resizeBtn.classList.add(this.mouseResizeClass),this.rootElement=this.elementRef.nativeElement,setTimeout(()=>{this.element=this.resizeableClass?this.rootElement.getElementsByClassName(this.resizeableClass)[0]:this.rootElement},10),this.renderer.appendChild(this.elementRef.nativeElement,this.resizeBtn),setTimeout(()=>{this.initDimensions(),this.listenButtonMouseDown=this.renderer.listen(this.resizeBtn,"mousedown",this.start)},10)}catch(e){}}}ngOnDestroy(){this.removeListeners(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onWindowResize(e){this.resizeDebouncer$.next()}initDimensions(){try{const e=this.uiSettingsService.getSettings(this.resizeableName),t=this.rootElement.getBoundingClientRect(),i=window.innerWidth,n=t.left,s=t.right,r=i<500?10:30;this.rootElement.style.width="360px";let o=t.width;const a=i-(this.resizeToLeft?i-s:n)-r;o<300&&(o=300),o>a&&(o=a),this.rootElement.style.minWidth=o+"px",this.rootElement.style.maxWidth=a+"px",this.rootElement.style.zIndex="1031";let{width:c,height:l}=e;c=c>a?a:c,c=c<o?o:c,this.rootElement.style.width=c+"px",l=l>this.maxHeight?this.maxHeight:l,l=l<this.minHeight?this.minHeight:l,this.element.style.maxHeight=l+"px"}catch(e){}}emit(e){this.resizeableService.isResizing=e,this.onResize.emit(e)}removeListeners(){this.listenButtonMouseDown&&this.listenButtonMouseDown(),this.listenWindowMouseMove&&this.listenWindowMouseMove(),this.listenWindowMouseUp&&this.listenWindowMouseUp()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.F),n.Rb(c.a),n.Rb(a.a),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["resizeable"],["","resizeable",""]],hostBindings:function(e,t){1&e&&n.jc("resize",(function(e){return t.onWindowResize(e)}),!1,n.Nc)},inputs:{isResizeable:"isResizeable",resizeableClass:"resizeableClass",minHeight:"minHeight",maxHeight:"maxHeight",resizeableName:"resizeableName",resizeToLeft:"resizeToLeft"},outputs:{onResize:"onResize"}}),e})()},"1k8b":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("XNiG"),s=i("PqYM"),r=i("wd/R"),o=i("fXoL");let a=(()=>{class e{constructor(e){this.ngZone=e,this.changeDayTriggerSubject$=new n.a;const t=r().add(1,"days").startOf("day").add(1,"seconds").diff(r());this.ngZone.runOutsideAngular(()=>{Object(s.a)(t,864e5).subscribe(()=>{this.ngZone.run(()=>{this.changeDayTriggerSubject$.next(!0)})})})}get changeDayTrigger$(){return this.changeDayTriggerSubject$.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(o.fc(o.z))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"1kSV":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ii})),i.d(t,"b",(function(){return xi})),i.d(t,"c",(function(){return ji})),i.d(t,"d",(function(){return Yi})),i.d(t,"e",(function(){return Xi})),i.d(t,"f",(function(){return Ki})),i.d(t,"g",(function(){return Cn})),i.d(t,"h",(function(){return vn})),i.d(t,"i",(function(){return Sn})),i.d(t,"j",(function(){return Jn})),i.d(t,"k",(function(){return Kn})),i.d(t,"l",(function(){return zn})),i.d(t,"m",(function(){return Zn})),i.d(t,"n",(function(){return qn})),i.d(t,"o",(function(){return Er})),i.d(t,"p",(function(){return Nn})),i.d(t,"q",(function(){return ds})),i.d(t,"r",(function(){return hs})),i.d(t,"s",(function(){return Rr})),i.d(t,"t",(function(){return vs})),i.d(t,"u",(function(){return ms})),i.d(t,"v",(function(){return gs})),i.d(t,"w",(function(){return Cs})),i.d(t,"x",(function(){return ws})),i.d(t,"y",(function(){return Es})),i.d(t,"z",(function(){return $n})),i.d(t,"A",(function(){return Is})),i.d(t,"B",(function(){return ys})),i.d(t,"C",(function(){return Os})),i.d(t,"D",(function(){return As})),i.d(t,"E",(function(){return ks})),i.d(t,"F",(function(){return Ts})),i.d(t,"G",(function(){return Ds})),i.d(t,"H",(function(){return Di})),i.d(t,"I",(function(){return Ti})),i.d(t,"J",(function(){return Ai})),i.d(t,"K",(function(){return ki})),i.d(t,"L",(function(){return _i})),i.d(t,"M",(function(){return Fs})),i.d(t,"N",(function(){return js})),i.d(t,"O",(function(){return Ws})),i.d(t,"P",(function(){return Ns})),i.d(t,"Q",(function(){return Ni})),i.d(t,"R",(function(){return Bi})),i.d(t,"S",(function(){return Hs})),i.d(t,"T",(function(){return Hi})),i.d(t,"U",(function(){return qs})),i.d(t,"V",(function(){return Ks})),i.d(t,"W",(function(){return Zs})),i.d(t,"X",(function(){return Js})),i.d(t,"Y",(function(){return lr})),i.d(t,"Z",(function(){return pr})),i.d(t,"ab",(function(){return hr})),i.d(t,"bb",(function(){return vr})),i.d(t,"cb",(function(){return fr})),i.d(t,"db",(function(){return Cr})),i.d(t,"eb",(function(){return Dr}));var n=i("fXoL"),s=i("ofXK"),r=i("3Pt+"),o=i("XNiG"),a=i("2Vo4"),c=i("itXk"),l=i("PqYM"),u=i("HDdC"),d=i("KqfI");const h=new u.a(d.a);var p=i("xgIS"),b=i("VRyK"),f=i("DH7j"),m=i("yCtX"),g=i("l7GE"),v=i("ZUHj");class C{call(e,t){return t.subscribe(new E(e))}}class E extends g.a{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let i=0;i<t&&!this.hasFirst;i++){let t=e[i],n=Object(v.a)(this,t,t,i);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}}notifyNext(e,t,i,n,s){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==i){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}var w=i("lJxs"),S=i("JX91"),y=i("/uUt"),O=i("eIep"),A=i("1G5W"),k=i("pLZG"),T=i("IzEk"),D=i("vkgz");function I(...e){return t=>{let i;return"function"==typeof e[e.length-1]&&(i=e.pop()),t.lift(new _(e,i))}}class _{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new R(e,this.observables,this.project))}}class R extends g.a{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const n=t.length;this.values=new Array(n);for(let s=0;s<n;s++)this.toRespond.push(s);for(let s=0;s<n;s++){let e=t[s];this.add(Object(v.a)(this,e,e,s))}}notifyNext(e,t,i,n,s){this.values[i]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(i);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}var L=i("D0XW"),x=i("mlxB"),P=i("7o/Q"),j=i("WMd4");function M(e,t=L.a){const i=Object(x.a)(e)?+e-t.now():Math.abs(e);return e=>e.lift(new X(i,t))}class X{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new F(e,this.delay,this.scheduler))}}class F extends P.a{constructor(e,t,i){super(e),this.delay=t,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,i=t.queue,n=e.scheduler,s=e.destination;for(;i.length>0&&i[0].time-n.now()<=0;)i.shift().notification.observe(s);if(i.length>0){const t=Math.max(0,i[0].time-n.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(F.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,i=new W(t.now()+this.delay,e);this.queue.push(i),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(j.a.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(j.a.createComplete()),this.unsubscribe()}}class W{constructor(e,t){this.time=e,this.notification=t}}var B=i("w1tV");function N(e,t){}function G(e,t){if(1&e&&(n.Xb(0,"button",3),n.Zc(1),n.Xc(2,N,0,0,"ng-template",4),n.Wb()),2&e){const e=t.$implicit;n.wc("ngbPanelToggle",e),n.Cb(1),n.bd(" ",e.title,""),n.Cb(1),n.wc("ngTemplateOutlet",null==e.titleTpl?null:e.titleTpl.templateRef)}}function U(e,t){}function V(e,t){}function H(e,t){if(1&e&&(n.Xb(0,"div",8),n.Xb(1,"div",9),n.Xc(2,V,0,0,"ng-template",4),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit;n.Hb("show",e.isOpen),n.xc("id",e.id),n.Db("aria-labelledby",e.id+"-header"),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}const Y=function(e,t){return{$implicit:e,opened:t}};function $(e,t){if(1&e&&(n.Xb(0,"div"),n.Xb(1,"div",5),n.Xc(2,U,0,0,"ng-template",6),n.Wb(),n.Xc(3,H,3,5,"div",7),n.Wb()),2&e){const e=t.$implicit,i=n.nc(),s=n.Lc(1);n.Eb("card "+(e.cardClass||"")),n.Cb(1),n.Eb("card-header "+(e.type?"bg-"+e.type:i.type?"bg-"+i.type:"")),n.yc("id","",e.id,"-header"),n.Cb(1),n.wc("ngTemplateOutlet",(null==e.headerTpl?null:e.headerTpl.templateRef)||s)("ngTemplateOutletContext",n.Cc(8,Y,e,e.isOpen)),n.Cb(1),n.wc("ngIf",!i.destroyOnHide||e.isOpen)}}const z=["aria-label",$localize`:@@ngb.alert.closef4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c87819314041543176992:Close`];function Z(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",1),n.dc(1,z),n.jc("click",(function(){return n.Oc(e),n.nc().closeHandler()})),n.Xb(2,"span",2),n.Zc(3,"\xd7"),n.Wb(),n.Wb()}}const K=["*"];function q(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",7),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(2);return s.select(i.id,s.NgbSlideEventSource.INDICATOR)})),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(2);n.Hb("active",e.id===i.activeId),n.wc("id",e.id)}}function J(e,t){if(1&e&&(n.Xb(0,"ol",5),n.Xc(1,q,1,3,"li",6),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",e.slides)}}function Q(e,t){}function ee(e,t){if(1&e&&(n.Xb(0,"div",8),n.Xc(1,Q,0,0,"ng-template",9),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.Hb("active",e.id===i.activeId),n.Cb(1),n.wc("ngTemplateOutlet",e.tplRef)}}var te,ie;function ne(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.prev(t.NgbSlideEventSource.ARROW_LEFT)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,te),n.Wb(),n.Wb()}}function se(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",13),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.next(t.NgbSlideEventSource.ARROW_RIGHT)})),n.Sb(1,"span",14),n.Xb(2,"span",12),n.bc(3,ie),n.Wb(),n.Wb()}}te=$localize`:@@ngb.carousel.previous680d5c75b7fd8d37961083608b9fcdc4167b4c434452427314943113135:Previous`,ie=$localize`:@@ngb.carousel.nextf732c304c7433e5a83ffcd862c3dce709a0f49823885497195825665706:Next`;const re=["defaultDayTemplate"],oe=["content"];function ae(e,t){if(1&e&&n.Sb(0,"div",7),2&e){const e=t.currentMonth,i=t.selected,s=t.disabled,r=t.focused;n.wc("date",t.date)("currentMonth",e)("selected",i)("disabled",s)("focused",r)}}function ce(e,t){if(1&e&&(n.Xb(0,"div",12),n.Zc(1),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc(2);n.Cb(1),n.cd(" ",t.i18n.getMonthFullName(e.number,e.year)," ",t.i18n.getYearNumerals(e.year)," ")}}function le(e,t){if(1&e&&(n.Xb(0,"div",9),n.Xc(1,ce,2,2,"div",10),n.Sb(2,"ngb-datepicker-month",11),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.wc("ngIf","none"===i.navigation||i.displayMonths>1&&"select"===i.navigation),n.Cb(1),n.wc("month",e.firstDate)}}function ue(e,t){if(1&e&&n.Xc(0,le,3,2,"div",8),2&e){const e=n.nc();n.wc("ngForOf",e.model.months)}}function de(e,t){if(1&e){const e=n.Yb();n.Xb(0,"ngb-datepicker-navigation",13),n.jc("navigate",(function(t){return n.Oc(e),n.nc().onNavigateEvent(t)}))("select",(function(t){return n.Oc(e),n.nc().onNavigateDateSelect(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("date",e.model.firstDate)("months",e.model.months)("disabled",e.model.disabled)("showSelect","select"===e.model.navigation)("prevDisabled",e.model.prevDisabled)("nextDisabled",e.model.nextDisabled)("selectBoxes",e.model.selectBoxes)}}function he(e,t){}function pe(e,t){}function be(e,t){1&e&&n.Sb(0,"div",5)}function fe(e,t){if(1&e&&(n.Xb(0,"div",6),n.Zc(1),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.bd(" ",i.i18n.getWeekdayShortName(e)," ")}}function me(e,t){if(1&e&&(n.Xb(0,"div",2),n.Xc(1,be,1,0,"div",3),n.Xc(2,fe,2,1,"div",4),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.datepicker.showWeekNumbers),n.Cb(1),n.wc("ngForOf",e.viewModel.weekdays)}}function ge(e,t){if(1&e&&(n.Xb(0,"div",11),n.Zc(1),n.Wb()),2&e){const e=n.nc(2).$implicit,t=n.nc();n.Cb(1),n.ad(t.i18n.getWeekNumerals(e.number))}}function ve(e,t){}function Ce(e,t){if(1&e&&n.Xc(0,ve,0,0,"ng-template",14),2&e){const e=n.nc().$implicit,t=n.nc(3);n.wc("ngTemplateOutlet",t.datepicker.dayTemplate)("ngTemplateOutletContext",e.context)}}function Ee(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.jc("click",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(3).doSelect(s),i.preventDefault()})),n.Xc(1,Ce,1,2,"ng-template",13),n.Wb()}if(2&e){const e=t.$implicit;n.Hb("disabled",e.context.disabled)("hidden",e.hidden)("ngb-dp-today",e.context.today),n.wc("tabindex",e.tabindex),n.Db("aria-label",e.ariaLabel),n.Cb(1),n.wc("ngIf",!e.hidden)}}function we(e,t){if(1&e&&(n.Xb(0,"div",8),n.Xc(1,ge,2,1,"div",9),n.Xc(2,Ee,2,9,"div",10),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Cb(1),n.wc("ngIf",t.datepicker.showWeekNumbers),n.Cb(1),n.wc("ngForOf",e.days)}}function Se(e,t){1&e&&n.Xc(0,we,3,2,"div",7),2&e&&n.wc("ngIf",!t.$implicit.collapsed)}const ye=["aria-label",$localize`:@@ngb.datepicker.previous-monthc3b08b07b5ab98e7cdcf18df39355690ab7d38848586908745456864217:Previous month`,"title",$localize`:@@ngb.datepicker.previous-monthc3b08b07b5ab98e7cdcf18df39355690ab7d38848586908745456864217:Previous month`],Oe=["aria-label",$localize`:@@ngb.datepicker.next-month4bd046985cfe13040d5ef0cd881edce0968a111a3628374603023447227:Next month`,"title",$localize`:@@ngb.datepicker.next-month4bd046985cfe13040d5ef0cd881edce0968a111a3628374603023447227:Next month`];function Ae(e,t){if(1&e){const e=n.Yb();n.Xb(0,"ngb-datepicker-navigation-select",6),n.jc("select",(function(t){return n.Oc(e),n.nc().select.emit(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("date",e.date)("disabled",e.disabled)("months",e.selectBoxes.months)("years",e.selectBoxes.years)}}function ke(e,t){1&e&&n.Sb(0,"div",0)}function Te(e,t){1&e&&n.Sb(0,"div",0)}function De(e,t){if(1&e&&(n.Xc(0,ke,1,0,"div",8),n.Xb(1,"div",9),n.Zc(2),n.Wb(),n.Xc(3,Te,1,0,"div",8)),2&e){const e=t.$implicit,i=t.index,s=n.nc(2);n.wc("ngIf",i>0),n.Cb(2),n.cd(" ",s.i18n.getMonthFullName(e.number,e.year)," ",s.i18n.getYearNumerals(e.year)," "),n.Cb(1),n.wc("ngIf",i!==s.months.length-1)}}function Ie(e,t){if(1&e&&n.Xc(0,De,4,4,"ng-template",7),2&e){const e=n.nc();n.wc("ngForOf",e.months)}}const _e=["ngbDatepickerDayView",""],Re=["month"],Le=["year"],xe=["aria-label",$localize`:@@ngb.datepicker.select-month1dbc84807f35518112f62e5775d1daebd3d8462b2253869508135064750:Select month`,"title",$localize`:@@ngb.datepicker.select-month1dbc84807f35518112f62e5775d1daebd3d8462b2253869508135064750:Select month`],Pe=["aria-label",$localize`:@@ngb.datepicker.select-year8ceb09d002bf0c5d1cac171dfbffe1805d2b39628852264961585484321:Select year`,"title",$localize`:@@ngb.datepicker.select-year8ceb09d002bf0c5d1cac171dfbffe1805d2b39628852264961585484321:Select year`];function je(e,t){if(1&e&&(n.Xb(0,"option",4),n.Zc(1),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.wc("value",e),n.Db("aria-label",i.i18n.getMonthFullName(e,null==i.date?null:i.date.year)),n.Cb(1),n.ad(i.i18n.getMonthShortName(e,null==i.date?null:i.date.year))}}function Me(e,t){if(1&e&&(n.Xb(0,"option",4),n.Zc(1),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.wc("value",e),n.Cb(1),n.ad(i.i18n.getYearNumerals(e))}}const Xe=["dialog"],Fe=["ngbNavOutlet",""];function We(e,t){}const Be=function(e){return{$implicit:e}};function Ne(e,t){if(1&e&&(n.Xb(0,"div",2),n.Xc(1,We,0,0,"ng-template",3),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Hb("active",e.active),n.wc("id",e.panelDomId),n.Db("role",t.paneRole?t.paneRole:t.nav.roles?"tabpanel":void 0)("aria-labelledby",e.domId),n.Cb(1),n.wc("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)("ngTemplateOutletContext",n.Bc(7,Be,e.active))}}function Ge(e,t){1&e&&n.Xc(0,Ne,2,9,"div",1),2&e&&n.wc("ngIf",t.$implicit.isPanelInDom())}var Ue,Ve,He,Ye;function $e(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,Ue),n.Wb())}function ze(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,Ve),n.Wb())}function Ze(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,He),n.Wb())}function Ke(e,t){1&e&&(n.Xb(0,"span",8),n.bc(1,Ye),n.Wb())}function qe(e,t){1&e&&n.Zc(0,"...")}function Je(e,t){1&e&&(n.Xb(0,"span",10),n.Zc(1,"(current)"),n.Wb())}function Qe(e,t){if(1&e&&(n.Zc(0),n.Xc(1,Je,2,0,"span",9)),2&e){const e=t.$implicit,i=t.currentPage;n.bd(" ",e," "),n.Cb(1),n.wc("ngIf",e===i)}}Ue=$localize`:@@ngb.pagination.first656506dfd46380956a655f919f1498d018f75ca06867721956102594380:`,Ve=$localize`:@@ngb.pagination.previous6e52b6ee77a4848d899dd21b591c6fd499e3aef36479320895410098858:`,He=$localize`:@@ngb.pagination.nextba9cbb4ff311464308a3627e4f1c3345d9fe6d7d5458177150283468089:`,Ye=$localize`:@@ngb.pagination.last49f27a460bc97e7e00be5b37098bfa79884fc7d95277020320267646988:`;const et=["aria-label",$localize`:@@ngb.pagination.first-ariaf2f852318759c6396b5d3d17031d53817d7b38cc2241508602425256033:First`];function tt(e,t){}const it=function(e,t){return{disabled:e,currentPage:t}};function nt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,et),n.jc("click",(function(t){return n.Oc(e),n.nc().selectPage(1),t.preventDefault()})),n.Xc(3,tt,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(1);n.Hb("disabled",e.previousDisabled()),n.Cb(1),n.Db("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplFirst?null:e.tplFirst.templateRef)||t)("ngTemplateOutletContext",n.Cc(6,it,e.previousDisabled(),e.page))}}const st=["aria-label",$localize`:@@ngb.pagination.previous-aria680d5c75b7fd8d37961083608b9fcdc4167b4c434452427314943113135:Previous`];function rt(e,t){}const ot=function(e){return{disabled:e}};function at(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,st),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.selectPage(i.page-1),t.preventDefault()})),n.Xc(3,rt,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(3);n.Hb("disabled",e.previousDisabled()),n.Cb(1),n.Db("tabindex",e.previousDisabled()?"-1":null)("aria-disabled",e.previousDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplPrevious?null:e.tplPrevious.templateRef)||t)("ngTemplateOutletContext",n.Bc(6,ot,e.previousDisabled()))}}function ct(e,t){}const lt=function(e){return{disabled:!0,currentPage:e}};function ut(e,t){if(1&e&&(n.Xb(0,"a",16),n.Xc(1,ct,0,0,"ng-template",13),n.Wb()),2&e){const e=n.nc(2),t=n.Lc(9);n.Cb(1),n.wc("ngTemplateOutlet",(null==e.tplEllipsis?null:e.tplEllipsis.templateRef)||t)("ngTemplateOutletContext",n.Bc(2,lt,e.page))}}function dt(e,t){}const ht=function(e,t,i){return{disabled:e,$implicit:t,currentPage:i}};function pt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",17),n.jc("click",(function(t){n.Oc(e);const i=n.nc().$implicit;return n.nc().selectPage(i),t.preventDefault()})),n.Xc(1,dt,0,0,"ng-template",13),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.nc(),i=n.Lc(11);n.Db("tabindex",t.disabled?"-1":null)("aria-disabled",t.disabled?"true":null),n.Cb(1),n.wc("ngTemplateOutlet",(null==t.tplNumber?null:t.tplNumber.templateRef)||i)("ngTemplateOutletContext",n.Dc(4,ht,t.disabled,e,t.page))}}function bt(e,t){if(1&e&&(n.Xb(0,"li",11),n.Xc(1,ut,2,4,"a",14),n.Xc(2,pt,2,8,"a",15),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.Hb("active",e===i.page)("disabled",i.isEllipsis(e)||i.disabled),n.Db("aria-current",e===i.page?"page":null),n.Cb(1),n.wc("ngIf",i.isEllipsis(e)),n.Cb(1),n.wc("ngIf",!i.isEllipsis(e))}}const ft=["aria-label",$localize`:@@ngb.pagination.next-ariaf732c304c7433e5a83ffcd862c3dce709a0f49823885497195825665706:Next`];function mt(e,t){}function gt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,ft),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.selectPage(i.page+1),t.preventDefault()})),n.Xc(3,mt,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(5);n.Hb("disabled",e.nextDisabled()),n.Cb(1),n.Db("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplNext?null:e.tplNext.templateRef)||t)("ngTemplateOutletContext",n.Cc(6,it,e.nextDisabled(),e.page))}}const vt=["aria-label",$localize`:@@ngb.pagination.last-aria5c729788ba138508aca1bec050b610f7bf81db3e4882268002141858767:Last`];function Ct(e,t){}function Et(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",11),n.Xb(1,"a",12),n.dc(2,vt),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.selectPage(i.pageCount),t.preventDefault()})),n.Xc(3,Ct,0,0,"ng-template",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(7);n.Hb("disabled",e.nextDisabled()),n.Cb(1),n.Db("tabindex",e.nextDisabled()?"-1":null)("aria-disabled",e.nextDisabled()?"true":null),n.Cb(2),n.wc("ngTemplateOutlet",(null==e.tplLast?null:e.tplLast.templateRef)||t)("ngTemplateOutletContext",n.Cc(6,it,e.nextDisabled(),e.page))}}function wt(e,t){if(1&e&&n.Zc(0),2&e){const e=n.nc(2);n.ad(e.title)}}function St(e,t){}function yt(e,t){if(1&e&&(n.Xb(0,"h3",3),n.Xc(1,wt,1,1,"ng-template",null,4,n.Yc),n.Xc(3,St,0,0,"ng-template",5),n.Wb()),2&e){const e=n.Lc(2),t=n.nc();n.Cb(3),n.wc("ngTemplateOutlet",t.isTitleTemplate()?t.title:e)("ngTemplateOutletContext",t.context)}}var Ot;function At(e,t){if(1&e&&(n.Xb(0,"span"),n.bc(1,Ot),n.oc(2,"percent"),n.Wb()),2&e){const e=n.nc();n.Cb(2),n.ec(n.pc(2,1,e.getValue()/e.max)),n.cc(1)}}function kt(e,t){1&e&&n.Zc(0),2&e&&n.ad(100===t.fill?"\u2605":"\u2606")}function Tt(e,t){}function Dt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"span",2),n.Zc(1),n.Wb(),n.Xb(2,"span",3),n.jc("mouseenter",(function(){n.Oc(e);const i=t.index;return n.nc().enter(i+1)}))("click",(function(){n.Oc(e);const i=t.index;return n.nc().handleClick(i+1)})),n.Xc(3,Tt,0,0,"ng-template",4),n.Wb()}if(2&e){const e=t.index,i=n.nc(),s=n.Lc(1);n.Cb(1),n.bd("(",e<i.nextRate?"*":" ",")"),n.Cb(1),n.Wc("cursor",i.readonly||i.disabled?"default":"pointer"),n.Cb(1),n.wc("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||s)("ngTemplateOutletContext",i.contexts[e])}}function It(e,t){}function _t(e,t){if(1&e){const e=n.Yb();n.Xb(0,"li",4),n.Xb(1,"a",5),n.jc("click",(function(i){n.Oc(e);const s=t.$implicit;return n.nc().select(s.id),i.preventDefault()})),n.Zc(2),n.Xc(3,It,0,0,"ng-template",6),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc();n.Cb(1),n.Hb("active",e.id===i.activeId)("disabled",e.disabled),n.wc("id",e.id),n.Db("tabindex",e.disabled?"-1":void 0)("aria-controls",i.destroyOnHide&&e.id!==i.activeId?null:e.id+"-panel")("aria-selected",e.id===i.activeId)("aria-disabled",e.disabled),n.Cb(1),n.bd(" ",e.title,""),n.Cb(1),n.wc("ngTemplateOutlet",(null==e.titleTpl?null:e.titleTpl.templateRef)||null)}}function Rt(e,t){}function Lt(e,t){if(1&e&&(n.Xb(0,"div",8),n.Xc(1,Rt,0,0,"ng-template",6),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Fb("tab-pane ",e.id===t.activeId?"active":null,""),n.yc("id","",e.id,"-panel"),n.Db("aria-labelledby",e.id),n.Cb(1),n.wc("ngTemplateOutlet",(null==e.contentTpl?null:e.contentTpl.templateRef)||null)}}function xt(e,t){if(1&e&&n.Xc(0,Lt,2,6,"div",7),2&e){const e=t.$implicit,i=n.nc();n.wc("ngIf",!i.destroyOnHide||e.id===i.activeId)}}Ot=$localize`:@@ngb.progressbar.valuef8e9a947b9db4252c0e9905765338712f2fd032f3720830768741091151:${"\ufffd0\ufffd"}:INTERPOLATION:`;const Pt=["placeholder",$localize`:@@ngb.timepicker.HHce676ab1d6d98f85c836381cf100a4a91ef95a1f4043638465245303811:HH`,"aria-label",$localize`:@@ngb.timepicker.hours3bbce5fef7e1151da052a4e529453edb340e39128070396816726827304:Hours`],jt=["placeholder",$localize`:@@ngb.timepicker.MM72c8edf6a50068a05bde70991e36b1e881f4ca541647282246509919852:MM`,"aria-label",$localize`:@@ngb.timepicker.minutes41e62daa962947c0d23ded0981975d1bddf0bf385531237363767747080:Minutes`];var Mt,Xt,Ft,Wt;function Bt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeHour(t.hourStep)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,Mt),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Nt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeHour(0-t.hourStep)})),n.Sb(1,"span",13),n.Xb(2,"span",12),n.bc(3,Xt),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Gt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeMinute(t.minuteStep)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,Ft),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Ut(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeMinute(0-t.minuteStep)})),n.Sb(1,"span",13),n.Xb(2,"span",12),n.bc(3,Wt),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Vt(e,t){1&e&&(n.Xb(0,"div",5),n.Zc(1,":"),n.Wb())}Mt=$localize`:@@ngb.timepicker.increment-hourscb74bc1d625a6c1742f0d7d47306cf495780c2185939278348542933629:Increment hours`,Xt=$localize`:@@ngb.timepicker.decrement-hours147c7a19429da7d999e247d22e33fee370b1691b3651829882940481818:Decrement hours`,Ft=$localize`:@@ngb.timepicker.increment-minutesf5a4a3bc05e053f6732475d0e74875ec01c3a348180147720391025024:Increment minutes`,Wt=$localize`:@@ngb.timepicker.decrement-minutesc1a6899e529c096da5b660385d4e77fe1f7ad2717447789825403243588:Decrement minutes`;const Ht=["placeholder",$localize`:@@ngb.timepicker.SSebe38d36a40a2383c5fefa9b4608ffbda08bd4a33628127143071124194:SS`,"aria-label",$localize`:@@ngb.timepicker.seconds4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c8874012390997067175:Seconds`];var Yt,$t,zt,Zt;function Kt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.changeSecond(t.secondStep)})),n.Sb(1,"span",11),n.Xb(2,"span",12),n.bc(3,Yt),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function qt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",10),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.changeSecond(0-t.secondStep)})),n.Sb(1,"span",13),n.Xb(2,"span",12),n.bc(3,$t),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),n.wc("disabled",e.disabled)}}function Jt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",14),n.Xc(1,Kt,4,7,"button",3),n.Xb(2,"input",4),n.dc(3,Ht),n.jc("change",(function(t){return n.Oc(e),n.nc().updateSecond(t.target.value)}))("input",(function(t){return n.Oc(e),n.nc().formatInput(t.target)}))("keydown.ArrowUp",(function(t){n.Oc(e);const i=n.nc();return i.changeSecond(i.secondStep),t.preventDefault()}))("keydown.ArrowDown",(function(t){n.Oc(e);const i=n.nc();return i.changeSecond(0-i.secondStep),t.preventDefault()})),n.Wb(),n.Xc(4,qt,4,7,"button",3),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.spinners),n.Cb(1),n.Hb("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),n.wc("value",e.formatMinSec(null==e.model?null:e.model.second))("readOnly",e.readonlyInputs)("disabled",e.disabled),n.Cb(2),n.wc("ngIf",e.spinners)}}function Qt(e,t){1&e&&n.Sb(0,"div",5)}function ei(e,t){if(1&e&&(n.Vb(0),n.bc(1,zt),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.ec(e.i18n.getAfternoonPeriod()),n.cc(1)}}function ti(e,t){if(1&e&&n.bc(0,Zt),2&e){const e=n.nc(2);n.ec(e.i18n.getMorningPeriod()),n.cc(0)}}function ii(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",15),n.Xb(1,"button",16),n.jc("click",(function(){return n.Oc(e),n.nc().toggleMeridian()})),n.Xc(2,ei,2,1,"ng-container",17),n.Xc(3,ti,1,1,"ng-template",null,18,n.Yc),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(4),t=n.nc();n.Cb(1),n.Hb("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),n.wc("disabled",t.disabled),n.Cb(1),n.wc("ngIf",t.model&&t.model.hour>=12)("ngIfElse",e)}}function ni(e,t){if(1&e&&(n.Xb(0,"strong",3),n.Zc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.ad(e.header)}}Yt=$localize`:@@ngb.timepicker.increment-seconds912322ecee7d659d04dcf494a70e22e49d334b265364772110539092174:Increment seconds`,$t=$localize`:@@ngb.timepicker.decrement-seconds5db47ac104294243a70eb9124fbea9d0004ddf69753633511487974857:Decrement seconds`,zt=$localize`:@@ngb.timepicker.PM8d6e691e10306c1b34c6b26805151aaea320ef7f3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,Zt=$localize`:@@ngb.timepicker.AM69a1f176a93998876952adac57c3bc3863b6105e4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`;const si=["aria-label",$localize`:@@ngb.toast.close-ariaf4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c87819314041543176992:Close`];function ri(e,t){}function oi(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",4),n.Xc(1,ri,0,0,"ng-template",5),n.Xb(2,"button",6),n.dc(3,si),n.jc("click",(function(){return n.Oc(e),n.nc().hide()})),n.Xb(4,"span",7),n.Zc(5,"\xd7"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(1);n.Cb(1),n.wc("ngTemplateOutlet",e.contentHeaderTpl||t)}}function ai(e,t){if(1&e&&(n.Xb(0,"span"),n.Zc(1),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc();n.Eb(t.highlightClass),n.Cb(1),n.ad(e)}}function ci(e,t){if(1&e&&n.Zc(0),2&e){const e=n.nc().$implicit;n.ad(e)}}function li(e,t){if(1&e&&(n.Xc(0,ai,2,3,"span",1),n.Xc(1,ci,1,1,"ng-template",null,2,n.Yc)),2&e){const e=t.odd,i=n.Lc(2);n.wc("ngIf",e)("ngIfElse",i)}}function ui(e,t){if(1&e&&n.Sb(0,"ngb-highlight",2),2&e){const e=t.term;n.wc("result",(0,t.formatter)(t.result))("term",e)}}function di(e,t){}const hi=function(e,t,i){return{result:e,term:t,formatter:i}};function pi(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",3),n.jc("mouseenter",(function(){n.Oc(e);const i=t.index;return n.nc().markActive(i)}))("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc().select(i)})),n.Xc(1,di,0,0,"ng-template",4),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(),r=n.Lc(1);n.Hb("active",i===s.activeIdx),n.wc("id",s.id+"-"+i),n.Cb(1),n.wc("ngTemplateOutlet",s.resultTemplate||r)("ngTemplateOutletContext",n.Dc(5,hi,e,s.term,s.formatter))}}function bi(e){return parseInt(""+e,10)}function fi(e){return null!=e?""+e:""}function mi(e,t,i=0){return Math.max(Math.min(e,t),i)}function gi(e){return"string"==typeof e}function vi(e){return!isNaN(bi(e))}function Ci(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Ei(e){return null!=e}function wi(e){return vi(e)?("0"+e).slice(-2):""}function Si(e,t){return e&&e.className&&e.className.split&&e.className.split(/\s+/).indexOf(t)>=0}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});let yi=(()=>{let e=class{constructor(){this.closeOthers=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Oi=0,Ai=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPanelHeader",""]]}),e})(),ki=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPanelTitle",""]]}),e})(),Ti=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPanelContent",""]]}),e})(),Di=(()=>{let e=class{constructor(){this.disabled=!1,this.id="ngb-panel-"+Oi++,this.isOpen=!1}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["ngb-panel"]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,ki,!1),n.Jb(i,Ai,!1),n.Jb(i,Ti,!1)),2&e&&(n.Kc(s=n.kc())&&(t.titleTpls=s),n.Kc(s=n.kc())&&(t.headerTpls=s),n.Kc(s=n.kc())&&(t.contentTpls=s))},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"}}),e})(),Ii=(()=>{let e=class{constructor(e){this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new n.n,this.type=e.type,this.closeOtherPanels=e.closeOthers}isExpanded(e){return this.activeIds.indexOf(e)>-1}expand(e){this._changeOpenState(this._findPanelById(e),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(e=>this._changeOpenState(e,!0))}collapse(e){this._changeOpenState(this._findPanelById(e),!1)}collapseAll(){this.panels.forEach(e=>{this._changeOpenState(e,!1)})}toggle(e){const t=this._findPanelById(e);t&&this._changeOpenState(t,!t.isOpen)}ngAfterContentChecked(){gi(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(e=>e.isOpen=!e.disabled&&this.activeIds.indexOf(e.id)>-1),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0]),this._updateActiveIds())}_changeOpenState(e,t){if(null!=e&&!e.disabled&&e.isOpen!==t){let i=!1;this.panelChange.emit({panelId:e.id,nextState:t,preventDefault:()=>{i=!0}}),i||(e.isOpen=t,t&&this.closeOtherPanels&&this._closeOthers(e.id),this._updateActiveIds())}}_closeOthers(e){this.panels.forEach(t=>{t.id!==e&&(t.isOpen=!1)})}_findPanelById(e){return this.panels.find(t=>t.id===e)||null}_updateActiveIds(){this.activeIds=this.panels.filter(e=>e.isOpen&&!e.disabled).map(e=>e.id)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(yi))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-accordion"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,Di,!1),2&e&&n.Kc(s=n.kc())&&(t.panels=s)},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(e,t){2&e&&n.Db("aria-multiselectable",!t.closeOtherPanels)},inputs:{activeIds:"activeIds",destroyOnHide:"destroyOnHide",type:"type",closeOtherPanels:["closeOthers","closeOtherPanels"]},outputs:{panelChange:"panelChange"},exportAs:["ngbAccordion"],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"btn","btn-link",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel","class","collapse",3,"id","show",4,"ngIf"],["role","tabpanel",1,"collapse",3,"id"],[1,"card-body"]],template:function(e,t){1&e&&(n.Xc(0,G,3,3,"ng-template",0,1,n.Yc),n.Xc(2,$,4,11,"ng-template",2)),2&e&&(n.Cb(2),n.wc("ngForOf",t.panels))},directives:function(){return[Ai,s.t,_i,s.B,s.u]},encapsulation:2}),e})(),_i=(()=>{let e=class{constructor(e,t){this.accordion=e,this.panel=t}set ngbPanelToggle(e){e&&(this.panel=e)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Ii),n.Rb(Di,9))},e.\u0275dir=n.Mb({type:e,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(e,t){1&e&&n.jc("click",(function(){return t.accordion.toggle(t.panel.id)})),2&e&&(n.ac("disabled",t.panel.disabled),n.Db("aria-expanded",t.panel.isOpen)("aria-controls",t.panel.id),n.Hb("collapsed",!t.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"}}),e})(),Ri=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Li=(()=>{let e=class{constructor(){this.dismissible=!0,this.type="warning"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),xi=(()=>{let e=class{constructor(e,t,i){this._renderer=t,this._element=i,this.close=new n.n,this.dismissible=e.dismissible,this.type=e.type}closeHandler(){this.close.emit()}ngOnChanges(e){const t=e.type;t&&!t.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+t.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+t.currentValue))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Li),n.Rb(n.F),n.Rb(n.l))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert"],hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("alert-dismissible",t.dismissible)},inputs:{dismissible:"dismissible",type:"type"},outputs:{close:"close"},features:[n.Ab],ngContentSelectors:K,decls:2,vars:1,consts:[["type","button","class","close","aria-label","Close",3,"click",4,"ngIf"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(e,t){1&e&&(n.vc(),n.uc(0),n.Xc(1,Z,4,0,"button",0)),2&e&&(n.Cb(1),n.wc("ngIf",t.dismissible))},directives:[s.u],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),e})(),Pi=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),ji=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbButtonLabel",""]],hostVars:8,hostBindings:function(e,t){2&e&&n.Hb("btn",!0)("active",t.active)("disabled",t.disabled)("focus",t.focused)}}),e})();const Mi={provide:r.q,useExisting:Object(n.U)(()=>Xi),multi:!0};let Xi=(()=>{let e=class{constructor(e,t){this._label=e,this._cd=t,this.disabled=!1,this.valueChecked=!0,this.valueUnChecked=!1,this.onChange=e=>{},this.onTouched=()=>{}}set focused(e){this._label.focused=e,e||this.onTouched()}onInputChange(e){const t=e.target.checked?this.valueChecked:this.valueUnChecked;this.onChange(t),this.onTouched(),this.writeValue(t)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._label.disabled=e}writeValue(e){this.checked=e===this.valueChecked,this._label.active=this.checked,this._cd.markForCheck()}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(ji),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbButton","","type","checkbox"]],hostVars:2,hostBindings:function(e,t){1&e&&n.jc("change",(function(e){return t.onInputChange(e)}))("focus",(function(){return t.focused=!0}))("blur",(function(){return t.focused=!1})),2&e&&n.ac("checked",t.checked)("disabled",t.disabled)},inputs:{disabled:"disabled",valueChecked:"valueChecked",valueUnChecked:"valueUnChecked"},features:[n.Bb([Mi])]}),e})();const Fi={provide:r.q,useExisting:Object(n.U)(()=>Bi),multi:!0};let Wi=0,Bi=(()=>{let e=class{constructor(){this._radios=new Set,this._value=null,this.name="ngb-radio-"+Wi++,this.onChange=e=>{},this.onTouched=()=>{}}get disabled(){return this._disabled}set disabled(e){this.setDisabledState(e)}onRadioChange(e){this.writeValue(e.value),this.onChange(e.value)}onRadioValueUpdate(){this._updateRadiosValue()}register(e){this._radios.add(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._disabled=e,this._updateRadiosDisabled()}unregister(e){this._radios.delete(e)}writeValue(e){this._value=e,this._updateRadiosValue()}_updateRadiosValue(){this._radios.forEach(e=>e.updateValue(this._value))}_updateRadiosDisabled(){this._radios.forEach(e=>e.updateDisabled())}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbRadioGroup",""]],hostAttrs:["role","radiogroup"],inputs:{name:"name"},features:[n.Bb([Fi])]}),e})(),Ni=(()=>{let e=class{constructor(e,t,i,n,s){this._group=e,this._label=t,this._renderer=i,this._element=n,this._cd=s,this._value=null,this._group.register(this),this.updateDisabled()}set value(e){this._value=e;const t=e?e.toString():"";this._renderer.setProperty(this._element.nativeElement,"value",t),this._group.onRadioValueUpdate()}set disabled(e){this._disabled=!1!==e,this.updateDisabled()}set focused(e){this._label&&(this._label.focused=e),e||this._group.onTouched()}get checked(){return this._checked}get disabled(){return this._group.disabled||this._disabled}get value(){return this._value}get nameAttr(){return this.name||this._group.name}ngOnDestroy(){this._group.unregister(this)}onChange(){this._group.onRadioChange(this)}updateValue(e){this.value!==e&&this._cd.markForCheck(),this._checked=this.value===e,this._label.active=this._checked}updateDisabled(){this._label.disabled=this.disabled}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Bi),n.Rb(ji),n.Rb(n.F),n.Rb(n.l),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbButton","","type","radio"]],hostVars:3,hostBindings:function(e,t){1&e&&n.jc("change",(function(){return t.onChange()}))("focus",(function(){return t.focused=!0}))("blur",(function(){return t.focused=!1})),2&e&&n.ac("checked",t.checked)("disabled",t.disabled)("name",t.nameAttr)},inputs:{value:"value",disabled:"disabled",name:"name"}}),e})(),Gi=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})(),Ui=(()=>{let e=class{constructor(){this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Vi=0,Hi=(()=>{let e=class{constructor(e){this.tplRef=e,this.id="ngb-slide-"+Vi++}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"}}),e})(),Yi=(()=>{let e=class{constructor(e,t,i,s){this._platformId=t,this._ngZone=i,this._cd=s,this.NgbSlideEventSource=zi,this._destroy$=new o.a,this._interval$=new a.a(0),this._mouseHover$=new a.a(!1),this._pauseOnHover$=new a.a(!1),this._pause$=new a.a(!1),this._wrap$=new a.a(!1),this.slide=new n.n,this.interval=e.interval,this.wrap=e.wrap,this.keyboard=e.keyboard,this.pauseOnHover=e.pauseOnHover,this.showNavigationArrows=e.showNavigationArrows,this.showNavigationIndicators=e.showNavigationIndicators}set interval(e){this._interval$.next(e)}get interval(){return this._interval$.value}set wrap(e){this._wrap$.next(e)}get wrap(){return this._wrap$.value}set pauseOnHover(e){this._pauseOnHover$.next(e)}get pauseOnHover(){return this._pauseOnHover$.value}mouseEnter(){this._mouseHover$.next(!0)}mouseLeave(){this._mouseHover$.next(!1)}ngAfterContentInit(){Object(s.P)(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const e=Object(c.a)([this.slide.pipe(Object(w.a)(e=>e.current),Object(S.a)(this.activeId)),this._wrap$,this.slides.changes.pipe(Object(S.a)(null))]).pipe(Object(w.a)(([e,t])=>{const i=this.slides.toArray(),n=this._getSlideIdxById(e);return t?i.length>1:n<i.length-1}),Object(y.a)());Object(c.a)([this._pause$,this._pauseOnHover$,this._mouseHover$,this._interval$,e]).pipe(Object(w.a)(([e,t,i,n,s])=>e||t&&i||!s?0:n),Object(y.a)(),Object(O.a)(e=>e>0?Object(l.a)(e,e):h),Object(A.a)(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(zi.TIMER)))}),this.slides.changes.pipe(Object(A.a)(this._destroy$)).subscribe(()=>this._cd.markForCheck())}ngAfterContentChecked(){let e=this._getSlideById(this.activeId);this.activeId=e?e.id:this.slides.length?this.slides.first.id:""}ngOnDestroy(){this._destroy$.next()}select(e,t){this._cycleToSelected(e,this._getSlideEventDirection(this.activeId,e),t)}prev(e){this._cycleToSelected(this._getPrevSlide(this.activeId),$i.RIGHT,e)}next(e){this._cycleToSelected(this._getNextSlide(this.activeId),$i.LEFT,e)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}_cycleToSelected(e,t,i){let n=this._getSlideById(e);n&&n.id!==this.activeId&&(this.slide.emit({prev:this.activeId,current:n.id,direction:t,paused:this._pause$.value,source:i}),this.activeId=n.id),this._cd.markForCheck()}_getSlideEventDirection(e,t){return this._getSlideIdxById(e)>this._getSlideIdxById(t)?$i.RIGHT:$i.LEFT}_getSlideById(e){return this.slides.find(t=>t.id===e)||null}_getSlideIdxById(e){const t=this._getSlideById(e);return null!=t?this.slides.toArray().indexOf(t):-1}_getNextSlide(e){const t=this.slides.toArray(),i=this._getSlideIdxById(e);return i===t.length-1?this.wrap?t[0].id:t[t.length-1].id:t[i+1].id}_getPrevSlide(e){const t=this.slides.toArray(),i=this._getSlideIdxById(e);return 0===i?this.wrap?t[t.length-1].id:t[0].id:t[i-1].id}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Ui),n.Rb(n.B),n.Rb(n.z),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-carousel"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,Hi,!1),2&e&&n.Kc(s=n.kc())&&(t.slides=s)},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:2,hostBindings:function(e,t){1&e&&n.jc("keydown.arrowLeft",(function(){return t.keyboard&&t.prev(t.NgbSlideEventSource.ARROW_LEFT)}))("keydown.arrowRight",(function(){return t.keyboard&&t.next(t.NgbSlideEventSource.ARROW_RIGHT)}))("mouseenter",(function(){return t.mouseEnter()}))("mouseleave",(function(){return t.mouseLeave()})),2&e&&n.Wc("display","block")},inputs:{interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators",activeId:"activeId"},outputs:{slide:"slide"},exportAs:["ngbCarousel"],decls:5,vars:4,consts:[["class","carousel-indicators",4,"ngIf"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["class","carousel-control-prev","role","button",3,"click",4,"ngIf"],["class","carousel-control-next","role","button",3,"click",4,"ngIf"],[1,"carousel-indicators"],[3,"id","active","click",4,"ngFor","ngForOf"],[3,"id","click"],[1,"carousel-item"],[3,"ngTemplateOutlet"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(e,t){1&e&&(n.Xc(0,J,2,1,"ol",0),n.Xb(1,"div",1),n.Xc(2,ee,2,3,"div",2),n.Wb(),n.Xc(3,ne,4,0,"a",3),n.Xc(4,se,4,0,"a",4)),2&e&&(n.wc("ngIf",t.showNavigationIndicators),n.Cb(2),n.wc("ngForOf",t.slides),n.Cb(1),n.wc("ngIf",t.showNavigationArrows),n.Cb(1),n.wc("ngIf",t.showNavigationArrows))},directives:[s.u,s.t,s.B],encapsulation:2,changeDetection:0}),e})();var $i=function(e){return e[e.LEFT="left"]="LEFT",e[e.RIGHT="right"]="RIGHT",e}({}),zi=function(e){return e.TIMER="timer",e.ARROW_LEFT="arrowLeft",e.ARROW_RIGHT="arrowRight",e.INDICATOR="indicator",e}({});let Zi=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Ki=(()=>{let e=class{constructor(){this.collapsed=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbCollapse",""]],hostVars:4,hostBindings:function(e,t){2&e&&n.Hb("collapse",!0)("show",!t.collapsed)},inputs:{collapsed:["ngbCollapse","collapsed"]},exportAs:["ngbCollapse"]}),e})(),qi=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();class Ji{constructor(e,t,i){this.year=Ci(e)?e:null,this.month=Ci(t)?t:null,this.day=Ci(i)?i:null}static from(e){return e instanceof Ji?e:e?new Ji(e.year,e.month,e.day):null}equals(e){return null!=e&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day<e.day:this.month<e.month:this.year<e.year)}after(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day>e.day:this.month>e.month:this.year>e.year)}}function Qi(e){return new Ji(e.getFullYear(),e.getMonth()+1,e.getDate())}function en(e){const t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function tn(){return new sn}let nn=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:tn,token:e,providedIn:"root"}),e})(),sn=(()=>{let e=class extends nn{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(e,t="d",i=1){let n=en(e),s=!0,r=n.getMonth();switch(t){case"y":n.setFullYear(n.getFullYear()+i);break;case"m":r+=i,n.setMonth(r),r%=12,r<0&&(r+=12);break;case"d":n.setDate(n.getDate()+i),s=!1;break;default:return e}return s&&n.getMonth()!==r&&n.setDate(0),Qi(n)}getPrev(e,t="d",i=1){return this.getNext(e,t,-i)}getWeekday(e){let t=en(e).getDay();return 0===t?7:t}getWeekNumber(e,t){7===t&&(t=0);const i=en(e[(11-t)%7]);i.setDate(i.getDate()+4-(i.getDay()||7));const n=i.getTime();return i.setMonth(0),i.setDate(1),Math.floor(Math.round((n-i.getTime())/864e5)/7)+1}getToday(){return Qi(new Date)}isValid(e){if(!(e&&Ci(e.year)&&Ci(e.month)&&Ci(e.day)))return!1;if(0===e.year)return!1;const t=en(e);return!isNaN(t.getTime())&&t.getFullYear()===e.year&&t.getMonth()+1===e.month&&t.getDate()===e.day}};return e.\u0275fac=function(t){return Lr(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();function rn(e,t){return!function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}(e,t)}function on(e,t){return!(!e&&!t||e&&t&&e.year===t.year&&e.month===t.month)}function an(e,t,i){return e&&t&&e.before(t)?t:e&&i&&e.after(i)?i:e||null}function cn(e,t){const{minDate:i,maxDate:n,disabled:s,markDisabled:r}=t;return!(null==e||s||r&&r(e,{year:e.year,month:e.month})||i&&e.before(i)||n&&e.after(n))}let ln=(()=>{let e=class{getDayNumerals(e){return""+e.day}getWeekNumerals(e){return""+e}getYearNumerals(e){return""+e}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return e=Object(n.fc)(n.u),new un(e);var e},token:e,providedIn:"root"}),e})(),un=(()=>{let e=class extends ln{constructor(e){super(),this._locale=e;const t=Object(s.M)(e,s.h.Standalone,s.H.Short);this._weekdaysShort=t.map((e,i)=>t[(i+1)%7]),this._monthsShort=Object(s.O)(e,s.h.Standalone,s.H.Abbreviated),this._monthsFull=Object(s.O)(e,s.h.Standalone,s.H.Wide)}getWeekdayShortName(e){return this._weekdaysShort[e-1]||""}getMonthShortName(e){return this._monthsShort[e-1]||""}getMonthFullName(e){return this._monthsFull[e-1]||""}getDayAriaLabel(e){const t=new Date(e.year,e.month-1,e.day);return Object(s.K)(t,"fullDate",this._locale)}};return e.\u0275fac=function(t){return new(t||e)(n.fc(n.u))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})(),dn=(()=>{let e=class{constructor(e,t){this._calendar=e,this._i18n=t,this._VALIDATORS={dayTemplateData:e=>{if(this._state.dayTemplateData!==e)return{dayTemplateData:e}},displayMonths:e=>{if(Ci(e=bi(e))&&e>0&&this._state.displayMonths!==e)return{displayMonths:e}},disabled:e=>{if(this._state.disabled!==e)return{disabled:e}},firstDayOfWeek:e=>{if(Ci(e=bi(e))&&e>=0&&this._state.firstDayOfWeek!==e)return{firstDayOfWeek:e}},focusVisible:e=>{if(this._state.focusVisible!==e&&!this._state.disabled)return{focusVisible:e}},markDisabled:e=>{if(this._state.markDisabled!==e)return{markDisabled:e}},maxDate:e=>{const t=this.toValidDate(e,null);if(rn(this._state.maxDate,t))return{maxDate:t}},minDate:e=>{const t=this.toValidDate(e,null);if(rn(this._state.minDate,t))return{minDate:t}},navigation:e=>{if(this._state.navigation!==e)return{navigation:e}},outsideDays:e=>{if(this._state.outsideDays!==e)return{outsideDays:e}}},this._model$=new o.a,this._dateSelect$=new o.a,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]}}}get model$(){return this._model$.pipe(Object(k.a)(e=>e.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Object(k.a)(e=>null!==e))}set(e){let t=Object.keys(e).map(t=>this._VALIDATORS[t](e[t])).reduce((e,t)=>Object.assign(Object.assign({},e),t),{});Object.keys(t).length>0&&this._nextState(t)}focus(e){const t=this.toValidDate(e,null);null!=t&&!this._state.disabled&&rn(this._state.focusDate,t)&&this._nextState({focusDate:e})}focusSelect(){cn(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(e){const t=this.toValidDate(e,this._calendar.getToday());null==t||this._state.disabled||this._state.firstDate&&!on(this._state.firstDate,t)||this._nextState({firstDate:t})}select(e,t={}){const i=this.toValidDate(e,null);null==i||this._state.disabled||(rn(this._state.selectedDate,i)&&this._nextState({selectedDate:i}),t.emitEvent&&cn(i,this._state)&&this._dateSelect$.next(i))}toValidDate(e,t){const i=Ji.from(e);return void 0===t&&(t=this._calendar.getToday()),this._calendar.isValid(i)?i:t}getMonth(e){for(let t of this._state.months)if(e.month===t.number&&e.year===t.year)return t;throw new Error(`month ${e.month} of year ${e.year} not found`)}_nextState(e){const t=this._updateState(e);this._patchContexts(t),this._state=t,this._model$.next(this._state)}_patchContexts(e){const{months:t,displayMonths:i,selectedDate:n,focusDate:s,focusVisible:r,disabled:o,outsideDays:a}=e;e.months.forEach(e=>{e.weeks.forEach(c=>{c.days.forEach(c=>{s&&(c.context.focused=s.equals(c.date)&&r),c.tabindex=!o&&s&&c.date.equals(s)&&s.month===e.number?0:-1,!0===o&&(c.context.disabled=!0),void 0!==n&&(c.context.selected=null!==n&&n.equals(c.date)),e.number!==c.date.month&&(c.hidden="hidden"===a||"collapsed"===a||i>1&&c.date.after(t[0].firstDate)&&c.date.before(t[i-1].lastDate))})})})}_updateState(e){const t=Object.assign({},this._state,e);let i=t.firstDate;if(("minDate"in e||"maxDate"in e)&&(function(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}(t.minDate,t.maxDate),t.focusDate=an(t.focusDate,t.minDate,t.maxDate),t.firstDate=an(t.firstDate,t.minDate,t.maxDate),i=t.focusDate),"disabled"in e&&(t.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(i=t.selectedDate),"focusVisible"in e)return t;if("focusDate"in e&&(t.focusDate=an(t.focusDate,t.minDate,t.maxDate),i=t.focusDate,0!==t.months.length&&t.focusDate&&!t.focusDate.before(t.firstDate)&&!t.focusDate.after(t.lastDate)))return t;if("firstDate"in e&&(t.firstDate=an(t.firstDate,t.minDate,t.maxDate),i=t.firstDate),i){const n=function(e,t,i,n,s){const{displayMonths:r,months:o}=i,a=o.splice(0,o.length);return Array.from({length:r},(i,n)=>{const r=Object.assign(e.getNext(t,"m",n),{day:1});if(o[n]=null,!s){const e=a.findIndex(e=>e.firstDate.equals(r));-1!==e&&(o[n]=a.splice(e,1)[0])}return r}).forEach((t,s)=>{null===o[s]&&(o[s]=function(e,t,i,n,s={}){const{dayTemplateData:r,minDate:o,maxDate:a,firstDayOfWeek:c,markDisabled:l,outsideDays:u}=i,d=e.getToday();s.firstDate=null,s.lastDate=null,s.number=t.month,s.year=t.year,s.weeks=s.weeks||[],s.weekdays=s.weekdays||[],t=function(e,t,i){const n=e.getDaysPerWeek(),s=new Ji(t.year,t.month,1),r=e.getWeekday(s)%n;return e.getPrev(s,"d",(n+r-i)%n)}(e,t,c);for(let h=0;h<e.getWeeksPerMonth();h++){let i=s.weeks[h];i||(i=s.weeks[h]={number:0,days:[],collapsed:!0});const p=i.days;for(let c=0;c<e.getDaysPerWeek();c++){0===h&&(s.weekdays[c]=e.getWeekday(t));const i=new Ji(t.year,t.month,t.day),u=e.getNext(i),b=n.getDayAriaLabel(i);let f=!!(o&&i.before(o)||a&&i.after(a));!f&&l&&(f=l(i,{month:s.number,year:s.year}));let m=i.equals(d),g=r?r(i,{month:s.number,year:s.year}):void 0;null===s.firstDate&&i.month===s.number&&(s.firstDate=i),i.month===s.number&&u.month!==s.number&&(s.lastDate=i);let v=p[c];v||(v=p[c]={}),v.date=i,v.context=Object.assign(v.context||{},{$implicit:i,date:i,data:g,currentMonth:s.number,currentYear:s.year,disabled:f,focused:!1,selected:!1,today:m}),v.tabindex=-1,v.ariaLabel=b,v.hidden=!1,t=u}i.number=e.getWeekNumber(p.map(e=>e.date),c),i.collapsed="collapsed"===u&&p[0].date.month!==s.number&&p[p.length-1].date.month!==s.number}return s}(e,t,i,n,a.shift()||{}))}),o}(this._calendar,i,t,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e);t.months=n,t.firstDate=n[0].firstDate,t.lastDate=n[n.length-1].lastDate,"selectedDate"in e&&!cn(t.selectedDate,t)&&(t.selectedDate=null),"firstDate"in e&&(!t.focusDate||t.focusDate.before(t.firstDate)||t.focusDate.after(t.lastDate))&&(t.focusDate=i);const s=!this._state.firstDate||this._state.firstDate.year!==t.firstDate.year,r=!this._state.firstDate||this._state.firstDate.month!==t.firstDate.month;"select"===t.navigation?(("minDate"in e||"maxDate"in e||0===t.selectBoxes.years.length||s)&&(t.selectBoxes.years=function(e,t,i){if(!e)return[];const n=t?Math.max(t.year,e.year-500):e.year-10,s=(i?Math.min(i.year,e.year+500):e.year+10)-n+1,r=Array(s);for(let o=0;o<s;o++)r[o]=n+o;return r}(t.firstDate,t.minDate,t.maxDate)),("minDate"in e||"maxDate"in e||0===t.selectBoxes.months.length||s)&&(t.selectBoxes.months=function(e,t,i,n){if(!t)return[];let s=e.getMonths(t.year);if(i&&t.year===i.year){const e=s.findIndex(e=>e===i.month);s=s.slice(e)}if(n&&t.year===n.year){const e=s.findIndex(e=>e===n.month);s=s.slice(0,e+1)}return s}(this._calendar,t.firstDate,t.minDate,t.maxDate))):t.selectBoxes={years:[],months:[]},"arrows"!==t.navigation&&"select"!==t.navigation||!(r||s||"minDate"in e||"maxDate"in e||"disabled"in e)||(t.prevDisabled=t.disabled||function(e,t,i){const n=Object.assign(e.getPrev(t,"m"),{day:1});return null!=i&&(n.year===i.year&&n.month<i.month||n.year<i.year&&1===i.month)}(this._calendar,t.firstDate,t.minDate),t.nextDisabled=t.disabled||function(e,t,i){const n=Object.assign(e.getNext(t,"m"),{day:1});return null!=i&&n.after(i)}(this._calendar,t.lastDate,t.maxDate))}return t}};return e.\u0275fac=function(t){return new(t||e)(n.fc(nn),n.fc(ln))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();var hn=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}({});let pn=(()=>{let e=class{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();function bn(){return new mn}let fn=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:bn,token:e,providedIn:"root"}),e})(),mn=(()=>{let e=class extends fn{fromModel(e){return e&&Ci(e.year)&&Ci(e.month)&&Ci(e.day)?{year:e.year,month:e.month,day:e.day}:null}toModel(e){return e&&Ci(e.year)&&Ci(e.month)&&Ci(e.day)?{year:e.year,month:e.month,day:e.day}:null}};return e.\u0275fac=function(t){return xr(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const gn={provide:r.q,useExisting:Object(n.U)(()=>Cn),multi:!0};let vn=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbDatepickerContent",""]]}),e})(),Cn=(()=>{let e=class{constructor(e,t,i,s,r,a,c,l){this._service=e,this._calendar=t,this.i18n=i,this._elementRef=a,this._ngbDateAdapter=c,this._ngZone=l,this._controlValue=null,this._destroyed$=new o.a,this._publicState={},this.navigate=new n.n,this.dateSelect=new n.n,this.select=this.dateSelect,this.onChange=e=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(e=>this[e]=s[e]),e.dateSelect$.pipe(Object(A.a)(this._destroyed$)).subscribe(e=>{this.dateSelect.emit(e)}),e.model$.pipe(Object(A.a)(this._destroyed$)).subscribe(e=>{const t=e.firstDate,i=this.model?this.model.firstDate:null;this._publicState={maxDate:e.maxDate,minDate:e.minDate,firstDate:e.firstDate,lastDate:e.lastDate,focusedDate:e.focusDate,months:e.months.map(e=>e.firstDate)};let n=!1;if(!t.equals(i)&&(this.navigate.emit({current:i?{year:i.year,month:i.month}:null,next:{year:t.year,month:t.month},preventDefault:()=>n=!0}),n&&null!==i))return void this._service.open(i);const s=e.selectedDate,o=e.focusDate,a=this.model?this.model.focusDate:null;this.model=e,rn(s,this._controlValue)&&(this._controlValue=s,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(s))),rn(o,a)&&a&&e.focusVisible&&this.focus(),r.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(e){this._service.focus(Ji.from(e))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Object(T.a)(1)).subscribe(()=>{const e=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');e&&e.focus()})}navigateTo(e){this._service.open(Ji.from(e?e.day?e:Object.assign(Object.assign({},e),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=Object(p.a)(this._contentEl.nativeElement,"focusin"),t=Object(p.a)(this._contentEl.nativeElement,"focusout"),{nativeElement:i}=this._elementRef;Object(b.a)(e,t).pipe(Object(k.a)(({target:e,relatedTarget:t})=>!(Si(e,"ngb-dp-day")&&Si(t,"ngb-dp-day")&&i.contains(e)&&i.contains(t))),Object(A.a)(this._destroyed$)).subscribe(({type:e})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===e})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const e={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(t=>e[t]=this[t]),this._service.set(e),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(e){const t={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(t=>t in e).forEach(e=>t[e]=this[e]),this._service.set(t),"startDate"in e){const{currentValue:t,previousValue:i}=e.startDate;on(i,t)&&this.navigateTo(this.startDate)}}onDateSelect(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})}onNavigateDateSelect(e){this._service.open(e)}onNavigateEvent(e){switch(e){case hn.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case hn.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._service.set({disabled:e})}writeValue(e){this._controlValue=Ji.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(dn),n.Rb(nn),n.Rb(ln),n.Rb(pn),n.Rb(n.h),n.Rb(n.l),n.Rb(fn),n.Rb(n.z))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(e,t,i){var s;1&e&&n.Tc(i,vn,!0),2&e&&n.Kc(s=n.kc())&&(t.contentTemplate=s.first)},viewQuery:function(e,t){var i;1&e&&(n.Uc(re,!0),n.Uc(oe,!0)),2&e&&(n.Kc(i=n.kc())&&(t._defaultDayTemplate=i.first),n.Kc(i=n.kc())&&(t._contentEl=i.first))},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},outputs:{navigate:"navigate",dateSelect:"dateSelect",select:"select"},exportAs:["ngbDatepicker"],features:[n.Bb([gn,dn]),n.Ab],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(e,t){if(1&e&&(n.Xc(0,ae,1,5,"ng-template",null,0,n.Yc),n.Xc(2,ue,1,1,"ng-template",null,1,n.Yc),n.Xb(4,"div",2),n.Xc(5,de,1,7,"ngb-datepicker-navigation",3),n.Wb(),n.Xb(6,"div",4,5),n.Xc(8,he,0,0,"ng-template",6),n.Wb(),n.Xc(9,pe,0,0,"ng-template",6)),2&e){const e=n.Lc(3);n.Cb(5),n.wc("ngIf","none"!==t.navigation),n.Cb(1),n.Hb("ngb-dp-months",!t.contentTemplate),n.Cb(2),n.wc("ngTemplateOutlet",(null==t.contentTemplate?null:t.contentTemplate.templateRef)||e),n.Cb(1),n.wc("ngTemplateOutlet",t.footerTemplate)}},directives:function(){return[s.u,s.B,Gn,s.t,Sn,yn]},styles:["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-months{display:-ms-flexbox;display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],encapsulation:2,changeDetection:0}),e})();var En=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}({});let wn=(()=>{let e=class{processKey(e,t){const{state:i,calendar:n}=t;switch(e.which){case En.PageUp:t.focusDate(n.getPrev(i.focusedDate,e.shiftKey?"y":"m",1));break;case En.PageDown:t.focusDate(n.getNext(i.focusedDate,e.shiftKey?"y":"m",1));break;case En.End:t.focusDate(e.shiftKey?i.maxDate:i.lastDate);break;case En.Home:t.focusDate(e.shiftKey?i.minDate:i.firstDate);break;case En.ArrowLeft:t.focusDate(n.getPrev(i.focusedDate,"d",1));break;case En.ArrowUp:t.focusDate(n.getPrev(i.focusedDate,"d",n.getDaysPerWeek()));break;case En.ArrowRight:t.focusDate(n.getNext(i.focusedDate,"d",1));break;case En.ArrowDown:t.focusDate(n.getNext(i.focusedDate,"d",n.getDaysPerWeek()));break;case En.Enter:case En.Space:t.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Sn=(()=>{let e=class{constructor(e,t,i,n){this.i18n=e,this.datepicker=t,this._keyboardService=i,this._service=n}set month(e){this.viewModel=this._service.getMonth(e)}onKeyDown(e){this._keyboardService.processKey(e,this.datepicker)}doSelect(e){e.context.disabled||e.hidden||this.datepicker.onDateSelect(e.date)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(ln),n.Rb(Cn),n.Rb(wn),n.Rb(dn))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(e,t){1&e&&n.jc("keydown",(function(e){return t.onKeyDown(e)}))},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Xc(0,me,3,2,"div",0),n.Xc(1,Se,1,1,"ng-template",1)),2&e&&(n.wc("ngIf",t.datepicker.showWeekdays),n.Cb(1),n.wc("ngForOf",t.viewModel.weeks))},directives:[s.u,s.t,s.B],styles:['ngb-datepicker-month{display:block}.ngb-dp-week-number,.ngb-dp-weekday{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}'],encapsulation:2}),e})(),yn=(()=>{let e=class{constructor(e){this.i18n=e,this.navigation=hn,this.months=[],this.navigate=new n.n,this.select=new n.n}onClickPrev(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(e){e.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(ln))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{months:"months",date:"date",disabled:"disabled",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:10,vars:4,consts:[[1,"ngb-dp-arrow"],["type","button",1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click",6,"aria-label","title"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"button",1),n.dc(2,ye),n.jc("click",(function(e){return t.onClickPrev(e)})),n.Sb(3,"span",2),n.Wb(),n.Wb(),n.Xc(4,Ae,1,4,"ngb-datepicker-navigation-select",3),n.Xc(5,Ie,1,1,void 0,4),n.Xb(6,"div",5),n.Xb(7,"button",1),n.dc(8,Oe),n.jc("click",(function(e){return t.onClickNext(e)})),n.Sb(9,"span",2),n.Wb(),n.Wb()),2&e&&(n.Cb(1),n.wc("disabled",t.prevDisabled),n.Cb(3),n.wc("ngIf",t.showSelect),n.Cb(1),n.wc("ngIf",!t.showSelect),n.Cb(2),n.wc("disabled",t.nextDisabled))},directives:function(){return[s.u,Un,s.t]},styles:["ngb-datepicker-navigation{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right .ngb-dp-navigation-chevron{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],encapsulation:2,changeDetection:0}),e})();const On=(e,t)=>!!t&&t.some(t=>t.contains(e)),An=(e,t)=>!t||null!=function(e,t){return t?void 0===e.closest?null:e.closest(t):null}(e,t),kn=(()=>"undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)))();function Tn(e,t,i,n,s,r,o,a){var c;i&&e.runOutsideAngular((c=()=>{const c=Object(p.a)(t,"keydown").pipe(Object(A.a)(s),Object(k.a)(e=>e.which===En.Escape),Object(D.a)(e=>e.preventDefault())),l=Object(p.a)(t,"mousedown").pipe(Object(w.a)(e=>{const t=e.target;return 2!==e.button&&!On(t,o)&&("inside"===i?On(t,r)&&An(t,a):"outside"===i?!On(t,r):An(t,a)||!On(t,r))}),Object(A.a)(s)),u=Object(p.a)(t,"mouseup").pipe(I(l),Object(k.a)(([e,t])=>t),M(0),Object(A.a)(s));(function(...e){if(1===e.length){if(!Object(f.a)(e[0]))return e[0];e=e[0]}return Object(m.a)(e,void 0).lift(new C)})([c.pipe(Object(w.a)(e=>0)),u.pipe(Object(w.a)(e=>1))]).subscribe(t=>e.run(()=>n(t)))},kn?()=>setTimeout(()=>c(),100):c))}const Dn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function In(e){const t=Array.from(e.querySelectorAll(Dn)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}const _n=(e,t,i,n=!1)=>{e.runOutsideAngular(()=>{const e=Object(p.a)(t,"focusin").pipe(Object(A.a)(i),Object(w.a)(e=>e.target));Object(p.a)(t,"keydown").pipe(Object(A.a)(i),Object(k.a)(e=>e.which===En.Tab),I(e)).subscribe(([e,i])=>{const[n,s]=In(t);i!==n&&i!==t||!e.shiftKey||(s.focus(),e.preventDefault()),i!==s||e.shiftKey||(n.focus(),e.preventDefault())}),n&&Object(p.a)(t,"click").pipe(Object(A.a)(i),I(e),Object(w.a)(e=>e[1])).subscribe(e=>e.focus())})};class Rn{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let i,n={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))i=e.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{const t=this.offsetParent(e);i=this.offset(e,!1),t!==document.documentElement&&(n=this.offset(t,!1)),n.top+=t.clientTop,n.left+=t.clientLeft}return i.top-=n.top,i.bottom-=n.top,i.left-=n.left,i.right-=n.left,t&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i}offset(e,t=!0){const i=e.getBoundingClientRect(),n=window.pageYOffset-document.documentElement.clientTop,s=window.pageXOffset-document.documentElement.clientLeft;let r={height:i.height||e.offsetHeight,width:i.width||e.offsetWidth,top:i.top+n,bottom:i.bottom+n,left:i.left+s,right:i.right+s};return t&&(r.height=Math.round(r.height),r.width=Math.round(r.width),r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}positionElements(e,t,i,n){const[s="top",r="center"]=i.split("-"),o=n?this.offset(e,!1):this.position(e,!1),a=this.getAllStyles(t),c=parseFloat(a.marginTop),l=parseFloat(a.marginBottom),u=parseFloat(a.marginLeft),d=parseFloat(a.marginRight);let h=0,p=0;switch(s){case"top":h=o.top-(t.offsetHeight+c+l);break;case"bottom":h=o.top+o.height;break;case"left":p=o.left-(t.offsetWidth+u+d);break;case"right":p=o.left+o.width}switch(r){case"top":h=o.top;break;case"bottom":h=o.top+o.height-t.offsetHeight;break;case"left":p=o.left;break;case"right":p=o.left+o.width-t.offsetWidth;break;case"center":"top"===s||"bottom"===s?p=o.left+o.width/2-t.offsetWidth/2:h=o.top+o.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(p)}px, ${Math.round(h)}px)`;const b=t.getBoundingClientRect(),f=document.documentElement,m=window.innerHeight||f.clientHeight,g=window.innerWidth||f.clientWidth;return b.left>=0&&b.top>=0&&b.right<=g&&b.bottom<=m}}const Ln=/\s+/,xn=new Rn;function Pn(e,t,i,n,s){let r=Array.isArray(i)?i:i.split(Ln);const o=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,c=e=>{const[t,i]=e.split("-"),n=[];return s&&(n.push(`${s}-${t}`),i&&n.push(`${s}-${t}-${i}`),n.forEach(e=>{a.add(e)})),n};s&&o.forEach(e=>{a.remove(`${s}-${e}`)});let l=r.findIndex(e=>"auto"===e);l>=0&&o.forEach((function(e){null==r.find(t=>-1!==t.search("^"+e))&&r.splice(l++,1,e)}));const u=t.style;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";let d=null,h=!1;for(d of r){let i=c(d);if(xn.positionElements(e,t,d,n)){h=!0;break}s&&i.forEach(e=>{a.remove(e)})}return h||(d=r[0],c(d),xn.positionElements(e,t,d,n)),d}function jn(){return new Xn}let Mn=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:jn,token:e,providedIn:"root"}),e})(),Xn=(()=>{let e=class extends Mn{parse(e){if(null!=e){const t=e.trim().split("-");if(1===t.length&&vi(t[0]))return{year:bi(t[0]),month:null,day:null};if(2===t.length&&vi(t[0])&&vi(t[1]))return{year:bi(t[0]),month:bi(t[1]),day:null};if(3===t.length&&vi(t[0])&&vi(t[1])&&vi(t[2]))return{year:bi(t[0]),month:bi(t[1]),day:bi(t[2])}}return null}format(e){return e?`${e.year}-${vi(e.month)?wi(e.month):""}-${vi(e.day)?wi(e.day):""}`:""}};return e.\u0275fac=function(t){return Pr(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})(),Fn=(()=>{let e=class extends pn{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"],this.restoreFocus=!0}};return e.\u0275fac=function(t){return jr(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Wn={provide:r.q,useExisting:Object(n.U)(()=>Nn),multi:!0},Bn={provide:r.p,useExisting:Object(n.U)(()=>Nn),multi:!0};let Nn=(()=>{let e=class{constructor(e,t,i,s,r,o,a,c,l,u,d){this._parserFormatter=e,this._elRef=t,this._vcRef=i,this._renderer=s,this._cfr=r,this._ngZone=o,this._calendar=a,this._dateAdapter=c,this._document=l,this._changeDetector=u,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this.dateSelect=new n.n,this.navigate=new n.n,this.closed=new n.n,this._onChange=e=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(e=>this[e]=d[e]),this._zoneSubscription=o.onStable.subscribe(()=>this._updatePopupPosition())}get disabled(){return this._disabled}set disabled(e){this._disabled=""===e||e&&"false"!==e,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}registerOnValidatorChange(e){this._validatorChange=e}setDisabledState(e){this.disabled=e}validate(e){const{value:t}=e;if(null!=t){const e=this._fromDateStruct(this._dateAdapter.fromModel(t));if(!e)return{ngbDate:{invalid:t}};if(this.minDate&&e.before(Ji.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:t}}};if(this.maxDate&&e.after(Ji.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:t}}}}return null}writeValue(e){this._model=this._fromDateStruct(this._dateAdapter.fromModel(e)),this._writeModelValue(this._model)}manualDateChange(e,t=!1){const i=e!==this._inputValue;i&&(this._inputValue=e,this._model=this._fromDateStruct(this._parserFormatter.parse(e))),!i&&t||this._onChange(this._model?this._dateAdapter.toModel(this._model):""===e?null:e),t&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){const e=this._cfr.resolveComponentFactory(Cn);this._cRef=this._vcRef.createComponent(e),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef.instance),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(e=>{this.writeValue(e),this._onChange(e),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,_n(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),this._cRef.instance.focus(),Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this.closed,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this.closed.emit(),this._changeDetector.markForCheck();let e=this._elWithFocus;gi(this.restoreFocus)?e=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(e=this.restoreFocus),e&&e.focus?e.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(e){this.isOpen()&&this._cRef.instance.navigateTo(e)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(e){(e.minDate||e.maxDate)&&(this._validatorChange(),this.isOpen()&&(e.minDate&&(this._cRef.instance.minDate=this.minDate),e.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(e)))}ngOnDestroy(){this.close(),this._zoneSubscription.unsubscribe()}_applyDatepickerInputs(e){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekdays","showWeekNumbers"].forEach(t=>{void 0!==this[t]&&(e[t]=this[t])}),e.startDate=this.startDate||this._model}_applyPopupStyling(e){this._renderer.addClass(e,"dropdown-menu"),this._renderer.addClass(e,"show"),"body"===this.container&&this._renderer.addClass(e,"ngb-dp-body")}_subscribeForDatepickerOutputs(e){e.navigate.subscribe(e=>this.navigate.emit(e)),e.dateSelect.subscribe(e=>{this.dateSelect.emit(e),!0!==this.autoClose&&"inside"!==this.autoClose||this.close()})}_writeModelValue(e){const t=this._parserFormatter.format(e);this._inputValue=t,this._renderer.setProperty(this._elRef.nativeElement,"value",t),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(e)),this._onTouched())}_fromDateStruct(e){const t=e?new Ji(e.year,e.month,e.day):null;return this._calendar.isValid(t)?t:null}_updatePopupPosition(){if(!this._cRef)return;let e;if(e=gi(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this.positionTarget&&!e)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");Pn(e,this._cRef.location.nativeElement,this.placement,"body"===this.container)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Mn),n.Rb(n.l),n.Rb(n.P),n.Rb(n.F),n.Rb(n.j),n.Rb(n.z),n.Rb(nn),n.Rb(fn),n.Rb(s.e),n.Rb(n.h),n.Rb(Fn))},e.\u0275dir=n.Mb({type:e,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(e,t){1&e&&n.jc("input",(function(e){return t.manualDateChange(e.target.value)}))("change",(function(e){return t.manualDateChange(e.target.value,!0)}))("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onBlur()})),2&e&&n.ac("disabled",t.disabled)},inputs:{disabled:"disabled",autoClose:"autoClose",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[n.Bb([Wn,Bn,{provide:pn,useExisting:Fn}]),n.Ab]}),e})(),Gn=(()=>{let e=class{constructor(e){this.i18n=e}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(ln))},e.\u0275cmp=n.Lb({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(e,t){2&e&&n.Hb("bg-primary",t.selected)("text-white",t.selected)("text-muted",t.isMuted())("outside",t.isMuted())("active",t.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:_e,decls:1,vars:1,template:function(e,t){1&e&&n.Zc(0),2&e&&n.ad(t.i18n.getDayNumerals(t.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}[ngbDatepickerDayView].outside{opacity:.5}"],encapsulation:2,changeDetection:0}),e})(),Un=(()=>{let e=class{constructor(e,t){this.i18n=e,this._renderer=t,this.select=new n.n,this._month=-1,this._year=-1}changeMonth(e){this.select.emit(new Ji(this.date.year,bi(e),1))}changeYear(e){this.select.emit(new Ji(bi(e),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(ln),n.Rb(n.F))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(e,t){var i;1&e&&(n.Uc(Re,!0,n.l),n.Uc(Le,!0,n.l)),2&e&&(n.Kc(i=n.kc())&&(t.monthSelect=i.first),n.Kc(i=n.kc())&&(t.yearSelect=i.first))},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:8,vars:4,consts:[[1,"custom-select",3,"disabled","change",6,"aria-label","title"],["month",""],[3,"value",4,"ngFor","ngForOf"],["year",""],[3,"value"]],template:function(e,t){1&e&&(n.Xb(0,"select",0,1),n.dc(2,xe),n.jc("change",(function(e){return t.changeMonth(e.target.value)})),n.Xc(3,je,2,3,"option",2),n.Wb(),n.Xb(4,"select",0,3),n.dc(6,Pe),n.jc("change",(function(e){return t.changeYear(e.target.value)})),n.Xc(7,Me,2,2,"option",2),n.Wb()),2&e&&(n.wc("disabled",t.disabled),n.Cb(3),n.wc("ngForOf",t.months),n.Cb(1),n.wc("disabled",t.disabled),n.Cb(3),n.wc("ngForOf",t.years))},directives:[s.t,r.x,r.H],styles:["ngb-datepicker-navigation-select>.custom-select{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.custom-select:focus{z-index:1}ngb-datepicker-navigation-select>.custom-select::-ms-value{background-color:transparent!important}"],encapsulation:2,changeDetection:0}),e})(),Vn=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c,r.m]]}),e})(),Hn=(()=>{let e=class{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();var Yn;let $n=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["",8,"navbar"]]}),e})(),zn=(()=>{let e=class{constructor(e){this.elementRef=e,this._disabled=!1}set disabled(e){this._disabled=""===e||!0===e}get disabled(){return this._disabled}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("disabled",t.disabled)},inputs:{disabled:"disabled"}}),e})(),Zn=(()=>{let e=class{constructor(e,t){this.dropdown=e,this.placement="bottom",this.isOpen=!1,this.nativeElement=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>Jn)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,zn,!1),2&e&&n.Kc(s=n.kc())&&(t.menuItems=s)},hostVars:5,hostBindings:function(e,t){1&e&&n.jc("keydown.ArrowUp",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.ArrowDown",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Home",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.End",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Enter",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Space",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Tab",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Shift.Tab",(function(e){return t.dropdown.onKeyDown(e)})),2&e&&(n.Db("x-placement",t.placement),n.Hb("dropdown-menu",!0)("show",t.dropdown.isOpen()))}}),e})(),Kn=(()=>{let e=class{constructor(e,t){this.dropdown=e,this.nativeElement=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>Jn)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){2&e&&n.Db("aria-expanded",t.dropdown.isOpen())}}),e})(),qn=(()=>{let e=Yn=class extends Kn{constructor(e,t){super(e,t)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>Jn)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdownToggle",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(e,t){1&e&&n.jc("click",(function(){return t.dropdown.toggle()}))("keydown.ArrowUp",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.ArrowDown",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Home",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.End",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Tab",(function(e){return t.dropdown.onKeyDown(e)}))("keydown.Shift.Tab",(function(e){return t.dropdown.onKeyDown(e)})),2&e&&n.Db("aria-expanded",t.dropdown.isOpen())},features:[n.Bb([{provide:Kn,useExisting:Object(n.U)(()=>Yn)}]),n.zb]}),e})(),Jn=(()=>{let e=class{constructor(e,t,i,s,r,a,c){this._changeDetector=e,this._document=i,this._ngZone=s,this._elementRef=r,this._renderer=a,this._closed$=new o.a,this._bodyContainer=null,this._open=!1,this.openChange=new n.n,this.placement=t.placement,this.container=t.container,this.autoClose=t.autoClose,this.display=c?"static":"dynamic",this._zoneSubscription=s.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(Object(T.a)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(e){e.container&&this._open&&this._applyContainer(this.container),e.placement&&!e.placement.isFirstChange&&this._applyPlacementClasses()}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){Tn(this._ngZone,this._document,this.autoClose,e=>{this.close(),0===e&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(e){const t=e.which,i=this._getMenuElements();let n=-1,s=null;const r=this._isEventFromToggle(e);if(!r&&i.length&&i.forEach((t,i)=>{t.contains(e.target)&&(s=t),t===this._document.activeElement&&(n=i)}),t!==En.Space&&t!==En.Enter){if(t!==En.Tab){if(r||s){if(this.open(),i.length){switch(t){case En.ArrowDown:n=Math.min(n+1,i.length-1);break;case En.ArrowUp:if(this._isDropup()&&-1===n){n=i.length-1;break}n=Math.max(n-1,0);break;case En.Home:n=0;break;case En.End:n=i.length-1}i[n].focus()}e.preventDefault()}}else if(e.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===e.target)return void("body"!==this.container||e.shiftKey?e.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const t=this._menu.nativeElement.querySelectorAll(Dn);e.shiftKey&&e.target===t[0]?(this._anchor.nativeElement.focus(),e.preventDefault()):e.shiftKey||e.target!==t[t.length-1]||(this._anchor.nativeElement.focus(),this.close())}else Object(p.a)(e.target,"focusout").pipe(Object(T.a)(1)).subscribe(({relatedTarget:e})=>{this._elementRef.nativeElement.contains(e)||this.close()})}}else!s||!0!==this.autoClose&&"inside"!==this.autoClose||Object(p.a)(s,"click").pipe(Object(T.a)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(e){return this._anchor.nativeElement.contains(e.target)}_getMenuElements(){const e=this._menu;return null==e?[]:e.menuItems.filter(e=>!e.disabled).map(e=>e.elementRef.nativeElement)}_positionMenu(){const e=this._menu;this.isOpen()&&e&&this._applyPlacementClasses("dynamic"===this.display?Pn(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(e){return Array.isArray(e)?e[0]:e.split(" ")[0]}_resetContainer(){const e=this._renderer;if(this._menu){const t=this._menu.nativeElement;e.appendChild(this._elementRef.nativeElement,t),e.removeStyle(t,"position"),e.removeStyle(t,"transform")}this._bodyContainer&&(e.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(e=null){if(this._resetContainer(),"body"===e){const e=this._renderer,t=this._menu.nativeElement,i=this._bodyContainer=this._bodyContainer||e.createElement("div");e.setStyle(i,"position","absolute"),e.setStyle(t,"position","static"),e.setStyle(i,"z-index","1050"),e.appendChild(i,t),e.appendChild(this._document.body,i)}}_applyPlacementClasses(e){const t=this._menu;if(t){e||(e=this._getFirstPlacement(this.placement));const i=this._renderer,n=this._elementRef.nativeElement;i.removeClass(n,"dropup"),i.removeClass(n,"dropdown"),t.placement="static"===this.display?null:e;const s=-1!==e.search("^top")?"dropup":"dropdown";i.addClass(n,s);const r=this._bodyContainer;r&&(i.removeClass(r,"dropup"),i.removeClass(r,"dropdown"),i.addClass(r,s))}}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(Hn),n.Rb(s.e),n.Rb(n.z),n.Rb(n.l),n.Rb(n.F),n.Rb($n,8))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbDropdown",""]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,Zn,!0),n.Jb(i,Kn,!0)),2&e&&(n.Kc(s=n.kc())&&(t._menu=s.first),n.Kc(s=n.kc())&&(t._anchor=s.first))},hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("show",t.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[n.Ab]}),e})(),Qn=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})(),es=(()=>{let e=class{constructor(){this.backdrop=!0,this.keyboard=!0}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();class ts{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class is{constructor(e,t,i,n,s,r){this._type=e,this._injector=t,this._viewContainerRef=i,this._renderer=n,this._componentFactoryResolver=s,this._applicationRef=r,this._windowRef=null,this._contentRef=null}open(e,t){return this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),this._viewContainerRef.length,this._injector,this._contentRef.nodes)),this._windowRef}close(){var e;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null,(null===(e=this._contentRef)||void 0===e?void 0:e.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null))}_getContentRef(e,t){if(e){if(e instanceof n.M){const i=e.createEmbeddedView(t);return this._applicationRef.attachView(i),new ts([i.rootNodes],i)}return new ts([[this._renderer.createText(""+e)]])}return new ts([])}}const ns=()=>{};let ss=(()=>{let e=class{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):ns}_adjustBody(e){const t=this._document.body,i=t.style.paddingRight,n=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]=n+e+"px",()=>t.style["padding-right"]=i}_isPresent(e){const t=this._document.body.getBoundingClientRect();return window.innerWidth-(t.left+t.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const t=this._document.body;t.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),i}};return e.\u0275fac=function(t){return new(t||e)(n.fc(s.e))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(s.e))},token:e,providedIn:"root"}),e})(),rs=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(e,t){2&e&&n.Eb("modal-backdrop fade show"+(t.backdropClass?" "+t.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();class os{close(e){}dismiss(e){}}class as{constructor(e,t,i,n){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=n,e.instance.dismissEvent.subscribe(e=>{this.dismiss(e)}),this.result=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(e){this._windowCmptRef&&(this._resolve(e),this._removeModalElements())}_dismiss(e){this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(t=>{!1!==t&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.location.nativeElement;if(e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._backdropCmptRef){const e=this._backdropCmptRef.location.nativeElement;e.parentNode.removeChild(e),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}var cs=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}({});let ls=(()=>{let e=class{constructor(e,t,i){this._document=e,this._elRef=t,this._zone=i,this._closed$=new o.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new n.n}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:e}=this._elRef;if(this._zone.runOutsideAngular(()=>{Object(p.a)(e,"keydown").pipe(Object(A.a)(this._closed$),Object(k.a)(e=>e.which===En.Escape&&this.keyboard)).subscribe(e=>requestAnimationFrame(()=>{e.defaultPrevented||this._zone.run(()=>this.dismiss(cs.ESC))}));let t=!1;Object(p.a)(this._dialogEl.nativeElement,"mousedown").pipe(Object(A.a)(this._closed$),Object(D.a)(()=>t=!1),Object(O.a)(()=>Object(p.a)(e,"mouseup").pipe(Object(A.a)(this._closed$),Object(T.a)(1))),Object(k.a)(({target:t})=>e===t)).subscribe(()=>{t=!0}),Object(p.a)(e,"click").pipe(Object(A.a)(this._closed$)).subscribe(({target:i})=>{!0!==this.backdrop||e!==i||t||this._zone.run(()=>this.dismiss(cs.BACKDROP_CLICK)),t=!1})}),!e.contains(document.activeElement)){const t=e.querySelector("[ngbAutofocus]"),i=In(e)[0];(t||i||e).focus()}}ngOnDestroy(){const e=this._document.body,t=this._elWithFocus;let i;i=t&&t.focus&&e.contains(t)?t:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null}),this._closed$.next()}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.e),n.Rb(n.l),n.Rb(n.z))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(e,t){var i;1&e&&n.Uc(Xe,!0),2&e&&n.Kc(i=n.kc())&&(t._dialogEl=i.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(e,t){2&e&&(n.Db("aria-modal",!0)("aria-labelledby",t.ariaLabelledBy)("aria-describedby",t.ariaDescribedBy),n.Eb("modal fade show d-block"+(t.windowClass?" "+t.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:K,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0,1),n.Xb(2,"div",2),n.uc(3),n.Wb(),n.Wb()),2&e&&n.Eb("modal-dialog"+(t.size?" modal-"+t.size:"")+(t.centered?" modal-dialog-centered":"")+(t.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),e})(),us=(()=>{let e=class{constructor(e,t,i,s,r,a){this._applicationRef=e,this._injector=t,this._document=i,this._scrollBar=s,this._rendererFactory=r,this._ngZone=a,this._activeWindowCmptHasChanged=new o.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new n.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const e=this._windowCmpts[this._windowCmpts.length-1];_n(this._ngZone,e.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(e.location.nativeElement)}})}open(e,t,i,n){const s=n.container instanceof HTMLElement?n.container:Ei(n.container)?this._document.querySelector(n.container):this._document.body,r=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(r.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!s)throw new Error(`The specified modal container "${n.container||"body"}" was not found in the DOM.`);const c=new os,l=this._getContentRef(e,n.injector||t,i,c,n);let u=!1!==n.backdrop?this._attachBackdrop(e,s):void 0,d=this._attachWindowComponent(e,s,l),h=new as(d,l,u,n.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.result.then(o,o),h.result.then(a,a),c.close=e=>{h.close(e)},c.dismiss=e=>{h.dismiss(e)},this._applyWindowOptions(d.instance,n),1===this._modalRefs.length&&r.addClass(this._document.body,"modal-open"),u&&u.instance&&this._applyBackdropOptions(u.instance,n),h}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,t){let i=e.resolveComponentFactory(rs).create(this._injector);return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,t,i){let n=e.resolveComponentFactory(ls).create(this._injector,i.nodes);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}_applyWindowOptions(e,t){this._windowAttributes.forEach(i=>{Ei(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){this._backdropAttributes.forEach(i=>{Ei(t[i])&&(e[i]=t[i])})}_getContentRef(e,t,i,s,r){return i?i instanceof n.M?this._createFromTemplateRef(i,s):gi(i)?this._createFromString(i):this._createFromComponent(e,t,i,s,r):new ts([])}_createFromTemplateRef(e,t){const i=e.createEmbeddedView({$implicit:t,close(e){t.close(e)},dismiss(e){t.dismiss(e)}});return this._applicationRef.attachView(i),new ts([i.rootNodes],i)}_createFromString(e){const t=this._document.createTextNode(""+e);return new ts([[t]])}_createFromComponent(e,t,i,s,r){const o=e.resolveComponentFactory(i),a=n.r.create({providers:[{provide:os,useValue:s}],parent:t}),c=o.create(a),l=c.location.nativeElement;return r.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new ts([[l]],c.hostView,c)}_setAriaHidden(e){const t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(t=>{t!==e&&"SCRIPT"!==t.nodeName&&(this._ariaHiddenValues.set(t,t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const t=()=>{const t=this._modalRefs.indexOf(e);t>-1&&(this._modalRefs.splice(t,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}};return e.\u0275fac=function(t){return new(t||e)(n.fc(n.g),n.fc(n.r),n.fc(s.e),n.fc(ss),n.fc(n.G),n.fc(n.z))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.g),Object(n.fc)(n.o),Object(n.fc)(s.e),Object(n.fc)(ss),Object(n.fc)(n.G),Object(n.fc)(n.z))},token:e,providedIn:"root"}),e})(),ds=(()=>{let e=class{constructor(e,t,i,n){this._moduleCFR=e,this._injector=t,this._modalStack=i,this._config=n}open(e,t={}){const i=Object.assign({},this._config,t);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}};return e.\u0275fac=function(t){return new(t||e)(n.fc(n.j),n.fc(n.r),n.fc(us),n.fc(es))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.j),Object(n.fc)(n.o),Object(n.fc)(us),Object(n.fc)(es))},token:e,providedIn:"root"}),e})(),hs=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[ds]}),e})(),ps=(()=>{let e=class{constructor(){this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const bs=e=>Ei(e)&&""!==e;let fs=0,ms=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbNavContent",""]]}),e})(),gs=(()=>{let e=class{constructor(e,t){this.elementRef=t,this.disabled=!1,this._nav=e}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){Ei(this.domId)||(this.domId="ngb-nav-"+fs++)}get active(){return this._nav.activeId===this.id}get id(){return bs(this._id)?this._id:this.domId}get panelDomId(){return this.domId+"-panel"}isPanelInDom(){return(Ei(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Object(n.U)(()=>vs)),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbNavItem",""]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,ms,!1),2&e&&n.Kc(s=n.kc())&&(t.contentTpls=s)},hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("nav-item",!0)},inputs:{disabled:"disabled",domId:"domId",destroyOnHide:"destroyOnHide",_id:["ngbNavItem","_id"]},exportAs:["ngbNavItem"]}),e})(),vs=(()=>{let e=class{constructor(e,t,i,s){this.role=e,this._cd=i,this._document=s,this.activeIdChange=new n.n,this.navChange=new n.n,this.destroyOnHide=t.destroyOnHide,this.orientation=t.orientation,this.roles=t.roles,this.keyboard=t.keyboard}click(e){e.disabled||this._updateActiveId(e.id)}onKeyDown(e){if("tablist"!==this.roles||!this.keyboard)return;const t=e.which,i=this.links.filter(e=>!e.navItem.disabled),{length:n}=i;let s=-1;if(i.forEach((e,t)=>{e.elRef.nativeElement===this._document.activeElement&&(s=t)}),n){switch(t){case En.ArrowLeft:if("vertical"===this.orientation)return;s=(s-1+n)%n;break;case En.ArrowRight:if("vertical"===this.orientation)return;s=(s+1)%n;break;case En.ArrowDown:if("horizontal"===this.orientation)return;s=(s+1)%n;break;case En.ArrowUp:if("horizontal"===this.orientation)return;s=(s-1+n)%n;break;case En.Home:s=0;break;case En.End:s=n-1}"changeWithArrows"===this.keyboard&&this.select(i[s].navItem.id),i[s].elRef.nativeElement.focus(),e.preventDefault()}}select(e){this._updateActiveId(e,!1)}ngAfterContentInit(){if(!Ei(this.activeId)){const e=this.items.first?this.items.first.id:null;bs(e)&&(this._updateActiveId(e,!1),this._cd.detectChanges())}}_updateActiveId(e,t=!0){if(this.activeId!==e){let i=!1;t&&this.navChange.emit({activeId:this.activeId,nextId:e,preventDefault:()=>{i=!0}}),i||(this.activeId=e,this.activeIdChange.emit(e))}}};return e.\u0275fac=function(t){return new(t||e)(n.gc("role"),n.Rb(ps),n.Rb(n.h),n.Rb(s.e))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbNav",""]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,gs,!1),n.Jb(i,Cs,!0)),2&e&&(n.Kc(s=n.kc())&&(t.items=s),n.Kc(s=n.kc())&&(t.links=s))},hostVars:6,hostBindings:function(e,t){1&e&&n.jc("keydown.arrowLeft",(function(e){return t.onKeyDown(e)}))("keydown.arrowRight",(function(e){return t.onKeyDown(e)}))("keydown.arrowDown",(function(e){return t.onKeyDown(e)}))("keydown.arrowUp",(function(e){return t.onKeyDown(e)}))("keydown.Home",(function(e){return t.onKeyDown(e)}))("keydown.End",(function(e){return t.onKeyDown(e)})),2&e&&(n.Db("aria-orientation","vertical"===t.orientation&&"tablist"===t.roles?"vertical":void 0)("role",t.role?t.role:t.roles?"tablist":void 0),n.Hb("nav",!0)("flex-column","vertical"===t.orientation))},inputs:{destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard",activeId:"activeId"},outputs:{activeIdChange:"activeIdChange",navChange:"navChange"},exportAs:["ngbNav"]}),e})(),Cs=(()=>{let e=class{constructor(e,t,i,n){this.role=e,this.navItem=t,this.nav=i,this.elRef=n}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}};return e.\u0275fac=function(t){return new(t||e)(n.gc("role"),n.Rb(gs),n.Rb(vs),n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostVars:14,hostBindings:function(e,t){1&e&&n.jc("click",(function(e){return t.nav.click(t.navItem),e.preventDefault()})),2&e&&(n.ac("id",t.navItem.domId),n.Db("role",t.role?t.role:t.nav.roles?"tab":void 0)("tabindex",t.navItem.disabled?-1:void 0)("aria-controls",t.navItem.isPanelInDom()?t.navItem.panelDomId:null)("aria-selected",t.navItem.active)("aria-disabled",t.navItem.disabled),n.Hb("nav-link",!0)("nav-item",t.hasNavItemClass())("active",t.navItem.active)("disabled",t.navItem.disabled))}}),e})(),Es=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["","ngbNavOutlet",""]],hostVars:2,hostBindings:function(e,t){2&e&&n.Hb("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},attrs:Fe,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","tab-pane",3,"id","active",4,"ngIf"],[1,"tab-pane",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&n.Xc(0,Ge,1,1,"ng-template",0),2&e&&n.wc("ngForOf",t.nav.items)},directives:[s.t,s.u,s.B],encapsulation:2}),e})(),ws=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Ss=(()=>{let e=class{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),ys=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationEllipsis",""]]}),e})(),Os=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationFirst",""]]}),e})(),As=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationLast",""]]}),e})(),ks=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationNext",""]]}),e})(),Ts=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationNumber",""]]}),e})(),Ds=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbPaginationPrevious",""]]}),e})(),Is=(()=>{let e=class{constructor(e){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new n.n(!0),this.disabled=e.disabled,this.boundaryLinks=e.boundaryLinks,this.directionLinks=e.directionLinks,this.ellipses=e.ellipses,this.maxSize=e.maxSize,this.pageSize=e.pageSize,this.rotate=e.rotate,this.size=e.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(e){this._updatePages(e)}ngOnChanges(e){this._updatePages(this.page)}isEllipsis(e){return-1===e}_applyEllipses(e,t){this.ellipses&&(e>0&&(e>2?this.pages.unshift(-1):2===e&&this.pages.unshift(2),this.pages.unshift(1)),t<this.pageCount&&(t<this.pageCount-2?this.pages.push(-1):t===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let e=0,t=this.pageCount,i=Math.floor(this.maxSize/2);return this.page<=i?t=this.maxSize:this.pageCount-this.page<i?e=this.pageCount-this.maxSize:(e=this.page-i-1,t=this.page+(this.maxSize%2==0?i-1:i)),[e,t]}_applyPagination(){let e=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[e,e+this.maxSize]}_setPageInRange(e){const t=this.page;this.page=mi(e,this.pageCount,1),this.page!==t&&vi(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(e){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),vi(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let t=1;t<=this.pageCount;t++)this.pages.push(t);if(this._setPageInRange(e),this.maxSize>0&&this.pageCount>this.maxSize){let e=0,t=this.pageCount;[e,t]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(e,t),this._applyEllipses(e,t)}}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Ss))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-pagination"]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,ys,!0),n.Jb(i,Os,!0),n.Jb(i,As,!0),n.Jb(i,ks,!0),n.Jb(i,Ts,!0),n.Jb(i,Ds,!0)),2&e&&(n.Kc(s=n.kc())&&(t.tplEllipsis=s.first),n.Kc(s=n.kc())&&(t.tplFirst=s.first),n.Kc(s=n.kc())&&(t.tplLast=s.first),n.Kc(s=n.kc())&&(t.tplNext=s.first),n.Kc(s=n.kc())&&(t.tplNumber=s.first),n.Kc(s=n.kc())&&(t.tplPrevious=s.first))},hostAttrs:["role","navigation"],inputs:{page:"page",disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",maxSize:"maxSize",pageSize:"pageSize",rotate:"rotate",size:"size",collectionSize:"collectionSize"},outputs:{pageChange:"pageChange"},features:[n.Ab],decls:18,vars:7,consts:[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["class","page-item",3,"disabled",4,"ngIf"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],["aria-hidden","true"],["class","sr-only",4,"ngIf"],[1,"sr-only"],[1,"page-item"],["href","",1,"page-link",3,"click",6,"aria-label"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"]],template:function(e,t){1&e&&(n.Xc(0,$e,2,0,"ng-template",null,0,n.Yc),n.Xc(2,ze,2,0,"ng-template",null,1,n.Yc),n.Xc(4,Ze,2,0,"ng-template",null,2,n.Yc),n.Xc(6,Ke,2,0,"ng-template",null,3,n.Yc),n.Xc(8,qe,1,0,"ng-template",null,4,n.Yc),n.Xc(10,Qe,2,2,"ng-template",null,5,n.Yc),n.Xb(12,"ul"),n.Xc(13,nt,4,9,"li",6),n.Xc(14,at,4,8,"li",6),n.Xc(15,bt,3,7,"li",7),n.Xc(16,gt,4,9,"li",6),n.Xc(17,Et,4,9,"li",6),n.Wb()),2&e&&(n.Cb(12),n.Eb("pagination"+(t.size?" pagination-"+t.size:"")),n.Cb(1),n.wc("ngIf",t.boundaryLinks),n.Cb(1),n.wc("ngIf",t.directionLinks),n.Cb(1),n.wc("ngForOf",t.pages),n.Cb(1),n.wc("ngIf",t.directionLinks),n.Cb(1),n.wc("ngIf",t.boundaryLinks))},directives:[s.u,s.t,s.B],encapsulation:2,changeDetection:0}),e})(),_s=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();class Rs{constructor(e,t){this.open=e,this.close=t,t||(this.close=e)}isManual(){return"manual"===this.open||"manual"===this.close}}const Ls={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},xs=e=>e>0?M(e):e=>e;function Ps(e,t,i,n,s,r,o=0,a=0){const c=function(e,t=Ls){const i=(e||"").trim();if(0===i.length)return[];const n=i.split(/\s+/).map(e=>e.split(":")).map(e=>{let i=t[e[0]]||e;return new Rs(i[0],i[1])}),s=n.filter(e=>e.isManual());if(s.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===s.length&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return n}(i);if(1===c.length&&c[0].isManual())return()=>{};const l=function(e,t,i,n){return new u.a(s=>{const r=[],o=()=>s.next(!0),a=()=>s.next(!1),c=()=>s.next(!n());return i.forEach(i=>{i.open===i.close?r.push(e.listen(t,i.open,c)):r.push(e.listen(t,i.open,o),e.listen(t,i.close,a))}),()=>{r.forEach(e=>e())}})}(e,t,c,n).pipe(function(e,t,i){return n=>{let s=null;const r=n.pipe(Object(w.a)(e=>({open:e})),Object(k.a)(e=>{const t=i();return t===e.open||s&&s.open!==t?(s&&s.open!==e.open&&(s=null),!1):(s=e,!0)}),Object(B.a)()),o=r.pipe(Object(k.a)(e=>e.open),xs(e)),a=r.pipe(Object(k.a)(e=>!e.open),xs(t));return Object(b.a)(o,a).pipe(Object(k.a)(e=>e===s&&(s=null,e.open!==i())),Object(w.a)(e=>e.open))}}(o,a,n)).subscribe(e=>e?s():r());return()=>l.unsubscribe()}let js=(()=>{let e=class{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Ms=0,Xs=(()=>{let e=class{isTitleTemplate(){return this.title instanceof n.M}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(e,t){2&e&&(n.ac("id",t.id),n.Eb("popover"+(t.popoverClass?" "+t.popoverClass:"")))},inputs:{title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:K,decls:4,vars:1,consts:[[1,"arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.vc(),n.Sb(0,"div",0),n.Xc(1,yt,4,2,"h3",1),n.Xb(2,"div",2),n.uc(3),n.Wb()),2&e&&(n.Cb(1),n.wc("ngIf",null!=t.title))},directives:[s.u,s.B],styles:["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],encapsulation:2,changeDetection:0}),e})(),Fs=(()=>{let e=class{constructor(e,t,i,s,r,o,a,c,l,u){this._elementRef=e,this._renderer=t,this._ngZone=a,this._document=c,this._changeDetector=l,this.shown=new n.n,this.hidden=new n.n,this._ngbPopoverWindowId="ngb-popover-"+Ms++,this._windowRef=null,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new is(Xs,i,r,t,s,u),this._zoneSubscription=a.onStable.subscribe(()=>{this._windowRef&&Pn(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-popover")})}_isDisabled(){return!!this.disablePopover||!this.ngbPopover&&!this.popoverTitle}open(e){this._windowRef||this._isDisabled()||(this._windowRef=this._popupService.open(this.ngbPopover,e),this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=e,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=Ps(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:e,popoverTitle:t,disablePopover:i,popoverClass:n}){n&&this.isOpen()&&(this._windowRef.instance.popoverClass=n.currentValue),(e||t||i)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.F),n.Rb(n.r),n.Rb(n.j),n.Rb(n.P),n.Rb(js),n.Rb(n.z),n.Rb(s.e),n.Rb(n.h),n.Rb(n.g))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbPopover",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[n.Ab]}),e})(),Ws=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Bs=(()=>{let e=class{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),Ns=(()=>{let e=class{constructor(e){this.value=0,this.max=e.max,this.animated=e.animated,this.striped=e.striped,this.textType=e.textType,this.type=e.type,this.showValue=e.showValue,this.height=e.height}set max(e){this._max=!vi(e)||e<=0?100:e}get max(){return this._max}getValue(){return mi(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Bs))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-progressbar"]],inputs:{value:"value",max:"max",animated:"animated",striped:"striped",textType:"textType",type:"type",showValue:"showValue",height:"height"},ngContentSelectors:K,decls:4,vars:13,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0"],[4,"ngIf"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xc(2,At,3,3,"span",2),n.uc(3),n.Wb(),n.Wb()),2&e&&(n.Wc("height",t.height),n.Cb(1),n.Gb("progress-bar",t.type?" bg-"+t.type:"","",t.textType?" text-"+t.textType:"","\n      ",t.animated?" progress-bar-animated":"","",t.striped?" progress-bar-striped":"",""),n.Wc("width",t.getPercentValue(),"%"),n.Db("aria-valuenow",t.getValue())("aria-valuemax",t.max),n.Cb(1),n.wc("ngIf",t.showValue))},directives:[s.u],pipes:[s.D],encapsulation:2,changeDetection:0}),e})(),Gs=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),Us=(()=>{let e=class{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Vs={provide:r.q,useExisting:Object(n.U)(()=>Hs),multi:!0};let Hs=(()=>{let e=class{constructor(e,t){this._changeDetectorRef=t,this.contexts=[],this.disabled=!1,this.hover=new n.n,this.leave=new n.n,this.rateChange=new n.n(!0),this.onChange=e=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}enter(e){this.readonly||this.disabled||this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.readonly||this.disabled||this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case En.ArrowDown:case En.ArrowLeft:this.update(this.rate-1);break;case En.ArrowUp:case En.ArrowRight:this.update(this.rate+1);break;case En.Home:this.update(0);break;case En.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(e,t)=>({fill:0,index:t})),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,t=!0){const i=mi(e,this.max,0);this.readonly||this.disabled||this.rate===i||(this.rate=i,this.rateChange.emit(this.rate)),t&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_getFillValue(e){const t=this.nextRate-e;return t>=1?100:t<1&&t>0?parseInt((100*t).toFixed(2),10):0}_updateState(e){this.nextRate=e,this.contexts.forEach((e,t)=>e.fill=this._getFillValue(t))}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(Us),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-rating"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,n.M,!0),2&e&&n.Kc(s=n.kc())&&(t.starTemplateFromContent=s.first)},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,t){1&e&&n.jc("blur",(function(){return t.handleBlur()}))("keydown",(function(e){return t.handleKeyDown(e)}))("mouseleave",(function(){return t.reset()})),2&e&&(n.ac("tabindex",t.disabled?-1:0),n.Db("aria-valuemax",t.max)("aria-valuenow",t.nextRate)("aria-valuetext",t.ariaValueText())("aria-disabled",!!t.readonly||null))},inputs:{max:"max",readonly:"readonly",rate:"rate",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[n.Bb([Vs]),n.Ab],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"sr-only"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Xc(0,kt,1,1,"ng-template",null,0,n.Yc),n.Xc(2,Dt,4,5,"ng-template",1)),2&e&&(n.Cb(2),n.wc("ngForOf",t.contexts))},directives:[s.t,s.B],encapsulation:2,changeDetection:0}),e})(),Ys=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),$s=(()=>{let e=class{constructor(){this.justify="start",this.orientation="horizontal",this.type="tabs"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),zs=0,Zs=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbTabTitle",""]]}),e})(),Ks=(()=>{let e=class{constructor(e){this.templateRef=e}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","ngbTabContent",""]]}),e})(),qs=(()=>{let e=class{constructor(){this.id="ngb-tab-"+zs++,this.disabled=!1}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.contentTpl=this.contentTpls.first}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["ngb-tab"]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,Zs,!1),n.Jb(i,Ks,!1)),2&e&&(n.Kc(s=n.kc())&&(t.titleTpls=s),n.Kc(s=n.kc())&&(t.contentTpls=s))},inputs:{id:"id",disabled:"disabled",title:"title"}}),e})(),Js=(()=>{let e=class{constructor(e){this.destroyOnHide=!0,this.tabChange=new n.n,this.type=e.type,this.justify=e.justify,this.orientation=e.orientation}set justify(e){this.justifyClass="fill"===e||"justified"===e?"nav-"+e:"justify-content-"+e}select(e){let t=this._getTabById(e);if(t&&!t.disabled&&this.activeId!==t.id){let e=!1;this.tabChange.emit({activeId:this.activeId,nextId:t.id,preventDefault:()=>{e=!0}}),e||(this.activeId=t.id)}}ngAfterContentChecked(){let e=this._getTabById(this.activeId);this.activeId=e?e.id:this.tabs.length?this.tabs.first.id:null}_getTabById(e){let t=this.tabs.filter(t=>t.id===e);return t.length?t[0]:null}};return e.\u0275fac=function(t){return new(t||e)(n.Rb($s))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-tabset"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,qs,!1),2&e&&n.Kc(s=n.kc())&&(t.tabs=s)},inputs:{destroyOnHide:"destroyOnHide",type:"type",justify:"justify",orientation:"orientation",activeId:"activeId"},outputs:{tabChange:"tabChange"},exportAs:["ngbTabset"],decls:4,vars:4,consts:[["role","tablist"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],["ngFor","",3,"ngForOf"],[1,"nav-item"],["href","","role","tab",1,"nav-link",3,"id","click"],[3,"ngTemplateOutlet"],["role","tabpanel",3,"class","id",4,"ngIf"],["role","tabpanel",3,"id"]],template:function(e,t){1&e&&(n.Xb(0,"ul",0),n.Xc(1,_t,4,11,"li",1),n.Wb(),n.Xb(2,"div",2),n.Xc(3,xt,1,1,"ng-template",3),n.Wb()),2&e&&(n.Eb("nav nav-"+t.type+("horizontal"==t.orientation?" "+t.justifyClass:" flex-column")),n.Cb(1),n.wc("ngForOf",t.tabs),n.Cb(2),n.wc("ngForOf",t.tabs))},directives:[s.t,s.B,s.u],encapsulation:2}),e})(),Qs=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();class er{constructor(e,t,i){this.hour=bi(e),this.minute=bi(t),this.second=bi(i)}changeHour(e=1){this.updateHour((isNaN(this.hour)?0:this.hour)+e)}updateHour(e){this.hour=vi(e)?(e<0?24+e:e)%24:NaN}changeMinute(e=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+e)}updateMinute(e){vi(e)?(this.minute=e%60<0?60+e%60:e%60,this.changeHour(Math.floor(e/60))):this.minute=NaN}changeSecond(e=1){this.updateSecond((isNaN(this.second)?0:this.second)+e)}updateSecond(e){vi(e)?(this.second=e<0?60+e%60:e%60,this.changeMinute(Math.floor(e/60))):this.second=NaN}isValid(e=!0){return vi(this.hour)&&vi(this.minute)&&(!e||vi(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let tr=(()=>{let e=class{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();function ir(){return new sr}let nr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:ir,token:e,providedIn:"root"}),e})(),sr=(()=>{let e=class extends nr{fromModel(e){return e&&Ci(e.hour)&&Ci(e.minute)?{hour:e.hour,minute:e.minute,second:Ci(e.second)?e.second:null}:null}toModel(e){return e&&Ci(e.hour)&&Ci(e.minute)?{hour:e.hour,minute:e.minute,second:Ci(e.second)?e.second:null}:null}};return e.\u0275fac=function(t){return Mr(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})(),rr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return e=Object(n.fc)(n.u),new or(e);var e},token:e,providedIn:"root"}),e})(),or=(()=>{let e=class extends rr{constructor(e){super(),this._periods=Object(s.N)(e,s.h.Standalone,s.H.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}};return e.\u0275fac=function(t){return new(t||e)(n.fc(n.u))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})();const ar=/[^0-9]/g,cr={provide:r.q,useExisting:Object(n.U)(()=>lr),multi:!0};let lr=(()=>{let e=class{constructor(e,t,i,n){this._config=e,this._ngbTimeAdapter=t,this._cd=i,this.i18n=n,this.onChange=e=>{},this.onTouched=()=>{},this.meridian=e.meridian,this.spinners=e.spinners,this.seconds=e.seconds,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.secondStep=e.secondStep,this.disabled=e.disabled,this.readonlyInputs=e.readonlyInputs,this.size=e.size}set hourStep(e){this._hourStep=Ci(e)?e:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(e){this._minuteStep=Ci(e)?e:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(e){this._secondStep=Ci(e)?e:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(e){const t=this._ngbTimeAdapter.fromModel(e);this.model=t?new er(t.hour,t.minute,t.second):new er,this.seconds||t&&vi(t.second)||(this.model.second=0),this._cd.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}changeHour(e){this.model.changeHour(e),this.propagateModelChange()}changeMinute(e){this.model.changeMinute(e),this.propagateModelChange()}changeSecond(e){this.model.changeSecond(e),this.propagateModelChange()}updateHour(e){const t=this.model.hour>=12,i=bi(e);this.model.updateHour(this.meridian&&(t&&i<12||!t&&12===i)?i+12:i),this.propagateModelChange()}updateMinute(e){this.model.updateMinute(bi(e)),this.propagateModelChange()}updateSecond(e){this.model.updateSecond(bi(e)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(e){e.value=e.value.replace(ar,"")}formatHour(e){return vi(e)?wi(this.meridian?e%12==0?12:e%12:e%24):wi(NaN)}formatMinSec(e){return wi(vi(e)?e:NaN)}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(e){e.seconds&&!this.seconds&&this.model&&!vi(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(e=!0){e&&this.onTouched(),this.model.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(tr),n.Rb(nr),n.Rb(n.h),n.Rb(rr))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},features:[n.Bb([cr]),n.Ab],decls:18,vars:25,consts:[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric",1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","input","keydown.ArrowUp","keydown.ArrowDown",6,"placeholder","aria-label"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"sr-only"],[1,"chevron","ngb-tp-chevron","bottom"],[1,"ngb-tp-input-container","ngb-tp-second"],[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""]],template:function(e,t){1&e&&(n.Xb(0,"fieldset",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xc(3,Bt,4,7,"button",3),n.Xb(4,"input",4),n.dc(5,Pt),n.jc("change",(function(e){return t.updateHour(e.target.value)}))("input",(function(e){return t.formatInput(e.target)}))("keydown.ArrowUp",(function(e){return t.changeHour(t.hourStep),e.preventDefault()}))("keydown.ArrowDown",(function(e){return t.changeHour(0-t.hourStep),e.preventDefault()})),n.Wb(),n.Xc(6,Nt,4,7,"button",3),n.Wb(),n.Xb(7,"div",5),n.Zc(8,":"),n.Wb(),n.Xb(9,"div",6),n.Xc(10,Gt,4,7,"button",3),n.Xb(11,"input",4),n.dc(12,jt),n.jc("change",(function(e){return t.updateMinute(e.target.value)}))("input",(function(e){return t.formatInput(e.target)}))("keydown.ArrowUp",(function(e){return t.changeMinute(t.minuteStep),e.preventDefault()}))("keydown.ArrowDown",(function(e){return t.changeMinute(0-t.minuteStep),e.preventDefault()})),n.Wb(),n.Xc(13,Ut,4,7,"button",3),n.Wb(),n.Xc(14,Vt,2,0,"div",7),n.Xc(15,Jt,5,9,"div",8),n.Xc(16,Qt,1,0,"div",7),n.Xc(17,ii,5,9,"div",9),n.Wb(),n.Wb()),2&e&&(n.Hb("disabled",t.disabled),n.wc("disabled",t.disabled),n.Cb(3),n.wc("ngIf",t.spinners),n.Cb(1),n.Hb("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),n.wc("value",t.formatHour(null==t.model?null:t.model.hour))("readOnly",t.readonlyInputs)("disabled",t.disabled),n.Cb(2),n.wc("ngIf",t.spinners),n.Cb(4),n.wc("ngIf",t.spinners),n.Cb(1),n.Hb("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),n.wc("value",t.formatMinSec(null==t.model?null:t.model.minute))("readOnly",t.readonlyInputs)("disabled",t.disabled),n.Cb(2),n.wc("ngIf",t.spinners),n.Cb(1),n.wc("ngIf",t.seconds),n.Cb(1),n.wc("ngIf",t.seconds),n.Cb(1),n.wc("ngIf",t.meridian),n.Cb(1),n.wc("ngIf",t.meridian))},directives:[s.u],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron::before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;-webkit-transform:rotate(135deg);transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-meridian,.ngb-tp-minute,.ngb-tp-second{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}'],encapsulation:2}),e})(),ur=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),dr=(()=>{let e=class{constructor(){this.autohide=!0,this.delay=500,this.ariaLive="polite"}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),hr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbToastHeader",""]]}),e})(),pr=(()=>{let e=class{constructor(e,t){this.ariaLive=e,this.contentHeaderTpl=null,this.hideOutput=new n.n,null==this.ariaLive&&(this.ariaLive=t.ariaLive),this.delay=t.delay,this.autohide=t.autohide}ngAfterContentInit(){this._init()}ngOnChanges(e){"autohide"in e&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout(),this.hideOutput.emit()}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}};return e.\u0275fac=function(t){return new(t||e)(n.gc("aria-live"),n.Rb(dr))},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-toast"]],contentQueries:function(e,t,i){var s;1&e&&n.Tc(i,hr,!0,n.M),2&e&&n.Kc(s=n.kc())&&(t.contentHeaderTpl=s.first)},hostAttrs:["role","alert","aria-atomic","true"],hostVars:5,hostBindings:function(e,t){2&e&&(n.Db("aria-live",t.ariaLive),n.Hb("toast",!0)("show",!0))},inputs:{delay:"delay",autohide:"autohide",header:"header"},outputs:{hideOutput:"hide"},exportAs:["ngbToast"],features:[n.Ab],ngContentSelectors:K,decls:5,vars:1,consts:[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"mr-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(e,t){1&e&&(n.vc(),n.Xc(0,ni,2,1,"ng-template",null,0,n.Yc),n.Xc(2,oi,6,1,"ng-template",1),n.Xb(3,"div",2),n.uc(4),n.Wb()),2&e&&(n.Cb(2),n.wc("ngIf",t.contentHeaderTpl||t.header))},directives:[s.u,s.B],styles:[".ngb-toasts{position:fixed;top:0;right:0;margin:.5em;z-index:1200}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}"],encapsulation:2}),e})(),br=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),fr=(()=>{let e=class{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),mr=0,gr=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(e,t){2&e&&(n.ac("id",t.id),n.Eb("tooltip show"+(t.tooltipClass?" "+t.tooltipClass:"")))},inputs:{id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:K,decls:3,vars:0,consts:[[1,"arrow"],[1,"tooltip-inner"]],template:function(e,t){1&e&&(n.vc(),n.Sb(0,"div",0),n.Xb(1,"div",1),n.uc(2),n.Wb())},styles:["ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],encapsulation:2,changeDetection:0}),e})(),vr=(()=>{let e=class{constructor(e,t,i,s,r,o,a,c,l,u){this._elementRef=e,this._renderer=t,this._ngZone=a,this._document=c,this._changeDetector=l,this.shown=new n.n,this.hidden=new n.n,this._ngbTooltipWindowId="ngb-tooltip-"+mr++,this._windowRef=null,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disableTooltip=o.disableTooltip,this.tooltipClass=o.tooltipClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new is(gr,i,r,t,s,u),this._zoneSubscription=a.onStable.subscribe(()=>{this._windowRef&&Pn(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-tooltip")})}set ngbTooltip(e){this._ngbTooltip=e,!e&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(e){this._windowRef||!this._ngbTooltip||this.disableTooltip||(this._windowRef=this._popupService.open(this._ngbTooltip,e),this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),Tn(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=Ps(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:e}){e&&this.isOpen()&&(this._windowRef.instance.tooltipClass=e.currentValue)}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.F),n.Rb(n.r),n.Rb(n.j),n.Rb(n.P),n.Rb(fr),n.Rb(n.z),n.Rb(s.e),n.Rb(n.h),n.Rb(n.g))},e.\u0275dir=n.Mb({type:e,selectors:[["","ngbTooltip",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[n.Ab]}),e})(),Cr=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})(),Er=(()=>{let e=class{constructor(){this.highlightClass="ngb-highlight"}ngOnChanges(e){const t=fi(this.result),i=(Array.isArray(this.term)?this.term:[this.term]).map(e=>fi(e).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")).filter(e=>e);this.parts=i.length?t.split(new RegExp(`(${i.join("|")})`,"gmi")):[t]}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term"},features:[n.Ab],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(e,t){1&e&&n.Xc(0,li,3,2,"ng-template",0),2&e&&n.wc("ngForOf",t.parts)},directives:[s.t,s.u],styles:[".ngb-highlight{font-weight:700}"],encapsulation:2,changeDetection:0}),e})(),wr=(()=>{let e=class{constructor(){this.activeIdx=0,this.focusFirst=!0,this.formatter=fi,this.selectEvent=new n.n,this.activeChangeEvent=new n.n}hasActive(){return this.activeIdx>-1&&this.activeIdx<this.results.length}getActive(){return this.results[this.activeIdx]}markActive(e){this.activeIdx=e,this._activeChanged()}next(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()}prev(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()}resetActive(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()}select(e){this.selectEvent.emit(e)}ngOnInit(){this.resetActive()}_activeChanged(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["ngb-typeahead-window"]],hostAttrs:["role","listbox",1,"dropdown-menu","show"],hostVars:1,hostBindings:function(e,t){1&e&&n.jc("mousedown",(function(e){return e.preventDefault()})),2&e&&n.ac("id",t.id)},inputs:{focusFirst:"focusFirst",formatter:"formatter",id:"id",results:"results",term:"term",resultTemplate:"resultTemplate"},outputs:{selectEvent:"select",activeChangeEvent:"activeChange"},exportAs:["ngbTypeaheadWindow"],decls:3,vars:1,consts:[["rt",""],["ngFor","",3,"ngForOf"],[3,"result","term"],["type","button","role","option",1,"dropdown-item",3,"id","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(n.Xc(0,ui,1,2,"ng-template",null,0,n.Yc),n.Xc(2,pi,2,9,"ng-template",1)),2&e&&(n.Cb(2),n.wc("ngForOf",t.results))},directives:[s.t,Er,s.B],encapsulation:2}),e})();const Sr=new n.q("live announcer delay",{providedIn:"root",factory:function(){return 100}});function yr(e,t=!1){let i=e.body.querySelector("#ngb-live");return null==i&&t&&(i=e.createElement("div"),i.setAttribute("id","ngb-live"),i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i.classList.add("sr-only"),e.body.appendChild(i)),i}let Or=(()=>{let e=class{constructor(e,t){this._document=e,this._delay=t}ngOnDestroy(){const e=yr(this._document);e&&e.parentElement.removeChild(e)}say(e){const t=yr(this._document,!0),i=this._delay;if(null!=t){t.textContent="";const n=()=>t.textContent=e;null===i?n():setTimeout(n,i)}}};return e.\u0275fac=function(t){return new(t||e)(n.fc(s.e),n.fc(Sr))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(s.e),Object(n.fc)(Sr))},token:e,providedIn:"root"}),e})(),Ar=(()=>{let e=class{constructor(){this.editable=!0,this.focusFirst=!0,this.showHint=!1,this.placement=["bottom-left","bottom-right","top-left","top-right"]}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const kr={provide:r.q,useExisting:Object(n.U)(()=>Dr),multi:!0};let Tr=0,Dr=(()=>{let e=class{constructor(e,t,i,s,r,c,l,u,d,h,b,f){this._elementRef=e,this._renderer=i,this._live=u,this._document=d,this._ngZone=h,this._changeDetector=b,this._subscription=null,this._closed$=new o.a,this._inputValueBackup=null,this._windowRef=null,this.autocomplete="off",this.placement="bottom-left",this.selectItem=new n.n,this.activeDescendant=null,this.popupId="ngb-typeahead-"+Tr++,this._onTouched=()=>{},this._onChange=e=>{},this.container=c.container,this.editable=c.editable,this.focusFirst=c.focusFirst,this.showHint=c.showHint,this.placement=c.placement,this._valueChanges=Object(p.a)(e.nativeElement,"input").pipe(Object(w.a)(e=>e.target.value)),this._resubscribeTypeahead=new a.a(null),this._popupService=new is(wr,s,t,i,r,f),this._zoneSubscription=l.onStable.subscribe(()=>{this.isPopupOpen()&&Pn(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container)})}ngOnInit(){const e=this._valueChanges.pipe(Object(D.a)(e=>{this._inputValueBackup=this.showHint?e:null,this._onChange(this.editable?e:void 0)})).pipe(this.ngbTypeahead),t=this._resubscribeTypeahead.pipe(Object(O.a)(()=>e));this._subscription=this._subscribeToUserInput(t)}ngOnDestroy(){this._closePopup(),this._unsubscribeFromUserInput(),this._zoneSubscription.unsubscribe()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){this._writeInputValue(this._formatItemForInput(e)),this.showHint&&(this._inputValueBackup=e)}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}dismissPopup(){this.isPopupOpen()&&(this._resubscribeTypeahead.next(null),this._closePopup(),this.showHint&&null!==this._inputValueBackup&&this._writeInputValue(this._inputValueBackup),this._changeDetector.markForCheck())}isPopupOpen(){return null!=this._windowRef}handleBlur(){this._resubscribeTypeahead.next(null),this._onTouched()}handleKeyDown(e){if(this.isPopupOpen())switch(e.which){case En.ArrowDown:e.preventDefault(),this._windowRef.instance.next(),this._showHint();break;case En.ArrowUp:e.preventDefault(),this._windowRef.instance.prev(),this._showHint();break;case En.Enter:case En.Tab:const t=this._windowRef.instance.getActive();Ei(t)&&(e.preventDefault(),e.stopPropagation(),this._selectResult(t)),this._closePopup()}}_openPopup(){this.isPopupOpen()||(this._inputValueBackup=this._elementRef.nativeElement.value,this._windowRef=this._popupService.open(),this._windowRef.instance.id=this.popupId,this._windowRef.instance.selectEvent.subscribe(e=>this._selectResultClosePopup(e)),this._windowRef.instance.activeChangeEvent.subscribe(e=>this.activeDescendant=e),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._changeDetector.markForCheck(),Tn(this._ngZone,this._document,"outside",()=>this.dismissPopup(),this._closed$,[this._elementRef.nativeElement,this._windowRef.location.nativeElement]))}_closePopup(){this._closed$.next(),this._popupService.close(),this._windowRef=null,this.activeDescendant=null}_selectResult(e){let t=!1;this.selectItem.emit({item:e,preventDefault:()=>{t=!0}}),this._resubscribeTypeahead.next(null),t||(this.writeValue(e),this._onChange(e))}_selectResultClosePopup(e){this._selectResult(e),this._closePopup()}_showHint(){var e;if(this.showHint&&(null===(e=this._windowRef)||void 0===e?void 0:e.instance.hasActive())&&null!=this._inputValueBackup){const e=this._inputValueBackup.toLowerCase(),t=this._formatItemForInput(this._windowRef.instance.getActive());e===t.substr(0,this._inputValueBackup.length).toLowerCase()?(this._writeInputValue(this._inputValueBackup+t.substr(this._inputValueBackup.length)),this._elementRef.nativeElement.setSelectionRange.apply(this._elementRef.nativeElement,[this._inputValueBackup.length,t.length])):this._writeInputValue(t)}}_formatItemForInput(e){return null!=e&&this.inputFormatter?this.inputFormatter(e):fi(e)}_writeInputValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",fi(e))}_subscribeToUserInput(e){return e.subscribe(e=>{e&&0!==e.length?(this._openPopup(),this._windowRef.instance.focusFirst=this.focusFirst,this._windowRef.instance.results=e,this._windowRef.instance.term=this._elementRef.nativeElement.value,this.resultFormatter&&(this._windowRef.instance.formatter=this.resultFormatter),this.resultTemplate&&(this._windowRef.instance.resultTemplate=this.resultTemplate),this._windowRef.instance.resetActive(),this._windowRef.changeDetectorRef.detectChanges(),this._showHint()):this._closePopup();const t=e?e.length:0;this._live.say(0===t?"No results available":`${t} result${1===t?"":"s"} available`)})}_unsubscribeFromUserInput(){this._subscription&&this._subscription.unsubscribe(),this._subscription=null}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.P),n.Rb(n.F),n.Rb(n.r),n.Rb(n.j),n.Rb(Ar),n.Rb(n.z),n.Rb(Or),n.Rb(s.e),n.Rb(n.z),n.Rb(n.h),n.Rb(n.g))},e.\u0275dir=n.Mb({type:e,selectors:[["input","ngbTypeahead",""]],hostAttrs:["autocapitalize","off","autocorrect","off","role","combobox","aria-multiline","false"],hostVars:7,hostBindings:function(e,t){1&e&&n.jc("blur",(function(){return t.handleBlur()}))("keydown",(function(e){return t.handleKeyDown(e)})),2&e&&(n.ac("autocomplete",t.autocomplete),n.Db("aria-autocomplete",t.showHint?"both":"list")("aria-activedescendant",t.activeDescendant)("aria-owns",t.isPopupOpen()?t.popupId:null)("aria-expanded",t.isPopupOpen()),n.Hb("open",t.isPopupOpen()))},inputs:{autocomplete:"autocomplete",placement:"placement",container:"container",editable:"editable",focusFirst:"focusFirst",showHint:"showHint",inputFormatter:"inputFormatter",ngbTypeahead:"ngbTypeahead",resultFormatter:"resultFormatter",resultTemplate:"resultTemplate"},outputs:{selectItem:"selectItem"},exportAs:["ngbTypeahead"],features:[n.Bb([kr])]}),e})(),Ir=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();const _r=[Ri,Pi,Gi,Zi,qi,Vn,Qn,hs,ws,_s,Ws,Gs,Ys,ur,br,Cr,Ir,Qs];let Rr=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[_r,Ri,Pi,Gi,Zi,qi,Vn,Qn,hs,ws,_s,Ws,Gs,Ys,ur,br,Cr,Ir,Qs]}),e})();const Lr=n.Zb(sn),xr=n.Zb(mn),Pr=n.Zb(Xn),jr=n.Zb(Fn),Mr=n.Zb(sr)},"1uah":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("yCtX"),s=i("DH7j"),r=i("7o/Q"),o=i("l7GE"),a=i("ZUHj"),c=i("Lhse");function l(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),Object(n.a)(e,void 0).lift(new u(t))}class u{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new d(e,this.resultSelector))}}class d extends r.a{constructor(e,t,i=Object.create(null)){super(e),this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:null,this.values=i}_next(e){const t=this.iterators;Object(s.a)(e)?t.push(new p(e)):t.push("function"==typeof e[c.a]?new h(e[c.a]()):new b(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let t=e[i];t.stillUnsubscribed?this.destination.add(t.subscribe(t,i)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let r=0;r<t;r++){let t=e[r];if("function"==typeof t.hasValue&&!t.hasValue())return}let n=!1;const s=[];for(let r=0;r<t;r++){let t=e[r],o=t.next();if(t.hasCompleted()&&(n=!0),o.done)return void i.complete();s.push(o.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),n&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class h{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return e&&e.done}}class p{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[c.a](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class b extends o.a{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[c.a](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e,t,i,n,s){this.buffer.push(t),this.parent.checkIterators()}subscribe(e,t){return Object(a.a)(this,this.observable,this,t)}}},"27el":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("UMzN"),s=i("xoOP"),r=i("O3o7");class o{constructor(e){this.isFavorite=e.isFavorite||!e.client.id&&"Favorites"===e.client.name||!1,this.isSelected=e.isSelected||!1,this.client=new n.a(e.client),this.projectsCount=e.projectsCount,this.projects=(e.projects||[]).map(e=>new r.a(e)),this.areAllProjectsLoaded=e.areAllProjectsLoaded}updatePojectsCountBy(e){Number.isInteger(this.projectsCount)&&(this.projectsCount=this.projectsCount+e)}static groupProjectsToClientGroups(e){const t={};e.forEach(e=>{var i,n;const s=(null===(i=e.client)||void 0===i?void 0:i.id)||"";t[s]||(t[s]={clientName:(null===(n=e.client)||void 0===n?void 0:n.name)||"",projects:[]}),t[s].projects.push(e)});const i=[];for(const s in t){const e={client:new n.a({name:t[s].clientName,id:s}),isSelected:!0,projects:t[s].projects},r=new o(e);i.push(r)}return i}static filterDontCollapsedProjects(e,t){return Object(s.r)(t)?e:e.length?e.filter(e=>{const i=t[e.id];return!i||!i.isSelctedWithoutTask||e.taskCount>0||e.taskCount>i.taskIds.length}):e}}},"2rWG":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("fXoL"),s=i("2Vo4"),r=i("XNiG"),o=i("/uUt"),a=i("Kj3r"),c=i("1G5W"),l=i("DoKE"),u=i("qb1n");let d=(()=>{class e{constructor(e,t,i){this.elementRef=e,this.resizeableService=t,this.renderer=i,this.dropdownUpClassName="cl-dropup",this.dropdownLeftClassName="cl-dropdown-left",this.openToLeftIfNeed=!1,this.isHoverEnabled=!1,this.onOpen=new n.n,this.onClose=new n.n,this.onTryingToClose=new n.n,this.disableClose=!1,this.clickSubject$=new s.a(!1),this.click$=this.clickSubject$.asObservable().pipe(Object(o.a)()),this.hoverDebouncer$=new r.a,this.unsubscribe$=new r.a,this.debounceTime=100,this.documentClicked=e=>{var t;e.target.hasAttribute("doNotCloseDropdown")||((e.target.hasAttribute("clickCloseDropdown")||(null===(t=e.target.parentElement)||void 0===t?void 0:t.hasAttribute("clickCloseDropdown")))&&this.closeDropdown(),this.elementRef.nativeElement.contains(e.target)||this.closeDropdown())},this.documentMouseOver=e=>{const t=this.elementRef.nativeElement.contains(e.target);this.hoverDebouncer$.next(t)},this.keyupPressed=e=>{"Escape"===e.code&&this.closeDropdown()}}set disabled(e){this._disabled=e,!1===e&&this.visible&&this.closeDropdown()}get disabled(){return this._disabled}keydown(e){(e.keyCode?e.keyCode:e.which)===l.i&&e.target.hasAttribute("dropdownClose")&&!e.shiftKey&&this.closeDropdown()}keyup(e){const t=e.keyCode?e.keyCode:e.which,i=e.ctrlKey;if(t!==l.h||i){if(t!==l.d||i)return e.target.hasAttribute("dropdownClose")&&!e.shiftKey?(this.focusOnNextElement(),void this.closeDropdown()):void 0;e.target.hasAttribute("clickCloseDropdown")&&this.closeDropdown()}else e.target.hasAttribute("clickCloseDropdown")&&this.closeDropdown()}isElementInside(e){return this.elementRef.nativeElement.contains(e)}focusOnNextElement(){const e=this.elementRef.nativeElement.closest("[tabRow]"),t=this.elementRef.nativeElement.closest("[tabCell]");if(!t||!e)return;const i=this.getNextElement(t,e);if(i)i.focus();else{const e=t.querySelector("[tabFocus]");e&&e.focus()}}getNextElement(e,t){try{let i=Array.from(t.querySelectorAll("[tabindex]"));i=i.filter(e=>0===Number(e.getAttribute("tabindex")));for(let t=0;t<i.length;t++)if(4===e.compareDocumentPosition(i[t]))return i[t];return null}catch(i){return null}}showDropdown(){this.disabled||this.visible||(this.isHoverEnabled&&(this.subscribeToMousOver(),this.listenerDropdownMouseOverFn=this.renderer.listen(document,"mouseover",this.documentMouseOver)),this.setIsOpenLeft(),this.visible=!0,this.clickSubject$.next(this.visible),this.listenerFn=this.renderer.listen(document,"click",this.documentClicked),this.listenerKeyboardFn=this.renderer.listen(document,"keyup",this.keyupPressed),this.onOpen.emit(),setTimeout(()=>{this.setIsOpenUp()},10))}toggleDropdown(){this.visible?this.closeDropdown():this.showDropdown()}subscribeToMousOver(){this.hoverDebouncer$.pipe(Object(a.a)(this.debounceTime),Object(o.a)(),Object(c.a)(this.unsubscribe$)).subscribe(e=>{e||this.closeDropdown()})}closeDropdown(){this.onTryingToClose.emit(),this.disableClose||this.resizeableService.isResizing||!this.visible||this.forceClose()}forceClose(){this.visible=!1,this.clickSubject$.next(this.visible),this.finishSubscriptions(),this.removeListeners(),this.renderer.removeClass(this.elementRef.nativeElement,this.dropdownUpClassName),this.onClose.emit()}ngOnDestroy(){this.removeListeners(),this.finishSubscriptions()}finishSubscriptions(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}removeListeners(){this.listenerFn&&this.listenerFn(),this.listenerKeyboardFn&&this.listenerKeyboardFn(),this.listenerDropdownMouseOverFn&&this.listenerDropdownMouseOverFn()}setIsOpenLeft(){if(this.openToLeftIfNeed)try{const e=this.elementRef.nativeElement.getBoundingClientRect(),t=document.getElementById("layout-main").getBoundingClientRect(),i=20,n=t.right-e.right-i+e.width,s=e.left-t.left-i;n<320&&s>n?this.renderer.addClass(this.elementRef.nativeElement,this.dropdownLeftClassName):this.renderer.removeClass(this.elementRef.nativeElement,this.dropdownLeftClassName)}catch(e){}}setIsOpenUp(){try{if(this.elementRef.nativeElement.querySelector("[alwaysUp]"))return void this.renderer.addClass(this.elementRef.nativeElement,this.dropdownUpClassName);const e=this.elementRef.nativeElement.querySelector("[openUpAtBottom]");if(!e)return;const t=this.elementRef.nativeElement.getBoundingClientRect().top,i=window.innerHeight,n=e.getBoundingClientRect().height;i-t<n+5&&t>n?this.renderer.addClass(this.elementRef.nativeElement,this.dropdownUpClassName):this.renderer.removeClass(this.elementRef.nativeElement,this.dropdownUpClassName)}catch(e){}}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(u.a),n.Rb(n.F))},e.\u0275dir=n.Mb({type:e,selectors:[["","dropdownKey",""]],hostBindings:function(e,t){1&e&&n.jc("keydown",(function(e){return t.keydown(e)}))("keyup",(function(e){return t.keyup(e)}))},inputs:{disabled:["dropdownKey","disabled"],openToLeftIfNeed:"openToLeftIfNeed",isHoverEnabled:"isHoverEnabled"},outputs:{onOpen:"onOpen",onClose:"onClose",onTryingToClose:"onTryingToClose"},exportAs:["dropdownKey"]}),e})()},"3+I5":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=null==e?void 0:e.id,this._name=null==e?void 0:e.name,this._color=null==e?void 0:e.color,this._clientId=null==e?void 0:e.clientId,this._clientName=null==e?void 0:e.clientName}get id(){return this._id}get name(){return this._name}get color(){return this._color}get clientId(){return this._clientId}get clientName(){return this._clientName}}},"3/ER":function(e,t,i){"use strict";(function(e){var n=i("Ju5/"),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=s&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===s?n.a.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var i=e.length,n=a?a(i):new e.constructor(i);return e.copy(n),n}}).call(this,i("3UD+")(e))},"33WN":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("XNiG"),s=i("l5mm"),r=i("pLZG"),o=i("Kj3r"),a=i("1G5W"),c=i("vkgz"),l=i("xoOP"),u=i("fXoL");let d=(()=>{class e{constructor(e,t){this.el=e,this.renderer=t,this.activeClass="cl-scroll-tabs-active",this.resizeDebouncer$=new n.a,this.unsubscribe$=new n.a,this.listeners={},this.state=new n.a,this.pressCounter=0,this.cancel=this.state.pipe(Object(r.a)(e=>"stop"===e))}ngOnInit(){this.resizeDebouncer$.pipe(Object(o.a)(70),Object(a.a)(this.unsubscribe$)).subscribe(()=>this.recalculate()),this.recalculate()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete(),Object.keys(this.listeners).forEach(e=>{try{this.listeners[e]()}catch(t){}})}onWindowResize(e){this.resizeDebouncer$.next()}recalculate(){const e=this.el.nativeElement;e.scrollWidth>e.parentElement.scrollWidth+10?(this.isGenerated||this.generateButtons(),this.isGenerated=!0,e.classList.add(this.activeClass)):e.classList.remove(this.activeClass)}scrollRight(e=50){this.scroll(e)}scrollLeft(e=-50){this.scroll(e)}scroll(e){this.el.nativeElement.scrollBy(e,0)}generateButtons(){const e=Object(l.g)("li","cl-nav-item cl-scroll-tab-left"),t=Object(l.g)("a","cl-nav-link"),i=Object(l.g)("img");i.src="assets/images/ui-icons/chevron-left.svg";const n=Object(l.g)("li","cl-nav-item cl-scroll-tab-right"),s=Object(l.g)("a","cl-nav-link"),r=Object(l.g)("img");r.src="assets/images/ui-icons/chevron-right.svg",t.appendChild(i),e.appendChild(t),this.renderer.insertBefore(this.el.nativeElement,e,this.el.nativeElement.firstChild),s.appendChild(r),n.appendChild(s),this.renderer.insertBefore(this.el.nativeElement,n,this.el.nativeElement.firstChild),this.addListeners(n,80,55,"right"),this.addListeners(e,-80,-55,"left")}addListeners(e,t,i,n){this.listeners[n+"Click"]=this.renderer.listen(e,"click",e=>{this.pressCounter<3&&this.scroll(t),this.pressCounter=0}),this.listeners[n+"Mousedown"]=this.renderer.listen(e,"mousedown",e=>{this.state.next("start"),Object(s.a)(100).pipe(Object(a.a)(this.cancel),Object(c.a)(e=>{this.pressCounter++,this.scroll(i)},Object(a.a)(this.unsubscribe$))).subscribe()}),this.listeners[n+"Mouseup"]=this.renderer.listen(e,"mouseup",e=>{this.state.next("stop")}),this.listeners[n+"Mouseleave"]=this.renderer.listen(e,"mouseleave",e=>{this.state.next("stop")})}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(u.l),u.Rb(u.F))},e.\u0275dir=u.Mb({type:e,selectors:[["","tabs",""]],hostBindings:function(e,t){1&e&&u.jc("resize",(function(e){return t.onWindowResize(e)}),!1,u.Nc)},inputs:{activeClass:"activeClass"},exportAs:["tabs"]}),e})()},"3QTq":function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return o})),i("RiPy");var n=i("wd/R");function s(e,t){return r(o(e,t),t,"second")}function r(e,t,i){if(t||(t="HH:mm:ss"),null!=e)return"h.hh"===t?Object(n.duration)(e,i).asHours().toFixed(2):Object(n.duration)(e,i).format(t,{trim:!1})}function o(e,t="HH:mm:ss"){if(!e)return 0;const i=function(e,t="HH:mm:ss"){return e.includes("h")||e.includes("m")||e.includes("s")?c([a(e=e.split(/(.*?[h\/m\\s])/),"h"),a(e,"m"),a(e,"s")]):e.includes(":")||e.includes(";")||e.includes("-")?c(e.split(/[:\/;\-]/)):function(e,t){if(isNaN(Number(e)))return;if(Number(e)<100&&"h.hh"!==t&&!e.includes("."))return 60*Number(e);if(e<100&&"h.hh"===t)return 3600*Number(e);if((e=(e=e.toString()).split("."))[0]<100)return 3600*Number(e[0]+"."+e[1]);const i=e[0].substring(0,e[0].length-2),n=e[0].substring(e[0].length-2,e[0].length);return 3600*Number(i)+60*Number(n)+(e[1]?60*Number("0."+e[1]):0)}(e,t)}(e=e.replace(",",".").replace("H","h").replace("M","m").replace("S","s"),t);return i>3596400?3596400:i}function a(e,t){return e.filter(e=>e.includes(t))[0]?e.filter(e=>e.includes(t))[0].split(t)[0]:"0"}function c(e){const t=[3600,60,1];let i=0;for(let n=e.length-1;n>=0;n--){if(isNaN(Number(e[n])))return;i+=Number(e[n])*t[n]}return i}},"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"3eYs":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("f0Wu"),s=i("Tj/N"),r=i("fXoL"),o=i("sYmb");let a=(()=>{class e{constructor(e){this.translate=e;const t=new s.a(JSON.parse(localStorage.getItem("user")));this.dateFormat=t&&t.settings&&t.settings.dateFormat}transform(e,t=!1,i=!1,s){if(!t){const t=n(e,this.dateFormat),s=n();if(t.isSame(s,"day"))return this.translate.instant(i?"GLOBAL.NOW_LABEL":"GLOBAL.TODAY_LABEL")}return e}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(o.f))},e.\u0275pipe=r.Qb({name:"formatDateToday",type:e,pure:!0}),e})()},4500:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("jtSf"),s=i("hV/V"),r=i("fXoL");let o=(()=>{class e{constructor(e){this.translationStore=e}transform(e){const t=this.translationStore.getCurrentLang(),i=Object(n.e)(t," ddd");return e.sort(),e.map(e=>this.getNameByIndex(e,i)).toString()}getNameByIndex(e,t){switch(e){case 0:return t[1];case 1:return t[2];case 2:return t[3];case 3:return t[4];case 4:return t[5];case 5:return t[6];case 6:return t[0]}}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(s.a))},e.\u0275pipe=r.Qb({name:"displayDayOfWeek",type:e,pure:!0}),e})()},"49HY":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("ofXK"),s=i("3Pt+"),r=i("gr2/"),o=i("1kSV"),a=i("tZA+"),c=i("sYmb"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.db,a.a,o.O,c.d]]}),e})()},"4Seb":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("wd/R"),r=i("3QTq"),o=i("yK97"),a=i("3Pt+");const c=["timeDurationInput"];let l=(()=>{class e{constructor(){this.focusOnInput=!1,this.focusOnInit=!1,this.timeChanged=new n.n,this.onFocus=new n.n}set timeInterval(e){e&&(e=new o.a(e),this._timeInterval=e,this.lastDurationBackup=e.duration,this.initData())}get timeInterval(){return this._timeInterval}ngOnInit(){this.initData()}ngAfterViewInit(){!this.focusOnInit||!this.timeDurationInput||this.timeInterval&&Object(s.duration)(this.timeInterval.duration).asSeconds()>0||this.focusTimeEntryDurationInput(this.timeDurationInput.nativeElement)}initData(){this.timeInterval&&this.format&&(this.timeEntryDurationInput=Object(r.b)(this.timeInterval.duration,this.format),this.timeEntryDurationBackup=this.timeEntryDurationInput)}focusTimeEntryDurationInput(e){this.onFocus.emit(),this.focusOnInput&&setTimeout(()=>{e.focus(),e.select()})}addFromTimeDurationInput(){if(this.timeEntryDurationInput===this.timeEntryDurationBackup)return;const e=Object(r.c)(this.timeEntryDurationInput,this.format);if(!e)return void(this.timeEntryDurationInput=this.timeEntryDurationBackup);const t=Object(r.a)(this.timeEntryDurationInput,this.format);this.timeEntryDurationInput=e;const i=this.getTimeIntervalFromSeconds(t);this.emit(i)}getTimeIntervalFromSeconds(e){const t=s(this.timeInterval.start).clone(),i=s(this.timeInterval.start).clone().add(e,"s"),n=s.duration(i.diff(t)).toISOString();return new o.a({start:t.toISOString(),end:i.toISOString(),duration:n})}arrowPressed(e){if(!Object(r.c)(this.timeEntryDurationInput,this.format))return void(this.timeEntryDurationInput=this.timeEntryDurationBackup);let t=Object(r.a)(this.timeEntryDurationInput,this.format);e?t+=60:t-=60,t<0&&(t=0);const i=this.getTimeIntervalFromSeconds(t);this.timeEntryDurationInput=Object(r.b)(i.duration,this.format)}emit(e){e.duration!==this.lastDurationBackup&&(this.timeInterval=e,this.timeChanged.emit(this.timeInterval))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["input-duration"]],viewQuery:function(e,t){var i;1&e&&n.gd(c,!0),2&e&&n.Kc(i=n.kc())&&(t.timeDurationInput=i.first)},inputs:{timeInterval:"timeInterval",disable:"disable",format:"format",focusOnInput:"focusOnInput",focusOnInit:"focusOnInit",removeOpacity:"removeOpacity"},outputs:{timeChanged:"timeChanged",onFocus:"onFocus"},decls:2,vars:3,consts:[["type","text","autocomplete","off",1,"cl-form-control","cl-input-time-picker-sum",3,"disabled","readOnly","ngModel","ngModelChange","blur","focus","keyup.arrowup","keyup.arrowdown","keyup.enter"],["timeDurationInput",""]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",0,1),n.jc("ngModelChange",(function(e){return t.timeEntryDurationInput=e}))("blur",(function(){return t.addFromTimeDurationInput()}))("focus",(function(){n.Oc(e);const i=n.Lc(1);return t.focusTimeEntryDurationInput(i)}))("keyup.arrowup",(function(){return t.arrowPressed(!0)}))("keyup.arrowdown",(function(){return t.arrowPressed(!1)}))("keyup.enter",(function(){return n.Oc(e),n.Lc(1).blur()})),n.Wb()}2&e&&n.wc("disabled",!t.removeOpacity&&t.disable)("readOnly",t.removeOpacity)("ngModel",t.timeEntryDurationInput)},directives:[a.c,a.s,a.v],encapsulation:2,changeDetection:0}),e})()},"4fRq":function(e,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);e.exports=function(){return i(n),n}}else{var s=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}},"4jLH":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("hV/V"),s=i("wd/R"),r=i("fXoL"),o=i("sYmb");let a=(()=>{class e{constructor(e,t){this.translationStore=e,this.translate=t}transform(e,t){if(!e)return this.translate.instant("GLOBAL.IN_PROGRESS_LABEL");const i=s(t),n=this.translationStore.getCurrentLang();return i.diff(s().subtract(1,"month"))>=0?i.locale(n).fromNow():i.locale(n).format("DD MMM YYYY")}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(n.a),r.Rb(o.f))},e.\u0275pipe=r.Qb({name:"durationToHumanize",type:e,pure:!0}),e})()},"5+WD":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ee})),i.d(t,"b",(function(){return fe})),i.d(t,"c",(function(){return me})),i.d(t,"d",(function(){return ge})),i.d(t,"e",(function(){return Oe})),i.d(t,"f",(function(){return Se})),i.d(t,"g",(function(){return Ae})),i.d(t,"h",(function(){return q})),i.d(t,"i",(function(){return J}));var n=i("fXoL"),s=i("ofXK"),r=i("8LU1"),o=i("XNiG"),a=i("LRne"),c=i("HDdC"),l=i("xgIS"),u=i("VRyK"),d=i("3N8a");class h extends d.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}}var p=i("IjjT");class b extends p.a{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,n=-1,s=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++n<s&&(e=t.shift()));if(this.active=!1,i){for(;++n<s&&(e=t.shift());)e.unsubscribe();throw i}}}const f=new b(h);var m=i("quSY"),g=(i("7+OI"),i("/uUt"),i("D0XW")),v=i("l7GE"),C=i("ZUHj");class E{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new w(e,this.durationSelector))}}class w extends v.a{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:t}=this;i=t(e)}catch(t){return this.destination.error(t)}const n=Object(C.a)(this,i);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:e,hasValue:t,throttled:i}=this;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,i,n){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var S=i("PqYM");function y(e,t=g.a){return i=()=>Object(S.a)(e,t),function(e){return e.lift(new E(i))};var i}var O=i("pLZG"),A=i("1G5W"),k=i("JX91");i("7o/Q");var T=i("eIep"),D=(i("UXun"),i("nLfN"));const I=new n.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(n.V)(s.e)}});let _=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new n.n,e){const t=e.documentElement?e.documentElement.dir:null,i=(e.body?e.body.dir:null)||t;this.value="ltr"===i||"rtl"===i?i:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(n.fc(I,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(I,8))},token:e,providedIn:"root"}),e})();i("0EQZ");let R=(()=>{class e{constructor(e,t,i){this._ngZone=e,this._platform=t,this._scrolled=new o.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new c.a(t=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(y(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(a.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const i=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Object(O.a)(e=>!e||i.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((i,n)=>{this._scrollableContainsElement(n,e)&&t.push(n)}),t}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(e,t){let i=t.nativeElement,n=e.getElementRef().nativeElement;do{if(i==n)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return Object(l.a)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.z),n.fc(D.a),n.fc(s.e,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.z),Object(n.fc)(D.a),Object(n.fc)(s.e,8))},token:e,providedIn:"root"}),e})(),L=(()=>{class e{constructor(e,t,i){this._platform=e,this._document=i,t.runOutsideAngular(()=>{const t=this._getWindow();this._change=e.isBrowser?Object(u.a)(Object(l.a)(t,"resize"),Object(l.a)(t,"orientationchange")):Object(a.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+t,height:i,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._getDocument(),t=this._getWindow(),i=e.documentElement,n=i.getBoundingClientRect();return{top:-n.top||e.body.scrollTop||t.scrollY||i.scrollTop||0,left:-n.left||e.body.scrollLeft||t.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(y(e)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(n.fc(D.a),n.fc(n.z),n.fc(s.e,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(D.a),Object(n.fc)(n.z),Object(n.fc)(s.e,8))},token:e,providedIn:"root"}),e})();var x=i("l5mm"),P=i("lJxs"),j=i("IzEk"),M=i("vkgz");function X(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function F(e,t){const i=t?"":"none";X(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:i,msUserSelect:i,webkitUserSelect:i,MozUserSelect:i})}function W(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function B(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}const N=Object(D.e)({passive:!0}),G=Object(D.e)({passive:!1});class U{constructor(e,t,i,n,s,r){this._config=t,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new o.a,this._pointerMoveSubscription=m.a.EMPTY,this._pointerUpSubscription=m.a.EMPTY,this._scrollSubscription=m.a.EMPTY,this._resizeSubscription=m.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new o.a,this.started=new o.a,this.released=new o.a,this.ended=new o.a,this.entered=new o.a,this.exited=new o.a,this.dropped=new o.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._handles.find(t=>{const i=e.target;return!!i&&(i===t||t.contains(i))});!t||this._disabledHandles.has(t)||this.disabled||this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{if(e.preventDefault(),!this._hasStartedDragging){const t=this._getPointerPositionOnPage(e);if(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){if(!(Date.now()>=this._dragStartTime+this._getDragStartDelay(e)))return void this._endDragSequence(e);this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t);else{const e=this._activeTransform;e.x=t.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=t.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(e.x,e.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:e,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})},this._pointerUp=e=>{this._endDragSequence(e)},this.withRootElement(e),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=Object(r.b)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){return this._handles=e.map(e=>Object(r.c)(e)),this._handles.forEach(e=>F(e,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Object(r.c)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),t.addEventListener("mousedown",this._pointerDown,G),t.addEventListener("touchstart",this._pointerDown,N),this._initialTransform=void 0,this._rootElement=t),this}withBoundaryElement(e){return this._boundaryElement=e?Object(r.c)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&$(this._rootElement),$(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}enableHandle(e){this._disabledHandles.delete(e)}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}_sortFromLastPointerPosition(){const e=this._pointerPositionAtLastDirectionChange;e&&this._dropContainer&&this._updateActiveDropContainer(e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&$(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&$(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(e){if(this.started.next({source:this}),z(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions(),this._dropContainer){const e=this._rootElement,i=e.parentNode,n=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment("");i.insertBefore(r,e),e.style.display="none",this._document.body.appendChild(i.replaceChild(s,e)),(t=this._document,t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body).appendChild(n),this._dropContainer.start(),this._initialContainer=this._dropContainer,this._initialIndex=this._dropContainer.getItemIndex(this)}else this._initialContainer=this._initialIndex=void 0;var t}_initializeDragSequence(e,t){t.stopPropagation();const i=this.isDragging(),n=z(t),s=!n&&0!==t.button,r=this._rootElement,o=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),i||s||o)return;this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor,r.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.pipe(Object(k.a)(null)).subscribe(()=>{this._scrollPosition=this._viewportRuler.getViewportScrollPosition()}),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect());const a=this._previewTemplate;this._pickupPositionInElement=a&&a.template&&!a.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const c=this._pickupPositionOnPage=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),n=this._getPointerPositionOnPage(e),s=this._getDragDistance(this._getPointerPositionOnPage(e)),r=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:s}),t.drop(this,i,this._initialContainer,r,s,this._initialIndex),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t}){let i=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=i,this._dropContainer.enter(this,e,t,i===this._initialContainer&&i.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(e,t),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=V(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,i=e?e.template:null;let n;if(i){const t=e.viewContainer.createEmbeddedView(i,e.context);t.detectChanges(),n=Z(t,this._document),this._previewRef=t,e.matchSize?K(n,this._rootElement):n.style.transform=V(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement;n=H(e),K(n,e)}return X(n.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"1000"}),F(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(e=>n.classList.add(e)):n.classList.add(t)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=V(e.left,e.top);const t=function(e){const t=getComputedStyle(e),i=B(t,"transition-property"),n=i.find(e=>"transform"===e||"all"===e);if(!n)return 0;const s=i.indexOf(n),r=B(t,"transition-duration"),o=B(t,"transition-delay");return W(r[s])+W(o[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const i=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",i),e(),clearTimeout(n))},n=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=Z(this._placeholderRef,this._document)):i=H(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t){const i=this._rootElement.getBoundingClientRect(),n=e===this._rootElement?null:e,s=n?n.getBoundingClientRect():i,r=z(t)?t.targetTouches[0]:t;return{x:s.left-i.left+(r.pageX-s.left-this._scrollPosition.left),y:s.top-i.top+(r.pageY-s.top-this._scrollPosition.top)}}_getPointerPositionOnPage(e){const t=z(e)?e.touches[0]||e.changedTouches[0]:e;return{x:t.pageX-this._scrollPosition.left,y:t.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(e){const t=this._getPointerPositionOnPage(e),i=this.constrainPosition?this.constrainPosition(t,this):t,n=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===n?i.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==n||(i.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:t}=this._pickupPositionInElement,n=this._boundaryRect,s=this._previewRect,r=n.top+t,o=n.bottom-(s.height-t);i.x=Y(i.x,n.left+e,n.right-(s.width-e)),i.y=Y(i.y,r,o)}return i}_updatePointerDirectionDelta(e){const{x:t,y:i}=e,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-s.x),o=Math.abs(i-s.y);return r>this._config.pointerDirectionChangeThreshold&&(n.x=t>s.x?1:-1,s.x=t),o>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,F(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,G),e.removeEventListener("touchstart",this._pointerDown,N)}_applyRootElementTransform(e,t){const i=V(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?i+" "+this._initialTransform:i}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),n=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===n.width&&0===n.height)return;const s=i.left-n.left,r=n.right-i.right,o=i.top-n.top,a=n.bottom-i.bottom;i.width>n.width?(s>0&&(e+=s),r>0&&(e-=r)):e=0,i.height>n.height?(o>0&&(t+=o),a>0&&(t-=a)):t=0,e===this._passiveTransform.x&&t===this._passiveTransform.y||this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:z(e)?t.touch:t?t.mouse:0}}function V(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function H(e){const t=e.cloneNode(!0),i=t.querySelectorAll("[id]"),n=e.querySelectorAll("canvas");t.removeAttribute("id");for(let s=0;s<i.length;s++)i[s].removeAttribute("id");if(n.length){const e=t.querySelectorAll("canvas");for(let t=0;t<n.length;t++){const i=e[t].getContext("2d");i&&i.drawImage(n[t],0,0)}}return t}function Y(e,t,i){return Math.max(t,Math.min(i,e))}function $(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function z(e){return"t"===e.type[0]}function Z(e,t){const i=e.rootNodes[0];if(i.nodeType!==t.ELEMENT_NODE){const e=t.createElement("div");return e.appendChild(i),e}return i}function K(e,t){const i=t.getBoundingClientRect();e.style.width=i.width+"px",e.style.height=i.height+"px",e.style.transform=V(i.left,i.top)}function q(e,t,i){const n=Q(t,e.length-1),s=Q(i,e.length-1);if(n===s)return;const r=e[n],o=s<n?-1:1;for(let a=n;a!==s;a+=o)e[a]=e[a+o];e[s]=r}function J(e,t,i,n){const s=Q(i,e.length-1),r=Q(n,t.length);e.length&&t.splice(r,0,e.splice(s,1)[0])}function Q(e,t){return Math.max(0,Math.min(t,e))}class ee{constructor(e,t,i,n,s){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new o.a,this.entered=new o.a,this.exited=new o.a,this.dropped=new o.a,this.sorted=new o.a,this._isDragging=!1,this._itemPositions=[],this._parentPositions=new Map,this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=m.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new o.a,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Object(x.a)(0,f).pipe(Object(A.a)(this._stopScrollTimers)).subscribe(()=>{const e=this._scrollNode;1===this._verticalScrollDirection?oe(e,-2):2===this._verticalScrollDirection&&oe(e,2),1===this._horizontalScrollDirection?ae(e,-2):2===this._horizontalScrollDirection&&ae(e,2)})},this.element=Object(r.c)(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const e=Object(r.c)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach(e=>e._startReceiving(this)),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}enter(e,t,i,n){let s;this.start(),null==n?(s=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(e,t,i))):s=n;const o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement();let l=o[s];if(l===e&&(l=o[s+1]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){const t=l.getRootElement();t.parentElement.insertBefore(c,t),o.splice(s,0,e)}else Object(r.c)(this.element).appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,n,s,r){this._reset(),null==r&&(r=i.getItemIndex(e)),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:n,distance:s})}withItems(e){return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this.isDragging()&&this._cacheItems(),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Object(r.c)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getItemIndex(e){return this._isDragging?ne("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,n){if(this.sortingDisabled||!ie(this._clientRect,t,i))return;const s=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,i,n);if(-1===r&&s.length>0)return;const o="horizontal"===this._orientation,a=ne(s,t=>t.drag===e),c=s[r],l=s[a].clientRect,u=c.clientRect,d=a>r?1:-1;this._previousSwap.drag=c.drag,this._previousSwap.delta=o?n.x:n.y;const h=this._getItemOffsetPx(l,u,d),p=this._getSiblingOffsetPx(a,s,d),b=s.slice();q(s,a,r),this.sorted.next({previousIndex:a,currentIndex:r,container:this,item:e}),s.forEach((t,i)=>{if(b[i]===t)return;const n=t.drag===e,s=n?h:p,r=n?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=s,o?(r.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,te(t.clientRect,0,s)):(r.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,te(t.clientRect,s,0))})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,n=0,s=0;if(this._parentPositions.forEach((r,o)=>{o!==this._document&&r.clientRect&&!i&&ie(r.clientRect,e,t)&&([n,s]=function(e,t,i,n){const s=ce(t,n),r=le(t,i);let o=0,a=0;if(s){const t=e.scrollTop;1===s?t>0&&(o=1):e.scrollHeight-t>e.clientHeight&&(o=2)}if(r){const t=e.scrollLeft;1===r?t>0&&(a=1):e.scrollWidth-t>e.clientWidth&&(a=2)}return[o,a]}(o,r.clientRect,e,t),(n||s)&&(i=o))}),!n&&!s){const{width:r,height:o}=this._viewportRuler.getViewportSize(),a={width:r,height:o,top:0,right:r,bottom:o,left:0};n=ce(a,t),s=le(a,e),i=window}!i||n===this._verticalScrollDirection&&s===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheParentPositions(){this._parentPositions.clear(),this._parentPositions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),this._scrollableElements.forEach(e=>{const t=re(e);e===this.element&&(this._clientRect=t),this._parentPositions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:t})})}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=e.getVisibleElement();return{drag:e,offset:0,clientRect:re(t)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const e=Object(r.c)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>e.getRootElement().style.transform=""),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,i){const n="horizontal"===this._orientation,s=t[e].clientRect,r=t[e+-1*i];let o=s[n?"width":"height"]*i;if(r){const e=n?"left":"top",t=n?"right":"bottom";-1===i?o-=r.clientRect[e]-s[t]:o+=s[e]-r.clientRect[t]}return o}_getItemOffsetPx(e,t,i){const n="horizontal"===this._orientation;let s=n?t.left-e.left:t.top-e.top;return-1===i&&(s+=n?t.width-e.width:t.height-e.height),s}_getItemIndexFromPointerPosition(e,t,i,n){const s="horizontal"===this._orientation;return ne(this._itemPositions,({drag:r,clientRect:o},a,c)=>{if(r===e)return c.length<2;if(n){const e=s?n.x:n.y;if(r===this._previousSwap.drag&&e===this._previousSwap.delta)return!1}return s?t>=Math.floor(o.left)&&t<=Math.floor(o.right):i>=Math.floor(o.top)&&i<=Math.floor(o.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_updateAfterScroll(e,t,i){const n=e===this._document?e.documentElement:e,s=this._parentPositions.get(e).scrollPosition,r=s.top-t,o=s.left-i;this._parentPositions.forEach((t,i)=>{t.clientRect&&e!==i&&n.contains(i)&&te(t.clientRect,r,o)}),this._itemPositions.forEach(({clientRect:e})=>{te(e,r,o)}),this._itemPositions.forEach(({drag:e})=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()}),s.top=t,s.left=i}_isOverContainer(e,t){return se(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(n=>n._canReceive(e,t,i))}_canReceive(e,t,i){if(!se(this._clientRect,t,i)||!this.enterPredicate(e,this))return!1;const n=this._getShadowRoot().elementFromPoint(t,i);if(!n)return!1;const s=Object(r.c)(this.element);return n===s||s.contains(n)}_startReceiving(e){const t=this._activeSiblings;t.has(e)||(t.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(e=>{if(this.isDragging()){const t=e.target;if(this._parentPositions.get(t)){let e,i;if(t===this._document){const t=this._viewportRuler.getViewportScrollPosition();e=t.top,i=t.left}else e=t.scrollTop,i=t.scrollLeft;this._updateAfterScroll(t,e,i)}}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Object(D.c)(Object(r.c)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}}function te(e,t,i){e.top+=t,e.bottom=e.top+e.height,e.left+=i,e.right=e.left+e.width}function ie(e,t,i){const{top:n,right:s,bottom:r,left:o,width:a,height:c}=e,l=.05*a,u=.05*c;return i>n-u&&i<r+u&&t>o-l&&t<s+l}function ne(e,t){for(let i=0;i<e.length;i++)if(t(e[i],i,e))return i;return-1}function se(e,t,i){const{top:n,bottom:s,left:r,right:o}=e;return i>=n&&i<=s&&t>=r&&t<=o}function re(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function oe(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function ae(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function ce(e,t){const{top:i,bottom:n,height:s}=e,r=.05*s;return t>=i-r&&t<=i+r?1:t>=n-r&&t<=n+r?2:0}function le(e,t){const{left:i,right:n,width:s}=e,r=.05*s;return t>=i-r&&t<=i+r?1:t>=n-r&&t<=n+r?2:0}const ue=Object(D.e)({passive:!1,capture:!0});let de=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new o.a,this.pointerUp=new o.a,this.scroll=new o.a,this._preventDefaultWhileDragging=e=>{this._activeDragInstances.size&&e.preventDefault()},this._document=t}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,ue)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,ue)}startDragging(e,t){if(!this._activeDragInstances.has(e)&&(this._activeDragInstances.add(e),1===this._activeDragInstances.size)){const e=t.type.startsWith("touch"),i=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:ue}).set(i,{handler:e=>this.pointerUp.next(e),options:!0}).set("scroll",{handler:e=>this.scroll.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ue}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.z),n.fc(s.e))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.z),Object(n.fc)(s.e))},token:e,providedIn:"root"}),e})();const he={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let pe=(()=>{class e{constructor(e,t,i,n){this._document=e,this._ngZone=t,this._viewportRuler=i,this._dragDropRegistry=n}createDrag(e,t=he){return new U(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ee(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(s.e),n.fc(n.z),n.fc(L),n.fc(de))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(s.e),Object(n.fc)(n.z),Object(n.fc)(L),Object(n.fc)(de))},token:e,providedIn:"root"}),e})();const be=new n.q("CDK_DRAG_PARENT");let fe=(()=>{class e{constructor(e,t){this.element=e,this._stateChanges=new o.a,this._disabled=!1,this._parentDrag=t,F(e.nativeElement,!1)}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(r.b)(e),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(be,8))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),e})(),me=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),e})(),ge=(()=>{class e{constructor(e){this.templateRef=e,this._matchSize=!1}get matchSize(){return this._matchSize}set matchSize(e){this._matchSize=Object(r.b)(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","cdkDragPreview",""]],inputs:{matchSize:"matchSize",data:"data"}}),e})();const ve=new n.q("CDK_DRAG_CONFIG"),Ce=new n.q("CDK_DROP_LIST");let Ee=(()=>{class e{constructor(e,t,i,s,r,a,l,u,d){this.element=e,this.dropContainer=t,this._document=i,this._ngZone=s,this._viewContainerRef=r,this._dir=l,this._changeDetectorRef=d,this._destroyed=new o.a,this.started=new n.n,this.released=new n.n,this.ended=new n.n,this.entered=new n.n,this.exited=new n.n,this.dropped=new n.n,this.moved=new c.a(e=>{const t=this._dragRef.moved.pipe(Object(P.a)(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5}),this._dragRef.data=this,a&&this._assignDefaults(a),t&&(this._dragRef._withDropContainer(t._dropListRef),t.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Object(r.b)(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Object(j.a)(1),Object(A.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(k.a)(this._handles),Object(M.a)(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._dragRef.withHandles(t)}),Object(T.a)(e=>Object(u.a)(...e.map(e=>e._stateChanges.pipe(Object(k.a)(e))))),Object(A.a)(this._destroyed)).subscribe(e=>{const t=this._dragRef,i=e.element.nativeElement;e.disabled?t.disableHandle(i):t.enableHandle(i)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(e){const t=e.rootElementSelector,i=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,t=this.rootElementSelector?we(e,this.rootElementSelector):e;if(t&&t.nodeType!==this._document.ELEMENT_NODE)throw Error(`cdkDrag must be attached to an element node. Currently attached to "${t.nodeName}".`);this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return we(this.element.nativeElement,e);const t=Object(r.c)(e);if(Object(n.W)()&&!t.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return t}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,i=this.dragStartDelay,n=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof i&&i?i:Object(r.d)(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(n).withPreviewTemplate(s),t&&e.withDirection(t.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(e=>{this.ended.emit({source:this,distance:e.distance}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this,distance:e.distance})})}_assignDefaults(e){const{lockAxis:t,dragStartDelay:i,constrainPosition:n,previewClass:s,boundaryElement:r,draggingDisabled:o,rootElementSelector:a}=e;this.disabled=null!=o&&o,this.dragStartDelay=i||0,t&&(this.lockAxis=t),n&&(this.constrainPosition=n),s&&(this.previewClass=s),r&&(this.boundaryElement=r),a&&(this.rootElementSelector=a)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(Ce,12),n.Rb(s.e),n.Rb(n.z),n.Rb(n.P),n.Rb(ve,8),n.Rb(_,8),n.Rb(pe),n.Rb(n.h))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,i){var s;1&e&&(n.Jb(i,ge,!0),n.Jb(i,me,!0),n.Jb(i,fe,!0)),2&e&&(n.Kc(s=n.kc())&&(t._previewTemplate=s.first),n.Kc(s=n.kc())&&(t._placeholderTemplate=s.first),n.Kc(s=n.kc())&&(t._handles=s))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&n.Hb("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[n.Bb([{provide:be,useExisting:e}]),n.Ab]}),e})();function we(e,t){let i=e.parentElement;for(;i;){if(i.matches?i.matches(t):i.msMatchesSelector(t))return i;i=i.parentElement}return null}let Se=(()=>{class e{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(r.b)(e)}ngOnDestroy(){this._items.clear()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"]}),e})(),ye=0,Oe=(()=>{class e{constructor(t,i,s,r,a,c,l){this.element=t,this._changeDetectorRef=s,this._dir=r,this._group=a,this._scrollDispatcher=c,this._destroyed=new o.a,this.connectedTo=[],this.id="cdk-drop-list-"+ye++,this.enterPredicate=()=>!0,this.dropped=new n.n,this.entered=new n.n,this.exited=new n.n,this.sorted=new n.n,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(e,t)=>this.enterPredicate(e.data,t.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),a&&a._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=Object(r.b)(e)}ngAfterContentInit(){if(this._scrollDispatcher){const e=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(e=>e.getElementRef().nativeElement);this._dropListRef.withScrollableParents(e)}}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(e,t,i,n){this._dropListRef.drop(e._dragRef,t,i._dropListRef,n,{x:0,y:0})}enter(e,t,i){this._dropListRef.enter(e._dragRef,t,i)}exit(e){this._dropListRef.exit(e._dragRef)}getItemIndex(e){return this._dropListRef.getItemIndex(e._dragRef)}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Object(k.a)(this._dir.value),Object(A.a)(this._destroyed)).subscribe(e=>t.withDirection(e)),t.beforeStarted.subscribe(()=>{const i=Object(r.a)(this.connectedTo).map(t=>"string"==typeof t?e._dropLists.find(e=>e.id===t):t);this._group&&this._group._items.forEach(e=>{-1===i.indexOf(e)&&i.push(e)}),t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=Object(r.b)(this.sortingDisabled),t.autoScrollDisabled=Object(r.b)(this.autoScrollDisabled),t.connectedTo(i.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),this._changeDetectorRef.markForCheck()})}_assignDefaults(e){const{lockAxis:t,draggingDisabled:i,sortingDisabled:n,listAutoScrollDisabled:s,listOrientation:r}=e;this.disabled=null!=i&&i,this.sortingDisabled=null!=n&&n,this.autoScrollDisabled=null!=s&&s,this.orientation=r||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(pe),n.Rb(n.h),n.Rb(_,8),n.Rb(Se,12),n.Rb(R),n.Rb(ve,8))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(n.ac("id",t.id),n.Hb("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[n.Bb([{provide:Se,useValue:void 0},{provide:Ce,useExisting:e}])]}),e._dropLists=[],e})(),Ae=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[pe]}),e})()},"5Ra6":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("f0Wu"),s=i("fXoL");let r=(()=>{class e{constructor(){}addOffsetToUTCTime(e){const t=e.utcOffset();return n.parseZone(e).add(t,"m")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"5SNR":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("fXoL"),s=i("ofXK"),r=i("sYmb");const o=["template"];function a(e,t){1&e&&n.Tb(0)}function c(e,t){1&e&&n.Tb(0)}function l(e,t){if(1&e&&(n.Xb(0,"td",6),n.Xc(1,c,1,0,"ng-container",4),n.Wb()),2&e){const e=t.$implicit;n.wc("ngClass","cl-responsive-table-td-"+(t.index+1)),n.Cb(1),n.wc("ngTemplateOutlet",e)}}function u(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"td",3),n.Xc(2,a,1,0,"ng-container",4),n.Wb(),n.Xc(3,l,2,2,"td",5),n.oc(4,"slice"),n.Ub()),2&e){const e=n.nc(2);n.Cb(2),n.wc("ngTemplateOutlet",e.templates[0]),n.Cb(1),n.wc("ngForOf",n.qc(4,2,e.templates,1))}}function d(e,t){1&e&&n.Tb(0)}function h(e,t){1&e&&n.Tb(0)}function p(e,t){if(1&e&&(n.Xb(0,"tr",15),n.Xb(1,"th",16),n.Xb(2,"div",17),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb(),n.Xb(5,"td",18),n.Xc(6,h,1,0,"ng-container",4),n.Wb(),n.Wb()),2&e){const e=t.$implicit,i=t.index,s=n.nc(3).labels;n.Cb(3),n.ad(n.pc(4,2,s[i+1])),n.Cb(3),n.wc("ngTemplateOutlet",e)}}function b(e,t){if(1&e&&(n.Xb(0,"table",13),n.Xb(1,"tbody"),n.Xc(2,p,7,4,"tr",14),n.oc(3,"slice"),n.Wb(),n.Wb()),2&e){const e=n.nc(3);n.Cb(2),n.wc("ngForOf",n.qc(3,1,e.templates,1))}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"td",7),n.Xb(1,"div",8),n.Xc(2,d,1,0,"ng-container",4),n.Xb(3,"a",9),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.isExpanded=!t.isExpanded})),n.Xb(4,"span",10),n.Sb(5,"img",11),n.Wb(),n.Wb(),n.Wb(),n.Xc(6,b,4,4,"table",12),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngTemplateOutlet",e.templates[0]),n.Cb(3),n.wc("src",e.isExpanded?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc),n.Cb(1),n.wc("ngIf",e.isExpanded)}}function m(e,t){if(1&e&&(n.Xc(0,u,5,5,"ng-container",1),n.Xc(1,f,7,3,"ng-template",null,2,n.Yc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.isDesktop)("ngIfElse",e)}}let g=(()=>{class e{constructor(e){this.cd=e}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["responsive-row"],["","responsive-row",""]],viewQuery:function(e,t){var i;1&e&&n.gd(o,!0),2&e&&n.Kc(i=n.kc())&&(t.template=i.first)},inputs:{isDesktop:"isDesktop",templates:"templates",isExpanded:"isExpanded"},decls:2,vars:0,consts:[["template",""],[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-pl-lg-3","cl-py-2","cl-pr-0","cl-cut-text-wrapper-td","cl-responsive-table-td-0"],[4,"ngTemplateOutlet"],["class","cl-p-0 cl-cut-text-wrapper-td",3,"ngClass",4,"ngFor","ngForOf"],[1,"cl-p-0","cl-cut-text-wrapper-td",3,"ngClass"],[1,"cl-p-lg-2","cl-py-lg-custom-3","cl-cut-text-wrapper-td","cl-border-right"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto","cl-auto-pointer-event",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],["class","cl-table table cl-table-bordered cl-remove-cell-borders cl-text-gray-6 cl-mt-2",4,"ngIf"],[1,"cl-table","table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6","cl-mt-2"],["class","cl-bg-light",4,"ngFor","ngForOf"],[1,"cl-bg-light"],[1,"cl-py-2","cl-py-lg-0"],[1,"cl-h5","cl-mb-0"],[1,"cl-py-2","cl-py-lg-0","cl-px-0","cl-cut-text-wrapper-td","cl-w-50"]],template:function(e,t){1&e&&n.Xc(0,m,3,2,"ng-template",null,0,n.Yc)},directives:[s.u,s.B,s.t,s.r],pipes:[s.F,r.e],encapsulation:2,changeDetection:0}),e})()},"5lh1":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("3Pt+"),s=i("ofXK"),r=i("7EHt"),o=i("9Trn"),a=i("5+WD"),c=i("0Gvx"),l=i("zJCG"),u=i("1Mzi"),d=i("tyNb"),h=i("liYL"),p=i("sYmb"),b=i("fXoL");let f=(()=>{class e{}return e.\u0275mod=b.Pb({type:e}),e.\u0275inj=b.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.m,s.c,r.a,o.a,a.g,c.a,l.a,u.a,d.h,h.a,p.d]]}),e})()},"5pgj":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fV9S");class s{constructor(e,t,i,s,r){this.date=e,this.time=t||"P0D",this.timeEntries=i,this.editMode=s,this.weekStatus=r?new n.a(r):null}}},"614J":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o,a,c){const l=[i,n];return t&&(l.push(s),l.push(r)),l.push(o),l.push(a),e&&(l.push(s),l.push(r),l.push(c)),l}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"membersRowDecider",type:e,pure:!0}),e})()},"62PR":function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i("gcYM"),s=i("1G5W"),r=i("Kj3r"),o=i("fXoL"),a=i("f0Wu"),c=i("yK97"),l=i("qfBg"),u=i("XNiG"),d=i("lGQG"),h=i("EVdn"),p=i("B4wx"),b=i("hV/V"),f=i("jtSf"),m=i("ofXK"),g=i("B01t");const v=["datepicker"];function C(e,t){1&e&&(o.Xb(0,"span",2),o.Sb(1,"img",3),o.Wb())}function E(e,t){if(1&e){const e=o.Yb();o.Xb(0,"span",6,7),o.jc("click",(function(){o.Oc(e);const t=o.Lc(1);return o.nc(2).openDatepicker(),t.blur()}))("focus",(function(){return o.Oc(e),o.nc(2).openDatepicker()})),o.Sb(2,"img",3),o.Wb()}}function w(e,t){if(1&e){const e=o.Yb();o.Xb(0,"span",8,9),o.jc("focus",(function(){return o.Oc(e),o.nc(2).openDatepicker()}))("selected",(function(t){return o.Oc(e),o.nc(2).selectedDate(t)})),o.Sb(2,"img",3),o.Wb()}if(2&e){const e=o.nc(2);o.wc("options",e.options)}}function S(e,t){if(1&e&&(o.Xc(0,E,3,0,"span",4),o.Xc(1,w,3,1,"ng-template",null,5,o.Yc)),2&e){const e=o.Lc(2),t=o.nc();o.wc("ngIf",!t.calendarIsOpen)("ngIfElse",e)}}let y=(()=>{class e{constructor(e,t,i){this.authService=e,this.translationStore=t,this.cd=i,this.openUp=!1,this.selected=new o.n,this.daysOfWeek=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],this.timeFormats={long:p.a.HOUR24,short:p.a.HOUR12},this.calendarIsOpen=!1}set dateTime(e){this._dateTime=e,e&&this.isInitialized&&this.setStartTime()}get dateTime(){return this._dateTime}ngOnInit(){this.initOptions(),this.setStartTime(),this.openUp&&(this.options.drops="up"),this.minDate&&(this.options.minDate=this.minDate),this.maxDate&&(this.options.maxDate=a.tz(this.maxDate,this.timeZone).format("YYYY-MM-DD")),this.isInitialized=!0}initOptions(){const e=this.translationStore.getCurrentLang(),t=Object(f.e)(e,"dd"),i=a().locale(e);this.options={locale:{format:"YYYY-MM-DD",firstDay:(this.daysOfWeek.indexOf(this.authService.getUser()?this.authService.getUser().settings.weekStart:"MONDAY")+1)%7,daysOfWeek:t,monthNames:i.localeData().monthsShort()},alwaysShowCalendars:!0,startDate:this.dateTime,autoApply:!0,opens:"center",showCustomRangeLabel:!1,singleDatePicker:!0}}setStartTime(){const e=a.tz(this.dateTime,this.timeZone),t=e.get("year"),i=e.get("month"),n=e.get("date"),s=a().date(n).month(i).year(t);this.options.startDate=s,this.options.start=s}selectedDate(e){const t=e.start.get("year"),i=e.start.get("month"),n=e.start.get("date");this.selected.emit({year:t,month:i,day:n}),this.calendarIsOpen=!1}openDatepicker(){this.disableEdit||(this.calendarIsOpen||(this.calendarIsOpen=!0,this.cd.detectChanges()),setTimeout(()=>{if(this.picker)try{h(this.picker.nativeElement).data("daterangepicker").show()}catch(e){}},100))}closeDatepicker(e=!1){this.calendarIsOpen=!1,e&&this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(d.a),o.Rb(b.a),o.Rb(o.h))},e.\u0275cmp=o.Lb({type:e,selectors:[["input-single-date"],["","input-single-date",""]],viewQuery:function(e,t){var i;1&e&&o.gd(v,!0),2&e&&o.Kc(i=o.kc())&&(t.picker=i.first)},inputs:{disableEdit:"disableEdit",openUp:"openUp",dateTime:"dateTime",timeZone:"timeZone",minDate:"minDate",maxDate:"maxDate"},outputs:{selected:"selected"},decls:3,vars:2,consts:[["class","cl-non-selectable",4,"ngIf","ngIfElse"],["datepickerTemplate",""],[1,"cl-non-selectable"],["src","assets/images/ui-icons/calendar.svg"],["tabindex","0","class","pointer cl-non-selectable",3,"click","focus",4,"ngIf","ngIfElse"],["calendar",""],["tabindex","0",1,"pointer","cl-non-selectable",3,"click","focus"],["fakeCalendar",""],["daterangepicker","","tabindex","0",1,"pointer","cl-non-selectable",3,"options","focus","selected"],["datepicker",""]],template:function(e,t){if(1&e&&(o.Xc(0,C,2,0,"span",0),o.Xc(1,S,3,2,"ng-template",null,1,o.Yc)),2&e){const e=o.Lc(2);o.wc("ngIf",t.disableEdit)("ngIfElse",e)}},directives:[m.u,g.b],encapsulation:2,changeDetection:0}),e})();var O=i("Ymxs"),A=i("1Tmk"),k=i("1k8b"),T=i("enr5"),D=i("sYmb"),I=i("3Pt+"),_=i("3eYs");const R=["startInput"];function L(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",3),o.Xb(1,"input-time-ampm",4,5),o.jc("timeChanged",(function(t){return o.Oc(e),o.nc().timeChanged("start",t)}))("blur",(function(){return o.Oc(e),o.nc().blur()}))("focus",(function(){return o.Oc(e),o.nc().focus()})),o.Wb(),o.Sb(3,"span",6),o.Xb(4,"input-time-ampm",7),o.jc("blur",(function(){return o.Oc(e),o.nc().blur()}))("focus",(function(){return o.Oc(e),o.nc().focus("end")}))("timeChanged",(function(t){return o.Oc(e),o.nc().timeChanged("end",t)})),o.Wb(),o.Wb()}if(2&e){const e=o.nc();o.Cb(1),o.wc("disableEdit",e.disableEdit)("removeOpacity",e.removeOpacity)("focusOnInput",e.focusOnInput)("dateTime",e.dateTime.start)("timeFormat",e.timeFormat)("timeZone",e.timeZone),o.Cb(3),o.wc("disableEdit",e.disableEdit)("removeOpacity",e.removeOpacity)("focusOnInput",e.focusOnInput)("dateTime",e.dateTime.end)("timeFormat",e.timeFormat)("timeZone",e.timeZone)}}function x(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",8),o.Xb(1,"input-single-date",9),o.jc("selected",(function(t){return o.Oc(e),o.nc().dateChanged(t)})),o.Wb(),o.Wb()}if(2&e){const e=o.nc();o.Cb(1),o.wc("openUp",e.openUp)("timeZone",e.timeZone)("disableEdit",e.disableEdit)("dateTime",e.dateTime.start)("minDate",e.minDate)("maxDate",e.maxDate)}}function P(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",10),o.Xb(1,"input",11,12),o.jc("keyup.enter",(function(){return o.Oc(e),o.Lc(2).blur()}))("keydown.arrowup",(function(){return o.Oc(e),o.nc().textualDateDebounce("up")}))("keydown.arrowdown",(function(){return o.Oc(e),o.nc().textualDateDebounce("down")}))("focus",(function(){o.Oc(e);const t=o.Lc(2),i=o.nc();return i.textualDateInFocus=!0,i.setFocus(t)}))("blur",(function(){o.Oc(e);const t=o.nc();return t.textualDateInFocus=!1,t.textualDateChanged()}))("ngModelChange",(function(t){return o.Oc(e),o.nc().textualDateValue=t})),o.oc(3,"formatDateToday"),o.Wb(),o.Wb()}if(2&e){const e=o.nc();o.Cb(1),o.wc("disabled",!e.removeOpacity&&e.disableEdit)("readOnly",e.removeOpacity)("ngModel",o.sc(3,3,e.textualDateValue,e.textualDateInFocus,e.showNowInsteadToday,e.retriggerPipe))}}let j=(()=>{class e{constructor(e,t,i,n,s,r){this.userService=e,this.toaster=t,this.workspaceService=i,this.authService=n,this.changedDayService=s,this.translateService=r,this.pickedDate=new o.n,this.debounce=!0,this.showNowInsteadToday=!1,this.mode="date_and_time",this.textualDate=!1,this.canTriggerNextDay=!1,this.isAdminOrOwner=!1,this.userFormat="DD.MM.YYYY",this.retriggerPipe=!1,this.updateDatetime$=new u.a,this.unsubscribe$=new u.a,this.debouncer$=new u.a}set dateTime(e){const t=new c.a(e);this._dateTime=t,this._dateTime&&this.initialized&&this.initData()}get dateTime(){return this._dateTime}ngOnInit(){if(this.timeZone=this.timeZone||this.userService.getTimeZone(),this.initData(),this.debounce&&this.subscribeToTimeDebouncer(),this.textualDate&&(this.textualDateBackup=this.textualDateValue,this.debouncer$.pipe(Object(n.a)(100),Object(s.a)(this.unsubscribe$)).subscribe(this.textualDateChanged.bind(this))),this.isAdminOrOwner=this.authService.isAdminOrOwner(),!this.isAdminOrOwner){const e=this.workspaceService.getLocalDefaultWorkspace();e&&e.lockTimeEntries&&(this.minDate=a.tz(e.lockTimeEntries,this.timeZone).format("YYYY-MM-DD"))}this.changedDayService.changeDayTrigger$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>{if(this.textualDate){if(this.canTriggerNextDay){const e=a(this.dateTime.start).startOf("day");1===a().startOf("day").diff(e,"days")&&this.dateChanged({year:e.get("year"),month:e.get("month"),day:e.get("date")+1})}this.retriggerPipe=!this.retriggerPipe}})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}textualDateDebounce(e){this.debouncer$.next(e)}checkIsDateInRange(e){if(this.minDate&&a(e).isBefore(this.minDate))return this.translateService.instant("SHARED_MODULES.SINGLE_DATE_PICKER.DATE_RANGE_ERROR_MSG"),this.toaster.pop("error",this.translateService.instant("SHARED_MODULES.SINGLE_DATE_PICKER.MESSAGES.ENTRY_LOCKED_ADD_TIME_FAIL")),!1;if(this.maxDate){const t=e.clone().startOf("day"),i=this.maxDate.clone().startOf("day");if(t.isAfter(i)){const e=this.translateService.instant("SHARED_MODULES.SINGLE_DATE_PICKER.DATE_RANGE_ERROR_MSG",{timeLimit:i});return this.toaster.pop("error",e),!1}}return!0}textualDateChanged(e){const t=this.textualDateValue.replace(/[^0-9]/gi,".").split(".").filter(e=>e).slice(-3),i=a(t,this.userFormat);if(!i.isValid())return void(this.textualDateValue=this.textualDateBackup);if("up"===e?i.add(1,"days"):"down"===e&&i.subtract(1,"days"),!this.checkIsDateInRange(i))return void(this.textualDateValue=this.textualDateBackup);this.textualDateValue=i.format(this.userFormat);const n=i.year(),s=i.month(),r=i.date(),o=a(this.dateTime.end).diff(a(this.dateTime.start),"ms"),c=a.tz(this.dateTime.start,this.timeZone).set({year:n,month:s,date:r});this.dateTime.start=c.toISOString();const l=c.add(o,"ms");if(this.dateTime.end=l.toISOString(),e)return;const u=a.tz(this.dateTime.start,this.timeZone).format(this.userFormat);this.textualDateBackup===u||this.emitNewDateTime(!0)}setFocus(e){this.datepicker&&this.datepicker.closeDatepicker(!0),setTimeout(()=>{e.focus(),e.select()},0)}setFocusToStartTime(){this.startInput.focusToInput()}dateChanged({year:e,month:t,day:i}){const n=a(this.dateTime.end).diff(a(this.dateTime.start),"ms"),s=a.tz(this.dateTime.start,this.timeZone).set({year:e,month:t,date:i});this.dateTime.start=s.toISOString();const r=s.add(n,"ms");this.dateTime.end=r.toISOString(),this.emitNewDateTime(!0)}emitNewDateTime(e=!1){if(this.dateTime.start=a(this.dateTime.start).toISOString(),this.dateTime.end=a(this.dateTime.end).toISOString(),a(this.dateTime.end).isBefore(a(this.dateTime.start)))this.dateTime.end=a(this.dateTime.end).add(1,"days").toISOString();else if(!e){const e=a(this.dateTime.end).diff(a(this.dateTime.start),"days");e>=1&&e>this.backupDurationInDays&&(this.dateTime.end=a(this.dateTime.end).subtract(1,"days").toISOString())}this.dateTime.start=a.utc(this.dateTime.start).format(),this.dateTime.end=a.utc(this.dateTime.end).format();const t=a(this.dateTime.start),i=a(this.dateTime.end),n=a.duration(i.diff(t)).toISOString();this.dateTime.duration=n,this.intervalBackup=new c.a(this.dateTime),this.pickedDate.emit(this.dateTime)}closeDatepicker(e=!1){this.datepicker&&this.datepicker.closeDatepicker(e)}focus(e){"end"===e&&this.closeDatepicker(),this.checkForUpdate=!1,this.updateDatetime$.next()}blur(){this.checkForUpdate=!0,this.updateDatetime$.next()}timeChanged(e,t){this.dateTime[e]=t,this.isValueChanged=!0,this.checkForUpdate=!0,this.debounce?this.updateDatetime$.next():this.emitNewDateTime()}subscribeToTimeDebouncer(){this.updateDatetime$.pipe(Object(r.a)(100),Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.checkForUpdate&&this.isValueChanged&&(this.checkForUpdate=!1,this.isValueChanged=!1,this.emitNewDateTime())})}initData(){this.dateTime&&((!this.intervalBackup||this.intervalBackup.start!==this.dateTime.start||this.intervalBackup.end!==this.dateTime.end)&&(this.backupDurationInDays=Math.floor(a.duration(this.dateTime.duration).asDays())),this.dateTime.start=a.tz(this.dateTime.start,this.timeZone).format(),this.dateTime.end=a.tz(this.dateTime.end,this.timeZone).format(),this.textualDate&&(a.suppressDeprecationWarnings=!0,this.userFormat=this.dateFormat||this.userService.getDateFormatForUser(),this.textualDateValue=a.tz(this.dateTime.start,this.timeZone).format(this.userFormat)),this.initialized=!0)}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(l.a),o.Rb(O.a),o.Rb(A.a),o.Rb(d.a),o.Rb(k.a),o.Rb(D.f))},e.\u0275cmp=o.Lb({type:e,selectors:[["single-date-picker2"],["","single-date-picker2",""]],viewQuery:function(e,t){var i;1&e&&(o.gd(y,!0),o.gd(R,!0)),2&e&&(o.Kc(i=o.kc())&&(t.datepicker=i.first),o.Kc(i=o.kc())&&(t.startInput=i.first))},inputs:{debounce:"debounce",openUp:"openUp",focusOnInput:"focusOnInput",removeOpacity:"removeOpacity",showNowInsteadToday:"showNowInsteadToday",dateTime:"dateTime",disableEdit:"disableEdit",mode:"mode",textualDate:"textualDate",maxDate:"maxDate",canTriggerNextDay:"canTriggerNextDay",dateFormat:"dateFormat",timeFormat:"timeFormat",timeZone:"timeZone"},outputs:{pickedDate:"pickedDate"},decls:3,vars:3,consts:[["class","cl-component-divided-left cl-single-date-picker",4,"ngIf"],["class","cl-component-divided-left cl-no-divider-border cl-ml-n3 recorder-date-picker",4,"ngIf"],["class","cl-component-divided-left cl-input-date-picker-container cl-no-divider-border cl-ml-n3 cl-d-lg-custom-inline-flex",4,"ngIf"],[1,"cl-component-divided-left","cl-single-date-picker"],[1,"cl-text-right",3,"disableEdit","removeOpacity","focusOnInput","dateTime","timeFormat","timeZone","timeChanged","blur","focus"],["startInput",""],[1,"cl-h-line-divider"],[3,"disableEdit","removeOpacity","focusOnInput","dateTime","timeFormat","timeZone","blur","focus","timeChanged"],[1,"cl-component-divided-left","cl-no-divider-border","cl-ml-n3","recorder-date-picker"],[3,"openUp","timeZone","disableEdit","dateTime","minDate","maxDate","selected"],[1,"cl-component-divided-left","cl-input-date-picker-container","cl-no-divider-border","cl-ml-n3","cl-d-lg-custom-inline-flex"],["type","text","autocomplete","off",1,"cl-form-control","cl-input-date-picker",3,"disabled","readOnly","ngModel","keyup.enter","keydown.arrowup","keydown.arrowdown","focus","blur","ngModelChange"],["inputDate",""]],template:function(e,t){1&e&&(o.Xc(0,L,5,12,"div",0),o.Xc(1,x,2,6,"div",1),o.Xc(2,P,4,8,"div",2)),2&e&&(o.wc("ngIf","date_and_time"===t.mode||"time_only"===t.mode),o.Cb(1),o.wc("ngIf","date_and_time"===t.mode||"date_only"===t.mode),o.Cb(1),o.wc("ngIf",t.textualDate))},directives:[m.u,T.a,y,I.c,I.s,I.v],pipes:[_.a],encapsulation:2,changeDetection:0}),e})()},"6Dzi":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("fXoL"),s=i("hV/V"),r=i("ofXK"),o=i("sYmb"),a=i("Kdc/");function c(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",8),n.jc("click",(function(){return n.Oc(e),n.nc().expandMobileView()})),n.Xb(1,"span",9),n.Sb(2,"img",4),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("src",e.isExpandedMobileView?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc)}}function l(e,t){if(1&e&&(n.Xb(0,"th"),n.Xb(1,"span",13),n.Zc(2),n.oc(3,"momentToLocaleDateString"),n.Wb(),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(2),n.ad(n.qc(3,1,e,i.currentLanguage))}}function u(e,t){if(1&e&&(n.Vb(0),n.Xc(1,l,4,4,"th",10),n.Xb(2,"th",11),n.Xb(3,"span",12),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",e.week),n.Cb(3),n.ad(n.pc(5,2,"GLOBAL.TOTAL_TIME"))}}let d=(()=>{class e{constructor(e){this.translationStorage=e,this.onExpand=new n.n,this.onExpandMobileView=new n.n}ngOnInit(){this.currentLanguage=this.translationStorage.getCurrentLang()}toggleExpand(){this.onExpand.emit(!this.isExpanded)}expandMobileView(){this.isExpandedMobileView=!this.isExpandedMobileView,this.onExpandMobileView.emit(this.isExpandedMobileView)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["weekly-group-header"],["","weekly-group-header",""]],inputs:{isExpanded:"isExpanded",isExpandedMobileView:"isExpandedMobileView",hideExpandAll:"hideExpandAll",isDesktop:"isDesktop",mainLabel:"mainLabel",week:"week"},outputs:{onExpand:"onExpand",onExpandMobileView:"onExpandMobileView"},decls:9,vars:4,consts:[[1,"cl-h6","cl-mb-0","cl-py-2","cl-py-lg-custom-0","cl-footable-first-visible"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-d-flex","cl-ml-0",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0","cl-ml-lg-custom-2"],[3,"src"],[1,"cl-h5","cl-mb-0"],["class","cl-ml-auto",3,"click",4,"ngIf"],[4,"ngIf"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[4,"ngFor","ngForOf"],[1,"cl-d-flex","cl-justify-content-end","cl-border-top-0"],[1,"cl-h6","cl-mb-0"],[1,"cl-h6"]],template:function(e,t){1&e&&(n.Xb(0,"th",0),n.Xb(1,"div",1),n.Xb(2,"a",2),n.jc("click",(function(){return t.toggleExpand()})),n.Xb(3,"span",3),n.Sb(4,"img",4),n.Wb(),n.Wb(),n.Xb(5,"div",5),n.Zc(6),n.Wb(),n.Xc(7,c,3,1,"a",6),n.Wb(),n.Wb(),n.Xc(8,u,6,4,"ng-container",7)),2&e&&(n.Cb(4),n.wc("src",t.isExpanded?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc),n.Cb(2),n.ad(t.mainLabel),n.Cb(1),n.wc("ngIf",!t.isDesktop),n.Cb(1),n.wc("ngIf",t.isDesktop))},directives:[r.u,r.t],pipes:[o.e,a.a],encapsulation:2,changeDetection:0}),e})()},"6FRn":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("Ymxs"),s=i("fXoL"),r=i("sYmb");let o=(()=>{class e{constructor(e,t){this.toaster=e,this.translateService=t}copyToClipboard(e){try{const t=e.value&&e.value.length||99999;e.select(),e.setSelectionRange(0,t),document.execCommand("copy");const i=this.translateService.instant("GLOBAL.COPIED_NOTIFICATION");this.toaster.pop("success",i)}catch(t){}}}return e.\u0275fac=function(t){return new(t||e)(s.fc(n.a),s.fc(r.f))},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac}),e})()},"6GAr":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("V3bs");const r=["container"],o=["*"];let a=(()=>{class e{constructor(){}ngOnInit(){}ngAfterViewInit(){const e=this.container.nativeElement.querySelector("[autofocus]");e&&e.focus()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["list-items"]],viewQuery:function(e,t){var i;1&e&&n.gd(r,!0),2&e&&n.Kc(i=n.kc())&&(t.container=i.first)},ngContentSelectors:o,decls:5,vars:0,consts:[["arrowNavigation","",1,"cl-scroll-area"],["tabindex","0",1,"cl-no-focus-tabindex"],["container",""],["dropdownClose","","tabindex","0"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0),n.Xb(1,"div",1,2),n.uc(3),n.Wb(),n.Sb(4,"span",3),n.Wb())},directives:[s.a],encapsulation:2,changeDetection:0}),e})()},"6gGB":function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("fXoL"),s=i("XNiG"),r=i("uI7B"),o=i("tyNb"),a=i("2rWG"),c=i("sbmM"),l=i("qUN8"),u=i("e0xV"),d=i("ofXK"),h=i("dlKe"),p=i("sYmb"),b=i("BhhM");function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",15),n.Xb(1,"div",16),n.Xb(2,"div",17),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Xb(5,"div",18),n.Xb(6,"a",19),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.isFilterOptionsExpanded=!t.isFilterOptionsExpanded})),n.Xb(7,"span",20),n.Zc(8),n.Wb(),n.Sb(9,"img",21),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(3),n.ad(n.pc(4,2,"GLOBAL.SHOW_LABEL")),n.Cb(5),n.bd(" ",e.getStatusLabel()," ")}}function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",25),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(3);return s.changeStatus(i.value),s.isFilterOptionsExpanded=!1})),n.Xb(1,"div",26),n.Zc(2),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(3);n.Hb("cl-active",e.value==i.currentStatus),n.Cb(2),n.ad(e.label)}}function g(e,t){if(1&e&&(n.Xb(0,"div",22),n.Xb(1,"div",23),n.Xc(2,m,3,3,"a",24),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(2),n.wc("ngForOf",e.filterOptions)}}function v(e,t){if(1&e&&(n.Xb(0,"div",33),n.Xb(1,"span",34),n.Zc(2),n.Wb(),n.Sb(3,"img",35),n.Wb()),2&e){const e=n.nc(3);n.Cb(2),n.ad(e.selectedCount)}}function C(e,t){if(1&e&&(n.Xb(0,"div",27),n.Xb(1,"div",28),n.Xb(2,"div",29),n.Xb(3,"span",2),n.Zc(4),n.Wb(),n.Wb(),n.Xb(5,"div",30),n.Xc(6,v,4,1,"div",31),n.Sb(7,"img",32),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(4),n.ad(e.selectedName||(null==e.selectedItem?null:e.selectedItem.name)||(null==e.selectedItem?null:e.selectedItem.email)),n.Cb(2),n.wc("ngIf",e.selectedCount)}}function E(e,t){if(1&e&&(n.Xb(0,"div",42),n.Xb(1,"span",34),n.Zc(2),n.Wb(),n.Sb(3,"img",35),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(2),n.ad(e.count)}}function w(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",38),n.jc("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc(3).setValue(i)}))("keyup.enter",(function(){n.Oc(e);const i=t.$implicit;return n.nc(3).setValue(i)})),n.Xb(1,"div",39),n.Xb(2,"div",40),n.Xb(3,"span",2),n.Zc(4),n.Wb(),n.Wb(),n.Xc(5,E,4,1,"div",41),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit;n.Cb(4),n.ad(e.name||e.email),n.Cb(1),n.wc("ngIf",e.count)}}function S(e,t){1&e&&(n.Xb(0,"span",43),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.NO_RESULTS_LABEL")," "))}function y(e,t){if(1&e&&(n.Vb(0),n.Xc(1,w,6,2,"div",36),n.Xc(2,S,3,3,"span",37),n.Ub()),2&e){const e=t.ngIf,i=n.nc(2);n.Cb(1),n.wc("ngForOf",e),n.Cb(1),n.wc("ngIf",i.search&&!(null!=e&&e.length))}}function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",4),n.Xb(1,"div",5),n.Xb(2,"div",6),n.Xb(3,"input-search",7),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc();return i.search=t,i.onSearchChange()})),n.Wb(),n.Wb(),n.Wb(),n.Xc(4,f,10,4,"div",8),n.Xc(5,g,3,1,"div",9),n.Xc(6,C,8,2,"div",10),n.Xb(7,"div",11,12),n.jc("scrolled",(function(){return n.Oc(e),n.nc().onScroll()})),n.Xc(9,y,3,2,"ng-container",13),n.oc(10,"filter"),n.Sb(11,"span",14),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(3),n.wc("debounceTime",e.debounceTime)("search",e.search)("placeholder",e.placeholder),n.Cb(1),n.wc("ngIf",null==e.filterOptions?null:e.filterOptions.length),n.Cb(1),n.wc("ngIf",e.isFilterOptionsExpanded),n.Cb(1),n.wc("ngIf",e.showSelectedItem),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",n.rc(10,10,e.localListCopy,e.searchOffline&&e.search,e.nameMapper))}}let A=(()=>{class e{constructor(e,t){this.cd=e,this.router=t,this.debounceTime=300,this.search="",this.searchOffline=!1,this.currentStatus="ACTIVE",this.onChanged=new n.n,this.onSearch=new n.n,this.onOpen=new n.n,this.onClose=new n.n,this.loadMore=new n.n,this.onFilterChanged=new n.n,this.unsubscribe$=new s.a,this.localListCopy=[]}set list(e){this._list=e,this.isInitialized&&this.updateSelectedItem()}get list(){return this._list}set usersFull(e){this._usersFull=e,this.isInitialized&&this.updateSelectedItem()}get usersFull(){return this._usersFull}set value(e){this._value=e,this.isInitialized&&this.updateSelectedItem()}get value(){return this._value}ngOnInit(){this.updateSelectedItem(),this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onScroll(){this.loadMore.emit()}changeStatus(e){this.currentStatus=e,this.onFilterChanged.emit(e)}triggerDetection(){this.updateSelectedItem(),this.cd.markForCheck()}getStatusLabel(){var e,t;return null===(t=null===(e=this.filterOptions)||void 0===e?void 0:e.filter(e=>e.value===this.currentStatus)[0])||void 0===t?void 0:t.label}onSearchChange(){this.searchOffline||this.onSearch.emit(this.search)}opened(){this.onOpen.emit()}closed(){this.onClose.emit()}updateSelectedItem(){this.showSelectedItem=this.list.map(e=>e.id).includes(this.value),this.localListCopy=[...this.list.filter(e=>e.id!==this.value)];const e=(this.list||[]).find(e=>(null==e?void 0:e.id)===this.value);e&&(this.selectedItem=new r.a(e))}setValue(e){e.id!==this.value&&(this.value=e.id,this.updateSelectedItem(),this.onChanged.emit(this.selectedItem))}nameMapper(e){return e.name}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(o.d))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-searchable"]],inputs:{placeholder:"placeholder",selectedName:"selectedName",selectedCount:"selectedCount",overrideTitle:"overrideTitle",debounceTime:"debounceTime",search:"search",searchOffline:"searchOffline",filterOptions:"filterOptions",currentStatus:"currentStatus",list:"list",usersFull:"usersFull",value:"value"},outputs:{onChanged:"onChanged",onSearch:"onSearch",onOpen:"onOpen",onClose:"onClose",loadMore:"loadMore",onFilterChanged:"onFilterChanged"},decls:6,vars:4,consts:[[1,"cl-dropdown",3,"dropdownKey","onOpen","onClose"],["tabindex","0","dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-text-left","cl-dropdown-toggle","pointer","cl-d-flex"],[1,"cl-cut-text"],["class","cl-dropdown-menu cl-sm-down-r-0","style","width: 300px;","openUpAtBottom","",4,"dropdownKeyContent"],["openUpAtBottom","",1,"cl-dropdown-menu","cl-sm-down-r-0",2,"width","300px"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","search","placeholder","onSearchChange"],["class","cl-dropdown-item cl-border-bottom cl-border-light",4,"ngIf"],["class","cl-collapse cl-show",4,"ngIf"],["class","cl-dropdown-item cl-px-3 cl-dropdown-menu-sub-header",4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["scrollArea",""],[4,"ngIf"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[1,"cl-dropdown-item-expand","cl-cut-text"],["src","assets/images/ui-icons/chevron-down.svg"],[1,"cl-collapse","cl-show"],[1,"cl-collapse-content"],["doNotCloseDropdown","","class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngFor","ngForOf"],["doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],["doNotCloseDropdown","",1,"cl-cut-text"],[1,"cl-dropdown-item","cl-px-3","cl-dropdown-menu-sub-header"],[1,"cl-item-between","cl-d-flex","cl-justify-content-between","cl-w-100"],[1,"cl-d-flex","cl-cut-text-wrapper"],[1,"cl-d-flex","cl-ml-1","cl-dropdown-item-workspace-right"],["class","cl-d-flex cl-mr-1","clickCloseDropdown","",4,"ngIf"],["src","assets/ui-icons/checkmark-green.svg",1,"cl-ml-1"],["clickCloseDropdown","",1,"cl-d-flex","cl-mr-1"],[1,"cl-small","cl-text-muted"],["src","assets/ui-icons/camera-icon.svg",1,"cl-ml-1"],["class","cl-dropdown-item cl-px-3 cl-hover-pointer","tabindex","0","clickCloseDropdown","",3,"click","keyup.enter",4,"ngFor","ngForOf"],["class","cl-dropdown-item",4,"ngIf"],["tabindex","0","clickCloseDropdown","",1,"cl-dropdown-item","cl-px-3","cl-hover-pointer",3,"click","keyup.enter"],["clickCloseDropdown","",1,"cl-item-between"],["clickCloseDropdown","",1,"cl-d-flex","cl-cut-text-wrapper"],["class","cl-d-flex cl-ml-1","clickCloseDropdown","",4,"ngIf"],["clickCloseDropdown","",1,"cl-d-flex","cl-ml-1"],[1,"cl-dropdown-item"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.jc("onOpen",(function(){return t.opened()}))("onClose",(function(){return t.closed()})),n.Xb(1,"div",1),n.Xb(2,"span",2),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb(),n.Xc(5,O,12,14,"div",3),n.Wb()),2&e&&(n.wc("dropdownKey",!1),n.Cb(3),n.bd(" ",t.overrideTitle||(null==t.selectedItem?null:t.selectedItem.name)||t.selectedName||(null==t.selectedItem?null:t.selectedItem.email)||n.pc(4,2,"SHARED_MODULES.CUSTOM_FIELD.TYPE_SELECT_LABEL")," "))},directives:[a.a,c.a,l.a,u.a,d.u,h.a,d.t],pipes:[p.e,b.a],encapsulation:2,changeDetection:0}),e})()},"6qRu":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("O3o7"),s=i("tnjF");class r{constructor(e,t){this._task=e&&new s.a(e),this._project=t&&new n.a(t)}get task(){return this._task}set task(e){this._task=e}get project(){return this._project}set project(e){this._project=e}}},"6t6a":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.NONE="",e.UPON_RECEIPT="GLOBAL.UPON_RECEIPT_LABEL",e.AFTER_10="GLOBAL.AFTER_10_DAYS_LABEL",e.AFTER_15="GLOBAL.AFTER_15_DAYS_LABEL",e.AFTER_30="GLOBAL.AFTER_30_DAYS_LABEL",e.AFTER_60="GLOBAL.AFTER_60_DAYS_LABEL",e.AFTER_90="GLOBAL.AFTER_90_DAYS_LABEL",e.TODAY="GLOBAL.TODAY_LABEL",e.YESTERDAY="GLOBAL.YESTERDAY_LABEL",e.SELECT_DATE="GLOBAL.SELECT_DATE",e}({})},"6yyQ":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i){if(!e||0===e.length)return[];const n=(t-1)*i,s=e.length;if(n>s)return e;let r=n+i;return r>s&&(r=s),e.slice(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"paginate",type:e,pure:!0}),e})()},"7EHt":function(e,t,i){"use strict";i.d(t,"a",(function(){return Z})),i.d(t,"b",(function(){return $})),i.d(t,"c",(function(){return z}));var n=i("fXoL"),s=i("8LU1"),r=i("XNiG"),o=i("quSY"),a=i("0EQZ");let c=0,l=(()=>{class e{constructor(){this._stateChanges=new r.a,this._openCloseAllActions=new r.a,this.id="cdk-accordion-"+c++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Object(s.b)(e)}openAll(){this._openCloseAll(!0)}closeAll(){this._openCloseAll(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete()}_openCloseAll(e){this.multi&&this._openCloseAllActions.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[n.Ab]}),e})(),u=0,d=(()=>{class e{constructor(e,t,i){this.accordion=e,this._changeDetectorRef=t,this._expansionDispatcher=i,this._openCloseAllSubscription=o.a.EMPTY,this.closed=new n.n,this.opened=new n.n,this.destroyed=new n.n,this.expandedChange=new n.n,this.id="cdk-accordion-child-"+u++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((e,t)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===t&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Object(s.b)(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(s.b)(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(l,12),n.Rb(n.h),n.Rb(a.b))},e.\u0275dir=n.Mb({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[n.Bb([{provide:l,useValue:void 0}])]}),e})(),h=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();var p=i("ofXK");function b(){throw Error("Host already has a portal attached")}class f{attach(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&b(),this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class m extends f{constructor(e,t,i,n){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=n}}class g extends f{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class v extends f{constructor(e){super(),this.element=e instanceof n.l?e.nativeElement:e}}let C=(()=>{class e extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&b(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof m?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof g?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof v?(this._attachedPortal=e,this.attachDomPortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new n.n,this.attachDomPortal=e=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const t=e.element;if(!t.parentNode)throw Error("DOM portal content must be attached to a parent node.");const i=this._document.createComment("dom-portal");e.setAttachedHost(this),t.parentNode.insertBefore(i,t),this._getRootNode().appendChild(t),super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),n=t.createComponent(i,t.length,e.injector||t.injector);return t!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.j),n.Rb(n.P),n.Rb(p.e))},e.\u0275dir=n.Mb({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[n.zb]}),e})(),E=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();var w=i("LRne");i("vkgz"),i("Kj3r");var S=i("pLZG"),y=(i("lJxs"),i("IzEk")),O=i("nLfN");i("HDdC"),"undefined"!=typeof Element&&Element;const A=Object(O.e)({passive:!0,capture:!0});let k=(()=>{class e{constructor(e,t,i){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=e=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=e.composedPath?e.composedPath()[0]:e.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._document=i}monitor(e,t=!1){if(!this._platform.isBrowser)return Object(w.a)(null);const i=Object(s.c)(e);if(this._elementInfo.has(i)){let e=this._elementInfo.get(i);return e.checkChildren=t,e.subject.asObservable()}let n={unlisten:()=>{},checkChildren:t,subject:new r.a};this._elementInfo.set(i,n),this._incrementMonitoredElementCount();let o=e=>this._onFocus(e,i),a=e=>this._onBlur(e,i);return this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",o,!0),i.addEventListener("blur",a,!0)}),n.unlisten=()=>{i.removeEventListener("focus",o,!0),i.removeEventListener("blur",a,!0)},n.subject.asObservable()}stopMonitoring(e){const t=Object(s.c)(e),i=this._elementInfo.get(t);i&&(i.unlisten(),i.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())}focusVia(e,t,i){const n=Object(s.c)(e);this._setOriginForCurrentEventQueue(t),"function"==typeof n.focus&&n.focus(i)}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,t,i){i?e.classList.add(t):e.classList.remove(t)}_setClasses(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(e){let t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const i=this._elementInfo.get(t);if(!i||!i.checkChildren&&t!==e.target)return;let n=this._origin;n||(n=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,n),this._emitOrigin(i.subject,n),this._lastFocusOrigin=n}_onBlur(e,t){const i=this._elementInfo.get(t);!i||i.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(i.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{const e=this._getDocument(),t=this._getWindow();e.addEventListener("keydown",this._documentKeydownListener,A),e.addEventListener("mousedown",this._documentMousedownListener,A),e.addEventListener("touchstart",this._documentTouchstartListener,A),t.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){if(!--this._monitoredElementCount){const e=this._getDocument(),t=this._getWindow();e.removeEventListener("keydown",this._documentKeydownListener,A),e.removeEventListener("mousedown",this._documentMousedownListener,A),e.removeEventListener("touchstart",this._documentTouchstartListener,A),t.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.z),n.fc(O.a),n.fc(p.e,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.z),Object(n.fc)(O.a),Object(n.fc)(p.e,8))},token:e,providedIn:"root"}),e})();var T=i("/uUt"),D=i("JX91"),I=i("EY2u"),_=i("VRyK"),R=i("R0Ic"),L=i("R1ws");const x=["body"];function P(e,t){}const j=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],M=["mat-expansion-panel-header","*","mat-action-row"],X=function(e,t){return{collapsedHeight:e,expandedHeight:t}},F=function(e,t){return{value:e,params:t}};function W(e,t){if(1&e&&n.Sb(0,"span",2),2&e){const e=n.nc();n.wc("@indicatorRotate",e._getExpandedState())}}const B=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],N=["mat-panel-title","mat-panel-description","*"],G=new n.q("MAT_ACCORDION"),U={indicatorRotate:Object(R.m)("indicatorRotate",[Object(R.j)("collapsed, void",Object(R.k)({transform:"rotate(0deg)"})),Object(R.j)("expanded",Object(R.k)({transform:"rotate(180deg)"})),Object(R.l)("expanded <=> collapsed, void => collapsed",Object(R.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),expansionHeaderHeight:Object(R.m)("expansionHeight",[Object(R.j)("collapsed, void",Object(R.k)({height:"{{collapsedHeight}}"}),{params:{collapsedHeight:"48px"}}),Object(R.j)("expanded",Object(R.k)({height:"{{expandedHeight}}"}),{params:{expandedHeight:"64px"}}),Object(R.l)("expanded <=> collapsed, void => collapsed",Object(R.g)([Object(R.h)("@indicatorRotate",Object(R.f)(),{optional:!0}),Object(R.e)("225ms cubic-bezier(0.4,0.0,0.2,1)")]))]),bodyExpansion:Object(R.m)("bodyExpansion",[Object(R.j)("collapsed, void",Object(R.k)({height:"0px",visibility:"hidden"})),Object(R.j)("expanded",Object(R.k)({height:"*",visibility:"visible"})),Object(R.l)("expanded <=> collapsed, void => collapsed",Object(R.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let V=(()=>{class e{constructor(e){this._template=e}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.M))},e.\u0275dir=n.Mb({type:e,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),H=0;const Y=new n.q("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let $=(()=>{class e extends d{constructor(e,t,i,s,o,a,c){super(e,t,i),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new n.n,this.afterCollapse=new n.n,this._inputChanges=new r.a,this._headerId="mat-expansion-panel-header-"+H++,this._bodyAnimationDone=new r.a,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(Object(T.a)((e,t)=>e.fromState===t.fromState&&e.toState===t.toState)).subscribe(e=>{"void"!==e.fromState&&("expanded"===e.toState?this.afterExpand.emit():"collapsed"===e.toState&&this.afterCollapse.emit())}),c&&(this.hideToggle=c.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Object(s.b)(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Object(D.a)(null),Object(S.a)(()=>this.expanded&&!this._portal),Object(y.a)(1)).subscribe(()=>{this._portal=new g(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(G,12),n.Rb(n.h),n.Rb(a.b),n.Rb(n.P),n.Rb(p.e),n.Rb(L.a,8),n.Rb(Y,8))},e.\u0275cmp=n.Lb({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(e,t,i){var s;1&e&&n.Jb(i,V,!0),2&e&&n.Kc(s=n.kc())&&(t._lazyContent=s.first)},viewQuery:function(e,t){var i;1&e&&n.gd(x,!0),2&e&&n.Kc(i=n.kc())&&(t._body=i.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,t){2&e&&n.Hb("mat-expanded",t.expanded)("_mat-animation-noopable","NoopAnimations"===t._animationMode)("mat-expansion-panel-spacing",t._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[n.Bb([{provide:G,useValue:void 0}]),n.zb,n.Ab],ngContentSelectors:M,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,t){1&e&&(n.vc(j),n.uc(0),n.Xb(1,"div",0,1),n.jc("@bodyExpansion.done",(function(e){return t._bodyAnimationDone.next(e)})),n.Xb(3,"div",2),n.uc(4,1),n.Xc(5,P,0,0,"ng-template",3),n.Wb(),n.uc(6,2),n.Wb()),2&e&&(n.Cb(1),n.wc("@bodyExpansion",t._getExpandedState())("id",t.id),n.Db("aria-labelledby",t._headerId),n.Cb(4),n.wc("cdkPortalOutlet",t._portal))},directives:[C],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[U.bodyExpansion]},changeDetection:0}),e})(),z=(()=>{class e{constructor(e,t,i,n,s){this.panel=e,this._element=t,this._focusMonitor=i,this._changeDetectorRef=n,this._parentChangeSubscription=o.a.EMPTY,this._animationsDisabled=!0;const r=e.accordion?e.accordion._stateChanges.pipe(Object(S.a)(e=>!(!e.hideToggle&&!e.togglePosition))):I.a;this._parentChangeSubscription=Object(_.a)(e.opened,e.closed,r,e._inputChanges.pipe(Object(S.a)(e=>!!(e.hideToggle||e.disabled||e.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Object(S.a)(()=>e._containsFocus())).subscribe(()=>i.focusVia(t,"program")),i.monitor(t).subscribe(t=>{t&&e.accordion&&e.accordion._handleHeaderFocus(this)}),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}_animationStarted(){this._animationsDisabled=!1}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_keydown(e){switch(e.keyCode){case 32:case 13:(function(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey})(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e="program",t){this._focusMonitor.focusVia(this._element,e,t)}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb($,1),n.Rb(n.l),n.Rb(k),n.Rb(n.h),n.Rb(Y,8))},e.\u0275cmp=n.Lb({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header"],hostVars:19,hostBindings:function(e,t){1&e&&(n.Ib("@expansionHeight.start",(function(){return t._animationStarted()})),n.jc("click",(function(){return t._toggle()}))("keydown",(function(e){return t._keydown(e)}))),2&e&&(n.Db("id",t.panel._headerId)("tabindex",t.disabled?-1:0)("aria-controls",t._getPanelId())("aria-expanded",t._isExpanded())("aria-disabled",t.panel.disabled),n.fd("@.disabled",t._animationsDisabled)("@expansionHeight",n.Cc(16,F,t._getExpandedState(),n.Cc(13,X,t.collapsedHeight,t.expandedHeight))),n.Hb("mat-expanded",t._isExpanded())("mat-expansion-toggle-indicator-after","after"===t._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===t._getTogglePosition()))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:N,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,t){1&e&&(n.vc(B),n.Xb(0,"span",0),n.uc(1),n.uc(2,1),n.uc(3,2),n.Wb(),n.Xc(4,W,1,1,"span",1)),2&e&&(n.Cb(4),n.wc("ngIf",t._showToggle()))},directives:[p.u],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[U.indicatorRotate,U.expansionHeaderHeight]},changeDetection:0}),e})(),Z=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[p.c,h,E]]}),e})()},"8+Zx":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("xoOP"),s=i("hkzH"),r=i("y+xF"),o=i("LfE4");class a{constructor(e){if(this.names=[],this.defaultStatus="ACTIVE",this.exclude=(e=e||{}).exclude||!1,this.defaultStatus=e.defaultStatus||"ACTIVE",this.options=e.options||{status:this.defaultStatus},this.names=e.names||[],e.map){for(const t in e.map)e.map[t]=e.map[t]||[];this.map=e.map}else this.map={}}removeWithoutIfNeed(){if(this.options.contains===s.d.CONTAINS_ONLY||this.options.status===o.a.ARCHIVED){this.removeSingleKey(r.b);for(const e in this.map){const t=this.map[e].indexOf(r.b);t>-1&&this.map[e].splice(t,1)}}}reset(){this.exclude=!1,this.clearMapValues()}removeSingleKey(e){delete this.map[e]}clearMap(){this.map={}}clearMapValues(){this.names=[];for(const e in this.map)this.map[e]=[]}get mapsLength(){let e=0;for(const t in this.map)e+=this.map[t].length;return e}isDirty(e){if(this.exclude)return!e||e!==this.mapsLength;for(const t in this.map)if(this.map[t].length>0)return!0;return!1}isSelectedAll(e){if(!this.exclude){if(e){const{total:t,selected:i}=e.getSelectedData();return t>0&&t===i}return!1}for(const t in this.map)if(this.map[t]&&this.map[t].length)return!1;return!0}isSomeSelected(e){if(!this.exclude){if(e){const{selected:t}=e.getSelectedData();return t>0}return!1}}hasSelected(){return 0!==this.getTotalOfChecked()}getTotalOfChecked(){let e=0;for(const t in this.map)e+=this.map[t].length;return e}getContainsFilter(e){if(this.isFilterDisabled)return;if(!this.isDirty())return;const t={contains:this.exclude?s.d.DOES_NOT_CONTAIN:s.d.CONTAINS,ids:this.map[e]?this.map[e].slice():[]},i=this.options.status;i&&(t.status=i);const n=this.options.contains;return n&&(t.containedInTimeentry=n),t}static containsFilterToCheckboxValues(e,t,i){const n={exclude:e.contains===s.d.DOES_NOT_CONTAIN,map:{[t]:[...e.ids||[]]},options:i,defaultStatus:e.status};return new a(n)}getSelectedData(e,t=0,i=!1,n=!1){let s=this.generateLabel(e);const a=s.substr(0,s.indexOf(","));let c=0;if(this.options.status===o.a.ARCHIVED&&n&&a.toLowerCase().includes(r.b)&&(s=s.substring(s.indexOf(",")+1),c=1),!this.exclude)return{numberOfSelected:this.getTotalOfChecked()-c,label:s};if(t)return{numberOfSelected:t-this.getTotalOfChecked()-c,label:s};if(!e)return{numberOfSelectedApproximately:"...",label:s};const l=e.getSelectedData().selected-c;if(i)return{numberOfSelected:l,label:s};const u=l-1;return{numberOfSelectedApproximately:u<=0?"...":u+"+",label:s}}generateLabel(e){return e?e.getAllSelectedEntities().map(e=>e.name||e.email).join(", "):""}static generateValuesDataFromMap(e,t="id",i){const n=new a;return e.forEach(e=>{const s=e.value.filter(e=>e.selected);s&&s.length&&(n.map[i||e.key]=s.map(e=>e.entity[t]),n.names=[...s.map(e=>e.entity.name||e.entity.email)])}),n}static updateMapFromValuesData(e,t,i="id",n){t.maps.forEach(t=>{t.value.forEach(s=>{const r=e.map[n||t.key];let o=r&&r.includes(s.entity[i]);e.exclude&&(o=!o),o&&(e.names.push(s.entity.name||s.entity.email),e.names=this.removeDuplicateNames(e.names)),s.setSelected(o)})})}updateSingleMap(e,t,i,n){let s=i;if(this.exclude&&(s=!s),s){if(!this.map[e])return this.names.push(n),void(this.map[e]=[t]);if(-1!==this.map[e].indexOf(t))return;return this.map[e]||console.warn("NO PROPERTY"),this.map[e].push(t),void this.names.push(n)}this.map[e]?this.map[e].indexOf(t)<0?console.warn("Missing VALUE!!!",e,t):(this.map[e]&&(this.map[e].splice(this.map[e].indexOf(t),1),this.names=this.names.filter(e=>e!=n)),this.map[e].length||delete this.map[e]):console.warn("Missing KEY!!!",this.map[e])}toggleMultipleIds(e,t,i){i?this.pushIds(e,t):this.removeIds(e,t)}pushIds(e,t){if(!t||!t.length)return;if(!this.map[e])return void(this.map[e]=t);const i=[...this.map[e],...t];this.map[e]=[...new Set(i)]}removeIds(e,t){t&&t.length&&this.map[e]&&(this.map[e]=this.map[e].filter(e=>!t.includes(e)))}static clone(e){const t={exclude:null==e?void 0:e.exclude,map:Object(n.f)(null==e?void 0:e.map),options:Object(n.f)(null==e?void 0:e.options),names:null==e?void 0:e.names};return new a(t)}isWithoutChecked(e){const t=this.map[e];return!!t&&t.indexOf(r.b)>-1}sameWith(e){if(!e)return!1;if(e.exclude!==this.exclude)return!1;if(JSON.stringify(e.options)!==JSON.stringify(this.options))return!1;if(Object.keys(e.map).length!==Object.keys(this.map).length)return!1;for(const t in e.map){if(!this.map[t])return!1;if(!Object(n.c)(e.map[t],this.map[t]))return!1}return!0}static areContainFiltersSame(e,t){return e&&t?e.status==t.status&&e.containedInTimeentry==t.containedInTimeentry&&e.contains===t.contains&&!Object(n.c)(e.ids,t.ids):e==t}getQuery(){return Object(n.r)(this.map)||this.isFilterDisabled?null:this.map}static isContainsFiltersSame(e,t){return!e&&!t||(e&&t?e.status==t.status&&e.containedInTimeentry==t.containedInTimeentry&&e.contains===t.contains&&!!Object(n.c)(e.ids,t.ids):e==t)}static removeDuplicateNames(e){return[...new Set(e)]}}},"87RK":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return Math.abs(Number(e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"simpleAbs",type:e,pure:!0}),e})()},"8IBD":function(e,t,i){"use strict";i.d(t,"a",(function(){return ti}));var n=i("lvCY"),s=i("1Tmk"),r=i("O3o7"),o=i("aLCL"),a=i("1G5W"),c=i("IzEk"),l=i("tQGB"),u=i("XNiG"),d=i("itXk"),h=i("lGQG"),p=i("aDua"),b=i("nLyk"),f=i("rsZi"),m=i("hl/z"),g=i("HApq"),v=i("PW4C"),C=i("n2sY"),E=i("xoOP"),w=i("Ymxs"),S=i("i/9y"),y=i("SvJf"),O=i("Y9WU"),A=i("fXoL"),k=i("1kSV"),T=i("tyNb"),D=i("sYmb"),I=i("ofXK"),_=i("VHTt"),R=i("LfE4"),L=i("jpmO"),x=i("Jmk/"),P=i("pLZG"),j=i("NHP+"),M=i("LRne"),X=i("cp0P"),F=i("YjdQ"),W=i("Qyj8"),B=i("T+Hu"),N=i("DoKE"),G=i("ePBx"),U=i("QKuU"),V=i("eGqU"),H=i("3Pt+"),Y=i("C0N5");const $=["projectNameInput"];function z(e,t){if(1&e){const e=A.Yb();A.Xb(0,"a",33),A.jc("click",(function(){A.Oc(e);const i=t.$implicit;return A.nc(2).selectArchived(i)})),A.Zc(1),A.Wb()}if(2&e){const e=t.$implicit,i=A.nc(2);A.Hb("cl-active",e.label===i.archivedFilterValue.label),A.Cb(1),A.bd(" ",e.label," ")}}function Z(e,t){if(1&e&&(A.Xb(0,"div",31),A.Xc(1,z,2,3,"a",32),A.Wb()),2&e){const e=A.nc();A.Cb(1),A.wc("ngForOf",e.archivedDropdown)}}function K(e,t){if(1&e&&(A.Xb(0,"span",34),A.Zc(1),A.Wb()),2&e){const e=A.nc();A.Cb(1),A.ad(e.clientFilterCount)}}function q(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",35),A.Xb(1,"checkbox-filter-dropdown",36),A.jc("emitSelected",(function(t){return A.Oc(e),A.nc().clientDropdownClosed(t)}))("loadMore",(function(t){return A.Oc(e),A.nc().loadMoreClients(t)}))("userFilterChanged",(function(t){return A.Oc(e),A.nc().clientFilterChanged(t)}))("clearSelectedList",(function(){return A.Oc(e),A.nc().clearClientSelection()}))("emitSelectionOfAllEntities",(function(t){return A.Oc(e),A.nc().selectedAllClients(t)})),A.oc(2,"translate"),A.Wb(),A.Wb()}if(2&e){const e=A.nc();A.Cb(1),A.wc("entity",e.projectGroupingLabel)("hasWithoutEntity",e.hasWithoutEntity)("placeholder",A.pc(2,10,"INVOICES.SHARED.SEARCH")+" "+e.projectGroupingLabel)("entityMap",e.clientMaps)("withoutSelected",e.withoutClient)("selectedAll",e.selectAllClients)("saveSelected",!0)("refreshAfterStatusChanged",!0)("queryStatus",e.clientStatus)("statusHasArchived",!0)}}function J(e,t){if(1&e&&(A.Xb(0,"span",34),A.Zc(1),A.Wb()),2&e){const e=A.nc();A.Cb(1),A.ad(e.teamFilterCount)}}function Q(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",37),A.Xb(1,"checkbox-filter-dropdown",38),A.jc("emitSelected",(function(t){return A.Oc(e),A.nc().userDropdownClosed(t)}))("loadMore",(function(t){return A.Oc(e),A.nc().loadMoreUsers(t)}))("userFilterChanged",(function(t){return A.Oc(e),A.nc().userFilterChanged(t)}))("clearSelectedList",(function(){return A.Oc(e),A.nc().clearUserSelection()}))("emitSelectionOfAllEntities",(function(t){return A.Oc(e),A.nc().selectedAllUsers(t)})),A.oc(2,"translate"),A.Wb(),A.Wb()}if(2&e){const e=A.nc();A.Cb(1),A.wc("entity","access")("hasWithoutEntity",!1)("entityMap",e.teamMaps)("withoutSelected",!1)("selectedAll",e.selectAllUsers)("placeholder",A.pc(2,9,"GLOBAL.FIND_MEMBER_OR_GROUP_LABEL"))("saveSelected",!0)("refreshAfterStatusChanged",!0)("queryStatus",e.userStatus)}}function ee(e,t){if(1&e&&(A.Xb(0,"span",34),A.Zc(1),A.Wb()),2&e){const e=A.nc(2);A.Cb(1),A.ad(e.billingFilterCount)}}function te(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",41),A.Xb(1,"checkbox-filter-dropdown",42),A.jc("emitSelected",(function(t){return A.Oc(e),A.nc(2).billingDropdownClosed(t)})),A.Wb(),A.Wb()}if(2&e){const e=A.nc(2);A.Cb(1),A.wc("entity",e.billingMap[0].key)("entityMap",e.billingMap)("showNameFilter",!1)("showActiveArchived",!1)("showSelectAll",!1)}}function ie(e,t){if(1&e&&(A.Xb(0,"div",10),A.Xb(1,"div",39),A.Zc(2),A.oc(3,"translate"),A.Xc(4,ee,2,1,"span",12),A.Wb(),A.Xc(5,te,2,5,"div",40),A.Wb()),2&e){const e=A.nc();A.Cb(2),A.bd(" ",A.pc(3,2,"GLOBAL.BILLING_LABEL")," "),A.Cb(2),A.wc("ngIf",0!==e.billingFilterCount)}}function ne(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",43),A.Xb(1,"a",44),A.jc("click",(function(){return A.Oc(e),A.nc().clearFilters()})),A.Zc(2),A.oc(3,"translate"),A.Wb(),A.Wb()}2&e&&(A.Cb(2),A.bd(" ",A.pc(3,1,"GLOBAL.CLEAR_FILTERS_LABEL")," "))}let se=(()=>{class e{constructor(e,t,i,n,s,r,o){this.clientService=e,this.userService=t,this.authService=i,this.userGroupService=n,this.workspaceService=s,this.cd=r,this.translate=o,this.showClearFilterChange=new A.n,this.emitFilter=new A.n,this.emitClearFilters=new A.n,this.billingMap=[{key:"Billing",label:this.translate.instant("GLOBAL.BILLING_LABEL"),value:[{entity:{name:this.translate.instant("GLOBAL.BILLABLE_LABEL"),enum:L.a.BILLABLE},selected:!1,isDisabled:!1},{entity:{name:this.translate.instant("REPORTS.SHARED.NON_BILLABLE_LABEL"),enum:L.a.NON_BILLABLE},selected:!1,isDisabled:!1}]}],this.billingFilterCount=0,this.billingFilterValue=L.a.NONE,this.searchByName="",this.clients=[],this.clientMaps=[],this.clientFilterCount=0,this.withoutClient=!1,this.selectAllClients=!1,this.clientIds=[],this.clientStatus="ACTIVE",this.refreshClientList=!0,this.clientRefreshListAfterFilterChange=!1,this.hasWithoutEntity=!0,this.users=[],this.userGroups=[],this.teamMaps=[],this.teamFilterCount=0,this.selectAllUsers=!1,this.userIds=[],this.userStatus="ACTIVE",this.refreshUserList=!0,this.refreshUserGroupList=!0,this.userRefreshListAfterFilterChange=!1,this.unsubscribe$=new j.a}set filter(e){if(Object(E.r)(e))return;this.archivedFilterValue=_.a.getDropdownOf(this.archivedDropdown,e.archived),this.billingFilterValue=e.billable,e.billable===L.a.BOTH?(this.billingFilterCount=2,this.billingMap[0].value.forEach(e=>e.selected=!0)):e.billable===L.a.NONE?(this.billingFilterCount=0,this.billingMap[0].value.forEach(e=>e.selected=!1)):(this.billingFilterCount=1,this.billingMap[0].value[e.billable===L.a.BILLABLE?0:1].selected=!0),this.searchByName=e.name,this.clientIds=e.clients||[],this.selectAllClients=!e.containsClient;const t=this.clientIds.indexOf("without")>-1;this.withoutClient=this.selectAllClients?!t:t,this.userIds=e.users||[],this.selectAllUsers=!e.containsUser,this.clientStatus=e.containsClient&&0===this.clientIds.length?"ACTIVE":e.clientStatus,this.userStatus=e.containsUser&&0===this.userIds.length?"ACTIVE":e.userStatus,this.pageLimit=e.limit,this.checkDropdownCloseToShowClear(),this.getClients({status:this.clientStatus}),this.getUsersAndUserGroups({status:this.userStatus,noGroups:!1,noUsers:!1}),this.projectGroupingLabel=this.workspaceService.generateClientLabel(this.projectGroupingLabel)}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.authService.permissionData$.pipe(Object(P.a)(e=>null!==e),Object(a.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.adminOrOwner=e}),this.clientMaps.push(Object(B.a)("Clients",this.translate.instant("GLOBAL.CLIENTS_LABEL"),[])),this.teamMaps.push(Object(B.a)("Groups",this.translate.instant("GLOBAL.GROUPS_LABEL"),[])),this.teamMaps.push(Object(B.a)("Users",this.translate.instant("GLOBAL.USERS_LABEL"),[])),this.archivedDropdown=[new _.a(R.a.ACTIVE,this.translate.instant("GLOBAL.ACTIVE_LABEL")),new _.a(R.a.ARCHIVED,this.translate.instant("GLOBAL.ARCHIVED_LABEL")),new _.a(R.a.ALL,this.translate.instant("GLOBAL.ALL_LABEL"))],this.archivedFilterValue=this.archivedDropdown[0],this.activeBillable=this.workspace.activeBillableHours,this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}checkSearchByNameToShowClear(){""!==this.searchByName&&this.showClearFilterChange.emit(!0)}getClients(e){const t=[];t.push(Object(B.a)("Clients",this.translate.instant("GLOBAL.CLIENTS_LABEL"),[])),this.refreshClientList?this.clients=[]:this.clientMaps[0].value.forEach(e=>{t[0].value.push(e)}),e.archived=e.status&&"ALL"!==e.status?"INACTIVE"===e.status||"ARCHIVED"===e.status?"ARCHIVED":"ACTIVE":"ALL",this.clientService.getClientsForProjectFilter(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.clients=[...this.clients,...e],t[0].value=[...t[0].value,...e.map(e=>new F.a(e,this.selectAllClients||this.clientIds.indexOf(e.id)>-1))],this.clientMaps=t;const i=[...this.clientIds,...this.clientMaps[0].value.filter(e=>e.selected).map(e=>e.entity.id)];if(this.withoutClient)i.push("without");else{const e=i.indexOf("without");e>-1&&i.splice(e,1)}this.clientIds=[...new Set(i)],this.clientFilterCount=!this.selectAllClients||"ALL"!==this.clientStatus&&this.clientStatus?this.clientIds.length>=50?"50+":this.clientIds.length:"...",this.cd.detectChanges()})}loadMoreClients(e){this.clientMaps[0].value.length%this.pageLimit==0&&(this.refreshClientList=!1,this.clientRefreshListAfterFilterChange=!1,this.getClients(e))}clientFilterChanged(e){this.refreshClientList=!0,this.selectAllClients=!1,this.withoutClient=!!e.selectedWithout,e.changedStatus?(this.clientRefreshListAfterFilterChange=!1,this.hasWithoutEntity=!0,this.clientIds=[],this.withoutClient=!1):(this.clientRefreshListAfterFilterChange=!0,this.hasWithoutEntity=!1,this.clientIds=this.clientIds.filter(t=>!e.unselectedEntities.includes(t)),""===e.name&&(this.hasWithoutEntity=!0)),e.status&&(this.clientStatus=e.status),this.getClients(e)}loadMoreUsers(e){this.refreshUserGroupList=!1,this.refreshUserList=!1,this.teamMaps[0].value.length%this.pageLimit!=0&&(e.noGroups=!0),this.teamMaps[1].value.length%this.pageLimit!=0&&(e.noUsers=!0),this.userRefreshListAfterFilterChange=!1,this.getUsersAndUserGroups(e)}userFilterChanged(e){this.refreshUserList=!0,this.refreshUserGroupList=!0,this.selectAllUsers=!1,e.changedStatus?(this.userRefreshListAfterFilterChange=!1,this.userIds=[]):(this.userRefreshListAfterFilterChange=!0,this.userIds=this.userIds.filter(t=>!e.unselectedEntities.includes(t))),e.status&&(this.userStatus=e.status),e.noGroups=!1,e.noUsers=!1,this.getUsersAndUserGroups(e)}selectedAllClients(e){this.selectAllClients=e}selectedAllUsers(e){this.selectAllUsers=e}clearClientSelection(){this.clientIds=[],this.clientFilterCount=0,this.selectAllClients=!1,this.withoutClient=!1,this.clientMaps.forEach(e=>{e.value.map(e=>e.selected=!1)}),this.cd.detectChanges()}clearUserSelection(){this.userIds=[],this.teamFilterCount=0,this.selectAllUsers=!1,this.teamMaps.forEach(e=>{e.value.map(e=>e.selected=!1)}),this.cd.detectChanges()}getUsersAndUserGroups(e){const t=[];t.push(Object(B.a)("Groups",this.translate.instant("GLOBAL.GROUPS_LABEL"),[])),t.push(Object(B.a)("Users",this.translate.instant("GLOBAL.USERS_LABEL"),[])),this.refreshUserGroupList?this.userGroups=[]:this.teamMaps[0].value.forEach(e=>{t[0].value.push(e)}),this.refreshUserList?this.users=[]:this.teamMaps[1].value.forEach(e=>{t[1].value.push(e)});const i=[];i.push("INACTIVE"===e.status||e.noGroups?Object(M.a)(null):this.userGroupService.getUserGroups(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$))),i.push(e.noUsers?Object(M.a)(null):this.workspaceService.getUsers(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$))),Object(X.a)(...i).subscribe(([e,i])=>{e&&(this.userGroups=[...this.userGroups,...e.groups],t[0].value=[...t[0].value,...e.groups.map(e=>new F.a(e,this.selectAllUsers||this.userIds.indexOf(e.id)>-1))]),i&&(this.users=[...this.users,...i.users],t[1].value=[...t[1].value,...i.users.map(e=>new F.a(e,this.selectAllUsers||this.userIds.indexOf(e.id)>-1))]),this.teamMaps=t;const n=[...this.userIds,...this.teamMaps[0].value.filter(e=>e.selected).map(e=>e.entity.id),...this.teamMaps[1].value.filter(e=>e.selected).map(e=>e.entity.id)];this.userIds=[...new Set(n)],this.teamFilterCount=!this.selectAllUsers||"ALL"!==this.userStatus&&this.userStatus?this.userIds.length>=50?"50+":this.userIds.length:"...",this.cd.detectChanges()})}selectArchived(e){this.archivedFilterValue=e,this.checkDropdownCloseToShowClear()}checkArchivedToShowClear(){"ACTIVE"!==this.archivedFilterValue.value&&this.showClearFilterChange.emit(!0)}clientDropdownClosed(e){if(!e)return;this.selectAllClients=e.selectedAll,this.withoutClient=e.selectedWithout,this.clientStatus=e.status;const t=e.entities[0]?e.entities[0]:this.clientMaps[0];this.clientIds=this.clientIds.filter(t=>!e.unselectedEntities.includes(t));const i=[...this.clientIds,...t.value.filter(e=>e.selected).map(e=>e.entity.id)];if(this.withoutClient)i.push("without");else{const e=i.indexOf("without");e>-1&&i.splice(e,1)}this.clientIds=[...new Set(i)],this.refreshClientList=!0,this.clientRefreshListAfterFilterChange?(this.getClients({status:this.clientStatus}),this.hasWithoutEntity=!0,this.clientRefreshListAfterFilterChange=!1):this.clientFilterCount=!this.selectAllClients||e.name||e.status?this.clientIds.length>=50?"50+":this.clientIds.length:"...",this.checkDropdownCloseToShowClear(),this.cd.detectChanges()}checkClientsToShowClear(){(this.clientIds.length||this.selectAllClients||this.withoutClient)&&this.showClearFilterChange.emit(!0)}userDropdownClosed(e){if(!e)return;this.selectAllUsers=e.selectedAll,this.userStatus=e.status;const t=e.entities[0]&&e.entities[1]?e.entities:this.teamMaps;this.userIds=this.userIds.filter(t=>!e.unselectedEntities.includes(t));const i=t[0].value.filter(e=>e.selected),n=t[1].value.filter(e=>e.selected),s=[...this.userIds,...i.map(e=>e.entity.id),...n.map(e=>e.entity.id)];this.userIds=[...new Set(s)],this.userRefreshListAfterFilterChange?(this.getUsersAndUserGroups({status:this.userStatus,noGroups:!1,noUsers:!1}),this.userRefreshListAfterFilterChange=!1):this.teamFilterCount=!e.selectedAll||e.name||e.status?this.userIds.length>=50?"50+":this.userIds.length:"...",this.checkDropdownCloseToShowClear(),this.cd.detectChanges()}checkUsersToShowClear(){(this.userIds.length||this.selectAllUsers)&&this.showClearFilterChange.emit(!0)}billingDropdownClosed(){const e=this.billingMap[0].value.filter(e=>e.selected);this.billingFilterCount=e.length,this.billingFilterValue=1===this.billingFilterCount?e[0].entity.enum:this.billingFilterCount?L.a.BOTH:L.a.NONE,this.checkDropdownCloseToShowClear(),this.cd.detectChanges()}checkBillingToShowClear(){this.billingFilterCount>0&&this.showClearFilterChange.emit(!0)}clearFilters(){this.teamMaps.forEach(e=>{e.value=[]}),this.clientMaps.forEach(e=>{e.value=[]}),this.billingMap[0].value.forEach(e=>e.selected=!1),this.selectAllUsers=!1,this.selectAllClients=!1,this.clientFilterCount=0,this.teamFilterCount=0,this.archivedFilterValue=this.archivedDropdown[0],this.billingFilterValue=L.a.NONE,this.billingFilterCount=0,this.refreshClientList=!0,this.refreshUserList=!0,this.refreshUserGroupList=!0,this.emitClearFilters.emit(!0)}applyFilter(){this.emitFilter.emit({name:this.searchByName,archived:this.archivedFilterValue.value,billable:this.billingFilterValue,clients:this.selectAllClients?this.withoutClient?[]:["without"]:this.clientIds,clientStatus:this.clientStatus,containsClient:!this.selectAllClients,users:this.selectAllUsers?[]:this.userIds,userStatus:this.userStatus,containsUser:!this.selectAllUsers})}focusProjectNameInput(){this.projectNameInput.nativeElement.focus()}checkDropdownCloseToShowClear(e){e&&(e.keyCode||e.charCode)===N.d||(this.showClearFilterChange.emit(!1),this.checkArchivedToShowClear(),this.checkBillingToShowClear(),this.checkSearchByNameToShowClear(),this.checkClientsToShowClear(),this.checkUsersToShowClear())}}return e.\u0275fac=function(t){return new(t||e)(A.Rb(x.a),A.Rb(W.a),A.Rb(h.a),A.Rb(G.a),A.Rb(s.a),A.Rb(A.h),A.Rb(D.f))},e.\u0275cmp=A.Lb({type:e,selectors:[["projects-filter"]],viewQuery:function(e,t){var i;1&e&&A.gd($,!0),2&e&&A.Kc(i=A.kc())&&(t.projectNameInput=i.first)},inputs:{projectGroupingLabel:"projectGroupingLabel",filter:"filter",showClearFilter:"showClearFilter",activeBillable:"activeBillable"},outputs:{showClearFilterChange:"showClearFilterChange",emitFilter:"emitFilter",emitClearFilters:"emitClearFilters"},decls:44,vars:22,consts:[[1,"cl-card","cl-border-bottom","cl-mb-4"],[1,"cl-component-row","cl-p-0"],[1,"cl-row","cl-no-gutters","cl-w-100"],[1,"cl-col-lg-custom-auto"],[1,"cl-report-entry-actions","cl-position-relative","cl-d-flex","cl-flex-md-nowrap","cl-justify-content-between","cl-justify-content-lg-custom-start","cl-flex-wrap"],[1,"cl-component-divided-left","cl-w-auto","cl-no-divider-border","cl-d-none","cl-d-lg-flex"],[1,"cl-h5","cl-mb-0"],["dropdown","",1,"cl-d-report-filter-item","cl-dropdown","cl-d-flex","cl-hover-pointer","cl-dropdown-mobile-width-auto"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-dropdown-toggle","cl-no-divider-border-down-md"],["class","cl-dropdown-menu cl-w-100",4,"dropdownContent"],["dropdown","",1,"cl-dropdown","cl-d-report-filter-item","cl-dropdown-large","cl-d-flex","cl-hover-pointer","cl-dropdown-mobile-width-auto"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-dropdown-toggle","cl-text-capitalize"],["class","cl-badge cl-badge-filter",4,"ngIf"],["class","cl-dropdown-menu cl-prevent-close cl-xs-down-r-0",4,"dropdownContent"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-dropdown-toggle"],["class","cl-dropdown-menu cl-lg-custom-down-r-0 cl-xs-down-l-0",4,"dropdownContent"],["class","cl-dropdown cl-d-report-filter-item cl-dropdown-large cl-d-flex cl-hover-pointer cl-dropdown-mobile-width-auto","dropdown","",4,"ngIf"],[1,"cl-col"],[1,"cl-d-flex","cl-align-items-center","cl-py-1","cl-py-lg-custom-0","cl-pr-2"],[1,"cl-component-divided-left","cl-remove-divider-mob","cl-flex-grow-1","cl-px-0","cl-px-lg-custom-2","cl-ml-2"],[1,"cl-input-group"],[1,"cl-input-group-prepend",3,"click"],[1,"cl-input-group-text","cl-bg-white","cl-input-timetracker-main","cl-hover-pointer"],["src","assets/images/ui-icons/search.svg"],["type","text",1,"cl-form-control","cl-input-timetracker-main",3,"placeholder","ngModel","keyup.enter","keyup","ngModelChange"],["projectNameInput",""],[1,"cl-ml-auto"],[1,"cl-mx-2"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-auto","cl-btn-sm","cl-d-flex","cl-d-lg-custom-none",2,"margin-top","0.9rem",3,"keyup.enter","click"],["tabindex","0","data-cy","apply-projects-filter",1,"cl-btn","cl-btn-primary","cl-ml-auto","cl-d-none","cl-d-lg-custom-block",3,"keyup.enter","click"],["class","cl-reset-filter",4,"ngIf"],[1,"cl-dropdown-menu","cl-w-100"],["class","cl-dropdown-item","closeDropdown","",3,"cl-active","click",4,"ngFor","ngForOf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[1,"cl-badge","cl-badge-filter"],[1,"cl-dropdown-menu","cl-prevent-close","cl-xs-down-r-0"],[3,"entity","hasWithoutEntity","placeholder","entityMap","withoutSelected","selectedAll","saveSelected","refreshAfterStatusChanged","queryStatus","statusHasArchived","emitSelected","loadMore","userFilterChanged","clearSelectedList","emitSelectionOfAllEntities"],[1,"cl-dropdown-menu","cl-lg-custom-down-r-0","cl-xs-down-l-0"],[3,"entity","hasWithoutEntity","entityMap","withoutSelected","selectedAll","placeholder","saveSelected","refreshAfterStatusChanged","queryStatus","emitSelected","loadMore","userFilterChanged","clearSelectedList","emitSelectionOfAllEntities"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-projects-no-divider","cl-dropdown-toggle","cl-text-capitalize"],["class","cl-dropdown-menu cl-w-100 cl-prevent-close cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-w-100","cl-prevent-close","cl-dropdown-menu-right"],[3,"entity","entityMap","showNameFilter","showActiveArchived","showSelectAll","emitSelected"],[1,"cl-reset-filter"],[3,"click"]],template:function(e,t){1&e&&(A.Xb(0,"div",0),A.Xb(1,"div",1),A.Xb(2,"div",2),A.Xb(3,"div",3),A.Xb(4,"div",4),A.Xb(5,"div",5),A.Xb(6,"span",6),A.Zc(7),A.oc(8,"translate"),A.Wb(),A.Wb(),A.Xb(9,"div",7),A.Xb(10,"div",8),A.Zc(11),A.Wb(),A.Xc(12,Z,2,1,"div",9),A.Wb(),A.Xb(13,"div",10),A.Xb(14,"div",11),A.Zc(15),A.Xc(16,K,2,1,"span",12),A.Wb(),A.Xc(17,q,3,12,"div",13),A.Wb(),A.Xb(18,"div",10),A.Xb(19,"div",14),A.Zc(20),A.oc(21,"translate"),A.Xc(22,J,2,1,"span",12),A.Wb(),A.Xc(23,Q,3,11,"div",15),A.Wb(),A.Xc(24,ie,6,4,"div",16),A.Wb(),A.Wb(),A.Xb(25,"div",17),A.Xb(26,"div",18),A.Xb(27,"div",19),A.Xb(28,"div",20),A.Xb(29,"div",21),A.jc("click",(function(){return t.focusProjectNameInput()})),A.Xb(30,"div",22),A.Sb(31,"img",23),A.Wb(),A.Wb(),A.Xb(32,"input",24,25),A.jc("keyup.enter",(function(){return t.applyFilter()}))("keyup",(function(e){return t.checkDropdownCloseToShowClear(e)}))("ngModelChange",(function(e){return t.searchByName=e})),A.oc(34,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xb(35,"div",26),A.Xb(36,"div",27),A.Xb(37,"button",28),A.jc("keyup.enter",(function(){return t.applyFilter()}))("click",(function(){return t.applyFilter()})),A.Zc(38),A.oc(39,"translate"),A.Wb(),A.Xb(40,"button",29),A.jc("keyup.enter",(function(){return t.applyFilter()}))("click",(function(){return t.applyFilter()})),A.Zc(41),A.oc(42,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xc(43,ne,4,3,"div",30)),2&e&&(A.Cb(7),A.bd(" ",A.pc(8,12,"GLOBAL.FILTER_LABEL")," "),A.Cb(4),A.bd(" ",t.archivedFilterValue.label," "),A.Cb(4),A.bd(" ",t.projectGroupingLabel," "),A.Cb(1),A.wc("ngIf",0!==t.clientFilterCount),A.Cb(4),A.bd(" ",A.pc(21,14,"GLOBAL.ACCESS_LABEL")," "),A.Cb(2),A.wc("ngIf",0!==t.teamFilterCount),A.Cb(2),A.wc("ngIf",t.activeBillable&&(!t.onlyAdminCanSeeAndChangeBillable||t.adminOrOwner)),A.Cb(8),A.xc("placeholder",A.pc(34,16,"AUDIT_LOG.TABLE_COLUMNS.PROJECT.NAME")),A.wc("ngModel",t.searchByName),A.Cb(6),A.bd(" ",A.pc(39,18,"GLOBAL.APPLY_LABEL")," "),A.Cb(3),A.bd(" ",A.pc(42,20,"GLOBAL.APPLY_FILTER_LABEL")," "),A.Cb(2),A.wc("ngIf",t.showClearFilter))},directives:[U.a,V.a,I.u,H.c,H.s,H.v,I.t,Y.a],pipes:[D.e],encapsulation:2,changeDetection:0}),e})();function re(e,t){1&e&&A.uc(0,0,["*ngTemplateOutlet","selectAllDivTemplate"])}function oe(e,t){1&e&&A.uc(0,1,["*ngTemplateOutlet","bulkButtons"])}function ae(e,t){if(1&e){const e=A.Yb();A.Xb(0,"th",9),A.Xb(1,"div",10),A.Xb(2,"a",14),A.jc("click",(function(){return A.Oc(e),A.nc(2).sortByDuration()})),A.Zc(3),A.Wb(),A.Wb(),A.Wb()}if(2&e){const e=A.nc(2);A.Cb(2),A.Hb("cl-up",e.sortBy===e.SortBy.DURATION&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.DURATION&&e.sortOrder===e.SortOrder.DESCENDING),A.Cb(1),A.bd(" ",e.labels[2]," ")}}function ce(e,t){if(1&e){const e=A.Yb();A.Xb(0,"th",9),A.Xb(1,"div",10),A.Xb(2,"a",14),A.jc("click",(function(){return A.Oc(e),A.nc(2).sortByAmount()})),A.Zc(3),A.Wb(),A.Wb(),A.Wb()}if(2&e){const e=A.nc(2);A.Cb(2),A.Hb("cl-up",e.sortBy===e.SortBy.BUDGET&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.BUDGET&&e.sortOrder===e.SortOrder.DESCENDING),A.Cb(1),A.bd(" ",e.labels[3]," ")}}function le(e,t){if(1&e){const e=A.Yb();A.Xb(0,"a",14),A.jc("click",(function(){return A.Oc(e),A.nc(3).sortByProgress()})),A.Zc(1),A.Wb()}if(2&e){const e=A.nc(3);A.Hb("cl-up",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.PROGRESS&&e.sortOrder===e.SortOrder.DESCENDING),A.Cb(1),A.bd(" ",e.labels[4]," ")}}function ue(e,t){if(1&e&&(A.Xb(0,"div",17),A.Zc(1),A.Wb()),2&e){const e=A.nc(3);A.Cb(1),A.bd(" ",e.labels[4]," ")}}function de(e,t){if(1&e&&(A.Xb(0,"th",9),A.Xb(1,"div",10),A.Xc(2,le,2,5,"a",15),A.Xc(3,ue,2,1,"div",16),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Cb(2),A.wc("ngIf",e.isAdminOrOwner),A.Cb(1),A.wc("ngIf",!e.isAdminOrOwner)}}function he(e,t){if(1&e&&(A.Xb(0,"th",9),A.Xb(1,"div",10),A.Xb(2,"div",18),A.Zc(3),A.Wb(),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Cb(3),A.bd(" ",e.labels[5]," ")}}function pe(e,t){if(1&e&&(A.Xb(0,"th",9),A.Xb(1,"div",10),A.Xb(2,"div",19),A.Zc(3),A.Wb(),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Cb(3),A.bd(" ",e.labels[6]," ")}}function be(e,t){if(1&e&&(A.Xb(0,"th",20),A.Xb(1,"div",19),A.Zc(2),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Cb(2),A.bd(" ",e.labels[7]," ")}}function fe(e,t){if(1&e){const e=A.Yb();A.Vb(0),A.Xb(1,"th",5),A.Xb(2,"div",6),A.Xc(3,re,1,0,void 0,7),A.Xb(4,"a",8),A.jc("click",(function(){return A.Oc(e),A.nc().sortByName()})),A.Zc(5),A.Wb(),A.Xc(6,oe,1,0,void 0,7),A.Wb(),A.Wb(),A.Xb(7,"th",9),A.Xb(8,"div",10),A.Xb(9,"a",11),A.jc("click",(function(){return A.Oc(e),A.nc().sortByClient()})),A.Zc(10),A.Wb(),A.Wb(),A.Wb(),A.Xc(11,ae,4,5,"th",12),A.Xc(12,ce,4,5,"th",12),A.Xc(13,de,4,2,"th",12),A.Xc(14,he,4,1,"th",12),A.Xc(15,pe,4,1,"th",12),A.Xc(16,be,3,1,"th",13),A.Ub()}if(2&e){const e=A.nc(),t=A.Lc(6),i=A.Lc(4);A.Cb(3),A.wc("ngTemplateOutlet",t),A.Cb(1),A.Hb("cl-up",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.NAME&&e.sortOrder===e.SortOrder.DESCENDING),A.Cb(1),A.bd(" ",e.labels[0]," "),A.Cb(1),A.wc("ngTemplateOutlet",i),A.Cb(3),A.Hb("cl-up",e.sortBy===e.SortBy.CLIENT_NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-up",e.sortBy===e.SortBy.CLIENT_NAME&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortBy===e.SortBy.CLIENT_NAME&&e.sortOrder===e.SortOrder.DESCENDING),A.Cb(1),A.bd(" ",e.labels[1]," "),A.Cb(1),A.wc("ngIf",null==e.projectColumns?null:e.projectColumns.includes("col3")),A.Cb(1),A.wc("ngIf",null==e.projectColumns?null:e.projectColumns.includes("col4")),A.Cb(1),A.wc("ngIf",null==e.projectColumns?null:e.projectColumns.includes("col5")),A.Cb(1),A.wc("ngIf",null==e.projectColumns?null:e.projectColumns.includes("col6")),A.Cb(1),A.wc("ngIf",null==e.projectColumns?null:e.projectColumns.includes("col7")),A.Cb(1),A.wc("ngIf",null==e.projectColumns?null:e.projectColumns.includes("col8"))}}function me(e,t){1&e&&A.uc(0,2,["*ngTemplateOutlet","selectAllDivTemplate"])}function ge(e,t){1&e&&A.uc(0,3,["*ngTemplateOutlet","bulkButtons"])}function ve(e,t){if(1&e){const e=A.Yb();A.Xb(0,"th",21),A.Xb(1,"div",6),A.Xc(2,me,1,0,void 0,7),A.Xb(3,"div",17),A.Zc(4),A.Wb(),A.Xc(5,ge,1,0,void 0,7),A.Xb(6,"a",22),A.jc("click",(function(){return A.Oc(e),A.nc().expandAll()})),A.Xb(7,"span",23),A.Sb(8,"img",24),A.Wb(),A.Wb(),A.Wb(),A.Wb()}if(2&e){const e=A.nc(),t=A.Lc(6),i=A.Lc(4);A.Cb(2),A.wc("ngTemplateOutlet",t),A.Cb(2),A.bd(" ",e.labels[0]," "),A.Cb(1),A.wc("ngTemplateOutlet",i),A.Cb(3),A.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",A.Qc)}}function Ce(e,t){if(1&e){const e=A.Yb();A.Xb(0,"span",30),A.Xb(1,"a",27,28),A.jc("click",(function(){A.Oc(e);const t=A.Lc(2),i=A.nc(3);return i.openPopover(t,i.emitBulkEnum.archive)})),A.Zc(3),A.oc(4,"translate"),A.Wb(),A.Wb()}if(2&e){const e=A.nc(3),t=A.Lc(8);A.Cb(1),A.wc("ngbPopover",t),A.Cb(2),A.bd(" ",A.pc(4,2,e.allArchived?"GLOBAL.RESTORE_LABEL":"GLOBAL.ARCHIVE_LABEL")," ")}}function Ee(e,t){if(1&e){const e=A.Yb();A.Xb(0,"span",30),A.Xb(1,"a",27,28),A.jc("click",(function(){A.Oc(e);const t=A.Lc(2),i=A.nc(3);return i.openPopover(t,i.emitBulkEnum.delete)})),A.Zc(3),A.oc(4,"translate"),A.Wb(),A.Wb()}if(2&e){A.nc(3);const e=A.Lc(8);A.Cb(1),A.wc("ngbPopover",e),A.Cb(2),A.bd(" ",A.pc(4,2,"GLOBAL.DELETE_BTN")," ")}}function we(e,t){if(1&e){const e=A.Yb();A.Vb(0),A.Xb(1,"span",26),A.Xb(2,"a",27,28),A.jc("click",(function(){A.Oc(e);const t=A.Lc(3),i=A.nc(2);return i.openPopover(t,i.emitBulkEnum.edit)})),A.Zc(4),A.oc(5,"translate"),A.Wb(),A.Wb(),A.Xc(6,Ce,5,4,"span",29),A.Xc(7,Ee,5,4,"span",29),A.Ub()}if(2&e){const e=A.nc(2),t=A.Lc(8);A.Cb(2),A.wc("ngbPopover",t),A.Cb(2),A.bd(" ",A.pc(5,4,"GLOBAL.BULK_EDIT_LABEL")," "),A.Cb(2),A.wc("ngIf",!e.someArchived||e.allArchived),A.Cb(1),A.wc("ngIf",e.allArchived)}}function Se(e,t){if(1&e&&A.Xc(0,we,8,6,"ng-container",25),2&e){const e=A.nc();A.wc("ngIf",e.someProjectsSelected)}}function ye(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",32),A.Xb(1,"input",33),A.jc("ngModelChange",(function(t){return A.Oc(e),A.nc(2).allProjectsSelected=t}))("ngModelChange",(function(){A.Oc(e);const t=A.nc(2);return t.emitProjectSelection.emit(t.allProjectsSelected)})),A.Wb(),A.Sb(2,"label",34),A.Wb()}if(2&e){const e=A.nc(2);A.Cb(1),A.wc("ngModel",e.allProjectsSelected)}}function Oe(e,t){if(1&e&&A.Xc(0,ye,3,1,"div",31),2&e){const e=A.nc();A.wc("ngIf",e.isAdminOrOwner)}}const Ae=function(){return["/upgrade"]},ke=function(){return{plan:"basic"}};function Te(e,t){if(1&e){const e=A.Yb();A.Xb(0,"a",35),A.jc("click",(function(){return A.Oc(e),A.nc().analytcsService.addEventOnSettingsChanged("Basic","Upgrade","Projects","Project edit","Bulk edit")})),A.Zc(1),A.oc(2,"translate"),A.Wb(),A.Zc(3),A.oc(4,"translate")}2&e&&(A.wc("routerLink",A.Ac(8,Ae))("queryParams",A.Ac(9,ke)),A.Cb(1),A.bd(" ",A.pc(2,4,"PROJECTS.PROJECTS_TABLE.UPGRADE_TEXT_1")," "),A.Cb(2),A.bd(" ",A.pc(4,6,"PROJECTS.PROJECTS_TABLE.UPGRADE_TEXT_2"),"\n"))}const De=["*","*","*","*"];var Ie=function(e){return e[e.edit=0]="edit",e[e.archive=1]="archive",e[e.delete=2]="delete",e}({});let _e=(()=>{class e{constructor(e,t){this.router=e,this.analyticsService=t,this.sortBy=b.a.NAME,this.sortOrder=f.a.ASCENDING,this.emitBulkEdit=new A.n,this.emitArchive=new A.n,this.emitDelete=new A.n,this.emitProjectSelection=new A.n,this.emitSorting=new A.n,this.onExpandAll=new A.n,this.SortBy=b.a,this.SortOrder=f.a,this.emitBulkEnum=Ie,this.isExpandAll=!1}set isManager(e){this._isManager=e}get isManager(){return this._isManager}set someProjectsSelected(e){this._someProjectsSelected=e}get someProjectsSelected(){return this._someProjectsSelected}set allArchived(e){this._allArchived=e}get allArchived(){return this._allArchived}sortByName(){this.sortBy===b.a.NAME?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.NAME,this.sortOrder=f.a.ASCENDING),this.applySorting()}sortByClient(){this.sortBy===b.a.CLIENT_NAME?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.CLIENT_NAME,this.sortOrder=f.a.ASCENDING),this.applySorting()}sortByDuration(){this.sortBy===b.a.DURATION?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.DURATION,this.sortOrder=f.a.DESCENDING),this.applySorting()}sortByAmount(){this.sortBy===b.a.BUDGET?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.BUDGET,this.sortOrder=f.a.DESCENDING),this.applySorting()}sortByProgress(){this.sortBy===b.a.PROGRESS?this.sortOrder=this.sortOrder===f.a.ASCENDING?f.a.DESCENDING:f.a.ASCENDING:(this.sortBy=b.a.PROGRESS,this.sortOrder=f.a.DESCENDING),this.applySorting()}applySorting(){this.emitSorting.emit({sortBy:this.sortBy,sortOrder:this.sortOrder})}openPopover(e,t){if(this.hasBulkEditPermission)switch(t){case Ie.edit:this.emitBulkEdit.emit();break;case Ie.archive:this.emitArchive.emit();break;case Ie.delete:this.emitDelete.emit()}else e.isOpen()?e.close():e.open()}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)(A.Rb(T.d),A.Rb(O.a))},e.\u0275cmp=A.Lb({type:e,selectors:[["projects-table-header"],["","projects-table-header",""]],inputs:{isManager:"isManager",someProjectsSelected:"someProjectsSelected",allArchived:"allArchived",someArchived:"someArchived",archivedFilter:"archivedFilter",allProjectsSelected:"allProjectsSelected",hasBulkEditPermission:"hasBulkEditPermission",isAdminOrOwner:"isAdminOrOwner",projectGroupingLabel:"projectGroupingLabel",isDesktop:"isDesktop",labels:"labels",projectColumns:"projectColumns",sortBy:"sortBy",sortOrder:"sortOrder"},outputs:{emitBulkEdit:"emitBulkEdit",emitArchive:"emitArchive",emitDelete:"emitDelete",emitProjectSelection:"emitProjectSelection",emitSorting:"emitSorting",onExpandAll:"onExpandAll"},ngContentSelectors:De,decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],["bulkButtons",""],["selectAllDivTemplate",""],["popContent",""],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[4,"ngTemplateOutlet"],[1,"cl-text-gray-6","cl-sort-by","d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-d-none","cl-d-lg-table-cell"],[1,"cl-ml-lg-custom-n2"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex","cl-text-break",3,"click"],["class","cl-d-none cl-d-lg-table-cell",4,"ngIf"],["class","cl-d-none cl-d-lg-table-cell cl-lh-0",4,"ngIf"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],["class","cl-text-gray-6 cl-sort-by cl-d-none cl-d-lg-inline-flex",3,"cl-up","cl-down","click",4,"ngIf"],["class","cl-h5 cl-mb-0",4,"ngIf"],[1,"cl-h5","cl-mb-0"],[1,"cl-h5","cl-mb-0","cl-text-gray-6-dark-mode"],[1,"cl-h5","cl-mb-0","cl-d-lg-none"],[1,"cl-d-none","cl-d-lg-table-cell","cl-lh-0"],[1,"cl-pl-lg-3"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],[4,"ngIf"],[1,"cl-bulk-edit-link","cl-text-capitalize"],["triggers","manual","placement","left","container","body",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["class","cl-bulk-edit-link",4,"ngIf"],[1,"cl-bulk-edit-link"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","customCheck1",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customCheck1",1,"cl-custom-control-label"],[3,"routerLink","queryParams","click"]],template:function(e,t){if(1&e&&(A.vc(De),A.Xc(0,fe,17,20,"ng-container",0),A.Xc(1,ve,9,4,"ng-template",null,1,A.Yc),A.Xc(3,Se,1,1,"ng-template",null,2,A.Yc),A.Xc(5,Oe,1,1,"ng-template",null,3,A.Yc),A.Xc(7,Te,5,10,"ng-template",null,4,A.Yc)),2&e){const e=A.Lc(2);A.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[I.u,I.B,k.M,H.a,H.s,H.v,T.g],pipes:[D.e],encapsulation:2}),e})();var Re=i("wd/R"),Le=(i("j4ir"),i("wkZx")),xe=i("G4ky"),Pe=i("5SNR"),je=i("KnX9"),Me=i("l4Lo"),Xe=i("rg2B");function Fe(e,t){1&e&&A.Tb(0)}function We(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",16),A.Xb(1,"input",17),A.jc("ngModelChange",(function(t){return A.Oc(e),A.nc(2).project.bulkSelected=t}))("ngModelChange",(function(){return A.Oc(e),A.nc(2).emitBulkSelected.emit()})),A.Wb(),A.Sb(2,"label",18),A.Wb()}if(2&e){const e=A.nc(2);A.Cb(1),A.wc("id",e.project.id)("ngModel",e.project.bulkSelected),A.Cb(1),A.wc("for",e.project.id)}}function Be(e,t){1&e&&(A.Xb(0,"div",19),A.Sb(1,"img",20),A.Wb())}function Ne(e,t){if(1&e&&(A.Xb(0,"div",11),A.Xc(1,We,3,3,"div",12),A.Xb(2,"a",13),A.Sb(3,"i",14),A.Xb(4,"span"),A.Zc(5),A.Wb(),A.Wb(),A.Xc(6,Be,2,0,"div",15),A.Wb()),2&e){const e=A.nc();A.Cb(1),A.wc("ngIf",e.isAdmin),A.Cb(1),A.Wc("text-decoration",e.project.archived?"line-through":"none"),A.xc("title",e.project.name),A.yc("routerLink","/projects/",e.project.id,"/edit"),A.Cb(1),A.Wc("background-color",e.project.color),A.Cb(2),A.ad(e.project.name),A.Cb(1),A.wc("ngIf",e.project.isTemplate)}}function Ge(e,t){if(1&e&&(A.Xb(0,"a",21),A.Xb(1,"div",22),A.Xb(2,"span",23),A.Zc(3),A.Wb(),A.Wb(),A.Wb()),2&e){const e=A.nc();A.yc("routerLink","/projects/",e.project.id,"/edit"),A.wc("fragment",e.isAdmin||e.isAdminOrManager?"settings":""),A.Cb(2),A.xc("title",e.project.client&&e.project.client.id?e.project.client.name:"--"),A.Cb(1),A.ad(e.project.client&&e.project.client.id?e.project.client.name:"--")}}function Ue(e,t){if(1&e&&(A.Xb(0,"div",28),A.Zc(1),A.oc(2,"translate"),A.oc(3,"roundIfWholeNumber"),A.Wb()),2&e){const e=A.nc(3);A.Cb(1),A.cd(" ",A.pc(2,2,"PROJECTS.PROJECTS_TABLE.OF_LABEL")," ",A.pc(3,4,e.projectEstimate),"h ")}}function Ve(e,t){if(1&e&&(A.Xb(0,"a",26),A.Xb(1,"div"),A.Xb(2,"div"),A.Zc(3),A.oc(4,"roundIfWholeNumber"),A.Wb(),A.Xc(5,Ue,4,6,"div",27),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Wc("cursor",e.showProjectStatus?"pointer":"default"),A.wc("routerLink",e.showProjectStatus?"/projects/"+e.project.id+"/edit":""),A.Cb(2),A.Hb("cl-text-danger",e.isOverEstimate)("cl-text-gray-6",!e.isOverEstimate),A.Cb(1),A.bd(" ",A.pc(4,9,e.projectDuration),"h "),A.Cb(2),A.wc("ngIf",e.projectEstimate)}}function He(e,t){1&e&&(A.Xb(0,"p",29),A.Zc(1,"-"),A.Wb())}function Ye(e,t){if(1&e&&(A.Xc(0,Ve,6,11,"a",24),A.Xc(1,He,2,0,"p",25)),2&e){const e=A.nc();A.wc("ngIf",e.showProjectStatus),A.Cb(1),A.wc("ngIf",!e.showProjectStatus)}}function $e(e,t){if(1&e&&(A.Xb(0,"div",28),A.Zc(1),A.oc(2,"translate"),A.oc(3,"roundIfWholeNumber"),A.Wb()),2&e){const e=A.nc(3);A.Cb(1),A.dd(" ",A.pc(2,3,"PROJECTS.PROJECTS_TABLE.OF_LABEL")," ",A.pc(3,5,e.projectBudgetEstimate)," "," "+e.workspace.hourlyRate.currency," ")}}function ze(e,t){if(1&e&&(A.Xb(0,"a",26),A.Xb(1,"div"),A.Xb(2,"div"),A.Zc(3),A.oc(4,"roundIfWholeNumber"),A.Wb(),A.Xc(5,$e,4,7,"div",27),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Wc("cursor",e.showProjectStatus?"pointer":"default"),A.wc("routerLink",e.showProjectStatus?"/projects/"+e.project.id+"/edit":""),A.Cb(2),A.Hb("cl-text-danger",e.isOverBudgetEstimate)("cl-text-gray-6",!e.isOverBudgetEstimate),A.Cb(1),A.cd(" ",A.pc(4,10,e.project.budget),""," "+e.workspace.hourlyRate.currency," "),A.Cb(2),A.wc("ngIf",e.projectBudgetEstimate)}}function Ze(e,t){1&e&&(A.Xb(0,"p",29),A.Zc(1,"-"),A.Wb())}function Ke(e,t){if(1&e&&(A.Xc(0,ze,6,12,"a",24),A.Xc(1,Ze,2,0,"p",25)),2&e){const e=A.nc();A.wc("ngIf",e.showProjectStatus&&e.canSeeRates),A.Cb(1),A.wc("ngIf",!e.showProjectStatus)}}function qe(e,t){if(1&e&&(A.Xb(0,"a",32),A.Xb(1,"div",33),A.Sb(2,"percentage-progress-bar",34),A.Wb(),A.Wb()),2&e){const e=A.nc(2);A.Wc("cursor",e.showProjectStatus?"pointer":"default"),A.wc("routerLink",e.showProjectStatus?"/projects/"+e.project.id+"/edit":""),A.Cb(2),A.wc("percentage",e.project.progress)("showPercentageOutsideOfProgress",!0)}}function Je(e,t){1&e&&(A.Xb(0,"div",35),A.Xb(1,"div"),A.Zc(2,"-"),A.Wb(),A.Wb())}function Qe(e,t){if(1&e&&(A.Xc(0,qe,3,5,"a",30),A.Xc(1,Je,3,0,"ng-template",null,31,A.Yc)),2&e){const e=A.Lc(2),t=A.nc();A.wc("ngIf",t.showProjectStatus&&t.project.estimateType!=t.EstimateType.NO_ESTIMATE&&(t.project.estimateType==t.EstimateType.TIME_ESTIMATE&&!t.workspace.activeBillableHours||t.workspace.activeBillableHours)&&(!t.workspace.onlyAdminCanSeeAndChangeBillable||t.isAdminOrOwner))("ngIfElse",e)}}function et(e,t){if(1&e&&(A.Xb(0,"a",36),A.Zc(1),A.oc(2,"translate"),A.Wb()),2&e){const e=A.nc();A.yc("routerLink","/projects/",e.project.id,"/edit"),A.Cb(1),A.bd(" ",A.pc(2,2,e.project.public?"GLOBAL.PUBLIC_LABEL":"GLOBAL.PRIVATE_LABEL")," ")}}function tt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",37),A.Xb(1,"div",38),A.Xb(2,"a",39),A.jc("click",(function(){return A.Oc(e),A.nc().toggleFavorite()})),A.Wb(),A.Wb(),A.Wb()}if(2&e){const e=A.nc();A.Cb(2),A.Hb("cl-active",e.project.favorite)}}const it=function(){return["/upgrade"]},nt=function(){return{plan:"basic"}};function st(e,t){if(1&e){const e=A.Yb();A.Xb(0,"a",51),A.jc("click",(function(){return A.Oc(e),A.nc(4).analyticsService.addEventOnSettingsChanged("Basic","Upgrade","Projects","Projects","Project Template")})),A.Zc(1),A.oc(2,"translate"),A.Wb(),A.Zc(3),A.oc(4,"translate")}2&e&&(A.wc("routerLink",A.Ac(8,it))("queryParams",A.Ac(9,nt)),A.Cb(1),A.bd(" ",A.pc(2,4,"GLOBAL.UPGRADE_BTN")," "),A.Cb(2),A.bd(" ",A.pc(4,6,"PROJECTS.SHARED.UPGRADE_MESSAGE.PART_2")," "))}function rt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"a",52,53),A.jc("click",(function(){A.Oc(e);const t=A.Lc(1);return A.nc(4).setAsTemplate(t)})),A.Zc(2),A.oc(3,"translate"),A.Wb()}if(2&e){A.nc();const e=A.Lc(3),t=A.nc(3);A.wc("ngbPopover",e),A.Db("closeDropdown",t.hasProjectTemplateFeature?"":null),A.Cb(2),A.bd(" ",A.pc(3,3,t.project.isTemplate?"PROJECTS.SHARED.DONT_USE_AS_TEMPLATE_LABEL":"PROJECTS.SHARED.SET_AS_TEMPLATE_LABEL")," ")}}function ot(e,t){if(1&e){const e=A.Yb();A.Xb(0,"a",54),A.jc("click",(function(){return A.Oc(e),A.nc(4).emitProjectAction.emit("delete")})),A.Zc(1),A.oc(2,"translate"),A.Wb()}2&e&&(A.Cb(1),A.bd(" ",A.pc(2,1,"GLOBAL.DELETE_BTN")," "))}function at(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",45),A.Xb(1,"div",46),A.Xc(2,st,5,10,"ng-template",null,47,A.Yc),A.Xc(4,rt,4,5,"a",48),A.Xb(5,"a",49),A.jc("click",(function(){return A.Oc(e),A.nc(3).emitProjectAction.emit("archive")})),A.Zc(6),A.oc(7,"translate"),A.Wb(),A.Xc(8,ot,3,3,"a",50),A.Wb(),A.Wb()}if(2&e){const e=A.nc(3);A.Cb(4),A.wc("ngIf",e.hasCreatePermissions),A.Cb(2),A.bd(" ",A.pc(7,3,e.project.archived?"GLOBAL.RESTORE_LABEL":"GLOBAL.ARCHIVE_LABEL")," "),A.Cb(2),A.wc("ngIf",e.project.archived)}}function ct(e,t){1&e&&(A.Xb(0,"div",41),A.Xb(1,"div",42),A.Sb(2,"img",43),A.Wb(),A.Xc(3,at,9,5,"div",44),A.Wb())}function lt(e,t){if(1&e&&A.Xc(0,ct,4,0,"div",40),2&e){const e=A.nc();A.wc("ngIf",e.isAdmin||e.isAdminOrManager)}}const ut=function(e){return{labels:e}},dt=function(e,t,i,n,s,r,o,a,c){return[e,t,i,n,s,r,o,a,c]};let ht=(()=>{class e{constructor(e,t,i,n){this.analyticsService=e,this.projectService=t,this.router=i,this.cd=n,this.EstimateType=xe.a,this.emitBulkSelected=new A.n,this.emitProjectAction=new A.n}set managerPermissions(e){this._managerPermissions=e,this.isAdminOrManager=this.isAdmin||e.indexOf(this.project.id)>-1,this.showProjectStatus=this.isAdminOrManager||!this.onlyAdminsSeeProjectStatus,this.cd.detectChanges()}get managerPermissions(){return this._managerPermissions}ngOnInit(){this.projectDuration=Object(Re.duration)(this.project.duration).asHours(),this.project.estimateType===xe.a.TIME_ESTIMATE&&this.getTimeEstimate(),this.project.estimateType===xe.a.PROJECT_BUDGET&&this.getProjectBudget(),this.totalTime=Object(Re.duration)(this.project.duration),this.setIsNoEstimate()}ngAfterViewInit(){this.cd.detectChanges()}toggleFavorite(){this.project.favorite=!this.project.favorite,this.project.favorite?this.projectService.makeProjectFavorite(this.project):this.projectService.removeProjectAsFavorite(this.project.id)}setAsTemplate(e){this.hasProjectTemplateFeature?this.emitProjectAction.emit("template"):e.isOpen()?e.close():e.open()}getTimeEstimate(){this.projectEstimate="MANUAL"===this.project.timeEstimate.type?this.project.timeEstimate.estimate:this.project.tasks?Object(Le.a)(this.project.tasks.map(e=>e.estimate)).asHours():0,this.project.timeEstimate.includeNonBillable||(this.projectDuration=Object(Re.duration)(this.project.billableDuration).asHours()),this.isOverEstimate=this.projectEstimate&&this.projectDuration>this.projectEstimate,this.cd.detectChanges()}getProjectBudget(){this.projectBudgetEstimate="MANUAL"===this.project.budgetEstimate.type?this.project.budgetEstimate.estimate:this.project.tasks.map(e=>e.budgetEstimate?e.budgetEstimate/100:0).reduce((e,t)=>e+t,0),this.isOverBudgetEstimate=this.projectBudgetEstimate&&this.project.budget>this.projectBudgetEstimate,this.cd.detectChanges()}setIsNoEstimate(){this.isNoEstimate=this.project.estimateType===xe.a.NO_ESTIMATE||this.project.estimateType===xe.a.PROJECT_BUDGET&&0===this.project.budgetEstimate.estimate||this.project.estimateType===xe.a.TIME_ESTIMATE&&0===this.project.timeEstimate.estimate}}return e.\u0275fac=function(t){return new(t||e)(A.Rb(O.a),A.Rb(o.a),A.Rb(T.d),A.Rb(A.h))},e.\u0275cmp=A.Lb({type:e,selectors:[["projects-table-row"],["","projects-table-row",""]],inputs:{project:"project",workspace:"workspace",isDesktop:"isDesktop",canSeeRates:"canSeeRates",projectColumns:"projectColumns",onlyAdminsSeeProjectStatus:"onlyAdminsSeeProjectStatus",labels:"labels",isAdmin:"isAdmin",hasProjectTemplateFeature:"hasProjectTemplateFeature",hasCreatePermissions:"hasCreatePermissions",expandAll:"expandAll",managerPermissions:"managerPermissions"},outputs:{emitBulkSelected:"emitBulkSelected",emitProjectAction:"emitProjectAction"},decls:20,vars:27,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["col8",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-py-0","cl-py-lg-custom-2","cl-pr-3"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-cut-text","cl-project-name","cl-project-name-colored","cl-brown","cl-text-dark",3,"title","routerLink"],[1,"cl-entry__project__dot"],["class","cl-mx-2 cl-d-print-none",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-mx-2","cl-d-print-none"],["src","assets/images/ui-icons/template.svg"],[1,"cl-component-divided-left","cl-d-flex","cl-text-dark","cl-text-decoration-none",3,"routerLink","fragment"],[1,"cl-cut-text-wrapper","cl-w-100","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-start"],[1,"cl-cut-text",3,"title"],["class","cl-component-divided-left cl-w-100 cl-text-decoration-none cl-d-flex cl-align-items-center","fragment","status",3,"routerLink","cursor",4,"ngIf"],["class","cl-component-divided-left",4,"ngIf"],["fragment","status",1,"cl-component-divided-left","cl-w-100","cl-text-decoration-none","cl-d-flex","cl-align-items-center",3,"routerLink"],["class","cl-text-gray-9 cl-small",4,"ngIf"],[1,"cl-text-gray-9","cl-small"],[1,"cl-component-divided-left"],["fragment","status","class","cl-text-decoration-none cl-text-dark cl-d-flex cl-align-items-center cl-lh-1 cl-w-100 cl-component-divided-left",3,"routerLink","cursor",4,"ngIf","ngIfElse"],["noprogress",""],["fragment","status",1,"cl-text-decoration-none","cl-text-dark","cl-d-flex","cl-align-items-center","cl-lh-1","cl-w-100","cl-component-divided-left",3,"routerLink"],[1,"cl-pr-0","cl-pr-lg-3","cl-d-flex","cl-align-items-center","cl-w-100"],[1,"cl-w-100","cl-d-flex","cl-d-lg-block","cl-justify-content-center","cl-align-items-center",3,"percentage","showPercentageOutsideOfProgress"],[1,"cl-component-divided-left","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-start","cl-align-items-center","cl-w-100"],["fragment","access",1,"cl-component-divided-left","cl-w-100","cl-hover-pointer","cl-text-dark","cl-text-decoration-none",3,"routerLink"],[1,"cl-d-flex","cl-justify-content-lg-end"],[1,"cl-component-divided-left","cl-hover-pointer"],[1,"cl-dropdown-star","cl-ml-0",3,"click"],["class","cl-dropdown cl-d-flex cl-justify-content-lg-end cl-hover-pointer","dropdown","",4,"ngIf"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-lg-end","cl-hover-pointer"],["closeDropdown","","role","button",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg","closeDropdown","",1,"cl-px-1"],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["popContent",""],["class","cl-dropdown-item","triggers","manual","placement","left","container","body",3,"ngbPopover","click",4,"ngIf"],["closeDropdown","","data-cy","archive-project",1,"cl-dropdown-item",3,"click"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],[3,"routerLink","queryParams","click"],["triggers","manual","placement","left","container","body",1,"cl-dropdown-item",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["closeDropdown","",1,"cl-dropdown-item",3,"click"]],template:function(e,t){if(1&e&&(A.Xc(0,Fe,1,0,"ng-container",0),A.Sb(1,"responsive-row",1,2),A.oc(3,"projectColumnDecider"),A.Xc(4,Ne,7,9,"ng-template",null,3,A.Yc),A.Xc(6,Ge,4,4,"ng-template",null,4,A.Yc),A.Xc(8,Ye,2,2,"ng-template",null,5,A.Yc),A.Xc(10,Ke,2,2,"ng-template",null,6,A.Yc),A.Xc(12,Qe,3,2,"ng-template",null,7,A.Yc),A.Xc(14,et,3,4,"ng-template",null,8,A.Yc),A.Xc(16,tt,3,2,"ng-template",null,9,A.Yc),A.Xc(18,lt,1,1,"ng-template",null,10,A.Yc)),2&e){const e=A.Lc(2),i=A.Lc(5),n=A.Lc(7),s=A.Lc(9),r=A.Lc(11),o=A.Lc(13),a=A.Lc(15),c=A.Lc(17),l=A.Lc(19);A.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",A.Bc(15,ut,t.labels)),A.Cb(1),A.wc("isDesktop",t.isDesktop)("templates",A.tc(3,5,A.Jc(17,dt,[t.projectColumns,i,n,s,r,o,a,c,l])))("isExpanded",t.expandAll)}},directives:[I.B,Pe.a,I.u,T.g,H.a,H.s,H.v,je.a,U.a,V.a,k.M],pipes:[Me.a,Xe.a,D.e],encapsulation:2,changeDetection:0}),e})();var pt=i("mXn0"),bt=i("kojQ"),ft=i("ZaaN"),mt=i("sNAh"),gt=i("nss9"),vt=i("2rWG"),Ct=i("8+Zx"),Et=i("hkzH"),wt=i("bW5g"),St=i("sbmM"),yt=i("qUN8"),Ot=i("iNpZ"),At=i("+dED"),kt=i("Q+u6");const Tt=["clientDropdown"];function Dt(e,t){1&e&&A.Sb(0,"div",48)}function It(e,t){1&e&&A.Sb(0,"div",48)}function _t(e,t){1&e&&A.Sb(0,"div",48)}function Rt(e,t){1&e&&A.Sb(0,"div",48)}function Lt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"select-client-dropdown",49),A.jc("choosenItem",(function(t){return A.Oc(e),A.nc().showItem(t)}))("withoutClient",(function(t){return A.Oc(e),A.nc().noClient(t)})),A.Wb()}if(2&e){const e=A.nc();A.wc("projectGroupingLabel",e.projectGroupingLabel)("selectedId",e.projectBulkEdit.clientId)}}function xt(e,t){1&e&&A.Sb(0,"div",48)}function Pt(e,t){1&e&&A.Sb(0,"div",48)}function jt(e,t){1&e&&A.Sb(0,"div",48)}function Mt(e,t){1&e&&A.Sb(0,"div",48)}const Xt=function(e){return{numberOfProjects:e}};let Ft=(()=>{class e{constructor(e,t,i,n,s){this.authService=e,this.workspaceService=t,this.userGroupService=i,this.projectService=n,this.translate=s,this.close=new A.n,this.updated=new A.n,this.visibility=!1,this.team=!1,this.color=!1,this.client=!1,this.billable=!1,this.editPermission=!1,this.activeUsers=[],this.projectGroupingLabel="",this.userAndGroupsValuesData=new Ct.a({map:{[Et.f]:[],[Et.k]:[]}}),this.unsubscribe$=new j.a,this.overwriteTeam=!1}ngOnInit(){this.numberOfProjects=this.projects.length.toString(),this.projectBulkEdit=new r.a,this.projectBulkEdit.estimate=new ft.a,this.projectBulkEdit.clientId="",this.projectBulkEdit.memberships=[],this.projectBulkEdit.hourlyRate=new mt.a,this.projectBulkEdit.billable=!1,this.projectBulkEdit.public=!1,this.editPermission=this.authService.isAdminOrOwner(),this.addedUserIds=[],this.addedUserGroupIds=[],this.workspaceService.defaultWorkspace$.pipe(Object(P.a)(e=>!!e),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.projectGroupingLabel=this.workspaceService.generateClientLabel(e.projectGroupingLabel),this.projectBulkEdit.clientName=this.translate.instant("GLOBAL.SELECT_LABEL",{label:this.projectGroupingLabel}),this.workspaceId=e.id,this.workspaceCurrency=e.hourlyRate.currency}),this.workspaceService.getDefaultWorkspace()}addColor(e){this.projectBulkEdit.color=e}showItem(e){this.projectBulkEdit.clientId=e.id,this.projectBulkEdit.clientName=e.name,this.clientDropdown&&this.clientDropdown.closeDropdown()}noClient(e){this.projectBulkEdit.clientId="",this.projectBulkEdit.clientName=e}usersAndGroupsSelected(e){this.userAndGroupsValuesData=e}editProjects(){try{const e=Number(this.projectBulkEdit.hourlyRate.amount.toString().replace(",","."));this.projectBulkEdit.hourlyRate.amount=e}catch(e){}this.projectService.updateMany(this.projects,this.getChangeFields(),this.projectBulkEdit,this.team&&this.userAndGroupsValuesData.getContainsFilter(Et.k),this.team&&this.userAndGroupsValuesData.getContainsFilter(Et.f)).pipe(Object(a.a)(this.unsubscribe$)).subscribe(()=>{this.updated.emit(!0)})}get isFormValid(){if(this.billable&&this.projectBulkEdit.billable){const e=this.projectBulkEdit.hourlyRate.amount;if(!Object(E.u)(e)||e<0)return!1}return!0}closeBulk(){this.close.emit(!0)}getChangeFields(){const e=[];return this.visibility&&e.push(gt.a.VISIBILITY),this.team&&this.overwriteTeam&&e.push(gt.a.MEMBERS),this.team&&!this.overwriteTeam&&e.push(gt.a.MEMBERS_ADD),this.client&&e.push(gt.a.CLIENT),this.color&&e.push(gt.a.COLOR),this.billable&&e.push(gt.a.BILLABLE),this.projectBulkEdit.hourlyRate&&this.projectBulkEdit.hourlyRate.amount&&e.push(gt.a.HOURLY_RATE),e}}return e.\u0275fac=function(t){return new(t||e)(A.Rb(h.a),A.Rb(s.a),A.Rb(G.a),A.Rb(o.a),A.Rb(D.f))},e.\u0275cmp=A.Lb({type:e,selectors:[["project-bulk-edit"]],viewQuery:function(e,t){var i;1&e&&A.gd(Tt,!0),2&e&&A.Kc(i=A.kc())&&(t.clientDropdown=i.first)},inputs:{projects:"projects"},outputs:{close:"close",updated:"updated"},decls:107,vars:66,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-form-group","cl-row","cl-align-items-center"],[1,"cl-col-sm-3","cl-col-form-label"],[1,"cl-custom-control","cl-custom-control-inline","cl-custom-checkbox"],["type","checkbox","id","visibility-1","name","visibility",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","visibility-1",1,"cl-custom-control-label"],[1,"cl-col-sm-9"],["class","cl-blocker",4,"ngIf"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","visibility-2","name","visibility2",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","visibility-2",1,"cl-custom-control-label"],[1,"cl-mt-0"],[1,"cl-form-group","cl-row"],["type","checkbox","id","team","name","team",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","team",1,"cl-custom-control-label"],[1,"cl-dropdown","cl-dropdown-large"],[3,"valuesData","onChange"],[1,"cl-form-group","cl-row","cl-position-relative"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","nonBillable","name","defaultBillableProjects",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","nonBillable",1,"cl-custom-control-label"],["type","radio","id","billable","name","defaultBillableProjects",1,"cl-custom-control-input",3,"value","ngModel","ngModelChange"],["for","billable",1,"cl-custom-control-label"],["type","checkbox","id","client","name","client",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","client",1,"cl-custom-control-label",2,"text-transform","capitalize"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex"],["clientDropdown","dropdownKey"],["dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-cut-text","cl-text-left","cl-dropdown-toggle"],["class","cl-dropdown-menu",3,"projectGroupingLabel","selectedId","choosenItem","withoutClient",4,"dropdownKeyContent"],["type","checkbox","id","color","name","color",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","color",1,"cl-custom-control-label"],[3,"editPermission","color"],["type","checkbox","id","bill","name","billable",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","bill",1,"cl-custom-control-label"],[1,"cl-col-sm-2"],["type","checkbox","id","bill1","name","billable1",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","bill1",1,"cl-custom-control-label"],[1,"cl-col-auto","cl-form-group","cl-mb-0"],[1,"cl-text-gray-9"],[1,"cl-col-sm-2","cl-form-group","cl-mb-0"],["type","text","name","billable2","autocomplete","off","inputNumber","",1,"cl-form-control",3,"disabled","ngModel","inputChange"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button","ngbAutofocus","",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-blocker"],[1,"cl-dropdown-menu",3,"projectGroupingLabel","selectedId","choosenItem","withoutClient"]],template:function(e,t){1&e&&(A.Xb(0,"div",0),A.Xb(1,"h1",1),A.Zc(2),A.oc(3,"translate"),A.Wb(),A.Xb(4,"button",2),A.jc("click",(function(){return t.closeBulk()})),A.Xb(5,"span"),A.Sb(6,"img",3),A.Wb(),A.Wb(),A.Wb(),A.Xb(7,"div",4),A.Xb(8,"form"),A.Xb(9,"div",5),A.Xb(10,"div",6),A.Xb(11,"div",7),A.Xb(12,"input",8),A.jc("ngModelChange",(function(e){return t.visibility=e})),A.Wb(),A.Xb(13,"label",9),A.Zc(14),A.oc(15,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(16,"div",10),A.Xc(17,Dt,1,0,"div",11),A.Xb(18,"div",12),A.Xb(19,"input",13),A.jc("ngModelChange",(function(e){return t.projectBulkEdit.public=e})),A.Wb(),A.Xb(20,"label",14),A.Zc(21),A.oc(22,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Sb(23,"hr",15),A.Xb(24,"div",16),A.Xb(25,"div",6),A.Xb(26,"div",7),A.Xb(27,"input",17),A.jc("ngModelChange",(function(e){return t.team=e})),A.Wb(),A.Xb(28,"label",18),A.Zc(29),A.oc(30,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(31,"div",10),A.Xc(32,It,1,0,"div",11),A.Xb(33,"div",19),A.Xb(34,"dropdown-checkbox-groups-users",20),A.jc("onChange",(function(e){return t.usersAndGroupsSelected(e)})),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xb(35,"div",21),A.Xc(36,_t,1,0,"div",11),A.Sb(37,"div",6),A.Xb(38,"div",10),A.Xb(39,"div",22),A.Xb(40,"input",23),A.jc("ngModelChange",(function(e){return t.overwriteTeam=e})),A.Wb(),A.Xb(41,"label",24),A.Zc(42),A.oc(43,"translate"),A.Wb(),A.Wb(),A.Xb(44,"div",22),A.Xb(45,"input",25),A.jc("ngModelChange",(function(e){return t.overwriteTeam=e})),A.Wb(),A.Xb(46,"label",26),A.Zc(47),A.oc(48,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Sb(49,"hr",15),A.Xb(50,"div",16),A.Xb(51,"div",6),A.Xb(52,"div",7),A.Xb(53,"input",27),A.jc("ngModelChange",(function(e){return t.client=e})),A.Wb(),A.Xb(54,"label",28),A.Zc(55),A.Wb(),A.Wb(),A.Wb(),A.Xb(56,"div",10),A.Xc(57,Rt,1,0,"div",11),A.Xb(58,"div",29,30),A.Xb(60,"button",31),A.Zc(61),A.Wb(),A.Xc(62,Lt,1,2,"select-client-dropdown",32),A.Wb(),A.Wb(),A.Wb(),A.Sb(63,"hr",15),A.Xb(64,"div",16),A.Xb(65,"div",6),A.Xb(66,"div",7),A.Xb(67,"input",33),A.jc("ngModelChange",(function(e){return t.color=e})),A.Wb(),A.Xb(68,"label",34),A.Zc(69),A.oc(70,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(71,"div",10),A.Xc(72,xt,1,0,"div",11),A.Xb(73,"color-chooser",35),A.jc("color",(function(e){return t.addColor(e)})),A.Wb(),A.Wb(),A.Wb(),A.Sb(74,"hr",15),A.Xb(75,"div",5),A.Xb(76,"div",6),A.Xb(77,"div",7),A.Xb(78,"input",36),A.jc("ngModelChange",(function(e){return t.billable=e})),A.Wb(),A.Xb(79,"label",37),A.Zc(80),A.oc(81,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(82,"div",38),A.Xc(83,Pt,1,0,"div",11),A.Xb(84,"div",12),A.Xb(85,"input",39),A.jc("ngModelChange",(function(e){return t.projectBulkEdit.billable=e})),A.Wb(),A.Xb(86,"label",40),A.Zc(87),A.oc(88,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xb(89,"div",41),A.Xc(90,jt,1,0,"div",11),A.Xb(91,"span",42),A.Zc(92),A.oc(93,"translate"),A.Wb(),A.Wb(),A.Xb(94,"div",43),A.Xc(95,Mt,1,0,"div",11),A.Xb(96,"input",44),A.jc("inputChange",(function(e){return t.projectBulkEdit.hourlyRate.amount=e})),A.Wb(),A.Wb(),A.Xb(97,"div",41),A.Xb(98,"span",42),A.Zc(99),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xb(100,"div",45),A.Xb(101,"a",46),A.jc("click",(function(){return t.closeBulk()})),A.Zc(102),A.oc(103,"translate"),A.Wb(),A.Xb(104,"button",47),A.jc("click",(function(){return t.editProjects()})),A.Zc(105),A.oc(106,"translate"),A.Wb(),A.Wb()),2&e&&(A.Cb(2),A.bd(" ",A.qc(3,39,"PROJECTS.PROJECT_BULK_EDIT.TITLE",A.Bc(64,Xt,t.numberOfProjects))," "),A.Cb(10),A.wc("ngModel",t.visibility),A.Cb(2),A.bd(" ",A.pc(15,42,"PROJECTS.PROJECT_BULK_EDIT.VISIBILLITY_LABEL")," "),A.Cb(3),A.wc("ngIf",!t.visibility),A.Cb(2),A.wc("ngModel",t.projectBulkEdit.public),A.Cb(2),A.bd(" ",A.pc(22,44,"PROJECTS.PROJECT_BULK_EDIT.PUBLICLY_VISIBLE_LABEL")," "),A.Cb(6),A.wc("ngModel",t.team),A.Cb(2),A.bd(" ",A.pc(30,46,"GLOBAL.ACCESS_LABEL")," "),A.Cb(3),A.wc("ngIf",!t.team),A.Cb(2),A.wc("valuesData",t.userAndGroupsValuesData),A.Cb(2),A.wc("ngIf",!t.team),A.Cb(4),A.wc("value",!1)("ngModel",t.overwriteTeam),A.Cb(2),A.bd(" ",A.pc(43,48,"PROJECTS.PROJECT_BULK_EDIT.ADD_TO_EXISTING_LABEL")," "),A.Cb(3),A.wc("value",!0)("ngModel",t.overwriteTeam),A.Cb(2),A.bd(" ",A.pc(48,50,"PROJECTS.PROJECT_BULK_EDIT.OVERWRITE_EXISTING_LABEL")," "),A.Cb(6),A.wc("ngModel",t.client),A.Cb(2),A.ad(t.projectGroupingLabel),A.Cb(2),A.wc("ngIf",!t.client),A.Cb(4),A.ad(t.projectBulkEdit.clientName),A.Cb(6),A.wc("ngModel",t.color),A.Cb(2),A.bd(" ",A.pc(70,52,"PROJECTS.SHARED.COLOR_LABEL")," "),A.Cb(3),A.wc("ngIf",!t.color),A.Cb(1),A.wc("editPermission",t.color),A.Cb(5),A.wc("ngModel",t.billable),A.Cb(2),A.bd(" ",A.pc(81,54,"GLOBAL.BILLABLE_LABEL")," "),A.Cb(3),A.wc("ngIf",!t.billable),A.Cb(2),A.wc("ngModel",t.projectBulkEdit.billable),A.Cb(2),A.bd(" ",A.pc(88,56,"GLOBAL.CONFIRM_LABEL")," "),A.Cb(3),A.wc("ngIf",!t.billable),A.Cb(2),A.bd(" ",A.pc(93,58,"GLOBAL.BILLABLE_RATE_LABEL")," "),A.Cb(3),A.wc("ngIf",!t.billable),A.Cb(1),A.wc("disabled",!t.projectBulkEdit.billable)("ngModel",t.projectBulkEdit.hourlyRate.amount),A.Cb(3),A.ad(t.workspaceCurrency),A.Cb(3),A.bd(" ",A.pc(103,60,"GLOBAL.CANCEL_BTN")," "),A.Cb(2),A.wc("disabled",!t.isFormValid),A.Cb(1),A.bd(" ",A.pc(106,62,"GLOBAL.SAVE_LABEL")," "))},directives:[H.I,H.t,H.u,H.a,H.s,H.v,I.u,wt.a,H.A,H.c,vt.a,St.a,yt.a,Ot.a,At.a,kt.a],pipes:[D.e],encapsulation:2}),e})();var Wt=i("AHJ+");const Bt=["deleteModal"];function Nt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",19),A.Xb(1,"a",20),A.jc("click",(function(){A.Oc(e);const t=A.nc(),i=A.Lc(20);return t.openModal(i)})),A.Zc(2),A.oc(3,"translate"),A.Xb(4,"span",21),A.Zc(5),A.oc(6,"lowercase"),A.oc(7,"translate"),A.Wb(),A.Wb(),A.Wb()}2&e&&(A.Cb(2),A.bd(" ",A.pc(3,2,"GLOBAL.CREATE_NEW_TITLE")," "),A.Cb(3),A.bd(" ",A.pc(6,4,A.pc(7,6,"GLOBAL.PROJECT_LABEL"))," "))}function Gt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"div",25),A.Xb(1,"tr",26),A.jc("emitBulkSelected",(function(){return A.Oc(e),A.nc(2).setIfSomeSelected()}))("emitProjectAction",(function(i){A.Oc(e);const n=t.$implicit;return A.nc(2).projectAction(i,n)})),A.Wb(),A.Wb()}if(2&e){const e=t.$implicit,i=A.nc(2);A.Cb(1),A.wc("project",e)("workspace",i.workspace)("isDesktop",i.isDesktop)("canSeeRates",i.canSeeRates)("labels",i.labels)("projectColumns",i.projectColumns)("onlyAdminsSeeProjectStatus",i.workspace.onlyAdminsSeeProjectStatus)("isAdmin",i.isAdminOrOwner)("managerPermissions",i.managerPermissions)("hasProjectTemplateFeature",i.hasProjectTemplateFeature)("hasCreatePermissions",i.hasCreatePermissions)("expandAll",i.expandAll)}}function Ut(e,t){if(1&e){const e=A.Yb();A.Vb(0),A.Xb(1,"table",22),A.Xb(2,"thead"),A.Xb(3,"tr",23),A.jc("emitBulkEdit",(function(){A.Oc(e);const t=A.nc(),i=A.Lc(24);return t.bulkEdit(i)}))("emitArchive",(function(){A.Oc(e);const t=A.nc(),i=A.Lc(28);return t.bulkEdit(i)}))("emitDelete",(function(){A.Oc(e);const t=A.nc(),i=A.Lc(26);return t.bulkEdit(i)}))("emitSorting",(function(t){return A.Oc(e),A.nc().applySorting(t)}))("emitProjectSelection",(function(t){return A.Oc(e),A.nc().selectAll(t)}))("onExpandAll",(function(t){return A.Oc(e),A.nc().expandAllRows(t)})),A.Wb(),A.Wb(),A.Xb(4,"tbody"),A.Xc(5,Gt,2,12,"div",24),A.Wb(),A.Wb(),A.Ub()}if(2&e){const e=A.nc();A.Cb(3),A.wc("someProjectsSelected",e.someProjectsSelected)("allProjectsSelected",e.isAllSelected)("allArchived",e.allArchived)("someArchived",e.someArchived)("archivedFilter",null==e.queryFilter?null:e.queryFilter.archived)("hasBulkEditPermission",e.hasBulkEditFeature)("isAdminOrOwner",e.isAdminOrOwner)("isManager",e.isManagerOfAnyProject)("projectGroupingLabel",e.workspace.projectGroupingLabel)("sortBy",e.sortColumn)("sortOrder",e.sortOrder)("isDesktop",e.isDesktop)("projectColumns",e.projectColumns)("labels",e.labels),A.Cb(2),A.wc("ngForOf",e.projects)}}function Vt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"new-project",27),A.jc("projectCreated",(function(i){A.Oc(e);const n=t.$implicit;return A.nc().addProjectToList(i),n.close()}))("close",(function(i){return A.Oc(e),t.$implicit.close(i)})),A.Wb()}if(2&e){const e=A.nc();A.wc("isAdminOrOwner",e.isAdminOrOwner)("workspace",e.workspace)}}const Ht=function(e){return{projectName:e}};function Yt(e,t){if(1&e&&(A.Xb(0,"span",32),A.Zc(1),A.oc(2,"translate"),A.Wb()),2&e){const e=A.nc(2);A.Cb(1),A.bd(" ",A.qc(2,1,"PROJECTS.SHARED.PROJECT_TIME_INFO_LOSS_WARNING",A.Bc(4,Ht,e.selectedProject.name))," ")}}function $t(e,t){if(1&e&&(A.Xb(0,"p",33),A.Zc(1),A.oc(2,"translate"),A.Wb()),2&e){const e=A.nc(2);A.Cb(1),A.bd(" ",A.qc(2,1,"PROJECTS.SHARED.TIME_ENTRIES_INFO_LOSS_WARNING",A.Bc(4,Ht,e.selectedProject.name))," ")}}function zt(e,t){if(1&e&&(A.Xb(0,"p",33),A.Zc(1),A.oc(2,"translate"),A.Wb()),2&e){const e=A.nc(2);A.Cb(1),A.bd(" ",A.qc(2,1,"PROJECTS.SHARED.TIME_ENTRIES_AND_EXPENSES_INFO_LOSS_WARNING",A.Bc(4,Ht,e.selectedProject.name))," ")}}function Zt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"delete-confirm-modal",28),A.jc("onDelete",(function(){A.Oc(e);const i=t.$implicit;return A.nc().deleteProject(i)}))("onClose",(function(i){return A.Oc(e),t.$implicit.close(i)})),A.oc(1,"translate"),A.oc(2,"translate"),A.Xc(3,Yt,3,6,"span",29),A.Xc(4,$t,3,6,"p",30),A.Xc(5,zt,3,6,"ng-template",null,31,A.Yc),A.Wb()}if(2&e){const e=A.Lc(6),t=A.nc();A.wc("title",A.pc(1,7,"GLOBAL.DELETE_BTN"))("btnText",A.pc(2,9,"GLOBAL.DELETE_BTN"))("showConfirmation",t.workspace.timeApprovalEnabled)("inProgress",t.inProgress),A.Cb(3),A.wc("ngIf",t.workspace.timeApprovalEnabled),A.Cb(1),A.wc("ngIf",!t.workspace.expensesEnabled)("ngIfElse",e)}}function Kt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"project-bulk-edit",34),A.jc("close",(function(){return t.$implicit.close()}))("updated",(function(i){A.Oc(e);const n=t.$implicit;return A.nc().updatedMany(i),n.close()})),A.Wb()}if(2&e){const e=A.nc();A.wc("projects",e.bulkList)}}const qt=function(e){return{listLength:e}};function Jt(e,t){if(1&e){const e=A.Yb();A.Xb(0,"delete-confirm-modal",35),A.jc("onDelete",(function(i){A.Oc(e);const n=t.$implicit,s=A.nc();return n.close(i),s.deleteMany()}))("onClose",(function(i){return A.Oc(e),t.$implicit.close(i)})),A.oc(1,"translate"),A.oc(2,"translate"),A.Xb(3,"p",36),A.Zc(4),A.oc(5,"translate"),A.Wb(),A.Xb(6,"p",33),A.Zc(7),A.oc(8,"translate"),A.Wb(),A.Wb()}if(2&e){const e=A.nc();A.wc("title",A.pc(1,4,"GLOBAL.DELETE_BTN"))("btnText",A.pc(2,6,"GLOBAL.DELETE_BTN")),A.Cb(4),A.bd(" ",A.qc(5,8,"PROJECTS.PROJECTS_PAGE.DELETE_MULTIPLE_PROJECTS_WARNING",A.Bc(13,qt,e.bulkList.length))," "),A.Cb(3),A.bd(" ",A.pc(8,11,"PROJECTS.PROJECTS_PAGE.REMOVE_PROJECTS_TIME_ENTRIES_WARNING")," ")}}const Qt=function(e){return{projectsCount:e}};function ei(e,t){if(1&e){const e=A.Yb();A.Xb(0,"simple-modal",37),A.jc("confirmed",(function(i){A.Oc(e);const n=t.$implicit,s=A.nc();return n.close(i),s.archiveMany(s.allArchived)}))("close",(function(i){return A.Oc(e),t.$implicit.close(i)})),A.oc(1,"translate"),A.oc(2,"translate"),A.Xb(3,"p",36),A.Zc(4),A.oc(5,"translate"),A.Wb(),A.Wb()}if(2&e){const e=A.nc();A.wc("title",A.pc(1,4,e.allArchived?"GLOBAL.RESTORE_LABEL":"GLOBAL.ARCHIVE_LABEL"))("isDanger",!0)("btnText",A.pc(2,6,e.allArchived?"GLOBAL.RESTORE_LABEL":"GLOBAL.ARCHIVE_LABEL")),A.Cb(4),A.bd(" ",A.qc(5,8,e.allArchived?"PROJECTS.PROJECTS_PAGE.RESTORE_MULTIPLE_PROJECTS_WARNING":"PROJECTS.PROJECTS_PAGE.ARCHIVE_MULTIPLEP_ROJECTS_WARNING",A.Bc(11,Qt,e.bulkList.length))," ")}}let ti=(()=>{class e{constructor(e,t,i,n,s,r,o,a,c,l,d,h,p,b,f){this.workspaceService=e,this.authService=t,this.projectService=i,this.browserService=n,this.systemSettingsService=s,this.loader=r,this.cd=o,this.modalService=a,this.router=c,this.activatedRoute=l,this.uiSettingsService=d,this.projectsFilterStore=h,this.toaster=p,this.translate=b,this.analyticsService=f,this.projects=[],this.bulkList=[],this.isAllSelected=!1,this.managerPermissions=[],this.showClearFilter=!1,this.unsubscribe$=new u.a}ngOnInit(){this.user=this.authService.getUser(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasBulkEditFeature=this.workspace.hasFeature(S.a.BULK_EDIT),this.hasProjectTemplateFeature=this.workspace.hasFeature(S.a.PROJECT_TEMPLATES),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.canSeeRates=this.isAdminOrOwner||!this.workspace.onlyAdminsSeeBillableRates,this.canSeeProjectStatus=this.isAdminOrOwner||!this.workspace.onlyAdminsSeeProjectStatus,this.hasCreatePermissions=this.isAdminOrOwner||!this.workspace.onlyAdminsCreateProject,this.setBrowserWidth(),this.getParams(),this.systemSettingsService.getSystemSettings(),this.setLabels(),this.activeBillable=this.workspace.activeBillableHours,this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setBrowserWidth(){this.browserService.isBreakpointLgCustom$.pipe(Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()})}setPaginationUrl(e){this.pager.setPaginationManually(e),this.page=this.pager.page,this.limit=this.pager.limit,this.navigate({page:this.page,limit:this.limit},!0,!1)}defaultFilter(){this.queryFilter=this.projectsFilterStore.defaultFilter(),this.queryFilter.sortColumn=this.sortColumn,this.queryFilter.sortOrder=this.sortOrder,this.queryFilter.page=this.page,this.queryFilter.limit=this.limit}clearFilter(){this.defaultFilter(),this.showClearFilter=!1,this.navigate(this.queryFilter,!0,!0)}applyFilter(e){this.page=1,e.page=this.page,this.navigate(e,!1,!0)}applySorting(e){this.sortColumn=e.sortBy,this.sortOrder=e.sortOrder,this.navigate({sortColumn:this.sortColumn,sortOrder:this.sortOrder},!0,!1)}getProjects(){this.loader.showBar(),this.queryFilter.containsClient&&!this.queryFilter.clients.length&&(this.queryFilter.clientStatus="ALL"),this.queryFilter.containsUser&&!this.queryFilter.users.length&&(this.queryFilter.userStatus="ALL"),this.projectService.getProjectsCount(this.queryFilter).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.total=e,this.cd.detectChanges(),this.browserService.scrollToTop()}),this.projectService.getProjects(this.queryFilter).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.projects=e,this.isAdminOrOwner||this.projectService.getAllAuthorizationsForUser(this.user.id,e.map(e=>e.id)).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.managerPermissions=e.filter(e=>"PROJECT_MANAGER"===e.name).map(e=>e.objectId),this.isManagerOfAnyProject=this.projects.some(e=>this.managerPermissions.indexOf(e.id)>-1),this.checkIfShouldShowStatusColumns(),this.cd.detectChanges()}),this.loader.hide(),this.checkIfShouldShowStatusColumns(),this.setIfSomeSelected()},()=>{this.loader.hide()})}projectAction(e,t){switch(this.selectedProject=t,e){case"archive":this.archiveProject();break;case"delete":this.openModal(this.deleteModal);break;case"template":this.setAsTemplate()}}openModal(e){this.modalService.open(e,{centered:!0})}deleteProject(e){this.inProgress=!0,this.projectService.deleteProject(this.selectedProject.id).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(()=>{this.inProgress=!1,e.close(),this.projects.splice(this.projects.indexOf(this.selectedProject),1),this.cd.detectChanges(),this.analyticsService.addEvent(new y.a({event:"select",value:"Delete",section:"Projects"}))},()=>this.inProgress=!1)}archiveProject(){const e=Object(E.f)(this.selectedProject);e.archived=!e.archived,this.projectService.updateProject(e).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(t=>{this.selectedProject.archived=t.archived,this.projects=this.projects.map(e=>e.id===t.id?(e.archived=t.archived,Object(E.f)(e)):e),this.cd.detectChanges(),this.analyticsService.addEvent(new y.a({event:"select",value:e.archived?"Archive":"Restore",section:"Projects"}))},e=>{this.toaster.pop("error",e&&e.error&&e.error.message)})}setAsTemplate(){this.hasProjectTemplateFeature&&(this.selectedProject.isTemplate=!this.selectedProject.isTemplate,this.projectService.updateIsProjectTemplate(this.selectedProject).pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe())}bulkEdit(e){this.bulkList=this.projects.filter(e=>e.bulkSelected).map(e=>e.id),this.openModal(e)}updatedMany(e){e&&(this.page=0,this.someProjectsSelected=!1,this.isAllSelected=!1,this.getProjects())}archiveMany(e){const t=new r.a;t.archived=!e,this.projectService.updateMany(this.bulkList,["ARCHIVED"],t).pipe(Object(a.a)(this.unsubscribe$)).subscribe(()=>{this.projects.filter(e=>this.bulkList.indexOf(e.id)>-1).map(t=>t.archived=!e),this.selectAll(!1)})}deleteMany(){this.projectService.deleteMany(this.bulkList).pipe(Object(a.a)(this.unsubscribe$)).subscribe(e=>{const t=e.map(e=>e.id);this.projects=this.projects.filter(e=>-1===t.indexOf(e.id)),this.cd.markForCheck(),0===this.projects.length?this.getProjects():this.setIfSomeSelected()})}addProjectToList(e){this.projects.unshift(new r.a(e)),this.managerPermissions.push(e.id),this.checkIfShouldShowStatusColumns(),this.cd.detectChanges()}selectAll(e){this.isAllSelected=e,this.someProjectsSelected=e,this.projects=this.projects.map(t=>((t=new r.a(t)).bulkSelected=e,t)),this.setIfSomeSelected()}expandAllRows(e){this.expandAll=e,this.cd.detectChanges()}setIfSomeSelected(){0===this.projects.length?(this.allArchived=!1,this.someArchived=!1,this.someProjectsSelected=!1,this.isAllSelected=!1):(this.allArchived=this.projects.filter(e=>e.bulkSelected).every(e=>e.archived),this.someArchived=this.projects.filter(e=>e.bulkSelected).some(e=>e.archived),this.someProjectsSelected=this.projects.some(e=>e.bulkSelected),this.isAllSelected=this.projects.every(e=>e.bulkSelected)),this.cd.detectChanges()}checkIfShouldShowStatusColumns(){this.showStatusColumns=this.canSeeProjectStatus||this.projects.some(e=>this.managerPermissions.indexOf(e.id)>-1),this.setLabels(),this.cd.detectChanges()}addParamsToRoute(){const e=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({archived:this.queryFilter.archived},{clients:this.queryFilter.clients.length>0?this.queryFilter.clients.join(","):null}),{users:this.queryFilter.users.length>0?this.queryFilter.users.join(","):null}),{billable:this.queryFilter.billable}),{name:this.queryFilter.name||null}),{containsClient:this.queryFilter.containsClient}),{containsUser:this.queryFilter.containsUser}),{page:this.queryFilter.page}),{limit:this.queryFilter.limit}),{sortColumn:this.queryFilter.sortColumn}),{sortOrder:this.queryFilter.sortOrder}),t=this.router.createUrlTree([],{queryParams:e}),i=this.router.serializeUrl(t);this.router.navigateByUrl(i,{replaceUrl:!0})}updateLocalStorage(){this.uiSettingsService.setSettings(v.b.PROJECTS_DATA,{limit:this.limit,sortOrder:this.sortOrder,sortColumn:this.sortColumn})}getParams(){Object(d.a)(this.activatedRoute.queryParams.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)),this.projectsFilterStore.filter.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$)),this.projectsFilterStore.changedWorkspaceIndicator.pipe(Object(c.a)(1),Object(a.a)(this.unsubscribe$))).subscribe(([e,t,i])=>{const s=this.uiSettingsService.getSettings(v.b.PROJECTS_DATA)||{};this.page=Number(e.page)||1,this.limit=Number(e.limit)||Number(s.limit)||n.j,this.sortColumn=e.sortColumn||s.sortColumn||b.a.NAME,this.sortOrder=e.sortOrder||s.sortOrder||f.a.ASCENDING;const r=!Object(E.r)(e);this.navigate(Object.assign(Object.assign({},!i&&r?e:t),{page:this.page,limit:this.limit,sortColumn:this.sortColumn,sortOrder:this.sortOrder}),!1,r)})}fillQueryFilter(e){this.queryFilter||this.defaultFilter(),Object.keys(e).forEach(t=>{if("clients"===t||"users"===t){const i=Array.isArray(e[t])?e[t]:e[t].indexOf(",")>-1?e[t].split(","):[e[t]];this.queryFilter[t]=Object.assign([],i)}else this.queryFilter[t]="containsClient"!==t&&"containsUser"!==t||"string"!=typeof e[t]?e[t]:"true"===e[t]})}navigate(e,t,i){this.fillQueryFilter(e),t&&this.updateLocalStorage(),i&&this.projectsFilterStore.setFilter(this.queryFilter),this.addParamsToRoute(),this.getProjects(),this.cd.detectChanges()}setLabels(){const e=this.workspaceService.generateClientLabel(this.workspace.projectGroupingLabel);this.labels=[this.translate.instant("GLOBAL.NAME_LABEL"),e],this.projectColumns=["col1","col2"],!this.showStatusColumns||!this.activeBillable&&this.activeBillable||(this.labels.push(this.translate.instant("GLOBAL.TRACKED_LABEL")),this.projectColumns.push("col3"),this.canSeeRates&&(this.labels.push(this.translate.instant("GLOBAL.AMOUNT_LABEL")),this.projectColumns.push("col4")),this.labels.push(this.translate.instant("PROJECTS.SHARED.PROGRESS_LABEL")),this.projectColumns.push("col5")),(!this.activeBillable||this.onlyAdminCanSeeAndChangeBillable&&!this.isAdminOrOwner)&&(this.labels=this.labels.filter(e=>e!==this.translate.instant("GLOBAL.AMOUNT_LABEL")),this.projectColumns=this.projectColumns.filter(e=>"col4"!==e),this.isDesktop&&(this.labels.push(this.translate.instant("PROJECTS.SHARED.PROGRESS_LABEL")),this.projectColumns.push("col5"))),this.labels.push(this.translate.instant("GLOBAL.ACCESS_LABEL")),this.projectColumns.push("col6"),this.workspace.projectFavorites&&(this.labels.push(this.translate.instant("GLOBAL.FAVORITES_LABEL")),this.projectColumns.push("col7")),(this.isAdminOrOwner||this.managerPermissions.length)&&(this.labels.push(this.translate.instant("GLOBAL.EDIT_LABEL")),this.projectColumns.push("col8"))}}return e.\u0275fac=function(t){return new(t||e)(A.Rb(s.a),A.Rb(h.a),A.Rb(o.a),A.Rb(l.a),A.Rb(g.a),A.Rb(m.a),A.Rb(A.h),A.Rb(k.q),A.Rb(T.d),A.Rb(T.a),A.Rb(v.a),A.Rb(C.a),A.Rb(w.a),A.Rb(D.f),A.Rb(O.a))},e.\u0275cmp=A.Lb({type:e,selectors:[["projects"]],viewQuery:function(e,t){var i;1&e&&(A.gd(p.a,!0),A.gd(Bt,!0)),2&e&&(A.Kc(i=A.kc())&&(t.pager=i.first),A.Kc(i=A.kc())&&(t.deleteModal=i.first))},decls:29,vars:15,consts:[[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[1,"cl-col","cl-d-print-none"],["class","cl-d-flex cl-align-items-center cl-justify-content-end",4,"ngIf"],[1,"cl-d-print-none",3,"projectGroupingLabel","filter","showClearFilter","emitFilter","emitClearFilters","showClearFilterChange"],[1,"cl-card","cl-border-bottom-0","cl-mb-0","cl-d-print-none"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[4,"ngIf"],[1,"cl-mt-3"],[3,"visible","page","limit","total","pageChanged","limitChanged"],["modalNewProject",""],["deleteModal",""],["bulkEditModal",""],["deleteManyModal",""],["archiveModal",""],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-end"],["data-cy","create-new-project",1,"cl-btn","cl-btn-outline-primary",3,"click"],[1,"cl-d-none","cl-d-md-inline"],[1,"cl-projects-table","cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6"],["projects-table-header","",3,"someProjectsSelected","allProjectsSelected","allArchived","someArchived","archivedFilter","hasBulkEditPermission","isAdminOrOwner","isManager","projectGroupingLabel","sortBy","sortOrder","isDesktop","projectColumns","labels","emitBulkEdit","emitArchive","emitDelete","emitSorting","emitProjectSelection","onExpandAll"],["class","cl-row-hover-shadow",4,"ngFor","ngForOf"],[1,"cl-row-hover-shadow"],["projects-table-row","",3,"project","workspace","isDesktop","canSeeRates","labels","projectColumns","onlyAdminsSeeProjectStatus","isAdmin","managerPermissions","hasProjectTemplateFeature","hasCreatePermissions","expandAll","emitBulkSelected","emitProjectAction"],[3,"isAdminOrOwner","name","taskName","workspace","projectCreated","close"],[3,"title","btnText","showConfirmation","inProgress","onDelete","onClose"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],["class","cl-text-muted cl-cut-text-wrap",4,"ngIf","ngIfElse"],["warningWithExpense",""],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"],[1,"cl-text-muted","cl-cut-text-wrap"],[3,"projects","close","updated"],[3,"title","btnText","onDelete","onClose"],[1,"cl-h2","cl-cut-text-wrap"],[3,"title","isDanger","btnText","confirmed","close"]],template:function(e,t){1&e&&(A.Xb(0,"main",0),A.Xb(1,"div",1),A.Xb(2,"div",2),A.Xb(3,"div",3),A.Xb(4,"div",4),A.Xb(5,"h1"),A.Zc(6),A.oc(7,"translate"),A.Wb(),A.Wb(),A.Xb(8,"div",5),A.Xc(9,Nt,8,8,"div",6),A.Wb(),A.Wb(),A.Wb(),A.Xb(10,"projects-filter",7),A.jc("emitFilter",(function(e){return t.applyFilter(e)}))("emitClearFilters",(function(){return t.clearFilter()}))("showClearFilterChange",(function(e){return t.showClearFilter=e})),A.Wb(),A.Xb(11,"div",8),A.Xb(12,"div",9),A.Xb(13,"span",10),A.Zc(14),A.oc(15,"translate"),A.Wb(),A.Wb(),A.Wb(),A.Xc(16,Ut,6,15,"ng-container",11),A.Xb(17,"div",12),A.Xb(18,"pager",13),A.jc("pageChanged",(function(e){return t.setPaginationUrl(e)}))("limitChanged",(function(e){return t.setPaginationUrl(e)})),A.Wb(),A.Wb(),A.Wb(),A.Wb(),A.Xc(19,Vt,1,2,"ng-template",null,14,A.Yc),A.Xc(21,Zt,7,11,"ng-template",null,15,A.Yc),A.Xc(23,Kt,1,1,"ng-template",null,16,A.Yc),A.Xc(25,Jt,9,15,"ng-template",null,17,A.Yc),A.Xc(27,ei,6,13,"ng-template",null,18,A.Yc)),2&e&&(A.Cb(6),A.bd(" ",A.pc(7,11,"GLOBAL.PROJECTS_LABEL")," "),A.Cb(3),A.wc("ngIf",t.hasCreatePermissions),A.Cb(1),A.wc("projectGroupingLabel",t.workspace.projectGroupingLabel)("filter",t.queryFilter)("showClearFilter",t.showClearFilter),A.Cb(4),A.bd(" ",A.pc(15,13,"GLOBAL.PROJECTS_LABEL")," "),A.Cb(2),A.wc("ngIf",t.labels&&t.labels.length),A.Cb(2),A.wc("visible",t.total>t.limit||t.limit>50)("page",t.page)("limit",t.limit)("total",t.total))},directives:[I.u,se,p.a,_e,I.t,ht,pt.a,bt.a,Ft,Wt.a],pipes:[D.e,I.q],encapsulation:2,changeDetection:0}),e})()},"8LU1":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return r}));var n=i("fXoL");function s(e){return null!=e&&""+e!="false"}function r(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function o(e){return Array.isArray(e)?e:[e]}function a(e){return e instanceof n.l?e.nativeElement:e}},"8XW9":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ofXK"),s=i("3Pt+"),r=i("dlKe"),o=i("9Trn"),a=i("sYmb"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.b,o.a,a.d]]}),e})()},"8pWl":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},"91AR":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){e&&(this.type=e.type,this.value=e.value,this.isChecked=e.isChecked,this.label=e.label)}sameWith(e){return this.isChecked===e.isChecked&&this.type===e.type&&this.value===e.value}updateValue(e){e&&(this.value=e.value,this.isChecked=e.isChecked)}}},"9AGB":function(e,t,i){"use strict";var n=i("w5QO");function s(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:n.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e)},t.pipeFromArray=s},"9Eqt":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("hV/V"),r=i("fXoL");let o=(()=>{class e{constructor(e){this.translationStore=e}transform(e,t){const i=this.translationStore.getCurrentLang();return n.utc(e).locale(i).format(t)}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(s.a))},e.\u0275pipe=r.Qb({name:"momentUtcFormat",type:e,pure:!0}),e})()},"9G2T":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("wd/R"),s=i("B4wx"),r=i("fXoL"),o=i("sYmb");let a=(()=>{class e{constructor(e){this.translate=e}transform(e,t,i){const r=i&&i===s.a.HOUR12?"h:mm A":"HH:mm",o=n(e);return o.locale(t),this.translate.instant("GLOBAL.STARTED_ON_DATE_LABEL",{date:o.format("MMM DD, YYYY"),time:o.format(r||"h:mm A")})}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(o.f))},e.\u0275pipe=r.Qb({name:"formatStart",type:e,pure:!1}),e})()},"9Gc3":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("2rWG"),s=i("fXoL");let r=(()=>{class e{constructor(e){this.parent=e}set disableDropdown(e){"boolean"==typeof e&&this.parent&&(this.parent.disableClose=e)}forceClose(){this.parent&&this.parent.forceClose()}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.a))},e.\u0275dir=s.Mb({type:e,selectors:[["","disableCloseDropdownKey",""]],inputs:{disableDropdown:["disableCloseDropdownKey","disableDropdown"]},exportAs:["forceDropdown"]}),e})()},"9O0/":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},"9Trn":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},"9a6x":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("Ymxs");class s{constructor(e){this.forceTasks=e.forceTasks,this.forceProjects=!!e.canSeeTimeSheet||e.forceProjects,this.forceTags=!e.canSeeTimeSheet&&e.forceTags,this.forceDescription=!e.canSeeTimeSheet&&e.forceDescription,this.favoriteProjectsEnabled=e.projectFavorites,this.taskRequired=e.forceTasks,this.onlyAdminCanCreateProjects=e.onlyAdminsCreateProject,this.projectGroupingLabel=e.projectGroupingLabel}}var r=i("1Tmk"),o=i("pLZG"),a=i("fXoL"),c=i("sYmb");let l=(()=>{class e{constructor(e,t,i){this.toaster=e,this.workspaceService=t,this.translate=i,this.subscribeToForceOptions()}subscribeToForceOptions(){this.workspaceDefaltSub=this.workspaceService.defaultWorkspace$.pipe(Object(o.a)(e=>!!e)).subscribe(e=>{this.forceOptions=new s(e)})}isValid(e,t){const i=[],n=t||this.forceOptions;return n&&n.forceDescription&&!e.description&&i.push("description"),!n||!n.forceTags||e.tags&&e.tags.length>0||i.push("tag"),!n||!n.forceProjects||e.project&&e.project.id||i.push("project"),!(n&&n.forceTasks&&e.project&&e.project.tasks&&e.project.tasks.length>0)||e.task&&e.task.id||i.push("task"),!(i.length>0&&(this.toaster.pop("error",this.translate.instant("TRACKER.MESSAGES.ERROR_MISSING_FIELDS",{fields:i.join(", ")})),1))}validateDescription(e){return!(this.forceOptions&&this.forceOptions.forceDescription&&!e&&(this.toaster.pop("error",this.translate.instant("TRACKER.MESSAGES.ERROR_MISSING_DESCRIPTION")),1))}validateTag(e){return!(this.forceOptions&&this.forceOptions.forceTags&&!(e&&e.length>0)&&(this.toaster.pop("error",this.translate.instant("TRACKER.MESSAGES.ERROR_MISSING_TAG")),1))}validateProjectAndTask(e){const t=[],i=e.workspace?e.workspace:this.forceOptions;return!i||!i.forceProjects||e.project&&e.project.id||t.push("project"),!(e.project&&e.project.tasks&&e.project.tasks.length>0&&i&&i.forceTasks)||e.task&&e.task.id||t.push("task"),!(t.length>0&&(this.toaster.pop("error",this.translate.instant("TRACKER.MESSAGES.ERROR_MISSING_FIELDS",{fields:"a "+t.join(", ")})),1))}ngOnDestroy(){this.workspaceDefaltSub&&this.workspaceDefaltSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.fc(n.a),a.fc(r.a),a.fc(c.f))},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9lpP":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("ofXK"),s=i("3Pt+"),r=i("gr2/"),o=i("1kSV"),a=i("tZA+"),c=i("tyNb"),l=i("sYmb"),u=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.db,a.a,o.O,c.h,l.d]]}),e})()},AEYL:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("XNiG"),s=i("fXoL");let r=(()=>{class e{constructor(){this.removedUserFromProject$=new n.a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac}),e})()},"AHJ+":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=i("ofXK"),r=i("sYmb");function o(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",5),n.Xb(1,"h1",6),n.Zc(2),n.Wb(),n.Xb(3,"button",7),n.jc("click",(function(){return n.Oc(e),n.nc().close.emit()})),n.Xb(4,"span",8),n.Sb(5,"img",9),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.ad(e.title)}}const a=["*"];let c=(()=>{class e{constructor(){this.btnText="GLOBAL.CONFIRM_OK_BTN",this.btnCancel="GLOBAL.CANCEL_BTN",this.close=new n.n,this.confirmed=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["simple-modal"]],inputs:{title:"title",btnText:"btnText",btnCancel:"btnCancel",isDanger:"isDanger",inProgress:"inProgress"},outputs:{close:"close",confirmed:"confirmed"},ngContentSelectors:a,decls:10,vars:9,consts:[["class","cl-modal-header",4,"ngIf"],[1,"cl-modal-body","cl-text-break"],[1,"cl-modal-footer"],[3,"click"],["ngbAutofocus","","type","button",1,"cl-btn",3,"disabled","ngClass","click"],[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"]],template:function(e,t){1&e&&(n.vc(),n.Xc(0,o,6,1,"div",0),n.Xb(1,"div",1),n.uc(2),n.Wb(),n.Xb(3,"div",2),n.Xb(4,"a",3),n.jc("click",(function(){return t.close.emit()})),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Xb(7,"button",4),n.jc("click",(function(){return t.confirmed.emit()})),n.Zc(8),n.oc(9,"translate"),n.Wb(),n.Wb()),2&e&&(n.wc("ngIf",t.title),n.Cb(5),n.ad(n.pc(6,5,t.btnCancel)),n.Cb(2),n.wc("disabled",t.inProgress)("ngClass",t.isDanger?"cl-btn-danger":"cl-btn-primary"),n.Cb(1),n.ad(n.pc(9,7,t.btnText)))},directives:[s.u,s.r],pipes:[r.e],encapsulation:2}),e})()},AHy6:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{constructor(){this.onClose=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["modal-header"]],inputs:{title:"title"},outputs:{onClose:"onClose"},decls:6,vars:1,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close","cl-no-outline",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"h1",1),n.Zc(2),n.Wb(),n.Xb(3,"button",2),n.jc("click",(function(){return t.onClose.emit()})),n.Xb(4,"span",3),n.Sb(5,"img",4),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.ad(t.title))},encapsulation:2,changeDetection:0}),e})()},AIwn:function(e,t,i){"use strict";i.d(t,"a",(function(){return Se}));var n=i("fXoL"),s=i("XNiG"),r=i("avDW"),o=i("1G5W"),a=i("xoOP"),c=i("Ymxs"),l=i("9a6x"),u=(i("iO9P"),i("yK97")),d=i("1Tmk"),h=i("OmiP"),p=(i("GidR"),i("Vpr3")),b=i("lGQG"),f=i("lvCY"),m=(i("IQK1"),i("VYrk")),g=i("qrIO"),v=i("aLCL"),C=i("hkzH"),E=i("Y9WU"),w=i("1kSV"),S=i("sYmb"),y=i("ofXK"),O=i("5SNR"),A=i("3Pt+"),k=i("2rWG"),T=i("pCWH"),D=i("qUN8"),I=i("Nu56"),_=i("sbmM"),R=i("4Seb"),L=i("GAki"),x=i("MPSC"),P=i("FfKB"),j=i("kKK/"),M=i("62PR"),X=i("6GAr"),F=i("AHJ+"),W=i("tyNb"),B=i("rg2B"),N=i("Lwft");const G=["dropdown"];function U(e,t){1&e&&n.Tb(0)}function V(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"input",32),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(3).timeEntry.bulkEdit=t}))("change",(function(){n.Oc(e);const t=n.nc(3);return t.selectChange(t.timeEntry.bulkEdit)})),n.Wb(),n.Sb(2,"label",33),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(1),n.xc("id",e.timeEntry.id),n.wc("disabled",e.disableEdit)("ngModel",e.timeEntry.bulkEdit),n.Cb(1),n.xc("for",e.timeEntry.id)}}function H(e,t){if(1&e&&(n.Vb(0),n.Xc(1,V,3,4,"div",30),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",!e.disableEdit)}}function Y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input-duration",34),n.jc("timeChanged",(function(t){return n.Oc(e),n.nc(2).dateTimeChanged(t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc(2);n.wc("ngbTooltip",e.isRounding?n.pc(1,4,"Editing time is not allowed while rounding is turned on."):"")("disable",e.isRounding||e.disableEdit)("format",e.format)("timeInterval",e.timeEntry.timeInterval)}}function $(e,t){if(1&e){const e=n.Yb();n.Xb(0,"project-picker",35,36),n.jc("selectedProjectAndTask",(function(t){return n.Oc(e),n.nc(2).selectProjectAndTask(t)}))("onResize",(function(t){return n.Oc(e),n.Lc(1).onResizeChange(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("selectedProject",e.timeEntry.project)("selectedTask",e.timeEntry.task)("selectedUserId",null==e.timeEntry.user?null:e.timeEntry.user.id)("hideWorkspaces",!0)}}function z(e,t){if(1&e){const e=n.Yb();n.Xb(0,"tag-dropdown",37),n.jc("close",(function(t){return n.Oc(e),n.nc(2).selectTags(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("resizeableName","tagPicker")("resizeToLeft",!0)("entryTags",e.timeEntry.tags)}}function Z(e,t){if(1&e&&(n.Xb(0,"span",38),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc(2);n.xc("title",e.timeEntry.invoiceTooltip),n.Cb(1),n.bd(" ",n.pc(2,2,"GLOBAL.INVOICED_LABEL")," ")}}function K(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",13),n.Xb(1,"div",14),n.Xc(2,H,2,1,"ng-container",15),n.Xb(3,"div",16),n.Xb(4,"input",17,18),n.jc("focus",(function(){n.Oc(e);const t=n.nc();return t.backupDescription=t.timeEntry.description}))("ngModelChange",(function(t){return n.Oc(e),n.nc().timeEntry.description=t}))("change",(function(){return n.Oc(e),n.nc().updateDescription()}))("keyup.enter",(function(){return n.Oc(e),n.Lc(5).blur()})),n.oc(6,"translate"),n.Wb(),n.Xb(7,"div",19),n.Zc(8),n.Wb(),n.Wb(),n.Xb(9,"div",20),n.Xc(10,Y,2,6,"input-duration",21),n.Wb(),n.Wb(),n.Xb(11,"div",22),n.Xb(12,"div",23),n.Sb(13,"div",24),n.Xc(14,$,2,4,"project-picker",25),n.Wb(),n.Wb(),n.Xb(15,"div",26),n.Sb(16,"tag-names-text-only",27),n.Xc(17,z,1,3,"tag-dropdown",28),n.Wb(),n.Xc(18,Z,3,4,"span",29),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("ngIf",!e.sharedReport),n.Cb(2),n.wc("placeholder",n.pc(6,18,e.sharedReport?"APPROVAL.ENTRY_NO_DESCRIPTION":"TRACKER.TIME_TRACKER.ENTRY.DESCRIPTION"))("disabled",!e.sharedReport&&e.disableEdit)("readOnly",e.sharedReport)("ngModel",e.timeEntry.description),n.Db("title",e.timeEntry.description),n.Cb(4),n.bd(" ",e.timeEntry.description," "),n.Cb(2),n.wc("ngIf",!e.isDesktop),n.Cb(2),n.wc("dropdownKey",e.disableEdit),n.Cb(1),n.wc("isDisabled",e.disableEdit)("project",e.timeEntry.project)("task",e.timeEntry.task)("projectData",e.projectData)("workspace",e.workspace),n.Cb(2),n.wc("dropdownKey",e.disableEdit),n.Cb(1),n.wc("tags",e.timeEntry.tags)("hideAddingTags",e.disableEdit),n.Cb(2),n.wc("ngIf",e.invoicingEnabled&&e.timeEntry.hasInvoice)}}function q(e,t){1&e&&(n.Vb(0),n.Zc(1," - "),n.Ub())}function J(e,t){if(1&e&&(n.Zc(0),n.oc(1,"roundIfWholeNumber"),n.oc(2,"centsToDollars")),2&e){const e=n.nc(2);n.bd(" ",n.pc(1,1,n.pc(2,3,e.timeEntry.amount))," ")}}function Q(e,t){if(1&e&&(n.Xb(0,"div",39),n.Xb(1,"div",40),n.Xc(2,q,2,0,"ng-container",41),n.Xc(3,J,3,5,"ng-template",null,42,n.Yc),n.Wb(),n.Wb()),2&e){const e=n.Lc(4),t=n.nc();n.Cb(1),n.Db("title",t.amountTooltip),n.Cb(1),n.wc("ngIf",t.hideAmount)("ngIfElse",e)}}function ee(e,t){if(1&e){const e=n.Yb();n.Xb(0,"billable-icon",43),n.jc("changed",(function(t){return n.Oc(e),n.nc().changeBillable(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("disableEdit",e.disableEdit)("billable",e.timeEntry.billable)("userCurrency",e.currency)}}function te(e,t){if(1&e&&(n.Xb(0,"div",46),n.Xb(1,"div",47),n.Xb(2,"span",48),n.Zc(3),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(3),n.ad(e.timeEntry.user.name||e.timeEntry.user.email)}}function ie(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",49,50),n.Xb(2,"dropdown-items",51,52),n.jc("onFilterOptionChange",(function(t){return n.Oc(e),n.nc(2).onFilterChange(t)}))("onChanged",(function(t){n.Oc(e);const i=n.Lc(1);return n.nc(2).userChanged(t,i)}))("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreUsers()}))("onOpen",(function(){return n.Oc(e),n.nc(2).open()})),n.oc(4,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2),t=n.Lc(22);n.wc("ngbPopover",t),n.Cb(2),n.xc("placeholder",n.pc(4,12,"GLOBAL.SEARCH_USERS_LABEL")),n.wc("enableSearch",!0)("list",e.users)("type","DROPDOWN")("filterQuery",e.query)("initLabel",e.timeEntry.user.name||e.timeEntry.user.email)("itemLabel",e.timeEntry.user.name||e.timeEntry.user.email)("value",e.timeEntry.user.id)("filterOptions",e.userFilterOptions)("offlineSearch",e.allUsersLoaded)("setFixedWidth",!0)}}function ne(e,t){if(1&e&&(n.Xc(0,te,4,1,"div",44),n.Xc(1,ie,5,14,"ng-template",null,45,n.Yc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",!t.allowUserEdit())("ngIfElse",e)}}function se(e,t){if(1&e){const e=n.Yb();n.Xb(0,"single-date-picker2",53),n.jc("pickedDate",(function(t){return n.Oc(e),n.nc().dateTimeChanged(t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc();n.wc("ngbTooltip",e.isRounding&&!e.disableManualModeEdit?n.pc(1,9,"REPORTS.SHARED.EDIT_TIME_WARNING_TOOLTIP"):"")("textualDate",!0)("disableEdit",e.isRounding||e.disableEdit||e.disableManualModeEdit)("removeOpacity",e.sharedReport)("mode","time_only")("dateTime",e.timeEntry.timeInterval)("timeFormat",e.timeFormat)("dateFormat",e.dateFormat)("timeZone",e.timeZone)}}function re(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",54),n.Xb(1,"input-duration",55),n.jc("timeChanged",(function(t){return n.Oc(e),n.nc().dateTimeChanged(t)})),n.oc(2,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.isRounding&&!e.disableManualModeEdit?n.pc(2,5,"REPORTS.SHARED.EDIT_TIME_WARNING_TOOLTIP"):"")("disable",e.isRounding||e.disableEdit||e.disableManualModeEdit)("removeOpacity",e.sharedReport)("format",e.format)("timeInterval",e.timeEntry.timeInterval)}}function oe(e,t){1&e&&(n.Sb(0,"img",61),n.oc(1,"translate")),2&e&&n.wc("title",n.pc(1,1,"REPORTS.DETAILED_REPORT.APPROVED_ENTRIE_TOOLTIP"))}function ae(e,t){1&e&&(n.Sb(0,"img",62),n.oc(1,"translate")),2&e&&n.wc("title",n.pc(1,1,"GLOBAL.ENTRIES_LOCKED_ERROR_MESSAGE"))}function ce(e,t){if(1&e&&(n.Xb(0,"div",58),n.Xc(1,oe,2,3,"img",59),n.Xc(2,ae,2,3,"ng-template",null,60,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(2);n.Cb(1),n.wc("ngIf",t.timeEntry.approvalRequestId)("ngIfElse",e)}}function le(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",72,73),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.Lc(1);return n.nc(4).duplicateEntry(t)}))("keyup.space",(function(){n.Oc(e);const t=n.Lc(1);return n.nc(4).duplicateEntry(t)}))("click",(function(){n.Oc(e);const t=n.Lc(1);return n.nc(4).duplicateEntry(t)})),n.Zc(2),n.oc(3,"translate"),n.Wb()}if(2&e){const e=n.nc(4),t=n.Lc(20);n.wc("ngbPopover",t),n.Db("clickCloseDropdown",e.showUpgradeToEnable?null:""),n.Cb(2),n.bd(" ",n.pc(3,3,"GLOBAL.DUPLICATE_BTN")," ")}}function ue(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",69),n.Xb(1,"list-items"),n.Xc(2,le,4,5,"a",70),n.Xb(3,"a",71),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(18);return t.openDeleteModal(i)}))("keyup.space",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(18);return t.openDeleteModal(i)}))("click",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(18);return t.openDeleteModal(i)})),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(2),n.wc("ngIf",e.isAdminOrOwner),n.Cb(2),n.bd(" ",n.pc(5,2,"GLOBAL.DELETE_BTN")," ")}}function de(e,t){1&e&&(n.Xb(0,"div",63),n.Xb(1,"div",64),n.Sb(2,"img",65),n.Wb(),n.Xc(3,ue,6,4,"div",66),n.Sb(4,"span",67,68),n.Wb())}function he(e,t){if(1&e&&(n.Xc(0,ce,4,2,"div",56),n.Xc(1,de,6,0,"ng-template",null,57,n.Yc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.disableEdit)("ngIfElse",e)}}function pe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"simple-modal",74),n.jc("confirmed",(function(){n.Oc(e);const i=t.$implicit;return n.nc().confirmDelete(i)}))("close",(function(i){return n.Oc(e),t.$implicit.close(i)})),n.oc(1,"translate"),n.oc(2,"translate"),n.Zc(3),n.oc(4,"translate"),n.Wb()}if(2&e){const e=n.nc();n.wc("title",n.pc(1,5,"GLOBAL.DELETE_BTN"))("inProgress",e.inProgress)("isDanger",!0)("btnText",n.pc(2,7,"GLOBAL.DELETE_BTN")),n.Cb(3),n.bd(" ",n.pc(4,9,"REPORTS.DETAILED_REPORT.DELETE_MODAL_BODY")," ")}}const be=function(){return["/upgrade"]};function fe(e,t){if(1&e){const e=n.Yb();n.Zc(0),n.oc(1,"translate"),n.Xb(2,"a",75),n.jc("click",(function(){return n.Oc(e),n.nc().analyticsService.addEventOnSettingsChanged("Basic","Upgrade","Reports","Detailed","Duplicate")})),n.Zc(3),n.oc(4,"translate"),n.Wb()}2&e&&(n.bd(" ",n.pc(1,3,"GLOBAL.BASIC_FEATURE_LABEL")," "),n.Cb(2),n.wc("routerLink",n.Ac(7,be)),n.Cb(1),n.ad(n.pc(4,5,"GLOBAL.UPGRADE_BTN")))}const me=function(){return{plan:"basic"}};function ge(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",76),n.jc("click",(function(){return n.Oc(e),n.nc().analyticsService.addEventOnSettingsChanged("Basic","Upgrade","Reports","Detailed","Add time for others")})),n.Zc(1),n.oc(2,"translate"),n.Wb(),n.Zc(3),n.oc(4,"translate")}2&e&&(n.wc("routerLink",n.Ac(8,be))("queryParams",n.Ac(9,me)),n.Cb(1),n.ad(n.pc(2,4,"GLOBAL.UPGRADE_BTN")),n.Cb(2),n.bd(" ",n.pc(4,6,"GLOBAL.ADD_TIME_OTHERS_TEXT_PART"),"\n"))}const ve=function(e){return{labels:e}},Ce=function(e,t,i,n,s){return[e,t,i,n,s]},Ee=function(e,t,i,n,s,r){return[e,t,i,n,s,r]},we=function(e,t,i,n,s,r,o){return[e,t,i,n,s,r,o]};let Se=(()=>{class e{constructor(e,t,i,r,o,a,c,l,u,d,h){this.analyticsService=e,this.cd=t,this.trackerService=i,this.toaster=r,this.modalService=o,this.authService=a,this.entryHelper=c,this.workspaceService=l,this.reportService=u,this.projectService=d,this.translateService=h,this.onSelectChange=new n.n,this.onDelete=new n.n,this.onDuplicate=new n.n,this.onEarnedChange=new n.n,this.labels=["","amount","billing","user","time","duration","edit"],this.unsubscribe$=new s.a,this.users=[],this.query={},this.userFilterOptions=C.v,this.sortByTagNameMapper=e=>e.name}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.loggedInUser=this.authService.getUser(),this.resetQuery(),this.currentUserEntry=!!this.loggedInUser&&this.authService.getUser().id===this.timeEntry.user.id,this.activeBillableHours||(this.labels=this.labels.filter(e=>"billing"!=e&&"amount"!=e)),this.onlyAdminCanSeeAndChangeBillable&&!this.isAdminOrOwner&&(this.labels=this.labels.filter(e=>"billing"!=e))}ngAfterViewInit(){this.cd.detectChanges()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get showUpgradeToEnable(){return!this.currentUserEntry&&this.isAdminOrOwner&&!this.hasAddTimeForOthersFeature}get amountTooltip(){return this.onlyAdminsSeeBillableRates&&!this.isAdminOrOwner||!this.amountOptions.length?"":this.amountOptions[0]===g.a.EARNED&&this.timeEntry.billable?this.translateService.instant("GLOBAL.BILLABLE_RATE_LABEL")+": "+this.timeEntry.hourlyRate/100:this.amountOptions[0]===g.a.COST?this.translateService.instant("GLOBAL.COST_RATE_LABEL")+": "+this.timeEntry.costRate/100:this.amountOptions[0]===g.a.PROFIT?this.translateService.instant("GLOBAL.BILLABLE_RATE_LABEL")+`: ${this.timeEntry.hourlyRate/100}\n`+this.translateService.instant("GLOBAL.COST_RATE_LABEL")+": "+this.timeEntry.costRate/100:""}get hideAmount(){return!(!this.onlyAdminsSeeBillableRates||this.isAdminOrOwner)||!this.amountOptions.length||this.amountOptions[0]===g.a.EARNED&&!this.timeEntry.billable}allowUserEdit(){return!this.disableEdit&&(this.isAdminOrOwner||this.canTeamManagerEditEntry)}get disableManualModeEdit(){return!this.isAdminOrOwner&&!this.canTeamManagerEditEntry&&this.disableManualMode}selectChange(e){this.onSelectChange.emit(e)}userChanged(e,t){if(!this.hasAddTimeForOthersFeature)return t.open(),void this.dropdownItems.setValue(this.timeEntry.user.id);this.timeEntry.user.id=e,this.trackerService.updateUser(this.timeEntry.id,e).subscribe(e=>{var t;const i={hourlyRate:e.hourlyRate&&e.hourlyRate.amount,costRate:e.costRate&&e.costRate.amount,type:this.amountOptions[0]};e.projectId!==(null===(t=this.timeEntry.project)||void 0===t?void 0:t.id)&&this.updateEntryProject(e.projectId),this.timeEntry.updateHourlyRateAndEarned(i),this.onEarnedChange.emit(),this.cd.markForCheck()})}updateEntryProject(e){null!=e?this.projectService.getProject(e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.timeEntry.project=e,this.timeEntry.task=null,this.cd.markForCheck()}):this.timeEntry.project=null}open(){this.getUsers(this.query)}onFilterChange(e){this.query.page=1,this.query.email=e.searchTerm,this.query.statuses=e.status,this.query.status=e.status,this.query.forceFilter=!0,this.allUsersLoaded=!1,this.getUsers(this.query)}resetQuery(){this.query={page:1,limit:f.f,name:"",sortColumn:"name",status:"ACTIVE",statuses:"ACTIVE",forceFilter:!0},this.allUsersLoaded=!1}loadMoreUsers(){this.query.page++,this.getUsers(this.query)}getUsers(e){this.allUsersLoaded||(this.isTeamManager?this.getManagedUsers():this.workspaceService.getUsers(e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(({count:t,users:i})=>{1===e.page&&(this.users=[]),this.users.push.apply(this.users,this.createDropdownValues(i)),this.allUsersLoaded=!e.email&&(this.users.length>=t||i.length<e.limit),this.cd.markForCheck(),this.dropdownItems&&this.dropdownItems.triggerDetection()}))}isManagerToSelf(){return this.managedUsers.some(e=>e.id===this.authService.getUser().id)}getManagedUsers(){this.workspaceService.getReportsFilterTeamMembers(this.query).pipe(Object(o.a)(this.unsubscribe$)).subscribe(({count:e,users:t})=>{1===this.query.page&&(this.users=[]);const i=this.isManagerToSelf()?t:t.filter(e=>e.id!==this.authService.getUser().id);this.users.push.apply(this.users,this.createDropdownValues(i)),this.allUsersLoaded=!this.query.email&&(this.users.length>=e||t.length<this.query.limit),this.cd.markForCheck(),this.dropdownItems&&this.dropdownItems.triggerDetection()})}createDropdownValues(e){return e.map(e=>new h.a(e.id,e.name||e.email+` (${this.translateService.instant("REPORTS.DETAILED_REPORT.USER_DROPDOWN_VALUE_PART_2")})`))}updateDescription(){this.timeEntry.description=Object(a.G)(this.timeEntry.description,this.toaster,this.translateService),this.entryHelper.validateDescription(this.timeEntry.description)?this.trackerService.updateDescription(this.timeEntry.id,this.timeEntry.description).pipe(Object(o.a)(this.unsubscribe$)).subscribe(()=>{}):this.timeEntry.description=this.backupDescription}selectProjectAndTask(e){Object(a.E)(this.timeEntry,e,this.workspaceService.getLocalDefaultWorkspace());const t=this.timeEntry.billable;this.trackerService.updateProjectAndTask(this.timeEntry).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.timeEntry.billable=e.billable,this.timeEntry.updateHourlyRateAndEarned({hourlyRate:e.hourlyRate&&e.hourlyRate.amount,costRate:e.costRate&&e.costRate.amount,type:this.amountOptions[0]}),this.onEarnedChange.emit(),t!==this.timeEntry.billable&&this.totalInfo.changeBillableTime({duration:this.timeEntry.timeInterval.duration,isBillable:this.timeEntry.billable}),this.timeEntry.customFieldValues=e.customFieldValues.map(e=>new m.a(e)),this.cd.markForCheck()})}selectTags(e){this.entryHelper.validateTag(e)&&(this.timeEntry.tags=e,this.cd.markForCheck(),this.trackerService.updateTags(this.timeEntry.id,e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{}))}changeBillable(e){if(this.timeEntry.billable===e)return;this.timeEntry.billable=e;const t=this.timeEntry.timeInterval.duration;this.trackerService.updateBillable(this.timeEntry.id,e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(i=>{this.timeEntry.billable=i.billable,this.timeEntry.updateHourlyRateAndEarned({hourlyRate:i.hourlyRate&&i.hourlyRate.amount,costRate:i.costRate&&i.costRate.amount,type:this.amountOptions[0]}),this.totalInfo.changeBillableTime({duration:t,isBillable:e}),this.onEarnedChange.emit(),this.cd.markForCheck()})}setIsSelected(e){this.disableEdit||(this.timeEntry.bulkEdit=e,this.cd.markForCheck())}dateTimeChanged(e){const t=new u.a(this.timeEntry.timeInterval),i=this.timeEntry.billable;this.timeEntry.timeInterval=e,this.trackerService.editTimeInterval(this.timeEntry.id,e).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.timeEntry.timeInterval=e.timeInterval;const n=new u.a(e.timeInterval);this.totalInfo.entryDurationChanged(t,n,i),this.timeEntry.refreshEarned(this.amountOptions[0]),this.onEarnedChange.emit(),this.cd.markForCheck()},e=>{this.timeEntry.timeInterval=t,this.cd.markForCheck()})}openDeleteModal(e){this.modalService.open(e,{centered:!0})}confirmDelete(e){this.inProgress=!0,this.trackerService.deleteTimeEntry(this.timeEntry).pipe(Object(o.a)(this.unsubscribe$)).subscribe(()=>{this.inProgress=!1,e.close(),this.onDelete.emit(this.timeEntry)},()=>{this.inProgress=!1,e.close()})}duplicateEntry(e){this.showUpgradeToEnable?e.isOpen()?e.close():e.open():this.reportService.duplicateTimeEntry(this.timeEntry).pipe(Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.onDuplicate.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(E.a),n.Rb(n.h),n.Rb(r.a),n.Rb(c.a),n.Rb(w.q),n.Rb(b.a),n.Rb(l.a),n.Rb(d.a),n.Rb(p.a),n.Rb(v.a),n.Rb(S.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["detailed-row"],["","detailed-row",""]],viewQuery:function(e,t){var i;1&e&&n.gd(G,!0),2&e&&n.Kc(i=n.kc())&&(t.dropdownItems=i.first)},inputs:{hasAddTimeForOthersFeature:"hasAddTimeForOthersFeature",managedUsers:"managedUsers",totalInfo:"totalInfo",isDesktop:"isDesktop",timeEntry:"timeEntry",projectData:"projectData",isRounding:"isRounding",isAdminOrOwner:"isAdminOrOwner",isTeamManager:"isTeamManager",canTeamManagerEditEntry:"canTeamManagerEditEntry",disableEdit:"disableEdit",sharedReport:"sharedReport",onlyAdminsSeeBillableRates:"onlyAdminsSeeBillableRates",expandAll:"expandAll",amountOptions:"amountOptions",format:"format",customFields:"customFields",disableManualMode:"disableManualMode",dateFormat:"dateFormat",timeFormat:"timeFormat",timeZone:"timeZone",invoicingEnabled:"invoicingEnabled",activeBillableHours:"activeBillableHours",onlyAdminCanSeeAndChangeBillable:"onlyAdminCanSeeAndChangeBillable",currency:"currency"},outputs:{onSelectChange:"onSelectChange",onDelete:"onDelete",onDuplicate:"onDuplicate",onEarnedChange:"onEarnedChange"},decls:23,vars:28,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","isExpanded","templates"],["responsive",""],["col1",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["col8",""],["deleteModal",""],["popContent",""],["popContentAddTime",""],[1,"cl-d-lg-custom-flex","cl-align-items-center","cl-w-100","cl-mr-n4","cl-mr-lg-n3"],[1,"cl-d-flex","cl-align-items-center","cl-reports-desc"],[4,"ngIf"],[1,"cl-fake-input-wrapper","cl-cut-text","cl-w-100","cl-mr-2"],["type","text","tabindex","0","autocomplete","off","spellcheck","true",1,"cl-form-control","cl-input-description",3,"placeholder","disabled","readOnly","ngModel","focus","ngModelChange","change","keyup.enter"],["description",""],[1,"cl-form-control","cl-fake-input"],[1,"cl-mr-0","cl-mr-md-n1","cl-mr-lg-n2"],["placement","bottom",3,"ngbTooltip","disable","format","timeInterval","timeChanged",4,"ngIf"],[1,"cl-d-flex","cl-cut-text-wrapper","cl-pr-4","cl-pr-lg-custom-0","cl-my-1","cl-my-lg-custom-0","cl-reports-project"],["tabCell","",1,"cl-dropdown","cl-dropdown-large","cl-cut-text-wrapper",3,"dropdownKey"],["project-picker-label","",1,"cl-cut-text","cl-w-100-hidden",3,"isDisabled","project","task","projectData","workspace"],["openUpAtBottom","","class","cl-dropdown-menu","resizeable","",3,"selectedProject","selectedTask","selectedUserId","hideWorkspaces","selectedProjectAndTask","onResize",4,"dropdownKeyContent"],["tabCell","",1,"cl-pl-lg-custom-1","cl-px-lg-custom-2","cl-reports-tags","cl-relative",3,"dropdownKey"],["dropdownKeyButton","","tabindex","0",1,"cl-d-flex","cl-justify-content-lg-custom-end","pointer",3,"tags","hideAddingTags"],["openUpAtBottom","","resizeable","","class","cl-dropdown-menu cl-entry-tag-dropdown cl-lg-custom-down-l-0",3,"resizeableName","resizeToLeft","entryTags","close",4,"dropdownKeyContent"],["class","cl-badge-status-green cl-badge-approve cl-text-capitalize cl-mr-2 cl-pointer-events-all",3,"title",4,"ngIf"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"disabled","id","ngModel","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],["placement","bottom",3,"ngbTooltip","disable","format","timeInterval","timeChanged"],["openUpAtBottom","","resizeable","",1,"cl-dropdown-menu",3,"selectedProject","selectedTask","selectedUserId","hideWorkspaces","selectedProjectAndTask","onResize"],["projectPicker",""],["openUpAtBottom","","resizeable","",1,"cl-dropdown-menu","cl-entry-tag-dropdown","cl-lg-custom-down-l-0",3,"resizeableName","resizeToLeft","entryTags","close"],[1,"cl-badge-status-green","cl-badge-approve","cl-text-capitalize","cl-mr-2","cl-pointer-events-all",3,"title"],[1,"cl-component-divided-left","cl-cut-text","cl-w-100"],[1,"cl-w-100","cl-text-center","cl-text-lg-left","cl-text-lg-custom-right"],[4,"ngIf","ngIfElse"],["amountTemplate",""],[1,"cl-component-divided-left",3,"disableEdit","billable","userCurrency","changed"],["class","cl-dropdown",4,"ngIf","ngIfElse"],["usersDropdownTemplate",""],[1,"cl-dropdown"],[1,"cl-component-divided-left","cl-w-100"],[1,"cl-cut-text"],["triggers","manual","placement","left","container","body",3,"ngbPopover"],["changeUserPopover","ngbPopover"],[1,"cl-component-divided-left","cl-d-flex","cl-d-report-user-dropdown",3,"enableSearch","list","type","filterQuery","placeholder","initLabel","itemLabel","value","filterOptions","offlineSearch","setFixedWidth","onFilterOptionChange","onChanged","loadMore","onOpen"],["dropdown",""],["placement","bottom",1,"cl-d-flex","cl-justify-content-between",3,"ngbTooltip","textualDate","disableEdit","removeOpacity","mode","dateTime","timeFormat","dateFormat","timeZone","pickedDate"],[1,"cl-component-divided-left","cl-align-self-center","cl-d-flex"],["placement","bottom",3,"ngbTooltip","disable","removeOpacity","format","timeInterval","timeChanged"],["class","cl-text-center",4,"ngIf","ngIfElse"],["optionsTemplate",""],[1,"cl-text-center"],["src","assets/ui-icons/checkmark-green-circle.svg",3,"title",4,"ngIf","ngIfElse"],["lockIconTemplate",""],["src","assets/ui-icons/checkmark-green-circle.svg",3,"title"],["src","assets/images/ui-icons/locked.svg",3,"title"],["dropdownKey","","tabCell","",1,"cl-dropdown"],["dropdownKeyButton","","tabindex","0",1,"pointer","cl-non-selectable","cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["openUpAtBottom","","class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownKeyContent"],["tabFocus","","tabindex","0"],["tabFocusDuplicate",""],["openUpAtBottom","",1,"cl-dropdown-menu","cl-dropdown-menu-right"],["class","cl-dropdown-item","triggers","manual","placement","left","container","body","tabindex","-1",3,"ngbPopover","keyup.enter","keyup.space","click",4,"ngIf"],["tabindex","-1","clickCloseDropdown","",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],["triggers","manual","placement","left","container","body","tabindex","-1",1,"cl-dropdown-item",3,"ngbPopover","keyup.enter","keyup.space","click"],["featurePopover","ngbPopover"],[3,"title","inProgress","isDanger","btnText","confirmed","close"],["doNotCloseDropdown","",3,"routerLink","click"],["doNotCloseDropdown","",3,"routerLink","queryParams","click"]],template:function(e,t){if(1&e&&(n.Xc(0,U,1,0,"ng-container",0),n.Sb(1,"responsive-row",1,2),n.Xc(3,K,19,20,"ng-template",null,3,n.Yc),n.Xc(5,Q,5,3,"ng-template",null,4,n.Yc),n.Xc(7,ee,1,3,"ng-template",null,5,n.Yc),n.Xc(9,ne,3,2,"ng-template",null,6,n.Yc),n.Xc(11,se,2,11,"ng-template",null,7,n.Yc),n.Xc(13,re,3,7,"ng-template",null,8,n.Yc),n.Xc(15,he,3,2,"ng-template",null,9,n.Yc),n.Xc(17,pe,5,11,"ng-template",null,10,n.Yc),n.Xc(19,fe,5,8,"ng-template",null,11,n.Yc),n.Xc(21,ge,5,10,"ng-template",null,12,n.Yc)),2&e){const e=n.Lc(2),i=n.Lc(4),s=n.Lc(6),r=n.Lc(8),o=n.Lc(10),a=n.Lc(12),c=n.Lc(14),l=n.Lc(16);n.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.Bc(5,ve,t.labels)),n.Cb(1),n.wc("isDesktop",t.isDesktop)("isExpanded",t.expandAll)("templates",t.activeBillableHours?t.onlyAdminCanSeeAndChangeBillable&&!t.isAdminOrOwner?n.Gc(13,Ee,i,s,o,a,c,l):n.Hc(20,we,i,s,r,o,a,c,l):n.Fc(7,Ce,i,o,a,c,l))}},directives:[y.B,O.a,y.u,A.c,A.s,A.v,k.a,T.a,D.a,I.a,_.a,A.a,R.a,w.bb,L.a,x.a,P.a,w.M,j.a,M.a,X.a,F.a,W.g],pipes:[S.e,B.a,N.a],encapsulation:2,changeDetection:0}),e})()},AY7I:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{static required(e){return!e.value||"string"==typeof e.value&&!e.value.trim()?{required:!0}:null}static requiredFalse(e){return e.value?{requiredFalse:!0}:null}static differentThan(e){return t=>t.value===e?{differentThan:!0}:null}static minLength(e){return t=>!t.value||"string"==typeof t.value&&t.value.trim().length<e?{minlength:!0}:null}static maxLength(e){return t=>t.value&&"string"==typeof t.value&&t.value.trim().length>e?{maxlength:!0}:null}static minAmount(e){return t=>t.value&&t.value.length<e?{minamount:!0}:null}static maxAmount(e){return t=>t.value&&t.value.length>e?{maxamount:!0}:null}static domain(){return e=>{if(e.value){const t=e.value;if(!new RegExp("^[0-9A-Za-z]+$").test(t))return{domain:!0}}return null}}}},AYje:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("tk/3"),s=i("DVUX"),r=i("1Tmk"),o=i("XNiG"),a=i("lJxs"),c=i("vkgz"),l=i("X2fY"),u=i("kGbF"),d=i("fkOE"),h=i("fXoL"),p=i("sYmb");let b=(()=>{class e{constructor(e,t,i,n){this.http=e,this.toaster=t,this.workspaceService=i,this.translateService=n,this.newExpense=new o.a}create(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=new FormData;return i.append("userId",e.userId),i.append("date",e.date),i.append("projectId",e.projectId),i.append("categoryId",e.categoryId),i.append("notes",e.notes),i.append("amount",e.quantity.toString()),i.append("billable",e.billable.toString()),e.file&&i.append("file",e.file),this.http.post(`/workspaces/${t}/expenses`,i).pipe(Object(a.a)(e=>(this.toaster.pop("success",this.translateService.instant("EXPENSES.CREATE.MODAL.SUCCESS_MESSAGE")),new l.a(e))),Object(c.a)(e=>{this.newExpense.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.CREATE.MODAL.FAILED_MESSAGE"))))}getExpenses(e){var t,i;const s=this.workspaceService.getDefaultWorkspaceId();let r=(new n.h).append("page",(null===(t=e.page)||void 0===t?void 0:t.toString())||"1").append("page-size",(null===(i=e.pageSize)||void 0===i?void 0:i.toString())||"50");return e.userId&&(r=r.append("userId",e.userId)),this.http.get(`/workspaces/${s}/expenses`,{params:r}).pipe(Object(a.a)(e=>({expenses:{expenses:e.expenses.expenses.map(e=>new l.a(e)),count:e.expenses.count},dailyTotals:e.dailyTotals,weeklyTotals:e.weeklyTotals}),e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.CREATE.MODAL.FAILED_MESSAGE"))))}delete(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/expenses/${e}`).pipe(Object(a.a)(()=>{this.toaster.pop("success",this.translateService.instant("EXPENSES.DELETE.MODAL.SUCCESS_MESSAGE"))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.DELETE.MODAL.FAILED_MESSAGE"))))}edit(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=new FormData;return n.append("userId",e.userId),n.append("date",e.date),n.append("projectId",e.projectId),n.append("categoryId",e.categoryId),n.append("notes",e.notes),n.append("amount",e.quantity.toString()),n.append("billable",e.billable.toString()),n.append("changeFields",t.toString()),e.file&&n.append("file",e.file),this.http.put(`/workspaces/${i}/expenses/${e.id}`,n).pipe(Object(a.a)(e=>(this.toaster.pop("success",this.translateService.instant("EXPENSES.EDIT.MODAL.SUCCESS_MESSAGE")),new l.a(e))),Object(c.a)(e=>{this.newExpense.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.EDIT.MODAL.FAILED_MESSAGE"))))}downloadReceipt(e,t,i,n){const s=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${s}/expenses/${e}/files/${t}`,{responseType:"blob"}).pipe(Object(a.a)(e=>{const t=new Blob([e],{type:i});Object(u.b)(t,n)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("EXPENSES.FILE_DOWNLOAD.FAILED_MESSAGE"))))}getEntryIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams();return this.http.post(`${d.i}/workspaces/${t}/reports/expenses/detailed/ids`,i).pipe(Object(c.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("REPORTS.MESSAGES.GET_ENTRY_IDS_FAIL"))),Object(a.a)(e=>e.expenseIds))}deleteManyExpense(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/expenses`,{headers:null,body:{ids:e}}).pipe(Object(c.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("REPORTS.MESSAGES.GET_ENTRY_IDS_FAIL"))))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(n.c),h.fc(s.d),h.fc(r.a),h.fc(p.f))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},B01t:function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return a}));var n=i("fXoL"),s=(i("eHjp"),i("EVdn")),r=i.n(s);let o=(()=>{let e=class{constructor(){this.settings={}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),a=(()=>{let e=class{constructor(e,t,i){this.input=e,this.config=t,this.differs=i,this.targetOptions={},this._differ={},this.options={},this.selected=new n.n,this.cancelDaterangepicker=new n.n,this.applyDaterangepicker=new n.n,this.hideCalendarDaterangepicker=new n.n,this.showCalendarDaterangepicker=new n.n,this.hideDaterangepicker=new n.n,this.showDaterangepicker=new n.n,this._differ.options=this.differs.find(this.options).create(),this._differ.settings=this.differs.find(this.config.settings).create()}ngAfterViewInit(){this.render(),this.attachEvents()}ngDoCheck(){let e=this._differ.options.diff(this.options),t=this._differ.settings.diff(this.config.settings);(e||t)&&(this.render(),this.attachEvents(),this.activeRange&&this.datePicker&&(this.datePicker.setStartDate(this.activeRange.start),this.datePicker.setEndDate(this.activeRange.end)))}ngOnDestroy(){this.destroyPicker()}render(){if(this.targetOptions=Object.assign({},this.config.settings,this.options),r()(this.input.nativeElement).daterangepicker(this.targetOptions,this.callback.bind(this)),this.options.customClasses&&this.options.customClasses.length)for(let e of this.options.customClasses)this.datePicker=r()(this.input.nativeElement).data("daterangepicker").container.addClass(e);else this.datePicker=r()(this.input.nativeElement).data("daterangepicker")}callback(e,t,i){this.activeRange={start:e,end:t,label:i},this.selected.emit(this.activeRange)}destroyPicker(){try{r()(this.input.nativeElement).data("daterangepicker").remove()}catch(e){console.log(e.message)}}attachEvents(){r()(this.input.nativeElement).on("cancel.daterangepicker",(e,t)=>{this.cancelDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("apply.daterangepicker",(e,t)=>{this.applyDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("hideCalendar.daterangepicker",(e,t)=>{this.hideCalendarDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("showCalendar.daterangepicker",(e,t)=>{this.showCalendarDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("hide.daterangepicker",(e,t)=>{this.hideDaterangepicker.emit({event:e,picker:t})}),r()(this.input.nativeElement).on("show.daterangepicker",(e,t)=>{this.showDaterangepicker.emit({event:e,picker:t})})}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(o),n.Rb(n.t))},e.\u0275dir=n.Mb({type:e,selectors:[["","daterangepicker",""]],inputs:{options:"options"},outputs:{selected:"selected",cancelDaterangepicker:"cancelDaterangepicker",applyDaterangepicker:"applyDaterangepicker",hideCalendarDaterangepicker:"hideCalendarDaterangepicker",showCalendarDaterangepicker:"showCalendarDaterangepicker",hideDaterangepicker:"hideDaterangepicker",showDaterangepicker:"showDaterangepicker"}}),e})(),c=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[]]}),e})()},B0km:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("lGQG"),s=i("pLZG"),r=i("IzEk"),o=i("q92s"),a=i("lJxs"),c=i("fXoL"),l=i("tyNb");let u=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(){return this.checkIsAdmin()}checkIsAdmin(){let e;const t=this.authService.permissionData$.pipe(Object(s.a)(e=>null!==e),Object(r.a)(1));t.subscribe(()=>e=!0);const i=this.authService.permissionFailed$,n=t.pipe(Object(o.a)(i),Object(r.a)(1));return e||this.authService.getPermissionsForUser(),n.pipe(Object(a.a)(e=>{const t=null==e?void 0:e.isAdminOrOwner;return t||this.router.navigate(["/tracker"]),t}))}}return e.\u0275fac=function(t){return new(t||e)(c.fc(l.d),c.fc(n.a))},e.\u0275prov=c.Nb({token:e,factory:e.\u0275fac}),e})()},B1Fc:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("Ymxs"),r=i("3Pt+");let o=(()=>{class e{constructor(e,t,i,s,r){this.element=e,this.renderer=t,this.viewContainer=i,this.toaster=s,this.model=r,this.errorToast=!0,this.errorHighlight=!1,this.invalidInput=new n.n,this.errorClass="cl-is-invalid",this.onFocus=()=>{this.renderer.removeClass(this.element.nativeElement,this.errorClass)}}ngOnInit(){this.errorHighlight&&(this.listenerFn=this.renderer.listen(this.element.nativeElement,"focus",this.onFocus))}ngOnDestroy(){this.listenerFn&&this.listenerFn()}clearErrors(){this.templateError&&this.viewContainer.clear(),this.renderer.removeClass(this.element.nativeElement,this.errorClass)}handleError(e,t){this.errorToast&&!t&&this.toaster.pop("error",e),this.errorHighlight&&this.renderer.addClass(this.element.nativeElement,this.errorClass),this.templateError&&this.viewContainer.createEmbeddedView(this.templateError),this.invalidInput.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.l),n.fc(n.F),n.fc(n.P),n.fc(s.a),n.fc(r.v))},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})()},BO2n:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.WORKSPACE="WORKSPACE",e.WORKSPACE_MEMBER="WORKSPACE_MEMBER",e.PROJECT="PROJECT",e.PROJECT_MEMBER="PROJECT_MEMBER",e.TASK="TASK",e}({})},BhhM:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n){return t&&i?e.filter(e=>{return n=i(e),s=t,!(!n||!s)&&-1!==n.toLowerCase().indexOf(s.toLowerCase());var n,s}):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"filter",type:e,pure:!0}),e})()},"C+R2":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("fXoL"),s=(i("NTZZ"),i("XNiG")),r=i("lvCY"),o=i("XLnJ"),a=i("iO9P"),c=i("uX6w"),l=i("vqWo"),u=i("ofXK"),d=i("AIwn"),h=i("pOhx"),p=i("aDua");function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"tr",10),n.Xb(1,"td",11),n.Xb(2,"custom-fields-values",12,13),n.jc("entryChanged",(function(t){return n.Oc(e),n.nc().$implicit.customFieldValues=t})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(3),t=n.nc().$implicit,i=n.nc();n.Cb(1),n.Hb("cl-remove-padding-and-border",!e.customFieldValuesModified.length),n.Cb(1),n.wc("timeEntryId",t.id)("customFields",i.customFields)("disableEdit",!0)("projectId",null==t.project?null:t.project.id)("customFieldValues",t.customFieldValues)}}function f(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",7),n.Sb(2,"tr",8),n.Xc(3,b,4,7,"tr",9),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.nc();n.Cb(2),n.wc("onlyAdminsSeeBillableRates",i.report.workspace.onlyAdminsSeeBillableRates)("isAdminOrOwner",i.isAdminOrOwner)("totalInfo",i.detailedResponse.totals)("timeEntry",e)("customFields",i.customFields)("expandAll",i.expandAll)("format",i.format)("projectData",i.projectData)("disableEdit",!0)("sharedReport",!0)("currency",i.report.workspace.currency)("isRounding",i.report.filters.rounding)("amountOptions",i.report.filters.amountOptions)("dateFormat",i.report.filters.dateFormat||i.report.user.dateFormat)("timeFormat",i.report.filters.timeFormat||i.report.user.timeFormat)("timeZone",i.report.filters.timeZone||i.report.user.timeZone)("isDesktop",i.isDesktop)("activeBillableHours",i.report.activeBillableHours)("onlyAdminCanSeeAndChangeBillable",i.report.onlyAdminsCanChangeBillableStatus&&!i.report.isAdminOrOwner),n.Cb(1),n.wc("ngIf",null==i.customFields?null:i.customFields.length)}}function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"pager",14),n.jc("pageChanged",(function(t){return n.Oc(e),n.nc().setPagination(t)}))("limitChanged",(function(t){return n.Oc(e),n.nc().setPagination(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("page",e.pagination.page)("limit",e.pagination.pageSize)("total",e.detailedResponse.totals.entriesCount)}}let g=(()=>{class e{constructor(){this.sortingUpdated=new n.n,this.paginationUpdated=new n.n,this.export=new n.n,this.pagination={},this.ExportType=o.a,this.unsubscribe$=new s.a}set detailedResponse(e){e&&(this._detailedResponse=e,this.initData())}get detailedResponse(){return this._detailedResponse}ngOnInit(){this.initData(),this.showPagination=this.detailedResponse.timeentries.length>=r.j||this.detailedResponse.timeentries.length>=this.pagination.pageSize}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}initData(){this.projectData=new a.a(null,null),this.sortData={sortOrder:this.report.filters.sortOrder,sortColumn:this.report.filters.sortColumn.toString()},this.pagination.page=this.report.filters.page,this.pagination.pageSize=this.report.filters.pageSize}setPagination(e){this.pagination.page=e.page||this.pagination.page,this.pagination.pageSize=e.limit||this.pagination.pageSize,this.paginationUpdated.emit(this.pagination)}columnOrderChanged(e){this.sortingUpdated.emit(e)}expandAllRows(e){this.expandAll=e}exportReport(e){this.export.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["shared-report-detailed"]],inputs:{report:"report",isAdminOrOwner:"isAdminOrOwner",activeBillableHours:"activeBillableHours",onlyAdminsCanChangeBillableStatus:"onlyAdminsCanChangeBillableStatus",currency:"currency",format:"format",isDesktop:"isDesktop",detailedResponse:"detailedResponse",customFields:"customFields"},outputs:{sortingUpdated:"sortingUpdated",paginationUpdated:"paginationUpdated",export:"export"},decls:9,vars:25,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0",3,"amountOptions","format","totalNumberOfEntries","isCostRateActive","isRounding","totalInfo","canSeeRates","workspaceInfo","isShared","onlyAdminCanSeeAndChangeBillable","isAdminOrOwner","exportAsPdf","exportAsCsv","exportAsExcel"],[1,"cl-page-component-wrapper"],[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-responsive","cl-text-gray-6","cl-detailed-reports-table"],["detailed-header","",3,"numberOfEntries","isDesktop","amountOptions","sortOrder","sortColumn","activeBillableHours","isAdminOrOwner","onlyAdminCanSeeAndChangeBillable","onExpandAll","onChange"],["detailedHeader",""],[4,"ngFor","ngForOf"],[3,"page","limit","total","pageChanged","limitChanged",4,"ngIf"],[1,"cl-row-hover-shadow","cl-shared-reports"],["detailed-row","",3,"onlyAdminsSeeBillableRates","isAdminOrOwner","totalInfo","timeEntry","customFields","expandAll","format","projectData","disableEdit","sharedReport","currency","isRounding","amountOptions","dateFormat","timeFormat","timeZone","isDesktop","activeBillableHours","onlyAdminCanSeeAndChangeBillable"],["class","cl-disabled",4,"ngIf"],[1,"cl-disabled"],["colspan","8",1,"cl-py-0","cl-border-top-0","cl-detailed-reports-custom-fields-row"],[3,"timeEntryId","customFields","disableEdit","projectId","customFieldValues","entryChanged"],["ref",""],[3,"page","limit","total","pageChanged","limitChanged"]],template:function(e,t){1&e&&(n.Xb(0,"table-info",0),n.jc("exportAsPdf",(function(){return t.exportReport(t.ExportType.PDF)}))("exportAsCsv",(function(){return t.exportReport(t.ExportType.CSV)}))("exportAsExcel",(function(){return t.exportReport(t.ExportType.XLSX)})),n.Wb(),n.Xb(1,"div",1),n.Xb(2,"table",2),n.Xb(3,"thead"),n.Xb(4,"tr",3,4),n.jc("onExpandAll",(function(e){return t.expandAllRows(e)}))("onChange",(function(e){return t.columnOrderChanged(e)})),n.Wb(),n.Wb(),n.Xb(6,"tbody"),n.Xc(7,f,4,20,"ng-container",5),n.Wb(),n.Wb(),n.Wb(),n.Xc(8,m,1,3,"pager",6)),2&e&&(n.wc("amountOptions",t.report.filters.amountOptions)("format",t.format)("totalNumberOfEntries",t.detailedResponse.totals.entriesCount)("isCostRateActive",t.report.workspace.costRateActive)("isRounding",t.report.filters.rounding)("totalInfo",t.detailedResponse.totals)("canSeeRates",t.report.filters.amountOptions.length>0)("workspaceInfo",t.report.workspace)("isShared",!0)("onlyAdminCanSeeAndChangeBillable",t.report.onlyAdminsCanChangeBillableStatus)("isAdminOrOwner",t.report.isAdminOrOwner),n.Cb(2),n.Hb("cl-billable-not-active",!t.report.activeBillableHours)("cl-only-admin",t.report.onlyAdminsCanChangeBillableStatus&&!t.report.isAdminOrOwner),n.Cb(2),n.wc("numberOfEntries",null==t.detailedResponse.timeentries?null:t.detailedResponse.timeentries.length)("isDesktop",t.isDesktop)("amountOptions",t.report.filters.amountOptions)("sortOrder",t.report.filters.sortOrder)("sortColumn",t.report.filters.sortColumn)("activeBillableHours",t.report.activeBillableHours)("isAdminOrOwner",t.isAdminOrOwner)("onlyAdminCanSeeAndChangeBillable",t.report.onlyAdminsCanChangeBillableStatus&&!t.report.isAdminOrOwner),n.Cb(3),n.wc("ngForOf",t.detailedResponse.timeentries),n.Cb(1),n.wc("ngIf",t.showPagination))},directives:[c.a,l.a,u.t,u.u,d.a,h.a,p.a],encapsulation:2}),e})()},C0N5:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("fXoL"),s=i("XNiG"),r=i("Kj3r"),o=i("T+Hu"),a=i("sYmb"),c=i("ofXK"),l=i("dlKe"),u=i("3Pt+");const d=["filterDropdown"],h=["filterInput"];function p(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",5),n.Xb(1,"input",6,7),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().nameFilter=t}))("ngModelChange",(function(t){return n.Oc(e),n.nc().inputValueChanged(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("placeholder",e.placeholder)("ngModel",e.nameFilter)}}function b(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",23),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.bd(" ",n.pc(3,1,"GLOBAL.ACTIVE_LABEL")," "))}function f(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",23),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.bd(" ",n.pc(3,1,"GLOBAL.INACTIVE_LABEL")," "))}function m(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",23),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.bd(" ",n.pc(3,1,"GLOBAL.ARCHIVED_LABEL")," "))}function g(e,t){1&e&&(n.Xb(0,"span",23),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.ACTIVE_AND_INACTIVE_LABEL")," "))}function v(e,t){1&e&&(n.Xb(0,"span",23),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.ACTIVE_AND_ARCHIVED_LABEL")," "))}function C(e,t){if(1&e&&(n.Vb(0),n.Xc(1,g,3,3,"span",24),n.Xc(2,v,3,3,"span",24),n.Ub()),2&e){const e=n.nc(3);n.Cb(1),n.wc("ngIf",!e.statusHasArchived),n.Cb(1),n.wc("ngIf",e.statusHasArchived)}}function E(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",17),n.Xb(1,"a",18),n.jc("click",(function(){return n.Oc(e),n.nc(2).toggleStatusFilter()})),n.Vb(2,19),n.Xc(3,b,4,3,"ng-container",20),n.Xc(4,f,4,3,"ng-container",20),n.Xc(5,m,4,3,"ng-container",20),n.Xc(6,C,3,2,"ng-container",21),n.Ub(),n.Sb(7,"img",22),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngSwitch",e.query.status),n.Cb(1),n.wc("ngSwitchCase","ACTIVE"),n.Cb(1),n.wc("ngSwitchCase","INACTIVE"),n.Cb(1),n.wc("ngSwitchCase","ARCHIVED")}}function w(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc(2).filterByStatus("INACTIVE")})),n.Xb(1,"div",15),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-active",e.query&&"INACTIVE"==e.query.status),n.Cb(2),n.bd(" ",n.pc(3,3,"GLOBAL.INACTIVE_LABEL")," ")}}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc(2).filterByStatus("ARCHIVED")})),n.Xb(1,"div",15),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-active",e.query&&"ARCHIVED"==e.query.status),n.Cb(2),n.bd(" ",n.pc(3,3,"GLOBAL.ARCHIVED_LABEL")," ")}}function y(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",8),n.Xb(2,"div",9),n.Xb(3,"div",10),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xc(6,E,8,4,"div",11),n.Wb(),n.Wb(),n.Xb(7,"div",12),n.Xb(8,"div",13),n.Xb(9,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus("ACTIVE")})),n.Xb(10,"div",15),n.Zc(11),n.oc(12,"translate"),n.Wb(),n.Wb(),n.Xc(13,w,4,5,"a",16),n.Xc(14,S,4,5,"a",16),n.Xb(15,"a",14),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus(null)})),n.Xb(16,"div",15),n.Zc(17),n.oc(18,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc();n.Cb(4),n.bd(" ",n.pc(5,11,"GLOBAL.SHOW_LABEL")," "),n.Cb(2),n.wc("ngIf",e.query),n.Cb(1),n.wc("hidden",e.filterHidden),n.Cb(2),n.Hb("cl-active",e.query&&"ACTIVE"==e.query.status),n.Cb(2),n.bd(" ",n.pc(12,13,"GLOBAL.ACTIVE_LABEL")," "),n.Cb(2),n.wc("ngIf",!e.statusHasArchived),n.Cb(1),n.wc("ngIf",e.statusHasArchived),n.Cb(1),n.Hb("cl-active",!e.query.status||"ALL"==e.query.status),n.Cb(2),n.bd(" ",n.pc(18,15,"GLOBAL.ALL_LABEL")," ")}}function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"input",30),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).selectedAll=t}))("ngModelChange",(function(){return n.Oc(e),n.nc(2).toggleSelectAll()})),n.Wb(),n.Xb(3,"label",31),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngModel",e.selectedAll),n.Cb(2),n.bd(" ",n.pc(5,2,"GLOBAL.SELECT_ALL_LABEL")," ")}}const A=function(e){return{entity:e}};function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"input",32),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).withoutSelected=t})),n.Wb(),n.Xb(3,"label",33),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngModel",e.withoutSelected),n.Cb(2),n.bd(" ",n.qc(5,2,"PROJECTS.CHECKBOX_FILTER_DROPDOWN.EXCLUDE_ENTRY_LABEL",n.Bc(5,A,e.entity))," ")}}function T(e,t){if(1&e&&(n.Xb(0,"div",38),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.bd(" ",n.pc(2,1,e.label)," ")}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",39),n.Xb(1,"div",29),n.Xb(2,"input",40),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i}))("ngModelChange",(function(i){n.Oc(e);const s=t.index,r=n.nc(2).index;return n.nc(2).selected(i,r,s)})),n.Wb(),n.Xb(3,"label",41),n.Xb(4,"div",15),n.Zc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(2).index;n.Cb(2),n.wc("id","customCheck2-tt-1-"+s+i)("ngModel",e.selected),n.Cb(1),n.wc("for","customCheck2-tt-1-"+s+i),n.Cb(2),n.bd(" ",e.entity.name||e.entity.email," ")}}function I(e,t){if(1&e&&(n.Xb(0,"div",35),n.Xc(1,T,3,3,"div",36),n.Xc(2,D,6,4,"div",37),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc(2);n.Cb(1),n.wc("ngIf",t.entityMap.length>1),n.Cb(1),n.wc("ngForOf",e.value)}}function _(e,t){if(1&e&&(n.Xb(0,"div"),n.Xc(1,I,3,2,"div",34),n.Wb()),2&e){const e=t.$implicit;n.Cb(1),n.wc("ngIf",e.value&&e.value.length>0)}}function R(e,t){if(1&e&&(n.Vb(0),n.Xc(1,O,6,4,"div",25),n.Xc(2,k,6,7,"div",25),n.Xb(3,"div",26),n.Xc(4,_,2,1,"div",27),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.showSelectAll),n.Cb(1),n.wc("ngIf",e.hasWithoutEntity),n.Cb(2),n.wc("ngForOf",e.entityMap)}}function L(e,t){if(1&e&&(n.Xb(0,"div",42),n.Xb(1,"div",9),n.Zc(2),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(2),n.bd(" ",e.noResultMessage," ")}}let x=(()=>{class e{constructor(e,t){this.cd=e,this.translate=t,this.showSelectAll=!0,this._saveSelected=!1,this.refreshAfterStatusChanged=!1,this.showActiveArchived=!0,this.isUserDropdown=!1,this.showNameFilter=!0,this.emitSelected=new n.n,this.loadMore=new n.n,this.userFilterChanged=new n.n,this.clearSelectedList=new n.n,this.emitSelectionOfAllEntities=new n.n,this.filterHidden=!0,this.query={name:"",page:1,status:"ACTIVE"},this.hasResults=!0,this.inputDebouncer=new s.a,this.statusHasArchived=!1,this.entryMapSelected=[],this.unselected=[]}set entityMap(e){if(this._entityMap=e,this.saveSelected)for(let t=0;t<this.entityMap.length;t++)this.entityMap[t]&&this.entryMapSelected[t]&&Array.isArray(this.entityMap[t].value)&&this.entityMap[t].value.length>0&&this.syncEntityMapWithSaved(!1);this.hasResults=this.entityMap.some(e=>Array.isArray(e.value)&&e.value.length>0),this.checkIfAllSelected(),this.cd.detectChanges()}get entityMap(){return this._entityMap}set saveSelected(e){this._saveSelected=e}get saveSelected(){return this._saveSelected}set queryStatus(e){this.query.status=e}ngOnInit(){this.noResultMessage=this.noResultMessage||this.translate.instant("PROJECTS.MESSAGES.NO_RESULT"),this.getEntityPlural(),this.saveSelected&&this.syncEntityMapWithSaved(!0),this.inputDebouncer.pipe(Object(r.a)(300)).subscribe(e=>{this.query.name=e,this.query.page=1,this.query.unselectedEntities=this.unselected.length?this.unselected.map(e=>e.entity.id):[],this.query.selectedAll=!(!this.showSelectAll||!this.hasResults)&&this.selectedAll,this.query.selectedWithout=this.withoutSelected,this.query.changedStatus=!1,this.userFilterChanged.emit(this.query)})}ngAfterViewInit(){this.showNameFilter&&this.filterInput.nativeElement.focus()}ngOnDestroy(){var e;this.emitSelected.emit({selectedAll:!(!this.showSelectAll||this.query.name||!this.hasResults)&&this.selectedAll,selectedWithout:this.withoutSelected,name:(null===(e=this.query.name)||void 0===e?void 0:e.trim())||"",status:this.query.status,entities:this.saveSelected&&this.entryMapSelected.length?this.entryMapSelected:this.entityMap,unselectedEntities:this.unselected.length?this.unselected.map(e=>e.entity.id):[]})}onScroll(){this.query.page=this.query.page+1,this.loadMore.emit(this.query)}inputValueChanged(e){this.inputDebouncer.next(e)}toggleSelectAll(){this.withoutSelected=this.hasWithoutEntity?!!this.selectedAll:this.withoutSelected,this.entityMap.forEach((e,t)=>{e.value.map((e,i)=>{e.selected=!!this.selectedAll,this.updateSelectedEntityMap(!!this.selectedAll,t,i)})}),this.emitSelectionOfAllEntities.emit(this.selectedAll),this.selectedAll||this.query.name||this.clearSelectedList.emit(!0)}selected(e,t,i){this.saveSelected&&this.updateSelectedEntityMap(e,t,i),this.showSelectAll&&this.checkIfAllSelected()}updateSelectedEntityMap(e,t,i){const n=this.entryMapSelected[t].value.findIndex(e=>e.entity.id===this.entityMap[t].value[i].entity.id),s=this.unselected.findIndex(e=>e.entity.id===this.entityMap[t].value[i].entity.id);e?(s>-1&&this.unselected.splice(s,1),-1===n&&this.entryMapSelected[t].value.push(this.entityMap[t].value[i])):(-1===s&&this.unselected.push(this.entityMap[t].value[i]),n>-1&&this.entryMapSelected[t].value.splice(n,1))}checkIfAllSelected(){if(!this.showSelectAll)return;const e=this.entityMap.every(e=>e.value.every(e=>!0===e.selected));e!==this.selectedAll&&this.emitSelectionOfAllEntities.emit(e)}getEntityPlural(){const e=this.entity.toLowerCase();this.entityInPlural="client"===e||"department"===e?this.entity+"s":this.entity,this.placeholder=this.placeholder?this.placeholder:`Find ${this.entityInPlural}...`}filterByStatus(e){this.query.changedStatus=!0,this.query.name="",this.query.status=e,this.query.page=1,this.query.unselectedEntities=this.unselected.length?this.unselected.map(e=>e.entity.id):[],this.withoutSelected=!1,this.refreshAfterStatusChanged&&this.entryMapSelected.forEach(e=>e.value=[]),this.toggleStatusFilter(),this.userFilterChanged.emit(this.query)}toggleStatusFilter(){this.filterHidden=!this.filterHidden}syncEntityMapWithSaved(e){for(let t=0;t<this.entityMap.length;t++)e&&(this.entryMapSelected[t]=Object(o.a)(this.entityMap[t].key,this.entityMap[t].label,[])),this.entityMap[t].value.forEach(e=>{let i=!1;this.entryMapSelected[t].value&&this.entryMapSelected[t].value.map(e=>e.entity.id).includes(e.entity.id)&&(e.selected=!0,i=!0),e.selected&&!i&&this.entryMapSelected[t].value.push(e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(a.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["checkbox-filter-dropdown"]],viewQuery:function(e,t){var i;1&e&&(n.gd(d,!0),n.gd(h,!0)),2&e&&(n.Kc(i=n.kc())&&(t.filterDropdown=i.first),n.Kc(i=n.kc())&&(t.filterInput=i.first))},inputs:{entity:"entity",hasWithoutEntity:"hasWithoutEntity",entityMap:"entityMap",withoutSelected:"withoutSelected",selectedAll:"selectedAll",showSelectAll:"showSelectAll",placeholder:"placeholder",saveSelected:"saveSelected",refreshAfterStatusChanged:"refreshAfterStatusChanged",showActiveArchived:"showActiveArchived",noResultMessage:"noResultMessage",queryStatus:"queryStatus",isUserDropdown:"isUserDropdown",showNameFilter:"showNameFilter",statusHasArchived:"statusHasArchived"},outputs:{emitSelected:"emitSelected",loadMore:"loadMore",userFilterChanged:"userFilterChanged",clearSelectedList:"clearSelectedList",emitSelectionOfAllEntities:"emitSelectionOfAllEntities"},decls:6,vars:7,consts:[["class","cl-dropdown-menu-header",4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["filterDropdown",""],[4,"ngIf"],["class","cl-dropdown-item",4,"ngIf"],[1,"cl-dropdown-menu-header"],["type","text",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],["filterInput",""],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],["class","cl-cut-text-wrapper",4,"ngIf"],["id","active-inactive-1",1,"cl-collapse",3,"hidden"],[1,"cl-collapse-content"],[1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],[1,"cl-cut-text"],["class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngIf"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["src","assets/ui-icons/chevron-down.svg"],[1,"cl-dropdown-item-expand","cl-cut-text"],["class","cl-dropdown-item-expand cl-cut-text",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-border-bottom cl-border-light",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],[4,"ngFor","ngForOf"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-border-bottom","cl-border-light"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","customCheckAll-1",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"ngModel","ngModelChange"],["for","customCheckAll-1",1,"cl-custom-control-label"],["type","checkbox","id","customCheck1-tt-1",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customCheck1-tt-1",1,"cl-custom-control-label"],["class","cl-dropdown-section",4,"ngIf"],[1,"cl-dropdown-section"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-dropdown-item"]],template:function(e,t){1&e&&(n.Xc(0,p,3,2,"div",0),n.Xb(1,"div",1,2),n.jc("scrolled",(function(){return t.onScroll()})),n.Xc(3,y,19,17,"ng-container",3),n.Xc(4,R,5,3,"ng-container",3),n.Xc(5,L,3,1,"div",4),n.Wb()),2&e&&(n.wc("ngIf",t.showNameFilter),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",t.showActiveArchived),n.Cb(1),n.wc("ngIf",t.hasResults),n.Cb(1),n.wc("ngIf",!t.hasResults))},directives:[c.u,l.a,u.c,u.s,u.v,c.y,c.z,c.A,c.t,u.a],pipes:[a.e],encapsulation:2,changeDetection:0}),e})()},C1xe:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ofXK"),s=i("3Pt+"),r=i("8pWl"),o=i("sYmb"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.a,o.d]]}),e})()},"CMn/":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("tyNb"),s=i("ofXK"),r=i("3Pt+"),o=i("9Trn"),a=i("sYmb"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[s.c,r.m,o.a,n.h,r.C,a.d]]}),e})()},CREi:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._client=e&&e.client,this._count=e&&e.projectsCount,this._projects=e&&e.projects}get client(){return this._client}get count(){return this._count}get projects(){return this._projects}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e}set projects(e){this._projects=e}set count(e){this._count=e}}},Cmuz:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("UMzN"),s=i("sNAh"),r=i("ZaaN");class o{constructor(e,t,i){this._id=e&&e.id,this._name=e&&e.name,this._hourlyRate=e&&new s.a(e.hourlyRate),this._memberships=e&&e.memberships,this._public=e&&e.public,this._color=e&&e.color,this._billable=e&&e.billable,this._client=e&&e.client&&new n.a(e.client),this._estimate=e&&new r.a(e.estimate),this._hours=t,this._archived=i,this._tasks=e&&e.tasks,this._favorite=e&&e.favorite,this._isSelected=!1}get name(){return this._name}set name(e){this._name=e}get id(){return this._id}set id(e){this._id=e}get hourlyRate(){return this._hourlyRate}set hourlyRate(e){this._hourlyRate=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e}get public(){return this._public}set public(e){this._public=e}get color(){return this._color}set color(e){this._color=e}get billable(){return this._billable}set billable(e){this._billable=e}get memberships(){return this._memberships}set memberships(e){this._memberships=e}get estimate(){return this._estimate}set estimate(e){this._estimate=e}get client(){return this._client}set client(e){this._client=e}get hours(){return this._hours}set hours(e){this._hours=e}get archived(){return this._archived}set archived(e){this._archived=e}get favorite(){return this._favorite}set favorite(e){this._favorite=e}get tasks(){return this._tasks}set tasks(e){this._tasks=e}}},Cpkn:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._billable=e&&e.billable,this._nonBillable=e&&e.nonBillable,this._taskStatus=e&&e.taskStatus,this._progress=e&&e.progress?e.progress:0,this._totalAmount=e&&e.totalAmount/100}get billable(){return this._billable}set billable(e){this._billable=e}get nonBillable(){return this._nonBillable}set nonBillable(e){this._nonBillable=e}get taskStatus(){return this._taskStatus}set taskStatus(e){this._taskStatus=e}get totalAmount(){return this._totalAmount}set totalAmount(e){this._totalAmount=e}get progress(){return this._progress}}},D0uv:function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var n=i("fXoL"),s=i("1G5W"),r=i("Kj3r"),o=i("XNiG"),a=(i("JBiw"),i("8+Zx")),c=i("cGux"),l=i("hkzH"),u=i("LfE4"),d=i("y+xF"),h=i("xoOP"),p=i("lvCY"),b=i("sYmb"),f=i("1YN2"),m=i("ofXK"),g=i("dlKe"),v=i("e0xV"),C=i("3Pt+");let E=(()=>{class e{transform(e,t,i){return t?e.filter(e=>e.key!==d.b):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"filterWithout",type:e,pure:!0}),e})();var w=i("okBH");const S=["scrollArea"];function y(e,t){1&e&&(n.Vb(0),n.Xb(1,"div",7),n.Xb(2,"div",8),n.Sb(3,"div",9),n.Wb(),n.Wb(),n.Sb(4,"div",10),n.Ub())}function O(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",11),n.Xb(2,"div",12),n.Xb(3,"input-search",13),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc();return i.searchValue=t,!i.offlineSearch&&i.searchChanged()})),n.Wb(),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc();n.Cb(3),n.wc("debounceTime",e.debounceSearch)("autofocus",!0)("search",e.searchValue)("placeholder",e.placeholder)}}function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",25),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(2).$implicit;return n.nc().selectFilter(s,i.value)})),n.Xb(1,"div",26),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(2).$implicit,s=n.nc();n.Hb("cl-active",e.value===s.checkboxValues.options[i.key]),n.Cb(2),n.ad(n.pc(3,3,e.label))}}function k(e,t){if(1&e&&(n.Xb(0,"div",22),n.Xb(1,"div",23),n.Xc(2,A,4,5,"a",24),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(2),n.wc("ngForOf",e.options)}}function T(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",14),n.Xb(2,"div",15),n.Xb(3,"div",16),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xb(6,"div",17),n.Xb(7,"a",18),n.jc("click",(function(){const e=t.$implicit;return e.isExpanded=!e.isExpanded})),n.Xb(8,"span",19),n.Zc(9),n.oc(10,"translate"),n.Wb(),n.Sb(11,"img",20),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xc(12,k,3,1,"div",21),n.Ub()),2&e){const e=t.$implicit,i=n.nc();n.Cb(4),n.ad(n.pc(5,3,"GLOBAL.SHOW_LABEL")),n.Cb(5),n.bd(" ",n.pc(10,5,e.getLabelOf(i.checkboxValues.options[e.key])||e.key)," "),n.Cb(3),n.wc("ngIf",e.isExpanded)}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",30),n.Xb(1,"div",31),n.Xb(2,"input",32),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).isIncludingNew=t}))("change",(function(){return n.Oc(e),n.nc(2).toggleAllChanged()})),n.Wb(),n.Xb(3,"label",33),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("indeterminate",!e.isSelectedAll&&(null==e.selectedData?null:e.selectedData.selected)>0&&!e.isIncludingNew)("ngModel",e.isIncludingNew)("disabled",e.inProgressLoading),n.Cb(2),n.ad(n.pc(5,4,"SHARED_MODULES.DROPDOWN_FILTER.SELECT_EVERYONE"))}}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",30),n.Xb(1,"div",31),n.Xb(2,"input",34),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).isSelectedAll=t}))("change",(function(){return n.Oc(e),n.nc(2).toggleAllChanged()})),n.Wb(),n.Xb(3,"label",35),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("indeterminate",!e.isSelectedAll&&(null==e.selectedData?null:e.selectedData.selected)>0&&!e.isIncludingNew)("ngModel",e.isSelectedAll)("disabled",e.isSelectedAllDisabled||e.inProgressLoading||e.isIncludingNew),n.Cb(2),n.ad(n.pc(5,4,"GLOBAL.SELECT_ALL_LABEL"))}}function _(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.bd(" ",n.pc(2,1,e.label)," ")}}function R(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",42),n.Xb(1,"div",43),n.Xb(2,"input",44),n.jc("change",(function(t){n.Oc(e);const i=n.nc(2).$implicit;return n.nc(2).selectGroup(i,t.target.checked)})),n.Wb(),n.Xb(3,"label",45),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Xb(6,"a",46),n.jc("click",(function(){n.Oc(e);const t=n.nc(2).index;return n.nc(2).toggleGroupDropdown(t)})),n.Sb(7,"img",47),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2),t=e.index,i=e.$implicit,s=n.nc(2);n.Cb(2),n.wc("id","group_"+t)("checked",s.selectedGroups.get(i.key)),n.Cb(1),n.wc("for","group_"+t),n.Cb(1),n.ad(n.pc(5,5,i.label)),n.Cb(3),n.wc("src",s.openedGroups[t]?"assets/images/ui-icons/chevron-up.svg":"assets/images/ui-icons/chevron-down.svg",n.Qc)}}function L(e,t){if(1&e&&(n.Xb(0,"div",39),n.Xc(1,_,3,3,"ng-container",40),n.Xc(2,R,8,7,"ng-template",null,41,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",!t.enableSelectingGroups)("ngIfElse",e)}}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",48),n.Xb(1,"div",31),n.Xb(2,"input",49),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i}))("change",(function(){n.Oc(e);const i=t.$implicit,s=n.nc().$implicit;return n.nc(2).onCheckboxChange(i,s.key)})),n.Wb(),n.Xb(3,"label",45),n.Xb(4,"div",50),n.Zc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc().index,r=n.nc(2);n.Cb(2),n.wc("ngModel",e.selected)("id",s+"_"+i)("disabled",e.isDisabled),n.Cb(1),n.wc("for",s+"_"+i),n.Cb(2),n.bd(" ",r.labelProp?e.entity[r.labelProp]||e.entity.email:e.entity," ")}}const P=function(e,t,i,n,s){return[e,t,i,n,s]};function j(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",36),n.Xc(2,L,4,2,"div",37),n.Xb(3,"div"),n.Xc(4,x,6,5,"div",38),n.oc(5,"sortBy"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=t.index,s=n.nc(2);n.Cb(1),n.Hb("cl-pt-0",!s.showTitles||e.hideTitle||e.value),n.Cb(1),n.wc("ngIf",s.showTitles&&!e.hideTitle&&(null==e.value?null:e.value.length)),n.Cb(1),n.Hb("cl-d-none",!s.openedGroups[i]&&s.enableSelectingGroups),n.Cb(1),n.wc("ngForOf",n.tc(5,7,n.Fc(13,P,s.filterSelectable(e.value),s.sortByNameMapper,s.triggerPipeDetection,s.triggerPipeDetection,s.alreadySorted)))("ngForTrackBy",s.trackByFn)}}function M(e,t){if(1&e&&(n.Vb(0),n.Xc(1,D,6,6,"div",27),n.Xc(2,I,6,6,"div",27),n.Sb(3,"div"),n.Xb(4,"div",28),n.Xc(5,j,6,19,"ng-container",29),n.oc(6,"filterWithout"),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.showIncludeNew),n.Cb(1),n.wc("ngIf",e.showSelectAll),n.Cb(3),n.wc("ngForOf",n.rc(6,4,null==e.selectableMaps?null:e.selectableMaps.maps,e.hideWithout,e.triggerPipeDetection))("ngForTrackBy",e.trackByFnMap)}}const X=function(e){return{filterName:e}};function F(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",n.qc(2,1,"GLOBAL.NO_FILTER_LABEL",n.Bc(4,X,e.filterName))," ")}}function W(e,t){1&e&&(n.Zc(0),n.oc(1,"translate")),2&e&&n.bd(" ",n.pc(1,1,"GLOBAL.NO_RESULTS_LABEL")," ")}function B(e,t){if(1&e&&(n.Xb(0,"div",14),n.Xb(1,"div",15),n.Xc(2,F,3,6,"ng-container",40),n.Xc(3,W,2,3,"ng-template",null,51,n.Yc),n.Wb(),n.Wb()),2&e){const e=n.Lc(4),t=n.nc();n.Cb(2),n.wc("ngIf",t.filterName)("ngIfElse",e)}}let N=(()=>{class e{constructor(e,t){this.cd=e,this.translateService=t,this._countMap=new c.a,this.placeholder="INVOICES.SHARED.SEARCH",this.showSearch=!0,this.showTitles=!0,this.showSelectAll=!0,this.showIncludeNew=!1,this.isIncludingNew=!1,this.labelProp="name",this.valueProp="id",this.offlineSearch=!1,this.preventOfflineFiltering=!1,this.debounceSearch=300,this.resizeableName="dropdownCheckbox",this.isResizeable=!0,this.onCloseFilter=new n.n,this.loadMore=new n.n,this.onChange=new n.n,this.onFilterOptionChange=new n.n,this.onSearchChange=new n.n,this.onContainOptionChange=new n.n,this.onSelectAllWithTextInput=new n.n,this.onNoneSelected=new n.n,this.pageSize=p.f,this.enableSelectingGroups=!1,this.selectedData={total:0,selected:0},this.triggerPipeDetection=0,this.Contains=l.d,this.ArchivedFilter=u.a,this.unsubscribe$=new o.a,this.onChange$=new o.a,this.selectedGroups=new Map,this.openedGroups=[],this.sortByNameMapper=e=>e.entity[this.labelProp||"name"]||""}set isReceivedAllData(e){this._isReceivedAllData=e,this.isInitialized&&this.setIndeterminate()}get isReceivedAllData(){return this._isReceivedAllData}set countMap(e){e&&(this._countMap=e,this.isInitialized&&this.setIndeterminate())}get countMap(){return this._countMap}ngOnInit(){this.checkboxValuesBackup=a.a.clone(this.checkboxValues),this.initialize(),this.subscribeToChanges(),this.subscribeToCount(),this.offlineSearch&&(this.debounceSearch=0)}ngOnDestroy(){this.emitOnClose(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get hideWithout(){return this.checkboxValues.options.contains===l.d.CONTAINS_ONLY||this.checkboxValues.options.status===u.a.ARCHIVED}emitOnClose(){const e=this.checkboxValues.sameWith(this.checkboxValuesBackup),t=this.generateResponse();e?this.onCloseFilter.emit(t):this.onChange.emit(t)}generateResponse(){this.checkboxValues.removeWithoutIfNeed(),a.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,this.valueProp,this.singleMapProperty);const e=this.countNumber||this.countMap.count(),t=this.checkboxValues.getSelectedData(this.selectableMaps,e,this.offlineSearch||this.isReceivedAllData,this.isSelectedAll);return{checkboxValues:this.checkboxValues,selectableMaps:this.selectableMaps,numberOfSelected:t.numberOfSelected,numberOfSelectedApproximately:t.numberOfSelectedApproximately,label:t.label,includingNew:this.isIncludingNew}}initialize(){this.initSelected(!0),this.refreshSelectedData(),this.setIndeterminate(),this.setIsDisabled(),this.isInitialized=!0}onScroll(){this.loadMore.emit()}subscribeToCount(){this.countMap.onChange.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.setIndeterminate(),this.cd.detectChanges()})}subscribeToChanges(){this.selectableMaps.onChange.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.onChange$.next()),this.onChange$.pipe(Object(r.a)(60),Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.initSelected(!1),this.refreshSelectedData(),this.setIndeterminate(),this.setIsDisabled(),this.triggerPipeDetection++,this.cd.detectChanges()})}initSelected(e){this.selectableMaps&&this.selectableMaps.maps&&(this.checkboxValues?(e&&(this.checkboxValues.names=this.checkboxValuesBackup.names),a.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,this.valueProp,this.singleMapProperty)):this.checkboxValues=a.a.generateValuesDataFromMap(this.selectableMaps.maps,this.valueProp,this.singleMapProperty),this.enableSelectingGroups&&(this.setSelectedGroupsValue(),this.openedGroups=this.selectableMaps.maps.map(e=>!1)))}onCheckboxChange(e,t){if(this.updateCheckboxValues(e,t),e.selected?this.selectedData.selected++:this.selectedData.selected--,this.setIndeterminate(),this.checkboxValues.hasSelected()?this.onNoneSelected.emit(!1):this.onNoneSelected.emit(!0),this.enableSelectingGroups){const e=this.selectableMaps.countSelectablesOf(t);let i=0;this.selectableMaps.getSelectedEntities(t).forEach(e=>{e.selected&&i++}),this.selectedGroups.set(t,i===e)}this.cd.detectChanges()}toggleAllChanged(){if(this.isIncludingNew&&(this.checkboxValues.exclude=this.isIncludingNew),!this.searchValue)return this.checkboxValues.exclude=this.isSelectedAll||this.isIncludingNew,this.checkboxValues.clearMapValues(),this.selectableMaps.setSelected(this.checkboxValues.exclude),this.selectableMaps.setDisabled(this.isIncludingNew),this.refreshSelectedData(),this.onNoneSelected.emit(!this.isSelectedAll&&!this.isIncludingNew),void(this.enableSelectingGroups&&this.setSelectedGroupsValue());let e=0;const t=this.isSelectedAll;this.selectableMaps.maps.forEach(i=>{const n=this.filterSelectable(i.value);n.forEach(e=>e.selected=t);const s=n.map(e=>e.entity.id);let r=t;this.checkboxValues.exclude&&(r=!r),this.checkboxValues.toggleMultipleIds(this.singleMapProperty||i.key,s,r),e+=n.length}),this.refreshSelectedData(),this.setIndeterminate(),this.isSelectedAll=t,this.isSelectedAll||this.isIncludingNew||this.checkboxValues.hasSelected()?this.onNoneSelected.emit(!1):this.onNoneSelected.emit(!0),e>=this.pageSize&&this.onSelectAllWithTextInput.emit({searchTerm:this.searchValue,isSelected:t})}filterSelectable(e){return this.isIncludingNew&&(e=e.map(e=>(e.selected=this.isIncludingNew,e))),this.preventOfflineFiltering||!this.searchValue?e:e.filter(e=>Object(h.z)(e.entity.name,this.searchValue))}selectFilter(e,t){this.resetScrollOnFilterChange&&this.scrollArea.nativeElement.scroll(0,0);const i=e.key;e.isExpanded=!1,this.checkboxValues.options[i]!==t&&(this.checkboxValues.options[i]=t,"contains"!==i?((!this.noResetOnFilterChange||this.isSelectedAll||this.isIncludingNew)&&(this.checkboxValues.reset(),this.checkboxValues.clearMap(),this.isSelectedAll=!1),this.countMap&&this.countMap.reset(),this.searchValue="",this.isIncludingNew=!1,this.onFilterOptionChange.emit({filter:i,value:t,searchTerm:this.searchValue}),this.checkboxValues.hasSelected()||this.isSelectedAll||this.isIncludingNew?this.onNoneSelected.emit(!1):this.onNoneSelected.emit(!0)):this.onContainOptionChange.emit(t))}searchChanged(){this.onSearchChange.emit(this.offlineSearch?"":this.searchValue),this.refreshSelectedData(),this.setIndeterminate()}trackByFn(e,t){return t}trackByFnMap(e,t){return t.key}updateCheckboxValues(e,t){this.checkboxValues.updateSingleMap(t=this.singleMapProperty||t,e.entity[this.valueProp],e.selected,e.entity.name||e.entity.email)}onResizeChange(e){if(!e)try{const e=this.scrollArea.nativeElement;e.scrollTop+e.getBoundingClientRect().height>e.scrollHeight-60&&this.onScroll()}catch(t){}}refreshSelectedData(){this.selectedData=this.selectableMaps.getSelectedData(this.searchValue,this.hideWithout)}setIndeterminate(){const{total:e,selected:t}=this.selectedData;this.isSelectedAllDisabled=!e,this.hasResults=!this.isSelectedAllDisabled,this.isSelectedAll=!1,this.offlineSearch||this.isReceivedAllData||e<this.pageSize?this.isSelectedAll=e>0&&e===t&&!this.isIncludingNew:this.searchValue||(this.isSelectedAll=this.checkboxValues.isSelectedAll(this.selectableMaps)&&!this.isIncludingNew)}setIsDisabled(){this.selectableMaps.setDisabled(this.isIncludingNew)}setSelectedGroupsValue(){this.selectableMaps.maps.forEach(e=>{const t=e.value.length;let i=0;e.value.forEach(e=>{e.selected&&i++}),this.selectedGroups.set(e.key,i===t)})}selectGroup(e,t){e.setSelectedAll(t),this.checkboxValues=a.a.generateValuesDataFromMap(this.selectableMaps.maps,this.valueProp,this.singleMapProperty),this.setSelectedGroupsValue()}toggleGroupDropdown(e){this.openedGroups[e]=!this.openedGroups[e],this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(b.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox"]],viewQuery:function(e,t){var i;1&e&&n.gd(S,!0),2&e&&n.Kc(i=n.kc())&&(t.scrollArea=i.first)},inputs:{selectableMaps:"selectableMaps",checkboxValues:"checkboxValues",noResetOnFilterChange:"noResetOnFilterChange",resetScrollOnFilterChange:"resetScrollOnFilterChange",isReceivedAllData:"isReceivedAllData",countMap:"countMap",alreadySorted:"alreadySorted",singleMapProperty:"singleMapProperty",countNumber:"countNumber",searchValue:"searchValue",placeholder:"placeholder",showSearch:"showSearch",showTitles:"showTitles",showSelectAll:"showSelectAll",showIncludeNew:"showIncludeNew",isIncludingNew:"isIncludingNew",labelProp:"labelProp",valueProp:"valueProp",offlineSearch:"offlineSearch",preventOfflineFiltering:"preventOfflineFiltering",debounceSearch:"debounceSearch",resizeableName:"resizeableName",isResizeable:"isResizeable",filterName:"filterName",inProgressSelectAll:"inProgressSelectAll",inProgressLoading:"inProgressLoading",pageSize:"pageSize",filterOptions:"filterOptions",enableSelectingGroups:"enableSelectingGroups"},outputs:{onCloseFilter:"onCloseFilter",loadMore:"loadMore",onChange:"onChange",onFilterOptionChange:"onFilterOptionChange",onSearchChange:"onSearchChange",onContainOptionChange:"onContainOptionChange",onSelectAllWithTextInput:"onSelectAllWithTextInput",onNoneSelected:"onNoneSelected"},decls:9,vars:11,consts:[["resizeable","",1,"cl-dropdown-menu",3,"isResizeable","resizeableName","onResize"],[4,"ngIf"],[4,"ngFor","ngForOf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","alwaysCallback","scrollWindow","scrolled"],["scrollArea",""],["class","cl-dropdown-item cl-border-bottom cl-border-light",4,"ngIf"],["dropdownClose","","tabindex","0"],[1,"cl-relative"],[1,"cl-progress-bar-wrapper",2,"position","absolute","top","0"],[1,"cl-progress-bar-anim"],[1,"cl-blocker"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[1,"cl-dropdown-item-expand","cl-cut-text"],["src","assets/images/ui-icons/chevron-down.svg"],["class","cl-collapse cl-show",4,"ngIf"],[1,"cl-collapse","cl-show"],[1,"cl-collapse-content"],["doNotCloseDropdown","","class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngFor","ngForOf"],["doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],["doNotCloseDropdown","",1,"cl-cut-text"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-border-bottom cl-border-light",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-border-bottom","cl-border-light"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","includeNew",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"indeterminate","ngModel","disabled","ngModelChange","change"],["for","includeNew",1,"cl-custom-control-label","cl-text-wrap"],["type","checkbox","id","selectAll",1,"cl-custom-control-input","cl-checkbox-custom-state",3,"indeterminate","ngModel","disabled","ngModelChange","change"],["for","selectAll",1,"cl-custom-control-label"],[1,"cl-dropdown-section"],["class","cl-dropdown-header cl-h5 cl-project-picker-sticky z-index-on-top","style","padding-left: 1.643rem",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-header","cl-h5","cl-project-picker-sticky","z-index-on-top",2,"padding-left","1.643rem"],[4,"ngIf","ngIfElse"],["groupSelectHeader",""],[1,"cl-d-flex","cl-justify-content-between","cl-align-center"],[1,"cl-custom-control","cl-custom-checkbox","cl-z-index-2"],["type","checkbox",1,"cl-custom-control-input",3,"id","checked","change"],[1,"cl-custom-control-label",3,"for"],[3,"click"],[3,"src"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","disabled","ngModelChange","change"],[1,"cl-cut-text"],["noResults",""]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.jc("onResize",(function(e){return t.onResizeChange(e)})),n.Xc(1,y,5,0,"ng-container",1),n.Xc(2,O,4,4,"ng-container",1),n.Xc(3,T,13,7,"ng-container",2),n.Xb(4,"div",3,4),n.jc("scrolled",(function(){return t.onScroll()})),n.Xc(6,M,7,8,"ng-container",1),n.Xc(7,B,5,2,"div",5),n.Wb(),n.Sb(8,"span",6),n.Wb()),2&e&&(n.wc("isResizeable",t.isResizeable)("resizeableName",t.resizeableName),n.Cb(1),n.wc("ngIf",t.inProgressSelectAll),n.Cb(1),n.wc("ngIf",t.showSearch),n.Cb(1),n.wc("ngForOf",t.filterOptions),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("alwaysCallback",t.resetScrollOnFilterChange)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",t.hasResults),n.Cb(1),n.wc("ngIf",!t.hasResults&&!t.inProgressLoading))},directives:[f.a,m.u,m.t,g.a,v.a,C.a,C.s,C.v],pipes:[b.e,E,w.a],encapsulation:2,changeDetection:0}),e})()},D2Bs:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._policyId=null==e?void 0:e.policyId,this._policyName=null==e?void 0:e.policyName,this._policyArchived=null==e?void 0:e.policyArchived,this._userId=null==e?void 0:e.userId,this._userName=null==e?void 0:e.userName,this._userInactive=null==e?void 0:e.userInactive,this._userImageUrl=null==e?void 0:e.userImageUrl,this._balance=null==e?void 0:e.balance,this._used=null==e?void 0:e.used,this._policyTimeUnit=null==e?void 0:e.policyTimeUnit,this._bulkSelected=!1}get id(){return this._id}get workspaceId(){return this._workspaceId}get policyId(){return this._policyId}get policyName(){return this._policyName}get policyArchived(){return this._policyArchived}get userId(){return this._userId}get userName(){return this._userName}get userInactive(){return this._userInactive}get userImageUrl(){return this._userImageUrl}get balance(){return this._balance}get used(){return this._used}set balance(e){this._balance=e}get bulkSelected(){return this._bulkSelected}set bulkSelected(e){this._bulkSelected=e}get policyTimeUnit(){return this._policyTimeUnit}}},DCUz:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("YnOA"),r=i("fXoL");let o=(()=>{class e{transform(e,t){return Object(s.a)(Object(n.duration)(e,"s"),t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"secondsToDuration",type:e,pure:!0}),e})()},DeEi:function(e,t,i){"use strict";i.d(t,"a",(function(){return z}));var n=i("3Pt+"),s=i("ofXK"),r=i("ujiw"),o=i("fXoL"),a=(i("j4ir"),i("KBaq")),c=i("sYmb"),l=i("1kSV");const u=function(e){return[e]};function d(e,t){if(1&e&&(o.Xb(0,"span",6),o.Zc(1),o.Wb()),2&e){const e=o.nc();o.wc("ngClass",o.Bc(2,u,e.workspace.bgClass)),o.Cb(1),o.bd(" ",e.workspace.subscriptionPlanTitle," ")}}function h(e,t){if(1&e){const e=o.Yb();o.Xb(0,"a",13),o.jc("click",(function(){return o.Oc(e),o.nc(2).setAsDefault.emit()}))("keyup.enter",(function(){return o.Oc(e),o.nc(2).setAsDefault.emit()}))("keyup.space",(function(){return o.Oc(e),o.nc(2).setAsDefault.emit()})),o.Zc(1),o.oc(2,"translate"),o.Wb()}2&e&&(o.Cb(1),o.ad(o.pc(2,1,"GLOBAL.ACTIVATE_LABEL")))}function p(e,t){1&e&&(o.Xb(0,"span",14),o.Sb(1,"img",15),o.Xb(2,"span",16),o.Zc(3),o.oc(4,"translate"),o.Wb(),o.Wb()),2&e&&(o.Cb(3),o.ad(o.pc(4,1,"GLOBAL.ACTIVE_LABEL")))}function b(e,t){if(1&e){const e=o.Yb();o.Xb(0,"button",17,18),o.jc("click",(function(){o.Oc(e);const t=o.Lc(1);return o.nc(2).leaveWorkspace(),t.blur()}))("keyup.enter",(function(){return o.Oc(e),o.nc(2).leaveWorkspace()}))("keyup.space",(function(){return o.Oc(e),o.nc(2).leaveWorkspace()})),o.Sb(3,"img",19),o.Wb()}if(2&e){const e=o.nc(2);o.wc("ngbTooltip",e.title),o.Cb(3),o.wc("src",e.isOwner?"assets/images/ui-icons/close.svg":"assets/ui-icons/leave.svg",o.Qc)}}function f(e,t){if(1&e&&(o.Xb(0,"span",21,22),o.Sb(2,"img",19),o.Wb()),2&e){const e=o.nc(3);o.wc("ngbTooltip",e.title),o.Cb(2),o.wc("src",e.isOwner?"assets/images/ui-icons/close.svg":"assets/ui-icons/leave.svg",o.Qc)}}function m(e,t){if(1&e&&o.Xc(0,f,3,2,"span",20),2&e){const e=o.nc(2);o.wc("ngIf",!e.canLeave)}}function g(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",7),o.Xc(1,h,3,3,"a",8),o.Xc(2,p,5,3,"ng-template",null,9,o.Yc),o.Xb(4,"button",10),o.jc("click",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.enter",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.space",(function(){return o.Oc(e),o.nc().openSettings.emit()})),o.Zc(5),o.oc(6,"translate"),o.Wb(),o.Xc(7,b,4,2,"button",11),o.Xc(8,m,1,1,"ng-template",null,12,o.Yc),o.Wb()}if(2&e){const e=o.Lc(3),t=o.Lc(9),i=o.nc();o.Cb(1),o.wc("ngIf",i.defaultWorkspaceId!==i.workspace.id)("ngIfElse",e),o.Cb(3),o.wc("disabled",!i.hasSettingsPermision),o.Cb(1),o.bd(" ",o.pc(6,6,"LAYOUT.SIDEBAR.NAVIGATION.SETTINGS_LABEL")," "),o.Cb(2),o.wc("ngIf",i.canLeave)("ngIfElse",t)}}function v(e,t){if(1&e){const e=o.Yb();o.Xb(0,"div",7),o.Xb(1,"button",23),o.jc("click",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.enter",(function(){return o.Oc(e),o.nc().openSettings.emit()}))("keyup.space",(function(){return o.Oc(e),o.nc().openSettings.emit()})),o.Zc(2),o.oc(3,"translate"),o.Wb(),o.Sb(4,"button",24),o.Wb()}2&e&&(o.Cb(2),o.bd(" ",o.pc(3,1,"GLOBAL.LOG_IN_LABEL")," "))}let C=(()=>{class e{constructor(e){this.translateService=e,this.setAsDefault=new o.n,this.openSettings=new o.n,this.onLeave=new o.n,this.isSelfHosted=a.a.environment.selfHosted}ngOnInit(){}get title(){if(this.canLeave)return this.translateService.instant(this.isOwner?"WORKSPACE.WORKSPACE_ROW.DELETE_LABEL":"WORKSPACE.WORKSPACE_ROW.LEAVE_LABEL");const e=this.isOwner?"delete":"leave";return this.translateService.instant(this.hasOnlyOneWorkspace?"delete"===e?"WORKSPACE.WORKSPACE_ROW.DELETE_ONLY_WORKSPACE_ERROR_MSG":"WORKSPACE.WORKSPACE_ROW.LEAVE_ONLY_WORKSPACE_ERROR_MSG":this.workspace.id===this.defaultWorkspaceId?"delete"===e?"WORKSPACE.WORKSPACE_ROW.DELETE_ACTIVE_WORKSPACE_ERROR_MSG":"WORKSPACE.WORKSPACE_ROW.LEAVE_ACTIVE_WORKSPACE_ERROR_MSG":this.isOwner?"delete"===e?"WORKSPACE.WORKSPACE_ROW.OWNER_DELETE_WORKSPACE_ERROR_MSG":"WORKSPACE.WORKSPACE_ROW.OWNER_LEAVE_WORKSPACE_ERROR_MSG":"delete"===e?"WORKSPACE.WORKSPACE_ROW.DELETE_WORKSPACE_ERROR_MSG":"WORKSPACE.WORKSPACE_ROW.LEAVE_WORKSPACE_ERROR_MSG")}leaveWorkspace(){this.canLeave&&this.onLeave.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(c.f))},e.\u0275cmp=o.Lb({type:e,selectors:[["workspace-row"]],inputs:{workspace:"workspace",defaultWorkspaceId:"defaultWorkspaceId",hasSettingsPermision:"hasSettingsPermision",isOwner:"isOwner",hasOnlyOneWorkspace:"hasOnlyOneWorkspace",canLeave:"canLeave"},outputs:{setAsDefault:"setAsDefault",openSettings:"openSettings",onLeave:"onLeave"},decls:8,vars:4,consts:[[1,"cl-d-flex","cl-flex-column","cl-flex-lg-row","cl-w-100","cl-align-items-start","cl-align-items-lg-center","cl-justify-content-start","cl-justify-content-lg-between"],[1,"cl-cut-text-wrapper","cl-my-2","cl-my-lg-0","cl-px-2","cl-px-lg-3","cl-w-100"],[1,"cl-listing-project-client","cl-d-flex","cl-align-items-center"],[1,"cl-cut-text"],["class","cl-ml-2 cl-px-2 cl-badge cl-badge-pill cl-text-white cl-text-uppercase",3,"ngClass",4,"ngIf"],["class","cl-d-flex cl-w-100 cl-w-lg-auto cl-align-items-center cl-justify-content-end cl-template-separator-mob",4,"ngIf"],[1,"cl-ml-2","cl-px-2","cl-badge","cl-badge-pill","cl-text-white","cl-text-uppercase",3,"ngClass"],[1,"cl-d-flex","cl-w-100","cl-w-lg-auto","cl-align-items-center","cl-justify-content-end","cl-template-separator-mob"],["class","cl-d-inline-block","tabindex","0",3,"click","keyup.enter","keyup.space",4,"ngIf","ngIfElse"],["activateTemplate",""],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-3",3,"disabled","click","keyup.enter","keyup.space"],["class","cl-btn-fixed-40 cl-text-center cl-ml-1","tabindex","0","triggers","hover","placement","left",3,"ngbTooltip","click","keyup.enter","keyup.space",4,"ngIf","ngIfElse"],["canLeaveTemplate",""],["tabindex","0",1,"cl-d-inline-block",3,"click","keyup.enter","keyup.space"],[1,"cl-text-success","cl-d-inline-block"],["src","assets/images/ui-icons/checkmark-green.svg"],[1,"cl-ml-2"],["tabindex","0","triggers","hover","placement","left",1,"cl-btn-fixed-40","cl-text-center","cl-ml-1",3,"ngbTooltip","click","keyup.enter","keyup.space"],["btn","","tooltipManual","ngbTooltip"],[3,"src"],["class","cl-btn-fixed-40 cl-text-center cl-ml-1 cl-btn-disabled-opacity","triggers","hover","placement","left",3,"ngbTooltip",4,"ngIf"],["triggers","hover","placement","left",1,"cl-btn-fixed-40","cl-text-center","cl-ml-1","cl-btn-disabled-opacity",3,"ngbTooltip"],["tooltipManual","ngbTooltip"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-3",3,"click","keyup.enter","keyup.space"],[1,"cl-btn-fixed-40","cl-text-center","cl-ml-1","cl-disabled"]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Xb(1,"div",1),o.Xb(2,"span",2),o.Xb(3,"span",3),o.Zc(4),o.Wb(),o.Xc(5,d,2,4,"span",4),o.Wb(),o.Wb(),o.Xc(6,g,10,8,"div",5),o.Xc(7,v,5,3,"div",5),o.Wb()),2&e&&(o.Cb(4),o.ad(t.workspace.name),o.Cb(1),o.wc("ngIf",!t.isSelfHosted&&"FREE"!==t.workspace.subscriptionPlanTitle.toUpperCase()),o.Cb(1),o.wc("ngIf",!t.workspace.onSubdomain),o.Cb(1),o.wc("ngIf",t.workspace.onSubdomain))},directives:[s.u,s.r,l.bb],pipes:[c.e],encapsulation:2,changeDetection:0}),e})();var E=i("E10L"),w=i("1Tmk"),S=i("1G5W"),y=i("XNiG"),O=i("Y9WU"),A=i("SvJf");function k(e,t){1&e&&(o.Xb(0,"span",17),o.Zc(1),o.oc(2,"translate"),o.Wb()),2&e&&(o.Cb(1),o.bd(" ",o.pc(2,1,"WORKSPACE.DELETE.SUBSCRIPTION")," "))}const T=function(e){return{value:e}};function D(e,t){if(1&e&&(o.Vb(0),o.Xb(1,"p",15),o.Zc(2),o.oc(3,"translate"),o.Wb(),o.Xc(4,k,3,3,"span",16),o.Ub()),2&e){const e=o.nc();o.Cb(2),o.bd(" ",o.qc(3,2,"WORKSPACE.DELETE.INFO_MESSAGE",o.Bc(5,T,e.workspaceData.name))," "),o.Cb(2),o.wc("ngIf",!e.isSelfHosted&&e.workspaceData.subscription&&"TRIAL"!==e.workspaceData.subscription)}}function I(e,t){1&e&&(o.Xb(0,"p",18),o.Zc(1),o.oc(2,"translate"),o.Wb()),2&e&&(o.Cb(1),o.bd(" ",o.pc(2,1,"WORKSPACE.LEAVE.INFO_MESSAGE")," "))}var _=function(e){return e.delete="GLOBAL.DELETE_BTN",e.leave="GLOBAL.LEAVE_LABEL",e}({});let R=(()=>{class e{constructor(e,t,i,n){this.formBuilder=e,this.cd=t,this.workspaceService=i,this.analyticsService=n,this.onClose=new o.n,this.unsubscribe$=new y.a,this.isSelfHosted=a.a.environment.selfHosted,this.TranslateTypeHelperEnum=_}ngOnInit(){var e;this.deleteWorkspaceForm=this.formBuilder.group({confirmationModel:["",[n.G.required]]},{validator:(e=this.workspaceData.type,t=>{const i=t.controls.confirmationModel;i.value.trim().toLowerCase()!==e.trim().toLowerCase()?i.setErrors({matchInputs:!0}):i.setErrors(null)})})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onSubmit(){this.inProgress||(this.inProgress=!0,this.workspaceService.leaveWorkspace(this.workspaceData.id).pipe(Object(S.a)(this.unsubscribe$)).subscribe(()=>this.onClose.emit(this.workspaceData.id),()=>{this.analyticsService.addEvent(new A.a({event:"submit",value:"delete",section:"Main",section2:"Workspaces",section3:"Delete workspace"})),this.inProgress=!1,this.cd.detectChanges()}))}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(n.f),o.Rb(o.h),o.Rb(w.a),o.Rb(O.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["delete-workspace-modal"]],inputs:{workspaceData:"workspaceData"},outputs:{onClose:"onClose"},decls:32,vars:30,consts:[[3,"formGroup","ngSubmit"],[1,"cl-modal-body","cl-text-center","cl-pt-4","cl-pb-3"],[1,"cl-mb-3"],[1,"cl-img-fluid",3,"src"],[1,"cl-h1","cl-mb-2","cl-text-gray-3"],[1,"cl-capitalize"],[4,"ngIf","ngIfElse"],["leaveTemplate",""],[1,"cl-my-3"],[1,"cl-form-group","cl-text-left","cl-mb-0"],[1,"cl-uppercase"],["type","text","formControlName","confirmationModel",1,"cl-form-control"],[1,"cl-modal-footer"],["tabindex","0",1,"cl-color-blue",3,"click","keyup.enter","keyup.space"],["type","submit","tabindex","0",1,"cl-btn",3,"ngClass","disabled"],[1,"cl-mb-2","cl-text-gray-6"],["class","cl-alert cl-alert-warning cl-justify-content-center",4,"ngIf"],[1,"cl-alert","cl-alert-warning","cl-justify-content-center"],[1,"cl-mb-0","cl-text-gray-6"]],template:function(e,t){if(1&e&&(o.Xb(0,"form",0),o.jc("ngSubmit",(function(){return t.onSubmit()})),o.Xb(1,"div",1),o.Xb(2,"div",2),o.Sb(3,"img",3),o.Wb(),o.Xb(4,"div",4),o.Xb(5,"span",5),o.Zc(6),o.oc(7,"translate"),o.Wb(),o.Zc(8),o.oc(9,"lowercase"),o.oc(10,"translate"),o.Wb(),o.Xc(11,D,5,7,"ng-container",6),o.Xc(12,I,3,3,"ng-template",null,7,o.Yc),o.Sb(14,"hr",8),o.Xb(15,"div",9),o.Xb(16,"label"),o.Zc(17),o.oc(18,"translate"),o.Xb(19,"span",10),o.Zc(20),o.Wb(),o.Zc(21),o.oc(22,"translate"),o.Wb(),o.Sb(23,"input",11),o.Wb(),o.Wb(),o.Xb(24,"div",12),o.Xb(25,"a",13),o.jc("click",(function(){return t.onClose.emit()}))("keyup.enter",(function(){return t.onClose.emit()}))("keyup.space",(function(){return t.onClose.emit()})),o.Zc(26),o.oc(27,"translate"),o.Wb(),o.Xb(28,"button",14),o.Zc(29),o.oc(30,"translate"),o.oc(31,"translate"),o.Wb(),o.Wb(),o.Wb()),2&e){const e=o.Lc(13);o.wc("formGroup",t.deleteWorkspaceForm),o.Cb(3),o.wc("src","delete"===t.workspaceData.type?"assets/images/illustrations/delete-workspace.svg":"assets/images/illustrations/leave-workspace.svg",o.Qc),o.Cb(3),o.ad(o.pc(7,14,t.TranslateTypeHelperEnum[t.workspaceData.type])),o.Cb(2),o.bd(" ",o.pc(9,16,o.pc(10,18,"GLOBAL.WORKSPACE_LABEL"))," "),o.Cb(3),o.wc("ngIf","delete"===t.workspaceData.type)("ngIfElse",e),o.Cb(6),o.bd("",o.pc(18,20,"GLOBAL.TYPE_TO_ACTION_PART")," "),o.Cb(3),o.ad(t.workspaceData.type),o.Cb(1),o.bd(" ",o.pc(22,22,"WORKSPACE.DELETE.TO_CONFIRM"),""),o.Cb(5),o.ad(o.pc(27,24,"GLOBAL.CANCEL_BTN")),o.Cb(2),o.wc("ngClass","delete"===t.workspaceData.type?"cl-btn-danger":"cl-btn-primary")("disabled",t.deleteWorkspaceForm.invalid||t.inProgress),o.Cb(1),o.cd(" ",o.pc(30,26,t.TranslateTypeHelperEnum[t.workspaceData.type])," ",o.pc(31,28,"GLOBAL.WORKSPACE_LABEL")," ")}},directives:[n.I,n.t,n.k,s.u,n.c,n.s,n.i,s.r],pipes:[c.e,s.q],encapsulation:2,changeDetection:0}),e})();var L=i("AY7I");function x(e,t){1&e&&(o.Xb(0,"div",10),o.Zc(1),o.oc(2,"translate"),o.Wb()),2&e&&(o.Cb(1),o.bd(" ",o.pc(2,1,"WORKSPACE.GENERAL_SETTINGS.WORKSPACE_NAME.LENGTH_ERROR_MESSAGE")," "))}let P=(()=>{class e{constructor(e,t,i,n){this.formBuilder=e,this.cd=t,this.workspaceService=i,this.analyticsService=n,this.unsubscribe$=new y.a,this.onClose=new o.n}ngOnInit(){this.createWorkspaceForm=this.formBuilder.group({name:["",[L.a.required,L.a.minLength(2),L.a.maxLength(250)]]})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get name(){return this.createWorkspaceForm.get("name")}get isNameInvalid(){return this.name.dirty&&this.name.touched&&!!this.name.errors}trim(){this.createWorkspaceForm.patchValue({name:this.name.value.trim()})}onSubmit(){this.inProgress||(this.trim(),this.createWorkspaceForm.invalid||(this.inProgress=!0,this.workspaceService.createWorkspace(this.name.value).pipe(Object(S.a)(this.unsubscribe$)).subscribe(e=>{this.analyticsService.addEvent(new A.a({event:"submit",value:"Create",section:"Main",section2:"Workspaces",section3:"Create new workspace"})),this.onClose.emit(e)},()=>{this.inProgress=!1,this.cd.detectChanges()})))}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(n.f),o.Rb(o.h),o.Rb(w.a),o.Rb(O.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["create-workspace-modal"]],outputs:{onClose:"onClose"},decls:16,vars:14,consts:[[3,"formGroup","ngSubmit"],[1,"cl-modal-body"],[1,"cl-form-group","cl-row","cl-mb-0"],["for","cl-template-name-create",1,"cl-col-sm-3","cl-col-form-label"],[1,"cl-col-sm-9"],["type","text","formControlName","name","ngbAutofocus","",1,"cl-form-control",3,"blur"],["class","cl-invalid-feedback",4,"ngIf"],[1,"cl-modal-footer"],["tabindex","0",3,"keyup.enter","keyup.space","click"],["type","submit","tabindex","0",1,"cl-btn","cl-btn-primary",3,"disabled"],[1,"cl-invalid-feedback"]],template:function(e,t){1&e&&(o.Xb(0,"form",0),o.jc("ngSubmit",(function(){return t.onSubmit()})),o.Xb(1,"div",1),o.Xb(2,"div",2),o.Xb(3,"label",3),o.Zc(4),o.oc(5,"translate"),o.Wb(),o.Xb(6,"div",4),o.Xb(7,"input",5),o.jc("blur",(function(){return t.trim()})),o.Wb(),o.Xc(8,x,3,3,"div",6),o.Wb(),o.Wb(),o.Wb(),o.Xb(9,"div",7),o.Xb(10,"a",8),o.jc("keyup.enter",(function(){return t.onClose.emit()}))("keyup.space",(function(){return t.onClose.emit()}))("click",(function(){return t.onClose.emit()})),o.Zc(11),o.oc(12,"translate"),o.Wb(),o.Xb(13,"button",9),o.Zc(14),o.oc(15,"translate"),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.wc("formGroup",t.createWorkspaceForm),o.Cb(4),o.bd(" ",o.pc(5,8,"WORKSPACE.GENERAL_SETTINGS.WORKSPACE_NAME.TITLE")," "),o.Cb(3),o.Hb("cl-is-invalid",t.isNameInvalid),o.Cb(1),o.wc("ngIf",t.isNameInvalid),o.Cb(3),o.ad(o.pc(12,10,"GLOBAL.CANCEL_BTN")),o.Cb(2),o.wc("disabled",t.createWorkspaceForm.invalid||t.inProgress),o.Cb(1),o.ad(o.pc(15,12,"GLOBAL.CREATE_LABEL")))},directives:[n.I,n.t,n.k,n.c,n.s,n.i,s.u],pipes:[c.e],encapsulation:2,changeDetection:0}),e})();var j=i("9Trn"),M=i("0Gvx"),X=i("5lh1"),F=i("AHy6"),W=i("QKuU"),B=i("eGqU"),N=i("sbmM"),G=i("TmxI"),U=i("qUN8"),V=i("2rWG"),H=i("9Gc3"),Y=i("AHJ+"),$=i("wxL3");let z=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.m,s.c,n.C,E.a,l.db,j.a,M.a,X.a,c.d]]}),e})();o.Rc(r.a,[n.I,n.x,n.H,n.c,n.y,n.B,n.a,n.E,n.F,n.A,n.s,n.t,n.D,n.o,n.n,n.z,n.b,n.d,n.v,n.w,n.u,s.r,s.s,s.t,s.u,s.B,s.x,s.y,s.z,s.A,s.v,s.w,n.h,n.k,n.i,n.l,n.e,F.a,l.bb,W.a,B.a,N.a,G.a,U.a,V.a,H.a,Y.a,$.a,c.b,r.a,C,P,R],[s.b,s.I,s.q,s.l,s.F,s.g,s.D,s.G,s.d,s.f,s.j,s.k,s.m,c.e])},Dfhc:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("B01t"),s=i("ofXK"),r=i("1kSV"),o=i("tyNb"),a=i("sYmb"),c=i("FpXt"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[n.a,s.c,r.O,o.h,c.a,a.d]]}),e})()},E10L:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},EBvn:function(e,t,i){"use strict";i.d(t,"a",(function(){return G})),i("YDZJ");var n=i("RkOr"),s=i("wd/R"),r=i("y+xF"),o=i("hkzH"),a=i("wBNX"),c=i("xoOP"),l=i("1Tmk"),u=(i("j4ir"),i("lGQG")),d=i("fXoL"),h=i("sYmb"),p=i("tyNb"),b=i("ofXK"),f=i("znhS"),m=i("rg2B"),g=i("Lwft");const v=function(e){return{"cl-extended":e}};function C(e,t){if(1&e){const e=d.Yb();d.Xb(0,"a",13),d.jc("click",(function(){d.Oc(e);const t=d.nc();return t.group.isExpanded=!t.group.isExpanded})),d.Xb(1,"span",14),d.Zc(2),d.Wb(),d.Wb()}if(2&e){const e=d.nc();d.Cb(1),d.wc("ngClass",d.Bc(2,v,e.group.isExpanded)),d.Cb(1),d.ad(e.group.children.length)}}function E(e,t){if(1&e&&d.Sb(0,"i",15),2&e){const e=d.nc();d.Wc("background-color",e.group.color)}}function w(e,t){1&e&&d.Tb(0)}function S(e,t){if(1&e){const e=d.Yb();d.Xb(0,"a",16),d.jc("click",(function(){d.Oc(e);const t=d.nc();return t.clear(),t.navigate()})),d.Xc(1,w,1,0,"ng-container",17),d.Wb()}if(2&e){d.nc();const e=d.Lc(10);d.Cb(1),d.wc("ngTemplateOutlet",e)}}function y(e,t){1&e&&d.Tb(0)}function O(e,t){if(1&e&&(d.Xb(0,"span"),d.Xc(1,y,1,0,"ng-container",17),d.Wb()),2&e){d.nc();const e=d.Lc(10);d.Cb(1),d.wc("ngTemplateOutlet",e)}}function A(e,t){if(1&e&&d.Sb(0,"i",15),2&e){const e=d.nc(4);d.Wc("background-color",e.group.projectColor)}}function k(e,t){if(1&e&&(d.Vb(0),d.Xc(1,A,1,2,"i",5),d.Xb(2,"span"),d.Zc(3),d.Wb(),d.Ub()),2&e){const e=d.nc(3);d.Cb(1),d.wc("ngIf",0!==e.group.level),d.Cb(1),d.Wc("color",e.group.projectColor),d.Cb(1),d.bd(" ",e.group.projectName," ")}}function T(e,t){if(1&e&&(d.Xb(0,"span",22),d.Zc(1),d.Wb()),2&e){const e=d.nc(3);d.Cb(1),d.bd(" - ",e.group.clientName," ")}}const D=function(e){return{projectGroupingLabel:e}};function I(e,t){if(1&e&&(d.Vb(0),d.Xb(1,"span",20),d.oc(2,"translate"),d.Zc(3),d.oc(4,"translate"),d.Wb(),d.Xc(5,k,4,4,"ng-container",11),d.Xc(6,T,2,1,"span",21),d.Ub()),2&e){const e=d.nc(2);d.Cb(1),d.Wc("color",e.group.type===e.SummaryGroupColumn.PROJECT&&e.group.color),d.wc("title",e.group.name||"("+d.qc(2,6,"PROJECTS.NEW_PROJECT.WITHOUT_GROUPING_LABEL_NOTIFICATION",d.Bc(12,D,e.group.withoutLabel))+")"),d.Cb(2),d.bd(" ",e.group.name||"("+d.qc(4,9,"PROJECTS.NEW_PROJECT.WITHOUT_GROUPING_LABEL_NOTIFICATION",d.Bc(14,D,e.group.withoutLabel))+")"," "),d.Cb(2),d.wc("ngIf",e.group.projectName&&e.canShowProjectData),d.Cb(1),d.wc("ngIf",e.group.clientName&&e.canShowProjectData&&e.canShowClientData)}}function _(e,t){if(1&e&&d.Zc(0),2&e){const e=d.nc(2);d.bd(" ",e.getDate," ")}}function R(e,t){if(1&e&&(d.Xc(0,I,7,16,"ng-container",18),d.Xc(1,_,1,1,"ng-template",null,19,d.Yc)),2&e){const e=d.Lc(2),t=d.nc();d.wc("ngIf",t.group.type!==t.SummaryGroupColumn.DATE)("ngIfElse",e)}}function L(e,t){if(1&e&&(d.Xb(0,"div",10),d.Zc(1),d.oc(2,"timeFormat"),d.Wb()),2&e){const e=d.nc(2);d.Cb(1),d.ad(d.qc(2,1,null==e.group.estimate?null:e.group.estimate.amount,e.format))}}function x(e,t){if(1&e&&(d.Xb(0,"div",24),d.Zc(1),d.oc(2,"roundIfWholeNumber"),d.oc(3,"centsToDollars"),d.Wb()),2&e){const e=d.nc(2);d.Cb(1),d.cd("",d.pc(2,2,d.pc(3,4,null==e.group.estimate?null:e.group.estimate.amount))," ",e.currency,"")}}function P(e,t){1&e&&(d.Xb(0,"div",10),d.Zc(1," - "),d.Wb())}function j(e,t){if(1&e&&(d.Vb(0),d.Xc(1,L,3,4,"div",23),d.Xc(2,x,4,6,"div",12),d.Xc(3,P,2,0,"div",23),d.Ub()),2&e){const e=d.nc();d.Cb(1),d.wc("ngIf","TIME"==(null==e.group.estimate?null:e.group.estimate.type)&&(null==e.group.estimate?null:e.group.estimate.amount)),d.Cb(1),d.wc("ngIf","BUDGET"==(null==e.group.estimate?null:e.group.estimate.type)&&(null==e.group.estimate?null:e.group.estimate.amount)),d.Cb(1),d.wc("ngIf",!(null!=e.group.estimate&&e.group.estimate.type&&null!=e.group.estimate&&e.group.estimate.amount&&"NONE"!==(null==e.group.estimate?null:e.group.estimate.type)))}}function M(e,t){if(1&e&&(d.Xb(0,"div",24),d.Zc(1),d.oc(2,"roundIfWholeNumber"),d.oc(3,"centsToDollars"),d.Wb()),2&e){const e=d.nc();d.Cb(1),d.cd("",d.pc(2,2,d.pc(3,4,e.group.amount))," ",e.currency,"")}}function X(e,t){if(1&e&&(d.Xb(0,"div",24),d.Zc(1),d.oc(2,"roundIfWholeNumber"),d.oc(3,"centsToDollars"),d.Wb()),2&e){const e=t.$implicit,i=d.nc(2);d.Cb(1),d.cd(" ",d.pc(2,2,d.pc(3,4,e.value))," ",i.currency,"")}}function F(e,t){if(1&e&&(d.Vb(0),d.Xc(1,X,4,6,"div",25),d.Ub()),2&e){const e=d.nc();d.Cb(1),d.wc("ngForOf",e.group.amounts)}}function W(e,t){if(1&e&&d.Sb(0,"summary-group",27),2&e){const e=t.$implicit,i=d.nc(2);d.wc("currency",i.currency)("format",i.format)("isExpanded",i.isExpanded)("group",e)("showEstimate",i.showEstimate)("filterGroups",i.filterGroups)("level",i.level+1)("hideAmount",i.hideAmount)("userFormat",i.userFormat)("enabledStandardFilters",i.enabledStandardFilters)("enableLinks",i.enableLinks)("dateRange",i.dateRange)}}function B(e,t){if(1&e&&(d.Vb(0),d.Xc(1,W,1,12,"summary-group",26),d.Ub()),2&e){const e=d.nc();d.Cb(1),d.wc("ngForOf",e.group.children)}}const N=function(e,t){return[e,t]};let G=(()=>{class e{constructor(e,t,i,s,r){this.translate=e,this.authService=t,this.workspaceService=i,this.switchReportService=s,this.router=r,this.level=0,this._enabledStandardFilters=[],this.SummaryGroupColumn=n.a,this.map=new Map([[n.a.TIMEENTRY,o.e],[n.a.USER,o.k],[n.a.USER_GROUP,o.f],[n.a.CLIENT,o.i.CLIENTS],[n.a.PROJECT,o.i.PROJECTS],[n.a.TASK,o.i.TASKS],[n.a.TAG,o.i.TAGS]])}set group(e){e.withoutLabel&&(e.withoutLabel=this.translate.instant(e.withoutLabel).toLowerCase()),this._group=e}get group(){return this._group}set isExpanded(e){this.group&&this.group.children&&(this.group.children.forEach(t=>t.isExpanded=e),this.group.isExpanded=e)}set enabledStandardFilters(e){e&&(this._enabledStandardFilters=e,this.isInitialized&&(this.filterIsAvailable=this.isFilterAvailable()))}get enabledStandardFilters(){return this._enabledStandardFilters}ngOnInit(){this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.type=this.filterGroups[this.level],this.queryParams=this.generateQueryParams(),this.canShowProjectData=this.calculateCanShowProject(),this.canShowClientData=this.calculateCanShowClient(),this.filterIsAvailable=this.isFilterAvailable(),this.isInitialized=!0,this.generateGroupPlaceholder()}get getDate(){return s(this.group.name).format(this.userFormat)}isFilterAvailable(){return this.type===n.a.USER||this.type===n.a.USER_GROUP?this.enabledStandardFilters.includes(o.i.USERS_AND_GROUP):this.type===n.a.DATE||this.type===n.a.MONTH||this.type===n.a.WEEK||this.enabledStandardFilters.includes(this.map.get(this.type))}calculateCanShowProject(){return!!this.group.name&&(this.type!==n.a.TASK||this.filterGroups[this.level-1]!==n.a.PROJECT&&this.filterGroups[this.level-2]!==n.a.PROJECT)}calculateCanShowClient(){return this.type!==n.a.TASK||this.filterGroups[this.level-1]!==n.a.CLIENT&&this.filterGroups[this.level-2]!==n.a.CLIENT}generateQueryParams(){if(!this.enableLinks)return;const e=Object(c.f)(this.switchReportService.queryParams);if(this.dateRange&&(e.start=this.dateRange.start.toISOString(),e.end=this.dateRange.end.toISOString()),this.type===n.a.TIMEENTRY)return this.group.name?e[this.map.get(this.type)]=this.group.name||"":e.withoutDescription=!0,e;if(this.type===n.a.DATE){const t=s.utc(this.group.name);return e.start=t.startOf("day").toISOString(),e.end=t.clone().endOf("day").toISOString(),e}if(this.type===n.a.WEEK){if(!this.group.name)return e;const t=this.group.name.split(" - "),i=s(t[0],this.userFormat).format("YYYY-MM-DD"),n=s(t[1],this.userFormat).format("YYYY-MM-DD");return e.start=s.utc(i).startOf("day").toISOString(),e.end=s.utc(n).clone().endOf("day").toISOString(),e}if(this.type===n.a.MONTH){if(!this.group.name)return e;const t=this.group.name.split(" - ");let i,n;return t.length>1?(n=s(t[1],"MMM DD, YYYY").format("YYYY-MM-DD"),i=s(t[0].concat(", ").concat(n.split("-")[0]),"MMM DD, YYYY").format("YYYY-MM-DD")):(i=s(t[0],"MMM YYYY").format("YYYY-MM-DD"),n=s(i).endOf("month").format("YYYY-MM-DD")),e.start=s.utc(i).startOf("day").toISOString(),e.end=s.utc(n).clone().endOf("day").toISOString(),e}if(this.type===n.a.USER_GROUP&&!this.group.ids.length)return e;let t=JSON.parse(e.filterValuesData);return t?t[this.map.get(this.type)]=this.group.ids.length?this.group.ids:[r.b]:t={[this.map.get(this.type)]:this.group.ids.length?this.group.ids:[r.b]},e.filterValuesData=JSON.stringify(t),e}clear(){this.queryParams.exclude&&(this.queryParams.exclude=this.queryParams.exclude.replace(this.group.type.toLowerCase()+"s",""))}navigate(){this.router.navigate(["/reports/detailed"],{queryParams:this.queryParams})}generateGroupPlaceholder(){this.groupTooltip=this.group.name?this.group.name:this.translate.instant("PROJECTS.NEW_PROJECT.WITHOUT_GROUPING_LABEL_NOTIFICATION",{projectGroupingLabel:this.group.withoutLabel}),this.group.clientName&&this.canShowProjectData&&this.canShowClientData&&(this.groupTooltip+=" - "+this.group.clientName)}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(h.f),d.Rb(u.a),d.Rb(l.a),d.Rb(a.a),d.Rb(p.d))},e.\u0275cmp=d.Lb({type:e,selectors:[["summary-group"],[""]],inputs:{group:"group",currency:"currency",format:"format",hideAmount:"hideAmount",amountOptions:"amountOptions",showEstimate:"showEstimate",filterGroups:"filterGroups",userFormat:"userFormat",activeBillableHours:"activeBillableHours",onlyAdminCanSeeAndChangeBillable:"onlyAdminCanSeeAndChangeBillable",workspace:"workspace",enableLinks:"enableLinks",dateRange:"dateRange",isExpanded:"isExpanded",level:"level",enabledStandardFilters:"enabledStandardFilters",reduceTable:"reduceTable"},decls:19,vars:18,consts:[[1,"cl-component-row","cl-flex-column","cl-flex-lg-row","cl-hover-shadow",3,"ngClass"],[1,"cl-reports-summary-table-col-1"],["class","cl-badge-same-entries-wrapper",3,"click",4,"ngIf"],[1,"cl-cut-text-wrapper"],[1,"cl-cut-text"],["class","cl-entry__project__dot",3,"background-color",4,"ngIf"],["class","cl-text-dark cl-hover-no-underline",3,"click",4,"ngIf","ngIfElse"],["textTemplate",""],["labelContentTemplate",""],[1,"cl-reports-summary-table-col-2"],[1,"cl-reports-summary-table-col-2-1"],[4,"ngIf"],["class","cl-reports-summary-table-col-2-2",4,"ngIf"],[1,"cl-badge-same-entries-wrapper",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-ml-0",3,"ngClass"],[1,"cl-entry__project__dot"],[1,"cl-text-dark","cl-hover-no-underline",3,"click"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["dateTemplate",""],[1,"cl-mr-2",3,"title"],["class","cl-text-gray-9",4,"ngIf"],[1,"cl-text-gray-9"],["class","cl-reports-summary-table-col-2-1",4,"ngIf"],[1,"cl-reports-summary-table-col-2-2"],["class","cl-reports-summary-table-col-2-2",4,"ngFor","ngForOf"],[3,"currency","format","isExpanded","group","showEstimate","filterGroups","level","hideAmount","userFormat","enabledStandardFilters","enableLinks","dateRange",4,"ngFor","ngForOf"],[3,"currency","format","isExpanded","group","showEstimate","filterGroups","level","hideAmount","userFormat","enabledStandardFilters","enableLinks","dateRange"]],template:function(e,t){if(1&e&&(d.Xb(0,"div",0),d.Xb(1,"div",1),d.Xc(2,C,3,4,"a",2),d.Xb(3,"div",3),d.Xb(4,"div",4),d.Xc(5,E,1,2,"i",5),d.Xc(6,S,2,1,"a",6),d.Xc(7,O,2,1,"ng-template",null,7,d.Yc),d.Xc(9,R,3,2,"ng-template",null,8,d.Yc),d.Wb(),d.Wb(),d.Wb(),d.Xb(11,"div",9),d.Xb(12,"div",10),d.Zc(13),d.oc(14,"timeFormat"),d.Wb(),d.Xc(15,j,4,3,"ng-container",11),d.Xc(16,M,4,6,"div",12),d.Xc(17,F,2,1,"ng-container",11),d.Wb(),d.Wb(),d.Xc(18,B,2,1,"ng-container",11)),2&e){const e=d.Lc(8);d.wc("ngClass",d.Cc(15,N,1===t.level?"cl-component-row-colored":"",2===t.level?"cl-component-row-colored-lvl-2 cl-summary-group-lvl-2":"")),d.Cb(1),d.Hb("cl-column-reduced",t.reduceTable),d.Cb(1),d.wc("ngIf",t.group.children),d.Cb(3),d.wc("ngIf",t.group.type===t.SummaryGroupColumn.PROJECT||0===t.group.level),d.Cb(1),d.wc("ngIf",t.enableLinks&&t.queryParams&&t.filterIsAvailable)("ngIfElse",e),d.Cb(7),d.ad(d.qc(14,12,t.group.duration,t.format)),d.Cb(2),d.wc("ngIf",t.showEstimate),d.Cb(1),d.wc("ngIf",!t.hideAmount&&!t.group.amounts),d.Cb(1),d.wc("ngIf",!t.hideAmount&&t.group.amounts),d.Cb(1),d.wc("ngIf",t.group.children&&t.group.isExpanded)}},directives:[b.r,b.u,b.B,b.t,e],pipes:[f.a,h.e,m.a,g.a],encapsulation:2,changeDetection:0}),e})()},EONh:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("ofXK"),s=i("3Pt+"),r=i("9Trn"),o=i("hT48"),a=i("iTUp"),c=i("dlKe"),l=i("LNDd"),u=i("1kSV"),d=i("sYmb"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.a,a.a,c.b,l.a,u.O,d.d]]}),e})()},EVdn:function(e,t,i){var n;!function(t,i){"use strict";"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,(function(i,s){"use strict";var r=[],o=Object.getPrototypeOf,a=r.slice,c=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},l=r.push,u=r.indexOf,d={},h=d.toString,p=d.hasOwnProperty,b=p.toString,f=b.call(Object),m={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},C=i.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,i){var n,s,r=(i=i||C).createElement("script");if(r.text=e,t)for(n in E)(s=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,s);i.head.appendChild(r).parentNode.removeChild(r)}function S(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var y=function(e,t){return new y.fn.init(e,t)};function O(e){var t=!!e&&"length"in e&&e.length,i=S(e);return!g(e)&&!v(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}y.fn=y.prototype={jquery:"3.6.0",constructor:y,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(y.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:r.sort,splice:r.splice},y.extend=y.fn.extend=function(){var e,t,i,n,s,r,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||g(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(l&&n&&(y.isPlainObject(n)||(s=Array.isArray(n)))?(i=o[t],r=s&&!Array.isArray(i)?[]:s||y.isPlainObject(i)?i:{},s=!1,o[t]=y.extend(l,r,n)):void 0!==n&&(o[t]=n));return o},y.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==h.call(e)||(t=o(e))&&("function"!=typeof(i=p.call(t,"constructor")&&t.constructor)||b.call(i)!==f))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){w(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(O(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(O(Object(e))?y.merge(i,"string"==typeof e?[e]:e):l.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:u.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;n<i;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,i){for(var n=[],s=0,r=e.length,o=!i;s<r;s++)!t(e[s],s)!==o&&n.push(e[s]);return n},map:function(e,t,i){var n,s,r=0,o=[];if(O(e))for(n=e.length;r<n;r++)null!=(s=t(e[r],r,i))&&o.push(s);else for(r in e)null!=(s=t(e[r],r,i))&&o.push(s);return c(o)},guid:1,support:m}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=r[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var A=function(e){var t,i,n,s,r,o,a,c,l,u,d,h,p,b,f,m,g,v,C,E="sizzle"+1*new Date,w=e.document,S=0,y=0,O=ce(),A=ce(),k=ce(),T=ce(),D=function(e,t){return e===t&&(d=!0),0},I={}.hasOwnProperty,_=[],R=_.pop,L=_.push,x=_.push,P=_.slice,j=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",X="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+X+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+X+"*("+F+")(?:"+X+"*([*^$|!~]?=)"+X+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+X+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",N=new RegExp(X+"+","g"),G=new RegExp("^"+X+"+|((?:^|[^\\\\])(?:\\\\.)*)"+X+"+$","g"),U=new RegExp("^"+X+"*,"+X+"*"),V=new RegExp("^"+X+"*([>+~]|"+X+")"+X+"*"),H=new RegExp(X+"|>"),Y=new RegExp(B),$=new RegExp("^"+F+"$"),z={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+X+"*(even|odd|(([+-]|)(\\d*)n|)"+X+"*(?:([+-]|)"+X+"*(\\d+)|))"+X+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+X+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+X+"*((?:-\\d)?\\d*)"+X+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+X+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){h()},oe=Ee((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{x.apply(_=P.call(w.childNodes),w.childNodes)}catch(Ae){x={apply:_.length?function(e,t){L.apply(e,P.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ae(e,t,n,s){var r,a,l,u,d,b,g,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!s&&(h(t),t=t||p,f)){if(11!==w&&(d=Q.exec(e)))if(r=d[1]){if(9===w){if(!(l=t.getElementById(r)))return n;if(l.id===r)return n.push(l),n}else if(v&&(l=v.getElementById(r))&&C(t,l)&&l.id===r)return n.push(l),n}else{if(d[2])return x.apply(n,t.getElementsByTagName(e)),n;if((r=d[3])&&i.getElementsByClassName&&t.getElementsByClassName)return x.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&!T[e+" "]&&(!m||!m.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===w&&(H.test(e)||V.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&i.scope||((u=t.getAttribute("id"))?u=u.replace(ne,se):t.setAttribute("id",u=E)),a=(b=o(e)).length;a--;)b[a]=(u?"#"+u:":scope")+" "+Ce(b[a]);g=b.join(",")}try{return x.apply(n,v.querySelectorAll(g)),n}catch(S){T(e,!0)}finally{u===E&&t.removeAttribute("id")}}}return c(e.replace(G,"$1"),t,n,s)}function ce(){var e=[];return function t(i,s){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=s}}function le(e){return e[E]=!0,e}function ue(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(Ae){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var i=e.split("|"),s=i.length;s--;)n.attrHandle[i[s]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function be(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le((function(t){return t=+t,le((function(i,n){for(var s,r=e([],i.length,t),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))}))}))}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=ae.support={},r=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!Z.test(e&&e.namespaceURI||t&&t.nodeName||"HTML")},h=ae.setDocument=function(e){var t,s,o=e?e.ownerDocument||e:w;return o!=p&&9===o.nodeType&&o.documentElement?(b=(p=o).documentElement,f=!r(p),w!=p&&(s=p.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",re,!1):s.attachEvent&&s.attachEvent("onunload",re)),i.scope=ue((function(e){return b.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),i.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=ue((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=J.test(p.getElementsByClassName),i.getById=ue((function(e){return b.appendChild(e).id=E,!p.getElementsByName||!p.getElementsByName(E).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i,n,s,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(s=t.getElementsByName(e),n=0;r=s[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},g=[],m=[],(i.qsa=J.test(p.querySelectorAll))&&(ue((function(e){var t;b.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+X+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+X+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+E+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+X+"*name"+X+"*="+X+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+X+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),b.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=J.test(v=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector||b.msMatchesSelector))&&ue((function(e){i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",B)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=J.test(b.compareDocumentPosition),C=t||J.test(b.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return d=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==p||e.ownerDocument==w&&C(w,e)?-1:t==p||t.ownerDocument==w&&C(w,t)?1:u?j(u,e)-j(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return d=!0,0;var i,n=0,s=e.parentNode,r=t.parentNode,o=[e],a=[t];if(!s||!r)return e==p?-1:t==p?1:s?-1:r?1:u?j(u,e)-j(u,t):0;if(s===r)return he(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?he(o[n],a[n]):o[n]==w?-1:a[n]==w?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),i.matchesSelector&&f&&!T[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Ae){T(t,!0)}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),C(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var s=n.attrHandle[t.toLowerCase()],r=s&&I.call(n.attrHandle,t.toLowerCase())?s(e,t,!f):void 0;return void 0!==r?r:i.attributes||!f?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ae.escape=function(e){return(e+"").replace(ne,se)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],s=0,r=0;if(d=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(D),d){for(;t=e[r++];)t===e[r]&&(s=n.push(r));for(;s--;)e.splice(n[s],1)}return u=null,e},s=ae.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=s(t);return i},(n=ae.selectors={cacheLength:50,createPseudo:le,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&Y.test(i)&&(t=o(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=O[e+" "];return t||(t=new RegExp("(^|"+X+")"+e+"("+X+"|$)"))&&O(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var s=ae.attr(n,e);return null==s?"!="===t:!t||(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s.replace(N," ")+" ").indexOf(i)>-1:"|="===t&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,c){var l,u,d,h,p,b,f=r!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!c&&!a,C=!1;if(m){if(r){for(;f;){for(h=t;h=h[f];)if(a?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;b=f="only"===e&&!b&&"nextSibling"}return!0}if(b=[o?m.firstChild:m.lastChild],o&&v){for(C=(p=(l=(u=(d=(h=m)[E]||(h[E]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===S&&l[1])&&l[2],h=p&&m.childNodes[p];h=++p&&h&&h[f]||(C=p=0)||b.pop();)if(1===h.nodeType&&++C&&h===t){u[e]=[S,p,C];break}}else if(v&&(C=p=(l=(u=(d=(h=t)[E]||(h[E]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===S&&l[1]),!1===C)for(;(h=++p&&h&&h[f]||(C=p=0)||b.pop())&&((a?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++C||(v&&((u=(d=h[E]||(h[E]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[S,C]),h!==t)););return(C-=s)===n||C%n==0&&C/n>=0}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return s[E]?s(t):s.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,i){for(var n,r=s(e,t),o=r.length;o--;)e[n=j(e,r[o])]=!(i[n]=r[o])})):function(e){return s(e,0,i)}):s}},pseudos:{not:le((function(e){var t=[],i=[],n=a(e.replace(G,"$1"));return n[E]?le((function(e,t,i,s){for(var r,o=n(e,null,s,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))})):function(e,s,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}})),has:le((function(e){return function(t){return ae(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ie),function(t){return(t.textContent||s(t)).indexOf(e)>-1}})),lang:le((function(e){return $.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===b},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,i){return[i<0?i+t:i]})),even:me((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:me((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:me((function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:me((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=be(t);function ve(){}function Ce(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function Ee(e,t,i){var n=t.dir,s=t.next,r=s||n,o=i&&"parentNode"===r,a=y++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,s);return!1}:function(t,i,c){var l,u,d,h=[S,a];if(c){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,c))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(u=(d=t[E]||(t[E]={}))[t.uniqueID]||(d[t.uniqueID]={}),s&&s===t.nodeName.toLowerCase())t=t[n]||t;else{if((l=u[r])&&l[0]===S&&l[1]===a)return h[2]=l[2];if(u[r]=h,h[2]=e(t,i,c))return!0}return!1}}function we(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function Se(e,t,i,n,s){for(var r,o=[],a=0,c=e.length,l=null!=t;a<c;a++)(r=e[a])&&(i&&!i(r,n,s)||(o.push(r),l&&t.push(a)));return o}function ye(e,t,i,n,s,r){return n&&!n[E]&&(n=ye(n)),s&&!s[E]&&(s=ye(s,r)),le((function(r,o,a,c){var l,u,d,h=[],p=[],b=o.length,f=r||function(e,t,i){for(var n=0,s=t.length;n<s;n++)ae(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),m=!e||!r&&t?f:Se(f,h,e,a,c),g=i?s||(r?e:b||n)?[]:o:m;if(i&&i(m,g,a,c),n)for(l=Se(g,p),n(l,[],a,c),u=l.length;u--;)(d=l[u])&&(g[p[u]]=!(m[p[u]]=d));if(r){if(s||e){if(s){for(l=[],u=g.length;u--;)(d=g[u])&&l.push(m[u]=d);s(null,g=[],l,c)}for(u=g.length;u--;)(d=g[u])&&(l=s?j(r,d):h[u])>-1&&(r[l]=!(o[l]=d))}}else g=Se(g===o?g.splice(b,g.length):g),s?s(null,o,g,c):x.apply(o,g)}))}function Oe(e){for(var t,i,s,r=e.length,o=n.relative[e[0].type],a=o||n.relative[" "],c=o?1:0,u=Ee((function(e){return e===t}),a,!0),d=Ee((function(e){return j(t,e)>-1}),a,!0),h=[function(e,i,n){var s=!o&&(n||i!==l)||((t=i).nodeType?u(e,i,n):d(e,i,n));return t=null,s}];c<r;c++)if(i=n.relative[e[c].type])h=[Ee(we(h),i)];else{if((i=n.filter[e[c].type].apply(null,e[c].matches))[E]){for(s=++c;s<r&&!n.relative[e[s].type];s++);return ye(c>1&&we(h),c>1&&Ce(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(G,"$1"),i,c<s&&Oe(e.slice(c,s)),s<r&&Oe(e=e.slice(s)),s<r&&Ce(e))}h.push(i)}return we(h)}return ve.prototype=n.filters=n.pseudos,n.setFilters=new ve,o=ae.tokenize=function(e,t){var i,s,r,o,a,c,l,u=A[e+" "];if(u)return t?0:u.slice(0);for(a=e,c=[],l=n.preFilter;a;){for(o in i&&!(s=U.exec(a))||(s&&(a=a.slice(s[0].length)||a),c.push(r=[])),i=!1,(s=V.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(G," ")}),a=a.slice(i.length)),n.filter)!(s=z[o].exec(a))||l[o]&&!(s=l[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return t?a.length:a?ae.error(e):A(e,c).slice(0)},a=ae.compile=function(e,t){var i,s=[],r=[],a=k[e+" "];if(!a){for(t||(t=o(e)),i=t.length;i--;)(a=Oe(t[i]))[E]?s.push(a):r.push(a);(a=k(e,function(e,t){var i=t.length>0,s=e.length>0,r=function(r,o,a,c,u){var d,b,m,g=0,v="0",C=r&&[],E=[],w=l,y=r||s&&n.find.TAG("*",u),O=S+=null==w?1:Math.random()||.1,A=y.length;for(u&&(l=o==p||o||u);v!==A&&null!=(d=y[v]);v++){if(s&&d){for(b=0,o||d.ownerDocument==p||(h(d),a=!f);m=e[b++];)if(m(d,o||p,a)){c.push(d);break}u&&(S=O)}i&&((d=!m&&d)&&g--,r&&C.push(d))}if(g+=v,i&&v!==g){for(b=0;m=t[b++];)m(C,E,o,a);if(r){if(g>0)for(;v--;)C[v]||E[v]||(E[v]=R.call(c));E=Se(E)}x.apply(c,E),u&&!r&&E.length>0&&g+t.length>1&&ae.uniqueSort(c)}return u&&(S=O,l=w),C};return i?le(r):r}(r,s))).selector=e}return a},c=ae.select=function(e,t,i,s){var r,c,l,u,d,h="function"==typeof e&&e,p=!s&&o(e=h.selector||e);if(i=i||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===t.nodeType&&f&&n.relative[c[1].type]){if(!(t=(n.find.ID(l.matches[0].replace(te,ie),t)||[])[0]))return i;h&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(r=z.needsContext.test(e)?0:c.length;r--&&!n.relative[u=(l=c[r]).type];)if((d=n.find[u])&&(s=d(l.matches[0].replace(te,ie),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(r,1),!(e=s.length&&Ce(c)))return x.apply(i,s),i;break}}return(h||a(e,p))(s,t,!f,i,!t||ee.test(e)&&ge(t.parentNode)||t),i},i.sortStable=E.split("").sort(D).join("")===E,i.detectDuplicates=!!d,h(),i.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(M,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(i);y.find=A,y.expr=A.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=A.uniqueSort,y.text=A.getText,y.isXMLDoc=A.isXML,y.contains=A.contains,y.escapeSelector=A.escape;var k=function(e,t,i){for(var n=[],s=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&y(e).is(i))break;n.push(e)}return n},T=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},D=y.expr.match.needsContext;function I(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var _=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(e,t,i){return g(t)?y.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?y.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?y.grep(e,(function(e){return u.call(t,e)>-1!==i})):y.filter(t,e,i)}y.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?y.find.matchesSelector(n,e)?[n]:[]:y.find.matches(e,y.grep(t,(function(e){return 1===e.nodeType})))},y.fn.extend({find:function(e){var t,i,n=this.length,s=this;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(t=0;t<n;t++)if(y.contains(s[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)y.find(e,s[t],i);return n>1?y.uniqueSort(i):i},filter:function(e){return this.pushStack(R(this,e||[],!1))},not:function(e){return this.pushStack(R(this,e||[],!0))},is:function(e){return!!R(this,"string"==typeof e&&D.test(e)?y(e):e||[],!1).length}});var L,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,t,i){var n,s;if(!e)return this;if(i=i||L,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:x.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(y.merge(this,y.parseHTML(n[1],(t=t instanceof y?t[0]:t)&&t.nodeType?t.ownerDocument||t:C,!0)),_.test(n[1])&&y.isPlainObject(t))for(n in t)g(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(s=C.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==i.ready?i.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,L=y(C);var P=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var t=y(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(y.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,s=this.length,r=[],o="string"!=typeof e&&y(e);if(!D.test(e))for(;n<s;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&y.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?y.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?u.call(y(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,i){return k(e,"parentNode",i)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,i){return k(e,"nextSibling",i)},prevUntil:function(e,t,i){return k(e,"previousSibling",i)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(I(e,"template")&&(e=e.content||e),y.merge([],e.childNodes))}},(function(e,t){y.fn[e]=function(i,n){var s=y.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=y.filter(n,s)),this.length>1&&(j[e]||y.uniqueSort(s),P.test(e)&&s.reverse()),this.pushStack(s)}}));var X=/[^\x20\t\r\n\f]+/g;function F(e){return e}function W(e){throw e}function B(e,t,i,n){var s;try{e&&g(s=e.promise)?s.call(e).done(t).fail(i):e&&g(s=e.then)?s.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}y.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return y.each(e.match(X)||[],(function(e,i){t[i]=!0})),t}(e):y.extend({},e);var t,i,n,s,r=[],o=[],a=-1,c=function(){for(s=s||e.once,n=t=!0;o.length;a=-1)for(i=o.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=r.length,i=!1);e.memory||(i=!1),t=!1,s&&(r=i?[]:"")},l={add:function(){return r&&(i&&!t&&(a=r.length-1,o.push(i)),function t(i){y.each(i,(function(i,n){g(n)?e.unique&&l.has(n)||r.push(n):n&&n.length&&"string"!==S(n)&&t(n)}))}(arguments),i&&!t&&c()),this},remove:function(){return y.each(arguments,(function(e,t){for(var i;(i=y.inArray(t,r,i))>-1;)r.splice(i,1),i<=a&&a--})),this},has:function(e){return e?y.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=i="",this},disabled:function(){return!r},lock:function(){return s=o=[],i||t||(r=i=""),this},locked:function(){return!!s},fireWith:function(e,i){return s||(i=[e,(i=i||[]).slice?i.slice():i],o.push(i),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},y.extend({Deferred:function(e){var t=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return s.then(null,e)},pipe:function(){var e=arguments;return y.Deferred((function(i){y.each(t,(function(t,n){var s=g(e[n[4]])&&e[n[4]];r[n[1]]((function(){var e=s&&s.apply(this,arguments);e&&g(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,s?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,s){var r=0;function o(e,t,n,s){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(e<r)){if((i=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");g(l=i&&("object"==typeof i||"function"==typeof i)&&i.then)?s?l.call(i,o(r,t,F,s),o(r,t,W,s)):(r++,l.call(i,o(r,t,F,s),o(r,t,W,s),o(r,t,F,t.notifyWith))):(n!==F&&(a=void 0,c=[i]),(s||t.resolveWith)(a,c))}},u=s?l:function(){try{l()}catch(i){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(i,u.stackTrace),e+1>=r&&(n!==W&&(a=void 0,c=[i]),t.rejectWith(a,c))}};e?u():(y.Deferred.getStackHook&&(u.stackTrace=y.Deferred.getStackHook()),i.setTimeout(u))}}return y.Deferred((function(i){t[0][3].add(o(0,i,g(s)?s:F,i.notifyWith)),t[1][3].add(o(0,i,g(e)?e:F)),t[2][3].add(o(0,i,g(n)?n:W))})).promise()},promise:function(e){return null!=e?y.extend(e,s):s}},r={};return y.each(t,(function(e,i){var o=i[2],a=i[5];s[i[1]]=o.add,a&&o.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=o.fireWith})),s.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),s=a.call(arguments),r=y.Deferred(),o=function(e){return function(i){n[e]=this,s[e]=arguments.length>1?a.call(arguments):i,--t||r.resolveWith(n,s)}};if(t<=1&&(B(e,r.done(o(i)).resolve,r.reject,!t),"pending"===r.state()||g(s[i]&&s[i].then)))return r.then();for(;i--;)B(s[i],o(i),r.reject);return r.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&N.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},y.readyException=function(e){i.setTimeout((function(){throw e}))};var G=y.Deferred();function U(){C.removeEventListener("DOMContentLoaded",U),i.removeEventListener("load",U),y.ready()}y.fn.ready=function(e){return G.then(e).catch((function(e){y.readyException(e)})),this},y.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||G.resolveWith(C,[y]))}}),y.ready.then=G.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?i.setTimeout(y.ready):(C.addEventListener("DOMContentLoaded",U),i.addEventListener("load",U));var V=function(e,t,i,n,s,r,o){var a=0,c=e.length,l=null==i;if("object"===S(i))for(a in s=!0,i)V(e,t,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,g(n)||(o=!0),l&&(o?(t.call(e,n),t=null):(l=t,t=function(e,t,i){return l.call(y(e),i)})),t))for(;a<c;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return s?e:l?t.call(e):c?t(e[0],i):r},H=/^-ms-/,Y=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function z(e){return e.replace(H,"ms-").replace(Y,$)}var Z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=y.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[z(t)]=i;else for(n in t)s[z(n)]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][z(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(z):(t=z(t))in n?[t]:t.match(X)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||y.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!y.isEmptyObject(t)}};var q=new K,J=new K,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Q.test(e)?JSON.parse(e):e)}(i)}catch(s){}J.set(e,t,i)}else i=void 0;return i}y.extend({hasData:function(e){return J.hasData(e)||q.hasData(e)},data:function(e,t,i){return J.access(e,t,i)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,i){return q.access(e,t,i)},_removeData:function(e,t){q.remove(e,t)}}),y.fn.extend({data:function(e,t){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===e){if(this.length&&(s=J.get(r),1===r.nodeType&&!q.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=z(n.slice(5)),te(r,n,s[n]));q.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each((function(){J.set(this,e)})):V(this,(function(t){var i;if(r&&void 0===t)return void 0!==(i=J.get(r,e))||void 0!==(i=te(r,e))?i:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),y.extend({queue:function(e,t,i){var n;if(e)return n=q.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=q.access(e,t,y.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=y.queue(e,t=t||"fx"),n=i.length,s=i.shift(),r=y._queueHooks(e,t);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete r.stop,s.call(e,(function(){y.dequeue(e,t)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return q.get(e,i)||q.access(e,i,{empty:y.Callbacks("once memory").add((function(){q.remove(e,[t+"queue",i])}))})}}),y.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?y.queue(this[0],e):void 0===t?this:this.each((function(){var i=y.queue(this,e,t);y._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&y.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){y.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=y.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=q.get(r[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],re=C.documentElement,oe=function(e){return y.contains(e.ownerDocument,e)},ae={composed:!0};re.getRootNode&&(oe=function(e){return y.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===y.css(e,"display")};function le(e,t,i,n){var s,r,o=20,a=n?function(){return n.cur()}:function(){return y.css(e,t,"")},c=a(),l=i&&i[3]||(y.cssNumber[t]?"":"px"),u=e.nodeType&&(y.cssNumber[t]||"px"!==l&&+c)&&ne.exec(y.css(e,t));if(u&&u[3]!==l){for(l=l||u[3],u=+(c/=2)||1;o--;)y.style(e,t,u+l),(1-r)*(1-(r=a()/c||.5))<=0&&(o=0),u/=r;y.style(e,t,(u*=2)+l),i=i||[]}return i&&(u=+u||+c||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=u,n.end=s)),s}var ue={};function de(e){var t,i=e.ownerDocument,n=e.nodeName,s=ue[n];return s||(t=i.body.appendChild(i.createElement(n)),s=y.css(t,"display"),t.parentNode.removeChild(t),"none"===s&&(s="block"),ue[n]=s,s)}function he(e,t){for(var i,n,s=[],r=0,o=e.length;r<o;r++)(n=e[r]).style&&(i=n.style.display,t?("none"===i&&(s[r]=q.get(n,"display")||null,s[r]||(n.style.display="")),""===n.style.display&&ce(n)&&(s[r]=de(n))):"none"!==i&&(s[r]="none",q.set(n,"display",i)));for(r=0;r<o;r++)null!=s[r]&&(e[r].style.display=s[r]);return e}y.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?y(this).show():y(this).hide()}))}});var pe,be,fe=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;pe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),pe.appendChild(be),m.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",m.option=!!pe.lastChild;var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ce(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&I(e,t)?y.merge([e],i):i}function Ee(e,t){for(var i=0,n=e.length;i<n;i++)q.set(e[i],"globalEval",!t||q.get(t[i],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,m.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function Se(e,t,i,n,s){for(var r,o,a,c,l,u,d=t.createDocumentFragment(),h=[],p=0,b=e.length;p<b;p++)if((r=e[p])||0===r)if("object"===S(r))y.merge(h,r.nodeType?[r]:r);else if(we.test(r)){for(o=o||d.appendChild(t.createElement("div")),a=(me.exec(r)||["",""])[1].toLowerCase(),o.innerHTML=(c=ve[a]||ve._default)[1]+y.htmlPrefilter(r)+c[2],u=c[0];u--;)o=o.lastChild;y.merge(h,o.childNodes),(o=d.firstChild).textContent=""}else h.push(t.createTextNode(r));for(d.textContent="",p=0;r=h[p++];)if(n&&y.inArray(r,n)>-1)s&&s.push(r);else if(l=oe(r),o=Ce(d.appendChild(r),"script"),l&&Ee(o),i)for(u=0;r=o[u++];)ge.test(r.type||"")&&i.push(r);return d}var ye=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Ae(){return!1}function ke(e,t){return e===function(){try{return C.activeElement}catch(e){}}()==("focus"===t)}function Te(e,t,i,n,s,r){var o,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Te(e,a,i,n,t[a],r);return e}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=Ae;else if(!s)return e;return 1===r&&(o=s,(s=function(e){return y().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=y.guid++)),e.each((function(){y.event.add(this,t,s,n,i)}))}function De(e,t,i){i?(q.set(e,t,!1),y.event.add(e,t,{namespace:!1,handler:function(e){var n,s,r=q.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(y.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),q.set(this,t,r),n=i(this,t),this[t](),r!==(s=q.get(this,t))||n?q.set(this,t,!1):s={},r!==s)return e.stopImmediatePropagation(),e.preventDefault(),s&&s.value}else r.length&&(q.set(this,t,{value:y.event.trigger(y.extend(r[0],y.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===q.get(e,t)&&y.event.add(e,t,Oe)}y.event={global:{},add:function(e,t,i,n,s){var r,o,a,c,l,u,d,h,p,b,f,m=q.get(e);if(Z(e))for(i.handler&&(i=(r=i).handler,s=r.selector),s&&y.find.matchesSelector(re,s),i.guid||(i.guid=y.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==y&&y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(X)||[""]).length;l--;)p=f=(a=ye.exec(t[l])||[])[1],b=(a[2]||"").split(".").sort(),p&&(d=y.event.special[p]||{},d=y.event.special[p=(s?d.delegateType:d.bindType)||p]||{},u=y.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&y.expr.match.needsContext.test(s),namespace:b.join(".")},r),(h=c[p])||((h=c[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,b,o)||e.addEventListener&&e.addEventListener(p,o)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),s?h.splice(h.delegateCount++,0,u):h.push(u),y.event.global[p]=!0)},remove:function(e,t,i,n,s){var r,o,a,c,l,u,d,h,p,b,f,m=q.hasData(e)&&q.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(X)||[""]).length;l--;)if(p=f=(a=ye.exec(t[l])||[])[1],b=(a[2]||"").split(".").sort(),p){for(d=y.event.special[p]||{},h=c[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=h.length;r--;)u=h[r],!s&&f!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,b,m.handle)||y.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)y.event.remove(e,p+t[l],i,n,!0);y.isEmptyObject(c)&&q.remove(e,"handle events")}},dispatch:function(e){var t,i,n,s,r,o,a=new Array(arguments.length),c=y.event.fix(e),l=(q.get(this,"events")||Object.create(null))[c.type]||[],u=y.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=y.event.handlers.call(this,c,l),t=0;(s=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==r.namespace&&!c.rnamespace.test(r.namespace)||(c.handleObj=r,c.data=r.data,void 0!==(n=((y.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a))&&!1===(c.result=n)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var i,n,s,r,o,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(r=[],o={},i=0;i<c;i++)void 0===o[s=(n=t[i]).selector+" "]&&(o[s]=n.needsContext?y(s,this).index(l)>-1:y.find(s,this,null,[l]).length),o[s]&&r.push(n);r.length&&a.push({elem:l,handlers:r})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&I(t,"input")&&De(t,"click",Oe),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&I(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&I(t,"input")&&q.get(t,"click")||I(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},(function(e,t){y.event.special[e]={setup:function(){return De(this,e,ke),!1},trigger:function(){return De(this,e),!0},_default:function(){return!0},delegateType:t}})),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;return s&&(s===n||y.contains(n,s))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}})),y.fn.extend({on:function(e,t,i,n){return Te(this,e,t,i,n)},one:function(e,t,i,n){return Te(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,y(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Ae),this.each((function(){y.event.remove(this,e,i,t)}))}});var Ie=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return I(e,"table")&&I(11!==t.nodeType?t:t.firstChild,"tr")&&y(e).children("tbody")[0]||e}function xe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var i,n,s,r,o,a;if(1===t.nodeType){if(q.hasData(e)&&(a=q.get(e).events))for(s in q.remove(t,"handle events"),a)for(i=0,n=a[s].length;i<n;i++)y.event.add(t,s,a[s][i]);J.hasData(e)&&(r=J.access(e),o=y.extend({},r),J.set(t,o))}}function Me(e,t){var i=t.nodeName.toLowerCase();"input"===i&&fe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Xe(e,t,i,n){t=c(t);var s,r,o,a,l,u,d=0,h=e.length,p=h-1,b=t[0],f=g(b);if(f||h>1&&"string"==typeof b&&!m.checkClone&&_e.test(b))return e.each((function(s){var r=e.eq(s);f&&(t[0]=b.call(this,s,r.html())),Xe(r,t,i,n)}));if(h&&(r=(s=Se(t,e[0].ownerDocument,!1,e,n)).firstChild,1===s.childNodes.length&&(s=r),r||n)){for(a=(o=y.map(Ce(s,"script"),xe)).length;d<h;d++)l=s,d!==p&&(l=y.clone(l,!0,!0),a&&y.merge(o,Ce(l,"script"))),i.call(e[d],l,d);if(a)for(u=o[o.length-1].ownerDocument,y.map(o,Pe),d=0;d<a;d++)ge.test((l=o[d]).type||"")&&!q.access(l,"globalEval")&&y.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?y._evalUrl&&!l.noModule&&y._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):w(l.textContent.replace(Re,""),l,u))}return e}function Fe(e,t,i){for(var n,s=t?y.filter(t,e):e,r=0;null!=(n=s[r]);r++)i||1!==n.nodeType||y.cleanData(Ce(n)),n.parentNode&&(i&&oe(n)&&Ee(Ce(n,"script")),n.parentNode.removeChild(n));return e}y.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,s,r,o,a=e.cloneNode(!0),c=oe(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(o=Ce(a),n=0,s=(r=Ce(e)).length;n<s;n++)Me(r[n],o[n]);if(t)if(i)for(r=r||Ce(e),o=o||Ce(a),n=0,s=r.length;n<s;n++)je(r[n],o[n]);else je(e,a);return(o=Ce(a,"script")).length>0&&Ee(o,!c&&Ce(e,"script")),a},cleanData:function(e){for(var t,i,n,s=y.event.special,r=0;void 0!==(i=e[r]);r++)if(Z(i)){if(t=i[q.expando]){if(t.events)for(n in t.events)s[n]?y.event.remove(i,n):y.removeEvent(i,n,t.handle);i[q.expando]=void 0}i[J.expando]&&(i[J.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return V(this,(function(e){return void 0===e?y.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Xe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)}))},prepend:function(){return Xe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Xe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Xe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(y.cleanData(Ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return y.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ie.test(e)&&!ve[(me.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(y.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Xe(this,arguments,(function(t){var i=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(Ce(this)),i&&i.replaceChild(t,this))}),e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){y.fn[e]=function(e){for(var i,n=[],s=y(e),r=s.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),y(s[o])[t](i),l.apply(n,i.get());return this.pushStack(n)}}));var We=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Be=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Ne=function(e,t,i){var n,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];for(s in n=i.call(e),t)e.style[s]=r[s];return n},Ge=new RegExp(se.join("|"),"i");function Ue(e,t,i){var n,s,r,o,a=e.style;return(i=i||Be(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||oe(e)||(o=y.style(e,t)),!m.pixelBoxStyles()&&We.test(o)&&Ge.test(t)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(l).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),s=36===t(e.width),u.style.position="absolute",r=12===t(u.offsetWidth/3),re.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var n,s,r,o,a,c,l=C.createElement("div"),u=C.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,y.extend(m,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,n,s;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),s=i.getComputedStyle(t),a=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var He=["Webkit","Moz","ms"],Ye=C.createElement("div").style,$e={};function ze(e){return y.cssProps[e]||$e[e]||(e in Ye?e:$e[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=He.length;i--;)if((e=He[i]+t)in Ye)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,qe={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Qe(e,t,i){var n=ne.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function et(e,t,i,n,s,r){var o="width"===t?1:0,a=0,c=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(c+=y.css(e,i+se[o],!0,s)),n?("content"===i&&(c-=y.css(e,"padding"+se[o],!0,s)),"margin"!==i&&(c-=y.css(e,"border"+se[o]+"Width",!0,s))):(c+=y.css(e,"padding"+se[o],!0,s),"padding"!==i?c+=y.css(e,"border"+se[o]+"Width",!0,s):a+=y.css(e,"border"+se[o]+"Width",!0,s));return!n&&r>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-c-a-.5))||0),c}function tt(e,t,i){var n=Be(e),s=(!m.boxSizingReliable()||i)&&"border-box"===y.css(e,"boxSizing",!1,n),r=s,o=Ue(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(o)){if(!i)return o;o="auto"}return(!m.boxSizingReliable()&&s||!m.reliableTrDimensions()&&I(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===y.css(e,"display",!1,n))&&e.getClientRects().length&&(s="border-box"===y.css(e,"boxSizing",!1,n),(r=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+et(e,t,i||(s?"border":"content"),r,n,o)+"px"}function it(e,t,i,n,s){return new it.prototype.init(e,t,i,n,s)}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ue(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,o,a=z(t),c=Ke.test(t),l=e.style;if(c||(t=ze(a)),o=y.cssHooks[t]||y.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(e,!1,n))?s:l[t];"string"==(r=typeof i)&&(s=ne.exec(i))&&s[1]&&(i=le(e,t,s),r="number"),null!=i&&i==i&&("number"!==r||c||(i+=s&&s[3]||(y.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(c?l.setProperty(t,i):l[t]=i))}},css:function(e,t,i,n){var s,r,o,a=z(t);return Ke.test(t)||(t=ze(a)),(o=y.cssHooks[t]||y.cssHooks[a])&&"get"in o&&(s=o.get(e,!0,i)),void 0===s&&(s=Ue(e,t,n)),"normal"===s&&t in Je&&(s=Je[t]),""===i||i?(r=parseFloat(s),!0===i||isFinite(r)?r||0:s):s}}),y.each(["height","width"],(function(e,t){y.cssHooks[t]={get:function(e,i,n){if(i)return!Ze.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,n):Ne(e,qe,(function(){return tt(e,t,n)}))},set:function(e,i,n){var s,r=Be(e),o=!m.scrollboxSize()&&"absolute"===r.position,a=(o||n)&&"border-box"===y.css(e,"boxSizing",!1,r),c=n?et(e,t,n,a,r):0;return a&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-et(e,t,"border",!1,r)-.5)),c&&(s=ne.exec(i))&&"px"!==(s[3]||"px")&&(e.style[t]=i,i=y.css(e,t)),Qe(0,i,c)}}})),y.cssHooks.marginLeft=Ve(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Ne(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),y.each({margin:"",padding:"",border:"Width"},(function(e,t){y.cssHooks[e+t]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];n<4;n++)s[e+se[n]+t]=r[n]||r[n-2]||r[0];return s}},"margin"!==e&&(y.cssHooks[e+t].set=Qe)})),y.fn.extend({css:function(e,t){return V(this,(function(e,t,i){var n,s,r={},o=0;if(Array.isArray(t)){for(n=Be(e),s=t.length;o<s;o++)r[t[o]]=y.css(e,t[o],!1,n);return r}return void 0!==i?y.style(e,t,i):y.css(e,t)}),e,t,arguments.length>1)}}),y.Tween=it,(it.prototype={constructor:it,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||y.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(y.cssNumber[i]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return e&&e.get?e.get(this):it.propHooks._default.get(this)},run:function(e){var t,i=it.propHooks[this.prop];return this.pos=t=this.options.duration?y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):it.propHooks._default.set(this),this}}).init.prototype=it.prototype,(it.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=y.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):1!==e.elem.nodeType||!y.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:y.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},y.fx=it.prototype.init,y.fx.step={};var nt,st,rt=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){st&&(!1===C.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(at):i.setTimeout(at,y.fx.interval),y.fx.tick())}function ct(){return i.setTimeout((function(){nt=void 0})),nt=Date.now()}function lt(e,t){var i,n=0,s={height:e};for(t=t?1:0;n<4;n+=2-t)s["margin"+(i=se[n])]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function ut(e,t,i){for(var n,s=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,t,e))return n}function dt(e,t,i){var n,s,r=0,o=dt.prefilters.length,a=y.Deferred().always((function(){delete c.elem})),c=function(){if(s)return!1;for(var t=nt||ct(),i=Math.max(0,l.startTime+l.duration-t),n=1-(i/l.duration||0),r=0,o=l.tweens.length;r<o;r++)l.tweens[r].run(n);return a.notifyWith(e,[l,n,i]),n<1&&o?i:(o||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},i),originalProperties:t,originalOptions:i,startTime:nt||ct(),duration:i.duration,tweens:[],createTween:function(t,i){var n=y.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)l.tweens[i].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var i,n,s,r,o;for(i in e)if(s=t[n=z(i)],r=e[i],Array.isArray(r)&&(s=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(o=y.cssHooks[n])&&"expand"in o)for(i in r=o.expand(r),delete e[n],r)i in e||(e[i]=r[i],t[i]=s);else t[n]=s}(u,l.opts.specialEasing);r<o;r++)if(n=dt.prefilters[r].call(l,e,u,l.opts))return g(n.stop)&&(y._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return y.map(u,ut,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),y.fx.timer(y.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}y.Animation=y.extend(dt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return le(i.elem,e,ne.exec(t),i),i}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(X);for(var i,n=0,s=e.length;n<s;n++)(dt.tweeners[i=e[n]]=dt.tweeners[i]||[]).unshift(t)},prefilters:[function(e,t,i){var n,s,r,o,a,c,l,u,d="width"in t||"height"in t,h=this,p={},b=e.style,f=e.nodeType&&ce(e),m=q.get(e,"fxshow");for(n in i.queue||(null==(o=y._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,y.queue(e,"fx").length||o.empty.fire()}))}))),t)if(rt.test(s=t[n])){if(delete t[n],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||y.style(e,n)}if((c=!y.isEmptyObject(t))||!y.isEmptyObject(p))for(n in d&&1===e.nodeType&&(i.overflow=[b.overflow,b.overflowX,b.overflowY],null==(l=m&&m.display)&&(l=q.get(e,"display")),"none"===(u=y.css(e,"display"))&&(l?u=l:(he([e],!0),l=e.style.display||l,u=y.css(e,"display"),he([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===y.css(e,"float")&&(c||(h.done((function(){b.display=l})),null==l&&(l="none"===(u=b.display)?"":u)),b.display="inline-block")),i.overflow&&(b.overflow="hidden",h.always((function(){b.overflow=i.overflow[0],b.overflowX=i.overflow[1],b.overflowY=i.overflow[2]}))),c=!1,p)c||(m?"hidden"in m&&(f=m.hidden):m=q.access(e,"fxshow",{display:l}),r&&(m.hidden=!f),f&&he([e],!0),h.done((function(){for(n in f||he([e]),q.remove(e,"fxshow"),p)y.style(e,n,p[n])}))),c=ut(f?m[n]:0,n,h),n in m||(m[n]=c.start,f&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),y.speed=function(e,t,i){var n=e&&"object"==typeof e?y.extend({},e):{complete:i||!i&&t||g(e)&&e,duration:e,easing:i&&t||t&&!g(t)&&t};return y.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in y.fx.speeds?y.fx.speeds[n.duration]:y.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&y.dequeue(this,n.queue)},n},y.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=y.isEmptyObject(e),r=y.speed(t,i,n),o=function(){var t=dt(this,y.extend({},e),r);(s||q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,s=null!=e&&e+"queueHooks",r=y.timers,o=q.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&ot.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(i),t=!1,r.splice(s,1));!t&&i||y.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=q.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=y.timers,o=n?n.length:0;for(i.finish=!0,y.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),y.each(["toggle","show","hide"],(function(e,t){var i=y.fn[t];y.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(t,!0),e,n,s)}})),y.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){y.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),y.timers=[],y.fx.tick=function(){var e,t=0,i=y.timers;for(nt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||y.fx.stop(),nt=void 0},y.fx.timer=function(e){y.timers.push(e),y.fx.start()},y.fx.interval=13,y.fx.start=function(){st||(st=!0,at())},y.fx.stop=function(){st=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(e,t){return e=y.fx&&y.fx.speeds[e]||e,this.queue(t=t||"fx",(function(t,n){var s=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(s)}}))},function(){var e=C.createElement("input"),t=C.createElement("select").appendChild(C.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=C.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var ht,pt=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return V(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){y.removeAttr(this,e)}))}}),y.extend({attr:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?y.prop(e,t,i):(1===r&&y.isXMLDoc(e)||(s=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?ht:void 0)),void 0!==i?null===i?void y.removeAttr(e,t):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=y.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&I(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,s=t&&t.match(X);if(s&&1===e.nodeType)for(;i=s[n++];)e.removeAttribute(i)}}),ht={set:function(e,t,i){return!1===t?y.removeAttr(e,i):e.setAttribute(i,i),i}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=pt[t]||y.find.attr;pt[t]=function(e,t,n){var s,r,o=t.toLowerCase();return n||(r=pt[o],pt[o]=s,s=null!=i(e,t,n)?o:null,pt[o]=r),s}}));var bt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function mt(e){return(e.match(X)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(X)||[]}y.fn.extend({prop:function(e,t){return V(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[y.propFix[e]||e]}))}}),y.extend({prop:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&y.isXMLDoc(e)||(s=y.propHooks[t=y.propFix[t]||t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(y.propHooks.selected={get:function(e){return null},set:function(e){}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this})),y.fn.extend({addClass:function(e){var t,i,n,s,r,o,a,c=0;if(g(e))return this.each((function(t){y(this).addClass(e.call(this,t,gt(this)))}));if((t=vt(e)).length)for(;i=this[c++];)if(s=gt(i),n=1===i.nodeType&&" "+mt(s)+" "){for(o=0;r=t[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s!==(a=mt(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,s,r,o,a,c=0;if(g(e))return this.each((function(t){y(this).removeClass(e.call(this,t,gt(this)))}));if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;i=this[c++];)if(s=gt(i),n=1===i.nodeType&&" "+mt(s)+" "){for(o=0;r=t[o++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");s!==(a=mt(n))&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):g(e)?this.each((function(i){y(this).toggleClass(e.call(this,i,gt(this),t),t)})):this.each((function(){var t,s,r,o;if(n)for(s=0,r=y(this),o=vt(e);t=o[s++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||((t=gt(this))&&q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":q.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+mt(gt(i))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;y.fn.extend({val:function(e){var t,i,n,s=this[0];return arguments.length?(n=g(e),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?e.call(this,i,y(this).val()):e)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=y.map(s,(function(e){return null==e?"":e+""}))),(t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))}))):s?(t=y.valHooks[s.type]||y.valHooks[s.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(Ct,""):null==i?"":i:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:mt(y.text(e))}},select:{get:function(e){var t,i,n,s=e.options,r=e.selectedIndex,o="select-one"===e.type,a=o?null:[],c=o?r+1:s.length;for(n=r<0?c:o?r:0;n<c;n++)if(((i=s[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(t=y(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,s=e.options,r=y.makeArray(t),o=s.length;o--;)((n=s[o]).selected=y.inArray(y.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=y.inArray(y(e).val(),t)>-1}},m.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in i;var Et=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};y.extend(y.event,{trigger:function(e,t,n,s){var r,o,a,c,l,u,d,h,b=[n||C],f=p.call(e,"type")?e.type:e,m=p.call(e,"namespace")?e.namespace.split("."):[];if(o=h=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Et.test(f+y.event.triggered)&&(f.indexOf(".")>-1&&(m=f.split("."),f=m.shift(),m.sort()),l=f.indexOf(":")<0&&"on"+f,(e=e[y.expando]?e:new y.Event(f,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:y.makeArray(t,[e]),d=y.event.special[f]||{},s||!d.trigger||!1!==d.trigger.apply(n,t))){if(!s&&!d.noBubble&&!v(n)){for(Et.test((c=d.delegateType||f)+f)||(o=o.parentNode);o;o=o.parentNode)b.push(o),a=o;a===(n.ownerDocument||C)&&b.push(a.defaultView||a.parentWindow||i)}for(r=0;(o=b[r++])&&!e.isPropagationStopped();)h=o,e.type=r>1?c:d.bindType||f,(u=(q.get(o,"events")||Object.create(null))[e.type]&&q.get(o,"handle"))&&u.apply(o,t),(u=l&&o[l])&&u.apply&&Z(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=f,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(b.pop(),t)||!Z(n)||l&&g(n[f])&&!v(n)&&((a=n[l])&&(n[l]=null),y.event.triggered=f,e.isPropagationStopped()&&h.addEventListener(f,wt),n[f](),e.isPropagationStopped()&&h.removeEventListener(f,wt),y.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,i){var n=y.extend(new y.Event,i,{type:e,isSimulated:!0});y.event.trigger(n,null,t)}}),y.fn.extend({trigger:function(e,t){return this.each((function(){y.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return y.event.trigger(e,t,i,!0)}}),m.focusin||y.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,s=q.access(n,t);s||n.addEventListener(e,i,!0),q.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,s=q.access(n,t)-1;s?q.access(n,t,s):(n.removeEventListener(e,i,!0),q.remove(n,t))}}}));var St=i.location,yt={guid:Date.now()},Ot=/\?/;y.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(s){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||y.error("Invalid XML: "+(n?y.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var At=/\[\]$/,kt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var s;if(Array.isArray(t))y.each(t,(function(t,s){i||At.test(e)?n(e,s):It(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,i,n)}));else if(i||"object"!==S(t))n(e,t);else for(s in t)It(e+"["+s+"]",t[s],i,n)}y.param=function(e,t){var i,n=[],s=function(e,t){var i=g(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,(function(){s(this.name,this.value)}));else for(i in e)It(i,e[i],t,s);return n.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&Dt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var i=y(this).val();return null==i?null:Array.isArray(i)?y.map(i,(function(e){return{name:t.name,value:e.replace(kt,"\r\n")}})):{name:t.name,value:i.replace(kt,"\r\n")}})).get()}});var _t=/%20/g,Rt=/#.*$/,Lt=/([?&])_=[^&]*/,xt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,jt=/^\/\//,Mt={},Xt={},Ft="*/".concat("*"),Wt=C.createElement("a");function Bt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,r=t.toLowerCase().match(X)||[];if(g(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Nt(e,t,i,n){var s={},r=e===Xt;function o(a){var c;return s[a]=!0,y.each(e[a]||[],(function(e,a){var l=a(t,i,n);return"string"!=typeof l||r||s[l]?r?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),c}return o(t.dataTypes[0])||!s["*"]&&o("*")}function Gt(e,t){var i,n,s=y.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((s[i]?e:n||(n={}))[i]=t[i]);return n&&y.extend(!0,e,n),e}Wt.href=St.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,y.ajaxSettings),t):Gt(y.ajaxSettings,e)},ajaxPrefilter:Bt(Mt),ajaxTransport:Bt(Xt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var n,s,r,o,a,c,l,u,d,h,p=y.ajaxSetup({},t=t||{}),b=p.context||p,f=p.context&&(b.nodeType||b.jquery)?y(b):y.event,m=y.Deferred(),g=y.Callbacks("once memory"),v=p.statusCode||{},E={},w={},S="canceled",O={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=xt.exec(r);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?r:null},setRequestHeader:function(e,t){return null==l&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,E[e]=t),this},overrideMimeType:function(e){return null==l&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)O.always(e[O.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||S;return n&&n.abort(t),A(0,t),this}};if(m.promise(O),p.url=((e||p.url||St.href)+"").replace(jt,St.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(X)||[""],null==p.crossDomain){c=C.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Wt.protocol+"//"+Wt.host!=c.protocol+"//"+c.host}catch(k){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=y.param(p.data,p.traditional)),Nt(Mt,p,t,O),l)return O;for(d in(u=y.event&&p.global)&&0==y.active++&&y.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pt.test(p.type),s=p.url.replace(Rt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(_t,"+")):(h=p.url.slice(s.length),p.data&&(p.processData||"string"==typeof p.data)&&(s+=(Ot.test(s)?"&":"?")+p.data,delete p.data),!1===p.cache&&(s=s.replace(Lt,"$1"),h=(Ot.test(s)?"&":"?")+"_="+yt.guid+++h),p.url=s+h),p.ifModified&&(y.lastModified[s]&&O.setRequestHeader("If-Modified-Since",y.lastModified[s]),y.etag[s]&&O.setRequestHeader("If-None-Match",y.etag[s])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&O.setRequestHeader("Content-Type",p.contentType),O.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]),p.headers)O.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(b,O,p)||l))return O.abort();if(S="abort",g.add(p.complete),O.done(p.success),O.fail(p.error),n=Nt(Xt,p,t,O)){if(O.readyState=1,u&&f.trigger("ajaxSend",[O,p]),l)return O;p.async&&p.timeout>0&&(a=i.setTimeout((function(){O.abort("timeout")}),p.timeout));try{l=!1,n.send(E,A)}catch(k){if(l)throw k;A(-1,k)}}else A(-1,"No Transport");function A(e,t,o,c){var d,h,C,E,w,S=t;l||(l=!0,a&&i.clearTimeout(a),n=void 0,r=c||"",O.readyState=e>0?4:0,d=e>=200&&e<300||304===e,o&&(E=function(e,t,i){for(var n,s,r,o,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){c.unshift(s);break}if(c[0]in i)r=c[0];else{for(s in i){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==c[0]&&c.unshift(r),i[r]}(p,O,o)),!d&&y.inArray("script",p.dataTypes)>-1&&y.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),E=function(e,t,i,n){var s,r,o,a,c,l={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=r,r=u.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(!(o=l[c+" "+r]||l["* "+r]))for(s in l)if((a=s.split(" "))[1]===r&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[s]:!0!==l[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(k){return{state:"parsererror",error:o?k:"No conversion from "+c+" to "+r}}}return{state:"success",data:t}}(p,E,O,d),d?(p.ifModified&&((w=O.getResponseHeader("Last-Modified"))&&(y.lastModified[s]=w),(w=O.getResponseHeader("etag"))&&(y.etag[s]=w)),204===e||"HEAD"===p.type?S="nocontent":304===e?S="notmodified":(S=E.state,h=E.data,d=!(C=E.error))):(C=S,!e&&S||(S="error",e<0&&(e=0))),O.status=e,O.statusText=(t||S)+"",d?m.resolveWith(b,[h,S,O]):m.rejectWith(b,[O,S,C]),O.statusCode(v),v=void 0,u&&f.trigger(d?"ajaxSuccess":"ajaxError",[O,p,d?h:C]),g.fireWith(b,[O,S]),u&&(f.trigger("ajaxComplete",[O,p]),--y.active||y.event.trigger("ajaxStop")))}return O},getJSON:function(e,t,i){return y.get(e,t,i,"json")},getScript:function(e,t){return y.get(e,void 0,t,"script")}}),y.each(["get","post"],(function(e,t){y[t]=function(e,i,n,s){return g(i)&&(s=s||n,n=i,i=void 0),y.ajax(y.extend({url:e,type:t,dataType:s,data:i,success:n},y.isPlainObject(e)&&e))}})),y.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),y._evalUrl=function(e,t,i){return y.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){y.globalEval(e,t,i)}})},y.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){y(this).wrapInner(e.call(this,t))})):this.each((function(){var t=y(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(i){y(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){y(this).replaceWith(this.childNodes)})),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Vt=y.ajaxSettings.xhr();m.cors=!!Vt&&"withCredentials"in Vt,m.ajax=Vt=!!Vt,y.ajaxTransport((function(e){var t,n;if(m.cors||Vt&&!e.crossDomain)return{send:function(s,r){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ut[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(c){if(t)throw c}},abort:function(){t&&t()}}})),y.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),y.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,s){t=y("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),C.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Ht,Yt=[],$t=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||y.expando+"_"+yt.guid++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",(function(e,t,n){var s,r,o,a=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace($t,"$1"+s):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||y.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=i[s],i[s]=function(){o=arguments},n.always((function(){void 0===r?y(i).removeProp(s):i[s]=r,e[s]&&(e.jsonpCallback=t.jsonpCallback,Yt.push(s)),o&&g(r)&&r(o[0]),o=r=void 0})),"script"})),m.createHTMLDocument=((Ht=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ht.childNodes.length),y.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((n=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(n)):t=C),r=!i&&[],(s=_.exec(e))?[t.createElement(s[1])]:(s=Se([e],t,r),r&&r.length&&y(r).remove(),y.merge([],s.childNodes)));var n,s,r},y.fn.load=function(e,t,i){var n,s,r,o=this,a=e.indexOf(" ");return a>-1&&(n=mt(e.slice(a)),e=e.slice(0,a)),g(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),o.length>0&&y.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done((function(e){r=arguments,o.html(n?y("<div>").append(y.parseHTML(e)).find(n):e)})).always(i&&function(e,t){o.each((function(){i.apply(this,r||[e.responseText,t,e])}))}),this},y.expr.pseudos.animated=function(e){return y.grep(y.timers,(function(t){return e===t.elem})).length},y.offset={setOffset:function(e,t,i){var n,s,r,o,a,c,l=y.css(e,"position"),u=y(e),d={};"static"===l&&(e.style.position="relative"),a=u.offset(),r=y.css(e,"top"),c=y.css(e,"left"),("absolute"===l||"fixed"===l)&&(r+c).indexOf("auto")>-1?(o=(n=u.position()).top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(c)||0),g(t)&&(t=t.call(e,i,y.extend({},a))),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+s),"using"in t?t.using.call(e,d):u.css(d)}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){y.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?{top:(t=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:t.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],s={top:0,left:0};if("fixed"===y.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===y.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((s=y(e).offset()).top+=y.css(e,"borderTopWidth",!0),s.left+=y.css(e,"borderLeftWidth",!0))}return{top:t.top-s.top-y.css(n,"marginTop",!0),left:t.left-s.left-y.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||re}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;y.fn[e]=function(n){return V(this,(function(e,n,s){var r;if(v(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===s)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:s,i?s:r.pageYOffset):e[n]=s}),e,n,arguments.length)}})),y.each(["top","left"],(function(e,t){y.cssHooks[t]=Ve(m.pixelPosition,(function(e,i){if(i)return i=Ue(e,t),We.test(i)?y(e).position()[t]+"px":i}))})),y.each({Height:"height",Width:"width"},(function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){y.fn[n]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(!0===s||!0===r?"margin":"border");return V(this,(function(t,i,s){var r;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===s?y.css(t,i,a):y.style(t,i,s,a)}),t,o?s:void 0,o)}}))})),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){y.fn[t]=function(e){return this.on(t,e)}})),y.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){y.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;y.proxy=function(e,t){var i,n,s;if("string"==typeof t&&(i=e[t],t=e,e=i),g(e))return n=a.call(arguments,2),(s=function(){return e.apply(t||this,n.concat(a.call(arguments)))}).guid=e.guid=e.guid||y.guid++,s},y.holdReady=function(e){e?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=I,y.isFunction=g,y.isWindow=v,y.camelCase=z,y.type=S,y.now=Date.now,y.isNumeric=function(e){var t=y.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},y.trim=function(e){return null==e?"":(e+"").replace(zt,"")},void 0===(n=(function(){return y}).apply(t,[]))||(e.exports=n);var Zt=i.jQuery,Kt=i.$;return y.noConflict=function(e){return i.$===y&&(i.$=Kt),e&&i.jQuery===y&&(i.jQuery=Zt),y},void 0===s&&(i.jQuery=i.$=y),y}))},EcEN:function(e,t,i){var n=i("xDdU"),s=i("xk4V"),r=s;r.v1=n,r.v4=s,e.exports=r},EcM4:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{selectAllGlobally(e){this.isSelectedAllGlobally=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})()},Fcjm:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e["Round up to"]="WORKSPACE.TIME_ROUNDING_MODAL.RADIO_BUTTONS.OPTION_1.TITLE",e["Round to nearest"]="WORKSPACE.TIME_ROUNDING_MODAL.RADIO_BUTTONS.OPTION_2.TITLE",e["Round down to"]="WORKSPACE.TIME_ROUNDING_MODAL.RADIO_BUTTONS.OPTION_3.TITLE",e}({})},FfKB:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("Kj3r"),s=i("1G5W"),r=i("fXoL"),o=i("XNiG"),a=i("1Tmk"),c=i("ofXK"),l=i("lvCY"),u=i("sYmb");let d=(()=>{class e{constructor(e,t){this.workspaceService=e,this.cd=t,this.inProgress=!1,this.changed=new r.n,this.billable$=new o.a,this.unsubscribe$=new o.a}ngOnInit(){this.subscribeToBillable(),this.setCurrency()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setCurrency(){if(null!=this.userCurrency)this.currency=this.getCurrency(this.userCurrency.toUpperCase());else{const e=this.workspaceService.getLocalDefaultWorkspace();this.currency=this.getCurrency(e.hourlyRate.currency.toUpperCase())}}getCurrency(e){return l.z.indexOf(e)>-1?Object(c.L)(e,"narrow"):Object(c.L)("USD","narrow")}selectDollar(){this.disableEdit||this.inProgress||(this.billable=!this.billable,this.billable$.next(this.billable))}subscribeToBillable(){this.billable$.pipe(Object(n.a)(300),Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.changed.emit(this.billable)})}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(a.a),r.Rb(r.h))},e.\u0275cmp=r.Lb({type:e,selectors:[["billable-icon"],["","billable-icon",""]],inputs:{disableEdit:"disableEdit",billable:"billable",inProgress:["billableInProgress","inProgress"],userCurrency:"userCurrency"},outputs:{changed:"changed"},decls:5,vars:8,consts:[["tabindex","0",1,"cl-non-selectable",3,"click","keyup.space","keyup.enter"],["icon",""],[1,"currency"]],template:function(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",0,1),r.jc("click",(function(){r.Oc(e);const i=r.Lc(1);return t.selectDollar(),i.blur()}))("keyup.space",(function(){return t.selectDollar()}))("keyup.enter",(function(){return t.selectDollar()})),r.oc(2,"translate"),r.Xb(3,"span",2),r.Zc(4),r.Wb(),r.Wb()}2&e&&(r.Hb("pointer",!t.disableEdit),r.Db("title",r.pc(2,6,t.billable?"GLOBAL.BILLABLE_LABEL":"GLOBAL.NON_BILLABLE_LABEL")),r.Cb(3),r.Hb("billableOn",t.billable),r.Cb(1),r.ad(t.currency))},pipes:[u.e],encapsulation:2,changeDetection:0}),e})()},FiyT:function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();t.SubjectSubscription=function(e){function t(t,i){var n=e.call(this)||this;return n.subject=t,n.subscriber=i,n.closed=!1,n}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var i=t.indexOf(this.subscriber);-1!==i&&t.splice(i,1)}}},t}(i("zB/H").Subscription)},"Fn+O":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("ofXK"),s=i("3Pt+"),r=i("9Trn"),o=i("hT48"),a=i("iTUp"),c=i("dlKe"),l=i("1kSV"),u=i("tyNb"),d=i("sYmb"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,u.h,r.a,o.a,a.a,c.b,l.O,d.d]]}),e})()},Fnfa:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("jy+1"),s=i("fXoL");let r=(()=>{class e{transform(e){const t=e.sort(Object(n.c)(e=>e.toLowerCase(),!1));return"".concat(t.map(e=>e).join(", "))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"displayNames",type:e,pure:!0}),e})()},FpXt:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("sYmb"),r=i("djKD"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[n.c,s.d.forChild({compiler:{provide:s.a,useClass:r.b},isolate:!1,extend:!0})],s.d]}),e})()},Fruv:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("B01t"),r=i("wd/R"),o=i("lGQG"),a=i("XNiG"),c=i("Kj3r"),l=i("6t6a"),u=i("jtSf"),d=i("hV/V"),h=i("sYmb"),p=i("ofXK");function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.jc("click",(function(){return n.Oc(e),n.nc().openDatepicker()})),n.Sb(1,"img",4),n.Xb(2,"span",7),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(3),n.bd(" ",n.pc(4,1,e.label)," ")}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",8),n.jc("showDaterangepicker",(function(){return n.Oc(e),n.nc().onDatepickerOpen()}))("hideDaterangepicker",(function(t){return n.Oc(e),n.nc().onDatepickerClose(t)}))("selected",(function(t){return n.Oc(e),n.nc().setSelectedDate(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("options",e.options)}}let m=(()=>{class e{constructor(e,t,i,s,r){this.authService=e,this.translate=t,this.renderer=i,this.translationStore=s,this.cd=r,this.hideRanges=!1,this.isUtc=!0,this.onDateSelect=new n.n,this.isRendered=!0,this.emitDebouncer$=new a.a,this.unsubscribe$=new a.a}set minDate(e){this._minDate=e,e&&this.isInitialized&&(this.options.minDate=this.stringDateToObject(e),this.resetView())}get minDate(){return this._minDate}set referenceDay(e){this._referenceDay=e,e&&this.isInitialized&&(this.initRanges(),this.resetView())}get referenceDay(){return this._referenceDay}set date(e){this.applyDate(e)}set noInitialDate(e){this._noInitialDate=e,e&&(this.label=l.a.SELECT_DATE,this.selectedDate=r())}get noInitialDate(){return this._noInitialDate}ngOnInit(){var e,t;const i=this.authService.getUser();if(this.format=(null===(e=null==i?void 0:i.settings)||void 0===e?void 0:e.dateFormat)||"MM/DD/YYYY",this.startOfWeek=this.startOfWeek||(null===(t=null==i?void 0:i.settings)||void 0===t?void 0:t.weekStart)||"MONDAY",this.initOptions(),this.emitDebouncer$.pipe(Object(c.a)(400)).subscribe(()=>this.emitDateRange()),this.isInitialized=!0,this.invoiceDate){const e=Array.from(document.querySelectorAll(".cl-datepicker-wrapper"));document.documentElement.clientWidth<990&&setTimeout(()=>{e.map(e=>e.addEventListener("click",()=>{const e=Array.from(document.querySelectorAll(".daterangepicker"));e[1].style.width="250px",document.documentElement.clientHeight<700&&(e[0].style.top="55%")}))},1)}}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}applyDate(e){e&&(this.selectedDate=this.stringDateToObject(e),this.isInitialized&&(this.setDateToPicker(),this.setLabel()),this.backupValue=this.selectedDate.clone())}stringDateToObject(e){const t=this.isUtc?r.utc(e):r(e);return r().set({date:t.date(),month:t.month(),year:t.year()}).startOf("day")}setSelectedDate(e){this.onSelectedDate(e.start,e.label),this.isDateSelected=!0}onDatepickerOpen(){this.isDateSelected=!1,this.isDatepickerOpen=!0,this.cssClass&&this.renderer.addClass(document.getElementsByTagName("body")[0],this.cssClass)}openDatepicker(){this.isDatepickerOpen||this.picker.datePicker&&this.picker.datePicker.show()}onDatepickerClose(e){this.isDatepickerOpen=!1,this.isDateSelected||(setTimeout(()=>{this.onSelectedDate(e.picker.startDate,e.picker.chosenLabel)}),this.cssClass&&this.renderer.removeClass(document.getElementsByTagName("body")[0],this.cssClass))}onSelectedDate(e,t){const i=e.clone();this.selectedDate=i,this.setLabel(),this.emitDebouncer$.next()}emitDateRange(){var e;if(null===(e=this.backupValue)||void 0===e?void 0:e.isSame(this.selectedDate,"day"))return;this.backupValue=this.selectedDate.clone();const t=this.selectedDate.clone().startOf("day"),i=this.isUtc?t.add(t.utcOffset(),"m").toISOString():t.toISOString();this.onDateSelect.emit({date:i,label:this.label})}setDateToPicker(){this.picker&&(this.picker.datePicker.setStartDate(this.selectedDate.clone()),this.picker.datePicker.setEndDate(this.selectedDate.clone()))}initOptions(){const e=this.minDate?this.stringDateToObject(this.minDate):r(0);this.selectedDate.isBefore(e)&&console.warn("Single datepicker with list: Selected date is before minimum date!!!");const t=this.translationStore.getCurrentLang(),i=Object(u.e)(t,"dd"),n=r().locale(t);this.options={singleDatePicker:!0,locale:{format:this.format,firstDay:(["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"].indexOf(this.startOfWeek)+1)%7,daysOfWeek:i,monthNames:n.localeData().monthsShort()},isInvalidDate:e=>Object(u.a)(r(e._d),this.workingDays,this.holidays),alwaysShowCalendars:!0,startDate:this.selectedDate,timePicker:!1,autoApply:!0,opens:"left",showCustomRangeLabel:!1,minDate:e},this.initRanges()}initRanges(){if(this.hideRanges)return;this.options.showRanges=!0;const e=this.referenceDay?this.stringDateToObject(this.referenceDay):r().startOf("day");this.options.ranges={[this.translate.instant(l.a.UPON_RECEIPT)]:[e.clone(),e.clone()],[this.translate.instant(l.a.AFTER_10)]:[e.clone().add(10,"day"),e.clone().add(10,"day")],[this.translate.instant(l.a.AFTER_15)]:[e.clone().add(15,"day"),e.clone().add(15,"day")],[this.translate.instant(l.a.AFTER_30)]:[e.clone().add(30,"day"),e.clone().add(30,"day")],[this.translate.instant(l.a.AFTER_60)]:[e.clone().add(60,"day"),e.clone().add(60,"day")],[this.translate.instant(l.a.AFTER_90)]:[e.clone().add(90,"day"),e.clone().add(90,"day")]},this.noInitialDate||this.setLabel()}setLabel(){const e=this.referenceDay?this.stringDateToObject(this.referenceDay):r().startOf("day"),{label:t}=this.standardLabel?Object(u.c)(this.selectedDate,this.translate):Object(u.b)(this.selectedDate,e);this.label=t}resetView(){this.isRendered=!1,this.isRendered=!0,this.cd.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(h.f),n.Rb(n.F),n.Rb(d.a),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["datepicker-single-with-list"]],viewQuery:function(e,t){var i;1&e&&n.gd(s.b,!0),2&e&&n.Kc(i=n.kc())&&(t.picker=i.first)},inputs:{hideRanges:"hideRanges",isUtc:"isUtc",startOfWeek:"startOfWeek",workingDays:"workingDays",holidays:"holidays",minDate:"minDate",referenceDay:"referenceDay",date:"date",cssClass:"cssClass",standardLabel:"standardLabel",invoiceDate:"invoiceDate",noInitialDate:"noInitialDate"},outputs:{onDateSelect:"onDateSelect"},decls:6,vars:2,consts:[[1,"cl-btn-group","cl-d-flex"],[1,"cl-relative","cl-datepicker-wrapper","cl-w-100"],["class","cl-datepicker-fake-input cl-d-flex cl-align-items-center cl-px-2 pointer cl-btn cl-btn-outline-light",3,"click",4,"ngIf"],[1,"cl-btn","cl-btn-outline-light","cl-py-0","cl-px-2","cl-d-flex",2,"opacity","1",3,"click"],["src","assets/images/ui-icons/calendar.svg"],["daterangepicker","","class","cl-border-0 cl-bg-transparent cl-datepickerrange cl-btn cl-pr-0 cl-text-left",3,"options","showDaterangepicker","hideDaterangepicker","selected",4,"ngIf"],[1,"cl-datepicker-fake-input","cl-d-flex","cl-align-items-center","cl-px-2","pointer","cl-btn","cl-btn-outline-light",3,"click"],[1,"cl-datepickerrange","cl-pl-2","cl-cut-text","cl-text-left"],["daterangepicker","",1,"cl-border-0","cl-bg-transparent","cl-datepickerrange","cl-btn","cl-pr-0","cl-text-left",3,"options","showDaterangepicker","hideDaterangepicker","selected"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xc(2,b,5,3,"div",2),n.Xb(3,"a",3),n.jc("click",(function(){return t.openDatepicker()})),n.Sb(4,"img",4),n.Xc(5,f,1,1,"input",5),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.wc("ngIf",t.label&&!t.isDatepickerOpen),n.Cb(3),n.wc("ngIf",t.isRendered))},directives:[p.u,s.b],pipes:[h.e],encapsulation:2}),e})()},FsCY:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("ofXK");function r(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",2),n.jc("click",(function(){return n.Oc(e),n.nc().dismissed.emit()})),n.Xb(1,"span"),n.Zc(2,"\xd7"),n.Wb(),n.Wb()}}const o=["*"];let a=(()=>{class e{constructor(){this.dismiss=!1,this.dismissed=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["info"],["","info",""]],inputs:{dismiss:"dismiss"},outputs:{dismissed:"dismissed"},ngContentSelectors:o,decls:3,vars:1,consts:[[1,"cl-alert","cl-alert-info","cl-mb-0","cl-alert-dismissible"],["class","cl-close",3,"click",4,"ngIf"],[1,"cl-close",3,"click"]],template:function(e,t){1&e&&(n.vc(),n.Xb(0,"div",0),n.uc(1),n.Xc(2,r,3,0,"a",1),n.Wb()),2&e&&(n.Cb(2),n.wc("ngIf",t.dismiss))},directives:[s.u],encapsulation:2,changeDetection:0}),e})()},G7Sd:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("lGQG"),s=i("fXoL"),r=i("ofXK"),o=i("tyNb"),a=i("sYmb");function c(e,t){1&e&&(s.Xb(0,"a",12),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.Cb(1),s.ad(s.pc(2,1,"REPORTS.SHARE_REPORT.FEATURES_LABEL")))}const l=function(){return["/signup"]};function u(e,t){1&e&&(s.Xb(0,"a",13),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.wc("routerLink",s.Ac(4,l)),s.Cb(1),s.ad(s.pc(2,2,"GLOBAL.SIGNUP_LABEL")))}const d=function(){return["/login"]};function h(e,t){1&e&&(s.Xb(0,"a",14),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.wc("routerLink",s.Ac(4,d)),s.Cb(1),s.ad(s.pc(2,2,"GLOBAL.LOG_IN_LABEL")))}const p=function(){return["/tracker"]};function b(e,t){1&e&&(s.Xb(0,"a",14),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.wc("routerLink",s.Ac(4,p)),s.Cb(1),s.ad(s.pc(2,2,"REPORTS.SHARE_REPORT.REDIRECT_TRACKER_BRN")))}function f(e,t){if(1&e&&(s.Xb(0,"div",5),s.Xb(1,"div"),s.Xb(2,"a",6),s.Sb(3,"img",7),s.Wb(),s.Xc(4,c,3,3,"a",8),s.Wb(),s.Xb(5,"div",9),s.Xc(6,u,3,5,"a",10),s.Xc(7,h,3,5,"a",11),s.Xc(8,b,3,5,"a",11),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Cb(4),s.wc("ngIf",!e.isLoggedIn),s.Cb(2),s.wc("ngIf",!e.isLoggedIn),s.Cb(1),s.wc("ngIf",!e.isLoggedIn),s.Cb(1),s.wc("ngIf",e.isLoggedIn)}}const m=["*"];let g=(()=>{class e{constructor(e){this.authService=e}ngOnInit(){this.isLoggedIn=this.authService.isLoggedIn()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["empty-shared-report"]],inputs:{imagePath:"imagePath",title:"title",hideHeader:"hideHeader"},ngContentSelectors:m,decls:7,vars:3,consts:[["class","cl-d-flex cl-align-items-center cl-justify-content-between cl-bg-info-light cl-p-3",4,"ngIf"],[1,"cl-page-wrapper"],[1,"cl-mt-5","cl-text-center"],[3,"src"],[1,"cl-mt-3"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-between","cl-bg-info-light","cl-p-3"],["href","https://clockify.me/feature-list"],["src","assets/images/logo.svg"],["class","cl-ml-3 cl-text-dark",4,"ngIf"],[1,"cl-d-flex","cl-justify-content-between","cl-align-items-center"],["class","cl-mr-3 cl-text-dark",3,"routerLink",4,"ngIf"],["class","cl-btn cl-btn-primary",3,"routerLink",4,"ngIf"],[1,"cl-ml-3","cl-text-dark"],[1,"cl-mr-3","cl-text-dark",3,"routerLink"],[1,"cl-btn","cl-btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(s.vc(),s.Xc(0,f,9,4,"div",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Sb(3,"img",3),s.Xb(4,"h2",4),s.Zc(5),s.Wb(),s.uc(6),s.Wb(),s.Wb()),2&e&&(s.wc("ngIf",!t.hideHeader),s.Cb(3),s.wc("src",t.imagePath,s.Qc),s.Cb(2),s.ad(t.title))},directives:[r.u,o.g],pipes:[a.e],encapsulation:2}),e})()},GAki:function(e,t,i){"use strict";i.d(t,"a",(function(){return We}));var n=i("pLZG"),s=i("1G5W"),r=i("Kj3r"),o=i("/uUt"),a=i("IzEk"),c=i("fXoL"),l=i("XNiG"),u=(i("tnjF"),i("npmQ")),d=i("lGQG"),h=i("VTb6"),p=i("UMzN"),b=i("1Tmk"),f=(i("O3o7"),i("i6c7")),m=i("zDGq"),g=i("huA5"),v=i("V3bs"),C=i("9Gc3"),E=i("27el"),w=i("y+xF"),S=i("xoOP"),y=i("lvCY"),O=i("1kSV"),A=i("sYmb"),k=i("3Pt+"),T=i("ofXK"),D=i("gcYM");let I=(()=>{class e{constructor(e){this.elementRef=e,this.throttleMs=200,this.throttlePx=150,this.scrollTriggerDistance=500,this.scrollPositionDisable=!1,this.onGroupScroll=new c.n,this.onChildScroll=new c.n,this.debouncer$=new l.a,this.unsubscribe$=new l.a}keyup(e){this.debouncer$.next(e)}ngOnInit(){if(this.scrollPositionDisable)return;let e=this.elementRef.nativeElement.scrollTop,t=this.elementRef.nativeElement.scrollTop;this.debouncer$.pipe(Object(D.a)(this.throttleMs),Object(n.a)(()=>{const t=this.elementRef.nativeElement.scrollTop,i=t>e;return e=t,i}),Object(n.a)(()=>{const e=this.elementRef.nativeElement.scrollTop;return Math.abs(e-t)>this.throttlePx&&(t=e,!0)}),Object(s.a)(this.unsubscribe$)).subscribe(e=>{const{bottom:t,top:i}=this.elementRef.nativeElement.getBoundingClientRect();this.scrollParentAttribute&&this.onScrollEnd(t,i,this.scrollParentAttribute,!0),this.scrollChildAttribute&&this.onScrollEnd(t,i,this.scrollChildAttribute,!1)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onScrollEnd(e,t,i,n){(Array.from(this.elementRef.nativeElement.querySelectorAll(`[${i}]`))||[]).forEach((i,s)=>{const r=i.getBoundingClientRect().bottom;if(r<e+this.scrollTriggerDistance&&!(r<t))if(n)this.onGroupScroll.emit(s);else{const e=i.getAttribute("childscrollindexes").split("_");this.onChildScroll.emit({parentIndex:Number(e[0]),childIndex:Number(e[1])})}})}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(c.l))},e.\u0275dir=c.Mb({type:e,selectors:[["scrollPosition"],["","scrollPosition",""]],hostBindings:function(e,t){1&e&&c.jc("scroll",(function(e){return t.keyup(e)}))},inputs:{scrollParentAttribute:"scrollParentAttribute",scrollChildAttribute:"scrollChildAttribute",throttleMs:"throttleMs",throttlePx:"throttlePx",scrollTriggerDistance:"scrollTriggerDistance",scrollPositionDisable:"scrollPositionDisable"},outputs:{onGroupScroll:"onGroupScroll",onChildScroll:"onChildScroll"},exportAs:["scrollPosition"]}),e})();var _=i("dlKe");function R(e,t){1&e&&c.Sb(0,"img",2)}function L(e,t){1&e&&c.Sb(0,"img",3)}let x=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["select-arrow"]],inputs:{isOpen:"isOpen"},decls:3,vars:2,consts:[["src","assets/images/ui-icons/chevron-down.svg","doNotCloseDropdown","",4,"ngIf","ngIfElse"],["arrowUp",""],["src","assets/images/ui-icons/chevron-down.svg","doNotCloseDropdown",""],["src","assets/images/ui-icons/select-arrow-up.svg","doNotCloseDropdown",""]],template:function(e,t){if(1&e&&(c.Xc(0,R,1,0,"img",0),c.Xc(1,L,1,0,"ng-template",null,1,c.Yc)),2&e){const e=c.Lc(2);c.wc("ngIf",!t.isOpen)("ngIfElse",e)}},directives:[T.u],encapsulation:2,changeDetection:0}),e})(),P=(()=>{class e{constructor(){this.close=new c.n,this.onSubmit=new c.n,this.inputValue=""}save(){this.inputValue=this.inputValue.trim(),this.inputValue&&this.onSubmit.emit(this.inputValue)}closeModal(){this.close.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Lb({type:e,selectors:[["create-modal"]],inputs:{title:"title",inProgress:"inProgress"},outputs:{close:"close",onSubmit:"onSubmit"},decls:17,vars:9,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-col-lg-custom-auto"],[1,"cl-form-group"],["ngbAutofocus","",1,"cl-form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Zc(2),c.Wb(),c.Xb(3,"button",2),c.jc("click",(function(){return t.closeModal()})),c.Xb(4,"span",3),c.Sb(5,"img",4),c.Wb(),c.Wb(),c.Wb(),c.Xb(6,"div",5),c.Xb(7,"div",6),c.Xb(8,"div",7),c.Xb(9,"input",8),c.jc("ngModelChange",(function(e){return t.inputValue=e}))("keyup.enter",(function(){return t.save()})),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(10,"div",9),c.Xb(11,"a",10),c.jc("click",(function(){return t.closeModal()})),c.Zc(12),c.oc(13,"translate"),c.Wb(),c.Xb(14,"button",11),c.jc("click",(function(){return t.save()})),c.Zc(15),c.oc(16,"translate"),c.Wb(),c.Wb()),2&e&&(c.Cb(2),c.ad(t.title),c.Cb(7),c.wc("ngModel",t.inputValue),c.Cb(3),c.ad(c.pc(13,5,"GLOBAL.CANCEL_BTN")),c.Cb(2),c.wc("disabled",t.inProgress),c.Cb(1),c.ad(c.pc(16,7,"GLOBAL.SAVE_LABEL")))},directives:[k.c,k.s,k.v],pipes:[A.e],encapsulation:2}),e})();i("j4ir");var j=i("okBH"),M=i("xShd");function X(e,t){if(1&e&&(c.Xb(0,"span",19),c.Zc(1),c.Wb()),2&e){const e=c.nc().$implicit;c.Cb(1),c.bd(" - ",null==e||null==e.client?null:e.client.name," ")}}function F(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",20),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleTasks(t)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleTasks(t)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleTasks(t)})),c.Xb(1,"span",21),c.Zc(2),c.Wb(),c.Sb(3,"select-arrow",22),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Cb(2),c.bd("",e.taskCount||e.tasks.length," Tasks"),c.Cb(1),c.wc("isOpen",e.isSelected)}}function W(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",23),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(),n=c.Lc(14);return i.selectedProject=t,i.openModal(n)})),c.Zc(1),c.oc(2,"translate"),c.Wb()}2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.SHARED.CREATE_TASK_LABEL")," "))}function B(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",24),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleProjectFavorite(t)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleProjectFavorite(t)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc().toggleProjectFavorite(t)})),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Hb("cl-active",e.favorite)}}function N(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",30),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(2).$implicit;return c.nc().changeTaskFavoriteStatus(i,t)})),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Hb("cl-active",e.favorite)}}function G(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",27),c.Xb(2,"a",28),c.jc("click",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc().selectProjectAndTask(n,i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc().selectProjectAndTask(n,i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc().selectProjectAndTask(n,i)})),c.Zc(3),c.Wb(),c.Xc(4,N,1,2,"a",29),c.Wb(),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc(3);c.Cb(3),c.bd(" ",e.name," "),c.Cb(1),c.wc("ngIf",i.isFavoriteFeatureEnabled)}}function U(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",31),c.Xb(2,"a",32,33),c.jc("click",(function(){c.Oc(e);const t=c.nc(2).$implicit,i=c.nc(),n=c.Lc(14);return i.selectedProject=t,i.openModal(n)}))("keyup.enter",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(),s=c.Lc(14);return n.selectedProject=i,n.openModal(s),t.blur()}))("keyup.space",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(),s=c.Lc(14);return n.selectedProject=i,n.openModal(s),t.blur()})),c.Sb(4,"img",34),c.Xb(5,"span",35),c.Zc(6),c.oc(7,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Ub()}2&e&&(c.Cb(6),c.bd(" ",c.pc(7,1,"SHARED_MODULES.SHARED.CREATE_NEW_TASK_LABEL")," "))}function V(e,t){if(1&e&&(c.Xb(0,"div",25),c.Xc(1,G,5,2,"ng-container",7),c.oc(2,"sortTasks"),c.Xc(3,U,8,3,"ng-container",26),c.Wb()),2&e){const e=c.nc(),t=e.index,i=e.$implicit,n=c.nc();c.Db("childscrollindexes",t),c.Cb(1),c.wc("ngForOf",c.qc(2,3,i.tasks,n.isFavorite)),c.Cb(2),c.wc("ngIf",(null==i.tasks?null:i.tasks.length)&&(n.hasCreateTaskPermission||i.isUserManagerForProject))}}function H(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",9),c.Xb(2,"div",10),c.Xb(3,"button",11),c.jc("click",(function(){c.Oc(e);const i=t.$implicit;return c.nc().pickProject(i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit;return c.nc().pickProject(i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit;return c.nc().pickProject(i)})),c.Sb(4,"i",12),c.Zc(5),c.Xc(6,X,2,1,"span",13),c.Wb(),c.Xb(7,"div",14),c.Xc(8,F,4,2,"a",15),c.Xc(9,W,3,3,"a",16),c.Xc(10,B,1,2,"a",17),c.Wb(),c.Wb(),c.Wb(),c.Xc(11,V,4,6,"div",18),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc();c.Cb(1),c.Hb("cl-open",e.isSelected),c.Cb(1),c.Db("title",i.workspace.forceTasks&&0===e.tasks.length?"Task is required and there is no tasks on this project.":null),c.Cb(1),c.Wc("color",e.color),c.wc("disabled",i.workspace.forceTasks&&0===e.tasks.length),c.Cb(1),c.Wc("background-color",e.color),c.Cb(1),c.bd(" ",e.name," "),c.Cb(1),c.wc("ngIf",i.isFavorite&&(null==e.client?null:e.client.name)),c.Cb(2),c.wc("ngIf",e.taskCount||e.tasks.length),c.Cb(1),c.wc("ngIf",!(null!=e.tasks&&e.tasks.length)&&!e.taskCount&&(i.hasCreateTaskPermission||e.isUserManagerForProject)),c.Cb(1),c.wc("ngIf",i.isFavoriteFeatureEnabled),c.Cb(1),c.wc("ngIf",e.isSelected)}}function Y(e,t){if(1&e){const e=c.Yb();c.Xb(0,"create-modal",36),c.jc("close",(function(){return t.$implicit.close()}))("onSubmit",(function(i){c.Oc(e);const n=t.$implicit,s=c.nc();return n.close(),s.confirmCreateTask(s.selectedProject,i)})),c.oc(1,"translate"),c.Wb()}2&e&&c.wc("title",c.pc(1,1,"SHARED_MODULES.SHARED.CREATE_TASK_LABEL"))}const $=function(e){return{label:e}};let z=(()=>{class e{constructor(e,t,i,n){this.projectService=e,this.cd=t,this.modalService=i,this.authService=n,this.close=new c.n,this.projectAndTaskSelected=new c.n,this.onCreateTask=new c.n,this.onFavoriteChange=new c.n,this.onTaskFavoriteChange=new c.n,this.searchDebouncer$=new l.a,this.search="",this.tasksInProgress=new Map,this.favoriteTasksInProgress=new Map,this.favoritesInProgress=new Map,this.tasksFavoriteInProgress=new Map,this.hasLoadedAllFavoritesTasks=new Map,this.unsubscribe$=new l.a,this.sortByProjectNameMapper=e=>e.name}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngOnInit(){this.resetProjectList(),this.authService.permissionData$.pipe(Object(n.a)(e=>null!==e),Object(s.a)(this.unsubscribe$)).subscribe(e=>this.permissionData=e),this.searchDebouncer$.asObservable().pipe(Object(r.a)(500),Object(o.a)(),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.resetProjectList(),this.getProjects()}),this.getProjects()}onScroll(){this.getProjects(!0)}getProjects(e=!1){this.gotAllProjects||this.requestInProgress||(this.requestInProgress=!0,e&&(this.projectPage=this.projectPage+1),this.projectService.getProjectsAndTasks(this.search,this.projectPage,this.client.id||w.b,this.allForbiddenTaskIds,this.isFavorite,this.workspace.id,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.gotAllProjects=e.length<y.j||this.isFavorite,e.forEach(e=>{var t;e.isSelected=!!this.search&&!!e.tasks.length,e.updateProjectManagerStatus(this.permissionData),(null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),e=E.a.filterDontCollapsedProjects(e,this.forbiddenProjectMap),this.projects.push(...e),this.triggerDetectionPipe=!this.triggerDetectionPipe,this.requestInProgress=!1,this.cd.detectChanges()},()=>this.requestInProgress=!1))}onTaskScroll({parentIndex:e}){const t=this.projects[e];t?this.loadMoreTasks(t):console.error("Project is missing!!! Index: "+e)}loadMoreTasks(e,t=!1){var i;if(!e.isSelected)return;if(Object(S.u)(e.taskCount)&&e.taskCount<1)return;if(Object(S.u)(e.taskCount)&&e.tasks.length>=e.taskCount)return;if(e.hasLoadedAllTasks)return;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const n=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=n,this.projectService.getTasks(this.workspace.id,e.id,this.search,n,null===(i=this.forbiddenProjectMap[e.id])||void 0===i?void 0:i.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(i=>{e.hasLoadedAllTasks=i.length<y.j,t&&!e.hasLoadedAllTasks&&this.getAllFavoritesTasks(e);const n=(e.tasks||[]).map(e=>e.id);i=i.filter(e=>!n.includes(e.id)),e.tasks=[...e.tasks,...i],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges()},()=>this.tasksInProgress.set(e.id,!1))}getAllFavoritesTasks(e){var t;this.hasLoadedAllFavoritesTasks.get(e.id)||this.tasksFavoriteInProgress.get(e.id)||(this.tasksFavoriteInProgress.set(e.id,!0),this.projectService.getAllFavoritesTasks(this.workspace.id,e.id,this.search,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{const i=(e.tasks||[]).map(e=>e.id);t=t.filter(e=>!i.includes(e.id)),e.tasks=[...t,...e.tasks],this.hasLoadedAllFavoritesTasks.set(e.id,!0),this.tasksFavoriteInProgress.set(e.id,!1),this.cd.detectChanges()},()=>this.tasksFavoriteInProgress.set(e.id,!1)))}closeModal(){this.close.emit()}onSearchChange(e){this.searchDebouncer$.next(e)}pickProject(e){const t=this.allForbiddenProjectIds.includes(e.id),i=e.taskCount;if(this.workspace.forceTasks||t){if(!i)return;e.isSelected=!e.isSelected,1===i&&(e.tasks[0]?this.selectProjectAndTask(e,e.tasks[0]):this.fetchTaskAndSelect(e)),i>1&&!e.tasks.length&&this.loadMoreTasks(e)}else this.selectProjectAndTask(e,null)}fetchTaskAndSelect(e){var t;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const i=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=i,this.projectService.getTasks(this.workspace.id,e.id,this.search,i,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.hasLoadedAllTasks=t.length<y.j,e.tasks=[...e.tasks,...t],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges(),e.tasks.length&&this.selectProjectAndTask(e,e.tasks[0])},()=>this.tasksInProgress.set(e.id,!1))}toggleTasks(e){e.isSelected=!e.isSelected,this.loadMoreTasks(e,this.isFavorite&&this.isFavoriteFeatureEnabled)}selectProjectAndTask(e,t){this.projectAndTaskSelected.emit({project:e,task:t})}toggleProjectFavorite(e){this.favoritesInProgress.get(e.id)||(this.favoritesInProgress.set(e.id,!0),e.favorite=!e.favorite,e.favorite?this.projectService.makeProjectFavorite(e.id,this.workspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoritesInProgress.set(e.id,!1),()=>this.favoritesInProgress.set(e.id,!1)):(e.tasks&&e.tasks.forEach(e=>e.favorite=!1),this.projectService.removeProjectAsFavorite(e.id,this.workspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoritesInProgress.set(e.id,!1),()=>this.favoritesInProgress.set(e.id,!1))),this.onFavoriteChange.emit({clientId:e.client.id,projectId:e.id,isFavorite:e.favorite}))}changeTaskFavoriteStatus(e,t){if(this.favoriteTasksInProgress.get(t.id))return;this.favoriteTasksInProgress.set(t.id,!0);const i=!t.favorite;this.onTaskFavoriteChange.emit({clientId:e.client.id,projectId:e.id,isFavorite:i,taskId:t.id}),t.favorite=i,i?(e.favorite=!0,this.projectService.makeTaskFavorite(e.id,t.id,this.workspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoriteTasksInProgress.set(t.id,!1),()=>this.favoriteTasksInProgress.set(t.id,!1))):this.projectService.removeTaskFavorite(e.id,t.id,this.workspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoriteTasksInProgress.set(t.id,!1),()=>this.favoriteTasksInProgress.set(t.id,!1))}resetProjectList(){this.projects=[],this.projectPage=1,this.gotAllProjects=!1,this.requestInProgress=!1,this.triggerDetectionPipe=!this.triggerDetectionPipe,this.tasksFavoriteInProgress.clear(),this.hasLoadedAllFavoritesTasks.clear()}openModal(e){this.modalService.open(e,{centered:!0})}confirmCreateTask(e,t){this.onCreateTask.emit({project:e,name:t})}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(h.a),c.Rb(c.h),c.Rb(O.q),c.Rb(d.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["project-client-modal"]],inputs:{forbiddenProjectMap:"forbiddenProjectMap",allForbiddenProjectIds:"allForbiddenProjectIds",client:"client",workspace:"workspace",filterPlaceholder:"filterPlaceholder",isFavoriteFeatureEnabled:"isFavoriteFeatureEnabled",hasCreateTaskPermission:"hasCreateTaskPermission",projectGroupingLabel:"projectGroupingLabel",isFavorite:"isFavorite",allForbiddenTaskIds:"allForbiddenTaskIds",teamManagerAsOtherUser:"teamManagerAsOtherUser",selectedUserId:"selectedUserId"},outputs:{close:"close",projectAndTaskSelected:"projectAndTaskSelected",onCreateTask:"onCreateTask",onFavoriteChange:"onFavoriteChange",onTaskFavoriteChange:"onTaskFavoriteChange"},decls:15,vars:19,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button","tabindex","1",1,"cl-close",3,"click","keyup.enter","keyup.space"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-sub-header"],["type","text","autocomplete","off","ngbAutofocus","","tabindex","1",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],["scrollPosition","","infiniteScroll","",1,"cl-modal-body","cl-p-0","cl-pb-1","cl-overflow-auto","cl-modal-scroll",3,"scrollChildAttribute","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","onChildScroll","scrolled"],[4,"ngFor","ngForOf"],["createModal",""],[1,"cl-dropdown-item","cl-white-space-normal"],[1,"cl-item-between"],["tabindex","1",1,"cl-project-name","cl-project-name-colored","cl-btn-disabled-light",3,"disabled","click","keyup.enter","keyup.space"],[1,"cl-entry__project__dot"],["style","color: gray",4,"ngIf"],[1,"cl-d-flex","cl-align-items-center","cl-col-auto","cl-align-self-start","cl-p-0"],["tabindex","1","class","cl-text-gray-6 cl-d-flex cl-pr-1",3,"click","keyup.enter","keyup.space",4,"ngIf"],["class","cl-color-blue",3,"click",4,"ngIf"],["class","cl-dropdown-star","tabindex","1",3,"cl-active","click","keyup.enter","keyup.space",4,"ngIf"],["class","collapse","childScroll","","style","display: block",4,"ngIf"],[2,"color","gray"],["tabindex","1",1,"cl-text-gray-6","cl-d-flex","cl-pr-1",3,"click","keyup.enter","keyup.space"],[1,"cl-dropdown-item-expand"],[3,"isOpen"],[1,"cl-color-blue",3,"click"],["tabindex","1",1,"cl-dropdown-star",3,"click","keyup.enter","keyup.space"],["childScroll","",1,"collapse",2,"display","block"],[4,"ngIf"],[1,"cl-collapse-content","cl-collapse-content-tags","cl-d-flex","cl-align-items-center"],["tabindex","1",1,"cl-dropdown-item","cl-cut-text",3,"click","keyup.enter","keyup.space"],["class","cl-dropdown-star cl-mx-3","doNotCloseDropdown","",3,"cl-active","click",4,"ngIf"],["doNotCloseDropdown","",1,"cl-dropdown-star","cl-mx-3",3,"click"],[1,"cl-collapse-content","cl-collapse-content-tasks","cl-collapse-content-tags"],["tabindex","0",1,"cl-dropdown-item","cl-border-top","cl-border-light","cl-b-0",3,"click","keyup.enter","keyup.space"],["createTaskLink",""],["src","assets/images/ui-icons/plus-blue.svg"],[1,"cl-ml-2","cl-text-primary"],[3,"title","close","onSubmit"]],template:function(e,t){1&e&&(c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Zc(2),c.oc(3,"translate"),c.oc(4,"translate"),c.Wb(),c.Xb(5,"button",2),c.jc("click",(function(){return t.closeModal()}))("keyup.enter",(function(){return t.closeModal()}))("keyup.space",(function(){return t.closeModal()})),c.Xb(6,"span"),c.Sb(7,"img",3),c.Wb(),c.Wb(),c.Wb(),c.Xb(8,"div",4),c.Xb(9,"input",5),c.jc("ngModelChange",(function(e){return t.search=e}))("ngModelChange",(function(){return t.onSearchChange(t.search)})),c.Wb(),c.Wb(),c.Xb(10,"div",6),c.jc("onChildScroll",(function(e){return t.onTaskScroll(e)}))("scrolled",(function(){return t.onScroll()})),c.Xc(11,H,12,14,"ng-container",7),c.oc(12,"sortBy"),c.Wb(),c.Xc(13,Y,2,3,"ng-template",null,8,c.Yc)),2&e&&(c.Cb(2),c.ad(t.client.name||(t.isFavorite?c.pc(3,8,"GLOBAL.FAVORITES_LABEL"):c.qc(4,10,"SHARED_MODULES.SHARED.NO_LABEL_WITH_PARAM",c.Bc(17,$,t.projectGroupingLabel)))),c.Cb(7),c.wc("placeholder",t.filterPlaceholder)("ngModel",t.search),c.Cb(1),c.wc("scrollChildAttribute","childScroll")("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),c.Cb(1),c.wc("ngForOf",c.rc(12,13,t.projects,t.sortByProjectNameMapper,t.triggerDetectionPipe)))},directives:[k.c,k.s,k.v,I,_.a,T.t,T.u,x,P],pipes:[A.e,j.a,M.a],encapsulation:2,changeDetection:0}),e})();var Z=i("mXn0");const K=["searchInput"],q=["scrollArea"];function J(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",19),c.jc("click",(function(){return c.Oc(e),c.nc().resetSearch()})),c.Sb(1,"img",20),c.Wb()}}function Q(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",21),c.jc("keyup.ArrowRight",(function(){return c.Oc(e),c.nc().isWorkspacesExpanded=!0}))("keyup.ArrowLeft",(function(){return c.Oc(e),c.nc().isWorkspacesExpanded=!1}))("click",(function(){c.Oc(e);const t=c.nc();return t.isWorkspacesExpanded=!t.isWorkspacesExpanded}))("keyup.enter",(function(){c.Oc(e);const t=c.nc();return t.isWorkspacesExpanded=!t.isWorkspacesExpanded}))("keyup.space",(function(){c.Oc(e);const t=c.nc();return t.isWorkspacesExpanded=!t.isWorkspacesExpanded})),c.Xb(1,"div",22),c.Xb(2,"div",23),c.Zc(3),c.oc(4,"translate"),c.Wb(),c.Xb(5,"div",24),c.Xb(6,"div",25),c.Xb(7,"a",26),c.Xb(8,"span",27),c.Zc(9),c.Wb(),c.Sb(10,"select-arrow",28),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&e){const e=c.nc();c.Hb("cl-open",e.isWorkspacesExpanded)("cl-remove-border-bottom",!(e.isCollapsed&&null!=e.projectsByClient&&e.projectsByClient.length||e.selectedProject)),c.Cb(3),c.ad(c.pc(4,8,"GLOBAL.WORKSPACE_LABEL")),c.Cb(4),c.wc("title",e.defaultWorkspace.name),c.Cb(2),c.bd(" ",e.defaultWorkspace.name," "),c.Cb(1),c.wc("isOpen",e.isWorkspacesExpanded)}}function ee(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",39),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).setDefaultWorkspace(t)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).setDefaultWorkspace(t)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).setDefaultWorkspace(t)})),c.Xb(1,"div",40),c.Zc(2),c.Wb(),c.Wb()}if(2&e){const e=c.nc().$implicit;c.wc("title",e.name),c.Cb(2),c.bd(" ",e.name," ")}}function te(e,t){if(1&e&&(c.Vb(0),c.Xc(1,ee,3,2,"a",38),c.Ub()),2&e){const e=t.$implicit,i=c.nc(2);c.Cb(1),c.wc("ngIf",e.id!==i.defaultWorkspace.id)}}function ie(e,t){if(1&e&&(c.Xb(0,"div",29),c.Xb(1,"div",30),c.Xb(2,"div",31),c.Xb(3,"div",32),c.Xb(4,"span",33),c.Zc(5),c.Wb(),c.Xb(6,"span",34),c.Sb(7,"img",35),c.Xb(8,"span",36),c.Zc(9),c.oc(10,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xc(11,te,2,1,"ng-container",37),c.Wb(),c.Wb()),2&e){const e=c.nc();c.Cb(4),c.wc("title",e.defaultWorkspace.name),c.Cb(1),c.ad(e.defaultWorkspace.name),c.Cb(4),c.bd(" ",c.pc(10,4,"GLOBAL.ACTIVE_LABEL")," "),c.Cb(2),c.wc("ngForOf",e.workspaces)}}function ne(e,t){1&e&&c.Tb(0)}function se(e,t){if(1&e&&(c.Vb(0),c.Xc(1,ne,1,0,"ng-container",43),c.Ub()),2&e){const e=c.nc(2),t=c.Lc(10),i=c.Lc(12);c.Cb(1),c.wc("ngIf",e.canCreate)("ngIfThen",t)("ngIfElse",i)}}function re(e,t){if(1&e&&(c.Xb(0,"div",41),c.Xb(1,"div",42),c.Xb(2,"div"),c.Zc(3),c.Wb(),c.Xc(4,se,2,3,"ng-container",14),c.Wb(),c.Wb()),2&e){const e=c.nc();c.Cb(3),c.ad(e.title),c.Cb(1),c.wc("ngIf",e.hasPermissionToCreateProject)}}const oe=function(e){return{project:e}};function ae(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div"),c.Xb(1,"div",44),c.Zc(2),c.oc(3,"translate"),c.Xb(4,"a",45),c.jc("click",(function(){return c.Oc(e),c.nc(2).createNewProject()})),c.Zc(5),c.oc(6,"translate"),c.Wb(),c.Wb(),c.Wb()}if(2&e){const e=c.nc(2);c.Cb(2),c.bd("",c.pc(3,2,"GLOBAL.CREATE_ENTITY_LABEL")," "),c.Cb(3),c.ad(c.qc(6,4,"SHARED_MODULES.PROJECT_PICKER.CREATE_PROJECT_WITH_PARAM_LABEL",c.Bc(7,oe,"'"+e.search+"'")))}}const ce=function(e,t){return{task:e,project:t}};function le(e,t){if(1&e&&(c.Vb(0),c.Zc(1),c.oc(2,"translate"),c.Ub()),2&e){const e=c.nc(4);c.Cb(1),c.bd(" ",c.qc(2,1,"SHARED_MODULES.PROJECT_PICKER.CREATE_TASK_WITH_PARAM_LABEL",c.Cc(4,ce,e.taskName,e.projectName))," ")}}function ue(e,t){if(1&e&&(c.Vb(0),c.Zc(1),c.oc(2,"translate"),c.Ub()),2&e){const e=c.nc(4);c.Cb(1),c.bd(" ",c.qc(2,1,"SHARED_MODULES.PROJECT_PICKER.CREATE_PROJECT_WITH_PARAM_LABEL",c.Bc(4,oe,"'"+e.projectName+"'"))," ")}}function de(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",44),c.Zc(1),c.oc(2,"translate"),c.Xb(3,"a",48),c.jc("click",(function(){return c.Oc(e),c.nc(3).createNewProject()})),c.Xc(4,le,3,7,"ng-container",14),c.Xc(5,ue,3,6,"ng-container",14),c.Wb(),c.Wb()}if(2&e){const e=c.nc(3);c.Cb(1),c.bd(" ",c.pc(2,3,"GLOBAL.CREATE_ENTITY_LABEL")," "),c.Cb(3),c.wc("ngIf",e.taskName),c.Cb(1),c.wc("ngIf",!e.taskName)}}function he(e,t){1&e&&(c.Xb(0,"div",44),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.PROJECT_PICKER.TYPE_TO_CREATE_PROJECT_PLACEHOLDER")," "))}function pe(e,t){if(1&e&&c.Xc(0,he,3,3,"div",49),2&e){const e=c.nc(3);c.wc("ngIf",e.hasPermissionToCreateProject&&!e.projectName)}}function be(e,t){if(1&e&&(c.Vb(0),c.Xc(1,de,6,5,"div",46),c.Xc(2,pe,1,1,"ng-template",null,47,c.Yc),c.Ub()),2&e){const e=c.Lc(3),t=c.nc(2);c.Cb(1),c.wc("ngIf",t.projectName)("ngIfElse",e)}}function fe(e,t){if(1&e&&(c.Xc(0,ae,7,9,"div",14),c.Xc(1,be,4,2,"ng-container",14)),2&e){const e=c.nc();c.wc("ngIf",!e.projectTaskFilterEnabled),c.Cb(1),c.wc("ngIf",e.projectTaskFilterEnabled)}}function me(e,t){1&e&&(c.Xb(0,"div",44),c.Zc(1),c.oc(2,"translate"),c.Wb()),2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.PROJECT_PICKER.FILTER_BY_PROJECT_INFO")," "))}function ge(e,t){if(1&e&&c.Xc(0,me,3,3,"div",49),2&e){const e=c.nc();c.wc("ngIf",e.projectTaskFilterEnabled&&e.search&&!(null!=e.projectsByClient&&e.projectsByClient.length)&&!e.projectName)}}function ve(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",52),c.jc("click",(function(){return c.Oc(e),c.nc(2).selectProjectAndTask(null,null)}))("keyup.enter",(function(){return c.Oc(e),c.nc(2).selectProjectAndTask(null,null)}))("keyup.space",(function(){return c.Oc(e),c.nc(2).selectProjectAndTask(null,null)})),c.Xb(1,"div",53),c.Xb(2,"a",54),c.Zc(3),c.oc(4,"translate"),c.Wb(),c.Wb(),c.Wb()}2&e&&(c.Cb(2),c.Wc("color","#666666"),c.Cb(1),c.bd(" ",c.pc(4,3,"GLOBAL.NO_PROJECT_LABEL")," "))}function Ce(e,t){if(1&e){const e=c.Yb();c.Xb(0,"div",61),c.Xb(1,"a",62),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!t.isSelected)}))("keyup.ArrowRight",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!0)}))("keyup.ArrowLeft",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!1)}))("keyup.space",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!t.isSelected)}))("keyup.enter",(function(){c.Oc(e);const t=c.nc().$implicit;return c.nc(2).toggleProjectsGroup(t,!t.isSelected)})),c.Xb(2,"span",63),c.Zc(3),c.oc(4,"translate"),c.Wb(),c.Sb(5,"select-arrow",28),c.Wb(),c.Xb(6,"a",64),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(2),n=c.Lc(21);return i.selectedClientGroup=t,i.openModal(n,"lg")})),c.Sb(7,"img",65),c.Wb(),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Cb(3),c.cd("",e.projectsCount," ",c.pc(4,3,"GLOBAL.PROJECTS_LABEL"),""),c.Cb(2),c.wc("isOpen",e.isSelected)}}function Ee(e,t){if(1&e&&(c.Xb(0,"span"),c.Sb(1,"span",71),c.Xb(2,"span",72),c.Zc(3),c.Wb(),c.Wb()),2&e){const e=c.nc().$implicit;c.Cb(3),c.bd(" ",e.client.name," ")}}const we=function(e){return{count:e}};function Se(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",76),c.jc("click",(function(){c.Oc(e);const t=c.nc(2).$implicit,i=c.nc(2).$implicit;return c.nc(2).toggleTasks(t,i)})),c.Xb(1,"span",63),c.Zc(2),c.oc(3,"translate"),c.Wb(),c.Sb(4,"select-arrow",28),c.Wb()}if(2&e){const e=c.nc(2).$implicit;c.Cb(2),c.bd(" ",c.qc(3,2,"SHARED_MODULES.PROJECT_PICKER.COUNT_TASKS_LABEL",c.Bc(5,we,e.taskCount||e.tasks.length))," "),c.Cb(2),c.wc("isOpen",e.isSelected)}}function ye(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",77),c.jc("click",(function(){c.Oc(e);const t=c.nc(2).$implicit,i=c.nc(4),n=c.Lc(19);return i.projectForCreateTask=t,i.openModal(n)})),c.Zc(1),c.oc(2,"translate"),c.Wb()}2&e&&(c.Cb(1),c.bd(" ",c.pc(2,1,"SHARED_MODULES.SHARED.CREATE_TASK_LABEL")," "))}function Oe(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",78),c.jc("click",(function(){c.Oc(e);const t=c.nc(2).$implicit;return c.nc(4).changeFavoriteStatus(t)})),c.Wb()}if(2&e){const e=c.nc(2).$implicit;c.Hb("cl-active",e.favorite)}}function Ae(e,t){if(1&e&&(c.Xb(0,"div",61),c.Xc(1,Se,5,7,"a",73),c.Xc(2,ye,3,3,"a",74),c.Xc(3,Oe,1,2,"a",75),c.Wb()),2&e){const e=c.nc().$implicit,t=c.nc(4);c.Cb(1),c.wc("ngIf",e.taskCount||e.tasks.length),c.Cb(1),c.wc("ngIf",!(null!=e.tasks&&e.tasks.length)&&!e.taskCount&&(t.isAdminOrOwner||!t.onlyAdminsCreateTask||e.isUserManagerForProject)),c.Cb(1),c.wc("ngIf",t.favoriteProjectsEnabled&&!t.teamManagerAsOtherUser)}}function ke(e,t){if(1&e){const e=c.Yb();c.Xb(0,"a",84),c.jc("click",(function(){c.Oc(e);const t=c.nc().$implicit,i=c.nc(2).$implicit;return c.nc(4).changeTaskFavoriteStatus(i,t)})),c.Wb()}if(2&e){const e=c.nc().$implicit;c.Hb("cl-active",e.favorite)}}function Te(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",80),c.Xb(2,"a",81),c.jc("click",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc(4).selectProjectAndTask(n,i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc(4).selectProjectAndTask(n,i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit,n=c.nc(2).$implicit;return c.nc(4).selectProjectAndTask(n,i)})),c.Xb(3,"div",82),c.Zc(4),c.Wb(),c.Wb(),c.Xc(5,ke,1,2,"a",83),c.Wb(),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc(6);c.Cb(2),c.wc("title",e.name),c.Cb(2),c.bd(" ",e.name," "),c.Cb(1),c.wc("ngIf",i.favoriteProjectsEnabled&&!i.teamManagerAsOtherUser)}}function De(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",85),c.Xb(2,"a",86,87),c.jc("click",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(4),s=c.Lc(19);return n.projectForCreateTask=i,n.openModal(s),t.blur()}))("keyup.enter",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(4),s=c.Lc(19);return n.projectForCreateTask=i,n.openModal(s),t.blur()}))("keyup.space",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(2).$implicit,n=c.nc(4),s=c.Lc(19);return n.projectForCreateTask=i,n.openModal(s),t.blur()})),c.Sb(4,"img",88),c.Xb(5,"span",89),c.Zc(6),c.oc(7,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Ub()}2&e&&(c.Cb(6),c.bd(" ",c.pc(7,1,"SHARED_MODULES.SHARED.CREATE_NEW_TASK_LABEL")," "))}function Ie(e,t){if(1&e&&(c.Xb(0,"div",79),c.Xc(1,Te,6,3,"ng-container",37),c.oc(2,"sortTasks"),c.Xc(3,De,8,3,"ng-container",14),c.Wb()),2&e){const e=c.nc(),t=e.index,i=e.$implicit,n=c.nc(2),s=n.index,r=n.$implicit,o=c.nc(2);c.Db("childscrollindexes",s+"_"+t),c.Cb(1),c.wc("ngForOf",c.qc(2,3,i.tasks,r.isFavorite)),c.Cb(2),c.wc("ngIf",o.isAdminOrOwner||!o.onlyAdminsCreateTask||i.isUserManagerForProject)}}function _e(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",67),c.Xb(2,"div",32),c.Xb(3,"button",68),c.jc("click",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).pickProject(i)}))("keyup.ArrowRight",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).toggleTasks(i)}))("keyup.ArrowLeft",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).toggleTasks(i)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).pickProject(i)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit;return c.nc(4).pickProject(i)})),c.Sb(4,"i",69),c.Zc(5),c.Xc(6,Ee,4,1,"span",14),c.Wb(),c.Xc(7,Ae,4,3,"div",58),c.Wb(),c.Wb(),c.Xc(8,Ie,4,6,"div",70),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc(2).$implicit,n=c.nc(2);c.Cb(1),c.Hb("cl-open",e.isSelected&&!n.isCollapsed),c.wc("ngClass",e.isSelected?"cl-project-picker-sticky z-index-on-top":""),c.Cb(1),c.Db("title",!n.forceTask||e.tasks.length||e.taskCount?null:"Can't select a project until it has at least one task."),c.Cb(1),c.Wc("color",e.color),c.wc("disabled",n.forceTask&&!e.tasks.length&&!e.taskCount)("title",e.name),c.Cb(1),c.Wc("background-color",e.color),c.Cb(1),c.bd("",e.name," "),c.Cb(1),c.wc("ngIf",i.isFavorite&&e.client.name),c.Cb(1),c.wc("ngIf",!n.showNoTasks),c.Cb(1),c.wc("ngIf",e.isSelected&&e.tasks&&!n.showNoTasks)}}function Re(e,t){if(1&e&&(c.Xb(0,"div",66),c.Xc(1,_e,9,14,"ng-container",37),c.Wb()),2&e){const e=c.nc().$implicit,t=c.nc(2);c.Hb("cl-collapse-content",t.isCollapsed),c.Cb(1),c.wc("ngForOf",e.projects)}}const Le=function(e){return{label:e}};function xe(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Xb(1,"div",55),c.Xb(2,"div",56),c.Xb(3,"div",32),c.Xb(4,"div",57),c.jc("click",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!i.isSelected)}))("keyup.space",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!i.isSelected)}))("keyup.enter",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!i.isSelected)}))("keyup.ArrowRight",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!0)}))("keyup.ArrowLeft",(function(){c.Oc(e);const i=t.$implicit;return c.nc(2).toggleProjectsGroup(i,!1)})),c.Zc(5),c.oc(6,"translate"),c.oc(7,"translate"),c.Wb(),c.Xc(8,Ce,8,5,"div",58),c.Wb(),c.Wb(),c.Xb(9,"div",59),c.Xc(10,Re,2,3,"div",60),c.Wb(),c.Wb(),c.Ub()}if(2&e){const e=t.$implicit,i=c.nc(2);c.Cb(1),c.Hb("cl-remove-border-bottom",i.isCollapsed),c.Cb(1),c.Hb("pointerevent",!i.isCollapsed),c.Cb(2),c.wc("title",null==e.client?null:e.client.name),c.Cb(1),c.bd(" ",e.client.name||(e.isFavorite?c.pc(6,10,"GLOBAL.FAVORITES_LABEL"):c.qc(7,12,"SHARED_MODULES.SHARED.NO_LABEL_WITH_PARAM",c.Bc(15,Le,i.projectGroupingLabel)))," "),c.Cb(3),c.wc("ngIf",i.isCollapsed&&e.projectsCount),c.Cb(1),c.Hb("cl-collapse",i.isCollapsed),c.Cb(1),c.wc("ngIf",e.isSelected)}}function Pe(e,t){if(1&e&&(c.Xb(0,"section",50),c.Xc(1,ve,5,5,"div",51),c.Xc(2,xe,11,17,"ng-container",37),c.Wb()),2&e){const e=c.nc();c.Cb(1),c.wc("ngIf",e.selectedProject&&!e.forceProject&&!e.search),c.Cb(1),c.wc("ngForOf",e.projectsByClient)}}function je(e,t){if(1&e){const e=c.Yb();c.Vb(0),c.Sb(1,"div",90),c.Xb(2,"a",91,92),c.jc("click",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(),n=c.Lc(23);return i.openModal(n),t.blur()}))("keyup.enter",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(),n=c.Lc(23);return i.openModal(n),t.blur()}))("keyup.space",(function(){c.Oc(e);const t=c.Lc(3),i=c.nc(),n=c.Lc(23);return i.openModal(n),t.blur()})),c.Sb(4,"img",88),c.Xb(5,"span",89),c.Zc(6),c.oc(7,"translate"),c.Wb(),c.Wb(),c.Ub()}if(2&e){const e=c.nc();c.Cb(6),c.bd(" ",c.pc(7,1,e.projectTaskFilterEnabled&&e.canCreate&&e.taskName?"SHARED_MODULES.PROJECT_PICKER.CREATE_NEW_PROJ_TASK_LABEL":"GLOBAL.CREATE_NEW_PROJECT_TITLE")," ")}}function Me(e,t){if(1&e){const e=c.Yb();c.Xb(0,"create-modal",93),c.jc("close",(function(){return t.$implicit.close()}))("onSubmit",(function(i){c.Oc(e);const n=t.$implicit,s=c.nc();return s.createTask(s.projectForCreateTask,i),n.close()})),c.oc(1,"translate"),c.Wb()}if(2&e){const e=c.nc();c.wc("title",c.pc(1,2,"SHARED_MODULES.SHARED.CREATE_TASK_LABEL"))("inProgress",e.creatingInProgress)}}function Xe(e,t){if(1&e){const e=c.Yb();c.Xb(0,"project-client-modal",94),c.jc("onFavoriteChange",(function(t){return c.Oc(e),c.nc().onFavoriteChange(t)}))("onTaskFavoriteChange",(function(t){return c.Oc(e),c.nc().onTaskFavoriteChange(t)}))("close",(function(){return t.$implicit.close("Save click")}))("onCreateTask",(function(i){c.Oc(e);const n=t.$implicit;return c.nc().createTask(i.project,i.name),n.close()}))("projectAndTaskSelected",(function(i){c.Oc(e);const n=t.$implicit,s=c.nc();return n.close(i),s.selectProjectAndTask(i.project,i.task)})),c.Wb()}if(2&e){const e=c.nc();c.wc("hasCreateTaskPermission",e.isAdminOrOwner||!e.onlyAdminsCreateTask)("teamManagerAsOtherUser",e.teamManagerAsOtherUser)("selectedUserId",e.selectedUserId)("forbiddenProjectMap",e.forbiddenProjectMap)("allForbiddenProjectIds",e.allForbiddenProjectIds)("allForbiddenTaskIds",e.allForbiddenTaskIds)("client",e.selectedClientGroup.client)("isFavorite",e.selectedClientGroup.isFavorite)("workspace",e.defaultWorkspace)("filterPlaceholder",e.filterPlaceholder)("projectGroupingLabel",e.projectGroupingLabel)("isFavoriteFeatureEnabled",e.favoriteProjectsEnabled&&!e.teamManagerAsOtherUser)}}function Fe(e,t){if(1&e){const e=c.Yb();c.Xb(0,"new-project",95),c.jc("onProjectAndTaskDataCreated",(function(i){c.Oc(e);const n=t.$implicit;return c.nc().setCreatedProjectData(i),n.close()}))("close",(function(){return t.$implicit.close()})),c.Wb()}if(2&e){const e=c.nc();c.wc("isAdminOrOwner",e.isAdminOrOwner)("name",e.projectName)("taskName",e.taskName)("workspace",e.defaultWorkspace)}}let We=(()=>{class e{constructor(e,t,i,n,s,r,o,a,u){this.authService=e,this.projectService=t,this.cd=i,this.workspaceService=n,this.taskService=s,this.modalService=r,this.keyboardService=o,this.subdomainService=a,this.translateService=u,this.selectedProjectAndTask=new c.n,this.dropdownClosed=new c.n,this.search="",this.teamManagerAsOtherUser=!1,this.clientPage=1,this.allClientsAreLoaded=!1,this.pipeChangeDetection=!1,this.isWorkspacesExpanded=!1,this.disableCloseProjectPicker=!1,this.projectsByClient=[],this.searchTerm$=new l.a,this.unsubscribe$=new l.a,this.allForbiddenTaskIds=[],this.allForbiddenProjectIds=[],this.forbiddenProjectMap={},this.favoritesInProgress=new Map,this.favoriteTasksInProgress=new Map,this.tasksInProgress=new Map,this.tasksFavoriteInProgress=new Map,this.hasLoadedAllFavoritesTasks=new Map}ngOnInit(){this.setTimesheetForbiddenData(),this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.loggedInUser=this.authService.getUser(),this.authService.permissionData$.pipe(Object(n.a)(e=>null!==e),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.isAdminOrOwner=e.isAdminOrOwner,this.permissionData=e,e.isTeamManager&&(this.teamManagerUsers=e.teamManagerUsers.map(e=>e.entityId),this.teamManagerAsOtherUser=this.teamManagerUsers.some(e=>e===this.selectedUserId)&&this.selectedUserId!==this.loggedInUser.id)}),this.isCollapsed=null!=this.loggedInUser.settings.projectListCollapse,this.defaultWorkspace=this.workspaceService.getLocalDefaultWorkspace(),this.setWorkspaceSettings(this.defaultWorkspace),this.setWorkspacesList(),this.keyboardService.keyboardCtrlEnter$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.createNewProject()),this.searchTerm$.pipe(Object(r.a)(500),Object(o.a)(),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.resetProjectList(),this.getClients()}),this.getClients(),this.cd.markForCheck()}ngAfterViewInit(){var e,t;null===(t=null===(e=this.searchInput)||void 0===e?void 0:e.nativeElement)||void 0===t||t.focus()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete(),this.dropdownClosed.emit(!0)}get hasPermissionToCreateProject(){return!this.defaultWorkspace.onlyAdminsCreateProject||this.isAdminOrOwner}get title(){var e;if(null===(e=this.projectsByClient)||void 0===e?void 0:e.length)return"";const t=this.translateService.instant("GLOBAL.PROJECTS_LABEL"),i=this.translateService.instant("GLOBAL.TASKS_LABEL"),n=!this.projectTaskFilterEnabled||this.search&&this.search.indexOf("@")>-1?t:i;return this.search?this.translateService.instant("PROJECTS.FILTER_DROPDOWN.NO_MATCHING_ENTITIES_LABEL",{entityInPlural:n.toLowerCase()}):this.selectedProject?"":this.translateService.instant("PROJECTS.FILTER_DROPDOWN.NO_ENTITIES_YET_LABEL",{entityInPlural:n.toLowerCase()})}get projectName(){var e;return this.projectTaskFilterEnabled?null===(e=this.search.split("@")[1])||void 0===e?void 0:e.trim():this.search.trim()}get taskName(){return this.projectTaskFilterEnabled?this.search.split("@")[0].trim():""}onSearchChange(e){this.searchTerm$.next(e)}resetSearch(){this.search="",this.onSearchChange(this.search)}checkCanCreate(){var e;this.canCreate=!!this.search&&!(null===(e=this.projectsByClient)||void 0===e?void 0:e.length)}pushNewClients(e,t){(e||[]).forEach(e=>{e.projects.forEach(e=>e.updateProjectManagerStatus(this.permissionData))}),e.forEach(e=>{var i;if(!e.projectsCount&&!(null===(i=e.projects)||void 0===i?void 0:i.length))return;const n=this.projectsByClient.find(t=>t.client.name===e.client.name&&t.isFavorite===e.isFavorite);if(n){const i=n.projects.map(e=>e.id);e.projects.forEach(e=>{i.includes(e.id)||n.projects.push(e)}),t&&(n.isSelected=e.isSelected)}else e.isFavorite?this.projectsByClient.unshift(e):this.projectsByClient.push(e)}),this.checkCanCreate()}resetProjectList(){this.clientPage=1,this.allClientsAreLoaded=!1,this.projectsByClient=[],this.tasksInProgress.clear(),this.tasksFavoriteInProgress.clear(),this.hasLoadedAllFavoritesTasks.clear()}getClients(){if(!this.allClientsAreLoaded){if(this.isCollapsed)return this.getCollapsedClient(),void(this.favoriteProjectsEnabled&&1===this.clientPage&&this.getExpandedClient("ONLY_FAVORITES"));this.favoriteProjectsEnabled&&1===this.clientPage&&this.getExpandedClient("ONLY_FAVORITES"),this.getExpandedClient("ALL")}}getCollapsedClient(){this.projectService.getProjectsGroupedByClient(this.search,this.clientPage,this.defaultWorkspace.id,this.allForbiddenProjectIds,this.allForbiddenTaskIds,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.allClientsAreLoaded=e.length<y.j,(e=e.map(e=>{const t=!!e.projects.length;return e.isSelected=t,e.areAllProjectsLoaded=t&&e.projects.length<y.j,e.currentPage=t?1:0,e})).forEach(e=>e.projects.forEach(e=>e.isSelected=!!this.search&&!!e.tasks.length)),this.pushNewClients(e),this.pipeChangeDetection=!this.pipeChangeDetection,this.cd.detectChanges()})}getExpandedClient(e){if(this.clientPage>1&&"ONLY_FAVORITES"===e)return;const t=this.projectTaskFilterEnabled&&"@"===this.search.trim()?"":this.search;this.projectService.getProjectsAndTasks(t,this.clientPage,null,this.allForbiddenTaskIds,"ONLY_FAVORITES"===e,this.defaultWorkspace.id,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(i=>{!this.projectsByClient.length&&this.scrollArea&&(this.scrollArea.nativeElement.scrollTop=0);const n=i.length<y.j;if(i.forEach(e=>{var i;e.isSelected=!!t&&!!e.tasks.length,(null===(i=this.forbiddenProjectMap[e.id])||void 0===i?void 0:i.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),i=E.a.filterDontCollapsedProjects(i,this.forbiddenProjectMap),"ONLY_FAVORITES"===e){const e=this.loggedInUser.settings.projectListCollapse,n=this.loggedInUser.settings.collapseAllProjectLists,s=!!t||!this.isCollapsed||i.length<=e&&!n;i=i.map(e=>(e.isSelected=s&&e.tasks.length&&this.projectTaskFilterEnabled,e));const r=new E.a({client:new p.a,projects:i,projectsCount:i.length,isFavorite:!0,isSelected:s,areAllProjectsLoaded:!0,currentPage:1});i.length&&this.pushNewClients([r],!0)}else{const e=E.a.groupProjectsToClientGroups(i);this.pushNewClients(e),this.allClientsAreLoaded=n}this.pipeChangeDetection=!this.pipeChangeDetection,this.cd.detectChanges()})}onClientGroupScroll(e){this.loadMoreProjects(this.projectsByClient[e])}onTaskScroll({parentIndex:e,childIndex:t}){const i=this.projectsByClient[e].projects[t];i?this.loadMoreTasks(i):console.error(`onTaskScroll() - roject is missing!!! Indexes: ${e}_${t}`)}loadMoreProjects(e){if(!e.isSelected)return;if(!this.isCollapsed&&!e.isFavorite)return;if(e.areAllProjectsLoaded)return;if(e.inProgress)return;e.inProgress=!0;const t=e.client.id||w.b;e.currentPage=e.currentPage+1,this.projectService.getProjectsAndTasks(this.search,e.currentPage,t,this.allForbiddenTaskIds,e.isFavorite,this.defaultWorkspace.id,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.areAllProjectsLoaded=t.length<y.j||e.isFavorite,t.forEach(e=>{var t;e.updateProjectManagerStatus(this.permissionData),(null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),t=E.a.filterDontCollapsedProjects(t,this.forbiddenProjectMap),e.projects.push(...t),e.inProgress=!1,this.cd.detectChanges()},()=>e.inProgress=!1)}pickProject(e,t){if(!e)return;const i=this.allForbiddenProjectIds.includes(e.id),n=e.taskCount;if(this.forceTask||i){if(!n)return;e.isSelected=!e.isSelected,1===n&&(e.tasks[0]||t?this.selectProjectAndTask(e,e.tasks[0]||t):this.fetchTaskAndSelect(e)),n>1&&!e.tasks.length&&this.loadMoreTasks(e)}else this.selectProjectAndTask(e,t)}fetchProjectsAndSelect(e){this.projectService.getProjectsAndTasks(this.search,1,e.client.id,this.allForbiddenTaskIds,e.isFavorite,this.defaultWorkspace.id,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(a.a)(1),Object(s.a)(this.unsubscribe$)).subscribe(e=>{e.forEach(e=>{var t;(null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds)&&(e.tasks=e.tasks.filter(t=>!this.forbiddenProjectMap[e.id].taskIds.includes(t.id)))}),this.pickProject(e[0],1===e[0].taskCount?e[0].tasks[0]:null)})}fetchTaskAndSelect(e){var t;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const i=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=i,this.projectService.getTasks(this.defaultWorkspace.id,e.id,this.search,i,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e.hasLoadedAllTasks=t.length<y.j,e.tasks=[...e.tasks,...t],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges(),e.tasks.length&&this.selectProjectAndTask(e,e.tasks[0])},()=>this.tasksInProgress.set(e.id,!1))}toggleTasks(e,t){e.isSelected=!e.isSelected,this.loadMoreTasks(e,t.isFavorite&&this.favoriteProjectsEnabled)}loadMoreTasks(e,t=!1){var i;if(!e.isSelected)return;if(Object(S.u)(e.taskCount)&&e.taskCount<1)return;if(Object(S.u)(e.taskCount)&&e.tasks.length>=e.taskCount)return;if(e.hasLoadedAllTasks)return;if(this.tasksInProgress.get(e.id))return;this.tasksInProgress.set(e.id,!0);const n=(e.taskPage||Math.ceil(e.tasks.length/50))+1;e.taskPage=n,this.projectService.getTasks(this.defaultWorkspace.id,e.id,this.search,n,null===(i=this.forbiddenProjectMap[e.id])||void 0===i?void 0:i.taskIds,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(i=>{e.hasLoadedAllTasks=i.length<y.j,t&&!e.hasLoadedAllTasks&&this.getAllFavoritesTasks(e);const n=(e.tasks||[]).map(e=>e.id);i=i.filter(e=>!n.includes(e.id)),e.tasks=[...e.tasks,...i],this.tasksInProgress.set(e.id,!1),this.cd.detectChanges()},()=>this.tasksInProgress.set(e.id,!1))}getAllFavoritesTasks(e){var t;this.hasLoadedAllFavoritesTasks.get(e.id)||this.tasksFavoriteInProgress.get(e.id)||(this.tasksFavoriteInProgress.set(e.id,!0),this.projectService.getAllFavoritesTasks(this.defaultWorkspace.id,e.id,this.search,null===(t=this.forbiddenProjectMap[e.id])||void 0===t?void 0:t.taskIds,this.teamManagerAsOtherUser?this.selectedUserId:null).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{const i=(e.tasks||[]).map(e=>e.id);t=t.filter(e=>!i.includes(e.id)),e.tasks=[...t,...e.tasks],this.hasLoadedAllFavoritesTasks.set(e.id,!0),this.tasksFavoriteInProgress.set(e.id,!1),this.cd.detectChanges()},()=>this.tasksFavoriteInProgress.set(e.id,!1)))}changeFavoriteStatus(e){if(this.favoritesInProgress.get(e.id))return;this.favoritesInProgress.set(e.id,!0);const t=!e.favorite;t?this.projectService.makeProjectFavorite(e.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoritesInProgress.set(e.id,!1),()=>this.favoritesInProgress.set(e.id,!1)):this.projectService.removeProjectAsFavorite(e.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoritesInProgress.set(e.id,!1),()=>this.favoritesInProgress.set(e.id,!1)),this.onFavoriteChange({clientId:e.client.id,projectId:e.id,isFavorite:t})}onFavoriteChange({clientId:e,projectId:t,isFavorite:i}){const n=this.projectsByClient.find(e=>e.isFavorite);if(n){const e=n.projects.find(e=>e.id===t);e&&(e.favorite=i,!i&&e.tasks&&e.tasks.forEach(e=>e.favorite=!1))}const s=this.projectsByClient.filter(e=>!e.isFavorite).find(t=>t.client.id===e),r=null==s?void 0:s.projects.find(e=>e.id===t);r&&(r.favorite=i,!i&&r.tasks&&r.tasks.forEach(e=>e.favorite=!1))}onSelectedProjectChange(e){this.selectedProject=e,this.selectedTask=null,this.cd.detectChanges()}changeTaskFavoriteStatus(e,t){if(this.favoriteTasksInProgress.get(t.id))return;this.favoriteTasksInProgress.set(t.id,!0);const i=!t.favorite;t.favorite=i,this.onTaskFavoriteChange({clientId:e.client.id,projectId:e.id,isFavorite:i,taskId:t.id}),i?(e.favorite=!0,this.projectService.makeTaskFavorite(e.id,t.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoriteTasksInProgress.set(t.id,!1),()=>this.favoriteTasksInProgress.set(t.id,!1))):this.projectService.removeTaskFavorite(e.id,t.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>this.favoriteTasksInProgress.set(t.id,!1),()=>this.favoriteTasksInProgress.set(t.id,!1))}onTaskFavoriteChange(e){const t=this.projectsByClient.find(e=>e.isFavorite);this.updateTaskFavoriteStatus(t,e);const i=this.projectsByClient.filter(e=>!e.isFavorite).find(t=>t.client.id===e.clientId);this.updateTaskFavoriteStatus(i,e)}updateTaskFavoriteStatus(e,{projectId:t,taskId:i,isFavorite:n}){const s=null==e?void 0:e.projects.find(e=>e.id===t);if(!s)return;s.favorite=!!n||s.favorite;const r=s.tasks.find(e=>e.id===i);r&&(r.favorite=n)}onResizeChange(e){if(!e)try{const e=this.scrollArea.nativeElement;e.scrollTop+e.getBoundingClientRect().height>e.scrollHeight-60&&this.onMainScroll()}catch(t){}}toggleProjectsGroup(e,t){e.isSelected=t,e.isSelected&&!e.projects.length&&this.loadMoreProjects(e)}onMainScroll(){this.allClientsAreLoaded||(++this.clientPage,this.getClients())}selectFirstProject(){const e=this.projectsByClient.filter(e=>!e.isFavorite);if(1!==e.length)return;const t=e[0];(1===t.projects.length||Object(S.u)(t.projectsCount)&&1===t.projectsCount)&&(t.projects&&t.projects[0]?this.pickProject(t.projects[0],1===t.projects[0].taskCount?t.projects[0].tasks[0]:null):this.fetchProjectsAndSelect(t))}selectProjectAndTask(e,t){var i,n;if(e&&!t&&this.forceTask)return;const s=(null===(i=this.selectedProject)||void 0===i?void 0:i.id)||null,r=(null===(n=this.selectedTask)||void 0===n?void 0:n.id)||null;((null==e?void 0:e.id)||null)===s&&((null==t?void 0:t.id)||null)===r||(this.selectedProjectAndTask.emit({task:t||null,project:e||null,workspace:this.defaultWorkspace}),this.disableDropdownKeyDirective.forceClose())}setTimesheetForbiddenData(){var e;let t;if(null===(e=this.timesheetRows)||void 0===e?void 0:e.length){const e=this.timesheetRows.filter(e=>!e.isApproved);t=u.a.getSelectedProjectsData(e)}else{const e=new u.a(this.selectedProject,this.selectedTask,null,null);t=u.a.getSelectedProjectsData([e])}this.forbiddenProjectMap=t.forbiddenProjectMap,this.allForbiddenProjectIds=t.allForbiddenProjectIds,this.allForbiddenTaskIds=t.allForbiddenTaskIds}setWorkspaceSettings(e){const t=this.workspaceService.generateClientLabel(e.projectGroupingLabel),i=this.translateService.instant("SHARED_MODULES.PROJECT_PICKER.FIND_TASK_LABEL",{projectGroupingLabel:t}),n=this.translateService.instant("SHARED_MODULES.PROJECT_PICKER.FIND_PROJECT_LABEL",{projectGroupingLabel:t});this.filterPlaceholder=this.loggedInUser.settings.projectPickerSpecialFilter?i:n,this.projectTaskFilterEnabled=this.loggedInUser.settings.projectPickerSpecialFilter,this.forceTask=e.forceTasks&&!this.noForceTask,this.forceProject=e.forceProjects,this.favoriteProjectsEnabled=e.projectFavorites,this.projectGroupingLabel=this.workspaceService.generateClientLabel(e.projectGroupingLabel),this.onlyAdminsCreateTask=e.onlyAdminsCreateTask,this.cd.detectChanges()}setWorkspacesList(){!this.hideWorkspaces&&!this.subdomainService.isSubdomainNotSelfhosted()&&this.workspaceService.workspaces$.pipe(Object(n.a)(e=>null!=e),Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.workspaces=e,this.cd.detectChanges()})}setDefaultWorkspace(e){this.defaultWorkspace=e,this.setWorkspaceSettings(e),this.resetProjectList(),this.getClients(),this.isWorkspacesExpanded=!1,this.authService.isUserAdminOnWorkspace(e.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e})=>{this.isAdminOrOwner=e,this.cd.detectChanges()})}onModalOpen(){this.arrowNavigation.removeListener(),this.disableCloseProjectPicker=!0}onModalClosed(){this.arrowNavigation.addListener(),setTimeout(()=>{this.disableCloseProjectPicker=!1;try{this.cd.markForCheck()}catch(e){}})}openModal(e,t="md"){this.onModalOpen(),this.modalService.open(e,{centered:!0,size:t}).result.then(()=>this.onModalClosed(),()=>this.onModalClosed())}setCreatedProjectData({project:e,task:t}){if(!e)return void console.error("setCreatedProjectData() - missing project");if(t||!this.forceTask)return void this.selectProjectAndTask(e,t);const i=this.projectsByClient.find(t=>t.client.id==e.clientId&&t.isFavorite===!!e.favorite);i?(t&&e.tasks.push(t),e.taskCount=t?1:0,i.projects.push(e),i.updatePojectsCountBy(1)):(this.resetProjectList(),this.getClients())}createNewProject(){if(!this.canCreate||!this.hasPermissionToCreateProject)return;if(!this.projectName)return;const e=this.taskName;this.projectService.create(this.projectName,this.defaultWorkspace.isProjectPublicByDefault,"",this.defaultWorkspace.defaultBillableProjects,"#F44336",this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{e?this.createTask(t,e):this.forceTask?this.resetSearch():this.selectProjectAndTask(t,null)})}createTask(e,t){this.creatingInProgress=!0,this.taskService.createTask(t,e.id,this.defaultWorkspace.id).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{this.creatingInProgress=!1,this.selectProjectAndTask(e,t)},()=>this.creatingInProgress=!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Rb(d.a),c.Rb(h.a),c.Rb(c.h),c.Rb(b.a),c.Rb(f.a),c.Rb(O.q),c.Rb(m.a),c.Rb(g.a),c.Rb(A.f))},e.\u0275cmp=c.Lb({type:e,selectors:[["project-picker"]],viewQuery:function(e,t){var i;1&e&&(c.gd(C.a,!0),c.gd(K,!0),c.gd(v.a,!0),c.gd(q,!0)),2&e&&(c.Kc(i=c.kc())&&(t.disableDropdownKeyDirective=i.first),c.Kc(i=c.kc())&&(t.searchInput=i.first),c.Kc(i=c.kc())&&(t.arrowNavigation=i.first),c.Kc(i=c.kc())&&(t.scrollArea=i.first))},inputs:{timesheetRows:"timesheetRows",hideWorkspaces:"hideWorkspaces",noForceTask:"noForceTask",selectedProject:"selectedProject",selectedTask:"selectedTask",selectedUserId:"selectedUserId",showNoTasks:"showNoTasks"},outputs:{selectedProjectAndTask:"selectedProjectAndTask",dropdownClosed:"dropdownClosed"},decls:24,vars:14,consts:[["arrowNavigation","",1,"cl-relative",2,"display","block"],[1,"cl-dropdown-menu-header",3,"disableCloseDropdownKey"],[1,"cl-input-group"],["type","text","tabindex","0","autocomplete","off",1,"cl-form-control","cl-input-has-clear","cl-pr-4",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["searchInput",""],["class","cl-clear-input","doNotCloseDropdown","",3,"click",4,"ngIf"],["class","cl-dropdown-item cl-border-bottom pointer",3,"cl-open","cl-remove-border-bottom","keyup.ArrowRight","keyup.ArrowLeft","click","keyup.enter","keyup.space",4,"ngIf"],["class","cl-collapse","style","display: block",4,"ngIf"],["class","cl-dropdown-menu-sub-header","style","position: relative; bottom: -1px;",4,"ngIf"],["canCreateTemplate",""],["taskSuggestionTemplate",""],["tabindex","0","scrollPosition","","infiniteScroll","",1,"cl-scroll-area","cl-dropdown-item-checkbox","cl-no-focus-tabindex",3,"scrollParentAttribute","scrollChildAttribute","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","onChildScroll","onGroupScroll","scrolled"],["scrollArea",""],["class","cl-dropdown-section-wrapper",4,"ngIf"],[4,"ngIf"],["dropdownClose","","tabindex","0"],["createTaskModal",""],["clientModal",""],["modalNewProject",""],["doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""],[1,"cl-dropdown-item","cl-border-bottom","pointer",3,"keyup.ArrowRight","keyup.ArrowLeft","click","keyup.enter","keyup.space"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],[1,"cl-cut-text"],[1,"cl-cut-text-wrapper"],["tabindex","-1",1,"cl-text-gray-6","cl-d-flex",3,"title"],[1,"cl-dropdown-item-expand","cl-cut-text"],[3,"isOpen"],[1,"cl-collapse",2,"display","block"],[1,"cl-collapse-content"],[1,"cl-dropdown-item"],[1,"cl-item-between","cl-cut-text-wrapper"],[1,"cl-cut-text",3,"title"],[1,"cl-dropdown-item-workspace-right"],["src","assets/images/ui-icons/checkmark-green.svg"],[1,"cl-dropdown-active-workspace-label","cl-d-none","cl-d-lg-inline-block"],[4,"ngFor","ngForOf"],["doNotCloseDropdown","","tabindex","-1","class","cl-dropdown-item cl-cut-text-wrapper",3,"title","click","keyup.enter","keyup.space",4,"ngIf"],["doNotCloseDropdown","","tabindex","-1",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"title","click","keyup.enter","keyup.space"],["doNotCloseDropdown","",1,"cl-cut-text"],[1,"cl-dropdown-menu-sub-header",2,"position","relative","bottom","-1px"],[1,"cl-dropdown-item-padding","cl-mw-100"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"cl-h6","cl-mb-0"],[1,"cl-text-break",3,"click"],["class","cl-h6 cl-mb-0",4,"ngIf","ngIfElse"],["createSuggestionTemplate",""],[3,"click"],["class","cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-item pointer","clickCloseDropdown","",3,"click","keyup.enter","keyup.space",4,"ngIf"],["clickCloseDropdown","",1,"cl-dropdown-item","pointer",3,"click","keyup.enter","keyup.space"],["clickCloseDropdown","",1,"cl-item-between"],["clickCloseDropdown","","tabindex","-1",1,"cl-border-light","cl-text-dark"],["parentScroll","",1,"cl-dropdown-section","cl-pt-0"],[1,"cl-dropdown-item","cl-project-picker-sticky"],[1,"cl-dropdown-header","cl-h5","cl-p-0","cl-cut-text","pointer",3,"title","click","keyup.space","keyup.enter","keyup.ArrowRight","keyup.ArrowLeft"],["class","cl-d-flex cl-align-items-center",4,"ngIf"],[2,"display","block"],["class","cl-bg-transparent",3,"cl-collapse-content",4,"ngIf"],[1,"cl-d-flex","cl-align-items-center"],["tabindex","-1",1,"cl-text-gray-6","cl-d-flex",3,"click","keyup.ArrowRight","keyup.ArrowLeft","keyup.space","keyup.enter"],[1,"cl-dropdown-item-expand"],[1,"cl-client-icon-modal",3,"click"],["src","assets/images/ui-icons/maximise.svg"],[1,"cl-bg-transparent"],[1,"cl-dropdown-item",3,"ngClass"],["tabindex","-1",1,"cl-project-name","cl-project-name-colored","cl-cut-text","cl-btn-disabled-light","cl-py-1","cl-px-2","cl-my-n1","cl-mx-n2","cl-btn-block","cl-text-left","cl-btn-project-picker",3,"disabled","title","click","keyup.ArrowRight","keyup.ArrowLeft","keyup.enter","keyup.space"],[1,"cl-entry__project__dot"],["class","cl-collapse","childScroll","","style","display: block",4,"ngIf"],[1,"cl-h-line-divider"],[1,"cl-listing-client"],["class","cl-text-gray-6 cl-d-flex",3,"click",4,"ngIf"],["class","cl-pl-3","data-cy","create-task",3,"click",4,"ngIf"],["class","cl-dropdown-star","doNotCloseDropdown","",3,"cl-active","click",4,"ngIf"],[1,"cl-text-gray-6","cl-d-flex",3,"click"],["data-cy","create-task",1,"cl-pl-3",3,"click"],["doNotCloseDropdown","",1,"cl-dropdown-star",3,"click"],["childScroll","",1,"cl-collapse",2,"display","block"],[1,"cl-collapse-content","cl-collapse-content-tasks","cl-collapse-content-tags","cl-d-flex","cl-align-items-center","cl-justify-content-between"],["tabindex","-1","clickCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"title","click","keyup.enter","keyup.space"],["clickCloseDropdown","",1,"cl-cut-text"],["class","cl-dropdown-star cl-mr-3","doNotCloseDropdown","",3,"cl-active","click",4,"ngIf"],["doNotCloseDropdown","",1,"cl-dropdown-star","cl-mr-3",3,"click"],[1,"cl-collapse-content","cl-collapse-content-tasks","cl-collapse-content-tags"],["tabindex","0","data-cy","new-task",1,"cl-dropdown-item","cl-border-top","cl-border-light","cl-b-0",3,"click","keyup.enter","keyup.space"],["createTaskLink",""],["src","assets/images/ui-icons/plus-blue.svg"],[1,"cl-ml-2","cl-text-primary"],[2,"height","41px"],["tabindex","0","data-cy","new-project",1,"cl-dropdown-item","cl-border-top","cl-border-light","cl-b-0","cl-absolute",3,"click","keyup.enter","keyup.space"],["createBtn",""],[3,"title","inProgress","close","onSubmit"],[3,"hasCreateTaskPermission","teamManagerAsOtherUser","selectedUserId","forbiddenProjectMap","allForbiddenProjectIds","allForbiddenTaskIds","client","isFavorite","workspace","filterPlaceholder","projectGroupingLabel","isFavoriteFeatureEnabled","onFavoriteChange","onTaskFavoriteChange","close","onCreateTask","projectAndTaskSelected"],[3,"isAdminOrOwner","name","taskName","workspace","onProjectAndTaskDataCreated","close"]],template:function(e,t){1&e&&(c.Xb(0,"section",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"input",3,4),c.jc("ngModelChange",(function(e){return t.search=e}))("ngModelChange",(function(e){return t.onSearchChange(e)}))("keyup.enter",(function(){return t.selectFirstProject()})),c.Wb(),c.Xc(5,J,2,0,"a",5),c.Wb(),c.Wb(),c.Xc(6,Q,11,10,"div",6),c.Xc(7,ie,12,6,"div",7),c.Xc(8,re,5,2,"div",8),c.Xc(9,fe,2,2,"ng-template",null,9,c.Yc),c.Xc(11,ge,1,1,"ng-template",null,10,c.Yc),c.Xb(13,"section",11,12),c.jc("onChildScroll",(function(e){return t.onTaskScroll(e)}))("onGroupScroll",(function(e){return t.onClientGroupScroll(e)}))("scrolled",(function(){return t.onMainScroll()})),c.Xc(15,Pe,3,2,"section",13),c.Wb(),c.Xc(16,je,8,3,"ng-container",14),c.Sb(17,"span",15),c.Wb(),c.Xc(18,Me,2,4,"ng-template",null,16,c.Yc),c.Xc(20,Xe,1,12,"ng-template",null,17,c.Yc),c.Xc(22,Fe,1,4,"ng-template",null,18,c.Yc)),2&e&&(c.Cb(1),c.wc("disableCloseDropdownKey",t.disableCloseProjectPicker),c.Cb(2),c.xc("placeholder",t.filterPlaceholder),c.wc("ngModel",t.search),c.Cb(2),c.wc("ngIf",t.search),c.Cb(1),c.wc("ngIf",!t.hideWorkspaces&&(null==t.workspaces?null:t.workspaces.length)&&!t.canCreate),c.Cb(1),c.wc("ngIf",t.isWorkspacesExpanded),c.Cb(1),c.wc("ngIf",t.title),c.Cb(5),c.wc("scrollParentAttribute","parentScroll")("scrollChildAttribute","childScroll")("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("scrollWindow",!1),c.Cb(2),c.wc("ngIf",!t.title),c.Cb(1),c.wc("ngIf",!t.defaultWorkspace.onlyAdminsCreateProject||t.isAdminOrOwner))},directives:[v.a,C.a,k.c,k.s,k.v,T.u,I,_.a,x,T.t,T.r,P,z,Z.a],pipes:[A.e,M.a],encapsulation:2,changeDetection:0}),e})()},GS88:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.WORKSPACE="WORKSPACE",e.PROJECT="PROJECT",e.TIMEENTRY="TIMEENTRY",e}({})},GYbH:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("yK97");class s{constructor(e){this._period=new n.a(null==e?void 0:e.period),this._halfDay=null==e?void 0:e.halfDay}get period(){return this._period}get isHalfDay(){return this._halfDay}set period(e){this._period=e}set isHalfDay(e){this._halfDay=e}toObject(){return{isHalfDay:this.isHalfDay,period:this.period.toObject()}}}},Gajk:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("iTUp"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a,r.d]]}),e})()},GidR:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("yK97"),s=i("IgG/"),r=i("O3o7"),o=i("Tj/N"),a=i("tnjF"),c=i("Hf8F"),l=i("VYrk"),u=i("qrIO"),d=i("Rgaw"),h=i("VfV2");class p{constructor(e,t){this._user=new o.a({id:(e=e||{}).userId,name:e.userName,email:e.userEmail}),this._tags=e.tags?e.tags.map(e=>new s.a(e)):null,this._id=e._id||e.id,this._description=e.description||"",this._billable=e.billable,this._approvalRequestId=e.approvalRequestId,this._invoicingInfo=new d.a(e.invoicingInfo),e.projectId&&(this._project=new r.a({id:e.projectId,name:e.projectName,color:e.projectColor,billable:e.projectBillable,clientName:e.clientName})),e.taskId&&(this._task=new a.a({id:e.taskId,name:e.taskName})),this._bulkEdit=e.bulkEdit,this._isLocked=e.isLocked,this._timeInterval=new n.a(e.timeInterval);const i=e.customFields||e.customFieldValues;this._customFieldValues=i?i.map(e=>new l.a(e)):[],this._amounts=e.amounts||[],this._amount=e.amount||0,this._hourlyRate=e.hourlyRate||e.earnedRate||0,this._costRate=e.costRate||0,t&&(t===u.a.EARNED?this._hourlyRate=e.rate||0:t===u.a.COST&&(this._costRate=e.rate||0))}get id(){return this._id}set id(e){this._id=e}get description(){return this._description}set description(e){this._description=e}get billable(){return this._billable}set billable(e){this._billable=e}get bulkEdit(){return this._bulkEdit}set bulkEdit(e){this._bulkEdit=e}get user(){return this._user}set user(e){this._user=e}get task(){return this._task}set task(e){this._task=e}get project(){return this._project}set project(e){this._project=e}get tags(){return this._tags}set tags(e){this._tags=e}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked=e}get approvalRequestId(){return this._approvalRequestId}set approvalRequestId(e){this._approvalRequestId=e}get invoicingInfo(){return this._invoicingInfo}set invoicingInfo(e){this._invoicingInfo=e}get hasInvoice(){return!!this.invoicingInfo.invoiceId||this.invoicingInfo.manuallyInvoiced}get invoiceTooltip(){return this._invoicingInfo.manuallyInvoiced?"Manually marked as invoiced":this._invoicingInfo.invoiceNumber}get amounts(){return this._amounts}set amounts(e){this._amounts=e}get amount(){return this._amount}set amount(e){this._amount=e}get hourlyRate(){return this._hourlyRate}set hourlyRate(e){this._hourlyRate=e||0}get costRate(){return this._costRate}set costRate(e){this._costRate=e||0}get timeInterval(){return this._timeInterval}set timeInterval(e){this._timeInterval=e}get customFieldValues(){return this._customFieldValues}set customFieldValues(e){this._customFieldValues=e}updateHourlyRateAndEarned({hourlyRate:e,costRate:t,type:i}){this.hourlyRate=e,this.costRate=t,this.refreshEarned(i)}refreshEarned(e){const t=new c.a(this.timeInterval.duration);if(e===u.a.EARNED){if(!this.billable)return void(this.amount=0);this.amount=this.hourlyRate*t.getHours()}else if(e===u.a.COST)this.amount=this.costRate*t.getHours();else if(e===u.a.PROFIT){const e=this.hourlyRate*t.getHours(),i=this.costRate*t.getHours();this.amount=e-i}}static clone(e){if(!e)return null;const t={id:e.id,description:e.description,billable:e.billable,isLocked:e.isLocked,userId:e.user&&e.user.id,userName:e.user&&e.user.name,userEmail:e.user&&e.user.email,projectId:e.project&&e.project.id,projectName:e.project&&e.project.name,projectColor:e.project&&e.project.color,projectBillable:e.project&&e.project.billable,clientName:e.project&&e.project.clientName,taskId:e.task&&e.task.id,taskName:e.task&&e.task.name,timeInterval:new n.a(e.timeInterval),tags:e.tags,amounts:e.amounts,hourlyRate:e.hourlyRate,customFieldValues:e.customFieldValues,approvalRequestId:e.approvalRequestId};return new p(t)}static fromTimeEntryAndReportEntry(e,t){let i,s,r;e.projectId&&t.project&&(i=t.project,s=t.project.clientName),e.taskId&&t.task&&(r=t.task);const o={id:e.id,description:e.description,billable:e.billable,isLocked:e.isLocked,userId:e.userId,userName:e.userName,projectId:i&&i.id,projectName:i&&i.name,projectColor:i&&i.color,clientName:s,taskId:r&&r.id,taskName:r&&r.name,timeInterval:new n.a(e.timeInterval),tags:t.tags?t.tags.filter(t=>e.tagIds&&e.tagIds.indexOf(t.id)>-1):null,hourlyRate:e.hourlyRate,costRate:e.costRate,customFieldValues:e.customFieldValues,approvalRequestId:t.approvalRequestId,invoicingInfo:t.invoicingInfo};return new p(o)}setAmounts(e){!this.amounts&&e&&(this.amounts=[new h.a(e[0],this.amount)])}}},GsAO:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o,a){const c=[];return e?(e.includes("col1")&&c.push(t),e.includes("col2")&&c.push(i),e.includes("col3")&&c.push(n),e.includes("col4")&&c.push(s),e.includes("col5")&&c.push(r),e.includes("col6")&&c.push(o),e.includes("col7")&&c.push(a),c):c}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"taskColumnDecider",type:e,pure:!0}),e})()},GwYf:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("B01t"),s=i("ofXK"),r=i("1kSV"),o=i("tyNb"),a=i("sYmb"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},imports:[[n.a,s.c,r.O,o.h,a.d]]}),e})()},HApq:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("1G5W"),s=i("XNiG"),r=i("2Vo4");class o{constructor(e){this._id=e&&e.id,this._specialFeaturesActivated=e&&e.specialFeaturesActivated,this._createWorkspaceForbidden=e&&e.createWorkspaceForbidden}get id(){return this._id}set id(e){this._id=e}get specialFeaturesActivated(){return this._specialFeaturesActivated}set specialFeaturesActivated(e){this._specialFeaturesActivated=e}get createWorkspaceForbidden(){return this._createWorkspaceForbidden}set createWorkspaceForbidden(e){this._createWorkspaceForbidden=e}}var a=i("lGQG"),c=i("1Tmk"),l=i("fXoL"),u=i("tk/3");let d=(()=>{class e{constructor(e,t,i){this.http=e,this.workspaceService=t,this.authService=i,this.systemSettings=new s.a,this.customLinkSettings=new s.a,this.customEmailsSettings=new s.a,this.systemSettings$=new r.a(null),this.unsubscribe$=new s.a,this.authService.onLogout$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.systemSettings$.next(null)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}getSystemSettings(){const e=localStorage.getItem("systemSettings");if(e){const t=JSON.parse(e);this.systemSettings.next(t);const i=new o(t);this.authService._specialFeaturesActivated=i.specialFeaturesActivated,this.systemSettings$.next(i)}else this.http.get("/system-settings/").subscribe(e=>{localStorage.setItem("systemSettings",JSON.stringify(e)),this.systemSettings.next(e);const t=new o(e);this.systemSettings$.next(t),this.authService._specialFeaturesActivated=t.specialFeaturesActivated},e=>{})}getCustomLinksSettings(){this.http.get("/system-settings/custom-links").subscribe(e=>{this.customLinkSettings.next(e)},e=>{})}getCustomEmailsSettings(){this.http.get("/system-settings/custom-emails").subscribe(e=>{this.customEmailsSettings.next(e)},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(l.fc(u.c),l.fc(c.a),l.fc(a.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},HNWp:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("hV/V"),r=i("fXoL");let o=(()=>{class e{constructor(e){this.translationStore=e}transform(e,t){let i=n(e);t&&(i=n.tz(i,t));const s=n();return i.isSame(s,"year")?i.locale(this.translationStore.getCurrentLang()).format("ddd, MMM D"):i.locale(this.translationStore.getCurrentLang()).format("MMM D, YYYY")}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(s.a))},e.\u0275pipe=r.Qb({name:"dateFormatIso",type:e,pure:!0}),e})()},I2ZF:function(e,t){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},IP1A:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("BO2n"),r=i("f0Wu");i("Tj/N");let o=(()=>{class e{constructor(){this.updateSince=!0,this.maxDate=r().startOf("day"),this.rateType=s.a,this.hasHistoricRateFeature=!1,this.onClose=new n.n,this.saveRate=new n.n}ngOnInit(){this.setText(this.type)}close(){this.onClose.emit()}togglePopover(e){this.hasHistoricRateFeature||(e.isOpen()?e.close():e.open())}setText(e){switch(e){case s.a.WORKSPACE:this.text="We'll apply this rate to all entries that don't have any project or team rate.";break;case s.a.WORKSPACE_MEMBER:this.text="We'll apply this rate to all entries made by "+this.user.name+", except on projects that have their own rate.";break;case s.a.PROJECT:this.text="We'll apply this rate to all entries on this project, unless some member has a more specific rate for this project.";break;case s.a.TASK:this.text="We'll apply this rate to all entries on this task, unless some member has a more specific rate for this project.";break;default:this.text="We'll apply this rate to all entries made by "+this.user.name+" on this project."}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,inputs:{hasHistoricRateFeature:"hasHistoricRateFeature",type:"type",user:"user"},outputs:{onClose:"onClose",saveRate:"saveRate"}}),e})()},IQK1:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Hf8F"),s=i("XNiG");class r{constructor(e,t){this.onChange$=new s.a,this.entriesCount=(e=e||{}).entriesCount||0,this.totalTime=new n.a(1e3*e.totalTime).asString(),this.totalBillableTime=new n.a(1e3*e.totalBillableTime).asString(),this.amounts=e.amounts||[],this.updatetotalAmountOnCurrentPage(t),this.totalAmountOnOtherPages=(e.totalAmount||0)-(this.totalAmountOnCurrentPage||0)}updatetotalAmountOnCurrentPage(e){var t;const i=this.totalAmountOnCurrentPage;this.totalAmountOnCurrentPage=0,e&&e.length&&(e.forEach(e=>{this.totalAmountOnCurrentPage+=e.amount}),(null===(t=this.amounts)||void 0===t?void 0:t.length)&&i&&this.totalAmountOnCurrentPage&&(this.amounts[0].value=this.amounts[0].value+(this.totalAmountOnCurrentPage-i)),this.onChange$.next())}get totalAmount(){return this.totalAmountOnCurrentPage+this.totalAmountOnOtherPages}get totalAmounts(){return this.amounts}set totalAmounts(e){this.amounts=e}timeIntervalChanged(e){this.totalTime=this.calculateNewDuration(e,this.totalTime),e.isBillable&&(this.totalBillableTime=this.calculateNewDuration(e,this.totalBillableTime),this.onChange$.next())}changeBillableTime(e){const t=new n.a(this.totalBillableTime);e.isBillable?t.add(e.duration):t.subtract(e.duration),this.totalBillableTime=t.asString(),this.onChange$.next()}calculateNewDuration(e,t){const i=new n.a(t);return e.addTime?i.add(e.duration):i.subtract(e.duration),i.asString()}editDuration(e,t,i){this.timeIntervalChanged({duration:e,isBillable:t,addTime:i})}entryDurationChanged(e,t,i){const s=new n.a(e.duration),r=new n.a(t.duration).asMiliseconds()-s.asMiliseconds(),o=r>0,a=new n.a(Math.abs(r)).asString();this.timeIntervalChanged({duration:a,isBillable:i,addTime:o})}}},IS9F:function(e,t,i){"use strict";i.d(t,"a",(function(){return U}));var n=i("fXoL"),s=i("3Pt+"),r=i("unEv"),o=(i("Tj/N"),i("wd/R")),a=i("uI7B"),c=i("/wxh"),l=i("AYje"),u=(i("X2fY"),i("qfBg")),d=i("1G5W"),h=i("NHP+"),p=function(e){return e.USER="USER",e.DATE="DATE",e.PROJECT="PROJECT",e.CATEGORY="CATEGORY",e.NOTES="NOTES",e.AMOUNT="AMOUNT",e.BILLABLE="BILLABLE",e.FILE="FILE",e}({}),b=i("/2Gs"),f=i("Ymxs"),m=i("hN73"),g=i("lGQG"),v=i("1Tmk"),C=i("i/9y"),E=i("kGbF"),w=i("Y9WU"),S=i("sYmb"),y=i("1kSV"),O=i("ofXK"),A=i("Fruv"),k=i("2rWG"),T=i("sbmM"),D=i("qUN8"),I=i("6gGB"),_=i("oTlO"),R=i("GAki"),L=i("kojQ");const x=["fileInput"];function P(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",7),n.Xb(1,"label",8),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Xb(4,"div",38),n.Xb(5,"div",39),n.Xb(6,"teammate-picker2",40),n.jc("userSelected",(function(t){return n.Oc(e),n.nc().selectUser(t)})),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.bd(" ",n.pc(3,5,"PAGES.DASHBOARD.TEAM_ACTIVITIES.HEADER.MEMBER")," "),n.Cb(4),n.wc("showLoggedInUser",!0)("hasAddTimeForOthersFeature",e.workspace.hasFeature(e.Features.ADD_TIME_FOR_OTHERS))("selectedUser",e.user)("workspace",e.workspace)}}function j(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.project.name+(e.project.client&&""!=e.project.client.name?" - "+e.project.client.name:e.project.clientName&&""!=e.project.clientName?" - "+e.project.clientName:"")," ")}}function M(e,t){1&e&&(n.Zc(0),n.oc(1,"translate")),2&e&&n.bd(" ",n.pc(1,1,"GLOBAL.ADD_PROJECT_LABEL")," ")}function X(e,t){if(1&e){const e=n.Yb();n.Xb(0,"project-picker",41),n.jc("selectedProjectAndTask",(function(t){return n.Oc(e),n.nc().selectProject(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("hideWorkspaces",!0)("showNoTasks",!0)("noForceTask",!0)("selectedUserId",e.user.id)}}function F(e,t){1&e&&(n.Xb(0,"div",7),n.Sb(1,"label",8),n.Xb(2,"div",42),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb()),2&e&&(n.Cb(3),n.bd(" ",n.pc(4,1,"EXPENSES.CREATE.MODAL.NOTE_ERROR")," "))}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",3),n.jc("click",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(93);return t.openModal(i)})),n.Xb(1,"span"),n.Sb(2,"img",4),n.Wb(),n.Wb()}}function B(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div"),n.Xb(1,"label",43),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Xb(4,"input",44,45),n.jc("change",(function(){return n.Oc(e),n.nc().uploadFile()})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.bd(" ",n.pc(3,2,"GLOBAL.FILE_ATTACHMENT_BTN")," "),n.Cb(2),n.wc("disabled",e.inProgress)}}function N(e,t){if(1&e){const e=n.Yb();n.Xb(0,"label",46),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.downloadReceipt(t.expense)})),n.Zc(1),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.text," ")}}function G(e,t){if(1&e){const e=n.Yb();n.Xb(0,"delete-confirm-modal",47),n.jc("onClose",(function(){return t.$implicit.close()}))("onDelete",(function(){n.Oc(e);const i=t.$implicit;return n.nc().deleteFile(),i.close()})),n.oc(1,"translate"),n.oc(2,"translate"),n.Xb(3,"p",48),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb()}2&e&&(n.wc("title",n.pc(1,4,"EXPENSES.CREATE.MODAL.DELETE_RECEIPT.TITLE"))("btnText",n.pc(2,6,"GLOBAL.REMOVE_LABEL"))("showConfirmation",!1),n.Cb(4),n.bd(" ",n.pc(5,8,"EXPENSES.CREATE.MODAL.DELETE_RECEIPT.TEXT")," "))}let U=(()=>{class e{constructor(e,t,i,s,r,o,a,c,l,u){this.categoryService=e,this.expenseService=t,this.userService=i,this.authService=s,this.workspaceService=r,this.toaster=o,this.translate=a,this.cd=c,this.modal=l,this.analyticsService=u,this.categories=[],this.categoryQuery={page:1,pageSize:50,name:"",archived:!1},this.unsubscribe$=new h.a,this.changeFields=[],this.close=new n.n,this.selectedUser=new n.n,this.accept=b.b.XML,this.maxMB=5,this.Features=C.a}ngOnInit(){this.date=o().toISOString(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.fetchCategories(),this.mode=this.expense?r.a.EDIT:r.a.CREATE,this.authService.permissionData$.pipe(Object(d.a)(this.unsubscribe$)).subscribe(({isAdminOrOwner:e,isTeamManager:t})=>{var i;this.isAdminOrOwner=e,this.showTeammatePicker=e||t&&this.workspace.canManagerEditUsersTime;const n=this.authService.getUser();if(this.user=this.showTeammatePicker?this.user:n,this.initializeForm(),!this.isAdminOrOwner){const e=this.workspaceService.getLocalDefaultWorkspace();e&&e.lockTimeEntries&&(this.minDate=o.tz(e.lockTimeEntries,(null===(i=this.user.settings)||void 0===i?void 0:i.timeZone)||n.settings.timeZone).format("YYYY-MM-DD"))}})}initializeForm(){var e,t,i,n,r,c,l,u;this.date=this.expense?this.expense.date:o().toISOString(),this.quantity=this.setQuantity(this.expense),this.category=this.expense&&this.expense.category?new a.a({id:this.expense.category.id,name:this.expense.category.name,additionalInfo:this.expense.category.hasUnitPrice?this.expense.category.unit:""}):null,this.text=this.expense?this.expense.fileName:null,this.form=new s.j({id:new s.g(null===(e=this.expense)||void 0===e?void 0:e.id,[]),userId:new s.g(this.expense?this.expense.userId:this.user.id,[]),date:new s.g((null===(t=this.expense)||void 0===t?void 0:t.date)||this.date,[]),projectId:new s.g((null===(i=this.expense)||void 0===i?void 0:i.project)?this.expense.project.id:null,[s.G.required]),categoryId:new s.g((null===(n=this.expense)||void 0===n?void 0:n.category)?this.expense.category.id:null,[s.G.required]),quantity:new s.g((null===(r=this.expense)||void 0===r?void 0:r.quantity)||"",[s.G.required]),notes:new s.g((null===(c=this.expense)||void 0===c?void 0:c.notes)||"",[]),billable:new s.g(null===(l=this.expense)||void 0===l?void 0:l.billable),category:new s.g(null===(u=this.expense)||void 0===u?void 0:u.category),file:new s.g("")}),this.expense&&(this.project=null!=this.expense.project.id?this.expense.project:null,this.expense.projectId=this.project?this.expense.project.id:null,this.expense.categoryId=this.expense.category?this.expense.category.id:null,this.expenseBackup=this.expense,this.form.valueChanges.pipe(Object(d.a)(this.unsubscribe$)).subscribe(e=>{this.detectChanges(e)}))}setQuantity(e){var t;return(null===(t=null==e?void 0:e.category)||void 0===t?void 0:t.hasUnitPrice)?Number(e.quantity).toFixed(2):e?(e.total/100).toFixed(2):null}setQuantityToCents(e){var t;return(null===(t=null==e?void 0:e.category)||void 0===t?void 0:t.hasUnitPrice)||e?Number(e.quantity).toFixed(2):null}detectChanges(e){this.changeFields=[],e.userId!=this.expenseBackup.userId&&this.changeFields.push(p.USER),e.date!=this.expenseBackup.date&&this.changeFields.push(p.DATE),e.projectId!=this.expenseBackup.projectId&&this.changeFields.push(p.PROJECT),e.categoryId!=this.expenseBackup.categoryId&&this.changeFields.push(p.CATEGORY),e.notes!=this.expenseBackup.notes&&this.changeFields.push(p.NOTES),Number(this.setQuantityToCents(e))!=this.expenseBackup.quantity&&this.changeFields.push(p.AMOUNT),e.billable!=this.expenseBackup.billable&&this.changeFields.push(p.BILLABLE)}onSubmit(){this.form.valid&&((this.mode===r.a.CREATE?this.expenseService.create(this.form.value):this.expenseService.edit(this.form.value,this.changeFields)).subscribe(()=>{var e;this.selectedUser.emit(this.user),this.analyticsService.addEventOnSettingsChanged(null===(e=this.category)||void 0===e?void 0:e.name,this.mode===r.a.CREATE?"onCreateExpense":"onEditExpense","Expenses",this.mode===r.a.CREATE?"Create expense":"Edit expense","Category","","select"),this.closeModal()}),this.buttonSubmited=!0)}closeModal(){this.close.emit()}selectUser(e){this.form.get("userId").setValue(e.id),this.user=e,this.enableSubmitIfPreviousRequestFailed(),this.cd.detectChanges()}enableSubmitIfPreviousRequestFailed(){this.buttonSubmited=!1}onDateChanged(e){this.form.get("date").setValue(e.date)}selectProject(e){this.project=e.project,this.form.get("projectId").setValue(this.project.id),this.form.get("billable").setValue(this.project.billable)}loadMoreCategories(){this.categoryQuery.page++,this.fetchCategories()}onSearchCategories(e){this.categoryQuery.name=e,this.categories=[],this.fetchCategories()}categoryChanged(e){this.category=e,this.form.get("categoryId").setValue(this.category.id),this.form.get("category").setValue(this.category)}fetchCategories(){this.categoryService.getExpenseCategories(this.categoryQuery).subscribe(({categories:e})=>{this.categories=[...this.categories,...e.map(e=>new a.a({id:e.id,name:e.name,additionalInfo:e.hasUnitPrice?e.unit:""}))]})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}uploadFile(){const e=this.inputEl.nativeElement;if(e.files.length>0&&e.files.item(0)){const t=e.files.item(0);if(m.b.indexOf(t.type)<0)return void this.toaster.pop("error",this.translate.instant("EXPENSES.CREATE.MODAL.FILE.FORMAT_MESSAGE"));if(t.size>1024*this.maxMB*1024)return void this.toaster.pop("error",this.translate.instant("EXPENSES.CREATE.MODAL.FILE.SIZE_MESSAGE")+` ${this.maxMB}MB.`);this.form.get("file").setValue(t),this.changeFields.push(p.FILE),this.analyticsService.addEventOnSettingsChanged("Attach receipt",this.mode===r.a.CREATE?"onCreateExpense":"onEditExpense","Expenses",this.mode===r.a.CREATE?"Create expense":"Edit expense","Attach receipt","","Submit"),this.text=t.name,this.file=t,this.clearInput()}}clearInput(){try{this.inputEl.nativeElement.value=""}catch(e){}}deleteFile(){this.text=null,this.form.get("file").setValue(null),this.changeFields.push(p.FILE),this.analyticsService.addEventOnSettingsChanged("Create",this.mode===r.a.CREATE?"onCreateExpense":"onEditExpense","Expenses",this.mode===r.a.CREATE?"Create expense":"Edit expense","Remove receipt","","Submit")}transformToDecimal(){this.quantity=isNaN(Number(this.quantity))?null:Number(this.quantity).toFixed(2)}openModal(e){this.modal.open(e,{centered:!0})}downloadReceipt(){if(this.file){const e=new Blob([this.file],{type:this.getFileType(this.text)});Object(E.b)(e,this.text)}else this.expenseService.downloadReceipt(this.expense.id,this.expense.fileId,this.getFileType(this.expense.fileName),this.expense.fileName).subscribe()}getFileType(e){const t=e.split(".")[e.split(".").length-1];return m.b.filter(e=>e.split("/")[1]===t)[0]}onKeydown(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()}noteChanged(){this.noteTooLong=this.form.value.notes.length>3e3}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(c.a),n.Rb(l.a),n.Rb(u.a),n.Rb(g.a),n.Rb(v.a),n.Rb(f.a),n.Rb(S.f),n.Rb(n.h),n.Rb(y.q),n.Rb(w.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["app-create-expense"]],viewQuery:function(e,t){var i;1&e&&n.gd(x,!0),2&e&&n.Kc(i=n.kc())&&(t.inputEl=i.first)},inputs:{user:"user",expense:"expense"},outputs:{close:"close",selectedUser:"selectedUser"},decls:94,vars:70,consts:[[3,"formGroup","ngSubmit"],[1,"cl-modal-header"],[1,"cl-h1","cl-modal-title"],["type","button",1,"cl-close","cl-no-outline",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],["class","cl-form-group cl-row cl-mr-0",4,"ngIf"],[1,"cl-form-group","cl-row","cl-mr-0"],[1,"cl-col-sm-4","cl-col-form-label","cl-mb-0"],[1,"cl-col-sm-8","cl-d-flex","cl-align-items-center","cl-p-0"],[1,"cl-w-100",3,"isUtc","hideRanges","standardLabel","date","minDate","onDateSelect"],[1,"cl-color-red"],[1,"cl-col-sm-8","cl-position-relative","cl-p-0"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large"],["dropdownKeyButton","","type","button","data-cy","project-dropdown",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-cut-text","cl-text-left","cl-dropdown-toggle"],[4,"ngIf","ngIfElse"],["noProjectTemplate",""],["class","cl-dropdown-menu",3,"hideWorkspaces","showNoTasks","noForceTask","selectedUserId","selectedProjectAndTask",4,"dropdownKeyContent"],[1,"cl-col-sm-8","cl-ml-auto","cl-mb-0","cl-p-0"],[1,"cl-d-flex","cl-align-items-center"],["data-cy","category-dropdown",1,"cl-cut-text-wrapper",3,"list","selectedName","placeholder","overrideTitle","loadMore","onSearch","onChanged"],["dropdownUsers",""],[1,"cl-form-control","cl-p-0","cl-d-flex","cl-z-index-1"],["type","text","formControlName","quantity",1,"cl-form-control","cl-border-0","cl-z-index-0","cl-h-100","cl-min-height-10",3,"ngModel","placeholder","ngModelChange","focusout"],[1,"cl-color-light-grey","cl-m-auto","cl-pr-2","cl-max-width-150","cl-cut-text","cl-min-width-80","cl-text-right"],[1,"cl-col-sm-8","cl-d-flex","cl-align-items-center","cl-p-0","cl-border"],["id","description","formControlName","notes","name","description","rows","2","autocomplete","off","preventMultipleSpaces","",1,"cl-form-control",3,"focusout"],["descriptionInput",""],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","bill-2","name","billableValue","formControlName","billable",1,"cl-custom-control-input"],["for","bill-2",1,"cl-custom-control-label"],[1,"cl-d-flex"],["type","button","class","cl-close cl-no-outline",3,"click",4,"ngIf"],["downloadFile",""],[1,"cl-modal-footer"],["type","button",1,"cl-btn","cl-text-primary","cl-text-capitalize","cl-mr-0",3,"click"],["type","submit",1,"cl-btn","cl-btn-primary","cl-ml-1",3,"disabled"],["deleteModal",""],[1,"cl-col-sm-8","cl-d-flex","cl-align-items-center","cl-p-0","cl-m-0"],[1,"cl-dropdown","cl-w-100"],[1,"cl-m-auto",3,"showLoggedInUser","hasAddTimeForOthersFeature","selectedUser","workspace","userSelected"],[1,"cl-dropdown-menu",3,"hideWorkspaces","showNoTasks","noForceTask","selectedUserId","selectedProjectAndTask"],[1,"cl-col-sm-8","cl-d-flex","cl-align-items-center","cl-p-0","cl-invalid-feedback"],["for","file",1,"cl-btn","pointer","cl-mb-0","cl-text-break","cl-btn-outline-primary"],["id","file","type","file","name","file","tabindex","0",1,"pointer",2,"width","0","overflow","hidden",3,"disabled","change"],["fileInput",""],["for","file",1,"cl-btn","pointer","cl-mb-0","cl-text-break","cl-transform-none",3,"click"],[3,"title","btnText","showConfirmation","onClose","onDelete"],[1,"cl-text-muted","cl-mb-0"]],template:function(e,t){if(1&e&&(n.Xb(0,"form",0),n.jc("ngSubmit",(function(){return t.onSubmit()})),n.Xb(1,"div",1),n.Xb(2,"h3",2),n.Zc(3),n.oc(4,"translate"),n.oc(5,"translate"),n.Wb(),n.Xb(6,"button",3),n.jc("click",(function(){return t.closeModal()})),n.Xb(7,"span"),n.Sb(8,"img",4),n.Wb(),n.Wb(),n.Wb(),n.Xb(9,"div",5),n.Xc(10,P,7,7,"div",6),n.Xb(11,"div",7),n.Xb(12,"label",8),n.Zc(13),n.oc(14,"translate"),n.Wb(),n.Xb(15,"div",9),n.Xb(16,"datepicker-single-with-list",10),n.jc("onDateSelect",(function(e){return t.onDateChanged(e)})),n.Wb(),n.Wb(),n.Wb(),n.Xb(17,"div",7),n.Xb(18,"label",8),n.Zc(19),n.oc(20,"translate"),n.Xb(21,"span",11),n.Zc(22,"*"),n.Wb(),n.Wb(),n.Xb(23,"div",12),n.Xb(24,"div",13),n.Xb(25,"button",14),n.Xc(26,j,2,1,"ng-container",15),n.Xc(27,M,2,3,"ng-template",null,16,n.Yc),n.Wb(),n.Xc(29,X,1,4,"project-picker",17),n.Wb(),n.Wb(),n.Wb(),n.Xb(30,"div",7),n.Xb(31,"label",8),n.Zc(32),n.oc(33,"translate"),n.Xb(34,"span",11),n.Zc(35,"*"),n.Wb(),n.Wb(),n.Xb(36,"div",18),n.Xb(37,"div",19),n.Xb(38,"dropdown-searchable",20,21),n.jc("loadMore",(function(){return t.loadMoreCategories()}))("onSearch",(function(e){return t.onSearchCategories(e)}))("onChanged",(function(e){return t.categoryChanged(e)})),n.oc(40,"translate"),n.oc(41,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Sb(42,"hr"),n.Xb(43,"div",7),n.Xb(44,"label",8),n.Zc(45),n.oc(46,"translate"),n.Xb(47,"span",11),n.Zc(48,"*"),n.Wb(),n.Wb(),n.Xb(49,"div",18),n.Xb(50,"div",22),n.Xb(51,"input",23),n.jc("ngModelChange",(function(e){return t.quantity=e}))("focusout",(function(){return t.transformToDecimal()})),n.oc(52,"translate"),n.Wb(),n.Xb(53,"div",24),n.Zc(54),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Sb(55,"hr"),n.Xb(56,"div",7),n.Xb(57,"label",8),n.Zc(58),n.oc(59,"translate"),n.Wb(),n.Xb(60,"div",25),n.Xb(61,"textarea",26,27),n.jc("focusout",(function(){return t.noteChanged()})),n.Wb(),n.Wb(),n.Wb(),n.Xc(63,F,5,3,"div",6),n.Xb(64,"div",7),n.Xb(65,"label",8),n.Zc(66),n.oc(67,"translate"),n.Wb(),n.Xb(68,"div",9),n.Xb(69,"div",28),n.Sb(70,"input",29),n.Xb(71,"label",30),n.Zc(72),n.oc(73,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(74,"div",7),n.Xb(75,"label",8),n.Zc(76),n.oc(77,"translate"),n.Wb(),n.Vb(78),n.Xb(79,"div",31),n.Xc(80,W,3,0,"button",32),n.Xc(81,B,6,4,"div",15),n.Xc(82,N,2,1,"ng-template",null,33,n.Yc),n.Wb(),n.Ub(),n.Wb(),n.Wb(),n.Xb(84,"div",34),n.Xb(85,"button",35),n.jc("click",(function(){return t.closeModal()})),n.Zc(86),n.oc(87,"translate"),n.Wb(),n.Xb(88,"button",36),n.Zc(89),n.oc(90,"translate"),n.oc(91,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Xc(92,G,6,10,"ng-template",null,37,n.Yc)),2&e){const e=n.Lc(28),i=n.Lc(83);n.wc("formGroup",t.form),n.Cb(3),n.bd(" ","CREATE"===t.mode?n.pc(4,38,"EXPENSES.CREATE.MODAL.TITLE"):n.pc(5,40,"EXPENSES.EDIT.MODAL.TITLE")," "),n.Cb(7),n.wc("ngIf",t.showTeammatePicker),n.Cb(3),n.bd(" ",n.pc(14,42,"GLOBAL.DATE_LABEL")," "),n.Cb(3),n.wc("isUtc",!0)("hideRanges",!0)("standardLabel",!0)("date",t.date)("minDate",t.minDate),n.Cb(3),n.bd(" ",n.pc(20,44,"GLOBAL.PROJECT_LABEL")," "),n.Cb(7),n.wc("ngIf",t.project)("ngIfElse",e),n.Cb(6),n.bd(" ",n.pc(33,46,"WORKSPACE.SETTINGS.CATEGORY_LABEL")," "),n.Cb(6),n.wc("list",t.categories)("selectedName",null==t.category?null:t.category.name)("placeholder",n.pc(40,48,"EXPENSES.CREATE_MODAL.SEARCH_CATEGORIES.PLACEHOLDER"))("overrideTitle",t.category?t.category.name:n.pc(41,50,"PROJECTS.SHARED.SELECT_CATEGORY_PLACEHOLDER")),n.Cb(7),n.bd(" ",n.pc(46,52,"GLOBAL.AMOUNT_LABEL")," "),n.Cb(6),n.Hb("cl-font-weight-bolder",t.quantity)("cl-h2-important",t.quantity),n.wc("ngModel",t.quantity)("placeholder",n.pc(52,54,"EXPENSES.CREATE_MODAL.AMOUNT.PLACEHOLDER")),n.Cb(3),n.bd(" ",null!=t.category&&t.category.additionalInfo?null==t.category?null:t.category.additionalInfo:t.workspace.hourlyRate.currency," "),n.Cb(4),n.bd(" ",n.pc(59,56,"GLOBAL.NOTE_LABEL")," "),n.Cb(3),n.Hb("cl-is-invalid",t.noteTooLong),n.Cb(2),n.wc("ngIf",t.noteTooLong),n.Cb(3),n.bd(" ",n.pc(67,58,"GLOBAL.BILLABLE_LABEL")," "),n.Cb(6),n.ad(n.pc(73,60,"GLOBAL.CONFIRM_LABEL")),n.Cb(4),n.bd(" ",n.pc(77,62,"GLOBAL.FILE_ATTACHMENT_LABEL")," "),n.Cb(4),n.wc("ngIf",t.text),n.Cb(1),n.wc("ngIf",!t.text)("ngIfElse",i),n.Cb(5),n.bd("",n.pc(87,64,"GLOBAL.CANCEL_BTN")," "),n.Cb(2),n.wc("disabled",t.noteTooLong||t.form.invalid||"EDIT"===t.mode&&!t.changeFields.length||t.buttonSubmited),n.Cb(1),n.bd(" ","CREATE"===t.mode?n.pc(90,66,"GLOBAL.CREATE_LABEL"):n.pc(91,68,"GLOBAL.SAVE_LABEL")," ")}},directives:[s.I,s.t,s.k,O.u,A.a,k.a,T.a,D.a,I.a,s.c,s.s,s.i,s.a,_.a,R.a,L.a],pipes:[S.e],encapsulation:2}),e})()},JBiw:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("y+xF"),s=i("XNiG"),r=i("hkzH"),o=i("xoOP");class a{constructor(e){this.onChange=new s.a,this._maps=e}get maps(){return this._maps}set maps(e){this._maps=e}pushMap(e){this.addNewMap(e,!0)}unshiftMap(e){this.addNewMap(e,!1)}addNewMap(e,t){if(!e)return;const{index:i,map:n}=this.getMapAndIndex(e.key);if(i>-1)return n.value=e.value,void this.onChange.next("valueChanged");t?this.maps.push(e):this.maps.unshift(e),this.onChange.next("added")}pushToMap(e,t,i,s){if(!t||!t.length)return;const r=this.findSelectableMap(e);r?(r.label=(null==i?void 0:i.label)?i.label:r.label,r.push(t)):s?this.maps.unshift(new n.a(e,t,i)):this.maps.push(new n.a(e,t,i)),this.onChange.next("set")}unshiftToMap(e,t,i){if(!t||!t.length)return;const s=this.findSelectableMap(e);s?s.unshift(t):this.maps.unshift(new n.a(e,t,i)),this.onChange.next("set")}removeWithoutMapIfNeed(e){e===r.d.CONTAINS_ONLY&&this.removeMap(n.b)}removeMap(e){const t=this.getIndexOfKey(e);t<0||(this.maps.splice(t,1),this.onChange.next("removed"))}clearAllMaps(){this.maps=[],this.onChange.next("clearAllMaps")}countSelectablesOf(e){const t=this.findSelectableMap(e);return t?t.value.length:0}count(){let e=0;return this.maps.forEach(t=>{e+=t.value.length}),e}isWithoutSelected(){const e=this.findSelectableMap(n.b);if(!e)return!1;const t=e.findSelectable(n.b);return!(!t||!t.selected)}getSelectedEntities(e){const t=this.findSelectableMap(e);return t?t.value.filter(e=>e.selected).map(e=>e.entity):[]}getAllSelectedEntities(){let e=[];return this.maps.forEach(t=>{const i=t.value.filter(e=>e.selected).map(e=>e.entity);e=[...e,...i]}),e}findSelectableMap(e){const t=this.maps.length;for(let i=0;i<t;i++){const t=this.maps[i];if(t.key===e)return t}return null}setSelected(e){this.maps.forEach(t=>t.setSelectedAll(e))}setDisabled(e){this.maps.forEach(t=>t.setDisabledAll(e))}resetAll(e=!0){let t;e&&(t=this.findSelectableMap(n.b)),this.maps=[],t&&e&&this.maps.unshift(t),this.onChange.next("resetAll")}resetMap(e){const t=this.findSelectableMap(e);t&&t.reset(),this.onChange.next("resetMap")}getSelectedData(e,t=!1){const i={total:0,selected:0};return this.maps.forEach(s=>{if(t&&s.key===n.b)return;let r=s.value;e&&(r=r.filter(t=>Object(o.z)(t.entity.name||t.entity.email,e))),i.total+=r.length,i.selected+=r.filter(e=>e.selected).length}),i}getMapOfKey(e){return this.getMapAndIndex(e).map}getIndexOfKey(e){return this.getMapAndIndex(e).index}getMapAndIndex(e){const t=this.maps.length,i={index:-1,map:null};for(let n=0;n<t;n++){const t=this.maps[n];if(t.key===e)return i.index=n,i.map=t,i}return i}updateDisabledForSelectedLimit(e){if(!e)return;const{selected:t}=this.getSelectedData();this.maps.forEach(t>=e?e=>{e.value.forEach(e=>{e.selected||(e.isDisabled=!0)})}:e=>{e.value.forEach(e=>{e.isDisabled=!1})})}getLabelOf(e){return"label"}}},JO38:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i("fXoL"),s=i("fANO"),r=i("VYrk"),o=i("lGQG"),a=i("avDW"),c=i("NHP+"),l=i("1kSV"),u=i("ofXK"),d=i("3Pt+"),h=i("2rWG"),p=i("sbmM"),b=i("qUN8"),f=i("nAmH"),m=i("sYmb");function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",5),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().customField.value=t}))("focus",(function(){return n.Oc(e),n.nc().setDefaultValue()}))("change",(function(){n.Oc(e);const t=n.nc();return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb()}if(2&e){const e=n.nc();n.wc("type",e.customFieldType[e.customField.customField.type].label.toLowerCase())("placeholder",e.customField.customField.placeholder)("title",e.customField.customField.description||"")("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit)("ngModel",e.customField.value)}}function v(e,t){1&e&&n.Sb(0,"div",14)}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",9),n.Xc(1,v,1,0,"div",10),n.Xb(2,"a",11),n.jc("focus",(function(){return n.Oc(e),n.nc(2).setDefaultValue()})),n.Zc(3),n.Wb(),n.Xb(4,"a",12),n.jc("click",(function(){n.Oc(e);const t=n.nc(2),i=n.Lc(5);return t.openEditLinkModal(t.customField,i)})),n.Sb(5,"img",13),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(1),n.xc("href",e.customField.value,n.Qc),n.wc("title",e.customField.customField.description||""),n.Cb(1),n.ad(e.customField.customField.placeholder||e.customField.customField.name)}}function E(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",15),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).customField.value=t}))("focus",(function(){return n.Oc(e),n.nc(2).setDefaultValue()}))("change",(function(){n.Oc(e);const t=n.nc(2);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder",e.customField.customField.placeholder)("title",e.customField.customField.description||"")("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit)("ngModel",e.customField.value)}}function w(e,t){if(1&e&&(n.Xb(0,"div",6),n.Xc(1,C,6,4,"div",7),n.Xc(2,E,1,4,"input",8),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.editLink),n.Cb(1),n.wc("ngIf",!e.editLink)}}function S(e,t){1&e&&n.Sb(0,"div",14)}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"label",19),n.jc("click",(function(){return n.Oc(e),n.nc(2).setDefaultValue()})),n.Xc(1,S,1,0,"div",10),n.Xb(2,"span",20),n.Zc(3),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.wc("title",e.customField.customField.description||"")("for","switch"+e.customField.customField.id+e.timeEntryId+e.randomId),n.Cb(1),n.wc("ngIf",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(2),n.ad(e.customField.customField.placeholder)}}function O(e,t){1&e&&n.Sb(0,"div",14)}function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div"),n.Xb(1,"input",21),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).customField.value=t}))("change",(function(){n.Oc(e);const t=n.nc(2);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb(),n.Xb(2,"label",22),n.Xc(3,O,1,0,"div",10),n.Xb(4,"span",20),n.Zc(5),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit)("ngModel",e.customField.value)("title",e.customField.customField.description||"")("id","switch"+e.customField.customField.id+e.timeEntryId+e.randomId)("name","switch"+e.customField.customFieldId+e.timeEntryId+e.randomId),n.Cb(1),n.wc("title",e.customField.customField.description||"")("for","switch"+e.customField.customField.id+e.timeEntryId+e.randomId),n.Cb(1),n.wc("ngIf",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(2),n.ad(e.customField.customField.placeholder)}}function k(e,t){if(1&e&&(n.Xb(0,"div",16),n.Xc(1,y,4,4,"label",17),n.Xc(2,A,6,9,"div",18),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",null===e.customField.value),n.Cb(1),n.wc("ngIf",null!==e.customField.value)}}function T(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"div",32),n.Xb(2,"input",33),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(4).customField.value=t}))("change",(function(){n.Oc(e);const t=n.nc(4);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb(),n.Xb(3,"label",34),n.Xb(4,"div",20),n.Zc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(4);n.Cb(2),n.wc("id","option1"+i+s.customField.customField.name+s.timeEntryId)("name","option1"+i+s.customField.customField.name+s.timeEntryId)("value",e)("ngModel",s.customField.value),n.Cb(1),n.wc("for","option1"+i+s.customField.customField.name+s.timeEntryId),n.Cb(2),n.ad(e)}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"div",30),n.Zc(3),n.Wb(),n.Wb(),n.Xb(4,"div",31),n.Xb(5,"div",32),n.Xb(6,"input",33),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(3).customField.value=t}))("change",(function(){n.Oc(e);const t=n.nc(3);return t.update(t.customField.customFieldId,t.customField.value)})),n.Wb(),n.Xb(7,"label",34),n.Xb(8,"div",20),n.Zc(9),n.oc(10,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xc(11,T,6,6,"div",35),n.Wb()}if(2&e){const e=n.nc(3);n.Cb(3),n.bd(" ",e.customField.customField.placeholder," "),n.Cb(3),n.wc("id","option0"+e.customField.customField.name+e.timeEntryId)("name","option0"+e.customField.customField.name+e.timeEntryId)("value",null)("ngModel",e.customField.value),n.Cb(1),n.wc("for","option0"+e.customField.customField.name+e.timeEntryId),n.Cb(2),n.ad(n.pc(10,8,"GLOBAL.NONE_LABEL")),n.Cb(2),n.wc("ngForOf",e.customField.customField.allowedValues)}}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",31),n.Xb(1,"div",36),n.Xb(2,"input",37),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i})),n.Wb(),n.Xb(3,"label",34),n.Xb(4,"div",20),n.Zc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc(4);n.Cb(2),n.wc("id","option2"+i+s.customField.customField.name+s.timeEntryId)("name","option2"+i+s.customField.customField.name+s.timeEntryId)("ngModel",e.selected),n.Cb(1),n.wc("for","option2"+i+s.customField.customField.name+s.timeEntryId),n.Cb(2),n.ad(e.title)}}function _(e,t){if(1&e&&(n.Xb(0,"div",28),n.Xb(1,"div",29),n.Xb(2,"div",30),n.Zc(3),n.Wb(),n.Wb(),n.Xc(4,I,6,5,"div",35),n.Wb()),2&e){const e=n.nc(3);n.Cb(3),n.bd(" ",e.customField.customField.placeholder," "),n.Cb(1),n.wc("ngForOf",e.customField.customField.allowedValuesFull)}}function R(e,t){if(1&e&&(n.Xb(0,"div",26),n.Xc(1,D,12,10,"div",27),n.Xc(2,_,5,2,"div",27),n.Wb()),2&e){const e=n.nc(2);n.Db("alwaysUp",!!e.fromEdit||null),n.Cb(1),n.wc("ngIf",e.customField.customField.type===e.customFieldType.DROPDOWN_SINGLE.value),n.Cb(1),n.wc("ngIf",e.customField.customField.type===e.customFieldType.DROPDOWN_MULTIPLE.value)}}function L(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",23),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.dropdownClosed(t.customField.customFieldId)})),n.Xb(1,"button",24),n.jc("focus",(function(){return n.Oc(e),n.nc().setDefaultValue()})),n.Zc(2),n.Wb(),n.Xc(3,R,3,3,"div",25),n.Wb()}if(2&e){const e=n.nc();n.wc("title",e.customField.customField.description||""),n.Cb(1),n.wc("disabled",!e.isAdmin&&e.customField.customField.onlyAdminCanEdit),n.Cb(1),n.bd(" ",null!=e.customField.value&&e.customField.value.length?e.getSelected():e.customField.customField.placeholder," ")}}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"rename-modal",38),n.jc("editedValue",(function(i){n.Oc(e);const s=t.$implicit;return n.nc().saveLinkValue(i),s.close()}))("isOpen",(function(){return t.$implicit.close()})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc();n.wc("title",n.pc(1,3,"SHARED_MODULES.CUSTOM_FIELD.RENAME_LINK_LABEL"))("label",e.currentEditCustomFieldValue.customField.placeholder||e.currentEditCustomFieldValue.customField.name)("inputValue",e.currentEditCustomFieldValue.value)}}let P=(()=>{class e{constructor(e,t,i,r){this.authService=e,this.trackerService=t,this.modalService=i,this.cd=r,this.fromEdit=!1,this.valueChanged=new n.n,this.manyChanged=new n.n,this.customFieldType=s.a,this.unsubscribe$=new c.a,this.randomId=Math.floor(6*Math.random()+1)}set customField(e){this._customField=e,this.createAllowedValuesForCheckList(),this.editLink=this.isEditLink()}get customField(){return this._customField}ngOnInit(){this.isAdmin=this.authService.isAdminOrOwner()}update(e,t){this.disabled||(this.customField.customField.type===s.b.NUMBER&&(t=t&&""!=t?Number(t):null,this.customField.value=t),this.timeEntryId&&this.timeEntryId.includes("PARENT")?this.manyChanged.emit(t):(this.timeEntryId?this.trackerService.editCustomField(this.timeEntryId,new r.a({customFieldId:e,value:t})).subscribe():this.createAllowedValuesForCheckList(),this.valueChanged.emit(t)))}dropdownClosed(e){if(this.customField.customField.type!==s.b.DROPDOWN_MULTIPLE)return;const t=this.customField.value;this.customField.value=this.customField.customField.allowedValuesFull.filter(e=>e.selected).map(e=>e.title),JSON.stringify(this.customField.value)!==JSON.stringify(t)&&this.update(e,this.customField.value)}createAllowedValuesForCheckList(){this.customField.customField.allowedValuesFull=this.customField.customField.type==s.b.DROPDOWN_MULTIPLE||this.customField.customField.type==s.b.DROPDOWN_SINGLE?this.customField.customField.allowedValues.map(e=>({title:e,selected:this.customField.value&&this.customField.value.indexOf(e)>-1})):[]}openEditLinkModal(e,t){this.currentEditCustomFieldValue=e,this.modalService.open(t,{centered:!0})}saveLinkValue(e){this.timeEntryId?this.update(this.currentEditCustomFieldValue.customFieldId,e):(this.customField.value=e,this.valueChanged.emit(e)),this.currentEditCustomFieldValue.value=e}isEditLink(){return"link"===this.customFieldType[this.customField.customField.type].fieldType&&this.customField.value&&""!==this.customField.value}getSelected(){if(this.customField.customField.type===s.b.DROPDOWN_MULTIPLE&&"object"==typeof this.customField.value){let e="";return this.customField.value.map((t,i)=>{e+=i===this.customField.value.length-1?t:t+", "}),e}return this.customField.value}setDefaultValue(){if(!this.disabled&&!this.customField.value)if(this.customField.customField.type!==s.b.CHECKBOX)this.customField.defaultValue&&this.updateToDefaultValue(null);else{const e=this.customField.defaultValue||!1;if(this.updateToDefaultValue(e),this.customField.value=e,this.timeEntryId&&this.timeEntryId.includes("PARENT"))return;this.valueChanged.emit(e)}}updateToDefaultValue(e){this.timeEntryId&&(this.timeEntryId.includes("PARENT")?this.manyChanged.emit(e):this.trackerService.editCustomField(this.timeEntryId,new r.a({customFieldId:this.customField.customFieldId,value:e})).subscribe(e=>{this.customField.value=e.value,this.editLink=!!e.value,this.createAllowedValuesForCheckList(),this.cd.detectChanges()}))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.a),n.Rb(a.a),n.Rb(l.q),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["custom-field-value"]],inputs:{customField:"customField",timeEntryId:"timeEntryId",fromEdit:"fromEdit",disabled:"disabled"},outputs:{valueChanged:"valueChanged",manyChanged:"manyChanged"},decls:6,vars:4,consts:[["class","cl-form-control cl-form-control-sm cl-cut-text",3,"type","placeholder","title","disabled","ngModel","ngModelChange","focus","change",4,"ngIf"],["class","cl-cut-text-wrapper",4,"ngIf"],["class","cl-custom-control cl-custom-switch",4,"ngIf"],["class","cl-dropdown","dropdownKey","",3,"title","onClose",4,"ngIf"],["changeLink",""],[1,"cl-form-control","cl-form-control-sm","cl-cut-text",3,"type","placeholder","title","disabled","ngModel","ngModelChange","focus","change"],[1,"cl-cut-text-wrapper"],["class","cl-d-flex cl-align-items-center",4,"ngIf"],["type","text","class","cl-form-control cl-form-control-sm cl-cut-text",3,"placeholder","title","disabled","ngModel","ngModelChange","focus","change",4,"ngIf"],[1,"cl-d-flex","cl-align-items-center"],["class","cl-blocker",4,"ngIf"],["target","_blank",1,"cl-cut-text","cl-small","cl-color-blue",3,"href","title","focus"],["data-toggle","modal",1,"cl-ml-2",3,"click"],["src","assets/images/ui-icons/edit.svg"],[1,"cl-blocker"],["type","text",1,"cl-form-control","cl-form-control-sm","cl-cut-text",3,"placeholder","title","disabled","ngModel","ngModelChange","focus","change"],[1,"cl-custom-control","cl-custom-switch"],["class","cl-custom-control-label-fake cl-d-flex",3,"title","for","click",4,"ngIf"],[4,"ngIf"],[1,"cl-custom-control-label-fake","cl-d-flex",3,"title","for","click"],[1,"cl-cut-text"],["type","checkbox",1,"cl-custom-control-input",3,"disabled","ngModel","title","id","name","ngModelChange","change"],[1,"cl-custom-control-label","cl-d-flex",3,"title","for"],["dropdownKey","",1,"cl-dropdown",3,"title","onClose"],["dropdownKeyButton","","type","button",1,"cl-btn","cl-btn-sm","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text","cl-pr-3","cl-cf-dropdown",3,"disabled","focus"],["class","cl-dropdown-menu cl-mw-100 cl-prevent-close","openUpAtBottom","",4,"dropdownKeyContent"],["openUpAtBottom","",1,"cl-dropdown-menu","cl-mw-100","cl-prevent-close"],["class","cl-scroll-area",4,"ngIf"],[1,"cl-scroll-area"],[1,"cl-dropdown-menu-sub-header","cl-cut-text-wrapper"],[1,"cl-dropdown-item-padding","cl-cut-text"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-radio"],["type","radio",1,"cl-custom-control-input",3,"id","name","value","ngModel","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","name","ngModel","ngModelChange"],[3,"title","label","inputValue","editedValue","isOpen"]],template:function(e,t){1&e&&(n.Xc(0,g,1,5,"input",0),n.Xc(1,w,3,2,"div",1),n.Xc(2,k,3,2,"div",2),n.Xc(3,L,4,3,"div",3),n.Xc(4,x,2,5,"ng-template",null,4,n.Yc)),2&e&&(n.wc("ngIf","input"===t.customFieldType[t.customField.customField.type].fieldType),n.Cb(1),n.wc("ngIf","link"===t.customFieldType[t.customField.customField.type].fieldType),n.Cb(1),n.wc("ngIf","switch"===t.customFieldType[t.customField.customField.type].fieldType),n.Cb(1),n.wc("ngIf","dropdown"===t.customFieldType[t.customField.customField.type].fieldType))},directives:[u.u,d.c,d.s,d.v,d.a,h.a,p.a,b.a,d.A,u.t,f.a],pipes:[m.e],encapsulation:2,changeDetection:0}),e})()},"Jmk/":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("lJxs"),s=i("vkgz"),r=i("XNiG"),o=i("UMzN"),a=i("Ymxs"),c=i("1Tmk"),l=i("tk/3"),u=i("LfE4"),d=i("nLyk"),h=i("rsZi"),p=i("lvCY"),b=i("PS6/"),f=i("fXoL"),m=i("sYmb");let g=(()=>{class e{constructor(e,t,i,n){this.http=e,this.workspaceService=t,this.toaster=i,this.translateService=n,this.error=new r.a,this.clients=new r.a,this.client=new r.a,this.createdClient=new r.a}getAllClients(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new l.h).append("archived",e!==u.a.ALL?(e===u.a.ARCHIVED).toString():"");this.http.get(`/workspaces/${i}/clients`,{params:n}).subscribe(e=>{this.clients.next(e)},e=>{this.error.next(e)})}getAllClientsV1(e,t,i){const s=t||this.workspaceService.getDefaultWorkspaceId(),r=(new l.h).append("archived",e!==u.a.ALL?(e===u.a.ARCHIVED).toString():"").append("page",i.page).append("page-size",i.pageSize).append("name",i.name||"");return this.http.get(`/v1/workspaces/${s}/clients`,{params:r}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}getClientById(e){const t=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${t}/clients/${e}`).pipe(Object(n.a)(e=>new o.a(e))).subscribe(e=>{this.client.next(e)},e=>{this.error.next(e)})}create(e,t,i){const s=i||this.workspaceService.getDefaultWorkspaceId(),a=e.trim(),c=JSON.stringify({name:a}),l=new r.a;return this.http.post(`/workspaces/${s}/clients`,c).pipe(Object(n.a)(e=>new o.a(e))).subscribe(e=>{this.createdClient.next(e),l.next(e),this.toaster.pop("success",this.translateService.instant("SERVICES.CLIENT.CREATE.SUCCESS_MESSAGE",{projectGroupingLabel:Object(b.a)(t),projectName:a}))},e=>{this.error.next(e),l.error(e),this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("WORKSPACE.ENTITY_TABLE.LABEL_NAME_EXISTS_ERROR_MSG",{labelName:Object(b.a)(t),newLabelName:a}))}),l}update(e,t,i){var r;const a={name:e.name.trim(),address:null===(r=e.address)||void 0===r?void 0:r.trim(),archived:e.archived},c=(new l.h).append("archive-projects",(!!t).toString());return this.http.put(`/workspaces/${e.workspaceId}/clients/${e.id}`,a,{params:c}).pipe(Object(n.a)(e=>new o.a(e)),Object(s.a)(e=>{this.toaster.success(this.translateService.instant("SERVICES.CLIENT.UPDATE.SUCCESS_MESSAGE",{projectGroupingLabel:Object(b.a)(i)}))},t=>{var n;this.toaster.error((null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)||this.translateService.instant("SERVICES.CLIENT.NAME_EXISTS_ERROR_MESSAGE",{projectGroupingLabel:Object(b.a)(i),projectName:e.name})),this.error.next(t)}))}delete(e,t){return this.http.delete(`/workspaces/${e.workspaceId}/clients/${e.id}`).pipe(Object(n.a)(e=>new o.a(e)),Object(s.a)(i=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CLIENT.DELETE.SUCCESS_MESSAGE",{projectGroupingLabel:Object(b.a)(t),client:e.name}))},e=>{var i;this.toaster.pop("error",(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.message)||this.translateService.instant("SERVICES.CLIENT.DELETE.ERROR_MESSAGE",{projectGroupingLabel:Object(b.a)(t)})),this.error.next(e)}))}getClient(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/clients/${e}`).pipe(Object(n.a)(e=>new o.a(e)),Object(s.a)(e=>null,e=>{var t;this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("CLIENT.GET.ERROR_MESSAGE"))}))}getClientList(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("name",e.name||"").append("status",e.status).append("page",e.page||1).append("page-size",e.limit||p.j);return this.http.get(`/workspaces/${t}/clients/report-filters`,{params:i}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}getClientIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("name",e.name||"").append("status",e.status);return this.http.get(`workspaces/${t}/clients/report-filters/ids`,{params:i}).pipe(Object(n.a)(e=>e),Object(s.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.CLIENT.GET_ID.ERROR_MESSAGE"))))}getClientsForProjectFilter(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),s=(new l.h).append("name",e.name||"").append("sort-column",e.sortColumn||d.a.NAME).append("sort-order",e.sortOrder||h.a.ASCENDING).append("page",e.page||1).append("page-size",e.limit||p.j).append("archived",e.archived!==u.a.ALL?(e.archived===u.a.ARCHIVED).toString():"");return this.http.get(`/workspaces/${i}/clients/projects-filter`,{params:s}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}getClients(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),s=(new l.h).append("name",e.name||"").append("sort-column",e.sortColumn||d.a.NAME).append("sort-order",e.sortOrder||h.a.ASCENDING).append("page",e.page||1).append("page-size",e.limit||p.j).append("archived",e.archived!==u.a.ALL?(e.archived===u.a.ARCHIVED).toString():"");return this.http.get(`/v1/workspaces/${i}/clients`,{params:s}).pipe(Object(n.a)(e=>e.map(e=>new o.a(e))))}createClient(e,t,i){const n=i||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/v1/workspaces/${n}/clients`,{name:e}).pipe(Object(s.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CLIENT.CREATE.SUCCES_TITLE",{projectGroupingLabel:t}),this.translateService.instant("SERVICES.CLIENT.CREATE.SUCCESS_MESSAGE",{projectGroupingLabel:t,projectName:e.name}))},i=>{this.toaster.pop("error",i.error&&i.error.message||this.translateService.instant("SERVICES.CLIENT.NAME_EXISTS_ERROR_MESSAGE",{projectGroupingLabel:Object(b.a)(t),projectName:e})),this.error.next(i)}))}}return e.\u0275fac=function(t){return new(t||e)(f.fc(l.c),f.fc(c.a),f.fc(a.a),f.fc(m.f))},e.\u0275prov=f.Nb({token:e,factory:e.\u0275fac}),e})()},"Ju5/":function(e,t,i){"use strict";var n=i("XqMk"),s="object"==typeof self&&self&&self.Object===Object&&self,r=n.a||s||Function("return this")();t.a=r},KAau:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("fXoL"),s=i("sYmb"),r=i("ofXK");function o(e,t){if(1&e&&(n.Xb(0,"div",5),n.Sb(1,"img",6),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("src",e.imagePath,n.Qc)}}function a(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"span",7),n.Zc(2),n.Wb(),n.Ub()),2&e){const e=n.nc();n.Cb(2),n.ad(e.loadingMessage)}}function c(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"span",7),n.Zc(2),n.Wb(),n.Ub()),2&e){const e=n.nc(2);n.Cb(2),n.ad(e.errorMessage)}}function l(e,t){if(1&e&&n.Xc(0,c,3,1,"ng-container",2),2&e){const e=n.nc(),t=n.Lc(6);n.wc("ngIf",e.isError)("ngIfElse",t)}}function u(e,t){if(1&e&&(n.Xb(0,"span",8),n.Zc(1),n.Wb(),n.Xb(2,"p",9),n.Zc(3),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(e.title),n.Cb(2),n.ad(e.subtitle)}}function d(e,t){if(1&e&&(n.Xc(0,u,4,2,"ng-template",1),n.uc(1)),2&e){const e=n.nc();n.wc("ngIf",!e.isTracker)}}const h=[[["","trackerPageContent",""]]],p=["[trackerPageContent]"];let b=(()=>{class e{constructor(e){this.translate=e,this.imagePath="assets/clockify_illustration.svg",this.isError=!1}ngOnInit(){const e=this.translate.instant(["TRACKER.ENTRY_MESSAGES.TITLE","TRACKER.ENTRY_MESSAGES.SUBTITLE","TRACKER.ENTRY_MESSAGES.ERROR","TRACKER.ENTRY_MESSAGES.LOADING"]);this.title=this.title||e["TRACKER.ENTRY_MESSAGES.TITLE"],this.subtitle=this.subtitle||e["TRACKER.ENTRY_MESSAGES.SUBTITLE"],this.errorMessage=this.errorMessage||e["TRACKER.ENTRY_MESSAGES.ERROR"],this.loadingMessage=this.loadingMessage||e["TRACKER.ENTRY_MESSAGES.LOADING"]}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["message-entries"]],inputs:{title:"title",subtitle:"subtitle",errorMessage:"errorMessage",loadingMessage:"loadingMessage",loadInProgress:"loadInProgress",imagePath:"imagePath",isError:"isError",isTracker:"isTracker"},ngContentSelectors:p,decls:7,vars:3,consts:[[1,"cl-no-entries"],[3,"ngIf"],[4,"ngIf","ngIfElse"],["errorMessageTemplate",""],["messageTemplate",""],[1,"cl-no-entries-image-wrapper"],[1,"no__entries--image",3,"src"],[1,"cl-h2"],[1,"cl-h2","cl-mb-1"],[1,"cl-mb-0","cl-color-grey"]],template:function(e,t){if(1&e&&(n.vc(h),n.Xb(0,"div",0),n.Xc(1,o,2,1,"ng-template",1),n.Xc(2,a,3,1,"ng-container",2),n.Xc(3,l,1,2,"ng-template",null,3,n.Yc),n.Xc(5,d,2,1,"ng-template",null,4,n.Yc),n.Wb()),2&e){const e=n.Lc(4);n.Cb(1),n.wc("ngIf",!t.isTracker),n.Cb(1),n.wc("ngIf",t.loadInProgress)("ngIfElse",e)}},directives:[r.u],encapsulation:2,changeDetection:0}),e})()},"Kdc/":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return e.locale(t).format("dd, MMM D")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"momentToLocaleDateString",type:e,pure:!0}),e})()},KnX9:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),s=i("ofXK"),r=i("rg2B");function o(e,t){if(1&e&&(n.Xb(0,"div",5),n.Zc(1),n.oc(2,"roundIfWholeNumber"),n.Wb()),2&e){const e=n.nc();n.Hb("cl-text-center",e.centerText),n.Cb(1),n.bd("",n.pc(2,3,e.percentage),"%")}}function a(e,t){if(1&e&&(n.Xb(0,"div",6),n.Zc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.ad(e.showValueOutside)}}function c(e,t){if(1&e&&(n.Xb(0,"span",7),n.Zc(1),n.oc(2,"roundIfWholeNumber"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd("",n.pc(2,1,e.percentage),"%")}}let l=(()=>{class e{set percentage(e){this._percentage=e,this.isOverHundred=this.percentage>100}get percentage(){return this._percentage}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["percentage-progress-bar"]],inputs:{percentage:"percentage",showPercentageOutsideOfProgress:"showPercentageOutsideOfProgress",centerText:"centerText",showValueOutside:"showValueOutside"},decls:5,vars:9,consts:[["class","",3,"cl-text-center",4,"ngIf"],["class","cl-px-1 cl-position-relative cl-mb-2",4,"ngIf"],[1,"cl-progress","cl-mt-1"],["role","progressbar",1,"cl-progress-bar"],["class","cl-px-1",4,"ngIf"],[1,""],[1,"cl-px-1","cl-position-relative","cl-mb-2"],[1,"cl-px-1"]],template:function(e,t){1&e&&(n.Xc(0,o,3,5,"div",0),n.Xc(1,a,2,1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xc(4,c,3,3,"span",4),n.Wb(),n.Wb()),2&e&&(n.wc("ngIf",t.showPercentageOutsideOfProgress),n.Cb(1),n.wc("ngIf",t.showValueOutside),n.Cb(2),n.Wc("width",t.percentage+"%"),n.Hb("cl-progress-bar-success",!t.isOverHundred)("cl-bg-danger",t.isOverHundred),n.Cb(1),n.wc("ngIf",!t.showPercentageOutsideOfProgress&&!t.showValueOutside))},directives:[s.u],pipes:[r.a],encapsulation:2}),e})()},L3Qv:function(e,t,i){"use strict";t.a=function(){return!1}},LM6y:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},LNDd:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("9Trn"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a]]}),e})()},LPYB:function(e,t,i){"use strict";i.d(t,"a",(function(){return ut})),i.d(t,"b",(function(){return dt}));var n=i("fXoL"),s=i("MO+k"),r=i("2Vo4"),o=function(e,t){return e===t||e!=e&&t!=t},a=function(e,t){for(var i=e.length;i--;)if(o(e[i][0],t))return i;return-1},c=Array.prototype.splice;function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(e){var t=this.__data__,i=a(t,e);return!(i<0||(i==t.length-1?t.pop():c.call(t,i,1),--this.size,0))},l.prototype.get=function(e){var t=this.__data__,i=a(t,e);return i<0?void 0:t[i][1]},l.prototype.has=function(e){return a(this.__data__,e)>-1},l.prototype.set=function(e,t){var i=this.__data__,n=a(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var u,d=l,h=i("Ju5/"),p=h.a.Symbol,b=Object.prototype,f=b.hasOwnProperty,m=b.toString,g=p?p.toStringTag:void 0,v=Object.prototype.toString,C=p?p.toStringTag:void 0,E=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":C&&C in Object(e)?function(e){var t=f.call(e,g),i=e[g];try{e[g]=void 0;var n=!0}catch(r){}var s=m.call(e);return n&&(t?e[g]=i:delete e[g]),s}(e):function(e){return v.call(e)}(e)},w=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},S=function(e){if(!w(e))return!1;var t=E(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},y=h.a["__core-js_shared__"],O=(u=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",A=Function.prototype.toString,k=function(e){if(null!=e){try{return A.call(e)}catch(t){}try{return e+""}catch(t){}}return""},T=/^\[object .+?Constructor\]$/,D=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=function(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!w(e)||(t=e,O&&O in t))&&(S(e)?D:T).test(k(e));var t}(i)?i:void 0},_=I(h.a,"Map"),R=I(Object,"create"),L=Object.prototype.hasOwnProperty,x=Object.prototype.hasOwnProperty;function P(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}P.prototype.clear=function(){this.__data__=R?R(null):{},this.size=0},P.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},P.prototype.get=function(e){var t=this.__data__;if(R){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return L.call(t,e)?t[e]:void 0},P.prototype.has=function(e){var t=this.__data__;return R?void 0!==t[e]:x.call(t,e)},P.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=R&&void 0===t?"__lodash_hash_undefined__":t,this};var j=P,M=function(e,t){var i,n,s=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map};function X(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}X.prototype.clear=function(){this.size=0,this.__data__={hash:new j,map:new(_||d),string:new j}},X.prototype.delete=function(e){var t=M(this,e).delete(e);return this.size-=t?1:0,t},X.prototype.get=function(e){return M(this,e).get(e)},X.prototype.has=function(e){return M(this,e).has(e)},X.prototype.set=function(e,t){var i=M(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};var F=X;function W(e){var t=this.__data__=new d(e);this.size=t.size}W.prototype.clear=function(){this.__data__=new d,this.size=0},W.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},W.prototype.get=function(e){return this.__data__.get(e)},W.prototype.has=function(e){return this.__data__.has(e)},W.prototype.set=function(e,t){var i=this.__data__;if(i instanceof d){var n=i.__data__;if(!_||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new F(n)}return i.set(e,t),this.size=i.size,this};var B=W,N=function(){try{var e=I(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),G=function(e,t,i){"__proto__"==t&&N?N(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i},U=Object.prototype.hasOwnProperty,V=function(e,t,i){var n=e[t];U.call(e,t)&&o(n,i)&&(void 0!==i||t in e)||G(e,t,i)},H=function(e,t,i,n){var s=!i;i||(i={});for(var r=-1,o=t.length;++r<o;){var a=t[r],c=n?n(i[a],e[a],a,i,e):void 0;void 0===c&&(c=e[a]),s?G(i,a,c):V(i,a,c)}return i},Y=function(e){return null!=e&&"object"==typeof e},$=function(e){return Y(e)&&"[object Arguments]"==E(e)},z=Object.prototype,Z=z.hasOwnProperty,K=z.propertyIsEnumerable,q=$(function(){return arguments}())?$:function(e){return Y(e)&&Z.call(e,"callee")&&!K.call(e,"callee")},J=Array.isArray,Q=i("WOAq"),ee=/^(?:0|[1-9]\d*)$/,te=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&ee.test(e))&&e>-1&&e%1==0&&e<t},ie=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ne={};ne["[object Float32Array]"]=ne["[object Float64Array]"]=ne["[object Int8Array]"]=ne["[object Int16Array]"]=ne["[object Int32Array]"]=ne["[object Uint8Array]"]=ne["[object Uint8ClampedArray]"]=ne["[object Uint16Array]"]=ne["[object Uint32Array]"]=!0,ne["[object Arguments]"]=ne["[object Array]"]=ne["[object ArrayBuffer]"]=ne["[object Boolean]"]=ne["[object DataView]"]=ne["[object Date]"]=ne["[object Error]"]=ne["[object Function]"]=ne["[object Map]"]=ne["[object Number]"]=ne["[object Object]"]=ne["[object RegExp]"]=ne["[object Set]"]=ne["[object String]"]=ne["[object WeakMap]"]=!1;var se=function(e){return function(t){return e(t)}},re=i("xutz"),oe=re.a&&re.a.isTypedArray,ae=oe?se(oe):function(e){return Y(e)&&ie(e.length)&&!!ne[E(e)]},ce=Object.prototype.hasOwnProperty,le=function(e,t){var i=J(e),n=!i&&q(e),s=!i&&!n&&Object(Q.a)(e),r=!i&&!n&&!s&&ae(e),o=i||n||s||r,a=o?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],c=a.length;for(var l in e)!t&&!ce.call(e,l)||o&&("length"==l||s&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||te(l,c))||a.push(l);return a},ue=Object.prototype,de=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ue)},he=function(e,t){return function(i){return e(t(i))}},pe=he(Object.keys,Object),be=Object.prototype.hasOwnProperty,fe=function(e){return null!=e&&ie(e.length)&&!S(e)},me=function(e){return fe(e)?le(e):function(e){if(!de(e))return pe(e);var t=[];for(var i in Object(e))be.call(e,i)&&"constructor"!=i&&t.push(i);return t}(e)},ge=Object.prototype.hasOwnProperty,ve=function(e){return fe(e)?le(e,!0):function(e){if(!w(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=de(e),i=[];for(var n in e)("constructor"!=n||!t&&ge.call(e,n))&&i.push(n);return i}(e)},Ce=i("3/ER"),Ee=function(){return[]},we=Object.prototype.propertyIsEnumerable,Se=Object.getOwnPropertySymbols,ye=Se?function(e){return null==e?[]:(e=Object(e),function(t,i){for(var n=-1,s=null==t?0:t.length,r=0,o=[];++n<s;){var a=t[n];we.call(e,a)&&(o[r++]=a)}return o}(Se(e)))}:Ee,Oe=function(e,t){for(var i=-1,n=t.length,s=e.length;++i<n;)e[s+i]=t[i];return e},Ae=he(Object.getPrototypeOf,Object),ke=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Oe(t,ye(e)),e=Ae(e);return t}:Ee,Te=function(e,t,i){var n=t(e);return J(e)?n:Oe(n,i(e))},De=function(e){return Te(e,me,ye)},Ie=function(e){return Te(e,ve,ke)},_e=I(h.a,"DataView"),Re=I(h.a,"Promise"),Le=I(h.a,"Set"),xe=I(h.a,"WeakMap"),Pe=k(_e),je=k(_),Me=k(Re),Xe=k(Le),Fe=k(xe),We=E;(_e&&"[object DataView]"!=We(new _e(new ArrayBuffer(1)))||_&&"[object Map]"!=We(new _)||Re&&"[object Promise]"!=We(Re.resolve())||Le&&"[object Set]"!=We(new Le)||xe&&"[object WeakMap]"!=We(new xe))&&(We=function(e){var t=E(e),i="[object Object]"==t?e.constructor:void 0,n=i?k(i):"";if(n)switch(n){case Pe:return"[object DataView]";case je:return"[object Map]";case Me:return"[object Promise]";case Xe:return"[object Set]";case Fe:return"[object WeakMap]"}return t});var Be=We,Ne=Object.prototype.hasOwnProperty,Ge=h.a.Uint8Array,Ue=function(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t},Ve=/\w*$/,He=p?p.prototype:void 0,Ye=He?He.valueOf:void 0,$e=Object.create,ze=function(){function e(){}return function(t){if(!w(t))return{};if($e)return $e(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),Ze=re.a&&re.a.isMap,Ke=Ze?se(Ze):function(e){return Y(e)&&"[object Map]"==Be(e)},qe=re.a&&re.a.isSet,Je=qe?se(qe):function(e){return Y(e)&&"[object Set]"==Be(e)},Qe={};Qe["[object Arguments]"]=Qe["[object Array]"]=Qe["[object ArrayBuffer]"]=Qe["[object DataView]"]=Qe["[object Boolean]"]=Qe["[object Date]"]=Qe["[object Float32Array]"]=Qe["[object Float64Array]"]=Qe["[object Int8Array]"]=Qe["[object Int16Array]"]=Qe["[object Int32Array]"]=Qe["[object Map]"]=Qe["[object Number]"]=Qe["[object Object]"]=Qe["[object RegExp]"]=Qe["[object Set]"]=Qe["[object String]"]=Qe["[object Symbol]"]=Qe["[object Uint8Array]"]=Qe["[object Uint8ClampedArray]"]=Qe["[object Uint16Array]"]=Qe["[object Uint32Array]"]=!0,Qe["[object Error]"]=Qe["[object Function]"]=Qe["[object WeakMap]"]=!1;var et=function e(t,i,n,s,r,o){var a,c=1&i,l=2&i,u=4&i;if(n&&(a=r?n(t,s,r,o):n(t)),void 0!==a)return a;if(!w(t))return t;var d=J(t);if(d){if(a=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(t),!c)return function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}(t,a)}else{var h=Be(t),p="[object Function]"==h||"[object GeneratorFunction]"==h;if(Object(Q.a)(t))return Object(Ce.a)(t,c);if("[object Object]"==h||"[object Arguments]"==h||p&&!r){if(a=l||p?{}:function(e){return"function"!=typeof e.constructor||de(e)?{}:ze(Ae(e))}(t),!c)return l?function(e,t){return H(e,ke(e),t)}(t,function(e,t){return e&&H(t,ve(t),e)}(a,t)):function(e,t){return H(e,ye(e),t)}(t,function(e,t){return e&&H(t,me(t),e)}(a,t))}else{if(!Qe[h])return r?t:{};a=function(e,t,i){var n,s,r=e.constructor;switch(t){case"[object ArrayBuffer]":return Ue(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e,t){var i=t?Ue(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var i=t?Ue(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}(e,i);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(s=new(n=e).constructor(n.source,Ve.exec(n))).lastIndex=n.lastIndex,s;case"[object Set]":return new r;case"[object Symbol]":return Ye?Object(Ye.call(e)):{}}}(t,h,c)}}o||(o=new B);var b=o.get(t);if(b)return b;o.set(t,a),Je(t)?t.forEach((function(s){a.add(e(s,i,n,s,t,o))})):Ke(t)&&t.forEach((function(s,r){a.set(r,e(s,i,n,r,t,o))}));var f=d?void 0:(u?l?Ie:De:l?ve:me)(t);return function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i););}(f||t,(function(s,r){f&&(s=t[r=s]),V(a,r,e(s,i,n,r,t,o))})),a};const tt=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]];function it(e,t){return"rgba("+e.concat(t).join(",")+")"}function nt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function st(e){return{backgroundColor:e.map(e=>it(e,.6)),borderColor:e.map(()=>"#fff"),pointBackgroundColor:e.map(e=>it(e,1)),pointBorderColor:e.map(()=>"#fff"),pointHoverBackgroundColor:e.map(e=>it(e,1)),pointHoverBorderColor:e.map(e=>it(e,1))}}function rt(){return[nt(0,255),nt(0,255),nt(0,255)]}function ot(e){return tt[e]||rt()}function at(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=tt[i]||rt();return t}let ct=(()=>{class e{constructor(){this.pColorschemesOptions={},this.colorschemesOptions=new r.a({})}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(n.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const lt=function(){var e={Default:0,Update:1,Refresh:2};return e[e.Default]="Default",e[e.Update]="Update",e[e.Refresh]="Refresh",e}();let ut=(()=>{class e{constructor(e,t){this.element=e,this.themeService=t,this.options={},this.chartClick=new n.n,this.chartHover=new n.n,this.old={dataExists:!1,dataLength:0,datasetsExists:!1,datasetsLength:0,datasetsDataObjects:[],datasetsDataLengths:[],colorsExists:!1,colors:[],labelsExist:!1,labels:[],legendExists:!1,legend:{}},this.subs=[]}static registerPlugin(e){s.Chart.plugins.register(e)}static unregisterPlugin(e){s.Chart.plugins.unregister(e)}ngOnInit(){this.ctx=this.element.nativeElement.getContext("2d"),this.refresh(),this.subs.push(this.themeService.colorschemesOptions.subscribe(e=>this.themeChanged(e)))}themeChanged(e){this.refresh()}ngDoCheck(){if(!this.chart)return;let e=lt.Default;const t=t=>{e=t>e?t:e};switch(!!this.data!==this.old.dataExists&&(this.propagateDataToDatasets(this.data),this.old.dataExists=!!this.data,t(lt.Update)),this.data&&this.data.length!==this.old.dataLength&&(this.old.dataLength=this.data&&this.data.length||0,t(lt.Update)),!!this.datasets!==this.old.datasetsExists&&(this.old.datasetsExists=!!this.datasets,t(lt.Update)),this.datasets&&this.datasets.length!==this.old.datasetsLength&&(this.old.datasetsLength=this.datasets&&this.datasets.length||0,t(lt.Update)),this.datasets&&this.datasets.filter((e,t)=>e.data!==this.old.datasetsDataObjects[t]).length&&(this.old.datasetsDataObjects=this.datasets.map(e=>e.data),t(lt.Update)),this.datasets&&this.datasets.filter((e,t)=>e.data.length!==this.old.datasetsDataLengths[t]).length&&(this.old.datasetsDataLengths=this.datasets.map(e=>e.data.length),t(lt.Update)),!!this.colors!==this.old.colorsExists&&(this.old.colorsExists=!!this.colors,this.updateColors(),t(lt.Update)),this.colors&&this.colors.filter((e,t)=>!this.colorsEqual(e,this.old.colors[t])).length&&(this.old.colors=this.colors.map(e=>this.copyColor(e)),this.updateColors(),t(lt.Update)),!!this.labels!==this.old.labelsExist&&(this.old.labelsExist=!!this.labels,t(lt.Update)),this.labels&&this.labels.filter((e,t)=>!this.labelsEqual(e,this.old.labels[t])).length&&(this.old.labels=this.labels.map(e=>this.copyLabel(e)),t(lt.Update)),!!this.options.legend!==this.old.legendExists&&(this.old.legendExists=!!this.options.legend,t(lt.Refresh)),this.options.legend&&this.options.legend.position!==this.old.legend.position&&(this.old.legend.position=this.options.legend.position,t(lt.Refresh)),e){case lt.Default:break;case lt.Update:this.update();break;case lt.Refresh:this.refresh()}}copyLabel(e){return Array.isArray(e)?[...e]:e}labelsEqual(e,t){return Array.isArray(e)===Array.isArray(t)&&(Array.isArray(e)||e===t)&&(!Array.isArray(e)||e.length===t.length)&&(!Array.isArray(e)||0===e.filter((e,i)=>e!==t[i]).length)}copyColor(e){return{backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderColor:e.borderColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,pointBorderColor:e.pointBorderColor,pointBackgroundColor:e.pointBackgroundColor,pointBorderWidth:e.pointBorderWidth,pointRadius:e.pointRadius,pointHoverRadius:e.pointHoverRadius,pointHitRadius:e.pointHitRadius,pointHoverBackgroundColor:e.pointHoverBackgroundColor,pointHoverBorderColor:e.pointHoverBorderColor,pointHoverBorderWidth:e.pointHoverBorderWidth,pointStyle:e.pointStyle,hoverBackgroundColor:e.hoverBackgroundColor,hoverBorderColor:e.hoverBorderColor,hoverBorderWidth:e.hoverBorderWidth}}colorsEqual(e,t){return!e==!t&&(!e||e.backgroundColor===t.backgroundColor&&e.borderWidth===t.borderWidth&&e.borderColor===t.borderColor&&e.borderCapStyle===t.borderCapStyle&&e.borderDash===t.borderDash&&e.borderDashOffset===t.borderDashOffset&&e.borderJoinStyle===t.borderJoinStyle&&e.pointBorderColor===t.pointBorderColor&&e.pointBackgroundColor===t.pointBackgroundColor&&e.pointBorderWidth===t.pointBorderWidth&&e.pointRadius===t.pointRadius&&e.pointHoverRadius===t.pointHoverRadius&&e.pointHitRadius===t.pointHitRadius&&e.pointHoverBackgroundColor===t.pointHoverBackgroundColor&&e.pointHoverBorderColor===t.pointHoverBorderColor&&e.pointHoverBorderWidth===t.pointHoverBorderWidth&&e.pointStyle===t.pointStyle&&e.hoverBackgroundColor===t.hoverBackgroundColor&&e.hoverBorderColor===t.hoverBorderColor&&e.hoverBorderWidth===t.hoverBorderWidth)}updateColors(){this.datasets.forEach((e,t)=>{this.colors&&this.colors[t]?Object.assign(e,this.colors[t]):Object.assign(e,function(e,t,i){if("pie"===e||"doughnut"===e)return st(at(i));if("polarArea"===e)return{backgroundColor:(n=at(i)).map(e=>it(e,.6)),borderColor:n.map(e=>it(e,1)),hoverBackgroundColor:n.map(e=>it(e,.8)),hoverBorderColor:n.map(e=>it(e,1))};var n;if("line"===e||"radar"===e)return function(e){return{backgroundColor:it(e,.4),borderColor:it(e,1),pointBackgroundColor:it(e,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:it(e,.8)}}(ot(t));if("bar"===e||"horizontalBar"===e)return function(e){return{backgroundColor:it(e,.6),borderColor:it(e,1),hoverBackgroundColor:it(e,.8),hoverBorderColor:it(e,1)}}(ot(t));if("bubble"===e)return st(at(i));if("scatter"===e)return st(at(i));throw new Error("getColors - Unsupported chart type "+e)}(this.chartType,t,e.data.length),Object.assign({},e))})}ngOnChanges(e){let t=lt.Default;const i=e=>{t=e>t?e:t};switch(e.hasOwnProperty("data")&&e.data.currentValue&&(this.propagateDataToDatasets(e.data.currentValue),i(lt.Update)),e.hasOwnProperty("datasets")&&e.datasets.currentValue&&(this.propagateDatasetsToData(e.datasets.currentValue),i(lt.Update)),e.hasOwnProperty("labels")&&(this.chart&&(this.chart.data.labels=e.labels.currentValue),i(lt.Update)),e.hasOwnProperty("legend")&&(this.chart&&(this.chart.config.options.legend.display=e.legend.currentValue,this.chart.generateLegend()),i(lt.Update)),e.hasOwnProperty("options")&&i(lt.Refresh),t){case lt.Update:this.update();break;case lt.Refresh:case lt.Default:this.refresh()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}update(e,t){if(this.chart)return this.chart.update(e,t)}hideDataset(e,t){this.chart.getDatasetMeta(e).hidden=t,this.chart.update()}isDatasetHidden(e){return this.chart.getDatasetMeta(e).hidden}toBase64Image(){return this.chart.toBase64Image()}getChartConfiguration(){const e=this.getDatasets(),t=Object.assign({},this.options);!1===this.legend&&(t.legend={display:!1}),t.hover=t.hover||{},t.hover.onHover||(t.hover.onHover=(e,t)=>{t&&!t.length||this.chartHover.emit({event:e,active:t})}),t.onClick||(t.onClick=(e,t)=>{this.chartClick.emit({event:e,active:t})});const i=this.smartMerge(t,this.themeService.getColorschemesOptions());return{type:this.chartType,data:{labels:this.labels||[],datasets:e},plugins:this.plugins,options:i}}getChartBuilder(e){const t=this.getChartConfiguration();return new s.Chart(e,t)}smartMerge(e,t,i=0){if(0===i&&(e=et(e,5)),Object.keys(t).forEach(n=>{if(Array.isArray(t[n])){const s=e[n];s&&s.forEach(e=>{this.smartMerge(e,t[n][0],i+1)})}else"object"==typeof t[n]?(n in e||(e[n]={}),this.smartMerge(e[n],t[n],i+1)):e[n]=t[n]}),0===i)return e}isMultiLineLabel(e){return Array.isArray(e)}joinLabel(e){return e?this.isMultiLineLabel(e)?e.join(" "):e:null}propagateDatasetsToData(e){this.data=this.datasets.map(e=>e.data),this.chart&&(this.chart.data.datasets=e),this.updateColors()}propagateDataToDatasets(e){this.isMultiDataSet(e)?this.datasets&&e.length===this.datasets.length?this.datasets.forEach((t,i)=>{t.data=e[i]}):(this.datasets=e.map((e,t)=>({data:e,label:this.joinLabel(this.labels[t])||"Label "+t})),this.chart&&(this.chart.data.datasets=this.datasets)):this.datasets?(this.datasets[0].data=e,this.datasets.splice(1)):(this.datasets=[{data:e}],this.chart&&(this.chart.data.datasets=this.datasets)),this.updateColors()}isMultiDataSet(e){return Array.isArray(e[0])}getDatasets(){if(!this.datasets&&!this.data)throw new Error("ng-charts configuration error, data or datasets field are required to render chart "+this.chartType);return this.datasets?(this.propagateDatasetsToData(this.datasets),this.datasets):this.data?(this.propagateDataToDatasets(this.data),this.datasets):void 0}refresh(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.ctx&&(this.chart=this.getChartBuilder(this.ctx))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(ct))},e.\u0275dir=n.Mb({type:e,selectors:[["canvas","baseChart",""]],inputs:{options:"options",data:"data",datasets:"datasets",labels:"labels",chartType:"chartType",colors:"colors",legend:"legend",plugins:"plugins"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[n.Ab]}),e})(),dt=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},imports:[[]]}),e})()},Lcbf:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=e&&e.id,this._projectId=e&&e.projectId}get id(){return this._id}set id(e){this._id=e}get projectId(){return this._projectId}set projectId(e){this._projectId=e}}},Lwft:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e?e/100:e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"centsToDollars",type:e,pure:!0}),e})()},"MO+k":function(e,t,i){e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={rgb2hsl:i,rgb2hsv:n,rgb2hwb:s,rgb2cmyk:o,rgb2keyword:a,rgb2xyz:c,rgb2lab:l,rgb2lch:function(e){return C(l(e))},hsl2rgb:u,hsl2hsv:function(e){var t=e[1]/100,i=e[2]/100;return 0===i?[0,0,0]:[e[0],2*(t*=(i*=2)<=1?i:2-i)/(i+t)*100,(i+t)/2*100]},hsl2hwb:function(e){return s(u(e))},hsl2cmyk:function(e){return o(u(e))},hsl2keyword:function(e){return a(u(e))},hsv2rgb:d,hsv2hsl:function(e){var t,i,n=e[1]/100,s=e[2]/100;return t=n*s,[e[0],100*(t=(t/=(i=(2-n)*s)<=1?i:2-i)||0),100*(i/=2)]},hsv2hwb:function(e){return s(d(e))},hsv2cmyk:function(e){return o(d(e))},hsv2keyword:function(e){return a(d(e))},hwb2rgb:h,hwb2hsl:function(e){return i(h(e))},hwb2hsv:function(e){return n(h(e))},hwb2cmyk:function(e){return o(h(e))},hwb2keyword:function(e){return a(h(e))},cmyk2rgb:p,cmyk2hsl:function(e){return i(p(e))},cmyk2hsv:function(e){return n(p(e))},cmyk2hwb:function(e){return s(p(e))},cmyk2keyword:function(e){return a(p(e))},keyword2rgb:S,keyword2hsl:function(e){return i(S(e))},keyword2hsv:function(e){return n(S(e))},keyword2hwb:function(e){return s(S(e))},keyword2cmyk:function(e){return o(S(e))},keyword2lab:function(e){return l(S(e))},keyword2xyz:function(e){return c(S(e))},xyz2rgb:f,xyz2lab:m,xyz2lch:function(e){return C(m(e))},lab2xyz:v,lab2rgb:E,lab2lch:C,lch2lab:w,lch2xyz:function(e){return v(w(e))},lch2rgb:function(e){return E(w(e))}};function i(e){var t,i,n=e[0]/255,s=e[1]/255,r=e[2]/255,o=Math.min(n,s,r),a=Math.max(n,s,r),c=a-o;return a==o?t=0:n==a?t=(s-r)/c:s==a?t=2+(r-n)/c:r==a&&(t=4+(n-s)/c),(t=Math.min(60*t,360))<0&&(t+=360),i=(o+a)/2,[t,100*(a==o?0:i<=.5?c/(a+o):c/(2-a-o)),100*i]}function n(e){var t,i,n=e[0],s=e[1],r=e[2],o=Math.min(n,s,r),a=Math.max(n,s,r),c=a-o;return i=0==a?0:c/a*1e3/10,a==o?t=0:n==a?t=(s-r)/c:s==a?t=2+(r-n)/c:r==a&&(t=4+(n-s)/c),(t=Math.min(60*t,360))<0&&(t+=360),[t,i,a/255*1e3/10]}function s(e){var t=e[0],n=e[1],s=e[2];return[i(e)[0],1/255*Math.min(t,Math.min(n,s))*100,100*(s=1-1/255*Math.max(t,Math.max(n,s)))]}function o(e){var t,i=e[0]/255,n=e[1]/255,s=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-n,1-s)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]}function a(e){return O[JSON.stringify(e)]}function c(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*i+.0722*n),100*(.0193*t+.1192*i+.9505*n)]}function l(e){var t=c(e),i=t[0],n=t[1],s=t[2];return n/=100,s/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(i-n),200*(n-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]}function u(e){var t,i,n,s,r,o=e[0]/360,a=e[1]/100,c=e[2]/100;if(0==a)return[r=255*c,r,r];t=2*c-(i=c<.5?c*(1+a):c+a-c*a),s=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0&&n++,n>1&&n--,s[l]=255*(r=6*n<1?t+6*(i-t)*n:2*n<1?i:3*n<2?t+(i-t)*(2/3-n)*6:t);return s}function d(e){var t=e[0]/60,i=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,r=t-Math.floor(t),o=255*n*(1-i),a=255*n*(1-i*r),c=255*n*(1-i*(1-r));switch(n*=255,s){case 0:return[n,c,o];case 1:return[a,n,o];case 2:return[o,n,c];case 3:return[o,a,n];case 4:return[c,o,n];case 5:return[n,o,a]}}function h(e){var t,i,n,s,o=e[0]/360,a=e[1]/100,c=e[2]/100,l=a+c;switch(l>1&&(a/=l,c/=l),n=6*o-(t=Math.floor(6*o)),0!=(1&t)&&(n=1-n),s=a+n*((i=1-c)-a),t){default:case 6:case 0:r=i,g=s,b=a;break;case 1:r=s,g=i,b=a;break;case 2:r=a,g=i,b=s;break;case 3:r=a,g=s,b=i;break;case 4:r=s,g=a,b=i;break;case 5:r=i,g=a,b=s}return[255*r,255*g,255*b]}function p(e){var t=e[1]/100,i=e[2]/100,n=e[3]/100;return[255*(1-Math.min(1,e[0]/100*(1-n)+n)),255*(1-Math.min(1,t*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n))]}function f(e){var t,i,n,s=e[0]/100,r=e[1]/100,o=e[2]/100;return i=-.9689*s+1.8758*r+.0415*o,n=.0557*s+-.204*r+1.057*o,t=(t=3.2406*s+-1.5372*r+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1))]}function m(e){var t=e[0],i=e[1],n=e[2];return i/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function v(e){var t,i,n,s,r=e[0],o=e[1],a=e[2];return r<=8?s=(i=100*r/903.3)/100*7.787+16/116:(i=100*Math.pow((r+16)/116,3),s=Math.pow(i/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+s-16/116)/7.787:95.047*Math.pow(o/500+s,3),i,n=n/108.883<=.008859?n=108.883*(s-a/200-16/116)/7.787:108.883*Math.pow(s-a/200,3)]}function C(e){var t,i=e[0],n=e[1],s=e[2];return(t=360*Math.atan2(s,n)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(n*n+s*s),t]}function E(e){return f(v(e))}function w(e){var t,i=e[1];return t=e[2]/360*2*Math.PI,[e[0],i*Math.cos(t),i*Math.sin(t)]}function S(e){return y[e]}var y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},O={};for(var A in y)O[JSON.stringify(y[A])]=A;var k=function(){return new R};for(var T in t){k[T+"Raw"]=function(e){return function(i){return"number"==typeof i&&(i=Array.prototype.slice.call(arguments)),t[e](i)}}(T);var D=/(\w+)2(\w+)/.exec(T),I=D[1],_=D[2];(k[I]=k[I]||{})[_]=k[T]=function(e){return function(i){"number"==typeof i&&(i=Array.prototype.slice.call(arguments));var n=t[e](i);if("string"==typeof n||void 0===n)return n;for(var s=0;s<n.length;s++)n[s]=Math.round(n[s]);return n}}(T)}var R=function(){this.convs={}};R.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},R.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},R.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space;t=k[i][e](this.convs[i]),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach((function(e){R.prototype[e]=function(t){return this.routeSpace(e,arguments)}}));var L=k,x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},P={getRgba:j,getHsla:M,getRgb:function(e){var t=j(e);return t&&t.slice(0,3)},getHsl:function(e){var t=M(e);return t&&t.slice(0,3)},getHwb:X,getAlpha:function(e){var t=j(e);return t||(t=M(e))||(t=X(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+G(e[0])+G(e[1])+G(e[2])+(t>=0&&t<1?G(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?F(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:F,percentString:function(e,t){return t<1||e[3]&&e[3]<1?W(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:W,hslString:function(e,t){return t<1||e[3]&&e[3]<1?B(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:B,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return U[e.slice(0,3)]}};function j(e){if(e){var t=[0,0,0],i=1,n=e.match(/^#([a-fA-F0-9]{3,4})$/i),s="";if(n){s=(n=n[1])[3];for(var r=0;r<t.length;r++)t[r]=parseInt(n[r]+n[r],16);s&&(i=Math.round(parseInt(s+s,16)/255*100)/100)}else if(n=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(s=n[2],n=n[1],r=0;r<t.length;r++)t[r]=parseInt(n.slice(2*r,2*r+2),16);s&&(i=Math.round(parseInt(s,16)/255*100)/100)}else if(n=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<t.length;r++)t[r]=parseInt(n[r+1]);i=parseFloat(n[4])}else if(n=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(r=0;r<t.length;r++)t[r]=Math.round(2.55*parseFloat(n[r+1]));i=parseFloat(n[4])}else if(n=e.match(/(\w+)/)){if("transparent"==n[1])return[0,0,0,0];if(!(t=x[n[1]]))return}for(r=0;r<t.length;r++)t[r]=N(t[r],0,255);return i=i||0==i?N(i,0,1):1,t[3]=i,t}}function M(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[N(parseInt(t[1]),0,360),N(parseFloat(t[2]),0,100),N(parseFloat(t[3]),0,100),N(isNaN(i)?1:i,0,1)]}}}function X(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var i=parseFloat(t[4]);return[N(parseInt(t[1]),0,360),N(parseFloat(t[2]),0,100),N(parseFloat(t[3]),0,100),N(isNaN(i)?1:i,0,1)]}}}function F(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function W(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function B(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function N(e,t,i){return Math.min(Math.max(t,e),i)}function G(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var U={};for(var V in x)U[x[V]]=V;var H=function(e){return e instanceof H?e:this instanceof H?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=P.getRgba(e))?this.setValues("rgb",t):(t=P.getHsla(e))?this.setValues("hsl",t):(t=P.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new H(e);var t};H.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return P.hexString(this.values.rgb)},rgbString:function(){return P.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return P.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return P.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return P.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return P.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return P.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return P.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var n=e[i]/255;t[i]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,i=(t[0]+e)%360;return t[0]=i<0?360+i:i,this.setValues("hsl",t),this},mix:function(e,t){var i=e,n=void 0===t?.5:t,s=2*n-1,r=this.alpha()-i.alpha(),o=((s*r==-1?s:(s+r)/(1+s*r))+1)/2,a=1-o;return this.rgb(o*this.red()+a*i.red(),o*this.green()+a*i.green(),o*this.blue()+a*i.blue()).alpha(this.alpha()*n+i.alpha()*(1-n))},toJSON:function(){return this.rgb()},clone:function(){var e,t,i=new H,n=this.values,s=i.values;for(var r in n)n.hasOwnProperty(r)&&("[object Array]"===(t={}.toString.call(e=n[r]))?s[r]=e.slice(0):"[object Number]"===t?s[r]=e:console.error("unexpected color value:",e));return i}},H.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},H.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},H.prototype.getValues=function(e){for(var t=this.values,i={},n=0;n<e.length;n++)i[e.charAt(n)]=t[e][n];return 1!==t.alpha&&(i.a=t.alpha),i},H.prototype.setValues=function(e,t){var i,n,s=this.values,r=this.spaces,o=this.maxes,a=1;if(this.valid=!0,"alpha"===e)a=t;else if(t.length)s[e]=t.slice(0,e.length),a=t[e.length];else if(void 0!==t[e.charAt(0)]){for(i=0;i<e.length;i++)s[e][i]=t[e.charAt(i)];a=t.a}else if(void 0!==t[r[e][0]]){var c=r[e];for(i=0;i<e.length;i++)s[e][i]=t[c[i]];a=t.alpha}if(s.alpha=Math.max(0,Math.min(1,void 0===a?s.alpha:a)),"alpha"===e)return!1;for(i=0;i<e.length;i++)n=Math.max(0,Math.min(o[e][i],s[e][i])),s[e][i]=Math.round(n);for(var l in r)l!==e&&(s[l]=L[e][l](s[e]));return!0},H.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},H.prototype.setChannel=function(e,t,i){var n=this.values[e];return void 0===i?n[t]:(i===n[t]||(n[t]=i,this.setValues(e,n)),this)},"undefined"!=typeof window&&(window.Color=H);var Y,$=H,z={noop:function(){},uid:(Y=0,function(){return Y++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,i){return z.valueOrDefault(z.isArray(e)?e[t]:e,i)},callback:function(e,t,i){if(e&&"function"==typeof e.call)return e.apply(i,t)},each:function(e,t,i,n){var s,r,o;if(z.isArray(e))if(r=e.length,n)for(s=r-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<r;s++)t.call(i,e[s],s);else if(z.isObject(e))for(r=(o=Object.keys(e)).length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])},arrayEquals:function(e,t){var i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(r=t[i],(s=e[i])instanceof Array&&r instanceof Array){if(!z.arrayEquals(s,r))return!1}else if(s!==r)return!1;return!0},clone:function(e){if(z.isArray(e))return e.map(z.clone);if(z.isObject(e)){for(var t={},i=Object.keys(e),n=i.length,s=0;s<n;++s)t[i[s]]=z.clone(e[i[s]]);return t}return e},_merger:function(e,t,i,n){var s=t[e],r=i[e];z.isObject(s)&&z.isObject(r)?z.merge(s,r,n):t[e]=z.clone(r)},_mergerIf:function(e,t,i){var n=t[e],s=i[e];z.isObject(n)&&z.isObject(s)?z.mergeIf(n,s):t.hasOwnProperty(e)||(t[e]=z.clone(s))},merge:function(e,t,i){var n,s,r,o,a,c=z.isArray(t)?t:[t],l=c.length;if(!z.isObject(e))return e;for(n=(i=i||{}).merger||z._merger,s=0;s<l;++s)if(z.isObject(t=c[s]))for(a=0,o=(r=Object.keys(t)).length;a<o;++a)n(r[a],e,t,i);return e},mergeIf:function(e,t){return z.merge(e,t,{merger:z._mergerIf})},extend:function(e){for(var t=function(t,i){e[i]=t},i=1,n=arguments.length;i<n;++i)z.each(arguments[i],t);return e},inherits:function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=t.prototype,i.prototype=new n,i.extend=z.inherits,e&&z.extend(i.prototype,e),i.__super__=t.prototype,i}},Z=z;z.callCallback=z.callback,z.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)},z.getValueOrDefault=z.valueOrDefault,z.getValueAtIndexOrDefault=z.valueAtIndexOrDefault;var K={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i))},easeOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1===e?1:(i||(i=.3),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:2==(e/=.5)?1:(i||(i=.45),n<1?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),e<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-K.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*K.easeInBounce(2*e):.5*K.easeOutBounce(2*e-1)+.5}},q={effects:K};Z.easingEffects=K;var J=Math.PI,Q=J/180,ee=2*J,te=J/2,ie=J/4,ne=2*J/3,se={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,i,n,s,r){if(r){var o=Math.min(r,s/2,n/2),a=t+o,c=i+o,l=t+n-o,u=i+s-o;e.moveTo(t,c),a<l&&c<u?(e.arc(a,c,o,-J,-te),e.arc(l,c,o,-te,0),e.arc(l,u,o,0,te),e.arc(a,u,o,te,J)):a<l?(e.moveTo(a,i),e.arc(l,c,o,-te,te),e.arc(a,c,o,te,J+te)):c<u?(e.arc(a,c,o,-J,0),e.arc(a,u,o,0,J)):e.arc(a,c,o,-J,J),e.closePath(),e.moveTo(t,i)}else e.rect(t,i,n,s)},drawPoint:function(e,t,i,n,s,r){var o,a,c,l,u,d=(r||0)*Q;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(o=t.toString())&&"[object HTMLCanvasElement]"!==o){if(!(isNaN(i)||i<=0)){switch(e.beginPath(),t){default:e.arc(n,s,i,0,ee),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(d)*i,s-Math.cos(d)*i),d+=ne,e.lineTo(n+Math.sin(d)*i,s-Math.cos(d)*i),d+=ne,e.lineTo(n+Math.sin(d)*i,s-Math.cos(d)*i),e.closePath();break;case"rectRounded":l=i-(u=.516*i),a=Math.cos(d+ie)*l,c=Math.sin(d+ie)*l,e.arc(n-a,s-c,u,d-J,d-te),e.arc(n+c,s-a,u,d-te,d),e.arc(n+a,s+c,u,d,d+te),e.arc(n-c,s+a,u,d+te,d+J),e.closePath();break;case"rect":if(!r){l=Math.SQRT1_2*i,e.rect(n-l,s-l,2*l,2*l);break}d+=ie;case"rectRot":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+c,s-a),e.lineTo(n+a,s+c),e.lineTo(n-c,s+a),e.closePath();break;case"crossRot":d+=ie;case"cross":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c),e.moveTo(n+c,s-a),e.lineTo(n-c,s+a);break;case"star":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c),e.moveTo(n+c,s-a),e.lineTo(n-c,s+a),d+=ie,a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c),e.moveTo(n+c,s-a),e.lineTo(n-c,s+a);break;case"line":a=Math.cos(d)*i,c=Math.sin(d)*i,e.moveTo(n-a,s-c),e.lineTo(n+a,s+c);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(d)*i,s+Math.sin(d)*i)}e.fill(),e.stroke()}}else e.drawImage(t,n-t.width/2,s-t.height/2,t.width,t.height)},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,i,n){var s=i.steppedLine;if(s){if("middle"===s){var r=(t.x+i.x)/2;e.lineTo(r,n?i.y:t.y),e.lineTo(r,n?t.y:i.y)}else"after"===s&&!n||"after"!==s&&n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}else i.tension?e.bezierCurveTo(n?t.controlPointPreviousX:t.controlPointNextX,n?t.controlPointPreviousY:t.controlPointNextY,n?i.controlPointNextX:i.controlPointPreviousX,n?i.controlPointNextY:i.controlPointPreviousY,i.x,i.y):e.lineTo(i.x,i.y)}},re=se;Z.clear=se.clear,Z.drawRoundedRectangle=function(e){e.beginPath(),se.roundedRect.apply(se,arguments)};var oe={_set:function(e,t){return Z.merge(this[e]||(this[e]={}),t)}};oe._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var ae=oe,ce=Z.valueOrDefault,le={toLineHeight:function(e,t){var i=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!i||"normal"===i[1])return 1.2*t;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,i,n,s;return Z.isObject(e)?(t=+e.top||0,i=+e.right||0,n=+e.bottom||0,s=+e.left||0):t=i=n=s=+e||0,{top:t,right:i,bottom:n,left:s,height:t+n,width:s+i}},_parseFont:function(e){var t=ae.global,i=ce(e.fontSize,t.defaultFontSize),n={family:ce(e.fontFamily,t.defaultFontFamily),lineHeight:Z.options.toLineHeight(ce(e.lineHeight,t.defaultLineHeight),i),size:i,style:ce(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return n.string=function(e){return!e||Z.isNullOrUndef(e.size)||Z.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n},resolve:function(e,t,i){var n,s,r;for(n=0,s=e.length;n<s;++n)if(void 0!==(r=e[n])&&(void 0!==t&&"function"==typeof r&&(r=r(t)),void 0!==i&&Z.isArray(r)&&(r=r[i]),void 0!==r))return r}},ue=Z,de=re,he=le;ue.easing=q,ue.canvas=de,ue.options=he;var pe=function(e){ue.extend(this,e),this.initialize.apply(this,arguments)};ue.extend(pe.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ue.clone(e._model)),e._start={},e},transition:function(e){var t=this,i=t._model,n=t._start,s=t._view;return i&&1!==e?(s||(s=t._view={}),n||(n=t._start={}),function(e,t,i,n){var s,r,o,a,c,l,u,d,h,p=Object.keys(i);for(s=0,r=p.length;s<r;++s)if(l=i[o=p[s]],t.hasOwnProperty(o)||(t[o]=l),(a=t[o])!==l&&"_"!==o[0]){if(e.hasOwnProperty(o)||(e[o]=a),(u=typeof l)==typeof(c=e[o]))if("string"===u){if((d=$(c)).valid&&(h=$(l)).valid){t[o]=h.mix(d,n).rgbString();continue}}else if(ue.isFinite(c)&&ue.isFinite(l)){t[o]=c+(l-c)*n;continue}t[o]=l}}(n,s,i,e),t):(t._view=i,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ue.isNumber(this._model.x)&&ue.isNumber(this._model.y)}}),pe.extend=ue.inherits;var be=pe,fe=be.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),me=fe;Object.defineProperty(fe.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(fe.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),ae._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ue.noop,onComplete:ue.noop}});var ge={animations:[],request:null,addAnimation:function(e,t,i,n){var s,r,o=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=i,n||(e.animating=!0),s=0,r=o.length;s<r;++s)if(o[s].chart===e)return void(o[s]=t);o.push(t),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ue.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ue.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,i,n,s=this.animations,r=0;r<s.length;)t=(e=s[r]).chart,i=e.numSteps,n=Math.floor((Date.now()-e.startTime)/e.duration*i)+1,e.currentStep=Math.min(n,i),ue.callback(e.render,[t,e],t),ue.callback(e.onAnimationProgress,[e],t),e.currentStep>=i?(ue.callback(e.onAnimationComplete,[e],t),t.animating=!1,s.splice(r,1)):++r}},ve=ue.options.resolve,Ce=["push","pop","shift","splice","unshift"];function Ee(e,t){var i=e._chartjs;if(i){var n=i.listeners,s=n.indexOf(t);-1!==s&&n.splice(s,1),n.length>0||(Ce.forEach((function(t){delete e[t]})),delete e._chartjs)}}var we=function(e,t){this.initialize(e,t)};ue.extend(we.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),i=e.getDataset();null!==t.xAxisID&&t.xAxisID in e.chart.scales||(t.xAxisID=i.xAxisID||e.chart.options.scales.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in e.chart.scales||(t.yAxisID=i.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&Ee(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,i=this.getMeta(),n=this.getDataset().data||[],s=i.data;for(e=0,t=n.length;e<t;++e)s[e]=s[e]||this.createMetaData(e);i.dataset=i.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,i=this,n=i.getDataset(),s=n.data||(n.data=[]);i._data!==s&&(i._data&&Ee(i._data,i),s&&Object.isExtensible(s)&&(t=i,(e=s)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ce.forEach((function(t){var i="onData"+t.charAt(0).toUpperCase()+t.slice(1),n=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),s=n.apply(this,t);return ue.each(e._chartjs.listeners,(function(e){"function"==typeof e[i]&&e[i].apply(e,t)})),s}})})))),i._data=s),i.resyncElements()},update:ue.noop,transition:function(e){for(var t=this.getMeta(),i=t.data||[],n=i.length,s=0;s<n;++s)i[s].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],i=t.length,n=0;for(e.dataset&&e.dataset.draw();n<i;++n)t[n].draw()},removeHoverStyle:function(e){ue.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],i=e._index,n=e.custom||{},s=e._model,r=ue.getHoverColor;e.$previousStyle={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth},s.backgroundColor=ve([n.hoverBackgroundColor,t.hoverBackgroundColor,r(s.backgroundColor)],void 0,i),s.borderColor=ve([n.hoverBorderColor,t.hoverBorderColor,r(s.borderColor)],void 0,i),s.borderWidth=ve([n.hoverBorderWidth,t.hoverBorderWidth,s.borderWidth],void 0,i)},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,i=e.data.length,n=t.length;n<i?e.data.splice(n,i-n):n>i&&this.insertElements(i,n-i)},insertElements:function(e,t){for(var i=0;i<t;++i)this.addElementAndReset(e+i)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),we.extend=ue.inherits;var Se=we;ae._set("global",{elements:{arc:{backgroundColor:ae.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var ye=be.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var i=this._view;if(i){for(var n=ue.getAngleFromPoint(i,{x:e,y:t}),s=n.angle,r=n.distance,o=i.startAngle,a=i.endAngle;a<o;)a+=2*Math.PI;for(;s>a;)s-=2*Math.PI;for(;s<o;)s+=2*Math.PI;return s>=o&&s<=a&&r>=i.innerRadius&&r<=i.outerRadius}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,i=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,i=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},draw:function(){var e,t=this._chart.ctx,i=this._view,n=i.startAngle,s=i.endAngle,r="inner"===i.borderAlign?.33:0;t.save(),t.beginPath(),t.arc(i.x,i.y,Math.max(i.outerRadius-r,0),n,s),t.arc(i.x,i.y,i.innerRadius,s,n,!0),t.closePath(),t.fillStyle=i.backgroundColor,t.fill(),i.borderWidth&&("inner"===i.borderAlign?(t.beginPath(),t.arc(i.x,i.y,i.outerRadius,n-(e=r/i.outerRadius),s+e),i.innerRadius>r?t.arc(i.x,i.y,i.innerRadius-r,s+(e=r/i.innerRadius),n-e,!0):t.arc(i.x,i.y,r,s+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip(),t.beginPath(),t.arc(i.x,i.y,i.outerRadius,n,s),t.arc(i.x,i.y,i.innerRadius,s,n,!0),t.closePath(),t.lineWidth=2*i.borderWidth,t.lineJoin="round"):(t.lineWidth=i.borderWidth,t.lineJoin="bevel"),t.strokeStyle=i.borderColor,t.stroke()),t.restore()}}),Oe=ue.valueOrDefault,Ae=ae.global.defaultColor;ae._set("global",{elements:{line:{tension:.4,backgroundColor:Ae,borderWidth:3,borderColor:Ae,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ke=be.extend({draw:function(){var e,t,i,n,s=this._view,r=this._chart.ctx,o=s.spanGaps,a=this._children.slice(),c=ae.global,l=c.elements.line,u=-1;for(this._loop&&a.length&&a.push(a[0]),r.save(),r.lineCap=s.borderCapStyle||l.borderCapStyle,r.setLineDash&&r.setLineDash(s.borderDash||l.borderDash),r.lineDashOffset=Oe(s.borderDashOffset,l.borderDashOffset),r.lineJoin=s.borderJoinStyle||l.borderJoinStyle,r.lineWidth=Oe(s.borderWidth,l.borderWidth),r.strokeStyle=s.borderColor||c.defaultColor,r.beginPath(),u=-1,e=0;e<a.length;++e)t=a[e],i=ue.previousItem(a,e),n=t._view,0===e?n.skip||(r.moveTo(n.x,n.y),u=e):(i=-1===u?i:a[u],n.skip||(u!==e-1&&!o||-1===u?r.moveTo(n.x,n.y):ue.canvas.lineTo(r,i._view,t._view),u=e));r.stroke(),r.restore()}}),Te=ue.valueOrDefault,De=ae.global.defaultColor;function Ie(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}ae._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:De,borderColor:De,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var _e=be.extend({inRange:function(e,t){var i=this._view;return!!i&&Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:Ie,inXRange:Ie,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,i=this._chart.ctx,n=t.pointStyle,s=t.rotation,r=t.radius,o=t.x,a=t.y,c=ae.global,l=c.defaultColor;t.skip||(void 0===e||ue.canvas._isPointInArea(t,e))&&(i.strokeStyle=t.borderColor||l,i.lineWidth=Te(t.borderWidth,c.elements.point.borderWidth),i.fillStyle=t.backgroundColor||l,ue.canvas.drawPoint(i,n,r,o,a,s))}}),Re=ae.global.defaultColor;function Le(e){return e&&void 0!==e.width}function xe(e){var t,i,n,s,r;return Le(e)?(t=e.x-(r=e.width/2),i=e.x+r,n=Math.min(e.y,e.base),s=Math.max(e.y,e.base)):(r=e.height/2,t=Math.min(e.x,e.base),i=Math.max(e.x,e.base),n=e.y-r,s=e.y+r),{left:t,top:n,right:i,bottom:s}}function Pe(e,t,i){return e===t?i:e===i?t:e}function je(e,t,i){var n=null===t,s=null===i,r=!(!e||n&&s)&&xe(e);return r&&(n||t>=r.left&&t<=r.right)&&(s||i>=r.top&&i<=r.bottom)}ae._set("global",{elements:{rectangle:{backgroundColor:Re,borderColor:Re,borderSkipped:"bottom",borderWidth:0}}});var Me=be.extend({draw:function(){var e=this._chart.ctx,t=this._view,i=function(e){var t=xe(e),i=t.right-t.left,n=t.bottom-t.top,s=function(e,t,i){var n,s,r,o,a=e.borderWidth,c=function(e){var t=e.borderSkipped,i={};return t?(e.horizontal?e.base>e.x&&(t=Pe(t,"left","right")):e.base<e.y&&(t=Pe(t,"bottom","top")),i[t]=!0,i):i}(e);return ue.isObject(a)?(n=+a.top||0,s=+a.right||0,r=+a.bottom||0,o=+a.left||0):n=s=r=o=+a||0,{t:c.top||n<0?0:n>i?i:n,r:c.right||s<0?0:s>t?t:s,b:c.bottom||r<0?0:r>i?i:r,l:c.left||o<0?0:o>t?t:o}}(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b}}}(t),n=i.outer,s=i.inner;e.fillStyle=t.backgroundColor,e.fillRect(n.x,n.y,n.w,n.h),n.w===s.w&&n.h===s.h||(e.save(),e.beginPath(),e.rect(n.x,n.y,n.w,n.h),e.clip(),e.fillStyle=t.borderColor,e.rect(s.x,s.y,s.w,s.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return je(this._view,e,t)},inLabelRange:function(e,t){var i=this._view;return Le(i)?je(i,e,null):je(i,null,t)},inXRange:function(e){return je(this._view,e,null)},inYRange:function(e){return je(this._view,null,e)},getCenterPoint:function(){var e,t,i=this._view;return Le(i)?(e=i.x,t=(i.y+i.base)/2):(e=(i.x+i.base)/2,t=i.y),{x:e,y:t}},getArea:function(){var e=this._view;return Le(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Xe={},Fe=ke,We=_e,Be=Me;Xe.Arc=ye,Xe.Line=Fe,Xe.Point=We,Xe.Rectangle=Be;var Ne=ue.options.resolve;ae._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var Ge=Se.extend({dataElementType:Xe.Rectangle,initialize:function(){var e,t=this;Se.prototype.initialize.apply(t,arguments),(e=t.getMeta()).stack=t.getDataset().stack,e.bar=!0},update:function(e){var t,i,n=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,i=n.length;t<i;++t)this.updateElement(n[t],t,e)},updateElement:function(e,t,i){var n=this,s=n.getMeta(),r=n.getDataset(),o=n._resolveElementOptions(e,t);e._xScale=n.getScaleForId(s.xAxisID),e._yScale=n.getScaleForId(s.yAxisID),e._datasetIndex=n.index,e._index=t,e._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:r.label,label:n.chart.data.labels[t]},n._updateElementGeometry(e,t,i),e.pivot()},_updateElementGeometry:function(e,t,i){var n=this,s=e._model,r=n._getValueScale(),o=r.getBasePixel(),a=r.isHorizontal(),c=n._ruler||n.getRuler(),l=n.calculateBarValuePixels(n.index,t),u=n.calculateBarIndexPixels(n.index,t,c);s.horizontal=a,s.base=i?o:l.base,s.x=a?i?o:l.head:u.center,s.y=a?u.center:i?o:l.head,s.height=a?u.size:void 0,s.width=a?void 0:u.size},_getStacks:function(e){var t,i,n=this.chart,s=this._getIndexScale().options.stacked,r=void 0===e?n.data.datasets.length:e+1,o=[];for(t=0;t<r;++t)(i=n.getDatasetMeta(t)).bar&&n.isDatasetVisible(t)&&(!1===s||!0===s&&-1===o.indexOf(i.stack)||void 0===s&&(void 0===i.stack||-1===o.indexOf(i.stack)))&&o.push(i.stack);return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var i=this._getStacks(e),n=void 0!==t?i.indexOf(t):-1;return-1===n?i.length-1:n},getRuler:function(){var e,t,i=this._getIndexScale(),n=this.getStackCount(),s=this.index,r=i.isHorizontal(),o=r?i.left:i.top,a=o+(r?i.width:i.height),c=[];for(e=0,t=this.getMeta().data.length;e<t;++e)c.push(i.getPixelForValue(null,e,s));return{min:ue.isNullOrUndef(i.options.barThickness)?function(e,t){var i,n,s,r,o=e.isHorizontal()?e.width:e.height,a=e.getTicks();for(s=1,r=t.length;s<r;++s)o=Math.min(o,Math.abs(t[s]-t[s-1]));for(s=0,r=a.length;s<r;++s)n=e.getPixelForTick(s),o=s>0?Math.min(o,n-i):o,i=n;return o}(i,c):-1,pixels:c,start:o,end:a,stackCount:n,scale:i}},calculateBarValuePixels:function(e,t){var i,n,s,r,o,a,c=this.chart,l=this.getMeta(),u=this._getValueScale(),d=u.isHorizontal(),h=c.data.datasets,p=+u.getRightValue(h[e].data[t]),b=u.options.minBarLength,f=u.options.stacked,m=l.stack,g=0;if(f||void 0===f&&void 0!==m)for(i=0;i<e;++i)(n=c.getDatasetMeta(i)).bar&&n.stack===m&&n.controller._getValueScaleId()===u.id&&c.isDatasetVisible(i)&&(s=+u.getRightValue(h[i].data[t]),(p<0&&s<0||p>=0&&s>0)&&(g+=s));return r=u.getPixelForValue(g),a=(o=u.getPixelForValue(g+p))-r,void 0!==b&&Math.abs(a)<b&&(a=b,o=p>=0&&!d||p<0&&d?r-b:r+b),{size:a,base:r,head:o,center:o+a/2}},calculateBarIndexPixels:function(e,t,i){var n=i.scale.options,s="flex"===n.barThickness?function(e,t,i){var n,s=t.pixels,r=s[e],o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null,c=i.categoryPercentage;return null===o&&(o=r-(null===a?t.end-t.start:a-r)),null===a&&(a=r+r-o),n=r-(r-Math.min(o,a))/2*c,{chunk:Math.abs(a-o)/2*c/t.stackCount,ratio:i.barPercentage,start:n}}(t,i,n):function(e,t,i){var n,s,r=i.barThickness,o=t.stackCount,a=t.pixels[e];return ue.isNullOrUndef(r)?(n=t.min*i.categoryPercentage,s=i.barPercentage):(n=r*o,s=1),{chunk:n/o,ratio:s,start:a-n/2}}(t,i,n),r=this.getStackIndex(e,this.getMeta().stack),o=s.start+s.chunk*r+s.chunk/2,a=Math.min(ue.valueOrDefault(n.maxBarThickness,1/0),s.chunk*s.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}},draw:function(){var e=this.chart,t=this._getValueScale(),i=this.getMeta().data,n=this.getDataset(),s=i.length,r=0;for(ue.canvas.clipArea(e.ctx,e.chartArea);r<s;++r)isNaN(t.getRightValue(n.data[r]))||i[r].draw();ue.canvas.unclipArea(e.ctx)},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.rectangle,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(i=0,n=d.length;i<n;++i)l[s=d[i]]=Ne([a[s],o[s],c[s]],u,t);return l}}),Ue=ue.valueOrDefault,Ve=ue.options.resolve;ae._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": ("+e.xLabel+", "+e.yLabel+", "+t.datasets[e.datasetIndex].data[e.index].r+")"}}}});var He=Se.extend({dataElementType:Xe.Point,update:function(e){var t=this,i=t.getMeta();ue.each(i.data,(function(i,n){t.updateElement(i,n,e)}))},updateElement:function(e,t,i){var n=this,s=n.getMeta(),r=e.custom||{},o=n.getScaleForId(s.xAxisID),a=n.getScaleForId(s.yAxisID),c=n._resolveElementOptions(e,t),l=n.getDataset().data[t],u=n.index,d=i?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof l?l:NaN,t,u),h=i?a.getBasePixel():a.getPixelForValue(l,t,u);e._xScale=o,e._yScale=a,e._options=c,e._datasetIndex=u,e._index=t,e._model={backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,hitRadius:c.hitRadius,pointStyle:c.pointStyle,rotation:c.rotation,radius:i?0:c.radius,skip:r.skip||isNaN(d)||isNaN(h),x:d,y:h},e.pivot()},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ue(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Ue(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Ue(i.hoverBorderWidth,i.borderWidth),t.radius=i.radius+i.hoverRadius},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.point,l=o.data[t],u={},d={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(i=0,n=h.length;i<n;++i)u[s=h[i]]=Ve([a[s],o[s],c[s]],d,t);return u.radius=Ve([a.radius,l?l.r:void 0,o.radius,c.radius],d,t),u}}),Ye=ue.options.resolve,$e=ue.valueOrDefault;ae._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,n=i.datasets,s=i.labels;if(n.length)for(var r=0;r<n[0].data.length;++r)t.push('<li><span style="background-color:'+n[0].backgroundColor[r]+'"></span>'),s[r]&&t.push(s[r]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(i,n){var s=e.getDatasetMeta(0),r=t.datasets[0],o=s.data[n],a=o&&o.custom||{},c=e.options.elements.arc;return{text:i,fillStyle:Ye([a.backgroundColor,r.backgroundColor,c.backgroundColor],void 0,n),strokeStyle:Ye([a.borderColor,r.borderColor,c.borderColor],void 0,n),lineWidth:Ye([a.borderWidth,r.borderWidth,c.borderWidth],void 0,n),hidden:isNaN(r.data[n])||s.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var i,n,s,r=t.index,o=this.chart;for(i=0,n=(o.data.datasets||[]).length;i<n;++i)(s=o.getDatasetMeta(i)).data[r]&&(s.data[r].hidden=!s.data[r].hidden);o.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.labels[e.index],n=": "+t.datasets[e.datasetIndex].data[e.index];return ue.isArray(i)?(i=i.slice())[0]+=n:i+=n,i}}}});var ze=Se.extend({dataElementType:Xe.Arc,linkScales:ue.noop,getRingIndex:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&++t;return t},update:function(e){var t,i,n=this,s=n.chart,r=s.chartArea,o=s.options,a=r.right-r.left,c=r.bottom-r.top,l=Math.min(a,c),u={x:0,y:0},d=n.getMeta(),h=d.data,p=o.cutoutPercentage,b=o.circumference,f=n._getRingWeight(n.index);if(b<2*Math.PI){var m=o.rotation%(2*Math.PI),g=(m+=2*Math.PI*(m>=Math.PI?-1:m<-Math.PI?1:0))+b,v={x:Math.cos(m),y:Math.sin(m)},C={x:Math.cos(g),y:Math.sin(g)},E=m<=0&&g>=0||m<=2*Math.PI&&2*Math.PI<=g,w=m<=.5*Math.PI&&.5*Math.PI<=g||m<=2.5*Math.PI&&2.5*Math.PI<=g,S=m<=-Math.PI&&-Math.PI<=g||m<=Math.PI&&Math.PI<=g,y=m<=.5*-Math.PI&&.5*-Math.PI<=g||m<=1.5*Math.PI&&1.5*Math.PI<=g,O=p/100,A={x:S?-1:Math.min(v.x*(v.x<0?1:O),C.x*(C.x<0?1:O)),y:y?-1:Math.min(v.y*(v.y<0?1:O),C.y*(C.y<0?1:O))},k={x:E?1:Math.max(v.x*(v.x>0?1:O),C.x*(C.x>0?1:O)),y:w?1:Math.max(v.y*(v.y>0?1:O),C.y*(C.y>0?1:O))},T={width:.5*(k.x-A.x),height:.5*(k.y-A.y)};l=Math.min(a/T.width,c/T.height),u={x:-.5*(k.x+A.x),y:-.5*(k.y+A.y)}}for(t=0,i=h.length;t<i;++t)h[t]._options=n._resolveElementOptions(h[t],t);for(s.borderWidth=n.getMaxBorderWidth(),s.outerRadius=Math.max((l-s.borderWidth)/2,0),s.innerRadius=Math.max(p?s.outerRadius/100*p:0,0),s.radiusLength=(s.outerRadius-s.innerRadius)/(n._getVisibleDatasetWeightTotal()||1),s.offsetX=u.x*s.outerRadius,s.offsetY=u.y*s.outerRadius,d.total=n.calculateTotal(),n.outerRadius=s.outerRadius-s.radiusLength*n._getRingWeightOffset(n.index),n.innerRadius=Math.max(n.outerRadius-s.radiusLength*f,0),t=0,i=h.length;t<i;++t)n.updateElement(h[t],t,e)},updateElement:function(e,t,i){var n=this,s=n.chart,r=s.chartArea,o=s.options,a=o.animation,c=(r.left+r.right)/2,l=(r.top+r.bottom)/2,u=o.rotation,d=o.rotation,h=n.getDataset(),p=i&&a.animateRotate||e.hidden?0:n.calculateCircumference(h.data[t])*(o.circumference/(2*Math.PI)),b=e._options||{};ue.extend(e,{_datasetIndex:n.index,_index:t,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:c+s.offsetX,y:l+s.offsetY,startAngle:u,endAngle:d,circumference:p,outerRadius:i&&a.animateScale?0:n.outerRadius,innerRadius:i&&a.animateScale?0:n.innerRadius,label:ue.valueAtIndexOrDefault(h.label,t,s.data.labels[t])}});var f=e._model;i&&a.animateRotate||(f.startAngle=0===t?o.rotation:n.getMeta().data[t-1]._model.endAngle,f.endAngle=f.startAngle+f.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),i=this.getMeta(),n=0;return ue.each(i.data,(function(i,s){e=t.data[s],isNaN(e)||i.hidden||(n+=Math.abs(e))})),n},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,i,n,s,r,o,a,c,l=0,u=this.chart;if(!e)for(t=0,i=u.data.datasets.length;t<i;++t)if(u.isDatasetVisible(t)){e=(n=u.getDatasetMeta(t)).data,t!==this.index&&(r=n.controller);break}if(!e)return 0;for(t=0,i=e.length;t<i;++t)s=e[t],"inner"!==(o=r?r._resolveElementOptions(s,t):s._options).borderAlign&&(l=(c=o.hoverBorderWidth)>(l=(a=o.borderWidth)>l?a:l)?c:l);return l},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=$e(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=$e(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=$e(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=this.getDataset(),a=e.custom||{},c=r.options.elements.arc,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=d.length;i<n;++i)l[s=d[i]]=Ye([a[s],o[s],c[s]],u,t);return l},_getRingWeightOffset:function(e){for(var t=0,i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t},_getRingWeight:function(e){return Math.max($e(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});ae._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var Ze=Ge.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ke=ue.valueOrDefault,qe=ue.options.resolve,Je=ue.canvas._isPointInArea;function Qe(e,t){return Ke(e.showLine,t.showLines)}ae._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var et=Se.extend({datasetElementType:Xe.Line,dataElementType:Xe.Point,update:function(e){var t,i,n=this,s=n.getMeta(),r=s.dataset,o=s.data||[],a=n.getScaleForId(s.yAxisID),c=n.getDataset(),l=Qe(c,n.chart.options);for(l&&(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),r._scale=a,r._datasetIndex=n.index,r._children=o,r._model=n._resolveLineOptions(r),r.pivot()),t=0,i=o.length;t<i;++t)n.updateElement(o[t],t,e);for(l&&0!==r._model.tension&&n.updateBezierControlPoints(),t=0,i=o.length;t<i;++t)o[t].pivot()},updateElement:function(e,t,i){var n,s,r=this,o=r.getMeta(),a=e.custom||{},c=r.getDataset(),l=r.index,u=c.data[t],d=r.getScaleForId(o.yAxisID),h=r.getScaleForId(o.xAxisID),p=o.dataset._model,b=r._resolvePointOptions(e,t);n=h.getPixelForValue("object"==typeof u?u:NaN,t,l),s=i?d.getBasePixel():r.calculatePointY(u,t,l),e._xScale=h,e._yScale=d,e._options=b,e._datasetIndex=l,e._index=t,e._model={x:n,y:s,skip:a.skip||isNaN(n)||isNaN(s),radius:b.radius,pointStyle:b.pointStyle,rotation:b.rotation,backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,tension:Ke(a.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:b.hitRadius}},_resolvePointOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.point,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},h=Object.keys(d);for(i=0,n=h.length;i<n;++i)l[s=h[i]]=qe([a[s],o[d[s]],o[s],c[s]],u,t);return l},_resolveLineOptions:function(e){var t,i,n,s=this.chart,r=s.data.datasets[this.index],o=e.custom||{},a=s.options,c=a.elements.line,l={},u=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(t=0,i=u.length;t<i;++t)l[n=u[t]]=qe([o[n],r[n],c[n]]);return l.spanGaps=Ke(r.spanGaps,a.spanGaps),l.tension=Ke(r.lineTension,c.tension),l.steppedLine=qe([o.steppedLine,r.steppedLine,c.stepped]),l},calculatePointY:function(e,t,i){var n,s,r,o=this.chart,a=this.getMeta(),c=this.getScaleForId(a.yAxisID),l=0,u=0;if(c.options.stacked){for(n=0;n<i;n++)if(s=o.data.datasets[n],"line"===(r=o.getDatasetMeta(n)).type&&r.yAxisID===c.id&&o.isDatasetVisible(n)){var d=Number(c.getRightValue(s.data[t]));d<0?u+=d||0:l+=d||0}var h=Number(c.getRightValue(e));return c.getPixelForValue(h<0?u+h:l+h)}return c.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,i,n,s=this.chart,r=this.getMeta(),o=r.dataset._model,a=s.chartArea,c=r.data||[];function l(e,t,i){return Math.max(Math.min(e,i),t)}if(o.spanGaps&&(c=c.filter((function(e){return!e._model.skip}))),"monotone"===o.cubicInterpolationMode)ue.splineCurveMonotone(c);else for(e=0,t=c.length;e<t;++e)i=c[e]._model,n=ue.splineCurve(ue.previousItem(c,e)._model,i,ue.nextItem(c,e)._model,o.tension),i.controlPointPreviousX=n.previous.x,i.controlPointPreviousY=n.previous.y,i.controlPointNextX=n.next.x,i.controlPointNextY=n.next.y;if(s.options.elements.line.capBezierPoints)for(e=0,t=c.length;e<t;++e)Je(i=c[e]._model,a)&&(e>0&&Je(c[e-1]._model,a)&&(i.controlPointPreviousX=l(i.controlPointPreviousX,a.left,a.right),i.controlPointPreviousY=l(i.controlPointPreviousY,a.top,a.bottom)),e<c.length-1&&Je(c[e+1]._model,a)&&(i.controlPointNextX=l(i.controlPointNextX,a.left,a.right),i.controlPointNextY=l(i.controlPointNextY,a.top,a.bottom)))},draw:function(){var e,t=this.chart,i=this.getMeta(),n=i.data||[],s=t.chartArea,r=n.length,o=0;for(Qe(this.getDataset(),t.options)&&(ue.canvas.clipArea(t.ctx,{left:s.left,right:s.right,top:s.top-(e=(i.dataset._model.borderWidth||0)/2),bottom:s.bottom+e}),i.dataset.draw(),ue.canvas.unclipArea(t.ctx));o<r;++o)n[o].draw(s)},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ke(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=Ke(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=Ke(i.hoverBorderWidth,i.borderWidth),t.radius=Ke(i.hoverRadius,i.radius)}}),tt=ue.options.resolve;ae._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,n=i.datasets,s=i.labels;if(n.length)for(var r=0;r<n[0].data.length;++r)t.push('<li><span style="background-color:'+n[0].backgroundColor[r]+'"></span>'),s[r]&&t.push(s[r]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(i,n){var s=e.getDatasetMeta(0),r=t.datasets[0],o=s.data[n].custom||{},a=e.options.elements.arc;return{text:i,fillStyle:tt([o.backgroundColor,r.backgroundColor,a.backgroundColor],void 0,n),strokeStyle:tt([o.borderColor,r.borderColor,a.borderColor],void 0,n),lineWidth:tt([o.borderWidth,r.borderWidth,a.borderWidth],void 0,n),hidden:isNaN(r.data[n])||s.data[n].hidden,index:n}})):[]}},onClick:function(e,t){var i,n,s,r=t.index,o=this.chart;for(i=0,n=(o.data.datasets||[]).length;i<n;++i)(s=o.getDatasetMeta(i)).data[r].hidden=!s.data[r].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var it=Se.extend({dataElementType:Xe.Arc,linkScales:ue.noop,update:function(e){var t,i,n,s=this,r=s.getDataset(),o=s.getMeta(),a=s.chart.options.startAngle||0,c=s._starts=[],l=s._angles=[],u=o.data;for(s._updateRadius(),o.count=s.countVisibleElements(),t=0,i=r.data.length;t<i;t++)c[t]=a,n=s._computeAngle(t),l[t]=n,a+=n;for(t=0,i=u.length;t<i;++t)u[t]._options=s._resolveElementOptions(u[t],t),s.updateElement(u[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top);t.outerRadius=Math.max(s/2,0),t.innerRadius=Math.max(n.cutoutPercentage?t.outerRadius/100*n.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,i){var n=this,s=n.chart,r=n.getDataset(),o=s.options,a=o.animation,c=s.scale,l=s.data.labels,u=c.xCenter,d=c.yCenter,h=o.startAngle,p=e.hidden?0:c.getDistanceFromCenterForValue(r.data[t]),b=n._starts[t],f=b+(e.hidden?0:n._angles[t]),m=a.animateScale?0:c.getDistanceFromCenterForValue(r.data[t]),g=e._options||{};ue.extend(e,{_datasetIndex:n.index,_index:t,_scale:c,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:u,y:d,innerRadius:0,outerRadius:i?m:p,startAngle:i&&a.animateRotate?h:b,endAngle:i&&a.animateRotate?h:f,label:ue.valueAtIndexOrDefault(l,t,l[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),i=0;return ue.each(t.data,(function(t,n){isNaN(e.data[n])||t.hidden||i++})),i},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor,s=ue.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=s(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=s(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=s(i.hoverBorderWidth,i.borderWidth)},_resolveElementOptions:function(e,t){var i,n,s,r=this.chart,o=this.getDataset(),a=e.custom||{},c=r.options.elements.arc,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(i=0,n=d.length;i<n;++i)l[s=d[i]]=tt([a[s],o[s],c[s]],u,t);return l},_computeAngle:function(e){var t=this,i=this.getMeta().count,n=t.getDataset(),s=t.getMeta();return isNaN(n.data[e])||s.data[e].hidden?0:tt([t.chart.options.elements.arc.angle,2*Math.PI/i],{chart:t.chart,dataIndex:e,dataset:n,datasetIndex:t.index},e)}});ae._set("pie",ue.clone(ae.doughnut)),ae._set("pie",{cutoutPercentage:0});var nt=ze,st=ue.valueOrDefault,rt=ue.options.resolve;ae._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var ot=Se.extend({datasetElementType:Xe.Line,dataElementType:Xe.Point,linkScales:ue.noop,update:function(e){var t,i,n=this,s=n.getMeta(),r=s.dataset,o=s.data||[],a=n.chart.scale,c=n.getDataset();for(void 0!==c.tension&&void 0===c.lineTension&&(c.lineTension=c.tension),r._scale=a,r._datasetIndex=n.index,r._children=o,r._loop=!0,r._model=n._resolveLineOptions(r),r.pivot(),t=0,i=o.length;t<i;++t)n.updateElement(o[t],t,e);for(n.updateBezierControlPoints(),t=0,i=o.length;t<i;++t)o[t].pivot()},updateElement:function(e,t,i){var n=this,s=e.custom||{},r=n.getDataset(),o=n.chart.scale,a=o.getPointPositionForValue(t,r.data[t]),c=n._resolvePointOptions(e,t),l=n.getMeta().dataset._model,u=i?o.xCenter:a.x,d=i?o.yCenter:a.y;e._scale=o,e._options=c,e._datasetIndex=n.index,e._index=t,e._model={x:u,y:d,skip:s.skip||isNaN(u)||isNaN(d),radius:c.radius,pointStyle:c.pointStyle,rotation:c.rotation,backgroundColor:c.backgroundColor,borderColor:c.borderColor,borderWidth:c.borderWidth,tension:st(s.tension,l?l.tension:0),hitRadius:c.hitRadius}},_resolvePointOptions:function(e,t){var i,n,s,r=this.chart,o=r.data.datasets[this.index],a=e.custom||{},c=r.options.elements.point,l={},u={chart:r,dataIndex:t,dataset:o,datasetIndex:this.index},d={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},h=Object.keys(d);for(i=0,n=h.length;i<n;++i)l[s=h[i]]=rt([a[s],o[d[s]],o[s],c[s]],u,t);return l},_resolveLineOptions:function(e){var t,i,n,s=this.chart,r=s.data.datasets[this.index],o=e.custom||{},a=s.options.elements.line,c={},l=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(t=0,i=l.length;t<i;++t)c[n=l[t]]=rt([o[n],r[n],a[n]]);return c.tension=st(r.lineTension,a.tension),c},updateBezierControlPoints:function(){var e,t,i,n,s=this.getMeta(),r=this.chart.chartArea,o=s.data||[];function a(e,t,i){return Math.max(Math.min(e,i),t)}for(e=0,t=o.length;e<t;++e)i=o[e]._model,n=ue.splineCurve(ue.previousItem(o,e,!0)._model,i,ue.nextItem(o,e,!0)._model,i.tension),i.controlPointPreviousX=a(n.previous.x,r.left,r.right),i.controlPointPreviousY=a(n.previous.y,r.top,r.bottom),i.controlPointNextX=a(n.next.x,r.left,r.right),i.controlPointNextY=a(n.next.y,r.top,r.bottom)},setHoverStyle:function(e){var t=e._model,i=e._options,n=ue.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=st(i.hoverBackgroundColor,n(i.backgroundColor)),t.borderColor=st(i.hoverBorderColor,n(i.borderColor)),t.borderWidth=st(i.hoverBorderWidth,i.borderWidth),t.radius=st(i.hoverRadius,i.radius)}});ae._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}});var at={bar:Ge,bubble:He,doughnut:ze,horizontalBar:Ze,line:et,polarArea:it,pie:nt,radar:ot,scatter:et};function ct(e,t){return e.native?{x:e.x,y:e.y}:ue.getRelativePosition(e,t)}function lt(e,t){var i,n,s,r,o;for(n=0,r=e.data.datasets.length;n<r;++n)if(e.isDatasetVisible(n))for(s=0,o=(i=e.getDatasetMeta(n)).data.length;s<o;++s){var a=i.data[s];a._view.skip||t(a)}}function ut(e,t){var i=[];return lt(e,(function(e){e.inRange(t.x,t.y)&&i.push(e)})),i}function dt(e,t,i,n){var s=Number.POSITIVE_INFINITY,r=[];return lt(e,(function(e){if(!i||e.inRange(t.x,t.y)){var o=e.getCenterPoint(),a=n(t,o);a<s?(r=[e],s=a):a===s&&r.push(e)}})),r}function ht(e){var t=-1!==e.indexOf("x"),i=-1!==e.indexOf("y");return function(e,n){var s=t?Math.abs(e.x-n.x):0,r=i?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}function pt(e,t,i){var n=ct(t,e);i.axis=i.axis||"x";var s=ht(i.axis),r=i.intersect?ut(e,n):dt(e,n,!1,s),o=[];return r.length?(e.data.datasets.forEach((function(t,i){if(e.isDatasetVisible(i)){var n=e.getDatasetMeta(i).data[r[0]._index];n&&!n._view.skip&&o.push(n)}})),o):[]}var bt={modes:{single:function(e,t){var i=ct(t,e),n=[];return lt(e,(function(e){if(e.inRange(i.x,i.y))return n.push(e),n})),n.slice(0,1)},label:pt,index:pt,dataset:function(e,t,i){var n=ct(t,e);i.axis=i.axis||"xy";var s=ht(i.axis),r=i.intersect?ut(e,n):dt(e,n,!1,s);return r.length>0&&(r=e.getDatasetMeta(r[0]._datasetIndex).data),r},"x-axis":function(e,t){return pt(e,t,{intersect:!1})},point:function(e,t){return ut(e,ct(t,e))},nearest:function(e,t,i){var n=ct(t,e);i.axis=i.axis||"xy";var s=ht(i.axis);return dt(e,n,i.intersect,s)},x:function(e,t,i){var n=ct(t,e),s=[],r=!1;return lt(e,(function(e){e.inXRange(n.x)&&s.push(e),e.inRange(n.x,n.y)&&(r=!0)})),i.intersect&&!r&&(s=[]),s},y:function(e,t,i){var n=ct(t,e),s=[],r=!1;return lt(e,(function(e){e.inYRange(n.y)&&s.push(e),e.inRange(n.x,n.y)&&(r=!0)})),i.intersect&&!r&&(s=[]),s}}};function ft(e,t){return ue.where(e,(function(e){return e.position===t}))}function mt(e,t){e.forEach((function(e,t){return e._tmpIndex_=t,e})),e.sort((function(e,i){var n=t?i:e,s=t?e:i;return n.weight===s.weight?n._tmpIndex_-s._tmpIndex_:n.weight-s.weight})),e.forEach((function(e){delete e._tmpIndex_}))}function gt(e,t){ue.each(e,(function(e){t[e.position]+=e.isHorizontal()?e.height:e.width}))}ae._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var vt,Ct={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var i=e.boxes?e.boxes.indexOf(t):-1;-1!==i&&e.boxes.splice(i,1)},configure:function(e,t,i){for(var n,s=["fullWidth","position","weight"],r=s.length,o=0;o<r;++o)i.hasOwnProperty(n=s[o])&&(t[n]=i[n])},update:function(e,t,i){if(e){var n=ue.options.toPadding((e.options.layout||{}).padding),s=n.left,r=n.right,o=n.top,a=n.bottom,c=ft(e.boxes,"left"),l=ft(e.boxes,"right"),u=ft(e.boxes,"top"),d=ft(e.boxes,"bottom"),h=ft(e.boxes,"chartArea");mt(c,!0),mt(l,!1),mt(u,!0),mt(d,!1);var p,b=c.concat(l),f=u.concat(d),m=b.concat(f),g=t-s-r,v=i-o-a,C=(t-g/2)/b.length,E=g,w=v,S={top:o,left:s,bottom:a,right:r},y=[];ue.each(m,(function(e){var t,i=e.isHorizontal();i?(t=e.update(e.fullWidth?g:E,v/2),w-=t.height):(t=e.update(C,w),E-=t.width),y.push({horizontal:i,width:t.width,box:e})})),p=function(e){var t=0,i=0,n=0,s=0;return ue.each(e,(function(e){if(e.getPadding){var r=e.getPadding();t=Math.max(t,r.top),i=Math.max(i,r.left),n=Math.max(n,r.bottom),s=Math.max(s,r.right)}})),{top:t,left:i,bottom:n,right:s}}(m),ue.each(b,_),gt(b,S),ue.each(f,_),gt(f,S),ue.each(b,(function(e){var t=ue.findNextWhere(y,(function(t){return t.box===e}));t&&e.update(t.width,w,{left:0,right:0,top:S.top,bottom:S.bottom})})),gt(m,S={top:o,left:s,bottom:a,right:r});var O=Math.max(p.left-S.left,0);S.left+=O,S.right+=Math.max(p.right-S.right,0);var A=Math.max(p.top-S.top,0);S.top+=A,S.bottom+=Math.max(p.bottom-S.bottom,0);var k=i-S.top-S.bottom,T=t-S.left-S.right;T===E&&k===w||(ue.each(b,(function(e){e.height=k})),ue.each(f,(function(e){e.fullWidth||(e.width=T)})),w=k,E=T);var D=s+O,I=o+A;ue.each(c.concat(u),R),D+=E,I+=w,ue.each(l,R),ue.each(d,R),e.chartArea={left:S.left,top:S.top,right:S.left+E,bottom:S.top+w},ue.each(h,(function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(E,w)}))}function _(e){var t=ue.findNextWhere(y,(function(t){return t.box===e}));if(t)if(t.horizontal){var i={left:Math.max(S.left,p.left),right:Math.max(S.right,p.right),top:0,bottom:0};e.update(e.fullWidth?g:E,v/2,i)}else e.update(t.width,w)}function R(e){e.isHorizontal()?(e.left=e.fullWidth?s:S.left,e.right=e.fullWidth?t-r:S.left+E,e.top=I,e.bottom=I+e.height,I=e.bottom):(e.left=D,e.right=D+e.width,e.top=S.top,e.bottom=S.top+w,D=e.right)}}},Et=(vt=Object.freeze({default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&vt.default||vt,wt=["animationstart","webkitAnimationStart"],St={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function yt(e,t){var i=ue.getStyle(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?Number(n[1]):void 0}var Ot=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(i){}return e}()&&{passive:!0};function At(e,t,i){e.addEventListener(t,i,Ot)}function kt(e,t,i){e.removeEventListener(t,i,Ot)}function Tt(e,t,i,n,s){return{type:e,chart:t,native:s||null,x:void 0!==i?i:null,y:void 0!==n?n:null}}function Dt(e){var t=document.createElement("div");return t.className=e||"",t}var It={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){this._loaded||(this._loaded=!0,this.disableCSSInjection||function(e,t){var i=e._style||document.createElement("style");e._style||(e._style=i,t="/* Chart.js */\n"+t,i.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(i)),i.appendChild(document.createTextNode(t))}(this,Et))},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var i=e&&e.getContext&&e.getContext("2d");return this._ensureLoaded(),i&&i.canvas===e?(function(e,t){var i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e.$chartjs={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===s||""===s){var r=yt(e,"width");void 0!==r&&(e.width=r)}if(null===n||""===n)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var o=yt(e,"height");void 0!==r&&(e.height=o)}}(e,t),i):null},releaseContext:function(e){var t=e.canvas;if(t.$chartjs){var i=t.$chartjs.initial;["height","width"].forEach((function(e){var n=i[e];ue.isNullOrUndef(n)?t.removeAttribute(e):t.setAttribute(e,n)})),ue.each(i.style||{},(function(e,i){t.style[i]=e})),t.width=t.width,delete t.$chartjs}},addEventListener:function(e,t,i){var n=e.canvas;if("resize"!==t){var s=i.$chartjs||(i.$chartjs={});At(n,t,(s.proxies||(s.proxies={}))[e.id+"_"+t]=function(t){i(function(e,t){var i=St[e.type]||e.type,n=ue.getRelativePosition(e,t);return Tt(i,t,n.x,n.y,e)}(t,e))})}else!function(e,t,i){var n,s,r,o,a=e.$chartjs||(e.$chartjs={}),c=a.resizer=function(e){var t=Dt("chartjs-size-monitor"),i=Dt("chartjs-size-monitor-expand"),n=Dt("chartjs-size-monitor-shrink");i.appendChild(Dt()),n.appendChild(Dt()),t.appendChild(i),t.appendChild(n),t._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,n.scrollLeft=1e6,n.scrollTop=1e6};var s=function(){t._reset(),e()};return At(i,"scroll",s.bind(i,"expand")),At(n,"scroll",s.bind(n,"shrink")),t}((n=function(){if(a.resizer){var n=i.options.maintainAspectRatio&&e.parentNode,s=n?n.clientWidth:0;t(Tt("resize",i)),n&&n.clientWidth<s&&i.canvas&&t(Tt("resize",i))}},r=!1,o=[],function(){o=Array.prototype.slice.call(arguments),s=s||this,r||(r=!0,ue.requestAnimFrame.call(window,(function(){r=!1,n.apply(s,o)})))}));!function(e,t){var i=e.$chartjs||(e.$chartjs={}),n=i.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};ue.each(wt,(function(t){At(e,t,n)})),i.reflow=!!e.offsetParent,e.classList.add("chartjs-render-monitor")}(e,(function(){if(a.resizer){var t=e.parentNode;t&&t!==c.parentNode&&t.insertBefore(c,t.firstChild),c._reset()}}))}(n,i,e)},removeEventListener:function(e,t,i){var n,s,r,o=e.canvas;if("resize"!==t){var a=((i.$chartjs||{}).proxies||{})[e.id+"_"+t];a&&kt(o,t,a)}else r=(s=(n=o).$chartjs||{}).resizer,delete s.resizer,function(e){var t=e.$chartjs||{},i=t.renderProxy;i&&(ue.each(wt,(function(t){kt(e,t,i)})),delete t.renderProxy),e.classList.remove("chartjs-render-monitor")}(n),r&&r.parentNode&&r.parentNode.removeChild(r)}};ue.addEvent=At,ue.removeEvent=kt;var _t=ue.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},It._enabled?It:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}});ae._set("global",{plugins:{}});var Rt={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,i){var n,s,r,o,a,c=this.descriptors(e),l=c.length;for(n=0;n<l;++n)if("function"==typeof(a=(r=(s=c[n]).plugin)[t])&&((o=[e].concat(i||[])).push(s.options),!1===a.apply(r,o)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var i=[],n=[],s=e&&e.config||{},r=s.options&&s.options.plugins||{};return this._plugins.concat(s.plugins||[]).forEach((function(e){if(-1===i.indexOf(e)){var t=e.id,s=r[t];!1!==s&&(!0===s&&(s=ue.clone(ae.global.plugins[t])),i.push(e),n.push({plugin:e,options:s||{}}))}})),t.descriptors=n,t.id=this._cacheId,n},_invalidate:function(e){delete e.$plugins}},Lt={constructors:{},defaults:{},registerScaleType:function(e,t,i){this.constructors[e]=t,this.defaults[e]=ue.clone(i)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ue.merge({},[ae.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=ue.extend(this.defaults[e],t))},addScalesToLayout:function(e){ue.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,Ct.addBox(e,t)}))}},xt=ue.valueOrDefault;ae._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ue.noop,title:function(e,t){var i="",n=t.labels,s=n?n.length:0;if(e.length>0){var r=e[0];r.label?i=r.label:r.xLabel?i=r.xLabel:s>0&&r.index<s&&(i=n[r.index])}return i},afterTitle:ue.noop,beforeBody:ue.noop,beforeLabel:ue.noop,label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i&&(i+=": "),ue.isNullOrUndef(e.value)?i+=e.yLabel:i+=e.value,i},labelColor:function(e,t){var i=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:i.borderColor,backgroundColor:i.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ue.noop,afterBody:ue.noop,beforeFooter:ue.noop,footer:ue.noop,afterFooter:ue.noop}}});var Pt={average:function(e){if(!e.length)return!1;var t,i,n=0,s=0,r=0;for(t=0,i=e.length;t<i;++t){var o=e[t];if(o&&o.hasValue()){var a=o.tooltipPosition();n+=a.x,s+=a.y,++r}}return{x:n/r,y:s/r}},nearest:function(e,t){var i,n,s,r=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(i=0,n=e.length;i<n;++i){var c=e[i];if(c&&c.hasValue()){var l=c.getCenterPoint(),u=ue.distanceBetweenPoints(t,l);u<a&&(a=u,s=c)}}if(s){var d=s.tooltipPosition();r=d.x,o=d.y}return{x:r,y:o}}};function jt(e,t){return t&&(ue.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Mt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Xt(e){var t=ae.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:xt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:xt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:xt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:xt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:xt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:xt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:xt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:xt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:xt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Ft(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Wt(e){return jt([],Mt(e))}var Bt=be.extend({initialize:function(){this._model=Xt(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,i=t.callbacks,n=i.beforeTitle.apply(e,arguments),s=i.title.apply(e,arguments),r=i.afterTitle.apply(e,arguments),o=[];return o=jt(o,Mt(n)),o=jt(o,Mt(s)),jt(o,Mt(r))},getBeforeBody:function(){return Wt(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var i=this,n=i._options.callbacks,s=[];return ue.each(e,(function(e){var r={before:[],lines:[],after:[]};jt(r.before,Mt(n.beforeLabel.call(i,e,t))),jt(r.lines,n.label.call(i,e,t)),jt(r.after,Mt(n.afterLabel.call(i,e,t))),s.push(r)})),s},getAfterBody:function(){return Wt(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,i=t.beforeFooter.apply(e,arguments),n=t.footer.apply(e,arguments),s=t.afterFooter.apply(e,arguments),r=[];return r=jt(r,Mt(i)),r=jt(r,Mt(n)),jt(r,Mt(s))},update:function(e){var t,i,n,s,r,o,a,c,l,u,d=this,h=d._options,p=d._model,b=d._model=Xt(h),f=d._active,m=d._data,g={xAlign:p.xAlign,yAlign:p.yAlign},v={x:p.x,y:p.y},C={width:p.width,height:p.height},E={x:p.caretX,y:p.caretY};if(f.length){b.opacity=1;var w=[],S=[];E=Pt[h.position].call(d,f,d._eventPosition);var y=[];for(t=0,i=f.length;t<i;++t)y.push((s=void 0,r=void 0,c=void 0,l=void 0,u=void 0,s=(n=f[t])._xScale,r=n._yScale||n._scale,o=n._index,l=(c=n._chart.getDatasetMeta(a=n._datasetIndex).controller)._getIndexScale(),u=c._getValueScale(),{xLabel:s?s.getLabelForIndex(o,a):"",yLabel:r?r.getLabelForIndex(o,a):"",label:l?""+l.getLabelForIndex(o,a):"",value:u?""+u.getLabelForIndex(o,a):"",index:o,datasetIndex:a,x:n._model.x,y:n._model.y}));h.filter&&(y=y.filter((function(e){return h.filter(e,m)}))),h.itemSort&&(y=y.sort((function(e,t){return h.itemSort(e,t,m)}))),ue.each(y,(function(e){w.push(h.callbacks.labelColor.call(d,e,d._chart)),S.push(h.callbacks.labelTextColor.call(d,e,d._chart))})),b.title=d.getTitle(y,m),b.beforeBody=d.getBeforeBody(y,m),b.body=d.getBody(y,m),b.afterBody=d.getAfterBody(y,m),b.footer=d.getFooter(y,m),b.x=E.x,b.y=E.y,b.caretPadding=h.caretPadding,b.labelColors=w,b.labelTextColors=S,b.dataPoints=y,C=function(e,t){var i=e._chart.ctx,n=2*t.yPadding,s=0,r=t.body,o=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0),a=t.title.length,c=t.footer.length,l=t.titleFontSize,u=t.bodyFontSize,d=t.footerFontSize;n+=a*l,n+=a?(a-1)*t.titleSpacing:0,n+=a?t.titleMarginBottom:0,n+=(o+=t.beforeBody.length+t.afterBody.length)*u,n+=o?(o-1)*t.bodySpacing:0,n+=c?t.footerMarginTop:0,n+=c*d,n+=c?(c-1)*t.footerSpacing:0;var h=0,p=function(e){s=Math.max(s,i.measureText(e).width+h)};return i.font=ue.fontString(l,t._titleFontStyle,t._titleFontFamily),ue.each(t.title,p),i.font=ue.fontString(u,t._bodyFontStyle,t._bodyFontFamily),ue.each(t.beforeBody.concat(t.afterBody),p),h=t.displayColors?u+2:0,ue.each(r,(function(e){ue.each(e.before,p),ue.each(e.lines,p),ue.each(e.after,p)})),h=0,i.font=ue.fontString(d,t._footerFontStyle,t._footerFontFamily),ue.each(t.footer,p),{width:s+=2*t.xPadding,height:n}}(this,b),v=function(e,t,i,n){var s=e.x,r=e.y,o=e.caretPadding,a=i.xAlign,c=i.yAlign,l=e.caretSize+o,u=e.cornerRadius+o;return"right"===a?s-=t.width:"center"===a&&((s-=t.width/2)+t.width>n.width&&(s=n.width-t.width),s<0&&(s=0)),"top"===c?r+=l:r-="bottom"===c?t.height+l:t.height/2,"center"===c?"left"===a?s+=l:"right"===a&&(s-=l):"left"===a?s-=u:"right"===a&&(s+=u),{x:s,y:r}}(b,C,g=function(e,t){var i,n,s,r,o,a=e._model,c=e._chart,l=e._chart.chartArea,u="center",d="center";a.y<t.height?d="top":a.y>c.height-t.height&&(d="bottom");var h=(l.left+l.right)/2,p=(l.top+l.bottom)/2;"center"===d?(i=function(e){return e<=h},n=function(e){return e>h}):(i=function(e){return e<=t.width/2},n=function(e){return e>=c.width-t.width/2}),s=function(e){return e+t.width+a.caretSize+a.caretPadding>c.width},r=function(e){return e-t.width-a.caretSize-a.caretPadding<0},o=function(e){return e<=p?"top":"bottom"},i(a.x)?(u="left",s(a.x)&&(u="center",d=o(a.y))):n(a.x)&&(u="right",r(a.x)&&(u="center",d=o(a.y)));var b=e._options;return{xAlign:b.xAlign?b.xAlign:u,yAlign:b.yAlign?b.yAlign:d}}(this,C),d._chart)}else b.opacity=0;return b.xAlign=g.xAlign,b.yAlign=g.yAlign,b.x=v.x,b.y=v.y,b.width=C.width,b.height=C.height,b.caretX=E.x,b.caretY=E.y,d._model=b,e&&h.custom&&h.custom.call(d,b),d},drawCaret:function(e,t){var i=this._chart.ctx,n=this.getCaretPosition(e,t,this._view);i.lineTo(n.x1,n.y1),i.lineTo(n.x2,n.y2),i.lineTo(n.x3,n.y3)},getCaretPosition:function(e,t,i){var n,s,r,o,a,c,l=i.caretSize,u=i.cornerRadius,d=i.xAlign,h=i.yAlign,p=e.x,b=e.y,f=t.width,m=t.height;if("center"===h)a=b+m/2,"left"===d?(s=(n=p)-l,r=n,o=a+l,c=a-l):(s=(n=p+f)+l,r=n,o=a-l,c=a+l);else if("left"===d?(n=(s=p+u+l)-l,r=s+l):"right"===d?(n=(s=p+f-u-l)-l,r=s+l):(n=(s=i.caretX)-l,r=s+l),"top"===h)a=(o=b)-l,c=o;else{a=(o=b+m)+l,c=o;var g=r;r=n,n=g}return{x1:n,x2:s,x3:r,y1:o,y2:a,y3:c}},drawTitle:function(e,t,i){var n=t.title;if(n.length){e.x=Ft(t,t._titleAlign),i.textAlign=t._titleAlign,i.textBaseline="top";var s,r,o=t.titleFontSize,a=t.titleSpacing;for(i.fillStyle=t.titleFontColor,i.font=ue.fontString(o,t._titleFontStyle,t._titleFontFamily),s=0,r=n.length;s<r;++s)i.fillText(n[s],e.x,e.y),e.y+=o+a,s+1===n.length&&(e.y+=t.titleMarginBottom-a)}},drawBody:function(e,t,i){var n,s=t.bodyFontSize,r=t.bodySpacing,o=t._bodyAlign,a=t.body,c=t.displayColors,l=t.labelColors,u=0,d=c?Ft(t,"left"):0;i.textAlign=o,i.textBaseline="top",i.font=ue.fontString(s,t._bodyFontStyle,t._bodyFontFamily),e.x=Ft(t,o);var h=function(t){i.fillText(t,e.x+u,e.y),e.y+=s+r};i.fillStyle=t.bodyFontColor,ue.each(t.beforeBody,h),u=c&&"right"!==o?"center"===o?s/2+1:s+2:0,ue.each(a,(function(r,o){i.fillStyle=n=t.labelTextColors[o],ue.each(r.before,h),ue.each(r.lines,(function(r){c&&(i.fillStyle=t.legendColorBackground,i.fillRect(d,e.y,s,s),i.lineWidth=1,i.strokeStyle=l[o].borderColor,i.strokeRect(d,e.y,s,s),i.fillStyle=l[o].backgroundColor,i.fillRect(d+1,e.y+1,s-2,s-2),i.fillStyle=n),h(r)})),ue.each(r.after,h)})),u=0,ue.each(t.afterBody,h),e.y-=r},drawFooter:function(e,t,i){var n=t.footer;n.length&&(e.x=Ft(t,t._footerAlign),e.y+=t.footerMarginTop,i.textAlign=t._footerAlign,i.textBaseline="top",i.fillStyle=t.footerFontColor,i.font=ue.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),ue.each(n,(function(n){i.fillText(n,e.x,e.y),e.y+=t.footerFontSize+t.footerSpacing})))},drawBackground:function(e,t,i,n){i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor,i.lineWidth=t.borderWidth;var s=t.xAlign,r=t.yAlign,o=e.x,a=e.y,c=n.width,l=n.height,u=t.cornerRadius;i.beginPath(),i.moveTo(o+u,a),"top"===r&&this.drawCaret(e,n),i.lineTo(o+c-u,a),i.quadraticCurveTo(o+c,a,o+c,a+u),"center"===r&&"right"===s&&this.drawCaret(e,n),i.lineTo(o+c,a+l-u),i.quadraticCurveTo(o+c,a+l,o+c-u,a+l),"bottom"===r&&this.drawCaret(e,n),i.lineTo(o+u,a+l),i.quadraticCurveTo(o,a+l,o,a+l-u),"center"===r&&"left"===s&&this.drawCaret(e,n),i.lineTo(o,a+u),i.quadraticCurveTo(o,a,o+u,a),i.closePath(),i.fill(),t.borderWidth>0&&i.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var i={width:t.width,height:t.height},n={x:t.x,y:t.y},s=Math.abs(t.opacity<.001)?0:t.opacity;this._options.enabled&&(t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length)&&(e.save(),e.globalAlpha=s,this.drawBackground(n,t,e,i),n.y+=t.yPadding,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),e.restore())}},handleEvent:function(e){var t,i=this,n=i._options;return i._lastActive=i._lastActive||[],i._active="mouseout"===e.type?[]:i._chart.getElementsAtEventForMode(e,n.mode,n),(t=!ue.arrayEquals(i._active,i._lastActive))&&(i._lastActive=i._active,(n.enabled||n.custom)&&(i._eventPosition={x:e.x,y:e.y},i.update(!0),i.pivot())),t}});Bt.positioners=Pt;var Nt=ue.valueOrDefault;function Gt(){return ue.merge({},[].slice.call(arguments),{merger:function(e,t,i,n){if("xAxes"===e||"yAxes"===e){var s,r,o,a=i[e].length;for(t[e]||(t[e]=[]),s=0;s<a;++s)r=Nt((o=i[e][s]).type,"xAxes"===e?"category":"linear"),s>=t[e].length&&t[e].push({}),ue.merge(t[e][s],!t[e][s].type||o.type&&o.type!==t[e][s].type?[Lt.getScaleDefaults(r),o]:o)}else ue._merger(e,t,i,n)}})}function Ut(){return ue.merge({},[].slice.call(arguments),{merger:function(e,t,i,n){var s=t[e]||{},r=i[e];"scales"===e?t[e]=Gt(s,r):"scale"===e?t[e]=ue.merge(s,[Lt.getScaleDefaults(r.type),r]):ue._merger(e,t,i,n)}})}function Vt(e){var t=e.options;ue.each(e.scales,(function(t){Ct.removeBox(e,t)})),t=Ut(ae.global,ae[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Ht(e){return"top"===e||"bottom"===e}ae._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Yt=function(e,t){return this.construct(e,t),this};ue.extend(Yt.prototype,{construct:function(e,t){var i=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Ut(ae.global,ae[e.type],e.options||{}),e}(t);var n=_t.acquireContext(e,t),s=n&&n.canvas,r=s&&s.height,o=s&&s.width;i.id=ue.uid(),i.ctx=n,i.canvas=s,i.config=t,i.width=o,i.height=r,i.aspectRatio=r?o/r:null,i.options=t.options,i._bufferedRender=!1,i.chart=i,i.controller=i,Yt.instances[i.id]=i,Object.defineProperty(i,"data",{get:function(){return i.config.data},set:function(e){i.config.data=e}}),n&&s?(i.initialize(),i.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Rt.notify(e,"beforeInit"),ue.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.initToolTip(),Rt.notify(e,"afterInit"),e},clear:function(){return ue.canvas.clear(this),this},stop:function(){return ge.cancelAnimation(this),this},resize:function(e){var t=this,i=t.options,n=t.canvas,s=i.maintainAspectRatio&&t.aspectRatio||null,r=Math.max(0,Math.floor(ue.getMaximumWidth(n))),o=Math.max(0,Math.floor(s?r/s:ue.getMaximumHeight(n)));if((t.width!==r||t.height!==o)&&(n.width=t.width=r,n.height=t.height=o,n.style.width=r+"px",n.style.height=o+"px",ue.retinaScale(t,i.devicePixelRatio),!e)){var a={width:r,height:o};Rt.notify(t,"resize",[a]),i.onResize&&i.onResize(t,a),t.stop(),t.update({duration:i.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},i=e.scale;ue.each(t.xAxes,(function(e,t){e.id=e.id||"x-axis-"+t})),ue.each(t.yAxes,(function(e,t){e.id=e.id||"y-axis-"+t})),i&&(i.id=i.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,i=e.scales||{},n=[],s=Object.keys(i).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(n=n.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&n.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ue.each(n,(function(t){var n=t.options,r=n.id,o=Nt(n.type,t.dtype);Ht(n.position)!==Ht(t.dposition)&&(n.position=t.dposition),s[r]=!0;var a=null;if(r in i&&i[r].type===o)(a=i[r]).options=n,a.ctx=e.ctx,a.chart=e;else{var c=Lt.getScaleConstructor(o);if(!c)return;a=new c({id:r,type:o,options:n,ctx:e.ctx,chart:e}),i[a.id]=a}a.mergeTicksOptions(),t.isDefault&&(e.scale=a)})),ue.each(s,(function(e,t){e||delete i[t]})),e.scales=i,Lt.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e=this,t=[];return ue.each(e.data.datasets,(function(i,n){var s=e.getDatasetMeta(n),r=i.type||e.config.type;if(s.type&&s.type!==r&&(e.destroyDatasetMeta(n),s=e.getDatasetMeta(n)),s.type=r,s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{var o=at[s.type];if(void 0===o)throw new Error('"'+s.type+'" is not a chart type.');s.controller=new o(e,n),t.push(s.controller)}}),e),t},resetElements:function(){var e=this;ue.each(e.data.datasets,(function(t,i){e.getDatasetMeta(i).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),Vt(t),Rt._invalidate(t),!1!==Rt.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var i=t.buildOrUpdateControllers();ue.each(t.data.datasets,(function(e,i){t.getDatasetMeta(i).controller.buildOrUpdateElements()}),t),t.updateLayout(),t.options.animation&&t.options.animation.duration&&ue.each(i,(function(e){e.reset()})),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],Rt.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){!1!==Rt.notify(this,"beforeLayout")&&(Ct.update(this,this.width,this.height),Rt.notify(this,"afterScaleUpdate"),Rt.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Rt.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Rt.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),i={meta:t,index:e};!1!==Rt.notify(this,"beforeDatasetUpdate",[i])&&(t.controller.update(),Rt.notify(this,"afterDatasetUpdate",[i]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var i=t.options.animation,n=Nt(e.duration,i&&i.duration),s=e.lazy;if(!1!==Rt.notify(t,"beforeRender")){var r=function(e){Rt.notify(t,"afterRender"),ue.callback(i&&i.onComplete,[e],t)};if(i&&n){var o=new me({numSteps:n/16.66,easing:e.easing||i.easing,render:function(e,t){var i=t.currentStep,n=i/t.numSteps;e.draw((0,ue.easing.effects[t.easing])(n),n,i)},onAnimationProgress:i.onProgress,onAnimationComplete:r});ge.addAnimation(t,o,n,s)}else t.draw(),r(new me({numSteps:0,chart:t}));return t}},draw:function(e){var t=this;t.clear(),ue.isNullOrUndef(e)&&(e=1),t.transition(e),t.width<=0||t.height<=0||!1!==Rt.notify(t,"beforeDraw",[e])&&(ue.each(t.boxes,(function(e){e.draw(t.chartArea)}),t),t.drawDatasets(e),t._drawTooltip(e),Rt.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=0,i=(this.data.datasets||[]).length;t<i;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==Rt.notify(t,"beforeDatasetsDraw",[e])){for(var i=(t.data.datasets||[]).length-1;i>=0;--i)t.isDatasetVisible(i)&&t.drawDataset(i,e);Rt.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var i=this.getDatasetMeta(e),n={meta:i,index:e,easingValue:t};!1!==Rt.notify(this,"beforeDatasetDraw",[n])&&(i.controller.draw(t),Rt.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,i={tooltip:t,easingValue:e};!1!==Rt.notify(this,"beforeTooltipDraw",[i])&&(t.draw(),Rt.notify(this,"afterTooltipDraw",[i]))},getElementAtEvent:function(e){return bt.modes.single(this,e)},getElementsAtEvent:function(e){return bt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return bt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,i){var n=bt.modes[t];return"function"==typeof n?n(this,e,i):[]},getDatasetAtEvent:function(e){return bt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var i=t._meta[this.id];return i||(i=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var e=0,t=0,i=this.data.datasets.length;t<i;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,i=this.data.datasets[e],n=i._meta&&i._meta[t];n&&(n.controller.destroy(),delete i._meta[t])},destroy:function(){var e,t,i=this,n=i.canvas;for(i.stop(),e=0,t=i.data.datasets.length;e<t;++e)i.destroyDatasetMeta(e);n&&(i.unbindEvents(),ue.canvas.clear(i),_t.releaseContext(i.ctx),i.canvas=null,i.ctx=null),Rt.notify(i,"destroy"),delete Yt.instances[i.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Bt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},i=function(){e.eventHandler.apply(e,arguments)};ue.each(e.options.events,(function(n){_t.addEventListener(e,n,i),t[n]=i})),e.options.responsive&&(i=function(){e.resize()},_t.addEventListener(e,"resize",i),t.resize=i)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ue.each(t,(function(t,i){_t.removeEventListener(e,i,t)})))},updateHoverStyle:function(e,t,i){var n,s,r,o=i?"setHoverStyle":"removeHoverStyle";for(s=0,r=e.length;s<r;++s)(n=e[s])&&this.getDatasetMeta(n._datasetIndex).controller[o](n)},eventHandler:function(e){var t=this,i=t.tooltip;if(!1!==Rt.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var n=t.handleEvent(e);i&&(n=i._start?i.handleEvent(e):n|i.handleEvent(e)),Rt.notify(t,"afterEvent",[e]);var s=t._bufferedRequest;return s?t.render(s):n&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,i=this,n=i.options||{},s=n.hover;return i.lastActive=i.lastActive||[],i.active="mouseout"===e.type?[]:i.getElementsAtEventForMode(e,s.mode,s),ue.callback(n.onHover||n.hover.onHover,[e.native,i.active],i),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(i,e.native,i.active),i.lastActive.length&&i.updateHoverStyle(i.lastActive,s.mode,!1),i.active.length&&s.mode&&i.updateHoverStyle(i.active,s.mode,!0),t=!ue.arrayEquals(i.active,i.lastActive),i.lastActive=i.active,t}}),Yt.instances={};var $t=Yt;function zt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Zt(e){this.options=e||{}}Yt.Controller=Yt,Yt.types={},ue.configMerge=Ut,ue.scaleMerge=Gt,ue.extend(Zt.prototype,{formats:zt,parse:zt,format:zt,add:zt,diff:zt,startOf:zt,endOf:zt,_create:function(e){return e}}),Zt.override=function(e){ue.extend(Zt.prototype,e)};var Kt={_date:Zt},qt={formatters:{values:function(e){return ue.isArray(e)?e:""+e},linear:function(e,t,i){var n=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(n)>1&&e!==Math.floor(e)&&(n=e-Math.floor(e));var s=ue.log10(Math.abs(n)),r="";if(0!==e)if(Math.max(Math.abs(i[0]),Math.abs(i[i.length-1]))<1e-4){var o=ue.log10(Math.abs(e));r=e.toExponential(Math.floor(o)-Math.floor(s))}else{var a=-1*Math.floor(s);a=Math.max(Math.min(a,20),0),r=e.toFixed(a)}else r="0";return r},logarithmic:function(e,t,i){var n=e/Math.pow(10,Math.floor(ue.log10(e)));return 0===e?"0":1===n||2===n||5===n||0===t||t===i.length-1?e.toExponential():""}}},Jt=ue.valueOrDefault,Qt=ue.valueAtIndexOrDefault;function ei(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(e[t].label);return n}function ti(e,t,i){return ue.isArray(t)?ue.longestText(e,i,t):e.measureText(t).width}ae._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:qt.formatters.values,minor:{},major:{}}});var ii=be.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;for(var t in!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1}),e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){ue.callback(this.options.beforeUpdate,[this])},update:function(e,t,i){var n,s,r,o,a,c,l=this;for(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=ue.extend({left:0,right:0,top:0,bottom:0},i),l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),a=l.buildTicks()||[],a=l.afterBuildTicks(a)||a,l.beforeTickToLabelConversion(),r=l.convertTicksToLabels(a)||l.ticks,l.afterTickToLabelConversion(),l.ticks=r,n=0,s=r.length;n<s;++n)o=r[n],(c=a[n])?c.label=o:a.push(c={label:o,major:!1});return l._ticks=a,l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l.afterUpdate(),l.minSize},afterUpdate:function(){ue.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ue.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){ue.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ue.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ue.noop,afterDataLimits:function(){ue.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ue.callback(this.options.beforeBuildTicks,[this])},buildTicks:ue.noop,afterBuildTicks:function(e){var t=this;return ue.isArray(e)&&e.length?ue.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=ue.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){ue.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){ue.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ue.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,i=e.options.ticks,n=ei(e._ticks),s=ue.options._parseFont(i);t.font=s.string;var r=i.minRotation||0;if(n.length&&e.options.display&&e.isHorizontal())for(var o,a=ue.longestText(t,s.string,n,e.longestTextCache),c=a,l=e.getPixelForTick(1)-e.getPixelForTick(0)-6;c>l&&r<i.maxRotation;){var u=ue.toRadians(r);if(o=Math.cos(u),Math.sin(u)*a>e.maxHeight){r--;break}r++,c=o*a}e.labelRotation=r},afterCalculateTickRotation:function(){ue.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ue.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},i=ei(e._ticks),n=e.options,s=n.ticks,r=n.scaleLabel,o=n.gridLines,a=e._isVisible(),c=n.position,l=e.isHorizontal(),u=ue.options._parseFont,d=u(s),h=n.gridLines.tickMarkLength;if(t.width=l?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:a&&o.drawTicks?h:0,t.height=l?a&&o.drawTicks?h:0:e.maxHeight,r.display&&a){var p=u(r),b=ue.options.toPadding(r.padding),f=p.lineHeight+b.height;l?t.height+=f:t.width+=f}if(s.display&&a){var m=ue.longestText(e.ctx,d.string,i,e.longestTextCache),g=ue.numberOfLabelLines(i),v=.5*d.size,C=e.options.ticks.padding;if(e._maxLabelLines=g,e.longestLabelWidth=m,l){var E=ue.toRadians(e.labelRotation),w=Math.cos(E),S=Math.sin(E);t.height=Math.min(e.maxHeight,t.height+(S*m+d.lineHeight*g+v)+C),e.ctx.font=d.string;var y,O,A=ti(e.ctx,i[0],d.string),k=ti(e.ctx,i[i.length-1],d.string),T=e.getPixelForTick(0)-e.left,D=e.right-e.getPixelForTick(i.length-1);0!==e.labelRotation?(y="bottom"===c?w*A:w*v,O="bottom"===c?w*v:w*k):(y=A/2,O=k/2),e.paddingLeft=Math.max(y-T,0)+3,e.paddingRight=Math.max(O-D,0)+3}else s.mirror?m=0:m+=C+v,t.width=Math.min(e.maxWidth,t.width+m),e.paddingTop=d.size/2,e.paddingBottom=d.size/2}e.handleMargins(),e.width=t.width,e.height=t.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){ue.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(ue.isNullOrUndef(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:ue.noop,getPixelForValue:ue.noop,getValueForPixel:ue.noop,getPixelForTick:function(e){var t=this,i=t.options.offset;if(t.isHorizontal()){var n=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(i?0:1),1),s=n*e+t.paddingLeft;return i&&(s+=n/2),t.left+s+(t.isFullWidth()?t.margins.left:0)}return t.top+e*((t.height-(t.paddingTop+t.paddingBottom))/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;return t.isHorizontal()?t.left+((t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft)+(t.isFullWidth()?t.margins.left:0):t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,i,n=this,s=n.isHorizontal(),r=e.length,o=!1,a=n.options.ticks.minor.maxTicksLimit,c=n._tickSize()*(r-1),l=s?n.width-(n.paddingLeft+n.paddingRight):n.height-(n.paddingTop+n.PaddingBottom),u=[];for(c>l&&(o=1+Math.floor(c/l)),r>a&&(o=Math.max(o,1+Math.floor(r/a))),t=0;t<r;t++)i=e[t],o>1&&t%o>0&&delete i.label,u.push(i);return u},_tickSize:function(){var e=this,t=e.isHorizontal(),i=e.options.ticks.minor,n=ue.toRadians(e.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=i.autoSkipPadding||0,a=e.longestLabelWidth+o||0,c=ue.options._parseFont(i),l=e._maxLabelLines*c.lineHeight+o||0;return t?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r},_isVisible:function(){var e,t,i,n=this.chart,s=this.options.display;if("auto"!==s)return!!s;for(e=0,t=n.data.datasets.length;e<t;++e)if(n.isDatasetVisible(e)&&((i=n.getDatasetMeta(e)).xAxisID===this.id||i.yAxisID===this.id))return!0;return!1},draw:function(e){var t=this,i=t.options;if(t._isVisible()){var n,s,r,o=t.chart,a=t.ctx,c=ae.global.defaultFontColor,l=i.ticks.minor,u=i.ticks.major||l,d=i.gridLines,h=i.scaleLabel,p=i.position,b=0!==t.labelRotation,f=l.mirror,m=t.isHorizontal(),g=ue.options._parseFont,v=l.display&&l.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),C=Jt(l.fontColor,c),E=g(l),w=E.lineHeight,S=Jt(u.fontColor,c),y=g(u),O=l.padding,A=l.labelOffset,k=d.drawTicks?d.tickMarkLength:0,T=Jt(h.fontColor,c),D=g(h),I=ue.options.toPadding(h.padding),_=ue.toRadians(t.labelRotation),R=[],L=d.drawBorder?Qt(d.lineWidth,0,0):0,x=ue._alignPixel;if("top"===p?(n=x(o,t.bottom,L),s=t.bottom-k,r=n-L/2):"bottom"===p?(n=x(o,t.top,L),s=n+L/2,r=t.top+k):"left"===p?(n=x(o,t.right,L),s=t.right-k,r=n-L/2):(n=x(o,t.left,L),s=n+L/2,r=t.left+k),ue.each(v,(function(n,a){if(!ue.isNullOrUndef(n.label)){var c,l,u,h,g,v,C,E,S,y,T,D,I,P,j,M,X=n.label;a===t.zeroLineIndex&&i.offset===d.offsetGridLines?(c=d.zeroLineWidth,l=d.zeroLineColor,u=d.zeroLineBorderDash||[],h=d.zeroLineBorderDashOffset||0):(c=Qt(d.lineWidth,a),l=Qt(d.color,a),u=d.borderDash||[],h=d.borderDashOffset||0);var F=ue.isArray(X)?X.length:1,W=function(e,t,i){var n=e.getPixelForTick(t);return i&&(1===e.getTicks().length?n-=e.isHorizontal()?Math.max(n-e.left,e.right-n):Math.max(n-e.top,e.bottom-n):n-=0===t?(e.getPixelForTick(1)-n)/2:(n-e.getPixelForTick(t-1))/2),n}(t,a,d.offsetGridLines);if(m){var B=k+O;W<t.left-1e-7&&(l="rgba(0,0,0,0)"),g=C=S=T=x(o,W,c),v=s,E=r,I=t.getPixelForTick(a)+A,"top"===p?(y=x(o,e.top,L)+L/2,D=e.bottom,j=((b?1:.5)-F)*w,M=b?"left":"center",P=t.bottom-B):(y=e.top,D=x(o,e.bottom,L)-L/2,j=(b?0:.5)*w,M=b?"right":"center",P=t.top+B)}else{var N=(f?0:k)+O;W<t.top-1e-7&&(l="rgba(0,0,0,0)"),g=s,C=r,v=E=y=D=x(o,W,c),P=t.getPixelForTick(a)+A,j=(1-F)*w/2,"left"===p?(S=x(o,e.left,L)+L/2,T=e.right,M=f?"left":"right",I=t.right-N):(S=e.left,T=x(o,e.right,L)-L/2,M=f?"right":"left",I=t.left+N)}R.push({tx1:g,ty1:v,tx2:C,ty2:E,x1:S,y1:y,x2:T,y2:D,labelX:I,labelY:P,glWidth:c,glColor:l,glBorderDash:u,glBorderDashOffset:h,rotation:-1*_,label:X,major:n.major,textOffset:j,textAlign:M})}})),ue.each(R,(function(e){var t=e.glWidth,i=e.glColor;if(d.display&&t&&i&&(a.save(),a.lineWidth=t,a.strokeStyle=i,a.setLineDash&&(a.setLineDash(e.glBorderDash),a.lineDashOffset=e.glBorderDashOffset),a.beginPath(),d.drawTicks&&(a.moveTo(e.tx1,e.ty1),a.lineTo(e.tx2,e.ty2)),d.drawOnChartArea&&(a.moveTo(e.x1,e.y1),a.lineTo(e.x2,e.y2)),a.stroke(),a.restore()),l.display){a.save(),a.translate(e.labelX,e.labelY),a.rotate(e.rotation),a.font=e.major?y.string:E.string,a.fillStyle=e.major?S:C,a.textBaseline="middle",a.textAlign=e.textAlign;var n=e.label,s=e.textOffset;if(ue.isArray(n))for(var r=0;r<n.length;++r)a.fillText(""+n[r],0,s),s+=w;else a.fillText(n,0,s);a.restore()}})),h.display){var P,j,M=0,X=D.lineHeight/2;if(m)P=t.left+(t.right-t.left)/2,j="bottom"===p?t.bottom-X-I.bottom:t.top+X+I.top;else{var F="left"===p;P=F?t.left+X+I.top:t.right-X-I.top,j=t.top+(t.bottom-t.top)/2,M=F?-.5*Math.PI:.5*Math.PI}a.save(),a.translate(P,j),a.rotate(M),a.textAlign="center",a.textBaseline="middle",a.fillStyle=T,a.font=D.string,a.fillText(h.labelString,0,0),a.restore()}if(L){var W,B,N,G,U=L,V=Qt(d.lineWidth,v.length-1,0);m?(W=x(o,t.left,U)-U/2,B=x(o,t.right,V)+V/2,N=G=n):(N=x(o,t.top,U)-U/2,G=x(o,t.bottom,V)+V/2,W=B=n),a.lineWidth=L,a.strokeStyle=Qt(d.color,0),a.beginPath(),a.moveTo(W,N),a.lineTo(B,G),a.stroke()}}}}),ni=ii.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,t=this,i=t.getLabels();t.minIndex=0,t.maxIndex=i.length-1,void 0!==t.options.ticks.min&&(e=i.indexOf(t.options.ticks.min),t.minIndex=-1!==e?e:t.minIndex),void 0!==t.options.ticks.max&&(e=i.indexOf(t.options.ticks.max),t.maxIndex=-1!==e?e:t.maxIndex),t.min=i[t.minIndex],t.max=i[t.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var i=this,n=i.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===i.id?i.getRightValue(n.data.datasets[t].data[e]):i.ticks[e-i.minIndex]},getPixelForValue:function(e,t){var i,n=this,s=n.options.offset,r=Math.max(n.maxIndex+1-n.minIndex-(s?0:1),1);if(null!=e&&(i=n.isHorizontal()?e.x:e.y),void 0!==i||void 0!==e&&isNaN(t)){var o=n.getLabels().indexOf(e=i||e);t=-1!==o?o:t}if(n.isHorizontal()){var a=n.width/r,c=a*(t-n.minIndex);return s&&(c+=a/2),n.left+c}var l=n.height/r,u=l*(t-n.minIndex);return s&&(u+=l/2),n.top+u},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,i=t.options.offset,n=Math.max(t._ticks.length-(i?0:1),1),s=t.isHorizontal(),r=(s?t.width:t.height)/n;return e-=s?t.left:t.top,i&&(e-=r/2),(e<=0?0:Math.round(e/r))+t.minIndex},getBasePixel:function(){return this.bottom}});ni._defaults={position:"bottom"};var si=ue.isNullOrUndef,ri=ii.extend({getRightValue:function(e){return"string"==typeof e?+e:ii.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var i=ue.sign(e.min),n=ue.sign(e.max);i<0&&n<0?e.max=0:i>0&&n>0&&(e.min=0)}var s=void 0!==t.min||void 0!==t.suggestedMin,r=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(e.min=null===e.min?t.suggestedMin:Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(e.max=null===e.max?t.suggestedMax:Math.max(e.max,t.suggestedMax)),s!==r&&e.min>=e.max&&(s?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,i=t.stepSize,n=t.maxTicksLimit;return i?e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1:(e=this._computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ue.noop,buildTicks:function(){var e=this,t=e.options.ticks,i=e.getTickLimit(),n={maxTicks:i=Math.max(2,i),min:t.min,max:t.max,precision:t.precision,stepSize:ue.valueOrDefault(t.fixedStepSize,t.stepSize)},s=e.ticks=function(e,t){var i,n,s,r,o=[],a=e.stepSize,c=a||1,l=e.maxTicks-1,u=e.min,d=e.max,h=e.precision,p=t.min,b=t.max,f=ue.niceNum((b-p)/l/c)*c;if(f<1e-14&&si(u)&&si(d))return[p,b];(r=Math.ceil(b/f)-Math.floor(p/f))>l&&(f=ue.niceNum(r*f/l/c)*c),a||si(h)?i=Math.pow(10,ue._decimalPlaces(f)):(i=Math.pow(10,h),f=Math.ceil(f*i)/i),n=Math.floor(p/f)*f,s=Math.ceil(b/f)*f,a&&(!si(u)&&ue.almostWhole(u/f,f/1e3)&&(n=u),!si(d)&&ue.almostWhole(d/f,f/1e3)&&(s=d)),r=ue.almostEquals(r=(s-n)/f,Math.round(r),f/1e3)?Math.round(r):Math.ceil(r),n=Math.round(n*i)/i,s=Math.round(s*i)/i,o.push(si(u)?n:u);for(var m=1;m<r;++m)o.push(Math.round((n+m*f)*i)/i);return o.push(si(d)?s:d),o}(n,e);e.handleDirectionalChanges(),e.max=ue.max(s),e.min=ue.min(s),t.reverse?(s.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),ii.prototype.convertTicksToLabels.call(e)}}),oi={position:"left",ticks:{callback:qt.formatters.linear}},ai=ri.extend({determineDataLimits:function(){var e=this,t=e.options,i=e.chart,n=i.data.datasets,s=e.isHorizontal();function r(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null;var o=t.stacked;if(void 0===o&&ue.each(n,(function(e,t){if(!o){var n=i.getDatasetMeta(t);i.isDatasetVisible(t)&&r(n)&&void 0!==n.stack&&(o=!0)}})),t.stacked||o){var a={};ue.each(n,(function(n,s){var o=i.getDatasetMeta(s),c=[o.type,void 0===t.stacked&&void 0===o.stack?s:"",o.stack].join(".");void 0===a[c]&&(a[c]={positiveValues:[],negativeValues:[]});var l=a[c].positiveValues,u=a[c].negativeValues;i.isDatasetVisible(s)&&r(o)&&ue.each(n.data,(function(i,n){var s=+e.getRightValue(i);isNaN(s)||o.data[n].hidden||(l[n]=l[n]||0,u[n]=u[n]||0,t.relativePoints?l[n]=100:s<0?u[n]+=s:l[n]+=s)}))})),ue.each(a,(function(t){var i=t.positiveValues.concat(t.negativeValues),n=ue.min(i),s=ue.max(i);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?s:Math.max(e.max,s)}))}else ue.each(n,(function(t,n){var s=i.getDatasetMeta(n);i.isDatasetVisible(n)&&r(s)&&ue.each(t.data,(function(t,i){var n=+e.getRightValue(t);isNaN(n)||s.data[i].hidden||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n))}))}));e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=ue.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this,i=t.start,n=+t.getRightValue(e),s=t.end-i;return t.isHorizontal()?t.left+t.width/s*(n-i):t.bottom-t.height/s*(n-i)},getValueForPixel:function(e){var t=this,i=t.isHorizontal();return t.start+(i?e-t.left:t.bottom-e)/(i?t.width:t.height)*(t.end-t.start)},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});ai._defaults=oi;var ci=ue.valueOrDefault,li={position:"left",ticks:{callback:qt.formatters.logarithmic}};function ui(e,t){return ue.isFinite(e)&&e>=0?e:t}var di=ii.extend({determineDataLimits:function(){var e=this,t=e.options,i=e.chart,n=i.data.datasets,s=e.isHorizontal();function r(t){return s?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null,e.minNotZero=null;var o=t.stacked;if(void 0===o&&ue.each(n,(function(e,t){if(!o){var n=i.getDatasetMeta(t);i.isDatasetVisible(t)&&r(n)&&void 0!==n.stack&&(o=!0)}})),t.stacked||o){var a={};ue.each(n,(function(n,s){var o=i.getDatasetMeta(s),c=[o.type,void 0===t.stacked&&void 0===o.stack?s:"",o.stack].join(".");i.isDatasetVisible(s)&&r(o)&&(void 0===a[c]&&(a[c]=[]),ue.each(n.data,(function(t,i){var n=a[c],s=+e.getRightValue(t);isNaN(s)||o.data[i].hidden||s<0||(n[i]=n[i]||0,n[i]+=s)})))})),ue.each(a,(function(t){if(t.length>0){var i=ue.min(t),n=ue.max(t);e.min=null===e.min?i:Math.min(e.min,i),e.max=null===e.max?n:Math.max(e.max,n)}}))}else ue.each(n,(function(t,n){var s=i.getDatasetMeta(n);i.isDatasetVisible(n)&&r(s)&&ue.each(t.data,(function(t,i){var n=+e.getRightValue(t);isNaN(n)||s.data[i].hidden||n<0||((null===e.min||n<e.min)&&(e.min=n),(null===e.max||n>e.max)&&(e.max=n),0!==n&&(null===e.minNotZero||n<e.minNotZero)&&(e.minNotZero=n))}))}));this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=ui(t.min,e.min),e.max=ui(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(ue.log10(e.min))-1),e.max=Math.pow(10,Math.floor(ue.log10(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(ue.log10(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(ue.log10(e.min))+1):10),null===e.minNotZero&&(e.minNotZero=e.min>0?e.min:e.max<1?Math.pow(10,Math.floor(ue.log10(e.max))):1)},buildTicks:function(){var e=this,t=e.options.ticks,i=!e.isHorizontal(),n={min:ui(t.min),max:ui(t.max)},s=e.ticks=function(e,t){var i,n,s=[],r=ci(e.min,Math.pow(10,Math.floor(ue.log10(t.min)))),o=Math.floor(ue.log10(t.max)),a=Math.ceil(t.max/Math.pow(10,o));0===r?(i=Math.floor(ue.log10(t.minNotZero)),n=Math.floor(t.minNotZero/Math.pow(10,i)),s.push(r),r=n*Math.pow(10,i)):(i=Math.floor(ue.log10(r)),n=Math.floor(r/Math.pow(10,i)));var c=i<0?Math.pow(10,Math.abs(i)):1;do{s.push(r),10==++n&&(n=1,c=++i>=0?1:c),r=Math.round(n*Math.pow(10,i)*c)/c}while(i<o||i===o&&n<a);var l=ci(e.max,r);return s.push(l),s}(n,e);e.max=ue.max(s),e.min=ue.min(s),t.reverse?(i=!i,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),i&&s.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),ii.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},_getFirstTickValue:function(e){var t=Math.floor(ue.log10(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},getPixelForValue:function(e){var t,i,n,s,r,o=this,a=o.options.ticks,c=a.reverse,l=ue.log10,u=o._getFirstTickValue(o.minNotZero),d=0;return e=+o.getRightValue(e),c?(n=o.end,s=o.start,r=-1):(n=o.start,s=o.end,r=1),o.isHorizontal()?(t=o.width,i=c?o.right:o.left):(t=o.height,r*=-1,i=c?o.top:o.bottom),e!==n&&(0===n&&(t-=d=ci(a.fontSize,ae.global.defaultFontSize),n=u),0!==e&&(d+=t/(l(s)-l(n))*(l(e)-l(n))),i+=r*d),i},getValueForPixel:function(e){var t,i,n,s,r=this,o=r.options.ticks,a=o.reverse,c=ue.log10,l=r._getFirstTickValue(r.minNotZero);if(a?(i=r.end,n=r.start):(i=r.start,n=r.end),r.isHorizontal()?(t=r.width,s=a?r.right-e:e-r.left):(t=r.height,s=a?e-r.top:r.bottom-e),s!==i){if(0===i){var u=ci(o.fontSize,ae.global.defaultFontSize);s-=u,t-=u,i=l}s*=c(n)-c(i),s/=t,s=Math.pow(10,c(i)+s)}return s}});di._defaults=li;var hi=ue.valueOrDefault,pi=ue.valueAtIndexOrDefault,bi=ue.options.resolve,fi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:qt.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function mi(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function gi(e){var t=e.ticks;return t.display&&e.display?hi(t.fontSize,ae.global.defaultFontSize)+2*t.backdropPaddingY:0}function vi(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function Ci(e){return 0===e||180===e?"center":e<180?"left":"right"}function Ei(e,t,i,n){var s,r,o=i.y+n/2;if(ue.isArray(t))for(s=0,r=t.length;s<r;++s)e.fillText(t[s],i.x,o),o+=n;else e.fillText(t,i.x,o)}function wi(e,t,i){90===e||270===e?i.y-=t.h/2:(e>270||e<90)&&(i.y-=t.h)}function Si(e){return ue.isNumber(e)?e:0}var yi=ri.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=gi(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;ue.each(t.data.datasets,(function(s,r){if(t.isDatasetVisible(r)){var o=t.getDatasetMeta(r);ue.each(s.data,(function(t,s){var r=+e.getRightValue(t);isNaN(r)||o.data[s].hidden||(i=Math.min(r,i),n=Math.max(r,n))}))}})),e.min=i===Number.POSITIVE_INFINITY?0:i,e.max=n===Number.NEGATIVE_INFINITY?0:n,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/gi(this.options))},convertTicksToLabels:function(){var e=this;ri.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,i,n,s=ue.options._parseFont(e.options.pointLabels),r={l:0,r:e.width,t:0,b:e.height-e.paddingTop},o={};e.ctx.font=s.string,e._pointLabelSizes=[];var a,c,l,u=mi(e);for(t=0;t<u;t++){n=e.getPointPosition(t,e.drawingArea+5),a=e.ctx,c=s.lineHeight,i=ue.isArray(l=e.pointLabels[t]||"")?{w:ue.longestText(a,a.font,l),h:l.length*c}:{w:a.measureText(l).width,h:c},e._pointLabelSizes[t]=i;var d=e.getIndexAngle(t),h=ue.toDegrees(d)%360,p=vi(h,n.x,i.w,0,180),b=vi(h,n.y,i.h,90,270);p.start<r.l&&(r.l=p.start,o.l=d),p.end>r.r&&(r.r=p.end,o.r=d),b.start<r.t&&(r.t=b.start,o.t=d),b.end>r.b&&(r.b=b.end,o.b=d)}e.setReductions(e.drawingArea,r,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,i){var n=this,s=t.l/Math.sin(i.l),r=Math.max(t.r-n.width,0)/Math.sin(i.r),o=-t.t/Math.cos(i.t),a=-Math.max(t.b-(n.height-n.paddingTop),0)/Math.cos(i.b);s=Si(s),r=Si(r),o=Si(o),a=Si(a),n.drawingArea=Math.min(Math.floor(e-(s+r)/2),Math.floor(e-(o+a)/2)),n.setCenterPoint(s,r,o,a)},setCenterPoint:function(e,t,i,n){var s=this,r=i+s.drawingArea,o=s.height-s.paddingTop-n-s.drawingArea;s.xCenter=Math.floor((e+s.drawingArea+(s.width-t-s.drawingArea))/2+s.left),s.yCenter=Math.floor((r+o)/2+s.top+s.paddingTop)},getIndexAngle:function(e){return e*(2*Math.PI/mi(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var i=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*i:(e-t.min)*i},getPointPosition:function(e,t){var i=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this.min,t=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0)},draw:function(){var e=this,t=e.options,i=t.gridLines,n=t.ticks;if(t.display){var s=e.ctx,r=this.getIndexAngle(0),o=ue.options._parseFont(n);(t.angleLines.display||t.pointLabels.display)&&function(e){var t=e.ctx,i=e.options,n=i.angleLines,s=i.gridLines,r=i.pointLabels,o=hi(n.lineWidth,s.lineWidth),a=hi(n.color,s.color),c=gi(i);t.save(),t.lineWidth=o,t.strokeStyle=a,t.setLineDash&&(t.setLineDash(bi([n.borderDash,s.borderDash,[]])),t.lineDashOffset=bi([n.borderDashOffset,s.borderDashOffset,0]));var l=e.getDistanceFromCenterForValue(i.ticks.reverse?e.min:e.max),u=ue.options._parseFont(r);t.font=u.string,t.textBaseline="middle";for(var d=mi(e)-1;d>=0;d--){if(n.display&&o&&a){var h=e.getPointPosition(d,l);t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(h.x,h.y),t.stroke()}if(r.display){var p=e.getPointPosition(d,l+(0===d?c/2:0)+5),b=pi(r.fontColor,d,ae.global.defaultFontColor);t.fillStyle=b;var f=e.getIndexAngle(d),m=ue.toDegrees(f);t.textAlign=Ci(m),wi(m,e._pointLabelSizes[d],p),Ei(t,e.pointLabels[d]||"",p,u.lineHeight)}}t.restore()}(e),ue.each(e.ticks,(function(t,a){if(a>0||n.reverse){var c=e.getDistanceFromCenterForValue(e.ticksAsNumbers[a]);if(i.display&&0!==a&&function(e,t,i,n){var s,r=e.ctx,o=t.circular,a=mi(e),c=pi(t.color,n-1),l=pi(t.lineWidth,n-1);if((o||a)&&c&&l){if(r.save(),r.strokeStyle=c,r.lineWidth=l,r.setLineDash&&(r.setLineDash(t.borderDash||[]),r.lineDashOffset=t.borderDashOffset||0),r.beginPath(),o)r.arc(e.xCenter,e.yCenter,i,0,2*Math.PI);else{s=e.getPointPosition(0,i),r.moveTo(s.x,s.y);for(var u=1;u<a;u++)s=e.getPointPosition(u,i),r.lineTo(s.x,s.y)}r.closePath(),r.stroke(),r.restore()}}(e,i,c,a),n.display){var l=hi(n.fontColor,ae.global.defaultFontColor);if(s.font=o.string,s.save(),s.translate(e.xCenter,e.yCenter),s.rotate(r),n.showLabelBackdrop){var u=s.measureText(t).width;s.fillStyle=n.backdropColor,s.fillRect(-u/2-n.backdropPaddingX,-c-o.size/2-n.backdropPaddingY,u+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)}s.textAlign="center",s.textBaseline="middle",s.fillStyle=l,s.fillText(t,0,-c),s.restore()}}}))}}});yi._defaults=fi;var Oi=ue.valueOrDefault,Ai=Number.MIN_SAFE_INTEGER||-9007199254740991,ki=Number.MAX_SAFE_INTEGER||9007199254740991,Ti={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},Di=Object.keys(Ti);function Ii(e,t){return e-t}function _i(e){var t,i,n,s={},r=[];for(t=0,i=e.length;t<i;++t)s[n=e[t]]||(s[n]=!0,r.push(n));return r}function Ri(e,t,i,n){var s=function(e,t,i){for(var n,s,r,o=0,a=e.length-1;o>=0&&o<=a;){if(r=e[n=o+a>>1],!(s=e[n-1]||null))return{lo:null,hi:r};if(r[t]<i)o=n+1;else{if(!(s[t]>i))return{lo:s,hi:r};a=n-1}}return{lo:r,hi:null}}(e,t,i),r=s.lo?s.hi?s.lo:e[e.length-2]:e[0],o=s.lo?s.hi?s.hi:e[e.length-1]:e[1],a=o[t]-r[t];return r[n]+(o[n]-r[n])*(a?(i-r[t])/a:0)}function Li(e,t){var i=e._adapter,n=e.options.time,s=n.parser,r=s||n.format,o=t;return"function"==typeof s&&(o=s(o)),ue.isFinite(o)||(o="string"==typeof r?i.parse(o,r):i.parse(o)),null!==o?+o:(s||"function"!=typeof r||(o=r(t),ue.isFinite(o)||(o=i.parse(o))),o)}function xi(e,t){if(ue.isNullOrUndef(t))return null;var i=e.options.time,n=Li(e,e.getRightValue(t));return null===n||i.round&&(n=+e._adapter.startOf(n,i.round)),n}function Pi(e){for(var t=Di.indexOf(e)+1,i=Di.length;t<i;++t)if(Ti[Di[t]].common)return Di[t]}var ji=ii.extend({initialize:function(){this.mergeTicksOptions(),ii.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,i=t.time||(t.time={}),n=e._adapter=new Kt._date(t.adapters.date);return i.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ue.mergeIf(i.displayFormats,n.formats()),ii.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),ii.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,i,n,s,r,o=this,a=o.chart,c=o._adapter,l=o.options.time,u=l.unit||"day",d=ki,h=Ai,p=[],b=[],f=[],m=a.data.labels||[];for(e=0,i=m.length;e<i;++e)f.push(xi(o,m[e]));for(e=0,i=(a.data.datasets||[]).length;e<i;++e)if(a.isDatasetVisible(e))if(ue.isObject((s=a.data.datasets[e].data)[0]))for(b[e]=[],t=0,n=s.length;t<n;++t)r=xi(o,s[t]),p.push(r),b[e][t]=r;else{for(t=0,n=f.length;t<n;++t)p.push(f[t]);b[e]=f.slice(0)}else b[e]=[];f.length&&(f=_i(f).sort(Ii),d=Math.min(d,f[0]),h=Math.max(h,f[f.length-1])),p.length&&(p=_i(p).sort(Ii),d=Math.min(d,p[0]),h=Math.max(h,p[p.length-1])),d=xi(o,l.min)||d,h=xi(o,l.max)||h,d=d===ki?+c.startOf(Date.now(),u):d,h=h===Ai?+c.endOf(Date.now(),u)+1:h,o.min=Math.min(d,h),o.max=Math.max(d+1,h),o._horizontal=o.isHorizontal(),o._table=[],o._timestamps={data:p,datasets:b,labels:f}},buildTicks:function(){var e,t,i,n=this,s=n.min,r=n.max,o=n.options,a=o.time,c=[],l=[];switch(o.ticks.source){case"data":c=n._timestamps.data;break;case"labels":c=n._timestamps.labels;break;case"auto":default:c=function(e,t,i,n){var s,r=e._adapter,o=e.options,a=o.time,c=a.unit||function(e,t,i,n){var s,r,o=Di.length;for(s=Di.indexOf(e);s<o-1;++s)if((r=Ti[Di[s]]).common&&Math.ceil((i-t)/((r.steps?r.steps[r.steps.length-1]:ki)*r.size))<=n)return Di[s];return Di[o-1]}(a.minUnit,t,i,n),l=Pi(c),u=Oi(a.stepSize,a.unitStepSize),d="week"===c&&a.isoWeekday,h=o.ticks.major.enabled,p=Ti[c],b=t,f=i,m=[];for(u||(u=function(e,t,i,n){var s,r,o,a=t-e,c=Ti[i],l=c.size,u=c.steps;if(!u)return Math.ceil(a/(n*l));for(s=0,r=u.length;s<r&&(o=u[s],!(Math.ceil(a/(l*o))<=n));++s);return o}(t,i,c,n)),d&&(b=+r.startOf(b,"isoWeek",d),f=+r.startOf(f,"isoWeek",d)),b=+r.startOf(b,d?"day":c),(f=+r.startOf(f,d?"day":c))<i&&(f=+r.add(f,1,c)),s=b,h&&l&&!d&&!a.round&&(s=+r.startOf(s,l),s=+r.add(s,~~((b-s)/(p.size*u))*u,c));s<f;s=+r.add(s,u,c))m.push(+s);return m.push(+s),m}(n,s,r,n.getLabelCapacity(s))}for("ticks"===o.bounds&&c.length&&(s=c[0],r=c[c.length-1]),s=xi(n,a.min)||s,r=xi(n,a.max)||r,e=0,t=c.length;e<t;++e)(i=c[e])>=s&&i<=r&&l.push(i);return n.min=s,n.max=r,n._unit=a.unit||function(e,t,i,n,s){var r,o;for(r=Di.length-1;r>=Di.indexOf(i);r--)if(Ti[o=Di[r]].common&&e._adapter.diff(s,n,o)>=t.length)return o;return Di[i?Di.indexOf(i):0]}(n,l,a.minUnit,n.min,n.max),n._majorUnit=Pi(n._unit),n._table=function(e,t,i,n){if("linear"===n||!e.length)return[{time:t,pos:0},{time:i,pos:1}];var s,r,o,a,c,l=[],u=[t];for(s=0,r=e.length;s<r;++s)(a=e[s])>t&&a<i&&u.push(a);for(u.push(i),s=0,r=u.length;s<r;++s)c=u[s+1],a=u[s],void 0!==(o=u[s-1])&&void 0!==c&&Math.round((c+o)/2)===a||l.push({time:a,pos:s/(r-1)});return l}(n._timestamps.data,s,r,o.distribution),n._offsets=function(e,t,i,n,s){var r,o,a=0,c=0;return s.offset&&t.length&&(s.time.min||(r=Ri(e,"time",t[0],"pos"),a=1===t.length?1-r:(Ri(e,"time",t[1],"pos")-r)/2),s.time.max||(o=Ri(e,"time",t[t.length-1],"pos"),c=1===t.length?o:(o-Ri(e,"time",t[t.length-2],"pos"))/2)),{start:a,end:c}}(n._table,l,0,0,o),o.ticks.reverse&&l.reverse(),function(e,t,i){var n,s,r,o,a=[];for(n=0,s=t.length;n<s;++n)r=t[n],o=!!i&&r===+e._adapter.startOf(r,i),a.push({value:r,major:o});return a}(n,l,n._majorUnit)},getLabelForIndex:function(e,t){var i=this,n=i._adapter,s=i.chart.data,r=i.options.time,o=s.labels&&e<s.labels.length?s.labels[e]:"",a=s.datasets[t].data[e];return ue.isObject(a)&&(o=i.getRightValue(a)),r.tooltipFormat?n.format(Li(i,o),r.tooltipFormat):"string"==typeof o?o:n.format(Li(i,o),r.displayFormats.datetime)},tickFormatFunction:function(e,t,i,n){var s=this._adapter,r=this.options,o=r.time.displayFormats,a=o[this._unit],c=this._majorUnit,l=o[c],u=+s.startOf(e,c),d=r.ticks.major,h=d.enabled&&c&&l&&e===u,p=s.format(e,n||(h?l:a)),b=h?d:r.ticks.minor,f=Oi(b.callback,b.userCallback);return f?f(p,t,i):p},convertTicksToLabels:function(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(this.tickFormatFunction(e[t].value,t,e));return n},getPixelForOffset:function(e){var t=this,i=t.options.ticks.reverse,n=t._horizontal?t.width:t.height,s=t._horizontal?i?t.right:t.left:i?t.bottom:t.top,r=Ri(t._table,"time",e,"pos"),o=n*(t._offsets.start+r)/(t._offsets.start+1+t._offsets.end);return i?s-o:s+o},getPixelForValue:function(e,t,i){var n=null;if(void 0!==t&&void 0!==i&&(n=this._timestamps.datasets[i][t]),null===n&&(n=xi(this,e)),null!==n)return this.getPixelForOffset(n)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,i=t._horizontal?t.width:t.height,n=Ri(t._table,"pos",(i?(e-(t._horizontal?t.left:t.top))/i:0)*(t._offsets.start+1+t._offsets.start)-t._offsets.end,"time");return t._adapter._create(n)},getLabelWidth:function(e){var t=this.options.ticks,i=this.ctx.measureText(e).width,n=ue.toRadians(t.maxRotation),s=Math.cos(n),r=Math.sin(n);return i*s+Oi(t.fontSize,ae.global.defaultFontSize)*r},getLabelCapacity:function(e){var t=this,i=t.tickFormatFunction(e,0,[],t.options.time.displayFormats.millisecond),n=t.getLabelWidth(i),s=t.isHorizontal()?t.width:t.height,r=Math.floor(s/n);return r>0?r:1}});ji._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var Mi={category:ni,linear:ai,logarithmic:di,radialLinear:yi,time:ji},Xi={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Kt._date.override("function"==typeof e?{_id:"moment",formats:function(){return Xi},parse:function(t,i){return"string"==typeof t&&"string"==typeof i?t=e(t,i):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,i){return e(t).format(i)},add:function(t,i,n){return e(t).add(i,n).valueOf()},diff:function(t,i,n){return e.duration(e(t).diff(e(i))).as(n)},startOf:function(t,i,n){return t=e(t),"isoWeek"===i?t.isoWeekday(n).valueOf():t.startOf(i).valueOf()},endOf:function(t,i){return e(t).endOf(i).valueOf()},_create:function(t){return e(t)}}:{}),ae._set("global",{plugins:{filler:{propagate:!0}}});var Fi={dataset:function(e){var t=e.fill,i=e.chart,n=i.getDatasetMeta(t),s=n&&i.isDatasetVisible(t)&&n.dataset._children||[],r=s.length||0;return r?function(e,t){return t<r&&s[t]._view||null}:null},boundary:function(e){var t=e.boundary,i=t?t.x:null,n=t?t.y:null;return function(e){return{x:null===i?e.x:i,y:null===n?e.y:n}}}};function Wi(e,t,i){var n,s=e._model||{},r=s.fill;if(void 0===r&&(r=!!s.backgroundColor),!1===r||null===r)return!1;if(!0===r)return"origin";if(n=parseFloat(r,10),isFinite(n)&&Math.floor(n)===n)return"-"!==r[0]&&"+"!==r[0]||(n=t+n),!(n===t||n<0||n>=i)&&n;switch(r){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return r;default:return!1}}function Bi(e){var t,i=e.el._model||{},n=e.el._scale||{},s=e.fill,r=null;if(isFinite(s))return null;if("start"===s?r=void 0===i.scaleBottom?n.bottom:i.scaleBottom:"end"===s?r=void 0===i.scaleTop?n.top:i.scaleTop:void 0!==i.scaleZero?r=i.scaleZero:n.getBasePosition?r=n.getBasePosition():n.getBasePixel&&(r=n.getBasePixel()),null!=r){if(void 0!==r.x&&void 0!==r.y)return r;if(ue.isFinite(r))return{x:(t=n.isHorizontal())?r:null,y:t?null:r}}return null}function Ni(e,t,i){var n,s=e[t].fill,r=[t];if(!i)return s;for(;!1!==s&&-1===r.indexOf(s);){if(!isFinite(s))return s;if(!(n=e[s]))return!1;if(n.visible)return s;r.push(s),s=n.fill}return!1}function Gi(e){var t=e.fill,i="dataset";return!1===t?null:(isFinite(t)||(i="boundary"),Fi[i](e))}function Ui(e){return e&&!e.skip}function Vi(e,t,i,n,s){var r;if(n&&s){for(e.moveTo(t[0].x,t[0].y),r=1;r<n;++r)ue.canvas.lineTo(e,t[r-1],t[r]);for(e.lineTo(i[s-1].x,i[s-1].y),r=s-1;r>0;--r)ue.canvas.lineTo(e,i[r],i[r-1],!0)}}var Hi={id:"filler",afterDatasetsUpdate:function(e,t){var i,n,s,r,o=(e.data.datasets||[]).length,a=t.propagate,c=[];for(n=0;n<o;++n)r=null,(s=(i=e.getDatasetMeta(n)).dataset)&&s._model&&s instanceof Xe.Line&&(r={visible:e.isDatasetVisible(n),fill:Wi(s,n,o),chart:e,el:s}),i.$filler=r,c.push(r);for(n=0;n<o;++n)(r=c[n])&&(r.fill=Ni(c,n,a),r.boundary=Bi(r),r.mapper=Gi(r))},beforeDatasetDraw:function(e,t){var i=t.meta.$filler;if(i){var n=e.ctx,s=i.el,r=s._view,o=s._children||[],a=i.mapper,c=r.backgroundColor||ae.global.defaultColor;a&&c&&o.length&&(ue.canvas.clipArea(n,e.chartArea),function(e,t,i,n,s,r){var o,a,c,l,u,d,h,p=t.length,b=n.spanGaps,f=[],m=[],g=0,v=0;for(e.beginPath(),o=0,a=p+!!r;o<a;++o)u=i(l=t[c=o%p]._view,c,n),d=Ui(l),h=Ui(u),d&&h?(g=f.push(l),v=m.push(u)):g&&v&&(b?(d&&f.push(l),h&&m.push(u)):(Vi(e,f,m,g,v),g=v=0,f=[],m=[]));Vi(e,f,m,g,v),e.closePath(),e.fillStyle=s,e.fill()}(n,o,a,r,c,s._loop),ue.canvas.unclipArea(n))}}},Yi=ue.noop,$i=ue.valueOrDefault;function zi(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}ae._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var i=t.datasetIndex,n=this.chart,s=n.getDatasetMeta(i);s.hidden=null===s.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return ue.isArray(t.datasets)?t.datasets.map((function(t,i){return{text:t.label,fillStyle:ue.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(i),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:i}}),this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var i=0;i<e.data.datasets.length;i++)t.push('<li><span style="background-color:'+e.data.datasets[i].backgroundColor+'"></span>'),e.data.datasets[i].label&&t.push(e.data.datasets[i].label),t.push("</li>");return t.push("</ul>"),t.join("")}});var Zi=be.extend({initialize:function(e){ue.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:Yi,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Yi,beforeSetDimensions:Yi,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Yi,beforeBuildLabels:Yi,buildLabels:function(){var e=this,t=e.options.labels||{},i=ue.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(i=i.filter((function(i){return t.filter(i,e.chart.data)}))),e.options.reverse&&i.reverse(),e.legendItems=i},afterBuildLabels:Yi,beforeFit:Yi,fit:function(){var e=this,t=e.options,i=t.labels,n=t.display,s=e.ctx,r=ue.options._parseFont(i),o=r.size,a=e.legendHitBoxes=[],c=e.minSize,l=e.isHorizontal();if(l?(c.width=e.maxWidth,c.height=n?10:0):(c.width=n?10:0,c.height=e.maxHeight),n)if(s.font=r.string,l){var u=e.lineWidths=[0],d=0;s.textAlign="left",s.textBaseline="top",ue.each(e.legendItems,(function(e,t){var n=zi(i,o)+o/2+s.measureText(e.text).width;(0===t||u[u.length-1]+n+i.padding>c.width)&&(d+=o+i.padding,u[u.length-(t>0?0:1)]=i.padding),a[t]={left:0,top:0,width:n,height:o},u[u.length-1]+=n+i.padding})),c.height+=d}else{var h=i.padding,p=e.columnWidths=[],b=i.padding,f=0,m=0,g=o+h;ue.each(e.legendItems,(function(e,t){var n=zi(i,o)+o/2+s.measureText(e.text).width;t>0&&m+g>c.height-h&&(b+=f+i.padding,p.push(f),f=0,m=0),f=Math.max(f,n),m+=g,a[t]={left:0,top:0,width:n,height:o}})),b+=f,p.push(f),c.width+=b}e.width=c.width,e.height=c.height},afterFit:Yi,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,i=t.labels,n=ae.global,s=n.defaultColor,r=n.elements.line,o=e.width,a=e.lineWidths;if(t.display){var c,l=e.ctx,u=$i(i.fontColor,n.defaultFontColor),d=ue.options._parseFont(i),h=d.size;l.textAlign="left",l.textBaseline="middle",l.lineWidth=.5,l.strokeStyle=u,l.fillStyle=u,l.font=d.string;var p=zi(i,h),b=e.legendHitBoxes,f=e.isHorizontal();c=f?{x:e.left+(o-a[0])/2+i.padding,y:e.top+i.padding,line:0}:{x:e.left+i.padding,y:e.top+i.padding,line:0};var m=h+i.padding;ue.each(e.legendItems,(function(n,u){var d=l.measureText(n.text).width,g=p+h/2+d,v=c.x,C=c.y;f?u>0&&v+g+i.padding>e.left+e.minSize.width&&(C=c.y+=m,c.line++,v=c.x=e.left+(o-a[c.line])/2+i.padding):u>0&&C+m>e.top+e.minSize.height&&(v=c.x=v+e.columnWidths[c.line]+i.padding,C=c.y=e.top+i.padding,c.line++),function(e,i,n){if(!(isNaN(p)||p<=0)){l.save();var o=$i(n.lineWidth,r.borderWidth);if(l.fillStyle=$i(n.fillStyle,s),l.lineCap=$i(n.lineCap,r.borderCapStyle),l.lineDashOffset=$i(n.lineDashOffset,r.borderDashOffset),l.lineJoin=$i(n.lineJoin,r.borderJoinStyle),l.lineWidth=o,l.strokeStyle=$i(n.strokeStyle,s),l.setLineDash&&l.setLineDash($i(n.lineDash,r.borderDash)),t.labels&&t.labels.usePointStyle){var a=p*Math.SQRT2/2;ue.canvas.drawPoint(l,n.pointStyle,a,e+p/2,i+h/2)}else 0!==o&&l.strokeRect(e,i,p,h),l.fillRect(e,i,p,h);l.restore()}}(v,C,n),b[u].left=v,b[u].top=C,function(e,t,i,n){var s=h/2,r=p+s+e,o=t+s;l.fillText(i.text,r,o),i.hidden&&(l.beginPath(),l.lineWidth=2,l.moveTo(r,o),l.lineTo(r+n,o),l.stroke())}(v,C,n,d),f?c.x+=g+i.padding:c.y+=m}))}},_getLegendItemAt:function(e,t){var i,n,s,r=this;if(e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom)for(s=r.legendHitBoxes,i=0;i<s.length;++i)if(e>=(n=s[i]).left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height)return r.legendItems[i];return null},handleEvent:function(e){var t,i=this,n=i.options,s="mouseup"===e.type?"click":e.type;if("mousemove"===s){if(!n.onHover&&!n.onLeave)return}else{if("click"!==s)return;if(!n.onClick)return}t=i._getLegendItemAt(e.x,e.y),"click"===s?t&&n.onClick&&n.onClick.call(i,e.native,t):(n.onLeave&&t!==i._hoveredItem&&(i._hoveredItem&&n.onLeave.call(i,e.native,i._hoveredItem),i._hoveredItem=t),n.onHover&&t&&n.onHover.call(i,e.native,t))}});function Ki(e,t){var i=new Zi({ctx:e.ctx,options:t,chart:e});Ct.configure(e,i,t),Ct.addBox(e,i),e.legend=i}var qi={id:"legend",_element:Zi,beforeInit:function(e){var t=e.options.legend;t&&Ki(e,t)},beforeUpdate:function(e){var t=e.options.legend,i=e.legend;t?(ue.mergeIf(t,ae.global.legend),i?(Ct.configure(e,i,t),i.options=t):Ki(e,t)):i&&(Ct.removeBox(e,i),delete e.legend)},afterEvent:function(e,t){var i=e.legend;i&&i.handleEvent(t)}},Ji=ue.noop;ae._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Qi=be.extend({initialize:function(e){ue.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:Ji,update:function(e,t,i){var n=this;return n.beforeUpdate(),n.maxWidth=e,n.maxHeight=t,n.margins=i,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n.beforeBuildLabels(),n.buildLabels(),n.afterBuildLabels(),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate(),n.minSize},afterUpdate:Ji,beforeSetDimensions:Ji,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Ji,beforeBuildLabels:Ji,buildLabels:Ji,afterBuildLabels:Ji,beforeFit:Ji,fit:function(){var e=this,t=e.options,i=t.display,n=e.minSize,s=ue.isArray(t.text)?t.text.length:1,r=ue.options._parseFont(t),o=i?s*r.lineHeight+2*t.padding:0;e.isHorizontal()?(n.width=e.maxWidth,n.height=o):(n.width=o,n.height=e.maxHeight),e.width=n.width,e.height=n.height},afterFit:Ji,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,i=e.options;if(i.display){var n,s,r,o=ue.options._parseFont(i),a=o.lineHeight,c=a/2+i.padding,l=0,u=e.top,d=e.left,h=e.bottom,p=e.right;t.fillStyle=ue.valueOrDefault(i.fontColor,ae.global.defaultFontColor),t.font=o.string,e.isHorizontal()?(s=d+(p-d)/2,r=u+c,n=p-d):(s="left"===i.position?d+c:p-c,r=u+(h-u)/2,n=h-u,l=Math.PI*("left"===i.position?-.5:.5)),t.save(),t.translate(s,r),t.rotate(l),t.textAlign="center",t.textBaseline="middle";var b=i.text;if(ue.isArray(b))for(var f=0,m=0;m<b.length;++m)t.fillText(b[m],0,f,n),f+=a;else t.fillText(b,0,0,n);t.restore()}}});function en(e,t){var i=new Qi({ctx:e.ctx,options:t,chart:e});Ct.configure(e,i,t),Ct.addBox(e,i),e.titleBlock=i}var tn={},nn=Hi,sn=qi,rn={id:"title",_element:Qi,beforeInit:function(e){var t=e.options.title;t&&en(e,t)},beforeUpdate:function(e){var t=e.options.title,i=e.titleBlock;t?(ue.mergeIf(t,ae.global.title),i?(Ct.configure(e,i,t),i.options=t):en(e,t)):i&&(Ct.removeBox(e,i),delete e.titleBlock)}};for(var on in tn.filler=nn,tn.legend=sn,tn.title=rn,$t.helpers=ue,function(){function e(e,t,i){var n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[i])):n=e,n}function t(e){return null!=e&&"none"!==e}function i(i,n,s){var r=document.defaultView,o=ue._getParentNode(i),a=r.getComputedStyle(i)[n],c=r.getComputedStyle(o)[n],l=t(a),u=t(c),d=Number.POSITIVE_INFINITY;return l||u?Math.min(l?e(a,i,s):d,u?e(c,o,s):d):"none"}ue.where=function(e,t){if(ue.isArray(e)&&Array.prototype.filter)return e.filter(t);var i=[];return ue.each(e,(function(e){t(e)&&i.push(e)})),i},ue.findIndex=Array.prototype.findIndex?function(e,t,i){return e.findIndex(t,i)}:function(e,t,i){i=void 0===i?e:i;for(var n=0,s=e.length;n<s;++n)if(t.call(i,e[n],n,e))return n;return-1},ue.findNextWhere=function(e,t,i){ue.isNullOrUndef(i)&&(i=-1);for(var n=i+1;n<e.length;n++){var s=e[n];if(t(s))return s}},ue.findPreviousWhere=function(e,t,i){ue.isNullOrUndef(i)&&(i=e.length);for(var n=i-1;n>=0;n--){var s=e[n];if(t(s))return s}},ue.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ue.almostEquals=function(e,t,i){return Math.abs(e-t)<i},ue.almostWhole=function(e,t){var i=Math.round(e);return i-t<e&&i+t>e},ue.max=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.max(e,t)}),Number.NEGATIVE_INFINITY)},ue.min=function(e){return e.reduce((function(e,t){return isNaN(t)?e:Math.min(e,t)}),Number.POSITIVE_INFINITY)},ue.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},ue.log10=Math.log10?function(e){return Math.log10(e)}:function(e){var t=Math.log(e)*Math.LOG10E,i=Math.round(t);return e===Math.pow(10,i)?i:t},ue.toRadians=function(e){return e*(Math.PI/180)},ue.toDegrees=function(e){return e*(180/Math.PI)},ue._decimalPlaces=function(e){if(ue.isFinite(e)){for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i}},ue.getAngleFromPoint=function(e,t){var i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*Math.PI&&(r+=2*Math.PI),{angle:r,distance:s}},ue.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},ue.aliasPixel=function(e){return e%2==0?0:.5},ue._alignPixel=function(e,t,i){var n=e.currentDevicePixelRatio,s=i/2;return Math.round((t-s)*n)/n+s},ue.splineCurve=function(e,t,i,n){var s=e.skip?t:e,r=t,o=i.skip?t:i,a=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),c=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),l=a/(a+c),u=c/(a+c),d=n*(l=isNaN(l)?0:l),h=n*(u=isNaN(u)?0:u);return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}},ue.EPSILON=Number.EPSILON||1e-14,ue.splineCurveMonotone=function(e){var t,i,n,s,r,o,a,c,l,u=(e||[]).map((function(e){return{model:e._model,deltaK:0,mK:0}})),d=u.length;for(t=0;t<d;++t)if(!(n=u[t]).model.skip){if(i=t>0?u[t-1]:null,(s=t<d-1?u[t+1]:null)&&!s.model.skip){var h=s.model.x-n.model.x;n.deltaK=0!==h?(s.model.y-n.model.y)/h:0}n.mK=!i||i.model.skip?n.deltaK:!s||s.model.skip?i.deltaK:this.sign(i.deltaK)!==this.sign(n.deltaK)?0:(i.deltaK+n.deltaK)/2}for(t=0;t<d-1;++t)s=u[t+1],(n=u[t]).model.skip||s.model.skip||(ue.almostEquals(n.deltaK,0,this.EPSILON)?n.mK=s.mK=0:(r=n.mK/n.deltaK,o=s.mK/n.deltaK,(c=Math.pow(r,2)+Math.pow(o,2))<=9||(a=3/Math.sqrt(c),n.mK=r*a*n.deltaK,s.mK=o*a*n.deltaK)));for(t=0;t<d;++t)(n=u[t]).model.skip||(s=t<d-1?u[t+1]:null,(i=t>0?u[t-1]:null)&&!i.model.skip&&(n.model.controlPointPreviousX=n.model.x-(l=(n.model.x-i.model.x)/3),n.model.controlPointPreviousY=n.model.y-l*n.mK),s&&!s.model.skip&&(n.model.controlPointNextX=n.model.x+(l=(s.model.x-n.model.x)/3),n.model.controlPointNextY=n.model.y+l*n.mK))},ue.nextItem=function(e,t,i){return i?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},ue.previousItem=function(e,t,i){return i?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},ue.niceNum=function(e,t){var i=Math.floor(ue.log10(e)),n=e/Math.pow(10,i);return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*Math.pow(10,i)},ue.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},ue.getRelativePosition=function(e,t){var i,n,s=e.originalEvent||e,r=e.target||e.srcElement,o=r.getBoundingClientRect(),a=s.touches;a&&a.length>0?(i=a[0].clientX,n=a[0].clientY):(i=s.clientX,n=s.clientY);var c=parseFloat(ue.getStyle(r,"padding-left")),l=parseFloat(ue.getStyle(r,"padding-top")),u=parseFloat(ue.getStyle(r,"padding-right")),d=parseFloat(ue.getStyle(r,"padding-bottom")),h=o.bottom-o.top-l-d;return{x:i=Math.round((i-o.left-c)/(o.right-o.left-c-u)*r.width/t.currentDevicePixelRatio),y:n=Math.round((n-o.top-l)/h*r.height/t.currentDevicePixelRatio)}},ue.getConstraintWidth=function(e){return i(e,"max-width","clientWidth")},ue.getConstraintHeight=function(e){return i(e,"max-height","clientHeight")},ue._calculatePadding=function(e,t,i){return(t=ue.getStyle(e,t)).indexOf("%")>-1?i*parseInt(t,10)/100:parseInt(t,10)},ue._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},ue.getMaximumWidth=function(e){var t=ue._getParentNode(e);if(!t)return e.clientWidth;var i=t.clientWidth,n=i-ue._calculatePadding(t,"padding-left",i)-ue._calculatePadding(t,"padding-right",i),s=ue.getConstraintWidth(e);return isNaN(s)?n:Math.min(n,s)},ue.getMaximumHeight=function(e){var t=ue._getParentNode(e);if(!t)return e.clientHeight;var i=t.clientHeight,n=i-ue._calculatePadding(t,"padding-top",i)-ue._calculatePadding(t,"padding-bottom",i),s=ue.getConstraintHeight(e);return isNaN(s)?n:Math.min(n,s)},ue.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},ue.retinaScale=function(e,t){var i=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==i){var n=e.canvas,s=e.height,r=e.width;n.height=s*i,n.width=r*i,e.ctx.scale(i,i),n.style.height||n.style.width||(n.style.height=s+"px",n.style.width=r+"px")}},ue.fontString=function(e,t,i){return t+" "+e+"px "+i},ue.longestText=function(e,t,i,n){var s=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},r=n.garbageCollect=[],n.font=t),e.font=t;var o=0;ue.each(i,(function(t){null!=t&&!0!==ue.isArray(t)?o=ue.measureText(e,s,r,o,t):ue.isArray(t)&&ue.each(t,(function(t){null==t||ue.isArray(t)||(o=ue.measureText(e,s,r,o,t))}))}));var a=r.length/2;if(a>i.length){for(var c=0;c<a;c++)delete s[r[c]];r.splice(0,a)}return o},ue.measureText=function(e,t,i,n,s){var r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n},ue.numberOfLabelLines=function(e){var t=1;return ue.each(e,(function(e){ue.isArray(e)&&e.length>t&&(t=e.length)})),t},ue.color=$?function(e){return e instanceof CanvasGradient&&(e=ae.global.defaultColor),$(e)}:function(e){return console.error("Color.js not found!"),e},ue.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:ue.color(e).saturate(.5).darken(.1).rgbString()}}(),$t._adapters=Kt,$t.Animation=me,$t.animationService=ge,$t.controllers=at,$t.DatasetController=Se,$t.defaults=ae,$t.Element=be,$t.elements=Xe,$t.Interaction=bt,$t.layouts=Ct,$t.platform=_t,$t.plugins=Rt,$t.Scale=ii,$t.scaleService=Lt,$t.Ticks=qt,$t.Tooltip=Bt,$t.helpers.each(Mi,(function(e,t){$t.scaleService.registerScaleType(t,e,e._defaults)})),tn)tn.hasOwnProperty(on)&&$t.plugins.register(tn[on]);$t.platform.initialize();var an=$t;return"undefined"!=typeof window&&(window.Chart=$t),$t.Chart=$t,$t.Legend=tn.legend._element,$t.Title=tn.title._element,$t.pluginService=$t.plugins,$t.PluginBase=$t.Element.extend({}),$t.canvasHelpers=$t.helpers.canvas,$t.layoutService=$t.layouts,$t.LinearScaleBase=ri,$t.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],(function(e){$t[e]=function(t,i){return new $t(t,$t.helpers.merge(i||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}})),an}(function(){try{return i("wd/R")}catch(e){}}())},MPSC:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("pLZG"),s=i("1G5W"),r=i("fXoL"),o=i("xoOP"),a=i("lBcp"),c=i("XNiG"),l=i("1Tmk"),u=i("lGQG"),d=i("zDGq"),h=i("LfE4"),p=i("V3bs"),b=i("3Pt+"),f=i("ofXK"),m=i("sYmb"),g=i("okBH");const v=["searchEl"];function C(e,t){if(1&e){const e=r.Yb();r.Xb(0,"a",9),r.jc("click",(function(){return r.Oc(e),r.nc().searchInput=""})),r.Sb(1,"img",10),r.Wb()}}function E(e,t){1&e&&(r.Vb(0),r.Xb(1,"div",15),r.Zc(2),r.oc(3,"translate"),r.Wb(),r.Xb(4,"div",16),r.Zc(5),r.oc(6,"translate"),r.Wb(),r.Ub()),2&e&&(r.Cb(2),r.ad(r.pc(3,2,"SHARED_MODULES.TAG_DROPDOWN.NO_TAGS_LABEL")),r.Cb(3),r.ad(r.pc(6,4,"GLOBAL.START_TYPING_LABEL")))}const w=function(e){return{search:e}};function S(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",15),r.Zc(1),r.oc(2,"translate"),r.Wb(),r.Xb(3,"div",16),r.Zc(4),r.oc(5,"translate"),r.Xb(6,"a",17),r.jc("click",(function(){return r.Oc(e),r.nc(2).createNewTag()})),r.Zc(7),r.oc(8,"translate"),r.Wb(),r.Wb()}if(2&e){const e=r.nc(2);r.Cb(1),r.ad(r.pc(2,3,0===e.allTags.length?"SHARED_MODULES.TAG_DROPDOWN.NO_TAGS_LABEL":"SHARED_MODULES.TAG_DROPDOWN.NO_MATCHING_TAGS_INFO")),r.Cb(3),r.bd("",r.pc(5,5,"GLOBAL.CREATE_ENTITY_LABEL")," "),r.Cb(3),r.ad(r.qc(8,7,"SHARED_MODULES.TAG_DROPDOWN.CREATE_TAG",r.Bc(10,w,"'"+e.searchInput+"'")))}}function y(e,t){if(1&e&&(r.Vb(0),r.Xb(1,"div",11),r.Xb(2,"div",12),r.Xb(3,"div",13),r.Xc(4,E,7,6,"ng-container",6),r.Xc(5,S,9,12,"ng-template",null,14,r.Yc),r.Wb(),r.Wb(),r.Wb(),r.Ub()),2&e){const e=r.Lc(6),t=r.nc();r.Cb(4),r.wc("ngIf",0===t.allTags.length&&!t.searchInput)("ngIfElse",e)}}function O(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",21),r.Xb(1,"div",22),r.Xb(2,"input",23),r.jc("keyup.enter",(function(){const e=t.$implicit;return e.selected=!e.selected}))("ngModelChange",(function(i){return r.Oc(e),t.$implicit.selected=i}))("ngModelChange",(function(){return r.Oc(e),r.nc(2).isModelChanged=!0})),r.Wb(),r.Xb(3,"label",24),r.Xb(4,"div",25),r.Zc(5),r.Wb(),r.Wb(),r.Wb(),r.Wb()}if(2&e){const e=t.$implicit;r.Cb(2),r.yc("id","checkbox_",e.id,""),r.wc("ngModel",e.selected),r.Cb(1),r.yc("for","checkbox_",e.id,""),r.Cb(2),r.ad(e.name)}}function A(e,t){if(1&e&&(r.Xb(0,"div",11),r.Xb(1,"div",18),r.Xb(2,"div",19),r.Xc(3,O,6,4,"div",20),r.oc(4,"sortBy"),r.Wb(),r.Wb(),r.Wb()),2&e){const e=r.nc();r.Cb(3),r.wc("ngForOf",r.qc(4,2,e.filteredTags,e.sortByNameMapper))("ngForTrackBy",e.trackByFn)}}let k=(()=>{class e{constructor(e,t,i,n,s){this.tagService=e,this.workspaceService=t,this.authService=i,this.keyboardService=n,this.cd=s,this.close=new r.n,this.placeholder="SHARED_MODULES.TAG_DROPDOWN.PLACEHOLDER_LABEL",this.selectedAll=!1,this.unsubscribe$=new c.a,this.mappedTags=[],this.initSelectedIds=[],this.sortByNameMapper=e=>e.name}set entryTags(e){this._entryTags=e,this.initTags()}get entryTags(){return this._entryTags}set entryTagIds(e){this._entryTagIds=e,this.initTags()}get entryTagIds(){return this._entryTagIds}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.isAdmin=this.authService.isAdminOrOwner(),this.subscribeToAllTags(),this.setSelectedIds(),this.ctrlEnter()}subscribeToAllTags(){this.tagService.tagsBehavior$.pipe(Object(n.a)(e=>null!==e),Object(s.a)(this.unsubscribe$)).subscribe(e=>{e&&(this.allTags=e,this.initTags())}),this.hasAllTags()||this.tagService.getAllTags(h.a.ACTIVE)}hasAllTags(){if(!this.allTags)return!1;const e=this.allTags.map(e=>e.id);return this.initSelectedIds.every(t=>e.indexOf(t)>-1)}ngAfterViewInit(){this.setFocusToInput()}setFocusToInput(){this.searchEl&&this.searchEl.nativeElement.focus()}ctrlEnter(){this.keyboardService.keyboardCtrlEnter$.pipe(Object(s.a)(this.unsubscribe$)).subscribe(()=>{this.allTags&&this.filteredTags&&0===this.filteredTags.length&&(this.isAdmin||!this.workspace.onlyAdminsCreateTag)&&this.createNewTag()})}createNewTag(){if(!this.searchInput)return;const e=this.searchInput.trim();this.tagService.create(e).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{this.mappedTags.push({id:e.id,name:e.name,selected:!0}),this.isModelChanged=!0,this.searchInput="",this.allTags.push(e),this.cd.detectChanges()})}get filteredTags(){return Object(o.j)(this.mappedTags,this.searchInput,"name")}initTags(){if(!this.allTags)return;this.setSelectedIds();const e=[];this.allTags.forEach(t=>{e.push({id:t.id,name:t.name,selected:this.initSelectedIds.indexOf(t.id)>-1})}),this.mappedTags=e,this.cd.detectChanges()}setSelectedIds(){this.entryTags?this.initSelectedIds=this.entryTags.map(e=>e.id):this.entryTagIds&&(this.initSelectedIds=this.entryTagIds.slice(0))}closeDropdown(){if(!this.isModelChanged)return;const e=this.mappedTags.filter(e=>e.selected).map(e=>e.id);if(!this.allTags||Object(o.c)(this.initSelectedIds,e))return;const t=this.allTags.filter(t=>e.indexOf(t.id)>-1);this.close.emit(Object(o.f)(t))}ngOnDestroy(){this.closeDropdown(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}trackByFn(e,t){return t.id}get numberOfSelected(){return this.mappedTags.filter(e=>e.selected).length||0}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(a.a),r.Rb(l.a),r.Rb(u.a),r.Rb(d.a),r.Rb(r.h))},e.\u0275cmp=r.Lb({type:e,selectors:[["tag-dropdown"]],viewQuery:function(e,t){var i;1&e&&r.gd(v,!0),2&e&&r.Kc(i=r.kc())&&(t.searchEl=i.first)},inputs:{entryTags:"entryTags",entryTagIds:"entryTagIds",placeholder:"placeholder"},outputs:{close:"close"},decls:11,vars:7,consts:[["arrowNavigation",""],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],["type","text","tabindex","0","autocomplete","off","autofocus","",1,"cl-form-control","cl-input-has-clear",3,"ngModel","ngModelChange"],["searchEl",""],["class","cl-clear-input","doNotCloseDropdown","",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["tagList",""],["dropdownClose","","tabindex","0"],["doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""],[1,"cl-scroll-area"],[1,"cl-dropdown-menu-sub-header"],[1,"cl-dropdown-item-padding",2,"overflow","hidden"],["noMatching",""],[1,""],[1,"cl-h6","cl-mb-0"],[1,"cl-color-blue",3,"click"],[1,"cl-dropdown-section-wrapper"],["tabindex","0",1,"cl-dropdown-section","cl-no-focus-tabindex"],["class","cl-dropdown-item cl-dropdown-item-checkbox",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","tabindex","-1",1,"cl-custom-control-input",3,"ngModel","id","keyup.enter","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"]],template:function(e,t){if(1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"input",3,4),r.jc("ngModelChange",(function(e){return t.searchInput=e})),r.oc(5,"translate"),r.Wb(),r.Xc(6,C,2,0,"a",5),r.Wb(),r.Wb(),r.Xc(7,y,7,2,"ng-container",6),r.Xc(8,A,5,5,"ng-template",null,7,r.Yc),r.Sb(10,"span",8),r.Wb()),2&e){const e=r.Lc(9);r.Cb(3),r.wc("ngModel",t.searchInput),r.Db("placeholder",r.pc(5,5,t.placeholder)),r.Cb(3),r.wc("ngIf",t.searchInput),r.Cb(1),r.wc("ngIf",t.allTags&&0===(null==t.filteredTags?null:t.filteredTags.length)&&(t.isAdmin||!t.workspace.onlyAdminsCreateTag))("ngIfElse",e)}},directives:[p.a,b.c,b.s,b.v,f.u,f.t,b.a],pipes:[m.e,g.a],styles:[""],changeDetection:0}),e})()},MXpx:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e&&e.length>0&&e.some(e=>!!e.description||e.tags&&!!e.tags.length||e.customFieldValues&&!!e.customFieldValues.length)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"checkIfEditedEntries",type:e,pure:!0}),e})()},MtJD:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("dlKe"),a=i("hT48"),c=i("LNDd"),l=i("1kSV"),u=i("9Trn"),d=i("sYmb"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.b,a.a,c.a,l.db,u.a,d.d]]}),e})()},Mxlh:function(e,t,i){"use strict";t.ObjectUnsubscribedError=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},N2Ql:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return Number(e/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" "+t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"localizeEarningWithCurrency",type:e,pure:!0}),e})()},NDhe:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("LPYB"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.b]]}),e})()},"NHP+":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("XNiG"),s=i("quSY");class r extends n.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),s.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}},NTZZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("qrIO"),s=i("rnVd");class r{constructor(e,t){this._dateRangeStart=e&&e.dateRangeStart,this._dateRangeEnd=e&&e.dateRangeEnd,this._dateRangeType=e&&e.dateRangeType?s.a[e&&e.dateRangeType]:s.a[t],this._zoomLevel=e&&e.zoomLevel,this._auditFilter=e&&e.detailedFilter&&e.detailedFilter.auditFilter,this._rounding=e&&e.rounding,this._amountOptions=(null==e?void 0:e.amounts)?e.amounts:(null==e?void 0:e.amountShown)!=n.a.HIDE_AMOUNT?[null==e?void 0:e.amountShown]:[],this._rtl=e&&e.rtl,this._sortOrder=e&&e.sortOrder,this._sortColumn=e&&(e.detailedFilter&&e.detailedFilter.sortColumn||e.summaryFilter&&e.summaryFilter.sortColumn),this._page=e&&e.detailedFilter&&e.detailedFilter.page,this._pageSize=e&&e.detailedFilter&&e.detailedFilter.pageSize,this._billable=e&&e.billable,this._groups=e&&e.summaryFilter&&e.summaryFilter.groups,this._weeklyGroup=e&&e.weeklyFilter&&e.weeklyFilter.group,this._weeklySubgroup=e&&e.weeklyFilter&&e.weeklyFilter.subgroup,this._timeZone=e&&e.timeZone,this._timeFormat=e&&e.timeFormat,this._dateFormat=e&&e.dateFormat,this._weekStart=e&&e.weekStart||"MONDAY",this._showEstimate=e&&e.showEstimate}get dateRangeStart(){return this._dateRangeStart}set dateRangeStart(e){this._dateRangeStart=e}get showEstimate(){return this._showEstimate}set showEstimate(e){this._showEstimate=e}get dateRangeEnd(){return this._dateRangeEnd}set dateRangeEnd(e){this._dateRangeEnd=e}get dateRangeType(){return this._dateRangeType}set dateRangeType(e){this._dateRangeType=e}get zoomLevel(){return this._zoomLevel}set zoomLevel(e){this._zoomLevel=e}get auditFilter(){return this._auditFilter}set auditFilter(e){this._auditFilter=e}get rounding(){return this._rounding}set rounding(e){this._rounding=e}get amountOptions(){return this._amountOptions}set amountOptions(e){this._amountOptions=e}get rtl(){return this._rtl}set rtl(e){this._rtl=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get sortColumn(){return this._sortColumn}set sortColumn(e){this._sortColumn=e}get page(){return this._page}set page(e){this._page=e}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=e}get billable(){return this._billable}get groups(){return this._groups}get weeklyGroup(){return this._weeklyGroup}get weeklySubgroup(){return this._weeklySubgroup}get timeZone(){return this._timeZone}set timeZone(e){this._timeZone=e}get timeFormat(){return this._timeFormat}set timeFormat(e){this._timeFormat=e}get dateFormat(){return this._dateFormat}set dateFormat(e){this._dateFormat=e}get weekStart(){return this._weekStart}set weekStart(e){this._weekStart=e}}class o{constructor(e){this._id=e&&e.id,this._name=e&&e.name,this._email=e&&e.email,this._timeZone=e&&e.timeZone,this._dateFormat=e&&e.dateFormat,this._timeFormat=e&&e.timeFormat,this._weekStart=e&&e.weekStart?e.weekStart:"MONDAY"}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get email(){return this._email}set email(e){this._email=e}get timeZone(){return this._timeZone}set timeZone(e){this._timeZone=e}get dateFormat(){return this._dateFormat}set dateFormat(e){this._dateFormat=e}get timeFormat(){return this._timeFormat}set timeFormat(e){this._timeFormat=e}get weekStart(){return this._weekStart}set weekStart(e){this._weekStart=e}}var a=i("kwab"),c=i("Y9C3");class l{constructor(e){this._id=e&&e.id,this._name=e&&e.name||e.reportName,this._isPublic=e&&e.isPublic,this._visibleToUsers=e&&e.visibleToUsers,this._visibleToUserGroups=e&&e.visibleToUserGroups,this._fixedDate=e&&e.fixedDate,this._activeBillableHours=e&&e.activeBillableHours,this._onlyAdminsCanChangeBillableStatus=e&&e.onlyAdminsCanChangeBillableStatus,this._scheduledReport=e&&e.scheduledReport?new c.a(e.scheduledReport):null,this._type=e&&e.type,this._userId=e&&e.userId,this._workspaceId=e&&e.workspaceId,this._filters=new r(e&&e.filter,e&&e.dateRangeType),this._user=new o(e&&e.user),this._workspace=e&&new a.a(e.workspace),this._subscriptionPlan=e&&e.subscriptionPlan,this._isAdminOrOwner=e&&e.isAdminOrOwner,this._link=this.getLink(e&&e.id)}getLink(e){return`${window.location.protocol}//${window.location.host}/shared/${e}`}get id(){return this._id}set id(e){this._id=e}get link(){return this._link}set link(e){this._link=e}get name(){return this._name}set name(e){this._name=e}get isPublic(){return this._isPublic}set isPublic(e){this._isPublic=e}get onlyAdminsCanChangeBillableStatus(){return this._onlyAdminsCanChangeBillableStatus}set onlyAdminsCanChangeBillableStatus(e){this._onlyAdminsCanChangeBillableStatus=e}get activeBillableHours(){return this._activeBillableHours}set activeBillableHours(e){this._activeBillableHours=e}get visibleToUsers(){return this._visibleToUsers}set visibleToUsers(e){this._visibleToUsers=e}get visibleToUserGroups(){return this._visibleToUserGroups}set visibleToUserGroups(e){this._visibleToUserGroups=e}get fixedDate(){return this._fixedDate}set fixedDate(e){this._fixedDate=e}get scheduledReport(){return this._scheduledReport}set scheduledReport(e){this._scheduledReport=e}get type(){return this._type}set type(e){this._type=e}get userId(){return this._userId}set userId(e){this._userId=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get filters(){return this._filters}set filters(e){this._filters=e}get user(){return this._user}set user(e){this._user=e}get workspace(){return this._workspace}set workspace(e){this._workspace=e}get subscriptionPlan(){return this._subscriptionPlan}set subscriptionPlan(e){this._subscriptionPlan=e}get isAdminOrOwner(){return this._isAdminOrOwner}set isAdminOrOwner(e){this._isAdminOrOwner=e}}},Nqck:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("ofXK"),s=i("3Pt+"),r=i("R9Cn"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C]]}),e})();var c=i("9Trn"),l=i("sYmb");let u=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.b,a,c.a,l.d]]}),e})()},Nu56:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("+/oa"),s=i("fXoL"),r=i("ofXK"),o=i("okBH"),a=i("sYmb");function c(e,t){if(1&e&&(s.Xb(0,"span"),s.Zc(1),s.Wb()),2&e){const e=t.$implicit,i=t.last;s.Cb(1),s.cd(" ",e.name,"",i?"":", "," ")}}function l(e,t){if(1&e&&(s.Xb(0,"span",2),s.Xc(1,c,2,2,"span",3),s.oc(2,"sortBy"),s.Wb()),2&e){const e=s.nc();s.Db("title",e.attributeTitle),s.Cb(1),s.wc("ngForOf",s.qc(2,3,e.tags,e.sortByNameMapper))("ngForTrackBy",e.trackByFn)}}function u(e,t){1&e&&(s.Xb(0,"div",5),s.Xb(1,"a",6),s.Zc(2),s.oc(3,"translate"),s.Wb(),s.Wb()),2&e&&(s.Cb(2),s.ad(s.pc(3,1,"GLOBAL.ADD_TAGS_LABEL")))}function d(e,t){if(1&e&&s.Xc(0,u,4,3,"div",4),2&e){const e=s.nc();s.wc("ngIf",!e.hideAddingTags)}}let h=(()=>{class e{constructor(){this.sortByNameMapper=e=>e.name}set tags(e){this._tags=e,this.attributeTitle="",e&&(this.attributeTitle=Object(n.a)(e))}get tags(){return this._tags}ngOnInit(){}trackByFn(e,t){return t.id}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Lb({type:e,selectors:[["tag-names-text-only"]],inputs:{tags:"tags",hideAddingTags:"hideAddingTags"},decls:3,vars:2,consts:[["class","cl-badge cl-badge-tag cl-cut-text",4,"ngIf","ngIfElse"],["tagIcon",""],[1,"cl-badge","cl-badge-tag","cl-cut-text"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cl-dropdown-toggle cl-no-arrow",4,"ngIf"],[1,"cl-dropdown-toggle","cl-no-arrow"],[1,"cl-btn","cl-btn-sm","cl-btn-outline-light"]],template:function(e,t){if(1&e&&(s.Xc(0,l,3,6,"span",0),s.Xc(1,d,1,1,"ng-template",null,1,s.Yc)),2&e){const e=s.Lc(2);s.wc("ngIf",(null==t.tags?null:t.tags.length)>0)("ngIfElse",e)}},directives:[r.u,r.t],pipes:[o.a,a.e],encapsulation:2,changeDetection:0}),e})()},Oieg:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._name=e.name,this._id=e.id,this._workspaceId=e.workspaceId,this._userIds=e.userIds}static findGroupOfUser(e,t){return e.filter(e=>-1!==e.userIds.indexOf(t))}static clone(e){if(!e)return new n;const t={};return t.name=e.name,t.id=e.id,t.workspaceId=e.workspaceId,t.userIds=[...e.userIds],t.isNew=e.isNew,t.userNames=e.userNames,new n(t)}get name(){return this._name}set name(e){this._name=e}get id(){return this._id}set id(e){this._id=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get userIds(){return this._userIds}set userIds(e){this._userIds=e}get isNew(){return this._isNew}set new(e){this._isNew=e}get userNames(){return this._userNames}set userNames(e){this._userNames=e}}},"Q+u6":function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("1G5W"),s=i("fXoL"),r=i("Jmk/"),o=i("NHP+"),a=i("zDGq"),c=i("LfE4"),l=i("1Tmk"),u=i("sYmb"),d=i("ofXK"),h=i("okBH");const p=["searchField"];function b(e,t){if(1&e){const e=s.Yb();s.Xb(0,"a",9),s.jc("click",(function(){s.Oc(e);const t=s.nc(),i=s.Lc(4);return i.value="",t.filterQuery(i),i.focus()})),s.Sb(1,"img",10),s.Wb()}}function f(e,t){1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"translate"),s.Ub()),2&e&&(s.Cb(1),s.bd(" ",s.pc(2,1,"PROJECTS.SHARED.WITHOUT_CLIENT_PLACEHOLDER")," "))}function m(e,t){1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"translate"),s.Ub()),2&e&&(s.Cb(1),s.bd(" ",s.pc(2,1,"PROJECTS.SHARED.WITHOUT_CATEGORY_PLACEHOLDER")," "))}function g(e,t){1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"translate"),s.Ub()),2&e&&(s.Cb(1),s.bd(" ",s.pc(2,1,"PROJECTS.SHARED.WITHOUT_DEPARTMENT_PLACEHOLDER")," "))}const v=function(e){return{projectGroupingLabel:e}};function C(e,t){if(1&e&&(s.Vb(0),s.Zc(1),s.oc(2,"translate"),s.Ub()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",s.qc(2,1,"PROJECTS.NEW_PROJECT.WITHOUT_GROUPING_LABEL_NOTIFICATION",s.Bc(4,v,e.projectGroupingLabel))," ")}}function E(e,t){if(1&e){const e=s.Yb();s.Xb(0,"li",11),s.jc("click",(function(){return s.Oc(e),s.nc().noClientChoosen()})),s.Xc(1,f,3,3,"ng-container",12),s.Xc(2,m,3,3,"ng-container",12),s.Xc(3,g,3,3,"ng-container",12),s.Xc(4,C,3,6,"ng-container",12),s.Wb()}if(2&e){const e=s.nc();s.Cb(1),s.wc("ngIf","client"===e.projectGroupingLabel),s.Cb(1),s.wc("ngIf","category"===e.projectGroupingLabel),s.Cb(1),s.wc("ngIf","department"===e.projectGroupingLabel),s.Cb(1),s.wc("ngIf","client"!==e.projectGroupingLabel&&"category"!==e.projectGroupingLabel&&"department"!==e.projectGroupingLabel)}}function w(e,t){if(1&e){const e=s.Yb();s.Vb(0),s.Xb(1,"li",13),s.jc("click",(function(){s.Oc(e);const i=t.$implicit;return s.nc().chooseItem(i)})),s.Zc(2),s.Wb(),s.Ub()}if(2&e){const e=t.$implicit;s.Cb(1),s.Db("title",e.name),s.Cb(1),s.ad(e.name)}}function S(e,t){if(1&e&&(s.Xb(0,"div"),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",s.qc(2,1,"PROJECTS.NEW_PROJECT.NO_MATCHING_GROUPING_LABEL_NOTIFICATION",s.Bc(4,v,e.groupingLabel)),"")}}function y(e,t){if(1&e&&(s.Xb(0,"div"),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",s.qc(2,1,"PROJECTS.NEW_PROJECT.NO_LABELS_NOTIFICATION",s.Bc(4,v,e.groupingLabel))," ")}}function O(e,t){1&e&&(s.Xb(0,"div",19),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.Cb(1),s.bd(" ",s.pc(2,1,"GLOBAL.START_TYPING_LABEL")," "))}const A=function(e,t){return{nameFilter:e,entity:t}};function k(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",19),s.Zc(1),s.oc(2,"translate"),s.Xb(3,"a",20),s.jc("click",(function(){s.Oc(e);const t=s.nc(2);return t.createNewClient(t.inputValue)})),s.Zc(4),s.oc(5,"translate"),s.Wb(),s.Wb()}if(2&e){const e=s.nc(2);s.Cb(1),s.bd(" ",s.pc(2,2,"GLOBAL.CREATE_ENTITY_LABEL")," "),s.Cb(3),s.bd(" ",s.qc(5,4,"PROJECTS.SHARED.CREATE_ENTITY_LABEL_2",s.Cc(7,A,"'"+e.inputValue+"'",e.groupingLabel))," ")}}function T(e,t){if(1&e&&(s.Xb(0,"div",14),s.Xb(1,"div",15),s.Xc(2,S,3,6,"div",16),s.Xc(3,y,3,6,"ng-template",null,17,s.Yc),s.Xc(5,O,3,3,"div",18),s.Xc(6,k,6,10,"div",18),s.Wb(),s.Wb()),2&e){const e=s.Lc(4),t=s.nc();s.Cb(2),s.wc("ngIf",null==t.clientsList?null:t.clientsList.length)("ngIfElse",e),s.Cb(3),s.wc("ngIf",!t.inputValue),s.Cb(1),s.wc("ngIf",t.inputValue&&t.inputValue.trim().length)}}const D=function(e){return{entity:e}};let I=(()=>{class e{constructor(e,t,i,n,r){this.clientService=e,this.keyboardService=t,this.cd=i,this.translate=n,this.workspaceService=r,this.isSelectClientOpen=new s.n,this.unsubscribe$=new o.a,this.choosenItem=new s.n,this.withoutClient=new s.n,this.sortByNameMapper=e=>e.name}ngOnInit(){this.clientsList=[],this.clientService.clients.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientsList=e,this.filteredClients=this.clientsList,this.cd.detectChanges()}),this.getAllClients(),this.clientService.client.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientsList.push(e),this.filteredClients.push(e),this.showChooseItem(e),this.chooseItem(e)}),this.clientService.createdClient.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.clientsList.push(e),this.filteredClients.push(e),this.chooseItem(e)}),this.keyboardService.keyboardCtrlEnter$.pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.filteredClients&&0===this.filteredClients.length&&this.createNewClient(this.inputValue)}),this.searchField&&this.searchField.nativeElement.focus(),this.groupingLabel=this.workspaceService.generateClientLabel(this.projectGroupingLabel)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}isSelectClientMenuOpen(){this.isSelectClientOpen.emit(!1)}getAllClients(){this.clientService.getAllClients(c.a.ACTIVE,this.workspaceId)}filterQuery(e){this.inputValue=e.value,this.filteredClients=this.clientsList.filter(e=>-1!==e.name.toLowerCase().indexOf(this.inputValue.toLowerCase()))}chooseItem(e){for(const t of this.filteredClients)t.name===e.name&&(this.showChooseItem(e),this.selectItem=e,this.isSelectClientMenuOpen())}showChooseItem(e){this.choosenItem.emit(e)}createNewClient(e){(e=e&&e.trim())&&(this.clientService.create(e,this.groupingLabel,this.workspaceId),this.isSelectClientMenuOpen())}noClientChoosen(){this.withoutClient.emit(this.translate.instant("GLOBAL.SELECT_LABEL",{label:this.projectGroupingLabel})),this.isSelectClientMenuOpen()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(r.a),s.Rb(a.a),s.Rb(s.h),s.Rb(u.f),s.Rb(l.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["select-client-dropdown"]],viewQuery:function(e,t){var i;1&e&&s.Uc(p,!0),2&e&&s.Kc(i=s.kc())&&(t.searchField=i.first)},inputs:{projectGroupingLabel:"projectGroupingLabel",workspaceId:"workspaceId",selectedId:"selectedId"},outputs:{isSelectClientOpen:"isSelectClientOpen",choosenItem:"choosenItem",withoutClient:"withoutClient"},decls:13,vars:13,consts:[[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],["type","text","tabindex","0","autocomplete","off","autofocus","",1,"cl-form-control","cl-input-has-clear",3,"placeholder","input"],["searchField",""],["class","cl-clear-input","doNotCloseDropdown","",3,"click",4,"ngIf"],[1,"cl-dropdown-menu","cl-scroll-area","cl-mt-0","cl-pt-0"],["class","cl-dropdown-item pointer",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","cl-dropdown-menu-sub-header",4,"ngIf"],["doNotCloseDropdown","",1,"cl-clear-input",3,"click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""],[1,"cl-dropdown-item","pointer",3,"click"],[4,"ngIf"],["clickCloseDropdown","",1,"cl-dropdown-item","pointer",3,"click"],[1,"cl-dropdown-menu-sub-header"],[1,"cl-dropdown-item-padding"],[4,"ngIf","ngIfElse"],["noClients",""],["class","cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-h6","cl-mb-0"],[1,"cl-color-blue","cl-text-break",3,"click"]],template:function(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div"),s.Xb(1,"div",0),s.Xb(2,"div",1),s.Xb(3,"input",2,3),s.jc("input",(function(){s.Oc(e);const i=s.Lc(4);return t.filterQuery(i)})),s.oc(5,"translate"),s.Wb(),s.Xc(6,b,2,0,"a",4),s.Wb(),s.Wb(),s.Xb(7,"div"),s.Xb(8,"ul",5),s.Xc(9,E,5,4,"li",6),s.Xc(10,w,3,2,"ng-container",7),s.oc(11,"sortBy"),s.Wb(),s.Xc(12,T,7,4,"div",8),s.Wb(),s.Wb()}if(2&e){const e=s.Lc(4);s.Cb(3),s.wc("placeholder",s.qc(5,5,"GLOBAL.ADD_FIND_PLACEHOLDER_LABEL",s.Bc(11,D,t.groupingLabel))),s.Cb(3),s.wc("ngIf",e.value),s.Cb(3),s.wc("ngIf",!t.inputValue&&t.selectedId),s.Cb(1),s.wc("ngForOf",s.qc(11,8,t.filteredClients,t.sortByNameMapper)),s.Cb(2),s.wc("ngIf",t.filteredClients&&0===t.filteredClients.length)}},directives:[d.u,d.t],pipes:[u.e,h.a],encapsulation:2}),e})()},Q1FS:function(e,t,i){"use strict";var n=i("yx2s"),s=i("Xwq/"),r=i("zfKp"),o=i("9AGB"),a=i("n3uD");function c(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var n=this.operator,r=s.toSubscriber(e,t,i);if(r.add(n?n.call(r,this.source):this.source||a.config.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),a.config.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=c(t))((function(t,n){var s;s=i.subscribe((function(t){try{e(t)}catch(i){n(i),s&&s.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[r.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:o.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=c(e))((function(e,i){var n;t.subscribe((function(e){return n=e}),(function(e){return i(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}()},QAEb:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("ofXK"),s=i("9Trn"),r=i("3Pt+"),o=i("dlKe"),a=i("9O0/"),c=i("qcnj"),l=i("iTUp"),u=i("sYmb"),d=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,r.m,r.C,u.d]]}),e})();var p=i("brRw"),b=i("ksGH");let f=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})(),m=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,r.m,l.a,o.b,b.a,a.a,h,f,u.d]]}),e})();var g=i("1kSV");let v=(()=>{class e{}return e.\u0275mod=d.Pb({type:e}),e.\u0275inj=d.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a,b.a,g.db,r.m,o.b,a.a,p.a,c.a,l.a,h,m,f,u.d]]}),e})()},QG2T:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ofXK"),s=i("sYmb"),r=i("MtJD"),o=i("9Trn"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.d,r.a,o.a]]}),e})()},QKuU:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("2Vo4"),s=i("/uUt"),r=i("fXoL");let o=(()=>{class e{constructor(e,t){this._elementRef=e,this.renderer=t,this.clickedSubject=new n.a(!1),this.clicked$=this.clickedSubject.asObservable().pipe(Object(s.a)()),this.documentClicked=e=>{this._elementRef.nativeElement.contains(e.target)||this.closeDropdown()}}clicked(e){if(this.show)e.hasAttribute("closeDropdown")&&this.closeDropdown();else{if(e.hasAttribute("doNotOpen"))return;this.show=!0,this.clickedSubject.next(this.show),this.listenerFn=this.renderer.listen(document,"click",this.documentClicked)}}ngOnDestroy(){this.removeListener()}closeDropdown(){this.show=!1,this.clickedSubject.next(this.show),this.removeListener()}removeListener(){this.listenerFn&&this.listenerFn()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(r.l),r.Rb(r.F))},e.\u0275dir=r.Mb({type:e,selectors:[["","dropdown",""]],hostBindings:function(e,t){1&e&&r.jc("click",(function(e){return t.clicked(e.target)}))},exportAs:["dropdown"]}),e})()},QTph:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("Oieg"),s=i("tk/3"),r=i("lGQG"),o=i("1Tmk"),a=i("lJxs"),c=i("k2Yt"),l=i("fXoL"),u=i("tyNb");let d=(()=>{class e{constructor(e,t,i,n){this.http=e,this.router=t,this.authService=i,this.workspaceService=n}getUserGroups(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),r=(new s.h).append("projectId",e.projectId||"").append("name",e.name||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"").append("page-size",e.limit||"");return this.http.get(`/workspaces/${i}/userGroups/full`,{params:r}).pipe(Object(a.a)(e=>(e.groups=e.groups.map(e=>new n.a(e)),e)))}getForReportFilter(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.h).append("searchValue",e.name||"").append("page",e.page||"").append("page-size",e.limit||"");return this.http.get(`/workspaces/${i}/userGroups/report-filters`,{params:n}).pipe(Object(a.a)(e=>(e.users=e.idNamePairs.map(e=>new c.a(e)),e)))}}return e.\u0275fac=function(t){return new(t||e)(l.fc(s.c),l.fc(u.d),l.fc(r.a),l.fc(o.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},Qd9e:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("ksGH"),a=i("sYmb"),c=i("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.a,a.d]]}),e})()},QeEd:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("wd/R"),s=i("xoOP"),r=i("lvCY"),o=i("5Ra6"),a=i("ZHjv"),c=i("PW4C"),l=i("Rt6l"),u=i("hkzH"),d=i("8+Zx"),h=i("lGQG"),p=i("jtSf"),b=i("hV/V"),f=i("fXoL"),m=i("sYmb");let g=(()=>{class e{constructor(e,t,i,n,s){this.timezoneConverter=e,this.uiSettingsService=t,this.authService=i,this.translate=n,this.translationStore=s}getUrlParams(e,t){e=e||{};const i=this.uiSettingsService.getStandardFilters(t),n=["SENT","NOT_SENT","ALL",null].includes(e.quickbooksSelectType)?e.quickbooksSelectType:null,o={};if(o.page=Object(s.u)(e.page)&&e.page>0?Number(e.page):1,Object(s.u)(e.pageSize)&&e.pageSize>0&&e.pageSize<=500)o.pageSize=Number(e.pageSize);else{const e=this.uiSettingsService.getSettings(c.b.DETAILED_PAGE_SIZE);o.pageSize=e||r.j}const a=new l.a(e.unit,e.compare,e.durationInput,e.audit),h=i.includes(u.e),p=h&&e.description||"",b=h&&e.withoutDescription,f=i.includes(u.h),m=f&&e.note||"",g=f&&e.withoutNote;let v;try{v=JSON.parse(e.filterOptions||null)||{}}catch(A){v={}}v[u.i.TAGS]=v[u.i.TAGS]||Object(u.p)();const C={};let E;try{E=JSON.parse(e.filterValuesData||null)||{}}catch(A){E={}}const w=e.exclude?e.exclude.split(","):[];if(w.includes(u.i.USERS_AND_GROUP)||E[u.k]||E[u.f]){const e={exclude:w.includes(u.i.USERS_AND_GROUP),map:{[u.k]:E[u.k],[u.f]:E[u.f]},options:v[u.i.USERS_AND_GROUP]||Object(u.q)()};i.includes(u.i.USERS_AND_GROUP)&&(C[u.i.USERS_AND_GROUP]=new d.a(e));const t=w.indexOf(u.i.USERS_AND_GROUP);t>-1&&w.splice(t,1),delete E[u.k],delete E[u.f]}if(E[u.a]||E[u.b]||E[u.g]){const e={map:{[u.a]:E[u.a],[u.b]:E[u.b],[u.g]:E[u.g]}};i.includes(u.i.STATUSES)&&(C[u.i.STATUSES]=new d.a(e)),delete E[u.a],delete E[u.b],delete E[u.g]}for(const s in E){if(s==u.i.USERS_AND_GROUP||s==u.i.STATUSES)continue;const e={exclude:w.includes(s),map:{[s]:E[s]},options:v[s]};i.includes(s)&&(C[s]=new d.a(e))}let S;w.forEach((e,t)=>{i.includes(e)&&!C[e]&&(C[e]=new d.a({exclude:!0}))});try{S=JSON.parse(e.customFieldParams)||[]}catch(A){S=[]}const y=this.uiSettingsService.getCustomFilters(t),O=[];return S.forEach(e=>{y.includes(e.id)&&O.push(e)}),{filterValuesData:C,description:p,note:m,withoutDescription:b,withoutNote:g,audit:a,pagination:o,customFieldParams:O,quickbooksSelectType:n}}getDateAndZoomLevel(e,t,i=!0){let r;const o=this.authService.getUser(),c=t||o.settings.weekStart;if(e&&e.start&&e.end){const t=n(e.start),i=n(e.end);r=t.isValid()&&i.isValid()&&t.isBefore(i)?{start:n(e.start),end:n(e.end)}:Object(a.d)(c,this.timezoneConverter)}else r=Object(a.d)(c,this.timezoneConverter);const l=Object(s.x)(r.start,r.end);!i&&l&&(r=Object(a.d)(c,this.timezoneConverter));const u=t||o.settings.weekStart||"MONDAY",d=Object(p.g)(r),{zoomLevel:h}=Object(p.d)(d,u,this.translate,this.translationStore);return{zoomLevel:h,dateRange:r}}}return e.\u0275fac=function(t){return new(t||e)(f.fc(o.a),f.fc(c.a),f.fc(h.a),f.fc(m.f),f.fc(b.a))},e.\u0275prov=f.Nb({token:e,factory:e.\u0275fac}),e})()},Qyj8:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("XNiG"),s=i("tk/3"),r=i("lGQG"),o=i("1Tmk"),a=i("lJxs"),c=i("Tj/N"),l=i("lvCY"),u=i("k2Yt"),d=i("FwEu"),h=i("fXoL"),p=i("tyNb");let b=(()=>{class e{constructor(e,t,i,s){this.http=e,this.router=t,this.authService=i,this.workspaceService=s,this.error=new n.a,this.users$=new n.a}getUsers(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.h).append("email",e.email||"").append("projectId",e.projectId||"").append("name",e.name||"").append("status","ALL"===e.status?"":e.status||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||l.j).append("memberships","NONE");return this.http.get(`/v1/workspaces/${i}/users/`,{params:n}).pipe(Object(a.a)(e=>e.map(e=>new c.a(e))))}getUsersByIds(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${i}/userIds/`,{userIds:e}).pipe(Object(a.a)(e=>e.map(e=>new c.a(e))))}getUsersAndUsersFromUserGroupsAssignedToProject(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.h).append("name",e.name||"").append("statuses",e.statuses||"").append("sort-column",e.sortColumn||"name").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||l.j);return this.http.get(`/users/workspaces/${i}/projects/${e.projectId}`,{params:n}).pipe(Object(a.a)(e=>e.map(e=>new c.a(e))))}getUsersWithCount(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new s.h).append("projectId",e.projectId||"").append("name",e.name||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||l.j).append("memberships","NONE");return this.http.get(`/users/workspaces/${i}/count`,{params:n}).pipe(Object(a.a)(e=>({users:e.users.map(e=>new c.a(e)),count:e.count})))}getActiveUsersInGroup(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.userGroupId,n=(new s.h).append("name",e.name||"").append("page",e.page||1).append("page-size",e.pageSize||e.limit);return this.http.get(`/users/workspaces/${t}/user-groups/${i}`,{params:n}).pipe(Object(a.a)(e=>e.map(e=>new u.a(e))))}getTeamMembers(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new s.h).append("name",e.name||"").append("page",e.page||"0").append("page-size",e.limit||l.j).append("status",d.a.ACTIVE).append("memberships","NONE");return this.http.get(`/v1/workspaces/${t}/users/`,{params:i}).pipe(Object(a.a)(e=>e.map(e=>new u.a(e))))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(s.c),h.fc(p.d),h.fc(r.a),h.fc(o.a))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac}),e})()},R9Cn:function(e,t,i){"use strict";i.d(t,"a",(function(){return Y})),i.d(t,"b",(function(){return $}));var n=i("fXoL"),s=i("ofXK");const r=["dialogPopup"],o=["hueSlider"],a=["alphaSlider"];function c(e,t){if(1&e&&n.Sb(0,"div"),2&e){const e=n.nc();n.Fb("arrow arrow-",e.cpUsePosition,""),n.Wc("top",e.arrowTop,"px")}}function l(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",26),n.jc("newValue",(function(t){return n.Oc(e),n.nc().onColorChange(t)}))("dragStart",(function(){return n.Oc(e),n.nc().onDragStart("saturation-lightness")}))("dragEnd",(function(){return n.Oc(e),n.nc().onDragEnd("saturation-lightness")})),n.Sb(1,"div",13),n.Wb()}if(2&e){const e=n.nc();n.Wc("background-color",e.hueSliderColor),n.wc("rgX",1)("rgY",1),n.Cb(1),n.Wc("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px")}}function u(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",27),n.jc("click",(function(t){n.Oc(e);const i=n.nc();return i.onAddPresetColor(t,i.selectedColor)})),n.Zc(1),n.Wb()}if(2&e){const e=n.nc();n.Eb(e.cpAddColorButtonClass),n.wc("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),n.Cb(1),n.bd(" ",e.cpAddColorButtonText," ")}}function d(e,t){1&e&&n.Sb(0,"div",28)}function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.cmykText?null:e.cmykText.a)}}function p(e,t){1&e&&(n.Xb(0,"div"),n.Zc(1,"A"),n.Wb())}function b(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",29),n.Xb(1,"div",30),n.Xb(2,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onCyanInput(t)})),n.Wb(),n.Xb(3,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onMagentaInput(t)})),n.Wb(),n.Xb(4,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onYellowInput(t)})),n.Wb(),n.Xb(5,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onBlackInput(t)})),n.Wb(),n.Xc(6,h,1,2,"input",32),n.Wb(),n.Xb(7,"div",30),n.Xb(8,"div"),n.Zc(9,"C"),n.Wb(),n.Xb(10,"div"),n.Zc(11,"M"),n.Wb(),n.Xb(12,"div"),n.Zc(13,"Y"),n.Wb(),n.Xb(14,"div"),n.Zc(15,"K"),n.Wb(),n.Xc(16,p,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Wc("display",3!==e.format?"none":"block"),n.Cb(2),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.c),n.Cb(1),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.m),n.Cb(1),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.y),n.Cb(1),n.wc("rg",100)("value",null==e.cmykText?null:e.cmykText.k),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel),n.Cb(10),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function f(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function m(e,t){1&e&&(n.Xb(0,"div"),n.Zc(1,"A"),n.Wb())}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",35),n.Xb(1,"div",30),n.Xb(2,"input",36),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onHueInput(t)})),n.Wb(),n.Xb(3,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onSaturationInput(t)})),n.Wb(),n.Xb(4,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onLightnessInput(t)})),n.Wb(),n.Xc(5,f,1,2,"input",32),n.Wb(),n.Xb(6,"div",30),n.Xb(7,"div"),n.Zc(8,"H"),n.Wb(),n.Xb(9,"div"),n.Zc(10,"S"),n.Wb(),n.Xb(11,"div"),n.Zc(12,"L"),n.Wb(),n.Xc(13,m,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Wc("display",2!==e.format?"none":"block"),n.Cb(2),n.wc("rg",360)("value",null==e.hslaText?null:e.hslaText.h),n.Cb(1),n.wc("rg",100)("value",null==e.hslaText?null:e.hslaText.s),n.Cb(1),n.wc("rg",100)("value",null==e.hslaText?null:e.hslaText.l),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel),n.Cb(8),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.rgbaText?null:e.rgbaText.a)}}function C(e,t){1&e&&(n.Xb(0,"div"),n.Zc(1,"A"),n.Wb())}function E(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",37),n.Xb(1,"div",30),n.Xb(2,"input",38),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onRedInput(t)})),n.Wb(),n.Xb(3,"input",38),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onGreenInput(t)})),n.Wb(),n.Xb(4,"input",38),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onBlueInput(t)})),n.Wb(),n.Xc(5,v,1,2,"input",32),n.Wb(),n.Xb(6,"div",30),n.Xb(7,"div"),n.Zc(8,"R"),n.Wb(),n.Xb(9,"div"),n.Zc(10,"G"),n.Wb(),n.Xb(11,"div"),n.Zc(12,"B"),n.Wb(),n.Xc(13,C,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Wc("display",1!==e.format?"none":"block"),n.Cb(2),n.wc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.r),n.Cb(1),n.wc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.g),n.Cb(1),n.wc("rg",255)("value",null==e.rgbaText?null:e.rgbaText.b),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel),n.Cb(8),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function w(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",e.hexAlpha)}}function S(e,t){1&e&&(n.Xb(0,"div"),n.Zc(1,"A"),n.Wb())}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",39),n.Xb(1,"div",30),n.Xb(2,"input",40),n.jc("blur",(function(){return n.Oc(e),n.nc().onHexInput(null)}))("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onHexInput(t)})),n.Wb(),n.Xc(3,w,1,2,"input",32),n.Wb(),n.Xb(4,"div",30),n.Xb(5,"div"),n.Zc(6,"Hex"),n.Wb(),n.Xc(7,S,2,0,"div",33),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Wc("display",0!==e.format?"none":"block"),n.Hb("hex-alpha","forced"===e.cpAlphaChannel),n.Cb(2),n.wc("value",e.hexText),n.Cb(1),n.wc("ngIf","forced"===e.cpAlphaChannel),n.Cb(4),n.wc("ngIf","forced"===e.cpAlphaChannel)}}function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",34),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc(2).onAlphaInput(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",41),n.Xb(1,"div",30),n.Xb(2,"input",31),n.jc("keyup.enter",(function(t){return n.Oc(e),n.nc().onAcceptColor(t)}))("newValue",(function(t){return n.Oc(e),n.nc().onValueInput(t)})),n.Wb(),n.Xc(3,O,1,2,"input",32),n.Wb(),n.Xb(4,"div",30),n.Xb(5,"div"),n.Zc(6,"V"),n.Wb(),n.Xb(7,"div"),n.Zc(8,"A"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("rg",100)("value",null==e.hslaText?null:e.hslaText.l),n.Cb(1),n.wc("ngIf","disabled"!==e.cpAlphaChannel)}}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",42),n.Xb(1,"span",43),n.jc("click",(function(){return n.Oc(e),n.nc().onFormatToggle(-1)})),n.Wb(),n.Xb(2,"span",43),n.jc("click",(function(){return n.Oc(e),n.nc().onFormatToggle(1)})),n.Wb(),n.Wb()}}function T(e,t){if(1&e){const e=n.Yb();n.Xb(0,"span",50),n.jc("click",(function(t){n.Oc(e);const i=n.nc().$implicit;return n.nc(3).onRemovePresetColor(t,i)})),n.Wb()}if(2&e){const e=n.nc(4);n.Eb(e.cpRemoveColorButtonClass)}}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",48),n.jc("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc(3).setColorFromString(i)})),n.Xc(1,T,1,3,"span",49),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(3);n.Wc("background-color",e),n.Cb(1),n.wc("ngIf",i.cpAddColorButton)}}function I(e,t){if(1&e&&(n.Xb(0,"div"),n.Xc(1,D,2,3,"div",47),n.Wb()),2&e){const e=n.nc(2);n.Eb(e.cpPresetColorsClass),n.Cb(1),n.wc("ngForOf",e.cpPresetColors)}}function _(e,t){if(1&e&&(n.Xb(0,"div"),n.Zc(1),n.Wb()),2&e){const e=n.nc(2);n.Eb(e.cpPresetEmptyMessageClass),n.Cb(1),n.ad(e.cpPresetEmptyMessage)}}function R(e,t){if(1&e&&(n.Xb(0,"div",44),n.Sb(1,"hr"),n.Xb(2,"div",45),n.Zc(3),n.Wb(),n.Xc(4,I,2,4,"div",46),n.Xc(5,_,2,4,"div",46),n.Wb()),2&e){const e=n.nc();n.Cb(3),n.ad(e.cpPresetLabel),n.Cb(1),n.wc("ngIf",null==e.cpPresetColors?null:e.cpPresetColors.length),n.Cb(1),n.wc("ngIf",!(null!=e.cpPresetColors&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function L(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",53),n.jc("click",(function(t){return n.Oc(e),n.nc(2).onCancelColor(t)})),n.Zc(1),n.Wb()}if(2&e){const e=n.nc(2);n.Eb(e.cpCancelButtonClass),n.Cb(1),n.ad(e.cpCancelButtonText)}}function x(e,t){if(1&e){const e=n.Yb();n.Xb(0,"button",53),n.jc("click",(function(t){return n.Oc(e),n.nc(2).onAcceptColor(t)})),n.Zc(1),n.Wb()}if(2&e){const e=n.nc(2);n.Eb(e.cpOKButtonClass),n.Cb(1),n.ad(e.cpOKButtonText)}}function P(e,t){if(1&e&&(n.Xb(0,"div",51),n.Xc(1,L,2,4,"button",52),n.Xc(2,x,2,4,"button",52),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.cpCancelButton),n.Cb(1),n.wc("ngIf",e.cpOKButton)}}var j=function(e){return e[e.HEX=0]="HEX",e[e.RGBA=1]="RGBA",e[e.HSLA=2]="HSLA",e[e.CMYK=3]="CMYK",e}({});class M{constructor(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n}}class X{constructor(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n}}class F{constructor(e,t,i,n){this.h=e,this.s=t,this.l=i,this.a=n}}class W{constructor(e,t,i,n,s=1){this.c=e,this.m=t,this.y=i,this.k=n,this.a=s}}let B=(()=>{let e=class{constructor(){this.newValue=new n.n}inputChange(e){const t=e.target.value;if(void 0===this.rg)this.newValue.emit(t);else{const e=parseFloat(t);this.newValue.emit({v:e,rg:this.rg})}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Mb({type:e,selectors:[["","text",""]],hostBindings:function(e,t){1&e&&n.jc("input",(function(e){return t.inputChange(e)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),e})(),N=(()=>{let e=class{constructor(e){this.elRef=e,this.dragEnd=new n.n,this.dragStart=new n.n,this.newValue=new n.n,this.listenerMove=e=>this.move(e),this.listenerStop=()=>this.stop()}mouseDown(e){this.start(e)}touchStart(e){this.start(e)}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){const t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}getY(e){const t=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}setCursor(e){const t=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,n=Math.max(0,Math.min(this.getX(e),t)),s=Math.max(0,Math.min(this.getY(e),i));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:n/t,v:1-s/i,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:s/i,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:n/t,rgX:this.rgX})}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l))},e.\u0275dir=n.Mb({type:e,selectors:[["","slider",""]],hostBindings:function(e,t){1&e&&n.jc("mousedown",(function(e){return t.mouseDown(e)}))("touchstart",(function(e){return t.touchStart(e)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),e})();class G{constructor(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n}}class U{constructor(e,t,i,n){this.h=e,this.s=t,this.v=i,this.a=n}}let V=(()=>{let e=class{constructor(){this.active=null}setActive(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}hsva2hsla(e){const t=e.h,i=e.s,n=e.v,s=e.a;if(0===n)return new F(t,0,0,s);if(0===i&&1===n)return new F(t,1,1,s);{const e=n*(2-i)/2;return new F(t,n*i/(1-Math.abs(2*e-1)),e,s)}}hsla2hsva(e){const t=Math.min(e.h,1),i=Math.min(e.s,1),n=Math.min(e.l,1),s=Math.min(e.a,1);if(0===n)return new X(t,0,0,s);{const e=n+i*(1-Math.abs(2*n-1))/2;return new X(t,2*(e-n)/e,e,s)}}hsvaToRgba(e){let t,i,n;const s=e.h,r=e.s,o=e.v,a=e.a,c=Math.floor(6*s),l=6*s-c,u=o*(1-r),d=o*(1-l*r),h=o*(1-(1-l)*r);switch(c%6){case 0:t=o,i=h,n=u;break;case 1:t=d,i=o,n=u;break;case 2:t=u,i=o,n=h;break;case 3:t=u,i=d,n=o;break;case 4:t=h,i=u,n=o;break;case 5:t=o,i=u,n=d;break;default:t=0,i=0,n=0}return new M(t,i,n,a)}cmykToRgb(e){return new M((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}rgbaToCmyk(e){const t=1-Math.max(e.r,e.g,e.b);return 1===t?new W(0,0,0,1,e.a):new W((1-e.r-t)/(1-t),(1-e.g-t)/(1-t),(1-e.b-t)/(1-t),t,e.a)}rgbaToHsva(e){let t,i;const n=Math.min(e.r,1),s=Math.min(e.g,1),r=Math.min(e.b,1),o=Math.min(e.a,1),a=Math.max(n,s,r),c=Math.min(n,s,r),l=a,u=a-c;if(i=0===a?0:u/a,a===c)t=0;else{switch(a){case n:t=(s-r)/u+(s<r?6:0);break;case s:t=(r-n)/u+2;break;case r:t=(n-s)/u+4;break;default:t=0}t/=6}return new X(t,i,l,o)}rgbaToHex(e,t){let i="#"+(1<<24|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return t&&(i+=(256|Math.round(255*e.a)).toString(16).substr(1)),i}normalizeCMYK(e){return new W(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new W(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}denormalizeRGBA(e){return new M(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}stringToHsva(e="",t=!1){let i=null;e=(e||"").toLowerCase();const n=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new M(parseInt(e[2],10)/255,parseInt(e[3],10)/255,parseInt(e[4],10)/255,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return new F(parseInt(e[2],10)/360,parseInt(e[3],10)/100,parseInt(e[4],10)/100,isNaN(parseFloat(e[5]))?1:parseFloat(e[5]))}}];n.push(t?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(e){return new M(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,parseInt(e[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(e){return new M(parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255,1)}}),n.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(e){return new M(parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255,1)}});for(const s in n)if(n.hasOwnProperty(s)){const t=n[s],r=t.re.exec(e),o=r&&t.parse(r);if(o)return o instanceof M?i=this.rgbaToHsva(o):o instanceof F&&(i=this.hsla2hsva(o)),i}return i}outputFormat(e,t,i){switch("auto"===t&&(t=e.a<1?"rgba":"hex"),t){case"hsla":const t=this.hsva2hsla(e),n=new F(Math.round(360*t.h),Math.round(100*t.s),Math.round(100*t.l),Math.round(100*t.a)/100);return e.a<1||"always"===i?"hsla("+n.h+","+n.s+"%,"+n.l+"%,"+n.a+")":"hsl("+n.h+","+n.s+"%,"+n.l+"%)";case"rgba":const s=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===i?"rgba("+s.r+","+s.g+","+s.b+","+Math.round(100*s.a)/100+")":"rgb("+s.r+","+s.g+","+s.b+")";default:const r="always"===i||"forced"===i;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),r)}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})(),H=(()=>{let e=class{constructor(e,t,i){this.elRef=e,this.cdRef=t,this.service=i,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[j.HEX,j.RGBA,j.HSLA,j.CMYK],this.useRootViewContainer=!1}handleEsc(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}handleEnter(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}ngOnInit(){this.slider=new G(0,0,0,0),this.sliderDimMax=new U(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?j.CMYK:"rgba"===this.cpOutputFormat?j.RGBA:"hsla"===this.cpOutputFormat?j.HSLA:j.HEX,this.listenerMouseDown=e=>{this.onMouseDown(e)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new U(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(e,t=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,t),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,t,i,n,s,r,o,a,c,l,u,d,h,p,b,f,m,g,v,C,E,w,S,y,O,A,k,T,D,I,_,R,L,x,P){this.setInitialColor(i),this.setColorMode(a),this.isIE10=10===function(){let e="";"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase());const t=e.indexOf("msie ");return t>0&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=t,this.cpDisableInput=d,this.cpCmykEnabled=c,this.cpAlphaChannel=l,this.cpOutputFormat=u,this.cpDialogDisplay=r,this.cpIgnoredElements=h,this.cpSaveClickOutside=p,this.cpCloseClickOutside=b,this.useRootViewContainer=f,this.width=this.cpWidth=parseInt(n,10),this.height=this.cpHeight=parseInt(s,10),this.cpPosition=m,this.cpPositionOffset=parseInt(g,10),this.cpOKButton=A,this.cpOKButtonText=T,this.cpOKButtonClass=k,this.cpCancelButton=D,this.cpCancelButtonText=_,this.cpCancelButtonClass=I,this.fallbackColor=o||"#fff",this.setPresetConfig(C,E),this.cpPresetColorsClass=w,this.cpMaxPresetColorsLength=S,this.cpPresetEmptyMessage=y,this.cpPresetEmptyMessageClass=O,this.cpAddColorButton=R,this.cpAddColorButtonText=x,this.cpAddColorButtonClass=L,this.cpRemoveColorButtonClass=P,v||(this.dialogArrowOffset=0),"inline"===r&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===u&&"always"!==l&&"forced"!==l&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,t){this.cpPresetLabel=e,this.cpPresetColors=t}setColorFromString(e,t=!0,i=!0){let n;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(n=this.service.stringToHsva(e,!0),n||this.hsva||(n=this.service.stringToHsva(e,!1))):n=this.service.stringToHsva(e,!1),n||this.hsva||(n=this.service.stringToHsva(this.fallbackColor,!1)),n&&(this.hsva=n,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(t,i))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter(t=>t===e.target).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker()),this.directiveInstance.colorCanceled()}onFormatToggle(e){const t=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),i=((this.dialogInputFields.indexOf(this.format)+e)%t+t)%t;this.format=this.dialogInputFields[i]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);let t=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(t=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const i=t.test(e);i&&(e.length<5&&(e="#"+e.substring(1).split("").map(e=>e+e).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:i,value:e,color:this.outputColor})}}onRedInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:i,value:t.r,color:this.outputColor})}onBlueInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:i,value:t.b,color:this.outputColor})}onGreenInput(e){const t=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:i,value:t.g,color:this.outputColor})}onHueInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:t,value:this.hsva.h,color:this.outputColor})}onValueInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:t,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){const t=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;t&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:t,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){const t=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:i,value:t.l,color:this.outputColor})}onSaturationInput(e){const t=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(t.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(t),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:i,value:t.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,t){e.stopPropagation(),this.cpPresetColors.filter(e=>e===t).length||(this.cpPresetColors=this.cpPresetColors.concat(t),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,t){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(e=>e!==t),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,t=!0,i=!1){if(this.sliderDimMax){let n,s,r;2===this.cpColorMode&&(this.hsva.s=0);const o=this.outputColor;if(s=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(i?(r=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(r)):(r=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(r))),r=this.service.denormalizeRGBA(r),this.sliderH=this.hsva.h):r=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),n=this.service.denormalizeRGBA(this.service.hsvaToRgba(new X(this.sliderH||this.hsva.h,1,1,1))),t&&(this.hslaText=new F(Math.round(360*s.h),Math.round(100*s.s),Math.round(100*s.l),Math.round(100*s.a)/100),this.rgbaText=new M(r.r,r.g,r.b,Math.round(100*r.a)/100),this.cpCmykEnabled&&(this.cmykText=new W(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(r,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==j.RGBA&&this.format!==j.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?j.RGBA:j.HEX),this.hueSliderColor="rgb("+n.r+","+n.g+","+n.b+")",this.alphaSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==j.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const e=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${e})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new G((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&o!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let e,t="static",i="",n=null,s=null,r=this.directiveElementRef.nativeElement.parentNode;const o=this.dialogElement.nativeElement.offsetHeight;for(;null!==r&&"HTML"!==r.tagName;){if(e=window.getComputedStyle(r),t=e.getPropertyValue("position"),i=e.getPropertyValue("transform"),"static"!==t&&null===n&&(n=r),i&&"none"!==i&&null===s&&(s=r),"fixed"===t){n=s;break}r=r.parentNode}const a=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==t);if(this.useRootViewContainer||"fixed"===t&&(!n||n instanceof HTMLUnknownElement))this.top=a.top,this.left=a.left;else{null===n&&(n=r);const e=this.createDialogBox(n,"fixed"!==t);this.top=a.top-e.top,this.left=a.left-e.left}"fixed"===t&&(this.position="fixed");let c=this.cpPosition;if("auto"===this.cpPosition){let e="right",t="bottom";const i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.left+this.cpWidth>i&&(e="left"),this.top+o>n&&(t="top"),c=e+"-"+t}this.cpUsePosition=c,"top"===c?(this.arrowTop=o-1,this.top-=o+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):"bottom"===c?(this.top+=a.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):"top-left"===c||"left-top"===c?(this.top-=o-a.height+a.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===c||"right-top"===c?(this.top-=o-a.height+a.height*this.cpPositionOffset/100,this.left+=a.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===c||"bottom-left"===c||"left-bottom"===c?(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=a.width+this.dialogArrowSize-2)}}isDescendant(e,t){let i=t.parentNode;for(;null!==i;){if(i===e)return!0;i=i.parentNode}return!1}createDialogBox(e,t){return{top:e.getBoundingClientRect().top+(t?window.pageYOffset:0),left:e.getBoundingClientRect().left+(t?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.h),n.Rb(V))},e.\u0275cmp=n.Lb({type:e,selectors:[["color-picker"]],viewQuery:function(e,t){var i;1&e&&(n.Uc(r,!0),n.Uc(o,!0),n.Uc(a,!0)),2&e&&(n.Kc(i=n.kc())&&(t.dialogElement=i.first),n.Kc(i=n.kc())&&(t.hueSlider=i.first),n.Kc(i=n.kc())&&(t.alphaSlider=i.first))},hostBindings:function(e,t){1&e&&n.jc("keyup.esc",(function(e){return t.handleEsc(e)}),!1,n.Mc)("keyup.enter",(function(e){return t.handleEnter(e)}),!1,n.Mc)},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0,1),n.jc("click",(function(e){return e.stopPropagation()})),n.Xc(2,c,1,5,"div",2),n.Xc(3,l,2,8,"div",3),n.Xb(4,"div",4),n.Xb(5,"div",5),n.Sb(6,"div",6),n.Sb(7,"div",7),n.Xc(8,u,2,5,"button",8),n.Wb(),n.Xb(9,"div",9),n.Xc(10,d,1,0,"div",10),n.Xb(11,"div",11,12),n.jc("newValue",(function(e){return t.onHueChange(e)}))("dragStart",(function(){return t.onDragStart("hue")}))("dragEnd",(function(){return t.onDragEnd("hue")})),n.Sb(13,"div",13),n.Wb(),n.Xb(14,"div",14,15),n.jc("newValue",(function(e){return t.onValueChange(e)}))("dragStart",(function(){return t.onDragStart("value")}))("dragEnd",(function(){return t.onDragEnd("value")})),n.Sb(16,"div",13),n.Wb(),n.Xb(17,"div",16,17),n.jc("newValue",(function(e){return t.onAlphaChange(e)}))("dragStart",(function(){return t.onDragStart("alpha")}))("dragEnd",(function(){return t.onDragEnd("alpha")})),n.Sb(19,"div",13),n.Wb(),n.Wb(),n.Wb(),n.Xc(20,b,17,12,"div",18),n.Xc(21,g,14,10,"div",19),n.Xc(22,E,14,10,"div",20),n.Xc(23,y,8,7,"div",21),n.Xc(24,A,9,3,"div",22),n.Xc(25,k,3,0,"div",23),n.Xc(26,R,6,3,"div",24),n.Xc(27,P,3,2,"div",25),n.Wb()),2&e&&(n.Wc("display",t.show?"block":"none")("visibility",t.hidden?"hidden":"visible")("top",t.top,"px")("left",t.left,"px")("position",t.position)("height",t.cpHeight,"px")("width",t.cpWidth,"px"),n.Hb("open",t.show),n.Cb(2),n.wc("ngIf","popup"==t.cpDialogDisplay),n.Cb(1),n.wc("ngIf",1===(t.cpColorMode||1)),n.Cb(4),n.Wc("background-color",t.selectedColor),n.Cb(1),n.wc("ngIf",t.cpAddColorButton),n.Cb(2),n.wc("ngIf","disabled"===t.cpAlphaChannel),n.Cb(1),n.Wc("display",1===(t.cpColorMode||1)?"block":"none"),n.wc("rgX",1),n.Cb(2),n.Wc("left",null==t.slider?null:t.slider.h,"px"),n.Cb(1),n.Wc("display",2===(t.cpColorMode||1)?"block":"none"),n.wc("rgX",1),n.Cb(2),n.Wc("right",null==t.slider?null:t.slider.v,"px"),n.Cb(1),n.Wc("display","disabled"===t.cpAlphaChannel?"none":"block")("background-color",t.alphaSliderColor),n.wc("rgX",1),n.Cb(2),n.Wc("left",null==t.slider?null:t.slider.a,"px"),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&2===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",!t.cpDisableInput&&1===(t.cpColorMode||1)),n.Cb(1),n.wc("ngIf",(null==t.cpPresetColors?null:t.cpPresetColors.length)||t.cpAddColorButton),n.Cb(1),n.wc("ngIf",t.cpOKButton||t.cpCancelButton))},directives:[s.u,N,B,s.t],styles:[".color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:1px solid #777;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 transparent transparent}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:transparent transparent #777}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{right:-21px;bottom:8px;border-width:5px 10px;border-color:transparent transparent transparent #777}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{bottom:8px;left:-20px;border-width:5px 10px;border-color:transparent #777 transparent transparent}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{top:8px;right:-21px;border-width:5px 10px;border-color:transparent transparent transparent #777}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{top:8px;left:-20px;border-width:5px 10px;border-color:transparent #777 transparent transparent}.color-picker .cursor{position:relative;width:16px;height:16px;border:2px solid #222;border-radius:50%;cursor:default}.color-picker .box{display:-webkit-box;display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{-webkit-box-flex:1;flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:1px solid #a9a9a9;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;-webkit-box-flex:1;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{-webkit-box-flex:1;flex:1 1 auto;padding:1px;border:1px solid #a9a9a9}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{-webkit-box-flex:3;flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{-webkit-box-flex:1;flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;-webkit-box-flex:1;flex:1;padding:1px;margin:0 8px 0 0;border:1px solid #a9a9a9}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{-webkit-box-align:center;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:0 0}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class::before{content:'x';position:relative;bottom:3.5px;display:inline-block;font-size:10px}"],encapsulation:2}),e})(),Y=(()=>{let e=class{constructor(e,t,i,s,r,o){this.injector=e,this.cfr=t,this.appRef=i,this.vcRef=s,this.elRef=r,this._service=o,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new n.n(!0),this.cpToggleChange=new n.n(!0),this.cpSliderChange=new n.n(!0),this.cpSliderDragEnd=new n.n(!0),this.cpSliderDragStart=new n.n(!0),this.colorPickerOpen=new n.n(!0),this.colorPickerClose=new n.n(!0),this.colorPickerCancel=new n.n(!0),this.colorPickerSelect=new n.n(!0),this.colorPickerChange=new n.n(!1),this.cpCmykColorChange=new n.n(!0),this.cpPresetColorsChange=new n.n(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const t=this.injector.get(this.appRef.componentTypes[0],n.r.NULL);t!==n.r.NULL?(e=t.vcRef||t.viewContainerRef||this.vcRef,e===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")):this.viewAttachedToAppRef=!0}const t=this.cfr.resolveComponentFactory(H);if(this.viewAttachedToAppRef)this.cmpRef=t.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const i=n.E.fromResolvedProviders([],e.parentInjector);this.cmpRef=e.createComponent(t,0,i,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,t=!0){this.ignoreChanges=t,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter(t=>t===e);this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}};return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.r),n.Rb(n.j),n.Rb(n.g),n.Rb(n.P),n.Rb(n.l),n.Rb(V))},e.\u0275dir=n.Mb({type:e,selectors:[["","colorPicker",""]],hostBindings:function(e,t){1&e&&n.jc("click",(function(){return t.handleClick()}))("focus",(function(){return t.handleFocus()}))("input",(function(e){return t.handleInput(e)}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[n.Ab]}),e})(),$=(()=>{let e=class{};return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[V],imports:[[s.c]]}),e})()},RH5C:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},RZdV:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("f0Wu"),s=i("Tj/N"),r=i("qfBg"),o=i("fXoL");let a=(()=>{class e{constructor(e){this.userService=e,this.user=new s.a(JSON.parse(localStorage.getItem("user"))),this.timeZone=this.userService.getTimeZone()}transform(e){var t,i;const s=n.tz(e,this.timeZone),r=(null===(i=null===(t=this.user)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.dateFormat)||"MM/DD/YYYY";return s.format(r)}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(r.a))},e.\u0275pipe=o.Qb({name:"formatDate",type:e,pure:!0}),e})()},Rgaw:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._invoiceId=e&&e.invoiceId,this._invoiceNumber=e&&e.invoiceNumber,this._manuallyInvoiced=e&&e.manuallyInvoiced}get invoiceId(){return this._invoiceId}set invoiceId(e){this._invoiceId=e}get invoiceNumber(){return this._invoiceNumber}set invoiceNumber(e){this._invoiceNumber=e}get manuallyInvoiced(){return this._manuallyInvoiced}set manuallyInvoiced(e){this._manuallyInvoiced=e}}},RiPy:function(e,t,i){var n,s,r,o;o=function(e){var t=!1,i=!1,n=!1,s=!1,r="escape years months weeks days hours minutes seconds milliseconds general".split(" "),o=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function a(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function c(e){for(var t="";e;)t+="0",e-=1;return t}function l(e,t){var i=e+"+"+v(k(t).sort(),(function(e){return e+":"+t[e]})).join(",");return l.cache[i]||(l.cache[i]=Intl.NumberFormat(e,t)),l.cache[i]}function u(e,t,r){var o,a,d,h=t.useToLocaleString,p=t.useGrouping,b=p&&t.grouping.slice(),f=t.maximumSignificantDigits,m=t.minimumIntegerDigits||1,g=t.fractionDigits||0,v=t.groupingSeparator,C=t.decimalSeparator;if(h&&r){var E,w={minimumIntegerDigits:m,useGrouping:p};return g&&(w.maximumFractionDigits=g,w.minimumFractionDigits=g),f&&e>0&&(w.maximumSignificantDigits=f),n?(s||((E=A({},t)).useGrouping=!1,E.decimalSeparator=".",e=parseFloat(u(e,E),10)),l(r,w).format(e)):(i||((E=A({},t)).useGrouping=!1,E.decimalSeparator=".",e=parseFloat(u(e,E),10)),e.toLocaleString(r,w))}var S=(f?e.toPrecision(f+1):e.toFixed(g+1)).split("e");d=S[1]||"";var y=(o=(S=S[0].split("."))[0]||"").length,O=(a=S[1]||"").length,k=y+O,T=o+a;(f&&k===f+1||!f&&O===g+1)&&((T=function(e){for(var t=e.split("").reverse(),i=0,n=!0;n&&i<t.length;)i?"9"===t[i]?t[i]="0":(t[i]=(parseInt(t[i],10)+1).toString(),n=!1):(parseInt(t[i],10)<5&&(n=!1),t[i]="0"),i+=1;return n&&t.push("1"),t.reverse().join("")}(T)).length===k+1&&(y+=1),O&&(T=T.slice(0,-1)),o=T.slice(0,y),a=T.slice(y)),f&&(a=a.replace(/0*$/,""));var D=parseInt(d,10);D>0?a.length<=D?(o+=a+=c(D-a.length),a=""):(o+=a.slice(0,D),a=a.slice(D)):D<0&&(a=c(Math.abs(D)-o.length)+o+a,o="0"),f||((a=a.slice(0,g)).length<g&&(a+=c(g-a.length)),o.length<m&&(o=c(m-o.length)+o));var I,_="";if(p)for(S=o;S.length;)b.length&&(I=b.shift()),_&&(_=v+_),_=S.slice(-I)+_,S=S.slice(0,-I);else _=o;return a&&(_=_+C+a),_}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function h(e,t){var i=[];return g(k(t),(function(n){if("_durationLabels"===n.slice(0,15)){var s=n.slice(15).toLowerCase();g(k(t[n]),(function(r){r.slice(0,1)===e&&i.push({type:s,key:r,label:t[n][r]})}))}})),i}l.cache={};var p={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,i){return 1===t&&null===i?e:e+e}};function b(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function m(e,t){var i,n=0,s=e&&e.length||0;for("function"!=typeof t&&(i=t,t=function(e){return e===i});n<s;){if(t(e[n]))return e[n];n+=1}}function g(e,t){var i=0,n=e.length;if(e&&n)for(;i<n;){if(!1===t(e[i],i))return;i+=1}}function v(e,t){var i=0,n=e.length,s=[];if(!e||!n)return s;for(;i<n;)s[i]=t(e[i],i),i+=1;return s}function C(e,t){return v(e,(function(e){return e[t]}))}function E(e){var t=[];return g(e,(function(e){e&&t.push(e)})),t}function w(e){var t=[];return g(e,(function(e){m(t,e)||t.push(e)})),t}function S(e,t){var i=[];return g(e,(function(e){g(t,(function(t){e===t&&i.push(e)}))})),w(i)}function y(e,t){var i=[];return g(e,(function(n,s){if(!t(n))return i=e.slice(s),!1})),i}function O(e,t){return y(e.slice().reverse(),t).reverse()}function A(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function k(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function T(e,t){var i=0,n=e.length;if(!e||!n)return!1;for(;i<n;){if(!0===t(e[i],i))return!0;i+=1}return!1}function D(e){var t=[];return g(e,(function(e){t=t.concat(e)})),t}function I(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function _(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function R(){var e,t=[].slice.call(arguments),i={};if(g(t,(function(t,n){if(!n){if(!b(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?f(t)&&A(i,t):i.precision=t:i.template=t})),!e||!e.length)return[];i.returnMomentTypes=!0;var n=v(e,(function(e){return e.format(i)})),s=S(r,w(C(D(n),"type"))),o=i.largest;return o&&(s=s.slice(0,o)),i.returnMomentTypes=!1,i.outputTypes=s,v(e,(function(e){return e.format(i)}))}function L(){var i=[].slice.call(arguments),s=A({},this.format.defaults),c=this.asMilliseconds(),l=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(c=0,l=0);var D=c<0,I=e.duration(Math.abs(c),"milliseconds"),_=e.duration(Math.abs(l),"months");g(i,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?f(e)&&A(s,e):s.precision=e:s.template=e}));var R={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},L={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};s.types=r;var x=function(e){return m(r,(function(t){return L[t].test(e)}))},P=new RegExp(v(r,(function(e){return L[e].source})).join("|"),"g");s.duration=this;var j="function"==typeof s.template?s.template.apply(s):s.template,M=s.outputTypes,X=s.returnMomentTypes,F=s.largest,W=[];M||(b(s.stopTrim)&&(s.stopTrim=s.stopTrim.join("")),s.stopTrim&&g(s.stopTrim.match(P),(function(e){var t=x(e);"escape"!==t&&"general"!==t&&W.push(t)})));var B=e.localeData();B||(B={}),g(k(p),(function(e){"function"!=typeof p[e]?B["_"+e]||(B["_"+e]=p[e]):B[e]||(B[e]=p[e])})),g(k(B._durationTimeTemplates),(function(e){j=j.replace("_"+e+"_",B._durationTimeTemplates[e])}));var N=s.userLocale||e.locale(),G=s.useLeftUnits,U=s.usePlural,V=s.precision,H=s.forceLength,Y=s.useGrouping,$=s.trunc,z=s.useSignificantDigits&&V>0,Z=z?s.precision:0,K=Z,q=s.minValue,J=!1,Q=s.maxValue,ee=!1,te=s.useToLocaleString,ie=s.groupingSeparator,ne=s.decimalSeparator,se=s.grouping;te=te&&(t||n);var re=s.trim;b(re)&&(re=re.join(" ")),null===re&&(F||Q||z)&&(re="all"),null!==re&&!0!==re&&"left"!==re&&"right"!==re||(re="large"),!1===re&&(re="");var oe=function(e){return e.test(re)},ae=/large/,ce=/small/,le=/both/,ue=/mid/,de=/^all|[^sm]all/,he=/final/,pe=F>0||T([ae,le,de],oe),be=T([ce,le,de],oe),fe=T([ue,de],oe),me=T([he,de],oe),ge=v(j.match(P),(function(e,t){var i=x(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==i&&"general"!==i&&W.push(i)),{index:t,length:e.length,text:"",token:"escape"===i?e.replace(L.escape,"$1"):e,type:"escape"===i||"general"===i?null:i}})),ve={index:0,length:0,token:"",text:"",type:null},Ce=[];G&&ge.reverse(),g(ge,(function(e){if(e.type)return(ve.type||ve.text)&&Ce.push(ve),void(ve=e);G?ve.text=e.token+ve.text:ve.text+=e.token})),(ve.type||ve.text)&&Ce.push(ve),G&&Ce.reverse();var Ee=S(r,w(E(C(Ce,"type"))));if(!Ee.length)return C(Ce,"text").join("");Ee=v(Ee,(function(e,t){var i,n=t+1===Ee.length,r=!t;i="years"===e||"months"===e?_.as(e):I.as(e);var o=Math.floor(i),a=i-o,c=m(Ce,(function(t){return e===t.type}));return r&&Q&&i>Q&&(ee=!0),n&&q&&Math.abs(s.duration.as(e))<q&&(J=!0),r&&null===H&&c.length>1&&(H=!0),I.subtract(o,e),_.subtract(o,e),{rawValue:i,wholeValue:o,decimalValue:n?a:0,isSmallest:n,isLargest:r,type:e,tokenLength:c.length}}));var we=$?Math.floor:Math.round,Se=function(e,t){var i=Math.pow(10,t);return we(e*i)/i},ye=!1,Oe=!1,Ae=function(e,t){var i={useGrouping:Y,groupingSeparator:ie,decimalSeparator:ne,grouping:se,useToLocaleString:te};return z&&(Z<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(i.maximumSignificantDigits=Z,e.significantDigits=Z)),ee&&!Oe&&(e.isLargest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),J&&!Oe&&(e.isSmallest?(e.wholeValue=q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?V<0?e.value=Se(e.wholeValue,V):0===V?e.value=we(e.wholeValue+e.decimalValue):z?(e.value=$?Se(e.rawValue,Z-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(Z-=e.wholeValue.toString().length)):(i.fractionDigits=V,e.value=$?e.wholeValue+Se(e.decimalValue,V):e.wholeValue+e.decimalValue):z&&e.wholeValue?(e.value=Math.round(Se(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),Z-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(H||ye)&&(i.minimumIntegerDigits=e.tokenLength,Oe&&i.maximumSignificantDigits<e.tokenLength&&delete i.maximumSignificantDigits),!ye&&(e.value>0||""===re||m(W,e.type)||m(M,e.type))&&(ye=!0),e.formattedValue=u(e.value,i,N),i.useGrouping=!1,i.decimalSeparator=".",e.formattedValueEn=u(e.value,i,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((Ee=E(Ee=v(Ee,Ae))).length>1){var ke=function(e){return m(Ee,(function(t){return t.type===e}))},Te=function(e){var t=ke(e.type);t&&g(e.targets,(function(e){var i=ke(e.type);i&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,i.rawValue+=1,i.wholeValue+=1,i.decimalValue=0,i.formattedValueEn=i.wholeValue.toString(),Oe=!0)}))};g(o,Te)}return Oe&&(ye=!1,Z=K,Ee=E(Ee=v(Ee,Ae))),!M||ee&&!s.trim?(pe&&(Ee=y(Ee,(function(e){return!e.isSmallest&&!e.wholeValue&&!m(W,e.type)}))),F&&Ee.length&&(Ee=Ee.slice(0,F)),be&&Ee.length>1&&(Ee=O(Ee,(function(e){return!e.wholeValue&&!m(W,e.type)&&!e.isLargest}))),fe&&(Ee=E(Ee=v(Ee,(function(e,t){return t>0&&t<Ee.length-1&&!e.wholeValue?null:e})))),!me||1!==Ee.length||Ee[0].wholeValue||!$&&Ee[0].isSmallest&&Ee[0].rawValue<q||(Ee=[])):Ee=E(Ee=v(Ee,(function(e){return m(M,(function(t){return e.type===t}))?e:null}))),X?Ee:(g(Ce,(function(e){var t=R[e.type],i=m(Ee,(function(t){return t.type===e.type}));if(t&&i){var n=i.formattedValueEn.split(".");n[0]=parseInt(n[0],10),n[1]=n[1]?parseFloat("0."+n[1],10):null;var s=B.durationPluralKey(t,n[0],n[1]),r=h(t,B),o=!1,c={};g(B._durationLabelTypes,(function(t){var i=m(r,(function(e){return e.type===t.type&&e.key===s}));i&&(c[i.type]=i.label,a(e.text,t.string)&&(e.text=e.text.replace(t.string,i.label),o=!0))})),U&&!o&&(r.sort(d),g(r,(function(t){return c[t.type]===t.label?!a(e.text,t.label)&&void 0:a(e.text,t.label)?(e.text=e.text.replace(t.label,c[t.type]),!1):void 0})))}})),(Ce=v(Ce,(function(e){if(!e.type)return e.text;var t=m(Ee,(function(t){return t.type===e.type}));if(!t)return"";var i="";return G&&(i+=e.text),(D&&ee||!D&&J)&&(i+="< ",ee=!1,J=!1),(D&&J||!D&&ee)&&(i+="> ",ee=!1,J=!1),D&&(t.value>0||""===re||m(W,t.type)||m(M,t.type))&&(i+="-",D=!1),i+="milliseconds"===e.type&&t.formattedValueMS?t.formattedValueMS:t.formattedValue,G||(i+=e.text),i}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function x(){var e=this.duration,t=function(t){return e._data[t]},i=m(this.types,t),n=function(e,t){for(var i=e.length;i-=1;)if(t(e[i]))return e[i]}(this.types,t);switch(i){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(i===n)return"d __";case"weeks":return i===n?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(i===n)return"M __";case"years":return i===n?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function P(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=R,e.duration.fn.format=L,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:x,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",p)}var j=function(e,t,i){return e.toLocaleString(t,i)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&_(j),i=t&&I(j);var M=function(e,t,i){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,i).format(e)};return n=_(M),s=n&&I(M),P(e),P},s=[i("wd/R")],void 0===(r="function"==typeof(n=o)?n.apply(t,s):n)||(e.exports=r),this&&(this.momentDurationFormatSetup=this.moment?o(this.moment):o)},Rt6l:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return o}));var n=i("xoOP"),s=function(e){return e.NO_PROJECT="NO_PROJECT",e.NO_TASK="NO_TASK",e.SUSPICIOUS="SUSPICIOUS",e}({});const r=[];class o{constructor(e,t,i,s){if(this.unit=e||"SECONDS",this.compare=t||"SHORTER",this.durationInput=i&&Object(n.u)(i)?Math.abs(Number(i)):60,s)if("string"==typeof s){const e=s.split(",");this.audit=e}else this.audit=s;else this.audit=r}get numberOfSelected(){return this.audit.length}getBodyParameters(){if(!this.audit.length)return null;const e={},t=this.audit.includes(s.NO_PROJECT),i=this.audit.includes(s.NO_TASK);if(e.withoutProject=t,e.withoutTask=i,this.audit.includes(s.SUSPICIOUS)){const t="SHORTER"===this.compare;let i=this.durationInput;"MINUTES"===this.unit?i*=60:"HOURS"===this.unit&&(i=60*i*60),e.duration=i,e.durationShorter=t}return e}generateUrlParameters(){const e={};return this.audit.length?(e.audit=this.audit.join(","),e.unit=this.unit,e.compare=this.compare,e.durationInput=this.durationInput,e):e}isDirty(){return this.audit.length>0}static clone(e){return e?new o(e.unit,e.compare,e.durationInput,e.audit?e.audit.slice():[]):new o}}},SO3W:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("GYbH");class s{constructor(e){this._statusType=null==e?void 0:e.statusType,this._changedByUserId=null==e?void 0:e.changedByUserId,this._changedByUserName=null==e?void 0:e.changedByUserName,this._changedAt=null==e?void 0:e.changedAt,this._note=null==e?void 0:e.note}get statusType(){return this._statusType}get changedByUserId(){return this._changedByUserId}get changedByUserName(){return this._changedByUserName}get changedAt(){return this._changedAt}get note(){return this._note}}class r{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._policyId=null==e?void 0:e.policyId,this._userId=null==e?void 0:e.userId,this._timeOffPeriod=new n.a(null==e?void 0:e.timeOffPeriod),this._note=null==e?void 0:e.note,this._status=new s(null==e?void 0:e.status),this._balanceDiff=null==e?void 0:e.balanceDiff,this._createdAt=null==e?void 0:e.createdAt,this._timeUnit=null==e?void 0:e.timeUnit,this._userImageUrl=null==e?void 0:e.userImageUrl,this._canBeApproved=null==e?void 0:e.canBeApproved,this._canBeWithdrawn=null==e?void 0:e.canBeWithdrawn,this._userName=null==e?void 0:e.userName,this._userEmail=null==e?void 0:e.userEmail,this._policyName=null==e?void 0:e.policyName,this._balance=null==e?void 0:e.balance,this._requesterUserId=null==e?void 0:e.requesterUserId,this._requesterUserName=null==e?void 0:e.requesterUserName}get id(){return this._id}get workspaceId(){return this._workspaceId}get policyId(){return this._policyId}get userId(){return this._userId}get timeOffPeriod(){return this._timeOffPeriod}get note(){return this._note}get status(){return this._status}get balanceDiff(){return this._balanceDiff}get createdAt(){return this._createdAt}set status(e){this._status=e}set note(e){this._note=e}set workspaceId(e){this._workspaceId=e}set policyId(e){this._policyId=e}set userId(e){this._userId=e}set timeOffPeriod(e){this._timeOffPeriod=e}get userName(){return this._userName}get userEmail(){return this._userEmail}get policyName(){return this._policyName}get balance(){return this._balance}get timeUnit(){return this._timeUnit}get userImageUrl(){return this._userImageUrl}get canBeApproved(){return this._canBeApproved}get canBeWithdrawn(){return this._canBeWithdrawn}get requesterUserId(){return this._requesterUserId}get requesterUserName(){return this._requesterUserName}}},"T+Hu":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));var n=i("YjdQ");function s(e,t,i){return{key:e,label:t,value:i.map(e=>new n.a(e))}}function r(e,t,i){return{key:e,label:t,value:i.map(e=>new n.a(e.entity,e.selected,e.isDisabled))}}},T9nA:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._date=null==e?void 0:e.date,this._total=null==e?void 0:e.total,this._dateRange=null==e?void 0:e.dateRange,this._dailyTotals=null==e?void 0:e.dailyTotals}get date(){return this._date}get total(){return this._total}get dateRange(){return this._dateRange}get dailyTotals(){return this._dailyTotals}}},Tg7i:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("fXoL"),s=i("Kj3r"),r=i("1G5W"),o=i("XNiG"),a=i("NHP+"),c=i("zDGq"),l=i("UMzN"),u=i("3Pt+"),d=i("dlKe"),h=i("ofXK"),p=i("sYmb");const b=["filterInput"],f=function(e){return{entity:e}};function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",10),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.emitSelected.emit(t.noEntity)})),n.Zc(1),n.oc(2,"translate"),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",n.qc(2,1,"PROJECTS.FILTER_DROPDOWN.NO_ENTITY_LABEL",n.Bc(4,f,e.entity))," ")}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",10),n.jc("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc(2).emitSelected.emit(i)})),n.Zc(1),n.Wb()}if(2&e){const e=t.$implicit;n.Cb(1),n.bd(" ",e.name," ")}}function v(e,t){if(1&e&&(n.Xb(0,"div",7),n.Xc(1,m,3,6,"a",8),n.Xc(2,g,2,1,"a",9),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.hideWithoutValue),n.Cb(1),n.wc("ngForOf",e.entities)}}const C=function(e){return{entityInPlural:e}};function E(e,t){if(1&e&&(n.Xb(0,"div"),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",n.qc(2,1,"PROJECTS.FILTER_DROPDOWN.NO_MATCHING_ENTITIES_LABEL",n.Bc(4,C,e.entityInPlural.toLowerCase()))," ")}}function w(e,t){if(1&e&&(n.Xb(0,"div"),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",n.qc(2,1,"PROJECTS.FILTER_DROPDOWN.NO_ENTITIES_YET_LABEL",n.Bc(4,C,e.entityInPlural.toLowerCase()))," ")}}function S(e,t){1&e&&(n.Xb(0,"div",16),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.START_TYPING_LABEL")," "))}const y=function(e,t){return{nameFilter:e,entity:t}};function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Zc(1),n.oc(2,"translate"),n.Xb(3,"a",17),n.jc("click",(function(){return n.Oc(e),n.nc(2).createNew()})),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",n.pc(2,2,"GLOBAL.CREATE_ENTITY_LABEL")," "),n.Cb(3),n.bd(" ",n.qc(5,4,"PROJECTS.SHARED.CREATE_ENTITY_LABEL_2",n.Cc(7,y,"'"+e.nameFilter+"'",e.entity)),". ")}}function A(e,t){if(1&e&&(n.Xb(0,"div",11),n.Xb(1,"div",12),n.Xc(2,E,3,6,"div",13),n.Xc(3,w,3,6,"ng-template",null,14,n.Yc),n.Xc(5,S,3,3,"div",15),n.Xc(6,O,6,10,"div",15),n.Wb(),n.Wb()),2&e){const e=n.Lc(4),t=n.nc();n.Cb(2),n.wc("ngIf",null==t.entities?null:t.entities.length)("ngIfElse",e),n.Cb(3),n.wc("ngIf",!t.nameFilter&&t.canUserCreate),n.Cb(1),n.wc("ngIf",t.nameFilter&&t.nameFilter.trim().length&&t.canUserCreate)}}let k=(()=>{class e{constructor(e){this.keyboardService=e,this.canUserCreate=!0,this.emitSelected=new n.n,this.loadMore=new n.n,this.nameFilterChanged=new n.n,this.createAndSet=new n.n,this.query={name:"",page:1},this.inputDebouncer=new o.a,this.unsubscribe$=new a.a}ngOnInit(){this.noEntity=new l.a({id:"",name:"No "+this.entity}),this.inputDebouncer.pipe(Object(s.a)(300)).subscribe(e=>{this.query.name=e,this.query.page=1,this.nameFilterChanged.emit(this.query)}),this.keyboardService.keyboardCtrlEnter$.pipe(Object(r.a)(this.unsubscribe$)).subscribe(()=>{this.entities&&0===this.entities.length&&this.createNew()})}ngAfterViewInit(){this.filterInput.nativeElement.focus()}ngOnDestroy(){this.query.name&&(this.query.name="",this.query.page=1,this.nameFilterChanged.emit(this.query))}onScroll(){this.query.page=this.query.page+1,this.loadMore.emit(this.query)}inputValueChanged(e){this.inputDebouncer.next(e)}createNew(){this.createAndSet.emit(this.nameFilter)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(c.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["filter-dropdown"]],viewQuery:function(e,t){var i;1&e&&n.gd(b,!0),2&e&&n.Kc(i=n.kc())&&(t.filterInput=i.first)},inputs:{entity:"entity",entities:"entities",hideWithoutValue:"hideWithoutValue",canUserCreate:"canUserCreate",entityInPlural:"entityInPlural"},outputs:{emitSelected:"emitSelected",loadMore:"loadMore",nameFilterChanged:"nameFilterChanged",createAndSet:"createAndSet"},decls:8,vars:12,consts:[[1,"cl-dropdown-menu-header"],["type","text",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange"],["filterInput",""],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-section",4,"ngIf"],["class","cl-dropdown-menu-sub-header",4,"ngIf"],[1,"cl-dropdown-section"],["class","cl-dropdown-item cl-cut-text","clickCloseDropdown","",3,"click",4,"ngIf"],["class","cl-dropdown-item cl-cut-text","clickCloseDropdown","",3,"click",4,"ngFor","ngForOf"],["clickCloseDropdown","",1,"cl-dropdown-item","cl-cut-text",3,"click"],[1,"cl-dropdown-menu-sub-header"],[1,"cl-dropdown-item-padding"],[4,"ngIf","ngIfElse"],["noClients",""],["class","cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-h6","cl-mb-0"],["clickCloseDropdown","",1,"cl-color-blue",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"input",1,2),n.jc("ngModelChange",(function(e){return t.nameFilter=e}))("ngModelChange",(function(e){return t.inputValueChanged(e)})),n.oc(3,"translate"),n.Wb(),n.Wb(),n.Xb(4,"div",3),n.jc("scrolled",(function(){return t.onScroll()})),n.Xb(5,"div",4),n.Xc(6,v,3,2,"div",5),n.Wb(),n.Wb(),n.Xc(7,A,7,4,"div",6)),2&e&&(n.Cb(1),n.wc("placeholder",n.qc(3,7,"GLOBAL.ADD_FIND_PLACEHOLDER_LABEL",n.Bc(10,f,t.entityInPlural||t.entity)))("ngModel",t.nameFilter),n.Cb(3),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",t.entities&&t.entities.length>0),n.Cb(1),n.wc("ngIf",!t.entities||t.entities&&0===t.entities.length))},directives:[u.c,u.s,u.v,d.a,h.u,h.t],pipes:[p.e],encapsulation:2}),e})()},TmxI:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("2rWG"),s=i("XNiG"),r=i("Kj3r"),o=i("1G5W"),a=i("fXoL");let c=(()=>{class e{constructor(e,t,i){this.parent=e,this.el=t,this.renderer=i,this.debounceTime=100,this.debouncer$=new s.a,this.unsubscribe$=new s.a}set isHoverEnabled(e){this._isHoverEnabled=e,this._isHoverEnabled?this.listenerFn=this.renderer.listen(this.el.nativeElement,"mouseover",e=>{this.onMouseOver()}):this.removeListeners()}get isHoverEnabled(){return this._isHoverEnabled}ngOnInit(){this.debouncer$.pipe(Object(r.a)(this.debounceTime),Object(o.a)(this.unsubscribe$)).subscribe(e=>{e&&this.parent.showDropdown()})}ngOnDestroy(){this.removeListeners(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onMouseOver(){this.debouncer$.next(!0)}removeListeners(){this.listenerFn&&this.listenerFn()}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(n.a),a.Rb(a.l),a.Rb(a.F))},e.\u0275dir=a.Mb({type:e,selectors:[["","dropdownKeyButtonHover",""]],inputs:{isHoverEnabled:"isHoverEnabled",debounceTime:"debounceTime"}}),e})()},TxvX:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("Tj/N"),r=i("fXoL");let o=(()=>{class e{constructor(){this.user=new s.a(JSON.parse(localStorage.getItem("user")))}transform(e){var t,i;const s=n.utc(e),r=(null===(i=null===(t=this.user)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.dateFormat)||"MM/DD/YYYY";return s.format(r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"formatDateSimple",type:e,pure:!0}),e})()},URdK:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("fXoL"),s=i("hkzH"),r=i("cGux"),o=i("8+Zx"),a=i("JBiw"),c=i("lGQG"),l=i("XNiG"),u=i("1Tmk"),d=i("QTph"),h=i("y+xF"),p=i("+yX9"),b=i("ePBx"),f=i("sYmb"),m=i("qUN8"),g=i("D0uv");function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",1),n.jc("loadMore",(function(){return n.Oc(e),n.nc().loadMoreUsers()}))("onSearchChange",(function(t){return n.Oc(e),n.nc().onSearchChange(t)}))("onFilterOptionChange",(function(t){return n.Oc(e),n.nc().onFilterOptionChange(t)}))("onChange",(function(t){return n.Oc(e),n.nc().onCloseDropdown(t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc();n.xc("placeholder",n.pc(1,10,"TEAMS.MEMBERS.FIND")),n.wc("preventOfflineFiltering",!0)("noResetOnFilterChange",!0)("filterName","team")("showSelectAll",!0)("checkboxValues",e.checkboxValues)("selectableMaps",e.selectableMaps)("filterOptions",e.userFilterOptions)("searchValue",e.filterQuery.name)("countMap",e.userCount)}}const C="users",E="userGroups";let w=(()=>{class e{constructor(e,t,i,a,c,u){this.authService=e,this.workspaceService=t,this.userGroupV1Service=i,this.userGroupService=a,this.ptoService=c,this.translate=u,this.shouldResetAfterResult=!1,this.withPending=!1,this.forceFilter=!1,this.result=new n.n,this.filterQuery={page:1,limit:50,name:"",email:"",forceFilter:!1,statuses:[s.l.ACTIVE,s.l.PENDING],status:s.l.ACTIVE},this.userFilterOptions=s.v,this.userCount=new r.a,this.checkboxValues=new o.a,this.reachedLimit={},this.unsubscribe$=new l.a}set users(e){this._users=e,this.checkForUser()}set userGroups(e){this._userGroups=e,this.checkForGroup()}set reset(e){e&&(this.reachedLimit[C]=!1,this.reachedLimit[E]=!1,this.filterQuery.page=1,e&&this.checkboxValues.reset(),this.fetchUsersAndGroups())}get users(){return this._users}get userGroups(){return this._userGroups}ngOnInit(){this.filterQuery.forceFilter=this.forceFilter,this.userFilterOptions=this.withPending?s.w:s.v,this.user=this.authService.getUser(),this.workspace=this.workspaceService.getLocalDefaultWorkspace();const e=[new h.a(C)];e.unshift(new h.a(E,null,{label:this.translate.instant("GLOBAL.GROUPS_LABEL")})),this.selectableMaps=new a.a(e),this.checkForUserAndGroupIds(),this.fetchUsersAndGroups()}checkForUserAndGroupIds(){this.checkForUser(),this.checkForGroup()}checkForUser(){var e,t,i,n;this.users&&(null===(e=this.users.ids)||void 0===e?void 0:e.length)&&this.checkboxValues.pushIds(C,[...this.users.ids]),this.checkboxValues.exclude=(null===(t=this.users)||void 0===t?void 0:t.contains)===s.d.DOES_NOT_CONTAIN,this.checkboxValues.options.status=(null===(i=this.users)||void 0===i?void 0:i.status)||s.l.ACTIVE,this.filterQuery.status=(null===(n=this.users)||void 0===n?void 0:n.status)||s.l.ACTIVE}checkForGroup(){var e,t,i,n;this.userGroups&&(null===(t=null===(e=this.userGroups)||void 0===e?void 0:e.ids)||void 0===t?void 0:t.length)&&this.checkboxValues.pushIds(E,[...this.userGroups.ids]),this.checkboxValues.exclude=(null===(i=this.userGroups)||void 0===i?void 0:i.contains)===s.d.DOES_NOT_CONTAIN,this.checkboxValues.options.status=(null===(n=this.userGroups)||void 0===n?void 0:n.status)||s.l.ACTIVE}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}fetchUsersAndGroups(){this.getUsers(),this.getUserGroups()}getUsers(){this.reachedLimit[C]||this.getAllUsers()}getUserGroups(){this.reachedLimit[E]||(this.filterQuery.status==s.l.INACTIVE||1===this.filterQuery.statuses.length&&this.filterQuery.statuses.includes(s.l.INACTIVE)?this.selectableMaps.resetMap(E):this.getAllUSerGroups())}loadMoreUsers(){this.filterQuery.page++,this.fetchUsersAndGroups()}onSearchChange(e){this.filterQuery.email=e,this.filterQuery.name=e,this.reachedLimit[C]=!1,this.reachedLimit[E]=!1,this.filterQuery.page=1,this.fetchUsersAndGroups()}onFilterOptionChange(e){this.filterQuery.page=1,this.reachedLimit[C]=!1,this.reachedLimit[E]=!1,this.filterQuery.status=e.value,this.filterQuery.statuses=e.value===s.l.ALL?[s.l.ACTIVE,s.l.INACTIVE,s.l.PENDING]:e.value===s.l.ACTIVE?[s.l.ACTIVE,s.l.PENDING]:[e.value],this.fetchUsersAndGroups()}onCloseDropdown(e){this.result.emit({users:{contains:e.checkboxValues.exclude?s.d.DOES_NOT_CONTAIN:s.d.CONTAINS,ids:e.checkboxValues.map.users,status:e.checkboxValues.options.status},userGroups:{contains:e.checkboxValues.exclude?s.d.DOES_NOT_CONTAIN:s.d.CONTAINS,ids:e.checkboxValues.map.userGroups,status:e.checkboxValues.options.status},numberOfSelected:e.numberOfSelected,checkboxValues:e.checkboxValues,selectableMaps:e.selectableMaps,label:e.checkboxValues.names.toString()}),this.shouldResetAfterResult&&this.checkboxValues.reset()}getAllUsers(){this.workspaceService.getReportsFilterTeamMembers(this.filterQuery).subscribe(({count:e,users:t})=>{this.fillSelectableMapsUsers(e,t)})}getAllUSerGroups(){this.userGroupV1Service.getForReportFilter(this.filterQuery).subscribe(({count:e,users:t})=>{this.fillSelectableMapsGroups(e,t)})}fillSelectableMapsUsers(e,t){var i,n,s;!!this.filterQuery.name||this.userCount.set(C,e),1===this.filterQuery.page&&(null===(i=this.selectableMaps)||void 0===i||i.resetMap(C));const r={label:this.translate.instant("GLOBAL.USERS_LABEL")};null===(n=this.selectableMaps)||void 0===n||n.pushToMap(C,t,r);const o=null===(s=this.selectableMaps)||void 0===s?void 0:s.countSelectablesOf(C);this.reachedLimit[C]=o>=e||(null==t?void 0:t.length)<this.filterQuery.limit}fillSelectableMapsGroups(e,t){if(0===e)return void this.selectableMaps.removeMap(E);const i=t.length,n=t.filter(e=>"Admins"!==e.name);t=n,!!this.filterQuery.name||this.userCount.set(E,e),1===this.filterQuery.page&&this.selectableMaps.resetMap(E);const s={label:this.translate.instant("GLOBAL.GROUPS_LABEL")};this.selectableMaps.pushToMap(E,t,s,!0);const r=this.selectableMaps.countSelectablesOf(E);this.reachedLimit[E]=r>=e||i<this.filterQuery.limit}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(c.a),n.Rb(u.a),n.Rb(d.a),n.Rb(b.a),n.Rb(p.b),n.Rb(f.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["app-user-dropdown"]],inputs:{shouldResetAfterResult:"shouldResetAfterResult",withPending:"withPending",forceFilter:"forceFilter",users:"users",userGroups:"userGroups",reset:"reset"},outputs:{result:"result"},decls:1,vars:0,consts:[[3,"placeholder","preventOfflineFiltering","noResetOnFilterChange","filterName","showSelectAll","checkboxValues","selectableMaps","filterOptions","searchValue","countMap","loadMore","onSearchChange","onFilterOptionChange","onChange",4,"dropdownKeyContent"],[3,"placeholder","preventOfflineFiltering","noResetOnFilterChange","filterName","showSelectAll","checkboxValues","selectableMaps","filterOptions","searchValue","countMap","loadMore","onSearchChange","onFilterOptionChange","onChange"]],template:function(e,t){1&e&&n.Xc(0,v,2,12,"dropdown-checkbox",0)},directives:[m.a,g.a],pipes:[f.e],encapsulation:2}),e})()},UnIm:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("XNiG"),s=i("5Iok"),r=i("xoOP"),o=i("Hf8F"),a=i("f0Wu"),c=i("yK97"),l=i("fXoL");let u=(()=>{class e{constructor(){this.entryToPlay$=new n.a,this.newEntryCreated$=new n.a,this.createdProject$=new n.a,this.expandedGroups={},this.numberOfEntriesChanged$=new n.a}setNewEntryCreated(e){this.newEntryCreated$.next(e)}setEntryToPlay(e){const t=s.a.clone(e);t.id=null,this.entryToPlay$.next(t)}setIsGroupDisabled(e){this.GROUPING_IS_DISABLED=e}numberOfEntriesChanged(){this.numberOfEntriesChanged$.next()}transformEntryGroup(e){const t=[];for(let i=0;i<e.timeEntries.length;i++)this.addElementToEntryGroup(e.timeEntries[i],t,e.date);return t.forEach(e=>{e.children&&(Object(r.F)(e.children),this.setDateAndDurationForSameEntries(e))}),e.timeEntries=t,Object(r.F)(e.timeEntries),e}calculateTotalDuration(e){const t=new o.a;return e.forEach(e=>{t.add(e.timeInterval.duration)}),t.asString()}addElementToEntryGroup(e,t,i){e.isChild=!1;const n=t.length;this.expandedGroups[i]||(this.expandedGroups[i]=[]);for(let r=0;r<n;r++){const n=t[r];if(!this.GROUPING_IS_DISABLED&&e.sameGroupWith(n)){if(n.children)e.isChild=!0,n.children.push(e);else{const t=s.a.clone(n);t.isChild=!0,e.isChild=!0,n.id+="_PARENT",n.expanded=this.expandedGroups[i].indexOf(n.id)>-1,n.children=[],n.children.push(t),n.children.push(e)}return r}}return t.push(e),-1}setDateAndDurationForSameEntries(e){if(e.children&&e.children.length){e.timeInterval.start=e.children[0].timeInterval.start,e.timeInterval.end=e.children[0].timeInterval.end;const t=new o.a(0);e.children.forEach(i=>{a(i.timeInterval.start).isBefore(e.timeInterval.start)&&(e.timeInterval.start=i.timeInterval.start),a(i.timeInterval.end).isAfter(e.timeInterval.end)&&(e.timeInterval.end=i.timeInterval.end),t.add(i.timeInterval.duration)}),e.timeInterval.duration=t.asString(),e.timeInterval=new c.a(e.timeInterval)}}refreshGroupView(e){let t=[];const i=e.timeEntries;this.expandedGroups[e.date]=[];for(let n=0;n<i.length;n++)i[n].children?(t=t.concat(i[n].children),i[n].expanded&&this.expandedGroups[e.date].push(i[n].id)):t.push(i[n]);e.timeEntries=t,this.transformEntryGroup(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},V3bs:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("DoKE"),s=i("XNiG"),r=i("gcYM"),o=i("1G5W"),a=i("fXoL");let c=(()=>{class e{constructor(e){this.elementRef=e,this.debouncer$=new s.a,this.unsubscribe$=new s.a,this.keydown=e=>{const t=e.keyCode?e.keyCode:e.which;if(t!==n.i)return t===n.a?(this.debouncer$.next({e,isDown:!0}),void e.preventDefault()):t===n.b?(this.debouncer$.next({e,isDown:!1}),void e.preventDefault()):void 0;this.tabNavigation(e)},this.addListener(),this.debouncer$.pipe(Object(r.a)(150),Object(o.a)(this.unsubscribe$)).subscribe(({e,isDown:t})=>this.arrowPressed(e,t))}ngOnDestroy(){this.removeListener(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}addListener(){window.addEventListener("keydown",this.keydown)}removeListener(){window.removeEventListener("keydown",this.keydown)}arrowPressed(e,t){const i=e.target,n=this.getParent(i),s=this.getSiblingGroup(i,n);if(!s.length)return;const r=Number(i.getAttribute("tabindex"));let o;o=t?this.getNextGroup(i,s):this.getPreviousGroup(i,s,r<0),this.focusOnGroup(o,!t&&0===r)}tabNavigation(e){const t=!e.shiftKey,i=e.target;let n=this.getParent(i);Number(i.getAttribute("tabindex"))<0&&(n=this.getParent(n));const s=this.getSiblingGroup(i,n,0,!1);if(!s.length)return;let r;r=t?this.getNextGroup(i,s):this.getPreviousGroup(i,s,!1),r&&(this.focusOnGroup(r),e.preventDefault())}getParent(e){const t=Number(e.getAttribute("tabindex"));return t>=0?this.elementRef.nativeElement:this.getParentByTabIndex(e,t+1)}getParentByTabIndex(e,t){for(;e&&e!==document;e=e.parentNode){const i=e.getAttribute("tabindex");if(i&&Number(i)===t)return e}return null}getSiblingGroup(e,t,i,n=!0){const s=void 0!==i?i:Number(e.getAttribute("tabindex"));let r=Array.from(t.querySelectorAll("[tabindex]"));return r=r.filter(e=>Number(e.getAttribute("tabindex"))===s&&!e.disabled),n&&(r=r.filter(e=>!e.hasAttribute("dropdownClose"))),r}getNextGroup(e,t){for(let i=0;i<t.length;i++)if(4===e.compareDocumentPosition(t[i]))return t[i];return t[0]||e}getPreviousGroup(e,t,i=!0){for(let n=t.length-1;n>=0;n--)if(2===e.compareDocumentPosition(t[n]))return t[n];return i?t[t.length-1]||e:null}focusOnGroup(e,t=!1){if(!e)return;const i=e.querySelectorAll("[tabindex]");let n=e;i.length&&(n=t?i[i.length-1]:i[0]),n.focus()}}return e.\u0275fac=function(t){return new(t||e)(a.Rb(a.l))},e.\u0275dir=a.Mb({type:e,selectors:[["","arrowNavigation",""]]}),e})()},VHTb:function(e,t,i){"use strict";i.d(t,"a",(function(){return ct}));var n=i("fXoL"),s=i("XNiG"),r=i("8+Zx"),o=i("cGux"),a=i("1Tmk"),c=i("y+xF"),l=i("JBiw"),u=i("lGQG"),d=i("1G5W"),h=i("QTph"),p=i("hkzH"),b=i("Jmk/"),f=i("jpmO"),m=i("i6c7"),g=i("lBcp"),v=i("nLyk"),C=i("lvCY"),E=i("xzCI"),w=i("PW4C"),S=i("qfBg"),y=i("ePBx"),O=i("VTb6"),A=i("/wxh"),k=i("i/9y"),T=i("sYmb"),D=i("ofXK"),I=i("2rWG"),_=i("sbmM"),R=i("qUN8"),L=i("xoOP"),x=i("1YN2"),P=i("e0xV"),j=i("3Pt+"),M=i("okBH");function X(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"div",7),n.Xb(2,"input-search",8),n.jc("onSearchChange",(function(t){return n.Oc(e),n.nc().searchValue=t})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("debounceTime",0)("autofocus",!0)("search",e.searchValue)("placeholder",e.placeholder)}}function F(e,t){if(1&e&&(n.Xb(0,"div",12),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(1),n.bd(" ",n.pc(2,1,e.label)," ")}}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",13),n.Xb(1,"div",14),n.Xb(2,"input",15),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.selected=i}))("change",(function(){n.Oc(e);const i=t.$implicit,s=n.nc().$implicit;return n.nc().toggleCheckBox(i,s.key)})),n.Wb(),n.Xb(3,"label",16),n.Xb(4,"div",17),n.Zc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=t.index,s=n.nc().index,r=n.nc();n.wc("title",r.getTitle(e)),n.Cb(2),n.wc("ngModel",e.selected)("id",s+"_"+i)("disabled",e.isDisabled),n.Cb(1),n.wc("for",s+"_"+i),n.Cb(2),n.bd(" ",e.entity.name," ")}}function B(e,t){if(1&e&&(n.Xb(0,"div",9),n.Xc(1,F,3,3,"div",10),n.Xc(2,W,6,6,"div",11),n.oc(3,"sortBy"),n.Wb()),2&e){const e=t.$implicit,i=n.nc();n.Cb(1),n.wc("ngIf",!e.hideTitle&&(null==e.value?null:e.value.length)),n.Cb(1),n.wc("ngForOf",n.rc(3,3,i.filterSelectable(e.value),i.sortByNameMapper,i.triggerPipeDetection))("ngForTrackBy",i.trackByFn)}}let N=(()=>{class e{constructor(e,t){this.cd=e,this.translateService=t,this.placeholder="Search",this.showSearch=!0,this.resizeableName="dropdownCheckbox",this.isResizeable=!0,this.onChange=new n.n,this.triggerPipeDetection=0,this.unsubscribe$=new s.a,this.sortByNameMapper=e=>e.entity.name}ngOnInit(){this.initialize(),this.checkboxValuesBackup=r.a.clone(this.checkboxValues),this.subscribeToChanges()}ngOnDestroy(){this.emitOnClose(),this.unsubscribe$.next(!0),this.unsubscribe$.complete()}emitOnClose(){const e=this.checkboxValues.sameWith(this.checkboxValuesBackup),t=this.generateResponse();e||this.onChange.emit(t)}generateResponse(){this.checkboxValues.removeWithoutIfNeed(),r.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,"id",this.singleMapProperty);const e=this.checkboxValues.getSelectedData(this.selectableMaps,0,!0);return{checkboxValues:this.checkboxValues,selectableMaps:this.selectableMaps,numberOfSelected:e.numberOfSelected,numberOfSelectedApproximately:e.numberOfSelectedApproximately,label:e.label,includingNew:!1}}initialize(){this.initSelected(),this.checkIsSelectedMaximum()}subscribeToChanges(){this.selectableMaps.onChange.pipe(Object(d.a)(this.unsubscribe$)).subscribe(()=>{this.initSelected(),this.checkIsSelectedMaximum(),this.triggerPipeDetection++,this.cd.detectChanges()})}initSelected(){this.selectableMaps&&this.selectableMaps.maps&&(this.checkboxValues?(this.checkboxValues.names=[],r.a.updateMapFromValuesData(this.checkboxValues,this.selectableMaps,"id",this.singleMapProperty)):this.checkboxValues=r.a.generateValuesDataFromMap(this.selectableMaps.maps,"id",this.singleMapProperty))}toggleCheckBox(e,t){this.updateCheckboxValues(e,t),this.checkIsSelectedMaximum()}filterSelectable(e){return this.searchValue?e.filter(e=>Object(L.z)(e.entity.name,this.searchValue)):e}trackByFn(e,t){return t}trackByFnMap(e,t){return t.key}getTitle(e){return e.isDisabled&&this.maxLimitOfSelected?this.translateService.instant("SHARED_MODULES.DROPDOWN_CHECKBOX_LITE.FILTER_LIMIT",{filterLimit:this.maxLimitOfSelected}):""}updateCheckboxValues(e,t){this.checkboxValues.updateSingleMap(t=this.singleMapProperty||t,e.entity.id,e.selected,e.entity.name||e.entity.email)}checkIsSelectedMaximum(){this.selectableMaps.updateDisabledForSelectedLimit(this.maxLimitOfSelected)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(T.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox-lite"]],inputs:{selectableMaps:"selectableMaps",checkboxValues:"checkboxValues",singleMapProperty:"singleMapProperty",searchValue:"searchValue",placeholder:"placeholder",showSearch:"showSearch",resizeableName:"resizeableName",isResizeable:"isResizeable",maxLimitOfSelected:"maxLimitOfSelected"},outputs:{onChange:"onChange"},decls:6,vars:5,consts:[["resizeable","",1,"cl-dropdown-menu",3,"isResizeable","resizeableName"],["class","cl-dropdown-menu-header",4,"ngIf"],[1,"cl-scroll-area"],[1,"cl-dropdown-section-wrapper"],["class","cl-dropdown-section",4,"ngFor","ngForOf","ngForTrackBy"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],[1,"cl-dropdown-section"],["class","cl-dropdown-header cl-h5",4,"ngIf"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",3,"title",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cl-dropdown-header","cl-h5"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper",3,"title"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","disabled","ngModelChange","change"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xc(1,X,3,4,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xc(4,B,4,7,"div",4),n.Wb(),n.Wb(),n.Sb(5,"span",5),n.Wb()),2&e&&(n.wc("isResizeable",t.isResizeable)("resizeableName",t.resizeableName),n.Cb(1),n.wc("ngIf",t.showSearch),n.Cb(3),n.wc("ngForOf",null==t.selectableMaps?null:t.selectableMaps.maps)("ngForTrackBy",t.trackByFnMap))},directives:[x.a,D.u,D.t,P.a,j.a,j.s,j.v],pipes:[M.a,T.e],encapsulation:2,changeDetection:0}),e})();var G=i("1kSV"),U=i("URdK"),V=i("D0uv");function H(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"div",7),n.Xb(2,"div",8),n.Xb(3,"div",9),n.Xb(4,"input",10),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().isSelected=t})),n.Wb(),n.Xb(5,"label",11),n.Xb(6,"div",12),n.Zc(7),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(4),n.wc("ngModel",e.isSelected),n.Cb(3),n.bd(" ",e.checkboxLabel," ")}}let Y=(()=>{class e{constructor(){this.hideCheckbox=!1,this.onChange=new n.n}ngOnInit(){this.backupValues={searchTerm:this.searchTerm,isSelected:this.isSelected}}ngOnDestroy(){this.emit()}emit(){this.backupValues.searchTerm===this.searchTerm&&this.backupValues.isSelected===this.isSelected||this.onChange.emit({searchTerm:this.searchTerm,isSelected:this.isSelected})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-input"]],inputs:{searchTerm:"searchTerm",isSelected:"isSelected",placeholder:"placeholder",checkboxLabel:"checkboxLabel",hideCheckbox:"hideCheckbox"},outputs:{onChange:"onChange"},decls:6,vars:5,consts:[[1,"cl-dropdown-menu"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","autofocus","search","placeholder","onSearchChange"],["class","cl-dropdown-section-wrapper",4,"ngIf"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-section-wrapper"],[1,"cl-dropdown-section","cl-pt-0"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","dropdownItemSelectAll",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","dropdownItemSelectAll",1,"cl-custom-control-label"],[1,"cl-cut-text"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"input-search",3),n.jc("onSearchChange",(function(e){return t.searchTerm=e})),n.Wb(),n.Wb(),n.Wb(),n.Xc(4,H,8,2,"div",4),n.Sb(5,"span",5),n.Wb()),2&e&&(n.Cb(3),n.wc("debounceTime",0)("autofocus",!0)("search",t.searchTerm)("placeholder",t.placeholder),n.Cb(1),n.wc("ngIf",!t.hideCheckbox))},directives:[P.a,D.u,j.a,j.s,j.v],encapsulation:2,changeDetection:0}),e})();var $=i("f1uh"),z=i("91AR");function Z(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",5),n.Xb(2,"div",6),n.Xb(3,"input",7),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.isChecked=i})),n.Wb(),n.Xb(4,"label",8),n.Xb(5,"div",9),n.Zc(6),n.oc(7,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Xb(8,"div",10),n.Xb(9,"input",11),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.value=i}))("ngModelChange",(function(){return t.$implicit.isChecked=!0})),n.Wb(),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(3),n.wc("id",e.type)("ngModel",e.isChecked),n.Cb(1),n.wc("for",e.type),n.Cb(2),n.ad(n.pc(7,5,e.label)),n.Cb(3),n.wc("ngModel",e.value)}}let K=(()=>{class e{constructor(){this.onChange=new n.n,this.checkboxLabel="Empty field"}ngOnInit(){this.valueBackup=this.items.map(e=>new z.a(e))}ngOnDestroy(){this.emit()}emit(){this.valueBackup.filter((e,t)=>!e.sameWith(this.items[t])).length&&this.onChange.emit(this.items)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-number-range"]],inputs:{items:"items",checkboxLabel:"checkboxLabel"},outputs:{onChange:"onChange"},decls:5,vars:1,consts:[[1,"cl-dropdown-menu"],[1,"cl-dropdown-section-wrapper"],[1,"cl-dropdown-section","cl-pt-0"],[4,"ngFor","ngForOf"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper","cl-d-flex","cl-pr-2","cl-align-items-center","cl-justify-content-between"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label","pointer",3,"for"],[1,"cl-cut-text"],[1,"cl-py-1"],["spellcheck","false","autocomplete","off","type","number",1,"cl-form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xc(3,Z,10,7,"ng-container",3),n.Wb(),n.Wb(),n.Sb(4,"span",4),n.Wb()),2&e&&(n.Cb(3),n.wc("ngForOf",t.items))},directives:[D.t,j.a,j.s,j.v,j.y,j.c],pipes:[T.e],encapsulation:2,changeDetection:0}),e})();function q(e,t){1&e&&(n.Xb(0,"div",17),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.FILTER_LABEL")," "))}function J(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox-lite",21),n.jc("onChange",(function(t){return n.Oc(e),n.nc(2).onActiveFilterChanged(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.wc("placeholder","Find filter")("checkboxValues",e.activeFiltersValues)("selectableMaps",e.activeFiltersMap)("resizeableName","dropdownFindFilter")("showSearch",!1)("maxLimitOfSelected",10)}}function Q(e,t){1&e&&(n.Xb(0,"div",18),n.Xb(1,"span",19),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Xc(4,J,1,6,"dropdown-checkbox-lite",20),n.Wb()),2&e&&(n.Cb(2),n.ad(n.pc(3,1,"GLOBAL.FILTER_LABEL")))}function ee(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]," ")}}const te=function(e,t,i){return{ids:e,contains:t,status:i}};function ie(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",24),n.jc("onClose",(function(){n.Oc(e);const t=n.nc(2);return t.isOpenedMap[t.ReportFilter.USERS_AND_GROUP]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc(2);return t.isOpenedMap[t.ReportFilter.USERS_AND_GROUP]=!0,t.resetUserAndGroups=!1})),n.Xb(2,"div",25),n.Zc(3),n.oc(4,"translate"),n.Xc(5,ee,2,1,"span",26),n.Wb(),n.Xb(6,"app-user-dropdown",27),n.jc("result",(function(t){n.Oc(e);const i=n.nc(2);return i.valuesData[i.ReportFilter.USERS_AND_GROUP]=t.checkboxValues,i.filterMaps[i.ReportFilter.USERS_AND_GROUP]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.USERS_AND_GROUP,t)})),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngbTooltip",e.labels[e.ReportFilter.USERS_AND_GROUP]?e.labels[e.ReportFilter.USERS_AND_GROUP]+" ("+e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]+")":""),n.Cb(1),n.bd(" ",n.pc(4,7,"GLOBAL.TEAM_LABEL")," "),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]),n.Cb(1),n.wc("reset",e.resetUserAndGroups)("withPending",!0)("users",n.Dc(9,te,null==e.valuesData[e.ReportFilter.USERS_AND_GROUP]||null==e.valuesData[e.ReportFilter.USERS_AND_GROUP].map?null:e.valuesData[e.ReportFilter.USERS_AND_GROUP].map.users,null!=e.valuesData[e.ReportFilter.USERS_AND_GROUP]&&e.valuesData[e.ReportFilter.USERS_AND_GROUP].exclude?e.Contains.DOES_NOT_CONTAIN:e.Contains.CONTAINS,null==e.valuesData[e.ReportFilter.USERS_AND_GROUP]?null:e.valuesData[e.ReportFilter.USERS_AND_GROUP].options.status))("userGroups",n.Dc(13,te,null==e.valuesData[e.ReportFilter.USERS_AND_GROUP]||null==e.valuesData[e.ReportFilter.USERS_AND_GROUP].map?null:e.valuesData[e.ReportFilter.USERS_AND_GROUP].map.userGroups,null!=e.valuesData[e.ReportFilter.USERS_AND_GROUP]&&e.valuesData[e.ReportFilter.USERS_AND_GROUP].exclude?e.Contains.DOES_NOT_CONTAIN:e.Contains.CONTAINS,null==e.valuesData[e.ReportFilter.USERS_AND_GROUP]?null:e.valuesData[e.ReportFilter.USERS_AND_GROUP].options.status))}}function ne(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP]," ")}}function se(e,t){if(1&e&&(n.Xb(0,"div",29),n.Xb(1,"div",30),n.Zc(2),n.oc(3,"translate"),n.Xc(4,ne,2,1,"span",26),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(2),n.bd(" ",n.pc(3,2,"GLOBAL.TEAM_LABEL")," "),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.USERS_AND_GROUP])}}function re(e,t){if(1&e&&(n.Vb(0),n.Xc(1,ie,7,17,"ng-container",22),n.Xc(2,se,5,4,"ng-template",null,23,n.Yc),n.Ub()),2&e){const e=n.Lc(3),t=n.nc();n.Cb(1),n.wc("ngIf",t.showTeamDropdown)("ngIfElse",e)}}function oe(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.CLIENTS]," ")}}const ae=function(e){return{client:e}};function ce(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",34),n.jc("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(2);return i.selectAllClientIds(t,i.ReportFilter.CLIENTS)}))("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreClients()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onClientFilterOptionChange(),i.clearOptionFilter(i.ReportFilter.CLIENTS,t),i.getClients()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onSearchChange(i.ReportFilter.CLIENTS,t),i.getClients()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(2);return i.setIndicatorOf(i.ReportFilter.CLIENTS,t,!1)}))("onChange",(function(t){return n.Oc(e),n.nc(2).onClientChange(t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc(2);n.xc("placeholder",n.qc(1,11,"GLOBAL.FIND_CLIENT_LABEL",n.Bc(14,ae,e.clientLabel))),n.wc("showTitles",!1)("filterName",e.clientLabel)("singleMapProperty",e.ReportFilter.CLIENTS)("countNumber",e.counts[e.ReportFilter.CLIENTS])("checkboxValues",e.valuesData[e.ReportFilter.CLIENTS])("selectableMaps",e.filterMaps[e.ReportFilter.CLIENTS])("filterOptions",e.clientFilterOptions)("searchValue",e.query[e.ReportFilter.CLIENTS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.CLIENTS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.CLIENTS])}}function le(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.isOpenedMap[t.ReportFilter.CLIENTS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc();return 1===t.query[t.ReportFilter.CLIENTS].page&&t.getClients(),t.isOpenedMap[t.ReportFilter.CLIENTS]=!0})),n.Xb(1,"div",31),n.Xb(2,"span",32),n.Zc(3),n.Wb(),n.Xc(4,oe,2,1,"span",26),n.Wb(),n.Xc(5,ce,2,16,"dropdown-checkbox",33),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.CLIENTS]?e.labels[e.ReportFilter.CLIENTS]+" ("+e.numberOfSelected[e.ReportFilter.CLIENTS]+")":""),n.Cb(2),n.ad(e.clientLabel),n.Cb(1),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.CLIENTS])}}function ue(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.PROJECTS]," ")}}function de(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",37),n.jc("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(2);return i.selectAllProjectIds(t,i.ReportFilter.PROJECTS)}))("loadMore",(function(){return n.Oc(e),n.nc(2).loadMoreProjects()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onProjectFilterOptionChange(),i.clearOptionFilter(i.ReportFilter.PROJECTS,t),i.getProjects()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.onSearchChange(i.ReportFilter.PROJECTS,t),i.getProjects()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(2);return i.setIndicatorOf(i.ReportFilter.PROJECTS,t,!1)}))("onChange",(function(t){return n.Oc(e),n.nc(2).onProjectChange(t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc(2);n.xc("placeholder",n.pc(1,10,"GLOBAL.PROJECT_FIND")),n.wc("filterName","projects")("countNumber",e.counts[e.ReportFilter.PROJECTS])("singleMapProperty",e.ReportFilter.PROJECTS)("checkboxValues",e.valuesData[e.ReportFilter.PROJECTS])("selectableMaps",e.filterMaps[e.ReportFilter.PROJECTS])("filterOptions",e.projectFilterOptions)("searchValue",e.query[e.ReportFilter.PROJECTS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.PROJECTS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.PROJECTS])}}function he(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.jc("onClose",(function(){n.Oc(e);const t=n.nc();return t.isOpenedMap[t.ReportFilter.PROJECTS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc();return 1===t.query[t.ReportFilter.PROJECTS].page&&t.getProjects(),t.isOpenedMap[t.ReportFilter.PROJECTS]=!0})),n.Xb(1,"div",35),n.Zc(2),n.oc(3,"translate"),n.Xc(4,ue,2,1,"span",26),n.Wb(),n.Xc(5,de,2,12,"dropdown-checkbox",36),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.PROJECTS]?e.labels[e.ReportFilter.PROJECTS]+" ("+e.numberOfSelected[e.ReportFilter.PROJECTS]+")":""),n.Cb(1),n.bd(" ",n.pc(3,3,"GLOBAL.PROJECT_LABEL")," "),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.PROJECTS])}}function pe(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.CATEGORY]," ")}}function be(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",34),n.jc("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(3);return i.selectAllClientIds(t,i.ReportFilter.CATEGORY)}))("loadMore",(function(){return n.Oc(e),n.nc(3).loadMoreCategories()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(3);return i.onCategoryFilterOptionChange(),i.clearOptionFilter(i.ReportFilter.CATEGORY,t),i.getCategories()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(3);return i.onSearchChange(i.ReportFilter.CATEGORY,t),i.getCategories()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(3);return i.setIndicatorOf(i.ReportFilter.CATEGORY,t,!1)}))("onChange",(function(t){return n.Oc(e),n.nc(3).onCategoryChange(t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc(3);n.xc("placeholder",n.qc(1,11,"GLOBAL.FIND_CLIENT_LABEL",n.Bc(14,ae,e.categoryLabel))),n.wc("showTitles",!1)("filterName",e.categoryLabel)("singleMapProperty",e.ReportFilter.CATEGORY)("countNumber",e.counts[e.ReportFilter.CATEGORY])("checkboxValues",e.valuesData[e.ReportFilter.CATEGORY])("selectableMaps",e.filterMaps[e.ReportFilter.CATEGORY])("filterOptions",e.categoryFilterOptions)("searchValue",e.query[e.ReportFilter.CATEGORY].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.CATEGORY])("inProgressLoading",e.inProgressLoading[e.ReportFilter.CATEGORY])}}function fe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.jc("onClose",(function(){n.Oc(e);const t=n.nc(2);return t.isOpenedMap[t.ReportFilter.CATEGORY]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc(2);return 1===t.query[t.ReportFilter.CATEGORY].page&&t.getCategories(),t.isOpenedMap[t.ReportFilter.CATEGORY]=!0})),n.Xb(1,"div",31),n.Xb(2,"span",32),n.Zc(3),n.Wb(),n.Xc(4,pe,2,1,"span",26),n.Wb(),n.Xc(5,be,2,16,"dropdown-checkbox",33),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.CATEGORY]?e.labels[e.ReportFilter.CATEGORY]+" ("+e.numberOfSelected[e.ReportFilter.CATEGORY]+")":""),n.Cb(2),n.ad(e.categoryLabel),n.Cb(1),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.CATEGORY])}}function me(e,t){if(1&e&&(n.Xb(0,"div",3),n.Xc(1,fe,6,3,"div",7),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!(null!=e.valuesData[e.ReportFilter.CATEGORY]&&e.valuesData[e.ReportFilter.CATEGORY].isFilterDisabled))}}function ge(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.TASKS]," ")}}function ve(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",40),n.jc("loadMore",(function(){return n.Oc(e),n.nc(3).loadMoreTasks()}))("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(3);return i.selectAllTasksIds(t,i.ReportFilter.TASKS)}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(3);return i.clearOptionFilter(i.ReportFilter.TASKS,t),i.getTasks()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(3);return i.onSearchChange(i.ReportFilter.TASKS,t),i.getTasks()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(3);return i.setIndicatorOf(i.ReportFilter.TASKS,t,!1)}))("onChange",(function(t){n.Oc(e);const i=n.nc(3);return i.valuesData[i.ReportFilter.TASKS]=t.checkboxValues,i.filterMaps[i.ReportFilter.TASKS]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.TASKS,t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc(3);n.xc("placeholder",n.pc(1,10,"GLOBAL.FIND_TASKS_LABEL")),n.wc("filterName","tasks")("singleMapProperty",e.ReportFilter.TASKS)("countNumber",e.counts[e.ReportFilter.TASKS])("checkboxValues",e.valuesData[e.ReportFilter.TASKS])("selectableMaps",e.filterMaps[e.ReportFilter.TASKS])("filterOptions",e.taskFilterOptions)("searchValue",e.query[e.ReportFilter.TASKS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.TASKS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.TASKS])}}function Ce(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.jc("onClose",(function(){n.Oc(e);const t=n.nc(2);return t.isOpenedMap[t.ReportFilter.TASKS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc(2);return 1===t.query[t.ReportFilter.TASKS].page&&t.getTasks(),t.isOpenedMap[t.ReportFilter.TASKS]=!0})),n.Xb(1,"div",38),n.Zc(2),n.oc(3,"translate"),n.Xc(4,ge,2,1,"span",26),n.Wb(),n.Xc(5,ve,2,12,"dropdown-checkbox",39),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.TASKS]?e.labels[e.ReportFilter.TASKS]+" ("+e.numberOfSelected[e.ReportFilter.TASKS]+")":""),n.Cb(1),n.bd(" ",n.pc(3,3,"GLOBAL.TASK_LABEL")," "),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.TASKS])}}function Ee(e,t){if(1&e&&(n.Xb(0,"div",3),n.Xc(1,Ce,6,5,"div",7),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.valuesData[e.ReportFilter.TASKS].isFilterDisabled)}}function we(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.TAGS]," ")}}function Se(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",43),n.jc("loadMore",(function(){return n.Oc(e),n.nc(3).loadMoreTags()}))("onSelectAllWithTextInput",(function(t){n.Oc(e);const i=n.nc(3);return i.selectAllTagIds(t,i.ReportFilter.TAGS)}))("onContainOptionChange",(function(){n.Oc(e);const t=n.nc(3);return t.checkApplyButton(t.FilterGroup.STANDARD)}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc(3);return i.clearOptionFilter(i.ReportFilter.TAGS,t),i.getTags()}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc(3);return i.onSearchChange(i.ReportFilter.TAGS,t),i.getTags()}))("onCloseFilter",(function(t){n.Oc(e);const i=n.nc(3);return i.setIndicatorOf(i.ReportFilter.TAGS,t,!1)}))("onChange",(function(t){n.Oc(e);const i=n.nc(3);return i.valuesData[i.ReportFilter.TAGS]=t.checkboxValues,i.filterMaps[i.ReportFilter.TAGS]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.TAGS,t)})),n.oc(1,"translate"),n.Wb()}if(2&e){const e=n.nc(3);n.xc("placeholder",n.pc(1,11,"GLOBAL.FIND_TAGS_LABEL")),n.wc("showTitles",!1)("filterName","tags")("singleMapProperty",e.ReportFilter.TAGS)("countNumber",e.counts[e.ReportFilter.TAGS])("checkboxValues",e.valuesData[e.ReportFilter.TAGS])("selectableMaps",e.filterMaps[e.ReportFilter.TAGS])("filterOptions",e.tagFilterOptions)("searchValue",e.query[e.ReportFilter.TAGS].name)("inProgressSelectAll",e.inProgressSelectAll[e.ReportFilter.TAGS])("inProgressLoading",e.inProgressLoading[e.ReportFilter.TAGS])}}function ye(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.jc("onClose",(function(){n.Oc(e);const t=n.nc(2);return t.isOpenedMap[t.ReportFilter.TAGS]=!1}))("onOpen",(function(){n.Oc(e);const t=n.nc(2);return 1===t.query[t.ReportFilter.TAGS].page&&t.getTags(),t.isOpenedMap[t.ReportFilter.TAGS]=!0})),n.Xb(1,"div",41),n.Zc(2),n.oc(3,"translate"),n.Xc(4,we,2,1,"span",26),n.Wb(),n.Xc(5,Se,2,13,"dropdown-checkbox",42),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngbTooltip",e.labels[e.ReportFilter.TAGS]?e.labels[e.ReportFilter.TAGS]+" ("+e.numberOfSelected[e.ReportFilter.TAGS]+")":""),n.Cb(1),n.bd(" ",n.pc(3,3,"GLOBAL.TAG_LABEL")," "),n.Cb(2),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.TAGS])}}function Oe(e,t){if(1&e&&(n.Xb(0,"div",3),n.Xc(1,ye,6,5,"div",7),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.valuesData[e.ReportFilter.TAGS].isFilterDisabled)}}function Ae(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(4);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.STATUSES]-e.numberOfApprovalFilters," ")}}function ke(e,t){if(1&e&&(n.Xb(0,"div"),n.Xc(1,Ae,2,1,"span",26),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.wc("ngIf",e.numberOfSelected[e.ReportFilter.STATUSES]>e.numberOfApprovalFilters)}}function Te(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(4);n.Cb(1),n.bd(" ",e.numberOfSelected[e.ReportFilter.STATUSES]," ")}}function De(e,t){if(1&e&&n.Xc(0,Te,2,1,"span",26),2&e){const e=n.nc(3);n.wc("ngIf",e.numberOfSelected[e.ReportFilter.STATUSES])}}function Ie(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",49),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(3);return i.valuesData[i.ReportFilter.STATUSES]=t.checkboxValues,i.filterMaps[i.ReportFilter.STATUSES]=t.selectableMaps,i.setIndicatorOf(i.ReportFilter.STATUSES,t)})),n.Wb()}if(2&e){const e=n.nc(3);n.wc("isResizeable",!1)("countNumber",2)("showSearch",!1)("showSelectAll",!1)("showTitles",!0)("checkboxValues",e.valuesData[e.ReportFilter.STATUSES])("selectableMaps",e.filterMaps[e.ReportFilter.STATUSES])}}function _e(e,t){if(1&e&&(n.Xb(0,"div",45),n.Xb(1,"div",46),n.Zc(2),n.oc(3,"translate"),n.Xc(4,ke,2,1,"div",22),n.Xc(5,De,1,1,"ng-template",null,47,n.Yc),n.Wb(),n.Xc(7,Ie,1,7,"dropdown-checkbox",48),n.Wb()),2&e){const e=n.Lc(6),t=n.nc(2);n.Cb(2),n.bd(" ",n.pc(3,3,"GLOBAL.STATUS_LABEL")," "),n.Cb(2),n.wc("ngIf",t.isExpense&&t.numberOfApprovalFilters>0)("ngIfElse",e)}}function Re(e,t){if(1&e&&(n.Xb(0,"div",3),n.Xc(1,_e,8,5,"div",44),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.valuesData[e.ReportFilter.STATUSES].isFilterDisabled)}}function Le(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",(e.withoutNote?1:0)+(e.note?1:0)," ")}}function xe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-input",54),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(3);return i.note=t.searchTerm,i.withoutNote=t.isSelected,i.noteChanged()})),n.oc(1,"translate"),n.oc(2,"translate"),n.Wb()}if(2&e){const e=n.nc(3);n.wc("placeholder",n.pc(1,4,"GLOBAL.ENTER_NOTE_PLACEHOLDER"))("searchTerm",e.note)("isSelected",e.withoutNote)("checkboxLabel",n.pc(2,6,"GLOBAL.WITHOUT_NOTE_LABEL"))}}function Pe(e,t){if(1&e&&(n.Xb(0,"div",51),n.Xb(1,"div",52),n.Zc(2),n.oc(3,"translate"),n.Xc(4,Le,2,1,"span",26),n.Wb(),n.Xc(5,xe,3,8,"dropdown-input",53),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngbTooltip",e.note),n.Cb(1),n.bd(" ",n.pc(3,3,"GLOBAL.NOTE_LABEL")," "),n.Cb(2),n.wc("ngIf",e.withoutNote||e.note)}}function je(e,t){if(1&e&&(n.Xb(0,"div",3),n.Xc(1,Pe,6,5,"div",50),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.isNoteDisabled)}}function Me(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.bd(" ",(e.withoutDescription?1:0)+(e.description?1:0)," ")}}function Xe(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-input",54),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(3);return i.description=t.searchTerm,i.withoutDescription=t.isSelected,i.descriptionChanged()})),n.oc(1,"translate"),n.oc(2,"translate"),n.Wb()}if(2&e){const e=n.nc(3);n.wc("placeholder",n.pc(1,4,"GLOBAL.ENTER_DESCRIPTION_PLACEHOLDER"))("searchTerm",e.description)("isSelected",e.withoutDescription)("checkboxLabel",n.pc(2,6,"GLOBAL.WITHOUT_DESCRIPTION_LABEL"))}}function Fe(e,t){if(1&e&&(n.Xb(0,"div",51),n.Xb(1,"div",55),n.Zc(2),n.oc(3,"translate"),n.Xc(4,Me,2,1,"span",26),n.Wb(),n.Xc(5,Xe,3,8,"dropdown-input",53),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngbTooltip",e.description),n.Cb(1),n.bd(" ",n.pc(3,3,"GLOBAL.DESCRIPTION_LABEL")," "),n.Cb(2),n.wc("ngIf",e.withoutDescription||e.description)}}function We(e,t){if(1&e&&(n.Xb(0,"div",3),n.Xc(1,Fe,6,5,"div",50),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.isDescriptionDisabled)}}function Be(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.bd(" ",e.indicator," ")}}function Ne(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",61),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(3).$implicit,s=n.nc();return i.checkboxValues=t.checkboxValues,i.selectableMaps=t.selectableMaps,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(3).$implicit,t=n.nc();n.wc("placeholder",e.placeholder)("offlineSearch",!0)("isReceivedAllData",!0)("showSelectAll",!1)("selectableMaps",e.selectableMaps)("checkboxValues",e.checkboxValues)("searchValue",t.query[t.ReportFilter.TASKS].name)}}function Ge(e,t){if(1&e&&(n.Xb(0,"div",51),n.Xb(1,"div",59),n.Zc(2),n.Xc(3,Be,2,1,"span",26),n.Wb(),n.Xc(4,Ne,1,7,"dropdown-checkbox",60),n.Wb()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.bd(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function Ue(e,t){if(1&e&&(n.Vb(0),n.Xc(1,Ge,5,3,"div",50),n.Ub()),2&e){const e=n.nc().$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function Ve(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(4).$implicit;n.Cb(1),n.bd(" ",e.indicator," ")}}function He(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-switch",63),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(4).$implicit,s=n.nc();return i.value=t,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(4).$implicit;n.wc("value",e.value)}}function Ye(e,t){if(1&e&&(n.Xb(0,"div",45),n.Xb(1,"div",59),n.oc(2,"translate"),n.Zc(3),n.Xc(4,Ve,2,1,"span",26),n.Wb(),n.Xc(5,He,1,1,"dropdown-switch",62),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.wc("ngbTooltip",n.pc(2,3,e.tooltip)),n.Cb(2),n.bd(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function $e(e,t){if(1&e&&(n.Vb(0),n.Xc(1,Ye,6,5,"div",44),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function ze(e,t){if(1&e&&n.Xc(0,$e,2,1,"ng-container",22),2&e){const e=n.nc().$implicit,t=n.Lc(8);n.wc("ngIf",e.isDropdownSwitch)("ngIfElse",t)}}function Ze(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(4).$implicit;n.Cb(1),n.bd(" ",e.indicator," ")}}function Ke(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-number-range",65),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(4).$implicit,s=n.nc();return i.value=t,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(4).$implicit;n.wc("items",e.value)}}function qe(e,t){if(1&e&&(n.Xb(0,"div",51),n.Xb(1,"div",59),n.Zc(2),n.Xc(3,Ze,2,1,"span",26),n.Wb(),n.Xc(4,Ke,1,1,"dropdown-number-range",64),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.bd(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function Je(e,t){if(1&e&&(n.Vb(0),n.Xc(1,qe,5,3,"div",50),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function Qe(e,t){if(1&e&&n.Xc(0,Je,2,1,"ng-container",22),2&e){const e=n.nc().$implicit,t=n.Lc(11);n.wc("ngIf",e.isDropdownNumber)("ngIfElse",t)}}function et(e,t){if(1&e&&(n.Xb(0,"span",28),n.Zc(1),n.Wb()),2&e){const e=n.nc(4).$implicit;n.Cb(1),n.bd(" ",e.indicator," ")}}function tt(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-input",67),n.jc("onChange",(function(t){n.Oc(e);const i=n.nc(4).$implicit,s=n.nc();return i.value=t.searchTerm,i.setIndicator(),s.checkClearButton(s.FilterGroup.CUSTOM),s.checkApplyButton(s.FilterGroup.CUSTOM)})),n.Wb()}if(2&e){const e=n.nc(4).$implicit;n.wc("placeholder",e.placeholder)("searchTerm",e.value)("hideCheckbox",!0)}}function it(e,t){if(1&e&&(n.Xb(0,"div",51),n.Xb(1,"div",59),n.Zc(2),n.Xc(3,et,2,1,"span",26),n.Wb(),n.Xc(4,tt,1,3,"dropdown-input",66),n.Wb()),2&e){const e=n.nc(3).$implicit;n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.bd(" ",e.label," "),n.Cb(1),n.wc("ngIf",e.indicator)}}function nt(e,t){if(1&e&&(n.Vb(0),n.Xc(1,it,5,3,"div",50),n.Ub()),2&e){const e=n.nc(2).$implicit;n.Cb(1),n.wc("ngIf",!e.isFilterDisabled)}}function st(e,t){if(1&e&&n.Xc(0,nt,2,1,"ng-container",6),2&e){const e=n.nc().$implicit;n.wc("ngIf",e.isDropdownTextual)}}function rt(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",3),n.Xc(2,Ue,2,1,"ng-container",22),n.Wb(),n.Xb(3,"div",3),n.Xc(4,ze,1,2,"ng-template",null,56,n.Yc),n.Wb(),n.Xb(6,"div",3),n.Xc(7,Qe,1,2,"ng-template",null,57,n.Yc),n.Wb(),n.Xb(9,"div",3),n.Xc(10,st,1,1,"ng-template",null,58,n.Yc),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.Lc(5);n.Cb(2),n.wc("ngIf",e.isDropdownCheckbox)("ngIfElse",i)}}function ot(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",68),n.Xb(1,"a",69),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().clearFilters()}))("click",(function(){return n.Oc(e),n.nc().clearFilters()})),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()}2&e&&(n.Cb(2),n.ad(n.pc(3,1,"GLOBAL.CLEAR_FILTERS_LABEL")))}var at=function(e){return e.STANDARD="STANDARD",e.CUSTOM="CUSTOM",e.BOTH="BOTH",e}({});let ct=(()=>{class e{constructor(e,t,i,r,a,c,l,u,d,h,b,f,m){this.userGroupV1Service=e,this.userGroupService=t,this.cd=i,this.clientService=r,this.projectService=a,this.taskService=c,this.authService=l,this.tagService=u,this.userService=d,this.uiSettings=h,this.workspaceService=b,this.translate=f,this.categoryService=m,this.hideMembers=!1,this.isExpense=!1,this.onApply=new n.n,this.activeFilterChanged=new n.n,this.filterMaps={[p.i.USERS_AND_GROUP]:null,[p.i.CLIENTS]:null,[p.i.PROJECTS]:null,[p.i.TASKS]:null,[p.i.TAGS]:null,[p.i.STATUSES]:null,[p.i.CATEGORY]:null},this.Contains=p.d,this.clientFilterOptions=p.n,this.categoryFilterOptions=p.m,this.projectFilterOptions=p.r,this.taskFilterOptions=p.u,this.tagFilterOptions=p.t,this.userCount=new o.a,this.counts={[p.i.CLIENTS]:null,[p.i.PROJECTS]:null,[p.i.TASKS]:null,[p.i.TAGS]:null},this.labels={},this.numberOfSelected={},this.query={},this.reachedLimit={},this.isOpenedMap={},this.ReportFilter=p.i,this.FilterGroup=at,this.unsubscribe$=new s.a,this.inProgressSelectAll={},this.inProgressLoading={},this.USERS=p.k,this.GROUPS=p.f}set customFieldFilters(e){e&&e.length&&(this._customFieldFilters=e,this.isInitialized&&this.onCustomFieldsUpdate())}get customFieldFilters(){return this._customFieldFilters}set valuesData(e){e&&(e[p.i.USERS_AND_GROUP]=e[p.i.USERS_AND_GROUP]||new r.a({options:Object(p.s)()}),e[p.i.TAGS]=e[p.i.TAGS]||new r.a({options:Object(p.p)()}),e[p.i.CLIENTS]=e[p.i.CLIENTS]||new r.a,e[p.i.CATEGORY]=e[p.i.CATEGORY]||new r.a,e[p.i.PROJECTS]=e[p.i.PROJECTS]||new r.a,e[p.i.TASKS]=e[p.i.TASKS]||new r.a,e[p.i.STATUSES]=e[p.i.STATUSES]||new r.a,this._valuesData=e,this.isInitialized&&(this.setAllIndicators(),this.checkClearButton(at.STANDARD),this.labels={},this.isFormDirty=this.isFilterDirty))}get valuesData(){return this._valuesData}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.hasExpensesFeature=this.workspace.hasFeature(k.a.EXPENSES),this.timeApprovalEnabled=this.workspace.timeApprovalEnabled,this.invoicingEnabled=this.workspace.invoicingEnabled,this.worksapceId=this.workspace.id,this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.workspaceName=this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.clientLabel=this.workspaceService.generateClientLabel(this.workspace.projectGroupingLabel)||this.translate.instant("GLOBAL.CLINENT_LABEL"),this.categoryLabel=this.translate.instant("WORKSPACE.SETTINGS.CATEGORY_LABEL");const e=[new c.a(p.k,null,{label:"GLOBAL.USERS_LABEL"})];this.hideUserGroupMembers||e.unshift(new c.a(p.f,null,{label:"GLOBAL.GROUPS_LABEL"})),this.filterMaps[p.i.USERS_AND_GROUP]=new l.a(e),this.setShowTeamDropdown();const t=Object(p.o)(this.translate.instant("PROJECTS.CHECKBOX_FILTER_DROPDOWN.EXCLUDE_ENTRY_LABEL",{entity:this.clientLabel})),i=Object(p.o)(this.translate.instant("PROJECTS.CHECKBOX_FILTER_DROPDOWN.EXCLUDE_ENTRY_LABEL",{entity:this.categoryLabel}));this.filterMaps[p.i.CLIENTS]=new l.a([t,new c.a(p.i.CLIENTS)]);const n=Object(p.o)(this.translate.instant("GLOBAL.WITHOUT_PROJECT_LABEL"));this.filterMaps[p.i.CATEGORY]=new l.a([i,new c.a(p.i.CATEGORY)]),this.filterMaps[p.i.PROJECTS]=new l.a([n,new c.a(p.i.PROJECTS)]);const s=Object(p.o)(this.translate.instant("GLOBAL.WITHOUT_TASK_LABEL"));this.filterMaps[p.i.TASKS]=new l.a([s,new c.a(p.i.TASKS)]),this.filterMaps[p.i.TAGS]=new l.a([new c.a(p.i.TAGS)]),this.resetBillingMap(),this.resetQuery(),this.setAllIndicators(),this.checkClearButton(at.STANDARD),this.makeValuesDataBackup(),this.isFormDirty=this.isFilterDirty,this.isInitialized=!0,this.initActiveFiltersMap(),this.refreshActiveFilters(),this.onCustomFieldsUpdate(),this.activeBillable=this.workspaceName.activeBillableHours}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onActiveFilterChanged({selectableMaps:e,checkboxValues:t}){this.activeFiltersMap=e,this.activeFiltersValues=t;const i=this.activeFiltersValues.getQuery(),n=i&&i.standard||[],s=i&&i.custom||[];this.uiSettings.setStandardFilters(n,this.worksapceId),this.uiSettings.setCustomFilters(s,this.worksapceId),this.activeFilterChanged.emit({standard:n,custom:s}),this.refreshActiveFilters(),this.emitFilters()}onCustomFieldsUpdate(){this.customFieldFilters&&(this.checkClearButton(at.CUSTOM),this.makeCustomFieldBackup(),this.isFormCustomFieldDirty=this.isCustomFieldFilterDirty,this.initCustomActiveFiltersMap(),this.refreshActiveFilters())}initActiveFiltersMap(){let e=this.uiSettings.getStandardFilters(this.worksapceId),t=this.workspace.activeBillableHours&&(!this.workspaceName.onlyAdminsCanChangeBillableStatus||this.isAdminOrOwner)||this.timeApprovalEnabled||this.invoicingEnabled?C.B:C.B.filter(e=>e!==p.i.STATUSES);this.hideMembers&&(t=t.filter(e=>e!==p.i.USERS_AND_GROUP),e=e.filter(e=>e!==p.i.USERS_AND_GROUP));const i=t.map(e=>{let t;switch(e){case p.i.CLIENTS:const e=this.workspaceService.getLocalDefaultWorkspace();t="department"===e.projectGroupingLabel?this.translate.instant("GLOBAL.DEPARTMENT_LABEL"):"client"===e.projectGroupingLabel?this.translate.instant("GLOBAL.CLIENT_LABEL"):"category"===e.projectGroupingLabel?this.translate.instant("GLOBAL.CATEGORY_LABEL"):this.clientLabel.charAt(0).toUpperCase()+this.clientLabel.slice(1);break;case p.i.PROJECTS:t=this.translate.instant("GLOBAL.PROJECT_LABEL");break;case p.i.TASKS:t=this.translate.instant("GLOBAL.TASK_LABEL");break;case p.i.TAGS:t=this.translate.instant("GLOBAL.TAG_LABEL");break;case p.i.STATUSES:t=this.translate.instant("GLOBAL.STATUS_LABEL");break;case p.h:t=this.translate.instant("GLOBAL.NOTE_LABEL");break;case p.e:t=this.translate.instant("GLOBAL.DESCRIPTION_LABEL");break;case this.ReportFilter.USERS_AND_GROUP:t=this.translate.instant("GLOBAL.TEAM_LABEL")}return{id:e,name:t||this.translate.instant(p.j[e])}}),n=new c.a("standard",i,{label:this.translate.instant("REPORTS.REPORTS_FILTER.STANDARD_FIELDS_LABEL"),hideTitle:!0});this.activeFiltersMap=new l.a([n]),this.activeFiltersValues=new r.a,this.activeFiltersValues.pushIds("standard",e)}initCustomActiveFiltersMap(){const e=this.uiSettings.getCustomFilters(this.worksapceId),t=this.customFieldFilters.map(e=>({id:e.id,name:e.label})),i=new c.a("custom",t,{label:this.translate.instant("GLOBAL.CUSTOM_FIELDS_LABEL")});this.activeFiltersMap.getMapOfKey("standard").hideTitle=!1,this.activeFiltersMap.pushMap(i),this.activeFiltersValues.pushIds("custom",e)}refreshActiveFilters(){const e=this.uiSettings.getStandardFilters(this.worksapceId);for(const i in this.valuesData)this.valuesData[i].isFilterDisabled=!e.includes(i);if(this.isDescriptionDisabled=!e.includes(p.e),this.isNoteDisabled=!e.includes(p.h),!this.customFieldFilters)return;const t=this.uiSettings.getCustomFilters(this.worksapceId);this.customFieldFilters.forEach(e=>e.checkIsDisabled(t))}clearFilters(){var e;this.resetQuery();for(const i in this.valuesData)this.valuesData[i].reset();const t=this.filterMaps;for(const i in this.filterMaps)null===(e=this.filterMaps[i])||void 0===e||e.resetAll(!1);this.resetBillingMap(),this.userCount.reset();for(const i in this.counts)this.counts[i]=null;this.resetProject(),this.resetTasks(),this.resetUsersAndGroups(t),this.description="",this.note="",this.withoutDescription=!1,this.withoutNote=!1,this.customFieldFilters&&this.customFieldFilters.forEach(e=>e.clear()),this.setShowTeamDropdown(),this.setAllIndicators(),this.checkClearButton(at.BOTH),this.isFilterChanged=!1,this.isCustomFieldFilterChanged=!1,(this.isFormDirty||this.isFormCustomFieldDirty)&&this.emitFilters(!1)}resetBillingMap(){if(this.filterMaps[p.i.STATUSES]=new l.a([new c.a(null,null,{label:""})]),this.workspaceName.activeBillableHours&&(!this.workspaceName.onlyAdminsCanChangeBillableStatus||this.isAdminOrOwner)){const e=[{id:p.c.BILLABLE,name:this.translate.instant("GLOBAL.BILLABLE_LABEL")},{id:p.c.NOT_BILLABLE,name:this.translate.instant("GLOBAL.NON_BILLABLE_LABEL")}];this.filterMaps[p.i.STATUSES].pushToMap(p.b,e,{label:"GLOBAL.BILLABLE_LABEL"})}if(this.timeApprovalEnabled){const e=[{id:"APPROVED",name:this.translate.instant("GLOBAL.APPROVED_LABEL")},{id:"UNAPPROVED",name:this.translate.instant("REPORTS.REPORTS_FILTER.UNAPPROVED_LABEL")}];this.hasExpensesFeature&&this.workspace.expensesEnabled&&this.isExpense||this.filterMaps[p.i.STATUSES].pushToMap(p.a,e,{label:"REPORTS.MODELS.APPROVAL_LABEL"})}if(this.invoicingEnabled){const e=[{id:"INVOICED",name:this.translate.instant("GLOBAL.INVOICED_LABEL")},{id:"UNINVOICED",name:this.translate.instant("REPORTS.REPORTS_FILTER.UNINVOICED_LABEL")}];this.filterMaps[p.i.STATUSES].pushToMap(p.g,e,{label:"GLOBAL.INVOICING_TITLE"})}}resetQuery(){this.query[p.i.CLIENTS]={page:1,limit:C.f,name:""},this.query[p.i.TAGS]={page:1,limit:C.f,name:""},this.query[p.i.CATEGORY]={page:1,limit:C.f,name:""},this.resetProjectsQuery(),this.resetTasksQuery(),this.reachedLimit={},this.labels={}}resetProjectsQuery(){this.query[p.i.PROJECTS]={page:1,limit:C.f,name:"",billable:f.a.BOTH,sortColumn:v.a.CLIENT_NAME}}resetTasksQuery(){this.query[p.i.TASKS]={page:1,limit:C.f,name:""}}setShowTeamDropdown(){this.showTeamDropdown=this.isTeamDropdownVisible()}isTeamDropdownVisible(){if(!this.hideMembers)return!0;const e=this.valuesData[p.i.USERS_AND_GROUP].getContainsFilter(p.f);if(e&&e.ids.length)return!1;const t=this.valuesData[p.i.USERS_AND_GROUP].getContainsFilter(p.k);if(!t||!t.ids.length)return!0;const i=this.authService.getUser();return 1===t.ids.length&&t.ids[0]===i.id}getClients(e=this.query[p.i.CLIENTS]){this.reachedLimit[p.i.CLIENTS]||(e.status=this.valuesData[p.i.CLIENTS].options.status,this.setInProgressLoading(p.i.CLIENTS,!0),this.clientService.getClientList(e).pipe(Object(d.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.filterMaps[p.i.CLIENTS].resetAll(),this.query[p.i.CLIENTS].page++,this.filterMaps[p.i.CLIENTS].pushToMap(p.i.CLIENTS,t);const i=t.length<e.limit;this.reachedLimit[p.i.CLIENTS]=i,i&&!e.name&&(this.counts[p.i.CLIENTS]=this.filterMaps[p.i.CLIENTS].count()),this.setInProgressLoading(p.i.CLIENTS,!1)},()=>this.setInProgressLoading(p.i.CLIENTS,!1)))}getProjects(e=this.query[p.i.PROJECTS]){if(this.reachedLimit[p.i.PROJECTS])return;const t=Object.assign({},e);t.status=this.valuesData[p.i.PROJECTS].options.status;const i=this.valuesData[p.i.CLIENTS].getContainsFilter(p.i.CLIENTS);this.setInProgressLoading(p.i.PROJECTS,!0),this.projectService.getProjects(t,i).pipe(Object(d.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.filterMaps[p.i.PROJECTS].resetAll(),this.query[p.i.PROJECTS].page++;const i=this.transformResponse(t,"clientName",this.translate.instant("GLOBAL.NO_CLIENT_LABEL"));for(const e in i)this.filterMaps[p.i.PROJECTS].pushToMap(e,i[e]);const n=t.length<e.limit;this.reachedLimit[p.i.PROJECTS]=n,n&&!e.name&&(this.counts[p.i.PROJECTS]=this.filterMaps[p.i.PROJECTS].count()),this.setInProgressLoading(p.i.PROJECTS,!1)},()=>this.setInProgressLoading(p.i.PROJECTS,!1))}transformResponse(e,t,i){const n={};return e.forEach(e=>{const s=e[t]||i;n[s]||(n[s]=[]),n[s].push(e)}),n}transformResponseTask(e,t){const i={};return e.forEach(e=>{let n=t;e.projectName&&(n=e.clientName?`${e.projectName}:${e.clientName}`:e.projectName),i[n]=e.tasks}),i}getTasks(e=this.query[p.i.TASKS]){if(this.reachedLimit[p.i.TASKS])return;const t=Object.assign({},e);t.status=this.valuesData[p.i.TASKS].options.status;const i=this.valuesData[p.i.CLIENTS].getContainsFilter(p.i.CLIENTS),n=this.valuesData[p.i.PROJECTS].getContainsFilter(p.i.PROJECTS);this.setInProgressLoading(p.i.TASKS,!0),this.taskService.getTasksNew(t,i,n).pipe(Object(d.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.filterMaps[p.i.TASKS].resetAll(),this.query[p.i.TASKS].page++;const i=this.transformResponseTask(t,this.translate.instant("GLOBAL.NO_PROJECT_LABEL"));for(const e in i)this.filterMaps[p.i.TASKS].pushToMap(e,i[e]);let n=0;t.forEach(e=>{n+=e.tasks.length});const s=n<e.limit;this.reachedLimit[p.i.TASKS]=s,s&&!e.name&&(this.counts[p.i.TASKS]=this.filterMaps[p.i.TASKS].count()),this.setInProgressLoading(p.i.TASKS,!1)},()=>this.setInProgressLoading(p.i.TASKS,!1))}getTags(e=this.query[p.i.TAGS]){if(this.reachedLimit[p.i.TAGS])return;const t=this.valuesData[p.i.TAGS].options.status,i=e.name;this.setInProgressLoading(p.i.TAGS,!0),this.tagService.getAllTagsV1(t,null,{page:e.page,pageSize:e.limit,name:i}).pipe(Object(d.a)(this.unsubscribe$)).subscribe(t=>{if(1===e.page){this.filterMaps[p.i.TAGS].resetAll();const e=Object(p.o)(this.translate.instant("REPORTS.REPORTS_FILTER.WITHOUT_TAG_LABEL"));this.filterMaps[p.i.TAGS].unshiftMap(e)}this.query[p.i.TAGS].page++,this.filterMaps[p.i.TAGS].pushToMap(p.i.TAGS,t);const i=t.length<e.limit;this.reachedLimit[p.i.TAGS]=i,i&&!e.name&&(this.counts[p.i.TAGS]=this.filterMaps[p.i.TAGS].count()),this.setInProgressLoading(p.i.TAGS,!1)},()=>this.setInProgressLoading(p.i.TAGS,!1))}loadMoreClients(){this.getClients()}loadMoreProjects(){this.getProjects()}loadMoreTasks(){this.getTasks()}loadMoreTags(){this.getTags()}clearOptionFilter(e,t,i=!0){this.query[e].page=1,this.query[e].name=t.searchTerm,e===p.i.USERS_AND_GROUP?(this.reachedLimit[p.k]=!1,this.reachedLimit[p.f]=!1,i&&this.userCount.reset()):(this.reachedLimit[e]=!1,i&&(this.counts[e]=null)),this.checkApplyButton(at.BOTH)}onClientChange(e){this.valuesData[p.i.CLIENTS]=e.checkboxValues,this.filterMaps[p.i.CLIENTS]=e.selectableMaps,this.setIndicatorOf(p.i.CLIENTS,e),this.resetProject(),this.resetProjectsQuery(),this.resetTasks(),this.resetTasksQuery()}onProjectChange(e){this.valuesData[p.i.PROJECTS]=e.checkboxValues,this.filterMaps[p.i.PROJECTS]=e.selectableMaps,this.setIndicatorOf(p.i.PROJECTS,e),this.resetTasks(),this.resetTasksQuery()}onSearchChange(e,t){this.clearOptionFilter(e,{searchTerm:t},!1)}onClientFilterOptionChange(){this.resetProject(),this.resetProjectsQuery(),this.resetTasks(),this.resetTasksQuery()}onProjectFilterOptionChange(){this.resetTasks(),this.resetTasksQuery()}resetProject(){this.labels[p.i.PROJECTS]=null,this.reachedLimit[p.i.PROJECTS]=!1,this.valuesData[p.i.PROJECTS].reset(),this.filterMaps[p.i.PROJECTS].resetAll(),this.counts[p.i.PROJECTS]=null,this.numberOfSelected[p.i.PROJECTS]=0}resetTasks(){this.labels[p.i.TASKS]=null,this.reachedLimit[p.i.TASKS]=!1,this.valuesData[p.i.TASKS].reset(),this.filterMaps[p.i.TASKS].resetAll(),this.counts[p.i.TASKS]=null,this.numberOfSelected[p.i.TASKS]=0}descriptionChanged(){this.checkClearButton(at.STANDARD),this.checkApplyButton(at.STANDARD)}noteChanged(){this.checkClearButton(at.STANDARD),this.checkApplyButton(at.STANDARD)}checkClearButton(e=at.BOTH){e!==at.BOTH&&e!==at.STANDARD||(this.isFilterDirty=!this.isCleanClearBtn()),e!==at.BOTH&&e!==at.CUSTOM||(this.isCustomFieldFilterDirty=!this.isCleanCustomFieldClearBtn()),this.cd.markForCheck()}checkApplyButton(e=at.BOTH){e!==at.BOTH&&e!==at.STANDARD||(this.isFilterChanged=!this.isCleanApplyBtn()),e!==at.BOTH&&e!==at.CUSTOM||(this.isCustomFieldFilterChanged=!this.isCustomFieldCleanApplyBtn()),this.cd.markForCheck()}isCleanApplyBtn(){for(const e in this.valuesData){const t=this.filterBackup[e],i=this.valuesData[e].getContainsFilter();if(!r.a.areContainFiltersSame(i,t))return!1}return this.description===this.descriptionBackup&&this.withoutDescription===this.withoutDescriptionBackup&&this.note===this.noteBackup&&this.withoutNote===this.withoutNoteBackup}isCustomFieldCleanApplyBtn(){if(!this.customFieldFilters)return!0;for(let e=0;e<this.customFieldFilters.length;e++){const t=this.customFieldFilters[e].getApiParams();if(!E.a.areParamsEqaul(t,this.customFieldsDataBackup[t.id]))return!1}return!0}makeValuesDataBackup(){this.filterBackup={};for(const e in this.valuesData)this.filterBackup[e]=this.valuesData[e].getContainsFilter();this.descriptionBackup=this.description,this.noteBackup=this.note,this.withoutDescriptionBackup=this.withoutDescription,this.withoutNoteBackup=this.withoutNote}makeCustomFieldBackup(){this.customFieldsDataBackup={},this.customFieldFilters&&this.customFieldFilters.forEach(e=>{this.customFieldsDataBackup[e.id]=e.getApiParams()})}isCleanClearBtn(){for(const e in this.numberOfSelected)if(this.numberOfSelected[e])return!1;return!(this.description||this.withoutDescription||this.note||this.withoutNote)}generateIndicatorOf(e){var t,i;if(!this.valuesData[e])return;const n=this.valuesData[e].getSelectedData(this.filterMaps[e]);this.numberOfSelected[e]=n.numberOfSelected||n.numberOfSelectedApproximately,this.labels[e]=n.label,this.cd.markForCheck(),(null===(t=this.valuesData[p.i.STATUSES].getContainsFilter(p.a))||void 0===t?void 0:t.ids.length)>0&&(this.numberOfApprovalFilters=null===(i=this.valuesData[p.i.STATUSES].getContainsFilter(p.a))||void 0===i?void 0:i.ids.length)}isCleanCustomFieldClearBtn(){if(!this.customFieldFilters)return!0;for(let e=0;e<this.customFieldFilters.length;e++)if(!this.customFieldFilters[e].isClean())return!1;return!0}setIndicatorOf(e,{numberOfSelected:t,numberOfSelectedApproximately:i,label:n},s=!0){this.numberOfSelected[e]=t||i,this.labels[e]=n,this.checkClearButton(at.STANDARD),s&&this.checkApplyButton(at.STANDARD),this.cd.markForCheck()}setAllIndicators(){if(this.valuesData)for(const e in this.filterMaps)this.generateIndicatorOf(e)}emitFilters(e=!0,t){setTimeout(()=>{const i=this.customFieldFilters?this.customFieldFilters.map(e=>e.getApiParamsIfChanged()).filter(e=>!!e):null,n={description:this.description,withoutDescription:!!this.withoutDescription,valuesData:this.valuesData,customFieldParams:i,note:this.note,withoutNote:!!this.withoutNote,report:t};this.isFormDirty=e,this.isFormCustomFieldDirty=e,this.onApply.emit(n),this.isFilterChanged=!1,this.isCustomFieldFilterChanged=!1,this.makeValuesDataBackup(),this.makeCustomFieldBackup(),this.cd.markForCheck()})}selectAllClientIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm};this.setInProgress(t,!0),this.clientService.getClientIds(i).pipe(Object(d.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllProjectIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm,clients:this.valuesData[p.i.CLIENTS].getContainsFilter(p.i.CLIENTS)};this.setInProgress(t,!0),this.projectService.getProjectIds(i).pipe(Object(d.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllTasksIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm,clients:this.valuesData[p.i.CLIENTS].getContainsFilter(p.i.CLIENTS),projects:this.valuesData[p.i.PROJECTS].getContainsFilter(p.i.PROJECTS)};this.setInProgress(t,!0),this.taskService.getTasksIds(i).pipe(Object(d.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}selectAllTagIds(e,t){const i={status:this.valuesData[t].options.status,name:e.searchTerm};this.setInProgress(t,!0),this.tagService.getTagIds(i).pipe(Object(d.a)(this.unsubscribe$)).subscribe(i=>this.setFilterIds(e,t,i),()=>this.setInProgress(t))}setFilterIds(e,t,i){let n=e.isSelected;this.valuesData[t].exclude&&(n=!n),this.valuesData[t].toggleMultipleIds(t,i,n),this.isOpenedMap[t]||this.generateIndicatorOf(t),this.setInProgress(t)}setInProgress(e,t=!1){this.inProgressSelectAll[e]=t,this.cd.markForCheck()}setInProgressLoading(e,t){this.inProgressLoading[e]=t,this.cd.markForCheck()}getCategories(e=this.query[p.i.CATEGORY]){this.reachedLimit[p.i.CATEGORY]||("ALL"!==this.valuesData[p.i.CATEGORY].options.status?e.archived="ARCHIVED"===this.valuesData[p.i.CATEGORY].options.status:delete e.archived,this.setInProgressLoading(p.i.CATEGORY,!0),this.categoryService.getExpenseCategories(e).pipe(Object(d.a)(this.unsubscribe$)).subscribe(({count:t,categories:i})=>{1===e.page&&this.filterMaps[p.i.CATEGORY].resetAll(),this.query[p.i.CATEGORY].page++,this.filterMaps[p.i.CATEGORY].pushToMap(p.i.CATEGORY,i);const n=t<e.limit;this.reachedLimit[p.i.CATEGORY]=n,n&&!e.name&&(this.counts[p.i.CATEGORY]=this.filterMaps[p.i.CATEGORY].count()),this.setInProgressLoading(p.i.CATEGORY,!1)},()=>this.setInProgressLoading(p.i.CATEGORY,!1)))}loadMoreCategories(){this.getCategories()}onCategoryFilterOptionChange(){}onCategoryChange(e){this.valuesData[p.i.CATEGORY]=e.checkboxValues,this.filterMaps[p.i.CATEGORY]=e.selectableMaps,this.setIndicatorOf(p.i.CATEGORY,e)}resetUsersAndGroups(e){e[p.i.USERS_AND_GROUP]&&(this.resetUserAndGroups=!0)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(h.a),n.Rb(y.a),n.Rb(n.h),n.Rb(b.a),n.Rb(O.a),n.Rb(m.a),n.Rb(u.a),n.Rb(g.a),n.Rb(S.a),n.Rb(w.a),n.Rb(a.a),n.Rb(T.f),n.Rb(A.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["reports-filter"]],inputs:{description:"description",note:"note",withoutDescription:"withoutDescription",withoutNote:"withoutNote",hideMembers:"hideMembers",isExpense:"isExpense",customFieldFilters:"customFieldFilters",hideUserGroupMembers:"hideUserGroupMembers",valuesData:"valuesData"},outputs:{onApply:"onApply",activeFilterChanged:"activeFilterChanged"},decls:32,vars:21,consts:[[1,"cl-card","cl-border-bottom","cl-mb-4"],[1,"cl-component-row","cl-p-0"],[1,"cl-report-entry-actions","cl-border-0","cl-d-flex","cl-flex-wrap","cl-w-100"],[1,"cl-d-report-filter-item"],["class","cl-component-divided-left cl-no-divider-border cl-h5 cl-mb-0 cl-text-uppercase",4,"ngIf","ngIfElse"],["reportFilter",""],[4,"ngIf"],["dropdownKey","","class","cl-dropdown cl-dropdown-large cl-d-flex",3,"onClose","onOpen",4,"ngIf"],["class","cl-d-report-filter-item",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cl-my-2","cl-ml-1","cl-my-lg-0","cl-ml-lg-0","cl-ml-lg-auto"],[1,"cl-mx-2"],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-btn-sm","cl-d-block","cl-d-lg-custom-none",3,"disabled","keyup.enter","click"],["applyBtn1",""],["tabindex","0",1,"cl-btn","cl-btn-primary","cl-ml-auto","cl-d-none","cl-d-lg-custom-block",3,"disabled","keyup.enter","click"],["applyBtn2",""],["class","cl-reset-filter",4,"ngIf"],[1,"cl-component-divided-left","cl-no-divider-border","cl-h5","cl-mb-0","cl-text-uppercase"],["dropdownKey","","data-cy","filter-dropdown",1,"cl-component-divided-left","cl-no-divider-border"],["tabindex","0","dropdownKeyButton","",1,"cl-h5","cl-mb-0","pointer","cl-dropdown-toggle"],[3,"placeholder","checkboxValues","selectableMaps","resizeableName","showSearch","maxLimitOfSelected","onChange",4,"dropdownKeyContent"],[3,"placeholder","checkboxValues","selectableMaps","resizeableName","showSearch","maxLimitOfSelected","onChange"],[4,"ngIf","ngIfElse"],["fakeTeamTemplate",""],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex",3,"onClose","onOpen"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","team-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],["class","cl-badge cl-badge-filter",4,"ngIf"],[3,"reset","withPending","users","userGroups","result"],[1,"cl-badge","cl-badge-filter"],[1,"cl-dropdown","cl-dropdown-large","cl-d-flex","cl-disabled"],[1,"cl-component-divided-left","cl-dropdown-toggle"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","client-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],[1,"cl-text-capitalize"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","project-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],[3,"placeholder","filterName","countNumber","singleMapProperty","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[3,"placeholder","filterName","countNumber","singleMapProperty","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","onSelectAllWithTextInput","loadMore","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","task-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","tag-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onContainOptionChange","onFilterOptionChange","onSearchChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[3,"placeholder","showTitles","filterName","singleMapProperty","countNumber","checkboxValues","selectableMaps","filterOptions","searchValue","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onContainOptionChange","onFilterOptionChange","onSearchChange","onCloseFilter","onChange"],["dropdownKey","","class","cl-dropdown cl-d-flex",4,"ngIf"],["dropdownKey","",1,"cl-dropdown","cl-d-flex"],["dropdownKeyButton","","tabindex","0","data-cy","status-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle"],["numberOfSelectedBadge",""],[3,"isResizeable","countNumber","showSearch","showSelectAll","showTitles","checkboxValues","selectableMaps","onChange",4,"dropdownKeyContent"],[3,"isResizeable","countNumber","showSearch","showSelectAll","showTitles","checkboxValues","selectableMaps","onChange"],["dropdownKey","","class","cl-dropdown cl-dropdown-large cl-d-flex",4,"ngIf"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","note-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","isSelected","checkboxLabel","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","isSelected","checkboxLabel","onChange"],["dropdownKeyButton","","tabindex","0","placement","bottom","data-cy","description-dropdown",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],["customFilterTemplate1",""],["customFilterTemplate2",""],["customFilterTemplate3",""],["dropdownKeyButton","","tabindex","0","placement","bottom",1,"pointer","cl-component-divided-left","cl-dropdown-toggle",3,"ngbTooltip"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","offlineSearch","isReceivedAllData","showSelectAll","selectableMaps","checkboxValues","searchValue","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","offlineSearch","isReceivedAllData","showSelectAll","selectableMaps","checkboxValues","searchValue","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"value","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"value","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"items","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"items","onChange"],["class","cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","hideCheckbox","onChange",4,"dropdownKeyContent"],[1,"cl-lg-custom-down-r-0-wrapper",3,"placeholder","searchTerm","hideCheckbox","onChange"],[1,"cl-reset-filter"],["tabindex","0",3,"keyup.enter","click"]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xc(4,q,3,3,"div",4),n.Xc(5,Q,5,3,"ng-template",null,5,n.Yc),n.Wb(),n.Xb(7,"div",3),n.Xc(8,re,4,2,"ng-container",6),n.Wb(),n.Xb(9,"div",3),n.Xc(10,le,6,3,"div",7),n.Wb(),n.Xb(11,"div",3),n.Xc(12,he,6,5,"div",7),n.Wb(),n.Xc(13,me,2,1,"div",8),n.Xc(14,Ee,2,1,"div",8),n.Xc(15,Oe,2,1,"div",8),n.Sb(16,"div"),n.Xc(17,Re,2,1,"div",8),n.Xc(18,je,2,1,"div",8),n.Xc(19,We,2,1,"div",8),n.Xc(20,rt,12,2,"ng-container",9),n.Xb(21,"div",10),n.Xb(22,"div",11),n.Xb(23,"button",12,13),n.jc("keyup.enter",(function(){return t.emitFilters()}))("click",(function(){n.Oc(e);const i=n.Lc(24);return t.emitFilters(),i.blur()})),n.Zc(25),n.oc(26,"translate"),n.Wb(),n.Xb(27,"button",14,15),n.jc("keyup.enter",(function(){return t.emitFilters()}))("click",(function(){n.Oc(e);const i=n.Lc(28);return t.emitFilters(),i.blur()})),n.Zc(29),n.oc(30,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xc(31,ot,4,3,"div",16)}if(2&e){const e=n.Lc(6);n.Cb(4),n.wc("ngIf",t.isExpense)("ngIfElse",e),n.Cb(4),n.wc("ngIf",!t.valuesData[t.ReportFilter.USERS_AND_GROUP].isFilterDisabled&&!t.hideMembers),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.CLIENTS].isFilterDisabled),n.Cb(2),n.wc("ngIf",!t.valuesData[t.ReportFilter.PROJECTS].isFilterDisabled),n.Cb(1),n.wc("ngIf",t.hasExpensesFeature&&t.workspace.expensesEnabled&&t.isExpense),n.Cb(1),n.wc("ngIf",!(t.hasExpensesFeature&&t.workspace.expensesEnabled&&t.isExpense)),n.Cb(1),n.wc("ngIf",!(t.hasExpensesFeature&&t.workspace.expensesEnabled&&t.isExpense)),n.Cb(2),n.wc("ngIf",t.workspaceName.activeBillableHours&&(!t.workspaceName.onlyAdminsCanChangeBillableStatus||t.isAdminOrOwner)||t.timeApprovalEnabled||t.invoicingEnabled),n.Cb(1),n.wc("ngIf",t.hasExpensesFeature&&t.workspace.expensesEnabled&&t.isExpense),n.Cb(1),n.wc("ngIf",!(t.hasExpensesFeature&&t.workspace.expensesEnabled&&t.isExpense)),n.Cb(1),n.wc("ngForOf",t.customFieldFilters),n.Cb(3),n.wc("disabled",!t.isFilterChanged&&!t.isCustomFieldFilterChanged),n.Cb(2),n.bd("",n.pc(26,17,"GLOBAL.APPLY_LABEL")," "),n.Cb(2),n.wc("disabled",!t.isFilterChanged&&!t.isCustomFieldFilterChanged),n.Cb(2),n.bd("",n.pc(30,19,"GLOBAL.APPLY_FILTER_LABEL")," "),n.Cb(2),n.wc("ngIf",t.isFilterDirty||t.isCustomFieldFilterDirty)}},directives:[D.u,D.t,I.a,_.a,R.a,N,G.bb,U.a,V.a,Y,$.a,K],pipes:[T.e],encapsulation:2,changeDetection:0}),e})()},VHTt:function(e,t,i){"use strict";var n=i("OmiP");i.d(t,"a",(function(){return n.a}))},VTb6:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("XNiG"),s=i("lGQG"),r=i("O3o7"),o=i("Ymxs"),a=i("OG4e"),c=i("tk/3"),l=i("Lcbf"),u=i("Cmuz"),d=i("tnjF"),h=i("27el"),p=i("CREi"),b=i("1Tmk"),f=i("lJxs"),m=i("vkgz"),g=i("lvCY"),v=i("fXoL"),C=i("tyNb"),E=i("sYmb");let w=(()=>{class e{constructor(e,t,i,s,r,o,a){this.http=e,this.authService=t,this.router=i,this.workspaceService=s,this.centUSDConverter=r,this.toaster=o,this.translateService=a,this.error=new n.a,this.projects=new n.a,this.projectsReportFilter=new n.a,this.project=new n.a,this.isOpenColorChooser=new n.a,this.filterProject=new n.a,this.projectPermissions=new n.a,this.projectPermissionsForUser=new n.a,this.projectsPermissionsForUser=new n.a,this.searchName=new n.a,this.projectsAndDurations=new n.a,this.users=new n.a,this.favorites=new n.a,this.projectsWithTasks=new n.a,this.projectsByClient=new n.a,this.favoritesProjects=new n.a,this.count=new n.a,this.newlyAddedProject=new n.a,this.projectNotUpdated=new n.a,this.templates=new n.a}getAllProjectsForReportDropdown(){const e=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${e}/projects/filters`).pipe(Object(f.a)(e=>e.map(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)))).subscribe(e=>{this.projectsReportFilter.next(e)},e=>{this.error.next(e)})}getProjectsAndTasksByFilter(e,t,i,n,s,r){s=s||this.workspaceService.getDefaultWorkspaceId();const o=(new c.h).append("page",t.toString()).append("search",e?e.trim():"").append("clientId",n||"").append("include",r||"");this.http.get(`/workspaces/${s}/projects/user/${i}/filter`,{params:o}).pipe(Object(f.a)(e=>e.map(e=>new u.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)))).subscribe(e=>{this.projectsWithTasks.next(e)},e=>{this.error.next(e)})}create(e,t,i,n,s,o){return o=o||this.workspaceService.getDefaultWorkspaceId(),this.http.post(`/workspaces/${o}/projects/`,JSON.stringify({name:e,color:s,isPublic:t,clientId:i,billable:n})).pipe(Object(f.a)(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(m.a)(t=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.CREATE.SUCCESS_MESSAGE",{name:e})),this.authService.projectIsCreated(t.id,t.name)},e=>{var t;403!==e.status&&this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.CREATE.ERROR_MESSAGE"))}))}createFromTemplate(e,t,i,n,s,o){const a=o||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`workspaces/${a}/projects/from-template`,JSON.stringify({templateId:e,name:t,color:s,isPublic:i,clientId:n})).pipe(Object(f.a)(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(m.a)(e=>{this.toaster.success(this.translateService.instant("SERVICES.PROJECT.CREATE.SUCCESS_MESSAGE",{name:t})),this.authService.projectIsCreated(e.id,e.name)},e=>{var t;403!==e.status&&this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.CREATE.ERROR_MESSAGE"))}))}setSearchProjectNameAfterClearFilters(e){this.searchName.next(e)}getFavoriteProjectsFull(e,t,i){i=i||this.workspaceService.getDefaultWorkspaceId();const n=this.authService.getUser().id,s=(new c.h).append("search",e?e.trim():"");this.http.get(`/workspaces/${i}/users/${n}/projects/favorites/${t}/detailed`,{params:s}).pipe(Object(f.a)(e=>e.map(e=>new u.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours,e.archived)))).subscribe(e=>{this.favoritesProjects.next(e)},e=>{this.error.next(e)})}makeProjectFavorite(e,t){t=t||this.workspaceService.getDefaultWorkspaceId();const i=this.authService.getUser().id,s=new n.a;return this.http.post(`/workspaces/${t}/users/${i}/projects/favorites/${e}`,{}).pipe(Object(f.a)(e=>new l.a(e))).subscribe(e=>{s.next(e)},e=>{s.error(e),this.error.next(e)}),s}removeProjectAsFavorite(e,t){t=t||this.workspaceService.getDefaultWorkspaceId();const i=this.authService.getUser().id,s=new n.a;return this.http.delete(`/workspaces/${t}/users/${i}/projects/favorites/projects/${e}`).subscribe(e=>{s.next(e)},e=>{s.error(e),this.error.next(e)}),s}makeTaskFavorite(e,t,i){i=i||this.workspaceService.getDefaultWorkspaceId();const n=this.authService.getUser().id;return this.http.post(`/workspaces/${i}/users/${n}/projects/${e}/tasks/${t}/favorites`,{}).pipe(Object(m.a)(()=>{},e=>{var t;return this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.TASK.FAVORITE.MAKE.ERROR_MESSAGE"))}))}removeTaskFavorite(e,t,i){i=i||this.workspaceService.getDefaultWorkspaceId();const n=this.authService.getUser().id;return this.http.delete(`/workspaces/${i}/users/${n}/projects/${e}/tasks/${t}/favorites`,{}).pipe(Object(f.a)(e=>null),Object(m.a)(()=>{},e=>{var t;return this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.TASK.FAVORITE.MAKE_UNFAVORITE.ERROR_MESSAGE"))}))}getProjectCountByClient(e,t,i,n){n=n||this.workspaceService.getDefaultWorkspaceId();const s=(new c.h).append("page",t.toString()).append("search",e?e.trim():"");this.http.get(`/workspaces/${n}/projects/user/${i}/filter/by-client`,{params:s}).pipe(Object(f.a)(e=>e.map(e=>new p.a(e)))).subscribe(e=>{this.projectsByClient.next(e)},e=>{this.error.next(e)})}getProjectsGroupedByClient(e,t,i,n,s,r){i=i||this.workspaceService.getDefaultWorkspaceId();const o=(new c.h).append("page",t.toString()).append("excludedProjects",(n||[]).join(",")).append("excludedTasks",(s||[]).join(",")).append("search",(null==e?void 0:e.trim())||"").append("userId",r||"");return this.http.get(`/workspaces/${i}/project-picker/clients`,{params:o}).pipe(Object(f.a)(e=>e.map(e=>new h.a(e))),Object(m.a)(()=>null,e=>{var t;return this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.GROUP.GET.ERROR_MESSAGE"))}))}getProjectsAndTasks(e,t,i,n,s,o,a){o=o||this.workspaceService.getDefaultWorkspaceId();const l=(new c.h).append("page",t.toString()).append("favorites",s?s.toString():null).append("clientId",!s&&i?i:"").append("excludedTasks",(n||[]).join(",")).append("search",e.trim()||"").append("userId",a||"");return this.http.get(`/workspaces/${o}/project-picker/projects`,{params:l}).pipe(Object(f.a)(e=>e.map(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))),Object(m.a)(()=>null,e=>{var t;return this.toaster.error((null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.GET.ALL.ERROR_MESSAGE"))}))}getTasks(e,t,i,n,s,r){e=e||this.workspaceService.getDefaultWorkspaceId();const o=(new c.h).append("excludedTasks",(s||[]).join(",")).append("page",n.toString()).append("search",(null==i?void 0:i.trim())||"").append("userId",r||"");return this.http.get(`/workspaces/${e}/project-picker/projects/${t}/tasks`,{params:o}).pipe(Object(f.a)(e=>e.map(e=>new d.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))),Object(m.a)(()=>{},e=>{var t;return this.toaster.error((null===(t=e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.TASK.GET_ALL.ERROR_MESSAGE"))}))}getAllFavoritesTasks(e,t,i,n,s){const r=(new c.h).append("excludedTasks",(n||[]).join(",")).append("favorites","true").append("search",(null==i?void 0:i.trim())||"").append("userId",s||"");return this.http.get(`/workspaces/${e}/project-picker/projects/${t}/tasks`,{params:r}).pipe(Object(f.a)(e=>e.map(e=>new d.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))),Object(m.a)(()=>{},e=>{var t;return this.toaster.error((null===(t=e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.PROJECT.TASK.FAVORITE.GET.ERROR_MESSAGE"))}))}getProjects(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n={name:e.name||"",status:e.status||"",page:e.page||1,pageSize:e.pageSize||g.j};return t&&(n.clients={contains:t.contains,ids:t.ids,status:t.status}),this.http.post(`/workspaces/${i}/projects/report-filters`,n).pipe(Object(f.a)(e=>e.map(e=>new r.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}getProjectIds(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/projects/report-filters/ids`,{name:e.name,status:e.status,clients:e.clients}).pipe(Object(f.a)(e=>e),Object(m.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.PROJECT.GET.IDS.ERROR_MESSAGE"))))}getProjectOfId(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`workspaces/${t}/projects/${e}`).pipe(Object(f.a)(e=>new r.a(e)),Object(m.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.PROJECT.GET.IDS.ERROR_MESSAGE"))))}}return e.\u0275fac=function(t){return new(t||e)(v.fc(c.c),v.fc(s.a),v.fc(C.d),v.fc(b.a),v.fc(a.a),v.fc(o.a),v.fc(E.f))},e.\u0275prov=v.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Vpr3:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("vkgz"),s=i("lJxs"),r=i("tk/3"),o=i("XNiG"),a=i("1Tmk"),c=i("DVUX"),l=i("XLnJ"),u=i("IQK1"),d=i("GidR"),h=i("BuEj"),p=i("fkOE"),b=i("5x7/"),f=i("YDZJ"),m=i("NTZZ"),g=i("uHlu"),v=i("lGQG"),C=i("gZP9"),E=i("AytR"),w=i("fXoL"),S=i("sYmb");let y=(()=>{class e{constructor(e,t,i,n,s){this.toaster=e,this.workspaceService=t,this.authService=i,this.http=n,this.translate=s,this.endpoints={[h.a.DETAILED]:"detailed",[h.a.SUMMARY]:"summary",[h.a.WEEKLY]:"weekly",[h.a.EXPENSE_DETAILED]:"expenses/detailed"},this.fibonacciSequence=[],this.detailedResponse=new o.a,this.weeklyResponse=new o.a,this.summaryResponse=new o.a,this.expensesDetailedResponse=new o.a,this.receipts=new o.a,this.pdfResponse=new o.a,this.csvResponse=new o.a,this.excelResponse=new o.a}getDetailedReport(e){E.a.enableAsync.reports.view?this.getDetailedAsync(e):this.getDetailedSync(e)}getDetailedSync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.DETAILED);return this.http.post(`${p.i}/workspaces/${t}/reports/detailed`,i).subscribe(e=>{const t=e.timeentries.map(e=>new d.a(e,i.amountShown));this.detailedResponse.next({totals:new u.a(e.totals&&e.totals[0],t),timeentries:t})},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.GET_ENTRIES_FAIL")))}getDetailedAsync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.DETAILED);return this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${t}/async/reports/detailed`,i).subscribe(n=>{this.getDetailedData(t,n.reportTaskId,i.amountShown,e)},t=>{this.getDetailedSync(e)})}getDetailedData(e,t,i,n){return this.http.get(`${p.i}/workspaces/${e}/async/reports/detailed/${t}`,{observe:"response"}).subscribe(s=>{if(202===s.status)return void setTimeout(()=>{this.getDetailedData(e,t,i,n)},this.getTimeOut());const r=s.body.timeentries.map(e=>new d.a(e,i));this.detailedResponse.next({totals:new u.a(s.body.totals&&s.body.totals[0],r),timeentries:r})},e=>{this.getDetailedSync(n)})}getExpensesDetailedReport(e){E.a.enableAsync.expenses.view?this.getExpensesDetailedAsync(e):this.getExpensesDetailedSync(e)}getExpensesDetailedSync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams();return this.http.post(`${p.i}/workspaces/${t}/reports/expenses/detailed`,i).subscribe(e=>{this.expensesDetailedResponse.next({totals:e.totals,expenses:e.expenses.map(e=>new C.a(e))})},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.GET_ENTRIES_FAIL")))}getExpensesDetailedAsync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams();return this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${t}/async/reports/expenses/detailed`,i).subscribe(i=>{this.getExpensesDetailedData(t,i.reportTaskId,e)},t=>{this.getExpensesDetailedSync(e)})}getExpensesDetailedData(e,t,i){return this.http.get(`${p.i}/workspaces/${e}/async/reports/expenses/detailed/${t}`,{observe:"response"}).subscribe(n=>{202!==n.status?this.expensesDetailedResponse.next({totals:n.body.totals,expenses:n.body.expenses.map(e=>new C.a(e))}):setTimeout(()=>{this.getExpensesDetailedData(e,t,i)},this.getTimeOut())},e=>{this.getExpensesDetailedSync(i)})}getEntryIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.DETAILED);return this.http.post(`${p.i}/workspaces/${t}/reports/detailed/ids`,i).pipe(Object(n.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.GET_ENTRY_IDS_FAIL"))),Object(s.a)(e=>e.timeEntryIds))}duplicateTimeEntry(e){const t=d.a.clone(e),i=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/v1/workspaces/${i}/user/${e.user.id}/time-entries/${t.id}/duplicate`,null).pipe(Object(s.a)(e=>(t.id=e.id,e.projectId?e.taskId||(t.task=null):(t.project=null,t.task=null),t)),Object(n.a)(()=>this.toaster.pop("success",this.translate.instant("GLOBAL.DUPLICATE_SUCCESS_MSG")),e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DUPLICATE_FAIL"))))}getWeeklyReport(e){E.a.enableAsync.reports.view?this.getWeeklyAsync(e):this.getWeeklySync(e)}getWeeklySync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.WEEKLY);return this.http.post(`${p.i}/workspaces/${t}/reports/weekly`,i).subscribe(e=>{const t=e.totals[0]||{},i=e.groupOne.map(e=>new g.a(e));this.weeklyResponse.next({totals:new u.a(t),groups:i,totalsByDay:new g.a({days:e.totalsByDay,amount:t.totalAmount,duration:t.totalTime})})},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.GET_WEEKLY_FAIL")))}getWeeklyAsync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams(h.a.WEEKLY);return this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${t}/async/reports/weekly`,i).subscribe(i=>{this.getWeeklyData(t,i.reportTaskId,e)},t=>{this.getWeeklySync(e)})}getWeeklyData(e,t,i){return this.http.get(`${p.i}/workspaces/${e}/async/reports/weekly/${t}`,{observe:"response"}).subscribe(n=>{if(202===n.status)return void setTimeout(()=>{this.getWeeklyData(e,t,i)},this.getTimeOut());const s=n.body.totals[0]||{},r=n.body.groupOne.map(e=>new g.a(e));this.weeklyResponse.next({totals:new u.a(s),groups:r,totalsByDay:new g.a({days:n.body.totalsByDay,amount:s.totalAmount,duration:s.totalTime})})},e=>{this.getWeeklySync(i)})}getSummaryReport(e){E.a.enableAsync.reports.view?this.getSummaryAsync(e):this.getSummarySync(e)}getSummarySync(e){const t=this.workspaceService.getLocalDefaultWorkspace(),i=t.id,n=e.generateBodyParams(h.a.SUMMARY),s=t.projectGroupingLabel||"client";return this.http.post(`${p.i}/workspaces/${i}/reports/summary`,n).subscribe(e=>{this.summaryResponse.next({totals:new u.a(e.totals[0]),chart:e.chart.map(e=>new b.a(e)),groups:e.groupOne.map(e=>new f.a(e,n.summaryFilter.groups,s))})},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.GET_SUMMARY_FAIL")))}getSummaryAsync(e){const t=this.workspaceService.getLocalDefaultWorkspace(),i=t.id,n=e.generateBodyParams(h.a.SUMMARY),s=t.projectGroupingLabel||"client";return this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${i}/async/reports/summary`,n).subscribe(t=>{this.getSummaryData(i,t.reportTaskId,n.summaryFilter.groups,s,e)},t=>{this.getSummarySync(e)})}getSummaryData(e,t,i,n,s){return this.http.get(`${p.i}/workspaces/${e}/async/reports/summary/${t}`,{observe:"response"}).subscribe(r=>{202!==r.status?this.summaryResponse.next({totals:new u.a(r.body.totals[0]),chart:r.body.chart.map(e=>new b.a(e)),groups:r.body.groupOne.map(e=>new f.a(e,i,n))}):setTimeout(()=>{this.getSummaryData(e,t,i,n,s)},this.getTimeOut())},e=>{this.getSummarySync(s)})}getCustomizationSettings(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=this.authService.getUser().id,n=e.toLowerCase();return this.http.get(p.i+`/workspaces/${t}/users/${i}/custom-export/${n}`)}customizeReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=this.authService.getUser().id,s=new o.a;return this.http.put(`${p.i}/workspaces/${i}/users/${n}/custom-export`,{name:e.name,type:t,customFieldIds:t===h.a.DETAILED?e.customFieldIds:[],visibleElements:e.reportFields}).subscribe(e=>{s.next(e),this.toaster.pop("success",this.translate.instant("REPORTS.MESSAGES.UPDATE_EXPORT_SETTINGS_SUCCESS"))},e=>{s.error(e),this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.UPDATE_EXPORT_SETTINGS_FAIL"))}),s}saveReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=new o.a,s=e.generateShareData(t);return this.http.post(`${p.i}/shared/workspaces/${i}`,s).subscribe(e=>{n.next(e),this.toaster.pop("success",this.translate.instant("REPORTS.MESSAGES.CREATE_REPORT_SUCCESS"))},e=>{n.error(e),this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.CREATE_REPORT_FAIL"))}),n}getSharedReports(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).append("page",e.toString()).append("pageSize",t.toString());return this.http.get(`${p.i}/shared/workspaces/${i}/`,{params:n}).pipe(Object(s.a)(e=>(e.reports=e.reports.map(e=>new m.a(e)),e)))}getReportById(e,t){const i=t&&(t.page||t.dateRangeStart||t.sortOrder)?(new r.h).append("page",t.page||"").append("pageSize",t.pageSize||"").append("dateRangeStart",t.dateRangeStart||"").append("dateRangeEnd",t.dateRangeEnd||"").append("sortOrder",t.sortOrder||"").append("sortColumn",t.sortColumn||""):new r.h;return this.http.get(`${p.i}/shared/${e}`,{params:i}).pipe(Object(n.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("REPORTS.MESSAGES.GET_REPORT_FAIL"))))}exportOfSharedReport(e,t,i){const s=(new r.h).append("exportType",t).append("page",i.page||"").append("pageSize",i.pageSize||"").append("dateRangeStart",i.dateRangeStart||"").append("dateRangeEnd",i.dateRangeEnd||"").append("sortOrder",i.sortOrder||"").append("sortColumn",i.sortColumn||"");return this.http.get(`${p.i}/shared/${e}`,{params:s,responseType:"blob"}).pipe(Object(n.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DOWNLOAD_FAIL_MESSAGE"))))}getFilterInfo(e){return this.http.get(`${p.i}/shared/${e}/filters`)}updateSavedReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`${p.i}/workspaces/${i}/shared/${e}/`,t).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("REPORTS.MESSAGES.UPDATE_REPORT_SUCCESS"))},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translate.instant("GLOBAL.UPDATE_FAILED_ERROR_MESSAGE"))}))}updateScheduledReport(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`${p.i}/workspaces/${i}/shared/${e}/scheduled`,t).pipe()}deleteReport(e){return this.http.delete(`${p.i}/shared/${e}`).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("REPORTS.MESSAGES.DELETE_REPORT_SUCCES"))},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translate.instant("GLOBAL.DELETE_ERROR_MESSAGE"))}))}deleteScheduledReport(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`${p.i}/workspaces/${t}/shared/${e}/scheduled`).pipe().subscribe()}downloadPdf(e,t){E.a.enableAsync.reports.download?this.downloadPdfAsync(e,t):this.downloadPdfSync(e,t)}downloadPdfSync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).append("export","pdf"),s=e.generateBodyParams(t);return s.exportType=l.a.PDF,this.http.post(`${p.i}/workspaces/${i}/reports/${this.endpoints[t]}`,s,{params:n,responseType:"blob"}).subscribe(e=>{this.pdfResponse.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DOWNLOAD_FAIL_MESSAGE")))}downloadPdfAsync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).append("export","pdf"),s=e.generateBodyParams(t);return s.exportType=l.a.PDF,this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${i}/async/reports/${this.endpoints[t]}`,s,{params:n}).subscribe(n=>{this.getPdfData(i,t,n.reportTaskId,e)},i=>{this.downloadPdfSync(e,t)})}getPdfData(e,t,i,n){return this.http.get(p.i+`/workspaces/${e}/async/reports/${this.endpoints[t]}/${i}`,{responseType:"blob",observe:"response"}).subscribe(s=>{202!==s.status?this.pdfResponse.next(s.body):setTimeout(()=>{this.getPdfData(e,t,i,n)},this.getTimeOut())},e=>{this.downloadPdfSync(n,t)})}downloadCsvExpenses(e){E.a.enableAsync.expenses.download?this.downloadCsvAsync(e,h.a.EXPENSE_DETAILED):this.downloadCsvSync(e,h.a.EXPENSE_DETAILED)}downloadCsv(e,t){E.a.enableAsync.reports.download?this.downloadCsvAsync(e,t):this.downloadCsvSync(e,t)}downloadCsvSync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).append("export","csv"),s=e.generateBodyParams(t);return s.exportType=l.a.CSV,this.http.post(`${p.i}/workspaces/${i}/reports/${this.endpoints[t]}`,s,{params:n,responseType:"blob"}).subscribe(e=>{this.csvResponse.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DOWNLOAD_FAIL_MESSAGE")))}downloadCsvAsync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).append("export","csv"),s=e.generateBodyParams(t);return s.exportType=l.a.CSV,this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${i}/async/reports/${this.endpoints[t]}`,s,{params:n}).subscribe(n=>{this.getCsvData(i,t,n.reportTaskId,e)},i=>{this.downloadCsvSync(e,t)})}getCsvData(e,t,i,n){return this.http.get(p.i+`/workspaces/${e}/async/reports/${this.endpoints[t]}/${i}`,{responseType:"blob",observe:"response"}).subscribe(s=>{202!==s.status?this.csvResponse.next(s.body):setTimeout(()=>{this.getCsvData(e,t,i,n)},this.getTimeOut())},e=>{this.downloadCsvSync(n,t)})}downloadReceipts(e){E.a.enableAsync.expenses.receipts.download?this.downloadReceiptsAsync(e):this.downloadReceiptsSync(e)}downloadReceiptsSync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams();return this.http.post(`${p.i}/workspaces/${t}/reports/expenses/receipts `,i,{responseType:"blob"}).subscribe(e=>{this.receipts.next(e)},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DOWNLOAD_FAIL_MESSAGE"))})}downloadReceiptsAsync(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=e.generateBodyParams();return this.resetTimeOut(),this.http.post(`${p.i}workspaces/${t}/async/reports/expenses/receipts`,i,{}).subscribe(i=>{this.getReceiptsData(t,i.reportTaskId,e)},t=>{this.downloadReceiptsSync(e)})}getReceiptsData(e,t,i){const n=new r.g({"content-type":"text/plain"});return this.http.get(p.i+`/workspaces/${e}/async/reports/expenses/receipts/${t}`,{headers:n,responseType:"blob",observe:"response"}).subscribe(n=>{202!==n.status?this.receipts.next(n.body):setTimeout(()=>{this.getReceiptsData(e,t,i)},this.getTimeOut())},e=>{this.downloadReceiptsSync(i)})}downloadExcelExpenses(e){E.a.enableAsync.expenses.download?this.downloadExcelAsync(e,h.a.EXPENSE_DETAILED):this.downloadExcelSync(e,h.a.EXPENSE_DETAILED)}downloadExcel(e,t){E.a.enableAsync.reports.download?this.downloadExcelAsync(e,t):this.downloadExcelSync(e,t)}downloadExcelSync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).set("export","xlsx"),s=e.generateBodyParams(t);return s.exportType=l.a.XLSX,this.http.post(`${p.i}/workspaces/${i}/reports/${this.endpoints[t]}`,s,{params:n,responseType:"blob"}).subscribe(e=>{this.excelResponse.next(e)},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DOWNLOAD_FAIL_MESSAGE")))}downloadExcelAsync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new r.h).set("export","xlsx"),s=e.generateBodyParams(t);return s.exportType=l.a.XLSX,this.resetTimeOut(),this.http.post(`${p.i}/workspaces/${i}/async/reports/${this.endpoints[t]}`,s,{params:n}).subscribe(n=>{this.getExcelData(i,t,n.reportTaskId,e)},i=>{this.downloadExcelSync(e,t)})}getExcelData(e,t,i,n){return this.http.get(p.i+`/workspaces/${e}/async/reports/${this.endpoints[t]}/${i}`,{responseType:"blob",observe:"response"}).subscribe(s=>{202!==s.status?this.excelResponse.next(s.body):setTimeout(()=>{this.getExcelData(e,t,i,n)},this.getTimeOut())},e=>{this.downloadExcelSync(n,t)})}quickbooksEntriesSync(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),o={timeEntriesIds:e},a=(new r.h).set("rounding",t.toString());return this.http.post(`${p.h}/workspaces/${i}/time-entries`,o,{params:a}).pipe(Object(s.a)(e=>e),Object(n.a)(t=>{(null==t?void 0:t.timeEntriesSent)===e.length&&this.toaster.pop("success",this.translate.instant("REPORTS.MESSAGES.SYNC_SUCCESS"))},e=>{var t,i,n;(null===(i=null===(t=e.error)||void 0===t?void 0:t.payload)||void 0===i?void 0:i.length)||this.toaster.pop("error",(null===(n=e.error)||void 0===n?void 0:n.message)||"REPORTS.MESSAGES.SYNC_FAIL")}))}getTimeOut(){if(this.fibonacciSequence.length<2)return this.fibonacciSequence.push(1),1;const e=this.fibonacciSequence.length;return this.fibonacciSequence.push(this.fibonacciSequence[e-1]+this.fibonacciSequence[e-2]),1e3*this.fibonacciSequence[e]}resetTimeOut(){this.fibonacciSequence=[]}}return e.\u0275fac=function(t){return new(t||e)(w.fc(c.d),w.fc(a.a),w.fc(v.a),w.fc(r.c),w.fc(S.f))},e.\u0275prov=w.Nb({token:e,factory:e.\u0275fac}),e})()},VucA:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("LPYB"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.b]]}),e})()},WOAq:function(e,t,i){"use strict";(function(e){var n=i("Ju5/"),s=i("L3Qv"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r?n.a.Buffer:void 0;t.a=(a?a.isBuffer:void 0)||s.a}).call(this,i("3UD+")(e))},"WQ+v":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{parseInput(e){e.indexOf(".")>-1&&(e=this.formatDecimals(e.toLowerCase()));const t=Number(e);if(isNaN(t))return this.isTimeValid(e)?this.parseTimeWithSeparator(e.toLowerCase()):null;if(t%1!=0)return null;if(e.length<3){let t=Number(e);if(t>24){const e=t%10;return t=Math.floor(t/10),`${t}:${e}`}return e+":00"}return 3===e.length?`0${e.substring(0,1)}${e.substring(1,3)}`:e.length>3?t<2400?`${e.substring(0,2)}${e.substring(2,4)}`:null:void 0}formatDecimals(e){let t,i,n="";const s=e.split(".");if(t=s[0],/[0-9]{1,2}.[0-9]{1,2}(a|am|p|pm)/.test(e)){s[1]=s[1].replace("a"," a"),s[1]=s[1].replace("p"," p");const e=s[1].split(" ");i=1==e[0].length?"0".concat(e[0]):e[0],n=e[1]}else i=1==s[1].length?"0".concat(s[1]):s[1];return t.concat(":").concat(i).concat(n)}isTimeValid(e){const t=this.convertTotalTimeTo24HourDisplay(e),i=Number(t)<2460,n=Number(t)<24;return t.length<3?n:i}parseTimeWithSeparator(e){if(/[0-9]{1,2}:[0-9]{1,2}(a|am|p|pm)/.test(e)){const t=e.split(":");let i;const n=t[1].substring(0,2),s=Number(t[0]);return s>12?null:(i=this.isPM(e)&&12!==s?(s+12).toString():(this.isAM(e)&&12===s?0:s).toString(),this.parseTimeWithSeparatorWithoutString(`${i}:${n}`))}if(/^\d{1,4}(a|p|am|pm)$/i.test(e)){const t=e.toLowerCase().replace("a","").replace("p","").replace("m","");let i="00",n="00";switch(t.length){case 1:case 2:if("0"===e||"00"===e)i="00";else{const n=Number(t.substring(0,2));if(n>12)return null;i=this.isPM(e)&&12!==n?(n+12).toString():(this.isAM(e)&&12===n?0:n).toString()}break;case 3:{const s=Number(t.substring(0,1));if(s>12)return null;"00"!==e.substring(0,2)||"0"!==e.substring(1,t.length)&&"00"!==e.substring(1,t.length)?(i=this.isPM(e)&&12!==s?(s+12).toString():(this.isAM(e)&&12===s?0:s).toString(),n=t.substring(1,t.length)):i="00";break}case 4:{const s=Number(t.substring(0,2));if(s>12)return null;"00"!==e.substring(0,2)||"0"!==e.substring(2,t.length)&&"00"!==e.substring(2,t.length)?(i=this.isPM(e)&&12!==s?(s+12).toString():(this.isAM(e)&&12===s?0:s).toString(),n=t.substring(2,t.length)):i="00";break}}return this.parseTimeWithSeparatorWithoutString(`${i.length<2?"0"+i:i}:${n.length<2?"0"+n:n}`)}return this.parseTimeWithSeparatorWithoutString(e)}parseTimeWithSeparatorWithoutString(e){if(/^\d\d:\d\d$/.test(e)){const t=e.split(":");return t[0]+t[1]}if(/^\d:\d\d$/.test(e)){const t=e.split(":");return"0"+t[0]+t[1]}return null}isAM(e){return e.toLowerCase().endsWith("a")||e.toLowerCase().endsWith("am")}isPM(e){return e.toLowerCase().endsWith("p")||e.toLowerCase().endsWith("pm")}convertTotalTimeTo24HourDisplay(e){let t=e.toLowerCase().replace(/((am|a)|(pm|p))/,"");return this.isPM(e)&&(-1===t.indexOf(":")&&(t=this.getTotalTimeWithSeparator(t)),t||(t=""),t=(Number(t.substring(0,t.indexOf(":")))+12).toString().concat(t.substring(t.indexOf(":")+1,t.length))),t.replace(":","")}getTotalTimeWithSeparator(e){switch(e.length){case 1:return`0${e}:00`;case 2:return e+":00";case 3:return`0${e.substring(0,1)}:${e.substring(1,3)}`;case 4:return`${e.substring(0,2)}:${e.substring(2,4)}`;default:return null}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac}),e})()},Ww9u:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("B01t"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a]]}),e})()},X2fY:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("3+I5"),s=i("p0l5");class r{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._userId=null==e?void 0:e.userId,this._date=null==e?void 0:e.date,this._projectId=null==e?void 0:e.projectId,this._categoryId=null==e?void 0:e.categoryId,this._notes=null==e?void 0:e.notes,this._quantity=null==e?void 0:e.quantity,this._billable=null==e?void 0:e.billable,this._fileId=null==e?void 0:e.fileId,this._fileName=null==e?void 0:e.fileName,this._file=null==e?void 0:e.file,this._total=null!=(null==e?void 0:e.total)?null==e?void 0:e.total:null==e?void 0:e.amount,this._locked=null==e?void 0:e.locked,this._project=(null==e?void 0:e.project)||new n.a({id:null==e?void 0:e.projectId,name:null==e?void 0:e.projectName,color:null==e?void 0:e.projectColor,clientId:null==e?void 0:e.clientId}),this._category=(null==e?void 0:e.category)||new s.a({id:null==e?void 0:e.categoryId,name:null==e?void 0:e.categoryName,unit:null==e?void 0:e.categoryUnit,hasUnitPrice:null==e?void 0:e.categoryHasUnitPrice}),this._userName=null==e?void 0:e.userName}get id(){return this._id}get workspaceId(){return this._workspaceId}get userId(){return this._userId}get date(){return this._date}get projectId(){return this._projectId}get categoryId(){return this._categoryId}get notes(){return this._notes}get quantity(){return this._quantity}get billable(){return this._billable}set id(e){this._id=e}set workspaceId(e){this._workspaceId=e}set userId(e){this._userId=e}set projectId(e){this._projectId=e}set categoryId(e){this._categoryId=e}set notes(e){this._notes=e}set quantity(e){this._quantity=e}set billable(e){this._billable=e}set userName(e){this._userName=e}get fileId(){return this._fileId}get file(){return this._file}get total(){return this._total}get project(){return this._project}get category(){return this._category}get fileName(){return this._fileName}get locked(){return this._locked}get userName(){return this._userName}}},XLnJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return p}));var n=i("hkzH"),s=i("lvCY"),r=i("rsZi"),o=i("vqWo"),a=i("fANO"),c=i("BuEj"),l=i("RkOr"),u=i("RWlN"),d=i("rnVd"),h=function(e){return e.CSV="CSV",e.PDF="PDF",e.XLSX="XLSX",e}({});class p{constructor(e,t,i,n,s,r,o,a,c,l,u,d,h,p,b,f,m,g,v){this.dateRange=e,this.relativeDateRange=t,this.filterValuesData=i,this.description=n,this.audit=s,this.pagination=r,this.sortData=o,this.zoomLevel=a,this.shareReport=c,this.isRounding=l,this.amounts=u,this.amountOption=d,this.withoutDescription=h,this.customFieldFilters=p,this.summaryFilterGroups=b,this.weeklyGroup=f,this.quickbooksSelectType=m,this.showEstimate=g,this.totalOptions=v}generateBodyParams(e){var t,i;const n=navigator.languages&&navigator.languages[0]||navigator.language||"",a={dateRangeStart:this.dateRange.start.toISOString(),dateRangeEnd:this.dateRange.end.toISOString(),sortOrder:this.sortData.sortOrder||r.a.ASCENDING,description:this.description||"",rounding:this.isRounding||!1,withoutDescription:this.withoutDescription||!1,amounts:e===c.a.SUMMARY?this.amounts:(null===(t=this.amounts)||void 0===t?void 0:t.length)>0?[this.amounts[0]]:null,amountShown:this.amountOption,zoomLevel:this.zoomLevel?this.zoomLevel.toUpperCase():u.a.WEEK.toUpperCase(),userLocale:n.replace(/\-/g,"_"),customFields:this.getCustomFields(),showEstimate:this.showEstimate};return this.setDateRangeType(a),this.setStatusToObject(a),this.setUserAndUserGroup(a),this.setContainFilters(a),e===c.a.DETAILED?a.detailedFilter={sortColumn:this.sortData.sortColumn||o.b.DESCRIPTION,page:this.pagination.page||1,pageSize:this.pagination.pageSize||s.j,auditFilter:this.audit.getBodyParameters(),quickbooksSelectType:this.quickbooksSelectType||"ALL",options:{totals:this.totalOptions}}:e===c.a.SUMMARY?a.summaryFilter={sortColumn:this.sortData.sortColumn||l.c.GROUP,groups:this.summaryFilterGroups.filter(e=>!!e&&e!==l.a.NONE)}:e===c.a.WEEKLY&&(a.weeklyFilter={group:this.weeklyGroup,subgroup:0===(null===(i=this.amounts)||void 0===i?void 0:i.length)?"TIME":"EARNINGS"}),a}generateShareData(e){const t=this.generateBodyParams(e),i={name:this.shareReport.name,isPublic:this.shareReport.isPublic,fixedDate:this.shareReport.fixedDate,type:e,filter:t,scheduledReport:this.shareReport.scheduledReport?{type:this.shareReport.scheduledReport.type,recipients:this.shareReport.scheduledReport.recipients}:null};return i.isPublic||(i.visibleToUserGroups=[this.shareReport.visibleToUserGroup]),i}setDateRangeType(e){this.shareReport&&(e.dateRangeType=this.shareReport.isRelativeDateRange?this.relativeDateRange.type:d.a.ABSOLUTE.type)}setStatusToObject(e){if(!this.filterValuesData[n.i.STATUSES])return;const t=this.filterValuesData[n.i.STATUSES].getContainsFilter(n.b);t&&0!==t.ids.length&&2!==t.ids.length&&(e.billable=t.ids.includes(n.c.BILLABLE));const i=this.filterValuesData[n.i.STATUSES].getContainsFilter(n.a);i&&1===i.ids.length&&(e.approvalState=i.ids.includes("APPROVED")?"APPROVED":"UNAPPROVED");const s=this.filterValuesData[n.i.STATUSES].getContainsFilter(n.g);s&&1===s.ids.length&&(e.invoicingState=s.ids.includes("INVOICED")?"INVOICED":"UNINVOICED")}setContainFilters(e){const t=[n.i.STATUSES,n.i.USERS_AND_GROUP];for(const i in this.filterValuesData){if(t.includes(i))continue;const n=this.filterValuesData[i].getContainsFilter(i);n&&(e[i]=n)}}setUserAndUserGroup(e){if(!this.filterValuesData||!this.filterValuesData[n.i.USERS_AND_GROUP])return;const t=this.filterValuesData[n.i.USERS_AND_GROUP].getContainsFilter(n.k);if(t&&(e[n.k]=t),status===n.l.INACTIVE||status===n.l.PENDING)return;const i=this.filterValuesData[n.i.USERS_AND_GROUP].getContainsFilter(n.f);i&&(e[n.f]=i)}getCustomFields(){if(!this.customFieldFilters||!this.customFieldFilters.length)return null;const e=this.customFieldFilters.filter(e=>e.type!==a.b.NUMBER);return this.customFieldFilters.filter(e=>e.type===a.b.NUMBER).forEach(t=>{t.value.forEach(i=>{i.isChecked&&e.push({id:t.id,type:t.type,value:i.value,numberCondition:i.type})})}),e}}},XqMk:function(e,t,i){"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;t.a=n},XuQk:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return e.filter(e=>t.includes(e.customField.status))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"filterCustomFields",type:e,pure:!0}),e})()},"Xwq/":function(e,t,i){"use strict";var n=i("FWf1"),s=i("p//D"),r=i("GiSu");t.toSubscriber=function(e,t,i){if(e){if(e instanceof n.Subscriber)return e;if(e[s.rxSubscriber])return e[s.rxSubscriber]()}return e||t||i?new n.Subscriber(e,t,i):new n.Subscriber(r.empty)}},"Y/0s":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("SO3W"),s=i("wHJU");class r{constructor(e){this._userId=null==e?void 0:e.userId,this._userName=null==e?void 0:e.userName,this._userImageUrl=null==e?void 0:e.userImageUrl,this._requests=(null==e?void 0:e.requests)?null==e?void 0:e.requests.map(e=>new n.a(e)):null,this._holidays=(null==e?void 0:e.holidays)?null==e?void 0:e.holidays.map(e=>new s.a(e)):null,this._days=null==e?void 0:e.days}get userId(){return this._userId}get userName(){return this._userName}get userImageUrl(){return this._userImageUrl}get requests(){return this._requests}get holidays(){return this._holidays}get days(){return this._days}set days(e){this._days=e}}},Y4HG:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return c}));var n=i("MO+k"),s=i("wd/R"),r=i("F2Zd"),o=i("YnOA");function a(e,t,i,n){const s=e.chart.ctx,o=[],a=[];"Billable"===e.data.datasets[0].label&&e.data.datasets[0].data.forEach((t,i)=>{o.push(t+e.data.datasets[1].data[i]),a.push(t)}),e.data.datasets.forEach((c,u)=>{const d=e.getDatasetMeta(u);if(d.hidden)return;const h=r.e[Object(r.b)()].totalDuration,p=r.e[Object(r.b)()].linesXColor;d.data.forEach((r,d)=>{const b=.2*o[d]<a[d],f=r.tooltipPosition();s.textAlign="center",s.textBaseline="middle",0===u&&c.label&&(r._model.y<250&&n&&b&&function(e,t,i){l(e,18),e.fillStyle="rgb(255, 255, 255)";const n=t.y+9;e.fillText(i,t.x,n>240?n+8:n+20)}(s,f,i),function(e,t,i){e.beginPath(),e.moveTo(t._model.x-t._model.width/2,t._model.base),e.strokeStyle=i,e.lineTo(t._model.x+t._model.width/2,t._model.base),e.stroke(),e.closePath()}(s,r,p)),u!=e.data.datasets.length-1||"dashboard__doughnut-chart__canvas chartjs-render-monitor"===e.ctx.canvas.className||function(e,t,i,n,s,r){const o=t.length<=25&&window.innerWidth>550?t[n]:"";e.fillStyle=r;const a=window.innerWidth>750?14:12;l(e,a),e.fillText(o,s.x,s.y-a/2-5)}(s,t,0,d,f,h)})})}function c(e,t,i,n){const a=e.chart.ctx,c=e.data.datasets[0],u=e.getDatasetMeta(0);if(a.textAlign="center",a.textBaseline="middle",u.hidden)return;const d=r.f[Object(r.b)()].total;u.data.forEach(e=>{if(!c.label&&0===e._index){l(a,16),a.fillStyle=d;const r=n?i:Object(o.a)(Object(s.duration)(i),t);a.fillText(r,e._view.x,e._view.y)}})}function l(e,t,i,s){e.font=n.helpers.fontString(t||"14",i||"normal",s||"'Roboto', sans-serif")}},Y9C3:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("hkzH");class s{constructor(e){this._recipients=e&&e.recipients&&e.recipients.contains?e.recipients:{contains:n.d.CONTAINS,ids:e.recipients},this._type=e&&e.type}get recipients(){return this._recipients}set recipients(e){this._recipients=e}get type(){return this._type}set type(e){this._type=e}equals(e){return null!=e&&this.type===e.type&&this.recipients.contains===e.recipients.contains&&this.recipients.ids===e.recipients.ids}}},YDZJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("xoOP"),s=i("wd/R"),r=i("RkOr"),o=i("lvCY"),a=i("VfV2");const c={[r.a.CLIENT]:"GLOBAL.CLINENT_LABEL",[r.a.DATE]:"GLOBAL.DATE_LABEL",[r.a.WEEK]:"TEAMS.REMINDERS.DATE_RANGE.WEEK_LABEL",[r.a.MONTH]:"GLOBAL.MONTH_LABEL",[r.a.PROJECT]:"GLOBAL.PROJECT_LABEL",[r.a.TAG]:"GLOBAL.TAG_LABEL",[r.a.TASK]:"GLOBAL.TASK_LABEL",[r.a.TIMEENTRY]:"GLOBAL.DESCRIPTION_LABEL",[r.a.USER]:"GLOBAL.USER_LABEL",[r.a.USER_GROUP]:"GLOBAL.GROUP_LABEL"};class l{constructor(e,t,i,n){const s=e.ids||e._id;this.estimate=e.estimate,this.ids=this.toArray(s),this.level=e.level||n||0,this.type=e.type||t[this.level],this.amounts=e.amounts||[],this.amount=e.amount,this.duration=this.getDuration(e.duration),this.clientName=e.clientName,this.projectName=e.projectName,this.projectColor=e.projectColor,this.type===r.a.PROJECT&&(this.color=e.color||e.projectColor||o.p);const a=e.name||e.description;a?this.name=a:this.withoutLabel=this.type===r.a.CLIENT?i:c[this.type],e.children&&(this.children=e.children.map(e=>new l(e,t,i,this.level+1)))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}get hasId(){return Array.isArray(this.ids)?!!this.ids.length:!!this.ids}getDuration(e){return e=e||0,Object(n.u)(e)?s.duration(e,"s").toISOString():s.duration(e).toISOString()}getEstimate(e){"BUDGET"===(null==e?void 0:e.type)?(this.estimate.amount=((null==e?void 0:e.amount)/100).toString(),this.estimate.type="BUDGET"):"TIME"===(null==e?void 0:e.type)&&(this.estimate.amount=s.duration(null==e?void 0:e.amount,"s").toISOString(),this.estimate.type="BUDGET")}setAmounts(e){!this.amounts.length&&e.length&&(this.amounts=[new a.a(e[0],this.amount)])}}},Zco2:function(e,t,i){"use strict";i.r(t),i.d(t,"ExpensesModule",(function(){return Wt}));var n=i("ofXK"),s=i("3Pt+"),r=i("tyNb"),o=i("OmiP"),a=i("lGQG"),c=i("LfE4"),l=i("fXoL"),u=i("1kSV"),d=i("sYmb"),h=i("kKK/"),p=i("tQGB"),b=i("/wxh"),f=i("XNiG"),m=i("1G5W");function g(e,t){1&e&&(l.Vb(0),l.Xb(1,"th",2),l.Xb(2,"div",3),l.Xb(3,"div",4),l.Zc(4),l.oc(5,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Xb(6,"th",2),l.Xb(7,"div",3),l.Xb(8,"div",4),l.Zc(9),l.oc(10,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Ub()),2&e&&(l.Cb(4),l.ad(l.pc(5,2,"EXPENSES.CATEGORIES.TABLE.COLUMNS.NAME")),l.Cb(5),l.ad(l.pc(10,4,"EXPENSES.CATEGORIES.TABLE.COLUMNS.UNIT")))}function v(e,t){if(1&e){const e=l.Yb();l.Xb(0,"th",5),l.Xb(1,"div",6),l.Zc(2),l.oc(3,"translate"),l.Xb(4,"div",7),l.Xb(5,"a",8),l.jc("click",(function(){return l.Oc(e),l.nc().expandAll()})),l.Xb(6,"span",9),l.Sb(7,"img",10),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.nc();l.Cb(2),l.bd("",l.pc(3,2,"EXPENSES.CATEGORIES.TABLE.COLUMNS.NAME")," "),l.Cb(5),l.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",l.Qc)}}let C=(()=>{class e{constructor(){this.onExpandAll=new l.n}ngOnInit(){}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Lb({type:e,selectors:[["category-table-header"],["","category-table-header",""]],inputs:{isDesktop:"isDesktop"},outputs:{onExpandAll:"onExpandAll"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileTemplate",""],[1,"cl-d-none","cl-d-lg-table-cell"],[1,"cl-ml-2"],[1,"cl-h5","cl-mb-0"],["colspan","6",1,"cl-pl-lg-3"],[1,"cl-h5","cl-mb-0","cl-d-flex","cl-justify-content-between","cl-align-items-center"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"]],template:function(e,t){if(1&e&&(l.Xc(0,g,11,6,"ng-container",0),l.Xc(1,v,8,4,"ng-template",null,1,l.Yc)),2&e){const e=l.Lc(2);l.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[n.u],pipes:[d.e],encapsulation:2}),e})();var E=i("aDua"),w=i("1Tmk"),S=(i("p0l5"),i("5SNR")),y=i("QKuU"),O=i("eGqU"),A=i("SvJf"),k=i("Y9WU");function T(e,t){1&e&&(l.Xb(0,"h1",21),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e&&(l.Cb(1),l.ad(l.pc(2,1,"EXPENSES.CATEGORIES.CREATE.MODAL.TITLE")))}function D(e,t){1&e&&(l.Xb(0,"h1",21),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e&&(l.Cb(1),l.ad(l.pc(2,1,"EXPENSES.CATEGORIES.EDIT.MODAL.TITLE")))}function I(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"div",22),l.Xb(2,"div"),l.Zc(3),l.oc(4,"translate"),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Cb(3),l.ad(l.pc(4,1,"EXPENSES.CATEGORIES.CREATE.MODAL.UNIT_PRICE.INFO_HOVER")))}function _(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",23),l.Xb(1,"div",24),l.Xb(2,"div",25),l.Xb(3,"label"),l.Zc(4),l.oc(5,"translate"),l.Wb(),l.Xb(6,"span",7),l.Zc(7,"*"),l.Wb(),l.Xb(8,"input",26),l.jc("focusout",(function(){return l.Oc(e),l.nc().transformToDecimal()}))("change",(function(){return l.Oc(e),l.nc().transformAmount()})),l.Wb(),l.Wb(),l.Xb(9,"div",27),l.Sb(10,"label"),l.Xb(11,"label"),l.Zc(12),l.oc(13,"translate"),l.Wb(),l.Wb(),l.Xb(14,"div",25),l.Xb(15,"label"),l.Zc(16),l.oc(17,"translate"),l.Wb(),l.Xb(18,"span",7),l.Zc(19,"*"),l.Wb(),l.Xb(20,"input",28),l.jc("change",(function(t){return l.Oc(e),l.nc().addUnitNameEvent(t)})),l.oc(21,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.nc();l.Cb(4),l.cd("",l.pc(5,6,"GLOBAL.AMOUNT_LABEL")," (",e.wsCurrency,")"),l.Cb(4),l.wc("placeholder","0.00"),l.Cb(4),l.bd(" ",l.pc(13,8,"EXPENSES.CATEGORIES.TABLE.ROWS.PER")," "),l.Cb(4),l.ad(l.pc(17,10,"EXPENSES.CATEGORIES.LABEL.UNIT")),l.Cb(4),l.wc("placeholder",l.pc(21,12,"EXPENSES.CATEGORIES.PLACEHOLDER.UNIT"))}}let R=(()=>{class e{constructor(e,t,i,n){this.categoryService=e,this.workspaceService=t,this.cd=i,this.analyticsService=n,this.closeEmit=new l.n,this.create=new l.n,this.edit=new l.n,this.numberRegex="^(\\d{1,5}|\\d{0,5}\\.\\d{1,2})$",this.form=new s.j({name:new s.g(null,[s.G.required,s.G.minLength(2)]),hasUnitPrice:new s.g(null),amount:new s.g(null,[s.G.pattern(this.numberRegex)]),unit:new s.g(null)}),this.isExpended=!1,this.wsCurrency="USD"}ngOnInit(){"edit"===this.type&&this.fillModal(),this.wsCurrency=this.workspaceService.getLocalDefaultWorkspace().hourlyRate.currency}close(){this.closeEmit.emit()}changeStatus(e){this.isExpended=e.target.checked,this.analyticsService.addEvent(new A.a({event:"switch",value:this.isExpended,section:"Expenses",section2:"Categories",section3:"Add Category",section4:"This expense has a unit price"})),this.form.get("amount").setValue("1.00"),this.isExpended?(this.form.get("amount").setValidators([s.G.required,s.G.pattern(this.numberRegex)]),this.form.get("unit").setValidators(s.G.required)):(this.form.get("amount").clearValidators(),this.form.get("unit").clearValidators()),this.form.get("amount").updateValueAndValidity(),this.form.get("unit").updateValueAndValidity()}addUnitNameEvent(e){var t;this.analyticsService.addEvent(new A.a({event:"change",value:null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,section:"Expenses",section2:"Categories",section3:"Add Category",section4:"Unit name"}))}fillModal(){this.form.patchValue({name:this.category.name,hasUnitPrice:this.category.hasUnitPrice,amount:Number(this.category.priceInCents/100).toFixed(2),unit:this.category.unit}),this.isExpended=this.form.value.hasUnitPrice}onSubmit(){this.form.valid&&("create"===this.type?this.categoryService.create(this.form.value):this.categoryService.edit(this.form.value,this.category.id)).subscribe(e=>{const t=e.category;"create"===this.type&&this.analyticsService.addEvent(new A.a({event:"Submit",value:"Create",section:"Expenses",section2:"Categories",section3:"Add Category"})),"create"===this.type?this.create.emit(t):this.edit.emit(t)})}openPopup(e){e.open()}closePopup(e){e.close()}transformToDecimal(){const e=this.form.get("amount").value;isNaN(Number(e))?this.form.get("amount").setValue("1.00"):this.form.get("amount").setValue(Number(e).toFixed(2))}transformAmount(){Number(this.form.get("amount").value)<0&&this.form.get("amount").setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(b.a),l.Rb(w.a),l.Rb(l.h),l.Rb(k.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["create-expense-category"],["","create-expense-category",""]],inputs:{type:"type",category:"category"},outputs:{closeEmit:"closeEmit",create:"create",edit:"edit"},decls:35,vars:24,consts:[[1,"cl-modal-header"],["class","cl-modal-title",4,"ngIf"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","../../../../../../assets/images/ui-icons/close.svg"],[1,"cl-modal-body",3,"formGroup"],[1,"cl-mb-3"],[1,"cl-color-red","cl-ml-1"],["ngbAutofocus","","formControlName","name",1,"cl-form-control",3,"placeholder"],[1,"cl-form-group"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","formControlName","hasUnitPrice","id","witUnitPrice",1,"cl-custom-control-input",3,"checked","change"],["for","witUnitPrice",1,"cl-custom-control-label"],["popContent",""],["triggers","manual","popoverClass","popover-dark","placement","top","container","body",1,"cl-ml-1","cl-d-inline-flex",3,"ngbPopover","mouseover","mouseleave"],["popup","ngbPopover"],["src","assets/ui-icons/info-9.svg"],["class","cl-container",4,"ngIf"],[1,"cl-modal-footer"],[3,"click"],["type","submit",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-modal-title"],[1,"cl-text-white"],[1,"cl-container"],[1,"cl-row"],[1,"cl-col"],["type","text","ngbAutofocus","","formControlName","amount",1,"cl-form-control",3,"placeholder","focusout","change"],[1,"cl-col-2","cl-d-flex","cl-align-items-end","cl-justify-content-center","cl-mb-1"],["ngbAutofocus","","formControlName","unit",1,"cl-form-control",3,"placeholder","change"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xc(1,T,3,3,"h1",1),l.Xc(2,D,3,3,"h1",1),l.Xb(3,"button",2),l.jc("click",(function(){return t.close()})),l.Xb(4,"span",3),l.Sb(5,"img",4),l.Wb(),l.Wb(),l.Wb(),l.Xb(6,"div",5),l.Xb(7,"div",6),l.Xb(8,"label"),l.Zc(9),l.oc(10,"translate"),l.Xb(11,"span",7),l.Zc(12,"*"),l.Wb(),l.Wb(),l.Sb(13,"input",8),l.oc(14,"translate"),l.Wb(),l.Xb(15,"div",9),l.Xb(16,"div",10),l.Xb(17,"input",11),l.jc("change",(function(e){return t.changeStatus(e)})),l.Wb(),l.Xb(18,"label",12),l.Zc(19),l.oc(20,"translate"),l.Wb(),l.Xc(21,I,5,3,"ng-template",null,13,l.Yc),l.Xb(23,"a",14,15),l.jc("mouseover",(function(){l.Oc(e);const i=l.Lc(24);return t.openPopup(i)}))("mouseleave",(function(){l.Oc(e);const i=l.Lc(24);return t.closePopup(i)})),l.Sb(25,"img",16),l.Wb(),l.Wb(),l.Wb(),l.Xc(26,_,22,14,"div",17),l.Wb(),l.Xb(27,"div",18),l.Xb(28,"a",19),l.jc("click",(function(){return t.close()})),l.Zc(29),l.oc(30,"translate"),l.Wb(),l.Xb(31,"button",20),l.jc("click",(function(){return t.onSubmit()})),l.Zc(32),l.oc(33,"translate"),l.oc(34,"translate"),l.Wb(),l.Wb()}if(2&e){const e=l.Lc(22);l.Cb(1),l.wc("ngIf","create"===t.type),l.Cb(1),l.wc("ngIf","edit"===t.type),l.Cb(4),l.wc("formGroup",t.form),l.Cb(3),l.bd("",l.pc(10,12,"EXPENSES.CATEGORIES.TABLE.COLUMNS.NAME")," "),l.Cb(4),l.wc("placeholder",l.pc(14,14,"GLOBAL.PLACEHOLDER.ENTER_NAME")),l.Cb(4),l.wc("checked",t.isExpended),l.Cb(2),l.ad(l.pc(20,16,"EXPENSES.CATEGORIES.LABEL.HAS_UNIT")),l.Cb(4),l.wc("ngbPopover",e),l.Cb(3),l.wc("ngIf",t.isExpended),l.Cb(3),l.ad(l.pc(30,18,"GLOBAL.CANCEL_BTN")),l.Cb(2),l.wc("disabled",t.form.invalid||t.form.pristine&&"edit"===t.type),l.Cb(1),l.bd(" ","create"===t.type?l.pc(33,20,"GLOBAL.CREATE_LABEL"):l.pc(34,22,"GLOBAL.SAVE_LABEL")," ")}},directives:[n.u,s.t,s.k,s.c,s.s,s.i,s.a,u.M],pipes:[d.e],encapsulation:2}),e})();var L=i("kojQ"),x=i("rg2B"),P=i("Lwft");function j(e,t){1&e&&l.Tb(0)}function M(e,t){if(1&e&&(l.Xb(0,"div",8),l.Xb(1,"div",9),l.Xb(2,"div",10),l.Xb(3,"div",11),l.Zc(4),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.nc();l.Cb(3),l.Wc("text-decoration",e.category.archived?"line-through":""),l.xc("title",e.category.name),l.Cb(1),l.bd("",e.category.name," ")}}function X(e,t){if(1&e&&(l.Xb(0,"div",15),l.Zc(1),l.oc(2,"roundIfWholeNumber"),l.oc(3,"centsToDollars"),l.oc(4,"translate"),l.Wb()),2&e){const e=l.nc(2);l.Cb(1),l.ed("",l.pc(2,4,l.pc(3,6,e.category.priceInCents))," ",e.wsCurrency," ",l.pc(4,8,"EXPENSES.CATEGORIES.TABLE.ROWS.PER")," ",e.category.unit,"")}}function F(e,t){1&e&&(l.Xb(0,"div",15),l.Zc(1,"-"),l.Wb())}function W(e,t){if(1&e&&(l.Xb(0,"div",12),l.Xb(1,"div",8),l.Xc(2,X,5,10,"div",13),l.Xc(3,F,2,0,"ng-template",null,14,l.Yc),l.Wb(),l.Wb()),2&e){const e=l.Lc(4),t=l.nc();l.Cb(2),l.wc("ngIf",t.category.hasUnitPrice)("ngIfElse",e)}}function B(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",23),l.jc("click",(function(){l.Oc(e);const t=l.nc(3),i=l.Lc(10);return t.modalType="edit",t.openEditModal(i)})),l.Zc(1),l.oc(2,"translate"),l.Wb()}2&e&&(l.Cb(1),l.ad(l.pc(2,1,"GLOBAL.EDIT_LABEL")))}function N(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",23),l.jc("click",(function(){l.Oc(e);const t=l.nc(3);return t.archiveCategory(t.category)})),l.Zc(1),l.oc(2,"translate"),l.Wb()}2&e&&(l.Cb(1),l.ad(l.pc(2,1,"GLOBAL.ARCHIVE_LABEL")))}function G(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",23),l.jc("click",(function(){l.Oc(e);const t=l.nc(3);return t.restoreCategory(t.category)})),l.Zc(1),l.oc(2,"translate"),l.Wb()}2&e&&(l.Cb(1),l.ad(l.pc(2,1,"GLOBAL.RESTORE_LABEL")))}function U(e,t){if(1&e){const e=l.Yb();l.Xb(0,"a",23),l.jc("click",(function(){l.Oc(e);const t=l.nc(3),i=l.Lc(12);return t.openDeleteModal(i)})),l.Zc(1),l.oc(2,"translate"),l.Wb()}2&e&&(l.Cb(1),l.ad(l.pc(2,1,"GLOBAL.DELETE_BTN")))}function V(e,t){if(1&e&&(l.Xb(0,"div",20),l.Xb(1,"div",21),l.Xc(2,B,3,3,"a",22),l.Xc(3,N,3,3,"a",22),l.Xc(4,G,3,3,"a",22),l.Xc(5,U,3,3,"a",22),l.Wb(),l.Wb()),2&e){const e=l.nc(2);l.Cb(2),l.wc("ngIf",!1===e.category.archived),l.Cb(1),l.wc("ngIf",!1===e.category.archived),l.Cb(1),l.wc("ngIf",!0===e.category.archived),l.Cb(1),l.wc("ngIf",!0===e.category.archived)}}function H(e,t){1&e&&(l.Xb(0,"div",16),l.Xb(1,"div",17),l.Sb(2,"img",18),l.Wb(),l.Xc(3,V,6,4,"div",19),l.Wb())}function Y(e,t){if(1&e){const e=l.Yb();l.Xb(0,"create-expense-category",24),l.jc("edit",(function(i){l.Oc(e);const n=t.$implicit;return l.nc().onEdit(i),n.close()}))("closeEmit",(function(){return t.$implicit.close()})),l.Wb()}if(2&e){const e=l.nc();l.wc("type",e.modalType)("category",e.category)}}const $=function(e){return{value:e}};function z(e,t){if(1&e){const e=l.Yb();l.Xb(0,"delete-confirm-modal",25),l.jc("onClose",(function(){return t.$implicit.close()}))("onDelete",(function(){l.Oc(e);const i=t.$implicit;return l.nc().delete(),i.close()})),l.oc(1,"translate"),l.Xb(2,"div"),l.Zc(3),l.oc(4,"translate"),l.Wb(),l.Wb()}if(2&e){const e=l.nc();l.wc("title",l.pc(1,3,"EXPENSES.CATEGORIES.DELETE.MODAL.TITLE"))("confirmationText","delete"),l.Cb(3),l.ad(l.qc(4,5,"EXPENSES.CATEGORIES.DELETE.MODAL.INFO_MESSAGE",l.Bc(8,$,e.category.name)))}}const Z=function(e){return{labels:e}},K=function(e,t,i){return[e,t,i]};let q=(()=>{class e{constructor(e,t,i,n){this.modalService=e,this.categoriesService=t,this.translate=i,this.workspaceService=n,this.isCategoryDeleted=new l.n,this.labels=[this.translate.instant("EXPENSES.CATEGORIES.TABLE.COLUMNS.NAME"),this.translate.instant("EXPENSES.CATEGORIES.TABLE.COLUMNS.UNIT")],this.onArchive=new l.n,this.wsCurrency="USD"}set archived(e){this.isArchived=e}ngOnInit(){this.wsCurrency=this.workspaceService.getLocalDefaultWorkspace().hourlyRate.currency}archiveCategory(e){this.categoriesService.updateStatus(e.id,!0).subscribe(({category:e})=>{this.category=e}),this.onArchive.emit(this.category.archived)}restoreCategory(e){this.categoriesService.updateStatus(e.id,!1).subscribe(({category:e})=>{this.category=e}),this.onArchive.emit(this.category.archived)}openDeleteModal(e){this.modalService.open(e,{centered:!0})}openEditModal(e){this.modalService.open(e,{centered:!0})}onEdit(e){this.category=e}delete(){this.categoriesService.delete(this.category).subscribe(()=>{this.isCategoryDeleted.emit()})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(u.q),l.Rb(b.a),l.Rb(d.f),l.Rb(w.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["category-table-row"],["","category-table-row",""]],inputs:{isDesktop:"isDesktop",expandAll:"expandAll",category:"category"},outputs:{isCategoryDeleted:"isCategoryDeleted",archived:"archived"},decls:13,vars:11,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","templates","isExpanded"],["responsive",""],["name",""],["unit",""],["controls",""],["editExpenseCategory",""],["deletePolicy",""],[1,"cl-border-0","cl-tl-left","cl-pl-0"],["lass","cl-tl-left cl-border-0 "],[1,"cl-d-flex","cl-align-items-center"],["data-toggle","tooltip","data-placement","bottom",1,"cl-cut-text",3,"title"],[1,"cl-component-divided-left"],["class","cl-cut-text",4,"ngIf","ngIfElse"],["noUnitPrice",""],[1,"cl-cut-text"],["dropdown","",1,"cl-dropdown","cl-d-flex","cl-justify-content-end","cl-hover-pointer"],["role","button","closeDropdown","",1,"cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["closeDropdown","","src","../../../../../../../assets/images/ui-icons/menu-dots-vertical.svg"],["class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right"],[1,"cl-scroll-area"],["class","cl-dropdown-item","closeDropdown","",3,"click",4,"ngIf"],["closeDropdown","",1,"cl-dropdown-item",3,"click"],[3,"type","category","edit","closeEmit"],[3,"title","confirmationText","onClose","onDelete"]],template:function(e,t){if(1&e&&(l.Xc(0,j,1,0,"ng-container",0),l.Sb(1,"responsive-row",1,2),l.Xc(3,M,5,4,"ng-template",null,3,l.Yc),l.Xc(5,W,5,2,"ng-template",null,4,l.Yc),l.Xc(7,H,4,0,"ng-template",null,5,l.Yc),l.Xc(9,Y,1,2,"ng-template",null,6,l.Yc),l.Xc(11,z,5,10,"ng-template",null,7,l.Yc)),2&e){const e=l.Lc(2),i=l.Lc(4),n=l.Lc(6),s=l.Lc(8);l.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",l.Bc(5,Z,t.labels)),l.Cb(1),l.wc("isDesktop",t.isDesktop)("templates",l.Dc(7,K,i,n,s))("isExpanded",t.expandAll)}},directives:[n.B,S.a,n.u,y.a,O.a,R,L.a],pipes:[x.a,P.a,d.e],encapsulation:2}),e})();function J(e,t){if(1&e){const e=l.Yb();l.Vb(0),l.Xb(1,"tr",8),l.jc("isCategoryDeleted",(function(){return l.Oc(e),l.nc().fetchCategories()})),l.Wb(),l.Ub()}if(2&e){const e=t.$implicit,i=l.nc();l.Cb(1),l.wc("isDesktop",i.isDesktop)("category",e)("expandAll",i.expandAll)}}let Q=(()=>{class e{constructor(e,t,i){this.browserService=e,this.cd=t,this.categoriesService=i,this._ngUnsubscribe$=new f.a,this.categories=[],this.requestQuery={page:1,pageSize:50,archived:!1}}set status(e){delete this.requestQuery.archived,e==c.a.ARCHIVED&&(this.requestQuery.archived=!0),e==c.a.ACTIVE&&(this.requestQuery.archived=!1),this.fetchCategories()}ngOnInit(){this.browserService.isBreakpointLgCustom$.pipe(Object(m.a)(this._ngUnsubscribe$)).subscribe(e=>{this.isDesktop=e,this.cd.detectChanges()}),this.fetchCategories(),this.categoriesService.newCategory.pipe(Object(m.a)(this._ngUnsubscribe$)).subscribe(e=>{this.categories.unshift(e),this.cd.detectChanges()}),this.categoriesService.deletedCategory.pipe(Object(m.a)(this._ngUnsubscribe$)).subscribe(e=>{this.categories=this.categories.filter(t=>t.id!==e.id),this.cd.detectChanges()})}expandAllRows(e){this.expandAll=e,this.cd.detectChanges()}fetchCategories(){this.categoriesService.getExpenseCategories(this.requestQuery).subscribe(({count:e,categories:t})=>{this.categories=t,this.categoriesCount=e,this.cd.detectChanges()})}pageChanged(e){this.requestQuery.page=e.page,this.fetchCategories()}limitChanged(e){this.requestQuery.pageSize=e.limit,this.requestQuery.page=1,this.fetchCategories()}ngOnDestroy(){this._ngUnsubscribe$.next(!0),this._ngUnsubscribe$.complete()}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(p.a),l.Rb(l.h),l.Rb(b.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["expenses-category-table"]],inputs:{status:"status"},decls:12,vars:9,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0"],[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0"],[1,"cl-h6","cl-mb-0"],[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6","cl-pto-request-table"],["category-table-header","",3,"isDesktop","onExpandAll"],[4,"ngFor","ngForOf"],[1,"cl-mt-2","cl-mt-lg-3","cl-d-flex","cl-justify-content-left"],[3,"visible","page","limit","total","pageChanged","limitChanged"],["category-table-row","",3,"isDesktop","category","expandAll","isCategoryDeleted"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"span",2),l.Zc(3),l.oc(4,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Xb(5,"table",3),l.Xb(6,"thead"),l.Xb(7,"tr",4),l.jc("onExpandAll",(function(e){return t.expandAllRows(e)})),l.Wb(),l.Wb(),l.Xb(8,"tbody"),l.Xc(9,J,2,3,"ng-container",5),l.Wb(),l.Wb(),l.Xb(10,"div",6),l.Xb(11,"pager",7),l.jc("pageChanged",(function(e){return t.pageChanged(e)}))("limitChanged",(function(e){return t.limitChanged(e)})),l.Wb(),l.Wb()),2&e&&(l.Cb(3),l.ad(l.pc(4,7,"EXPENSES.CATEGORIES.TABLE.TITLE")),l.Cb(4),l.wc("isDesktop",t.isDesktop),l.Cb(2),l.wc("ngForOf",t.categories),l.Cb(2),l.wc("visible",t.categoriesCount>50)("page",t.requestQuery.page)("limit",t.requestQuery.pageSize)("total",t.categoriesCount))},directives:[C,n.t,E.a,q],pipes:[d.e],encapsulation:2}),e})();function ee(e,t){if(1&e){const e=l.Yb();l.Xb(0,"create-expense-category",15),l.jc("create",(function(i){l.Oc(e);const n=t.$implicit;return l.nc().onCreate(i),n.close()}))("closeEmit",(function(){return t.$implicit.close()})),l.Wb()}if(2&e){const e=l.nc();l.wc("type",e.modalType)}}const te=function(){return["/expenses"]};let ie=(()=>{class e{constructor(e,t,i,n){this.modalService=e,this.authService=t,this.router=i,this.translate=n,this.statusDropdownValues=[new o.a(c.a.ACTIVE,this.translate.instant("TEAMS.MEMBERS.STATUS_LABELS.ACTIVE_LABEL")),new o.a(c.a.ARCHIVED,this.translate.instant("GLOBAL.SHOW_ARCHIVED_LABEL")),new o.a(c.a.ALL,this.translate.instant("GLOBAL.SHOW_ALL_LABEL"))],this.entityStatus=this.statusDropdownValues[0].value}filterEntity(e){this.entityStatus=e}openModal(e){this.modalService.open(e,{centered:!0})}onCreate(e){}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(u.q),l.Rb(a.a),l.Rb(r.d),l.Rb(d.f))},e.\u0275cmp=l.Lb({type:e,selectors:[["expenses-category"]],decls:24,vars:14,consts:[[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[3,"routerLink"],[1,"cl-text-capitalize"],[1,"cl-col","cl-d-print-none"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-end"],[1,"cl-btn","cl-btn-primary",3,"click"],[1,"cl-pb-2","cl-pb-lg-3"],[1,"cl-d-flex","cl-col-lg-custom-9","cl-mb-2","cl-mb-lg-custom-0"],[1,"cl-d-inline-block",3,"list","value","onChanged"],[3,"status"],["createExpenseCategory",""],[3,"type","create","closeEmit"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"main",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"h3"),l.Xb(6,"a",5),l.Zc(7),l.oc(8,"translate"),l.Wb(),l.Wb(),l.Xb(9,"h1",6),l.Zc(10),l.oc(11,"translate"),l.Wb(),l.Wb(),l.Xb(12,"div",7),l.Xb(13,"div",8),l.Xb(14,"a",9),l.jc("click",(function(){l.Oc(e);const i=l.Lc(23);return t.modalType="create",t.openModal(i)})),l.Zc(15),l.oc(16,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(17,"div",10),l.Xb(18,"div",3),l.Xb(19,"div",11),l.Xb(20,"dropdown-items",12),l.jc("onChanged",(function(e){return t.filterEntity(e)})),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Sb(21,"expenses-category-table",13),l.Wb(),l.Xc(22,ee,1,1,"ng-template",null,14,l.Yc),l.Wb()}2&e&&(l.Cb(6),l.wc("routerLink",l.Ac(13,te)),l.Cb(1),l.ad(l.pc(8,7,"EXPENSES.TITLE")),l.Cb(3),l.ad(l.pc(11,9,"EXPENSES.CATEGORIES.TITLE")),l.Cb(5),l.bd(" ",l.pc(16,11,"EXPENSES.CATEGORIES.CREATE.TITLE")," "),l.Cb(5),l.wc("list",t.statusDropdownValues)("value",t.entityStatus),l.Cb(1),l.wc("status",t.entityStatus))},directives:[r.g,h.a,Q,R],pipes:[d.e],encapsulation:2}),e})();var ne=i("hN73"),se=i("B0km"),re=i("yvyG"),oe=i("i/9y");const ae=[{path:"",component:ne.a,canActivate:[re.a],data:{feature:oe.a.EXPENSES}},{path:"categories",component:ie,canActivate:[se.a]}];let ce=(()=>{class e{}return e.components=[ne.a,ie],e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[r.h.forChild(ae)],r.h]}),e})();var le=i("EONh"),ue=i("jJjg"),de=i("vwXn"),he=i("9Trn"),pe=i("Fn+O"),be=i("1ROj"),fe=i("liYL"),me=i("IS9F"),ge=i("GwYf"),ve=i("QAEb"),Ce=i("ggBK"),Ee=(i("T9nA"),i("AYje")),we=i("FfKB"),Se=i("2rWG"),ye=i("sbmM"),Oe=i("qUN8"),Ae=i("6GAr"),ke=i("9Eqt"),Te=i("eBys");function De(e,t){if(1&e&&(l.Xb(0,"span"),l.Zc(1),l.Wb()),2&e){const e=l.nc();l.Cb(1),l.ad(e.weeklyTotal.dateRange.label)}}function Ie(e,t){if(1&e&&(l.Xb(0,"span"),l.Zc(1),l.oc(2,"momentUtcFormat"),l.Wb(),l.Xb(3,"span",8),l.Zc(4,"-"),l.Wb(),l.Xb(5,"span"),l.Zc(6),l.oc(7,"momentUtcFormat"),l.Wb()),2&e){const e=l.nc();l.Cb(1),l.ad(l.qc(2,2,e.weeklyTotal.dateRange.start,"MMM D")),l.Cb(5),l.ad(l.qc(7,5,e.weeklyTotal.dateRange.end,"MMM D"))}}function _e(e,t){if(1&e&&(l.Xb(0,"div",41),l.Xb(1,"span"),l.Zc(2),l.Wb(),l.Xb(3,"span",42),l.Zc(4),l.Wb(),l.Wb()),2&e){const e=l.nc().$implicit;l.wc("title",null==e.project?null:e.project.name),l.Cb(1),l.Wc("color",null==e.project?null:e.project.color),l.Cb(1),l.bd(" ",null==e.project?null:e.project.name," "),l.Cb(2),l.bd(" ",null!=e.project&&e.project.clientName?" - "+e.project.clientName:""," ")}}function Re(e,t){1&e&&(l.Xb(0,"div",43),l.Xb(1,"span"),l.Zc(2),l.oc(3,"translate"),l.Wb(),l.Wb()),2&e&&(l.Cb(2),l.bd(" (",l.pc(3,1,"GLOBAL.NO_PROJECT_LABEL"),") "))}function Le(e,t){if(1&e&&(l.Xb(0,"div",46),l.Zc(1),l.oc(2,"roundIfWholeNumber"),l.Wb()),2&e){const e=l.nc(2).$implicit;l.Cb(1),l.cd(" ",l.pc(2,2,e.quantity)," ",null==e.category?null:e.category.unit," ")}}function xe(e,t){if(1&e&&(l.Xb(0,"div",44),l.Xb(1,"div",32),l.Zc(2),l.Wb(),l.Xc(3,Le,3,4,"div",45),l.Wb()),2&e){const e=l.nc().$implicit;l.wc("title",null==e.category?null:e.category.name),l.Cb(2),l.ad(null==e.category?null:e.category.name),l.Cb(1),l.wc("ngIf",e.category.hasUnitPrice)}}function Pe(e,t){1&e&&(l.Xb(0,"div",47),l.Xb(1,"div",32),l.Zc(2),l.oc(3,"translate"),l.Wb(),l.Wb()),2&e&&(l.Cb(2),l.bd("(",l.pc(3,1,"EXPENSES.TABLE.NO_CATEGORY"),")"))}function je(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",48),l.Xb(1,"div",49,50),l.jc("click",(function(){l.Oc(e);const t=l.Lc(2),i=l.nc().$implicit;return l.nc(2).downloadReceipt(i),t.blur()}))("keyup.space",(function(){l.Oc(e);const t=l.nc().$implicit;return l.nc(2).downloadReceipt(t)}))("keyup.enter",(function(){l.Oc(e);const t=l.nc().$implicit;return l.nc(2).downloadReceipt(t)})),l.Xb(3,"span",51),l.Sb(4,"img",52),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.nc().$implicit;l.Cb(1),l.Db("title",e.fileName)}}function Me(e,t){1&e&&l.Sb(0,"img",58)}function Xe(e,t){1&e&&(l.Sb(0,"img",59),l.oc(1,"translate")),2&e&&l.xc("title",l.pc(1,1,"GLOBAL.ENTRIES_LOCKED_ERROR_MESSAGE"))}function Fe(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",60),l.Xb(1,"list-items"),l.Xb(2,"a",61),l.jc("keyup.enter",(function(){l.Oc(e);const t=l.nc(2).$implicit;return l.nc(2).edit(t)}))("keyup.space",(function(){l.Oc(e);const t=l.nc(2).$implicit;return l.nc(2).edit(t)}))("click",(function(){l.Oc(e);const t=l.nc(2).$implicit;return l.nc(2).edit(t)})),l.Zc(3),l.oc(4,"translate"),l.Wb(),l.Xb(5,"a",62),l.jc("keyup.enter",(function(){l.Oc(e);const t=l.nc(2).$implicit,i=l.Lc(32);return l.nc(2).openDeleteModal(i,t)}))("keyup.space",(function(){l.Oc(e);const t=l.nc(2).$implicit,i=l.Lc(32);return l.nc(2).openDeleteModal(i,t)}))("click",(function(){l.Oc(e);const t=l.nc(2).$implicit,i=l.Lc(32);return l.nc(2).openDeleteModal(i,t)})),l.Zc(6),l.oc(7,"translate"),l.Wb(),l.Wb(),l.Wb()}2&e&&(l.Cb(3),l.bd(" ",l.pc(4,2,"GLOBAL.EDIT_LABEL")," "),l.Cb(3),l.bd(" ",l.pc(7,4,"GLOBAL.DELETE_BTN")," "))}function We(e,t){if(1&e&&(l.Xb(0,"div",53),l.Xb(1,"div",54),l.Xc(2,Me,1,0,"img",55),l.Xc(3,Xe,2,3,"ng-template",null,56,l.Yc),l.Wb(),l.Xc(5,Fe,8,6,"div",57),l.Wb()),2&e){const e=l.Lc(4),t=l.nc().$implicit,i=l.nc(2);l.wc("dropdownKey",t.locked&&!i.isAdminOrOwner),l.Cb(1),l.Hb("pointer",!t.locked||i.isAdminOrOwner),l.Cb(1),l.wc("ngIf",!t.locked||i.isAdminOrOwner)("ngIfElse",e)}}function Be(e,t){if(1&e){const e=l.Yb();l.Xb(0,"delete-confirm-modal",63),l.jc("onClose",(function(){return t.$implicit.close()}))("onDelete",(function(){l.Oc(e);const i=t.$implicit;return l.nc(3).delete(),i.close()})),l.oc(1,"translate"),l.oc(2,"translate"),l.Xb(3,"p",64),l.Zc(4),l.oc(5,"translate"),l.Wb(),l.Wb()}2&e&&(l.wc("title",l.pc(1,4,"GLOBAL.DELETE_BTN"))("btnText",l.pc(2,6,"GLOBAL.DELETE_BTN"))("showConfirmation",!1),l.Cb(4),l.bd(" ",l.pc(5,8,"EXPENSES.DELETE.MODAL_MESSAGE")," "))}function Ne(e,t){if(1&e&&(l.Xb(0,"div",16),l.Xb(1,"div",17),l.Xb(2,"div",18),l.Xb(3,"span",19),l.Xb(4,"div",20),l.Xc(5,_e,5,5,"div",21),l.Xc(6,Re,4,3,"ng-template",null,22,l.Yc),l.Wb(),l.Wb(),l.Wb(),l.Xb(8,"div",23),l.Xb(9,"div",24),l.Xb(10,"div",25),l.Xc(11,xe,4,3,"div",26),l.Xc(12,Pe,4,3,"ng-template",null,27,l.Yc),l.Wb(),l.Sb(14,"span",28),l.Wb(),l.Wb(),l.Xb(15,"div",29),l.Xb(16,"span",30),l.Xb(17,"div",31),l.Xb(18,"div",32),l.Xb(19,"span"),l.Zc(20),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(21,"div",33),l.Xb(22,"div",34),l.Xc(23,je,5,1,"div",35),l.Sb(24,"billable-icon",36),l.Xb(25,"div",37),l.Xb(26,"span",38),l.Zc(27),l.oc(28,"roundIfWholeNumber"),l.oc(29,"centsToDollars"),l.Wb(),l.Wb(),l.Xc(30,We,6,5,"div",39),l.Wb(),l.Wb(),l.Wb(),l.Xc(31,Be,6,10,"ng-template",null,40,l.Yc),l.Wb()),2&e){const e=t.$implicit,i=l.Lc(7),n=l.Lc(13),s=l.nc(2);l.Cb(5),l.wc("ngIf",e.project&&e.project.id)("ngIfElse",i),l.Cb(6),l.wc("ngIf",e.category&&e.category.id)("ngIfElse",n),l.Cb(5),l.wc("title",e.notes),l.Cb(4),l.ad(e.notes?e.notes:"-"),l.Cb(3),l.wc("ngIf",e.fileId),l.Cb(1),l.wc("disableEdit",!0)("billable",e.billable),l.Cb(3),l.cd(" ",l.pc(28,12,l.pc(29,14,e.total))," ",s.workspace.hourlyRate.currency," "),l.Cb(3),l.wc("ngIf",s.canEdit)}}function Ge(e,t){if(1&e&&(l.Xb(0,"div",9),l.Xb(1,"div",10),l.Xb(2,"div",11),l.Xb(3,"span"),l.Zc(4),l.oc(5,"dateFormat"),l.Wb(),l.Wb(),l.Xb(6,"div",12),l.Xb(7,"div",13),l.Zc(8),l.oc(9,"translate"),l.Wb(),l.Xb(10,"div",14),l.Zc(11),l.oc(12,"roundIfWholeNumber"),l.oc(13,"centsToDollars"),l.Wb(),l.Wb(),l.Wb(),l.Xc(14,Ne,33,16,"div",15),l.Wb()),2&e){const e=t.$implicit,i=l.nc();l.Cb(4),l.ad(l.qc(5,5,e.date,null)),l.Cb(4),l.ad(l.pc(9,8,"GLOBAL.TOTAL_TIME")),l.Cb(3),l.cd(" ",l.pc(12,10,l.pc(13,12,e.total))," ",i.workspace.hourlyRate.currency,""),l.Cb(3),l.wc("ngForOf",e.expenses)}}let Ue=(()=>{class e{constructor(e,t,i){this.workspaceService=e,this.expenseService=t,this.modal=i,this.deleteExpense=new l.n,this.editExpense=new l.n}ngOnInit(){this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.format=this.workspace.getTimeFormat()}edit(e){this.editExpense.emit(e)}openDeleteModal(e,t){this.expenseToDelete=t,this.modal.open(e,{centered:!0})}delete(){this.deleteExpense.emit(this.expenseToDelete)}downloadReceipt(e){this.expenseService.downloadReceipt(e.id,e.fileId,this.getFileType(e.fileName),e.fileName).subscribe()}getFileType(e){const t=e.split(".")[e.split(".").length-1];return ne.b.filter(e=>e.split("/")[1]===t)[0]}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(w.a),l.Rb(Ee.a),l.Rb(u.q))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-weekly-expenses"]],inputs:{weeklyTotal:"weeklyTotal",isAdminOrOwner:"isAdminOrOwner",minWidth:"minWidth",canEdit:"canEdit"},outputs:{deleteExpense:"deleteExpense",editExpense:"editExpense"},decls:14,vars:12,consts:[[1,"cl-d-flex","cl-w-100","cl-justify-content-between","cl-m-auto","cl-py-2"],[1,"cl-d-flex","cl-flex-row","cl-mr-3"],[4,"ngIf","ngIfElse"],["fromToDateTemplate",""],[1,"cl-d-flex","cl-align-items-center","cl-mt-lg-0"],[1,"cl-h6","cl-mb-0","cl-lh-1"],["data-cy","week-total",1,"cl-h4","cl-mb-0","cl-ml-2","cl-lh-1","cl-color-black","cl-font-weight-bolder"],["class","cl-card",4,"ngFor","ngForOf"],[1,"cl-d-inline-flex","cl-mx-1"],[1,"cl-card"],[1,"cl-card-header","cl-px-2","cl-px-lg-3"],["data-cy","day-label",1,"cl-h6","cl-mb-0","cl-pl-2","cl-pl-lg-0","cl-d-flex","cl-align-items-center"],[1,"cl-d-flex","cl-align-items-center"],[1,"cl-h6","cl-lh-1","cl-align-self-end","cl-entry-total-label","cl-mb-0"],[1,"cl-h4","cl-mb-0","cl-ml-2","cl-lh-1","cl-color-black","cl-font-weight-bolder"],["class","cl-hover-shadow cl-border-bottom",4,"ngFor","ngForOf"],[1,"cl-hover-shadow","cl-border-bottom"],["tabrow","",1,"cl-flex-container","cl-expense-entry"],[1,"cl-col-responsive","cl-name-col","cl-pl-2","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center","cl-mr-2"],[1,"cl-w-100"],["class","cl-cut-text","data-toggle","tooltip","data-placement","bottom","title","",3,"title",4,"ngIf","ngIfElse"],["noProject",""],[1,"cl-col-responsive","cl-expense-col"],["tabcell","",1,"cl-component-divided-left","cl-dropdown","cl-dropdown-large","cl-d-flex","cl-w-100","cl-pl-2","cl-px-lg-3","cl-justify-content-start"],[1,"cl-cut-text","cl-w-100-hidden"],["class","cl-d-flex cl-flex-column cl-cut-text",3,"title",4,"ngIf","ngIfElse"],["noCategory",""],["tabfocus","","tabindex","0"],[1,"cl-component-divided-left","cl-col-responsive","cl-note-col","cl-justify-content-start","cl-cut-text-wrapper","cl-pl-2","cl-pr-0"],[1,"cl-d-flex","cl-align-items-center","cl-mr-2","cl-cut-text",3,"title"],[1,"cl-w-100","cl-cut-text"],[1,"cl-cut-text"],[1,"cl-col-fixed"],[1,"cl-expense-list-actions","cl-d-flex","cl-w-100"],["class","cl-component-divided-left cl-remove-divider-mob",4,"ngIf"],[1,"cl-component-divided-left",3,"disableEdit","billable"],[1,"cl-component-divided-left","cl-d-md-inline-flex","cl-input-time-wrapper","cl-expense-amount","cl-m-abs","cl-align-items-center","cl-pr-2","cl-pr-lg-0","cl-mr-0","cl-mr-lg-3"],[1,"cl-w-100","cl-d-flex","cl-justify-content-end","cl-font-weight-bolder"],["class","cl-dropdown cl-tree-dots cl-d-flex",3,"dropdownKey",4,"ngIf"],["deleteModal",""],["data-toggle","tooltip","data-placement","bottom","title","",1,"cl-cut-text",3,"title"],[1,"cl-listing-client"],["data-toggle","tooltip","data-placement","bottom","title","",1,"cl-cut-text"],[1,"cl-d-flex","cl-flex-column","cl-cut-text",3,"title"],["class","cl-cut-text cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-cut-text","cl-h6","cl-mb-0"],[1,"cl-d-flex","cl-flex-column","cl-cut-text"],[1,"cl-component-divided-left","cl-remove-divider-mob"],["tabindex","0",1,"pointer","cl-non-selectable",3,"click","keyup.space","keyup.enter"],["icon",""],["data-cy","attach-icon",1,"currency"],["src","assets/ui-icons/attach.svg"],[1,"cl-dropdown","cl-tree-dots","cl-d-flex",3,"dropdownKey"],["dropdownKeyButton","","tabindex","0",1,"cl-non-selectable","cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg",4,"ngIf","ngIfElse"],["locked",""],["openUpAtBottom","","class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownKeyContent"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["src","assets/images/ui-icons/locked.svg",3,"title"],["openUpAtBottom","",1,"cl-dropdown-menu","cl-dropdown-menu-right"],["clickCloseDropdown","","tabindex","-1","data-cy","edit-expense",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],["tabindex","-1","clickCloseDropdown","","data-cy","delete-expense",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],[3,"title","btnText","showConfirmation","onClose","onDelete"],[1,"cl-text-muted","cl-mb-0"]],template:function(e,t){if(1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xc(2,De,2,1,"span",2),l.Xc(3,Ie,8,8,"ng-template",null,3,l.Yc),l.Wb(),l.Xb(5,"div",4),l.Xb(6,"div",5),l.Zc(7),l.oc(8,"translate"),l.Wb(),l.Xb(9,"div",6),l.Zc(10),l.oc(11,"roundIfWholeNumber"),l.oc(12,"centsToDollars"),l.Wb(),l.Wb(),l.Wb(),l.Xc(13,Ge,15,14,"div",7)),2&e){const e=l.Lc(4);l.Cb(2),l.wc("ngIf",t.weeklyTotal.dateRange.label)("ngIfElse",e),l.Cb(5),l.bd("",l.pc(8,6,"EXPENSES.TABLE.WEEK.TOTAL_AMOUNT"),":"),l.Cb(3),l.cd(" ",l.pc(11,8,l.pc(12,10,t.weeklyTotal.total))," ",t.workspace.hourlyRate.currency," "),l.Cb(3),l.wc("ngForOf",t.weeklyTotal.dailyTotals)}},directives:[n.u,n.t,we.a,Se.a,ye.a,Oe.a,Ae.a,L.a],pipes:[d.e,x.a,P.a,ke.a,Te.a],encapsulation:2}),e})();var Ve=i("LM6y"),He=i("txdI"),Ye=i("iTUp"),$e=i("qvXw"),ze=i("FpXt"),Ze=i("v95T"),Ke=i("CMn/"),qe=i("TmxI"),Je=i("9Gc3"),Qe=i("oTlO"),et=i("Fruv"),tt=i("GAki"),it=i("pCWH"),nt=i("6gGB"),st=i("KAau"),rt=i("bM1u"),ot=i("znhS"),at=i("a+PT"),ct=i("r21O"),lt=i("psuR"),ut=i("HNWp"),dt=i("BhhM"),ht=i("okBH"),pt=i("ps2d"),bt=i("xShd"),ft=i("nqu1"),mt=i("n0VX"),gt=i("Fnfa"),vt=i("4jLH"),Ct=i("6yyQ"),Et=i("eLiO"),wt=i("tF8r"),St=i("liXT"),yt=i("xJiw"),Ot=i("0b3Z"),At=i("4500"),kt=i("DCUz"),Tt=i("9G2T"),Dt=i("N2Ql"),It=i("soCN"),_t=i("bzkB"),Rt=i("l4Lo"),Lt=i("GsAO"),xt=i("XuQk"),Pt=i("MXpx"),jt=i("yUBi"),Mt=i("87RK"),Xt=i("Kdc/"),Ft=i("614J");let Wt=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,ce,he.a,le.a,de.a,ue.a,s.C,pe.a,be.a,fe.a,ge.a,ve.a,Ce.a,Ve.a,He.a,Ye.a,$e.a,ze.a,Ze.a,u.O,Ke.a]]}),e})();l.Rc(ne.a,[n.r,n.s,n.t,n.u,n.B,n.x,n.y,n.z,n.A,n.v,n.w,r.i,r.e,r.g,r.f,r.k,y.a,O.a,ye.a,qe.a,Oe.a,Se.a,Je.a,h.a,S.a,E.a,s.I,s.x,s.H,s.c,s.y,s.B,s.a,s.E,s.F,s.A,s.s,s.t,s.D,s.o,s.n,s.z,s.b,s.d,s.h,s.k,s.i,s.l,s.e,Qe.a,we.a,L.a,et.a,tt.a,it.a,nt.a,Ae.a,d.b,st.a,u.M,rt.a,ne.a,ie,Q,C,q,R,me.a,Ue],[n.b,n.I,n.q,n.l,n.F,n.g,n.D,n.G,n.d,n.f,n.j,n.k,n.m,Te.a,ot.a,at.a,ct.a,lt.a,ke.a,ut.a,P.a,dt.a,ht.a,pt.a,bt.a,ft.a,mt.a,gt.a,vt.a,Ct.a,Et.a,wt.a,St.a,x.a,yt.a,Ot.a,At.a,kt.a,Tt.a,Dt.a,It.a,_t.a,Rt.a,Lt.a,xt.a,Pt.a,jt.a,Mt.a,Xt.a,Ft.a,d.e])},"a+PT":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("wd/R"),s=i("qfBg"),r=i("B4wx"),o=i("fXoL");let a=(()=>{class e{constructor(e){this.timeZone=e.getTimeZone(),this.formatIs12Hour=e.getTimeFormatForUser()===r.a.HOUR12}transform(e,t=this.timeZone){const i=n.tz(e,t);return this.formatIs12Hour?n(i).format("h:mmA").toString():n(i,["h:mmA"]).format("HH:mm").toString()}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(s.a))},e.\u0275pipe=o.Qb({name:"hourFormat",type:e,pure:!0}),e})()},aDua:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("fXoL"),s=i("lvCY"),r=i("ofXK"),o=i("2rWG"),a=i("sbmM"),c=i("qUN8"),l=i("sYmb");const u=function(e){return{count:e}};function d(e,t){if(1&e&&(n.Xb(0,"span"),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.ad(n.qc(2,1,"SUBSCRIPTION_TABS.USER_SEATS.SEATS_OF_COUNT_LABEL",n.Bc(4,u,e.total)))}}function h(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.Xc(2,d,3,6,"span",0),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.cd(" ",e.from,"-",e.to," "),n.Cb(1),n.wc("ngIf",e.total)}}function p(e,t){if(1&e&&(n.Xb(0,"span",11),n.Zc(1),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.ad(e.page)}}function b(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"span",18),n.jc("click",(function(){n.Oc(e);const i=t.$implicit;return n.nc(4).setLimit(i)})),n.Zc(2),n.Wb(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(2),n.ad(e)}}function f(e,t){if(1&e&&(n.Xb(0,"div",16),n.Xc(1,b,3,1,"ng-container",17),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.wc("ngForOf",e.pageSizes)}}function m(e,t){if(1&e&&(n.Xb(0,"li"),n.Xb(1,"span",12),n.Xb(2,"button",13),n.Zc(3),n.Wb(),n.Xc(4,f,2,1,"div",14),n.Wb(),n.Xb(5,"span",15),n.Zc(6),n.oc(7,"translate"),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(3),n.ad(e.limit),n.Cb(3),n.ad(n.pc(7,2,"GLOBAL.ITEMS_PER_PAGE"))}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"nav"),n.Xb(1,"ul",1),n.Xb(2,"li",2),n.Xb(3,"button",3,4),n.jc("click",(function(){n.Oc(e);const t=n.Lc(4),i=n.nc();return t.blur(),i.prevPage()})),n.Sb(5,"img",5),n.Wb(),n.Wb(),n.Xb(6,"li",6),n.Xc(7,h,3,3,"ng-container",7),n.Xc(8,p,2,1,"ng-template",null,8,n.Yc),n.Wb(),n.Xb(10,"li",2),n.Xb(11,"button",3,9),n.jc("click",(function(){n.Oc(e);const t=n.Lc(12),i=n.nc();return t.blur(),i.nextPage()})),n.Sb(13,"img",10),n.Wb(),n.Wb(),n.Xc(14,m,8,4,"li",0),n.Wb(),n.Wb()}if(2&e){const e=n.Lc(9),t=n.nc();n.Cb(3),n.wc("disabled",t.page<=1),n.Cb(4),n.wc("ngIf",!t.modifiedNumber)("ngIfElse",e),n.Cb(4),n.wc("disabled",!(t.page*t.limit<t.total||t.enableNextPage)),n.Cb(3),n.wc("ngIf",t.itemsPerPage)}}const v=[50,100,200];let C=(()=>{class e{constructor(e){this.cd=e,this._page=1,this._limit=s.j,this.visible=!0,this.itemsPerPage=!0,this._pageSizes=[...v],this.pageChanged=new n.n,this.limitChanged=new n.n}set page(e){this._page=e,this.setPagination()}get page(){return this._page}set limit(e){this._limit=e,this.setPagination()}get limit(){return this._limit}set total(e){this._total=e,this.setPagination()}get total(){return this._total}set pageSizes(e){e&&(this._pageSizes=[...e])}get pageSizes(){return this._pageSizes}ngOnInit(){this.setPagination()}setPaginationManually(e){this.page=e.page||this.page,this.limit=e.limit||this.limit,this.total=e.total||this.total,this.setPagination()}setPagination(){this.from=(this.page-1)*this.limit+1,this.to=this.page*this.limit,this.from<1&&(this.from=1),this.to>this.total&&(this.to=this.total),this.modifiedNumber=null,this.enableNextPage=!1}setNumberOfEntriesOnPage(e){this.modifiedNumber=e,this.cd.detectChanges()}allowNextPage(e=!0){this.enableNextPage=e,this.cd.detectChanges()}setLimit(e){e===this.limit||(this.page=1,this.limit=e,this.setPagination(),this.limitChanged.emit({limit:this.limit,page:this.page}))}nextPage(){this.page++,this.pageChanged.emit({page:this.page})}prevPage(){this.page--,this.pageChanged.emit({page:this.page})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["pager"]],inputs:{page:"page",limit:"limit",visible:"visible",itemsPerPage:"itemsPerPage",total:"total",pageSizes:"pageSizes"},outputs:{pageChanged:"pageChanged",limitChanged:"limitChanged"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"cl-pagination","cl-justify-content-start"],[1,"cl-page-item","cl-non-selectable"],["tabindex","-1",1,"cl-page-link",3,"disabled","click"],["prev",""],["src","assets/images/ui-icons/chevron-left.svg"],[1,"cl-page-item","cl-pagination-pages"],[4,"ngIf","ngIfElse"],["pageOnly",""],["next",""],["src","assets/images/ui-icons/chevron-right.svg"],[1,"cl-page-only"],["dropdownKey","",1,"cl-dropdown","cl-ml-3"],["dropdownKeyButton","","type","button",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle"],["class","cl-dropdown-menu","style","display: block;","openUpAtBottom","",4,"dropdownKeyContent"],[1,"cl-ml-2","cl-h6","cl-items-per-page"],["openUpAtBottom","",1,"cl-dropdown-menu",2,"display","block"],[4,"ngFor","ngForOf"],["clickCloseDropdown","",1,"cl-dropdown-item",3,"click"]],template:function(e,t){1&e&&n.Xc(0,g,15,5,"nav",0),2&e&&n.wc("ngIf",t.visible)},directives:[r.u,o.a,a.a,c.a,r.t],pipes:[l.e],styles:[".cl-page-only[_ngcontent-%COMP%]{display:inline-block;min-width:20px;box-sizing:border-box;text-align:center}"],changeDetection:0}),e})()},aLCL:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i("XNiG"),s=i("O3o7"),r=i("lvCY"),o=i("tk/3"),a=i("lGQG"),c=i("1Tmk"),l=i("OG4e"),u=i("Ymxs"),d=i("lJxs"),h=i("vkgz"),p=i("LfE4"),b=i("jpmO"),f=i("rsZi"),m=i("nLyk"),g=i("wd/R"),v=i("ZVmW"),C=i("Cpkn"),E=i("Lcbf"),w=i("tnjF"),S=i("fXoL"),y=i("sYmb");let O=(()=>{class e{constructor(e,t,i,s,o,a){this.http=e,this.authService=t,this.workspaceService=i,this.centUSDConverter=s,this.toaster=o,this.translateService=a,this.error=new n.a,this.projects=new n.a,this.projectPermissions=new n.a,this.pagination={page:1,limit:r.j}}getProjects(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=!0;e.hasOwnProperty("hydrated")&&(i=e.hydrated);const n=(new o.h).append("name",e.name||"").append("archived",e.archived!==p.a.ALL?(e.archived===p.a.ARCHIVED).toString():"").append("billable",e.billable===b.a.BOTH||e.billable===b.a.NONE?"":(e.billable===b.a.BILLABLE).toString()).append("clients",e.clients||[]).append("client-status",e.clientStatus?"INACTIVE"===e.clientStatus?"ARCHIVED":e.clientStatus:"ALL").append("contains-client",(!!e.containsClient).toString()).append("users",e.users||[]).append("user-status",e.userStatus?e.userStatus:"ALL").append("contains-user",(!!e.containsUser).toString()).append("sort-column",e.sortColumn||m.a.NAME).append("sort-order",e.sortOrder||f.a.ASCENDING).append("hydrated",i.toString()).append("page",e.page||1).append("page-size",e.limit||r.j);return this.http.get(`/workspaces/${t}/projects/list`,{params:n}).pipe(Object(d.a)(e=>e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}getProjectTemplates(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new o.h).append("is-template","true").append("hydrated","true").append("name",e.name||"").append("page",e.page||"1").append("page-size",e.limit||r.j);return this.http.get(`/v1/workspaces/${t}/projects/`,{params:i}).pipe(Object(d.a)(e=>e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUsdIncludingMemberships(e)))))}getProject(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new o.h).append("hydrated","true");return this.http.get(`/workspaces/${t}/projects/${e}`,{params:i}).pipe(Object(h.a)(e=>(e.tasks=e.tasks.map(e=>new w.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}getProjectsCount(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new o.h).append("name",e?e.name:"").append("archived",e&&e.archived!==p.a.ALL?(e.archived===p.a.ARCHIVED).toString():"").append("billable",e.billable===b.a.BOTH||e.billable===b.a.NONE?"":(e.billable===b.a.BILLABLE).toString()).append("clients",e?e.clients:[]).append("client-status",e.clientStatus?"INACTIVE"===e.clientStatus?"ARCHIVED":e.clientStatus:"ALL").append("contains-client",!e||e.containsClient).append("users",e?e.users:[]).append("user-status",e.userStatus?e.userStatus:"ALL").append("contains-user",!e||e.containsUser);return this.http.get(`/workspaces/${t}/projects/count`,{params:i}).pipe(Object(h.a)(e=>e))}getProjectStatus(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/projects/${e}/tracked`).pipe(Object(h.a)(e=>new C.a(e)))}updateProject(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={name:e.name,hourlyRate:e.hourlyRate?{amount:Math.round(100*e.hourlyRate.amount),currency:e.hourlyRate.currency}:null,costRate:e.costRate?{amount:null===e.costRate.amount?null:Math.round(100*e.costRate.amount),currency:e.costRate.currency}:null,clientId:e.clientId,billable:e.billable,isPublic:e.public,estimate:{estimate:Object(g.duration)(e.estimate.estimate,"h").toISOString(),type:e.estimate.type},color:e.color,archived:e.archived,template:e.isTemplate,note:e.note};return this.http.put(`/v1/workspaces/${t}/projects/${e.id}`,i).pipe(Object(h.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)),e=>{this.toaster.pop("error",e.error.message)}))}updateMany(e,t,i,n,s){const r=this.workspaceService.getDefaultWorkspaceId(),o={projectIds:e,changeFields:t,clientId:i.client?i.client.id:i.clientId,users:n||null,userGroups:s||null,hourlyRate:i.hourlyRate?{amount:Math.round(100*i.hourlyRate.amount),currency:i.hourlyRate.currency}:null,color:i.color,billable:i.billable,isPublic:i.public,archived:i.archived};return this.http.patch(`/workspaces/${r}/projects`,o).pipe(Object(h.a)(e=>{this.toaster.pop("success",this.translateService.instant("PROJECTS.MESSAGES.SUCCESSFULLY_UPDATED",{length:e.length}))},e=>{400==e.status&&this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.UPDATE.ERROR_MESSAGE"),e.error.message),this.error.next(e)}))}updateIsProjectTemplate(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`/v1/workspaces/${t}/projects/${e.id}/template`,{isTemplate:e.isTemplate}).pipe(Object(h.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours))))}deleteProject(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/v1/workspaces/${t}/projects/${e}`).pipe(Object(h.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.DELETE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e),e.hours)),e=>{this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.PROJECT.DELETE.ERROR_MESSAGE"))}))}deleteMany(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/projects/`,{headers:null,body:{ids:e}}).pipe(Object(h.a)(t=>{this.toaster.pop("success","Successfully deleted "+e.length+" projects.")},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.DELETE.ERROR_MESSAGE"),e.error.message)}))}getAllAuthorizationsForProject(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/projects/${e}/permissions`).pipe(Object(d.a)(e=>e.map(e=>new v.a(e))))}getAllAuthorizationsForUser(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${i}/projects/users/${e}/permissions`,{projectIds:t}).pipe(Object(d.a)(e=>e.map(e=>new v.a(e))))}addPermission(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/${e}/users/${t}/permissions/`,{permissions:[i]}).pipe(Object(d.a)(e=>e.map(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE_ACCESS.SUCCESS_MESSAGE")),new v.a(e)))))}removePermission(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.request("delete",`/workspaces/${n}/projects/${e}/users/${t}/permissions/`,{body:{permissions:[i]}}).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE_ACCESS.SUCCESS_MESSAGE")),e.map(e=>new v.a(e)))))}addUsersAndUserGroupsToProject(e,t,i,n){const r=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${r}/projects/${e}/team`,{userIds:t,userGroupIds:i,exclude:n}).pipe(Object(d.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(h.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE_ACCESS.SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.UPDATE_ACCESS.ERROR_MESSAGE"),e.error.message)}))}removeUserFromProject(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/projects/${e}/users/${t}/membership`).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE_ACCESS.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}removeUserGroupFromProject(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/projects/${e}/userGroups/${t}/membership`).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE_ACCESS.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}setUsersHourlyRateForProject(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId(),r={amount:Math.round(100*i.amount),currency:i.currency,since:i.since};return this.http.post(`/workspaces/${n}/projects/${e}/users/${t}/hourlyRate`,r).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.BILLABLE_RATE.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}setUsersCostRateForProject(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId(),r={amount:null!==i.amount?Math.round(100*i.amount):null,currency:i.currency,since:i.since};return this.http.post(`/workspaces/${n}/projects/${e}/users/${t}/cost-rate`,r).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.COST_RATE.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}makeProjectFavorite(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=this.authService.getUser().id;this.http.post(`/workspaces/${i}/users/${n}/projects/favorites/${e.id}`,{}).pipe(Object(d.a)(e=>new E.a(e))).subscribe(()=>{},e=>{this.error.next(e)})}removeProjectAsFavorite(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=this.authService.getUser().id;this.http.delete(`/workspaces/${i}/users/${n}/projects/favorites/projects/${e}`).subscribe(()=>{},e=>{this.error.next(e)})}updateHourlyRate(e,t,i,n){const r=this.workspaceService.getDefaultWorkspaceId(),o={amount:Math.round(100*t),currency:i,since:n};return this.http.put(`workspaces/${r}/projects/${e}/hourlyRate`,o).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}updateCostRate(e,t,i,n){const r=this.workspaceService.getDefaultWorkspaceId(),o={amount:null!==t?Math.round(100*t):null,currency:i,since:n};return this.http.put(`workspaces/${r}/projects/${e}/cost-rate`,o).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}updateEstimate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={timeEstimate:e.timeEstimate.toObj(),budgetEstimate:e.budgetEstimate.toObj()};return this.http.patch(`workspaces/${t}/projects/${e.id}/estimate`,i).pipe(Object(d.a)(e=>(this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.UPDATE.SUCCESS_MESSAGE")),new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}}return e.\u0275fac=function(t){return new(t||e)(S.fc(o.c),S.fc(a.a),S.fc(c.a),S.fc(l.a),S.fc(u.a),S.fc(y.f))},e.\u0275prov=S.Nb({token:e,factory:e.\u0275fac}),e})()},avDW:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("vkgz"),s=i("1G5W"),r=i("lJxs"),o=i("JIr8"),a=i("tnjF"),c=i("5Iok"),l=i("tk/3"),u=i("lGQG"),d=i("XNiG"),h=i("LRne"),p=i("f0Wu"),b=i("5pgj"),f=i("fV9S"),m=i("qfBg"),g=i("Ymxs"),v=i("wd/R"),C=i("1Tmk"),E=i("lvCY"),w=i("tzGe"),S=i("kZ14"),y=i("xoOP"),O=i("z1wq"),A=i("VYrk"),k=i("GidR"),T=i("fXoL"),D=i("sYmb");let I=(()=>{class e{constructor(e,t,i,n,s,r,o,a){this.http=e,this.userService=t,this.toaster=i,this.stopwatchService=n,this.authSerive=s,this.workspaceService=r,this.authService=o,this.translate=a,this.unsubscribe$=new d.a,this.clearAutocompleteCache$=new d.a,this.error=new d.a,this.timeEntries$=new d.a,this.savedTemplates=new d.a,this.newTemplate=new d.a,this.pagination={page:1,limit:E.j},this.cachedLatest={}}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}getAllTimeEntries(e=this.pagination.page,t=this.pagination.limit,i=!1,o=!1){this.pagination.page=e,this.pagination.limit=t;const a=this.workspaceService.getDefaultWorkspaceId(),u=this.authService.getUser().id,d=(new l.h).append("page",(e-1).toString()).append("limit",t.toString()),h=this.userService.getTimeZone();var m;this.http.get(`/workspaces/${a}/timeEntries/user/${u}/full`,{params:d}).pipe((m=h,Object(r.a)(e=>{let t=new c.a,i=e.timeEntriesList&&e.timeEntriesList.length||0;const n={};for(const o in e.durationMap)n[o]=new b.a(o,e.durationMap[o],[]);const s=e.weekStatusMap||{};for(const o in s)s[o]=new f.a(Object.assign(Object.assign({},s[o]),{startDayOfWeek:o}));e.timeEntriesList.forEach(e=>{if(!p(e.timeInterval.end).isValid())return void(t=new c.a(e));const i=p.tz(e.timeInterval.start,m).format("YYYY-MM-DD");n[i]||(n[i]=new b.a(i,"",[])),n[i].timeEntries.push(new c.a(e))});const r=[];for(const o in n)n[o].timeEntries.length&&r.push(n[o]);return r.sort((e,t)=>{const i=new Date(e.date),n=new Date(t.date);return i>n?-1:i<n?1:0}),t&&t.id&&(i--,e.allEntriesCount--),{total:e.allEntriesCount,entryGroups:r,entryInProgress:t,received:i,weekStatusMap:s}})),Object(n.a)(()=>{},e=>this.error.next(e))).pipe(Object(s.a)(this.unsubscribe$)).subscribe(e=>{e.lazyLoading=i,e.preventScroll=o,this.timeEntries$.next(e)},e=>{this.timeEntries$.next(null)})}updateUser(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/user`,{userId:t}).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_USER_SUCCESS"))},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRY_FAIL"))}))}updateDescription(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/description`,{description:t}).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_DESCRIPTION_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRY_FAIL"))}))}updateBillable(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/billable`,{billable:t}).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant(t?"TRACKER.MESSAGES.UPDATE_ENTRY_TO_BILLABLE":"TRACKER.MESSAGES.UPDATE_ENTRY_TO_NONBILLABLE"))},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRY_FAIL"))}))}editTimeInterval(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/timeInterval`,{start:t.start,end:t.end}).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_DATE_TIME_SUCCESS"))},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRY_FAIL"))}),Object(r.a)(e=>new c.a(e)))}updateTags(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),s={tagIds:t.map(e=>e.id)};return this.http.put(`/workspaces/${i}/timeEntries/${e}/tags`,s).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_TAGS_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRY_FAIL"))}))}deleteTimeEntry(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/timeEntries/${e.id}`).pipe(Object(n.a)(e=>{this.toaster.pop("success",(null==t?void 0:t.success)||this.translate.instant("TRACKER.MESSAGES.DELETE_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",t&&t.error||e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.DELETE_FAIL"))}))}deleteTimeEntryMany(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/timeEntries/`,{headers:null,body:{timeEntryIds:e}}).pipe(Object(n.a)(()=>this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.DELETE_BULK_SUCCESS")),e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DELETE_ERROR_MESSAGE"))))}createTimeEntry(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=Object(v.utc)(v(e.timeInterval.start)).toISOString(),s=Object(v.utc)(v(e.timeInterval.end)).toISOString();let o=null;e.tags&&e.tags.length&&(o=e.tags.map(e=>e.id));const a={start:i,billable:e.billable,description:e.description,projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,end:s,tagIds:o,customFields:A.a.listToJson(e.customFieldValues)};return this.http.post(`/workspaces/${t}/timeEntries/full`,a).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.CREATE_FAIL"))}))}duplicateTimeEntry(e){const t=new c.a(e),i=this.workspaceService.getDefaultWorkspaceId(),s=this.authSerive.getUser().id;return this.http.post(`/v1/workspaces/${i}/user/${s}/time-entries/${t.id}/duplicate`,null).pipe(Object(r.a)(e=>(t.id=e.id,e.projectId?e.taskId||(t.task=null):(t.project=null,t.task=null),t)),Object(n.a)(()=>this.toaster.pop("success",this.translate.instant("GLOBAL.DUPLICATE_SUCCESS_MSG")),e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("GLOBAL.DUPLICATE_FAIL"))))}addStartedTimeEntry(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=null;e.tags&&e.tags.length&&(i=e.tags.map(e=>e.id));const s={start:v().toISOString(),billable:e.billable,description:Object(y.G)(e.description,this.toaster,this.translate),projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,tagIds:i,customFields:A.a.listToJson(e.customFieldValues)};return this.http.post(`/workspaces/${t}/timeEntries/full`,s).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.START_TIMER_FAIL"))}))}stopwatchStopped(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=Object(v.utc)(v(e.timeInterval.start)).toISOString(),s=Object(v.utc)(v()).toISOString();let o=null;return e.tags&&e.tags.length&&(o=e.tags.map(e=>e.id)),this.http.put(`/workspaces/${t}/timeEntries/${e.id}/full`,{start:i,billable:e.billable,description:e.description,projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,end:s,tagIds:o}).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.STOP_TIMER_FAIL"))}))}updateProjectAndTask(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return e.task?this.http.put(`/workspaces/${i}/timeEntries/${e.id}/projectAndTask`,{taskId:e.task&&e.task.id,projectId:e.project&&e.project.id}).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_PROJECTS_DETAILS_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_PROJECTS_DETAILS_FAIL"))})):this.updateProject(e,i)}updateProject(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return e.project?this.http.put(`/workspaces/${i}/timeEntries/${e.id}/project`,{projectId:e.project&&e.project.id}).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_PROJECTS_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_PROJECTS_FAIL"))})):this.removeProject(e,i)}removeProject(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${i}/timeEntries/${e.id}/project/remove`).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_PROJECTS_SUCCESS")),this.clearAutocompleteCache$.next()},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_PROJECTS_FAIL"))}))}updateGroup(e,t,i,s){const r=this.workspaceService.getDefaultWorkspaceId(),o={userId:i.user&&i.user.id,timeEntryIds:e,changeFields:t,description:Object(y.G)(i.description,this.toaster,this.translate),projectId:i.project?i.project.id:i.projectId,taskId:i.task?i.task.id:i.taskId,billable:i.billable,start:i.timeInterval.start,end:i.timeInterval.end,tagIds:i.tags?i.tags.map(e=>e.id):i.tagIds,moveToWorkspace:i.workspaceId===r?null:i.workspaceId,customFields:s&&s.map(e=>({customFieldId:e.customFieldId,value:e.value}))};return this.http.patch(`/workspaces/${r}/timeEntries/bulk`,o).pipe(Object(n.a)(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_MULTIPLE_ENTRIES_SUCCESS",{count:e.length})),this.clearAutocompleteCache$.next()},e=>{var t;this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRIES_FAIL"))}))}editStartTime(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/start`,{start:t}).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_START_TIME_SUCCESS"))},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.UPDATE_START_TIME_FAIL"))}))}getTimeEntryInProgress(e=!1){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`/workspaces/${t}/timeEntries/inProgress`).pipe(Object(r.a)(e=>e?new S.a(e):null),Object(n.a)(t=>{if(e)if(t){const e=new Date(t.timeInterval.start).getTime()/100;this.stopwatchService.setStart(e)}else this.stopwatchService.stop()}))}getTimeEntriesInRange(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/timeEntries/user/${e}/entriesInRange`,{start:t,end:i}).pipe(Object(r.a)(e=>e.map(e=>c.a.fromFull(e))))}patchEntry(e,t,i){var s,r;const o=this.workspaceService.getDefaultWorkspaceId(),a={description:e.description,billable:e.billable,projectId:(null===(s=e.project)||void 0===s?void 0:s.id)||null,taskId:(null===(r=e.task)||void 0===r?void 0:r.id)||null,tagIds:e.tags?e.tags.map(e=>e.id):[],customFields:i&&i.map(e=>({customFieldId:e.customFieldId,value:e.value,sourceType:e.sourceType}))};return e.timeInterval.start!==t.start&&(a.start=e.timeInterval.start),e.timeInterval.end!==t.end&&(a.end=e.timeInterval.end),this.http.patch(`/workspaces/${o}/timeEntries/${e.id}`,a).pipe(Object(n.a)(e=>this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRIES_SUCCESS")),e=>{var t;return this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRIES_FAIL"))}))}updateEntryWithBulk(e,t){var i,s;const o=this.workspaceService.getDefaultWorkspaceId(),a={changeFields:t,timeEntryIds:[e.id],description:e.description,billable:e.billable,projectId:(null===(i=e.project)||void 0===i?void 0:i.id)||null,taskId:(null===(s=e.task)||void 0===s?void 0:s.id)||null,tagIds:e.tags?e.tags.map(e=>e.id):[],start:e.timeInterval.start||null,end:e.timeInterval.end||null};return this.http.patch(`/workspaces/${o}/timeEntries/bulk`,a).pipe(Object(r.a)(e=>new S.a(e[0])),Object(n.a)(e=>this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRIES_SUCCESS")),e=>{var t;return this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRIES_FAIL"))}))}getAutocomplete(e){if(e.length<2)return Object(h.a)([]);const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("searchValue",e);return this.http.get(`/workspaces/${t}/timeEntries`,{params:i}).pipe(Object(r.a)(e=>e.map(e=>new k.a(e))))}getLatestEntries(e=!0){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("limit","8");return e&&this.cachedLatest[t]?Object(h.a)(this.cachedLatest[t]):this.http.get(`/workspaces/${t}/timeEntries/recent`,{params:i}).pipe(Object(r.a)(e=>e.map(e=>new k.a(e))),Object(n.a)(e=>this.cachedLatest[t]=e))}clearLastesEntriesCache(){this.cachedLatest={}}getTimeEntry(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("hydrated","true");return this.http.get(`/v1/workspaces/${t}/time-entries/${e}`,{params:i}).pipe(Object(r.a)(e=>new c.a(e)))}getTimeEntriesForTimesheet(e,t,i,n=!1){const s=this.workspaceService.getDefaultWorkspaceId(),o=(new l.h).append("start",t).append("end",i).append("hydrated","true").append("consider-duration-format","true").append("in-progress",n.toString()).append("page","0").append("page-size","0");return this.http.get(`/workspaces/${s}/timeEntries/users/${e}`,{params:o}).pipe(Object(r.a)(e=>e.map(e=>c.a.fromFull(e))))}getWeekBeforeEntries(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=(new l.h).append("get-week-before",t).append("hydrated","true");return this.http.get(`/workspaces/${i}/timeEntries/users/${e}`,{params:n}).pipe(Object(r.a)(e=>e.map(e=>{const t=new c.a(e);return t.task=t.task?new a.a(t.task):t.task,t})))}create(e,t,i){const s=this.workspaceService.getDefaultWorkspaceId(),r={start:e.timeInterval.start,billable:e.billable,description:e.description?e.description:"",projectId:e.projectId,taskId:e.taskId,end:e.timeInterval.end,tagIds:e.tagIds?e.tagIds:[],customFields:i&&i.map(e=>({customFieldId:e.customFieldId,value:e.value,sourceType:e.sourceType}))};return this.http.post(`/v1/workspaces/${s}/user/${t}/time-entries`,r).pipe(Object(n.a)(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_ENTRY_SUCCESS"))},e=>{this.toaster.pop("error",this.translate.instant("TRACKER.MESSAGES.PROJECT_NO_PERMISSION"))}))}updateMany(e,t,i){if(0===e.length)return;const s=this.workspaceService.getDefaultWorkspaceId(),o=e.map(e=>({id:e.id,start:e.timeInterval.start,end:e.timeInterval.end,description:e.description,billable:e.billable,projectId:e.project?e.project.id:null,taskId:e.task?e.task.id:null,tagIds:e.tags&&e.tags.length>0?e.tags.map(e=>e.id):[],customFields:i&&i.map(e=>({customFieldId:e.customFieldId,value:e.value}))})),a={params:(new l.h).append("hydrated","true")};return this.http.put(`/v1/workspaces/${s}/user/${t}/time-entries`,o,a).pipe(Object(r.a)(e=>e.map(e=>c.a.fromFull(e))),Object(n.a)(null,e=>{var t;return this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||this.translate.instant("GLOBAL.UPDATE_FAILED_ERROR_MESSAGE"))}))}deleteMany(e,t){if(0===e.length)return;const i=this.workspaceService.getDefaultWorkspaceId(),s={params:(new l.h).set("time-entry-ids",e.join(","))};return this.http.delete(`/v1/workspaces/${i}/user/${t}/time-entries`,s).pipe(Object(n.a)(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.DELETE_MULTIPLE_ENTRIES_SUCCESS",{count:e.length}))},e=>{this.toaster.pop("error",this.translate.instant("TRACKER.MESSAGES.DELETE_MULTIPLE_ENTRIES_FAIL"))}))}saveTemplate(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=e.filter((e,t,i)=>i.findIndex(t=>t.projectId===e.projectId&&t.taskId===e.taskId)===t);this.http.post(`v1/workspaces/${i}/templates`,[{projectsAndTasks:n,name:t}]).subscribe(e=>{this.getTemplate(e[0].id),this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_TEMPLATE_SUCCESS"))},e=>{this.error.next(e)})}getTemplates(){const e=this.workspaceService.getDefaultWorkspaceId(),t=(new l.h).append("hydrated","true").append("cleansed","true");this.http.get(`v1/workspaces/${e}/templates`,{params:t}).pipe(Object(r.a)(e=>e.map(e=>new O.a(e)))).subscribe(e=>{this.savedTemplates.next(e)},e=>{this.error.next(e)})}getTemplate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("hydrated","true").append("cleansed","true");this.http.get(`v1/workspaces/${t}/templates/${e}`,{params:i}).subscribe(e=>{this.newTemplate.next(e)},e=>{this.error.next(e)})}templateOfId(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("hydrated","true").append("cleansed","false");return this.http.get(`v1/workspaces/${t}/templates/${e}`,{params:i})}deleteTemplate(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`v1/workspaces/${t}/templates/${e}`).pipe(Object(n.a)(()=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.DELETE_TEMPLATE_SUCCESS"))},e=>{this.error.next(e)}))}editTemplateName(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.patch(`v1/workspaces/${i}/templates/${e}`,{name:t}).pipe(Object(n.a)(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_TEMPLATE_SUCCESS_HEADER"),this.translate.instant("TRACKER.MESSAGES.UPDATE_TEMPLATE_SUCCESS_BODY"))},e=>{this.error.next(e)}))}activateTemplate(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`workspaces/${i}/templates/${e}/activate`,{weekStart:t}).pipe(Object(n.a)(e=>{this.toaster.pop("success","Template activated"),e.entriesSkipped&&this.toaster.pop("info",this.translate.instant("FAILED_TO_COPY_TIME"))},e=>{this.error.next(e)}))}editCustomField(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`/workspaces/${i}/timeEntries/${e}/custom-field`,{customFieldId:t.customFieldId,value:t.value}).pipe(Object(n.a)(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.UPDATE_ENTRY_SUCCESS"))},e=>{this.toaster.pop("error",e.error.message)}))}createForUser(e,t,i,s){const o=this.workspaceService.getDefaultWorkspaceId(),a={start:Object(v.utc)(v(e.timeInterval.start)).toISOString(),end:Object(v.utc)(v(e.timeInterval.end)).toISOString(),billable:e.billable,description:e.description,projectId:e.project?e.project.id:null,taskId:e.task?e.task.id:null,tagIds:e.tags?e.tags.map(e=>e.id):[],customFields:A.a.listToJson(i)};return this.http.post(`/workspaces/${o}/timeEntries/users/${t}/full`,a).pipe(Object(r.a)(e=>new c.a(e)),Object(n.a)(()=>{this.toaster.pop("success",(null==s?void 0:s.message)||this.translate.instant("TRACKER.MESSAGES.CREATE_SUCCESS"))},e=>{var t;this.toaster.pop("error",(null===(t=e.error)||void 0===t?void 0:t.message)||this.translate.instant("TRACKER.MESSAGES.CREATE_FAIL"))}))}createTimeEntryForMembers(e,{groups:t,users:i}){const s=this.workspaceService.getDefaultWorkspaceId(),o={start:e.timeInterval.start,end:e.timeInterval.end,billable:e.billable,description:e.description,projectId:e.project&&e.project.id,taskId:e.task&&e.task.id,tagIds:e.tags&&e.tags.map(e=>e.id),users:i,userGroups:t,customFields:A.a.listToJson(e.customFieldValues)},a=new d.a;return this.http.post(`/workspaces/${s}/timeEntries/time-entries`,o).pipe(Object(r.a)(e=>e.map(e=>new S.a(e))),Object(n.a)(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_MULTIPLE_ENTRIES_SUCCESS",{count:e.length}))},e=>this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.CREATE_MULTIPLE_ENTRIES_FAIL")))).subscribe(e=>{a.next(e)},e=>a.error(e)),a}createTimeEntryForMember(e){const t=this.workspaceService.getDefaultWorkspaceId();let i=null;e.tags&&e.tags.length&&(i=e.tags.map(e=>e.id));const n={start:e.timeInterval.start,end:e.timeInterval.end,billable:e.billable,description:e.description,projectId:e.project&&e.project.id||null,taskId:e.task&&e.task.id||null,tagIds:i,customFields:A.a.listToJson(e.customFieldValues)};this.http.post(`/workspaces/${t}/timeEntries/user/${e.userId}`,n).subscribe(e=>{this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_SUCCESS")),s.next(e)},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.CREATE_MEMBER_ENTRY_FAIL")),s.error(e)});const s=new d.a;return s}getEntriesByIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new l.h).append("id",(e||[]).join(", "));return this.http.get(`/workspaces/${t}/timeEntries/fetch`,{params:i}).pipe(Object(o.a)(e=>Object(h.a)([])),Object(r.a)(e=>e.map(e=>new S.a(e))))}copyTimeEntries(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();this.http.post(`/workspaces/${n}/time-entries/users/${i}`,{start:e,end:t,dayOffset:7}).subscribe(e=>{const t=Math.abs(e.entriesSkipped);t>0||0===t&&0===e.entriesCreated.length?this.toaster.pop("info",this.translate.instant("FAILED_TO_COPY_TIME")):this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_SUCCESS")),s.next(e)},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.CREATE_MEMBER_ENTRY_FAIL")),s.error(e)});const s=new d.a;return s}saveTimeChecked(e,t,i,n){const s=this.workspaceService.getDefaultWorkspaceId();this.http.post(`workspaces/${s}/templates`,{projectsAndTasks:e,name:t,timeEntryIds:i,weekStart:n}).subscribe(e=>{this.getTemplate(e.id),this.toaster.pop("success",this.translate.instant("TRACKER.MESSAGES.CREATE_TEMPLATE_SUCCESS"))},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translate.instant("TRACKER.MESSAGES.CREATE_MEMBER_ENTRY_FAIL")),r.error(e)});const r=new d.a;return r}}return e.\u0275fac=function(t){return new(t||e)(T.fc(l.c),T.fc(m.a),T.fc(g.a),T.fc(w.a),T.fc(u.a),T.fc(C.a),T.fc(u.a),T.fc(D.f))},e.\u0275prov=T.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},bGsH:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));var n=function(e){return e.MONDAY="MONDAY",e.TUESDAY="TUESDAY",e.WEDNESDAY="WEDNESDAY",e.THURSDAY="THURSDAY",e.FRIDAY="FRIDAY",e.SATURDAY="SATURDAY",e.SUNDAY="SUNDAY",e}({}),s=function(e){return e[e.MONDAY=0]="MONDAY",e[e.TUESDAY=1]="TUESDAY",e[e.WEDNESDAY=2]="WEDNESDAY",e[e.THURSDAY=3]="THURSDAY",e[e.FRIDAY=4]="FRIDAY",e[e.SATURDAY=5]="SATURDAY",e[e.SUNDAY=6]="SUNDAY",e}({})},bM1u:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("1G5W"),s=i("fXoL"),r=i("lGQG"),o=i("qfBg"),a=i("Ymxs"),c=i("NHP+"),l=i("3Pt+"),u=i("lvCY"),d=i("AY7I"),h=i("sYmb"),p=i("ofXK");function b(e,t){1&e&&(s.Xb(0,"label"),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.Cb(1),s.ad(s.pc(2,1,"DELETE_ACCOUNT.DIALOG.CONFIRM_PASS_LABEL")))}function f(e,t){1&e&&(s.Xb(0,"label"),s.Zc(1),s.oc(2,"translate"),s.Wb()),2&e&&(s.Cb(1),s.ad(s.pc(2,1,"DELETE_ACCOUNT.DIALOG.CONFIRM_NO_PASS_LABEL")))}let m=(()=>{class e{constructor(e,t,i,n,r){this.authService=e,this.userService=t,this.toaster=i,this.translate=n,this.formBuilder=r,this.unsubscribe$=new c.a,this.onSuccess=new s.n,this.onUserConfirmed=new s.n}ngOnInit(){this.profile=this.authService.getUser(),this.authService.canChangePassword.subscribe(e=>{this.hasPassword=e}),this.authService.canChange(),this.form=this.formBuilder.group({password:["",[l.G.required,l.G.minLength(u.s)]],inProgress:[!1,[d.a.requiredFalse]]})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get password(){return this.form.get("password")}close(){this.onSuccess.emit(!0)}confirm(){this.setInProgress(!0),this.hasPassword?this.authService.confirmPassword(this.profile.email,this.password.value).pipe(Object(n.a)(this.unsubscribe$)).subscribe(()=>{this.setInProgress(!1),this.onUserConfirmed.emit({shouldOpen:!0,authentication:this.password.value}),this.close()},()=>{this.setInProgress(!1)}):"delete"===this.password.value.trim().toLowerCase()?(this.setInProgress(!1),this.onUserConfirmed.emit({shouldOpen:!0,authentication:this.password.value}),this.close()):this.toaster.error(this.translate.instant("DELETE_ACCOUNT.PLEASE_ENTER_EXACT_TEXT"))}setInProgress(e){this.form.patchValue({inProgress:e})}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(r.a),s.Rb(o.a),s.Rb(a.a),s.Rb(h.f),s.Rb(l.f))},e.\u0275cmp=s.Lb({type:e,selectors:[["delete-confirm"]],outputs:{onSuccess:"onSuccess",onUserConfirmed:"onUserConfirmed"},decls:28,vars:22,consts:[[3,"formGroup","ngSubmit"],[1,"cl-modal-body","cl-text-center","cl-pt-4","cl-pb-3"],[1,"cl-mb-3"],["src","assets/images/illustrations/delete-workspace.svg",1,"cl-img-fluid"],[1,"cl-h1","cl-mb-2","cl-text-gray-3"],[1,"cl-text-gray-6","cl-mb-2"],[1,"cl-text-gray-6","cl-mb-0"],[1,"cl-my-3"],[1,"cl-form-group","cl-text-left","cl-mb-0"],[4,"ngIf"],["formControlName","password","autofocus","",1,"cl-form-control",3,"type"],[1,"cl-modal-footer"],[3,"click"],["type","submit",1,"cl-btn","cl-btn-primary"]],template:function(e,t){1&e&&(s.Xb(0,"form",0),s.jc("ngSubmit",(function(){return t.confirm()})),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Sb(3,"img",3),s.Wb(),s.Xb(4,"div",4),s.Zc(5),s.oc(6,"translate"),s.Wb(),s.Xb(7,"p",5),s.Zc(8),s.oc(9,"translate"),s.Wb(),s.Xb(10,"p",5),s.Zc(11),s.oc(12,"translate"),s.Wb(),s.Xb(13,"p",6),s.Zc(14),s.oc(15,"translate"),s.Wb(),s.Sb(16,"hr",7),s.Xb(17,"div",8),s.Xc(18,b,3,3,"label",9),s.Xc(19,f,3,3,"label",9),s.Sb(20,"input",10),s.Wb(),s.Wb(),s.Xb(21,"div",11),s.Xb(22,"a",12),s.jc("click",(function(){return t.close()})),s.Zc(23),s.oc(24,"translate"),s.Wb(),s.Xb(25,"button",13),s.Zc(26),s.oc(27,"translate"),s.Wb(),s.Wb(),s.Wb()),2&e&&(s.wc("formGroup",t.form),s.Cb(5),s.ad(s.pc(6,10,"DELETE_ACCOUNT.DELETE_HEADER")),s.Cb(3),s.bd("",s.pc(9,12,"DELETE_ACCOUNT.DIALOG.DELETE_INFO_TEXT_1"),"."),s.Cb(3),s.bd("",s.pc(12,14,"DELETE_ACCOUNT.DIALOG.DELETE_INFO_TEXT_2"),"."),s.Cb(3),s.bd("",s.pc(15,16,"DELETE_ACCOUNT.DIALOG.DELETE_INFO_TEXT_3"),"."),s.Cb(4),s.wc("ngIf",t.hasPassword),s.Cb(1),s.wc("ngIf",!t.hasPassword),s.Cb(1),s.wc("type",t.hasPassword?"password":"text"),s.Cb(3),s.ad(s.pc(24,18,"GLOBAL.CANCEL_BTN")),s.Cb(3),s.ad(s.pc(27,20,"GLOBAL.CONTINUE_BTN")))},directives:[l.I,l.t,l.k,p.u,l.c,l.s,l.i],pipes:[h.e],encapsulation:2}),e})()},bW5g:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("fXoL"),s=i("1G5W"),r=i("XNiG"),o=i("1uah"),a=i("JBiw"),c=i("8+Zx"),l=i("cGux"),u=i("hkzH"),d=i("y+xF"),h=i("lvCY"),p=i("qfBg"),b=i("ePBx"),f=i("1Tmk"),m=i("sYmb"),g=i("2rWG"),v=i("sbmM"),C=i("1kSV"),E=i("ofXK"),w=i("qUN8"),S=i("D0uv");function y(e,t){if(1&e&&(n.Xb(0,"span",4),n.Zc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.numberOfSelected," ")}}function O(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",5),n.jc("loadMore",(function(){return n.Oc(e),n.nc().loadMoreUsers()}))("onSelectAllWithTextInput",(function(t){return n.Oc(e),n.nc().selectAllUserIds(t)}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc();return i.onSearchChange(t),i.getUsersAndUserGroups()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc();return i.clearOptionFilter(t),i.getUsersAndUserGroups()}))("onCloseFilter",(function(t){return n.Oc(e),n.nc().setIndicatorOf(t)}))("onChange",(function(t){n.Oc(e);const i=n.nc();return i.onSelectionChange(t),i.setIndicatorOf(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("placeholder",e.placeholder)("preventOfflineFiltering",!0)("filterName","member")("showSelectAll",!0)("checkboxValues",e.valuesData)("noResetOnFilterChange",!0)("selectableMaps",e.filterMaps)("filterOptions",e.showFilterOptions&&e.userFilterOptions)("searchValue",e.query.name)("countMap",e.userCount)("inProgressSelectAll",e.inProgressSelectAll)("inProgressLoading",e.inProgressLoading[e.USERS]||e.inProgressLoading[e.GROUPS])}}let A=(()=>{class e{constructor(e,t,i,s,o){this.userGroupService=e,this.cd=t,this.userService=i,this.workspaceService=s,this.translateService=o,this.onChange=new n.n,this.showFilterOptions=!0,this.hideTooltip=!0,this.title=this.translateService.instant("PROJECTS.DROPDOWN.SELECT_MEMBERS"),this.placeholder=this.translateService.instant("PROJECTS.DROPDOWN.FILTER_USERS_AND_GROUPS"),this.filterMaps=null,this.userFilterOptions=u.v,this.userCount=new l.a,this.labels="",this.reachedLimit={},this.isOpenedMap=!1,this.inProgressSelectAll=!1,this.inProgressLoading={},this.USERS=u.k,this.GROUPS=u.f,this.unsubscribe$=new r.a}set valuesData(e){if(!e)return;const t=!this._valuesData;e=e||new c.a({options:Object(u.q)()}),this._valuesData=e,t&&this.isInitialized&&this.setAllIndicators()}get valuesData(){return this._valuesData}ngOnInit(){const e=[new d.a(u.f,null,{label:"Groups"}),new d.a(u.k)];this.filterMaps=new a.a(e),this.resetQuery(),this.setAllIndicators(),this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onSelectionChange(e){this.valuesData=e.checkboxValues,this.filterMaps=e.selectableMaps,this.onChange.emit(this.valuesData)}clearFilters(){this.resetQuery(),this.valuesData.reset(),this.filterMaps.resetAll(),this.userCount.reset(),this.setAllIndicators()}resetQuery(){this.query={page:1,limit:h.f,name:""},this.reachedLimit={},this.labels=""}getUsersAndUserGroups(){"INACTIVE"===this.valuesData.options.status&&this.removeGroupData(),"INACTIVE"!==this.valuesData.options.status&&this.getUserGroups(),this.getUsers()}getUserGroups(e=this.query){this.reachedLimit[u.f]||(this.setInProgressLoading(u.f,!0),this.userGroupService.getUserGroups(e).pipe(Object(s.a)(this.unsubscribe$)).subscribe(({groups:t,count:i})=>{const n=t.length,s=t.filter(e=>"Admins"!==e.name);t=s,!!e.name||this.userCount.set(u.f,i),1===e.page&&this.filterMaps.resetMap(u.f),this.filterMaps.pushToMap(u.f,t,{label:"Groups"},!0);const r=this.filterMaps.countSelectablesOf(u.f);this.reachedLimit[u.f]=r>=i||n<e.limit,this.setInProgressLoading(u.f,!1),this.cd.detectChanges()},()=>this.setInProgressLoading(u.f,!1)))}getUsers(e=this.query){this.reachedLimit[u.k]||(e.statuses=this.valuesData.options.status,e.email=e.name,this.setInProgressLoading(u.k,!0),this.workspaceService.getReportsFilterTeamMembers(e).pipe(Object(s.a)(this.unsubscribe$)).subscribe(({count:t,users:i})=>{!!e.name||this.userCount.set(u.k,t),1===e.page&&this.filterMaps.resetMap(u.k),this.filterMaps.pushToMap(u.k,i);const n=this.filterMaps.countSelectablesOf(u.k);this.reachedLimit[u.k]=n>=t||i.length<e.limit,this.setInProgressLoading(u.k,!1)},()=>this.setInProgressLoading(u.k,!1)))}loadMoreUsers(){this.query.page++,this.getUsersAndUserGroups()}clearOptionFilter(e,t=!0){this.query.page=1,this.query.name=e.searchTerm,this.reachedLimit[u.k]=!1,this.reachedLimit[u.f]=!1,t&&this.userCount.reset()}removeGroupData(){this.filterMaps.removeMap(u.f),this.userCount.remove(u.f)}onSearchChange(e){this.clearOptionFilter({searchTerm:e},!1)}generateIndicatorOf(){if(!this.valuesData)return;const e=this.valuesData.getSelectedData(this.filterMaps);this.numberOfSelected=e.numberOfSelected||e.numberOfSelectedApproximately,this.labels=e.label}setIndicatorOf({numberOfSelected:e,numberOfSelectedApproximately:t,label:i}){this.numberOfSelected=e||t,this.labels=i,this.cd.markForCheck()}setAllIndicators(){this.valuesData&&this.generateIndicatorOf()}selectAllUserIds(e){const t={status:this.valuesData.options.status,name:e.searchTerm},i=this.userService.getUserIds(t),n=this.userGroupService.getUserGroupIds(t);this.setInProgress(!0),Object(o.a)(i,n).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{let i=e.isSelected;this.valuesData.exclude&&(i=!i),this.valuesData.toggleMultipleIds(u.k,t[0],i),this.valuesData.toggleMultipleIds(u.f,t[1],i),this.isOpenedMap||this.generateIndicatorOf(),this.setInProgress(!1)},e=>{this.setInProgress(!1)})}setInProgress(e=!1){this.inProgressSelectAll=e,this.cd.markForCheck()}setInProgressLoading(e,t){this.inProgressLoading[e]=t,this.cd.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(b.a),n.Rb(n.h),n.Rb(p.a),n.Rb(f.a),n.Rb(m.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox-groups-users"]],inputs:{valuesData:"valuesData",showFilterOptions:"showFilterOptions"},outputs:{onChange:"onChange"},decls:5,vars:3,consts:[["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex",3,"onClose","onOpen"],["dropdownKeyButton","","tabindex","0","placement","bottom",1,"pointer","cl-btn","cl-dropdown-toggle","cl-btn-outline-light","cl-w-100","cl-d-flex","cl-align-items-center","cl-justify-content-between",3,"ngbTooltip"],["class","cl-badge cl-badge-filter",4,"ngIf"],[3,"placeholder","preventOfflineFiltering","filterName","showSelectAll","checkboxValues","noResetOnFilterChange","selectableMaps","filterOptions","searchValue","countMap","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[1,"cl-badge","cl-badge-filter"],[3,"placeholder","preventOfflineFiltering","filterName","showSelectAll","checkboxValues","noResetOnFilterChange","selectableMaps","filterOptions","searchValue","countMap","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.jc("onClose",(function(){return t.isOpenedMap=!1}))("onOpen",(function(){return 1===t.query.page&&t.getUsersAndUserGroups(),t.isOpenedMap=!0})),n.Xb(1,"div",1),n.Zc(2),n.Xc(3,y,2,1,"span",2),n.Wb(),n.Xc(4,O,1,12,"dropdown-checkbox",3),n.Wb()),2&e&&(n.Cb(1),n.wc("ngbTooltip",t.hideTooltip||!t.labels?"":t.labels+" ("+t.numberOfSelected+")"),n.Cb(1),n.bd(" ",t.title," "),n.Cb(1),n.wc("ngIf",t.numberOfSelected))},directives:[g.a,v.a,C.bb,E.u,w.a,S.a],encapsulation:2,changeDetection:0}),e})()},brRw:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("ofXK"),s=i("3Pt+"),r=i("Nqck"),o=i("uepX"),a=i("9Trn"),c=i("1kSV"),l=i("tZA+"),u=i("8XW9"),d=i("sYmb"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.a,o.a,a.a,l.a,c.s,u.a,d.d]]}),e})()},bzkB:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o,a,c,l,u){const d=[];return e.forEach(e=>{switch(e){case"col1":d.push(t);break;case"col2":d.push(i);break;case"col3":d.push(n);break;case"col4":d.push(s);break;case"col5":d.push(r);break;case"col6":d.push(o);break;case"col7":d.push(a);break;case"col8":d.push(c);break;case"col9":d.push(l);break;case"col10":d.push(u)}}),d}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"columnDecider",type:e,pure:!0}),e})()},"c+i4":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("fXoL"),s=i("1Tmk"),r=(i("gZP9"),i("2rWG")),o=i("sbmM"),a=i("TmxI"),c=i("qUN8"),l=i("sYmb"),u=i("rg2B"),d=i("Lwft");function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",13),n.Xb(1,"div",14),n.Xb(2,"a",15),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()}))("click",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()})),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Xb(5,"a",15,16),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()}))("click",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()})),n.Zc(7),n.oc(8,"translate"),n.Wb(),n.Xb(9,"a",15,16),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().downloadReceipts.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().downloadReceipts.emit()}))("click",(function(){return n.Oc(e),n.nc().downloadReceipts.emit()})),n.Zc(11),n.oc(12,"translate"),n.Wb(),n.Sb(13,"span",17),n.Wb(),n.Wb()}2&e&&(n.Cb(3),n.ad(n.pc(4,3,"REPORTS.TABLE_INFO.SAVE_AS_CSV_BTN")),n.Cb(4),n.bd(" ",n.pc(8,5,"REPORTS.TABLE_INFO.SAVE_AS_EXCEL_BTN"),""),n.Cb(4),n.bd(" ",n.pc(12,7,"REPORTS.TABLE_INFO.DOWNLOAD_RECEIPTS"),""))}let p=(()=>{class e{constructor(e){this.workspaceService=e,this.wsCurrency="USD",this.exportAsCsv=new n.n,this.exportAsExcel=new n.n,this.downloadReceipts=new n.n,this.wsCurrency=this.workspaceService.getLocalDefaultWorkspace().hourlyRate.currency}set totalInfo(e){this._totalInfo=e}get totalInfo(){return this._totalInfo}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["expenses-table-info"]],inputs:{totalInfo:"totalInfo"},outputs:{exportAsCsv:"exportAsCsv",exportAsExcel:"exportAsExcel",downloadReceipts:"downloadReceipts"},decls:27,vars:21,consts:[[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0","cl-pt-2","cl-pt-lg-custom-0","cl-d-block","cl-d-lg-custom-flex"],[1,"cl-d-flex","cl-d-flex","cl-flex-column","cl-flex-sm-row"],[1,"cl-d-flex","cl-align-items-end"],[1,"cl-h6","cl-mb-0","cl-lh-1"],[1,"cl-h2","cl-mb-0","cl-ml-1","cl-lh-1"],[1,"cl-d-flex","cl-align-items-end","cl-ml-2"],[1,"cl-border-bottom","cl-mr-2","cl-mr-lg-3","cl-mt-2"],[1,"cl-d-flex","cl-flex-column","cl-flex-sm-row"],[1,"cl-d-flex","cl-min-height-40"],["dropdownKey","",1,"cl-dropdown","cl-d-flex","cl-w-100","cl-w-lg-auto","cl-ml-n2","cl-ml-lg-n3"],["dropdownKeyButton","","dropdownKeyButtonHover","","tabindex","0",1,"cl-component-divided-left","pointer","cl-remove-divider-mob","cl-dropdown-toggle","cl-small"],["class","cl-dropdown-menu cl-dropdown-menu-custom-lg-right","openUpAtBottom","",4,"dropdownKeyContent"],[1,"cl-border-bottom","cl-mr-2","cl-d-block","cl-d-sm-none"],["openUpAtBottom","",1,"cl-dropdown-menu","cl-dropdown-menu-custom-lg-right"],[1,"cl-scroll-area"],["clickCloseDropdown","","tabindex","0",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],["excelLink",""],["dropdownClose","","tabindex","0"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xb(6,"div",4),n.Zc(7),n.oc(8,"roundIfWholeNumber"),n.oc(9,"centsToDollars"),n.Wb(),n.Wb(),n.Xb(10,"div",5),n.Xb(11,"div",3),n.Zc(12),n.oc(13,"translate"),n.Wb(),n.Xb(14,"div",4),n.Zc(15),n.oc(16,"roundIfWholeNumber"),n.oc(17,"centsToDollars"),n.Wb(),n.Wb(),n.Wb(),n.Sb(18,"div",6),n.Xb(19,"div",7),n.Xb(20,"div",8),n.Xb(21,"div",9),n.Xb(22,"div",10),n.Zc(23),n.oc(24,"translate"),n.Wb(),n.Xc(25,h,14,9,"div",11),n.Wb(),n.Wb(),n.Sb(26,"div",12),n.Wb(),n.Wb()),2&e&&(n.Cb(4),n.ad(n.pc(5,7,"GLOBAL.TOTAL_TIME")),n.Cb(3),n.cd("",t.totalInfo?n.pc(8,9,n.pc(9,11,null==t.totalInfo?null:t.totalInfo.totalAmount)):"0.00"," ",t.wsCurrency,""),n.Cb(5),n.ad(n.pc(13,13,"REPORTS.TABLE_INFO.BILLABLE_LABEL")),n.Cb(3),n.cd("",t.totalInfo?n.pc(16,15,n.pc(17,17,null==t.totalInfo?null:t.totalInfo.totalAmountBillable)):"0.00"," ",t.wsCurrency,""),n.Cb(8),n.bd(" ",n.pc(24,19,"REPORTS.SHARED.EXPORT_LABEL")," "))},directives:[r.a,o.a,a.a,c.a],pipes:[l.e,u.a,d.a],encapsulation:2}),e})()},cGux:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("XNiG");class s{constructor(e){this.onChange=new n.a,this.map=e||{}}set(e,t){this.map[e]=t,this.onChange.next(e)}get(e){return this.map[e]}remove(e){delete this.map[e],this.onChange.next(e)}count(e){let t=0;if(!this.map)return t;if(e)e.forEach(e=>{t+=this.map[e]});else for(const i in this.map)t+=this.map[i];return t}reset(){this.map={}}}},cpn4:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("lGQG"),s=i("z6cu"),r=i("Ymxs");class o{constructor(e){this._url=e&&e.url,this._name=e&&e.name}get name(){return this._name}set name(e){this._name=e}get url(){return this._url}set url(e){this._url=e}}var a=i("lJxs"),c=i("vkgz"),l=i("JIr8"),u=i("1Tmk"),d=i("uNKk"),h=i("fkOE"),p=i("fXoL"),b=i("tk/3"),f=i("sYmb");let m=(()=>{class e{constructor(e,t,i,n,s){this.http=e,this.toaster=t,this.authService=i,this.workspaceService=n,this.translateService=s}uploadFile(e,t){return this.http.post(`/file/${t}/`,e).pipe(Object(a.a)(e=>new o(e)),Object(c.a)(e=>{const t=this.translateService.instant("SERVICES.FILE.UPLOAD.COMPLETE_MESSAGE",{fileName:e.name});this.toaster.pop("success",t)},e=>{var t;400===e.status?this.toaster.pop("error",this.translateService.instant("SERVICES.FILE.UPLOAD.ERROR_MESSAGE"),(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.FILE.UPLOAD.ERROR_MESSAGE")):this.toaster.pop("error",this.translateService.instant("SERVICES.FILE.UPLOAD.ERROR_MESSAGE"))}))}uploadCsvFile(e,t,i){return this.http.post(`${h.d}/workspaces/${t}/import-data/upload`,e).pipe(Object(a.a)(e=>(e.name=i,new d.a(e))),Object(c.a)(e=>this.toaster.pop("success",this.translateService.instant("SERVICES.FILE.UPLOAD.COMPLETE_MESSAGE",{fileName:e.name})),e=>{var t,i,n;(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.importResponseCode)>=500&&(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.importResponseCode)<600||this.toaster.pop("error",(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message)||this.translateService.instant("SERVICES.FILE.UPLOAD.ERROR_MESSAGE"))}))}importCsv(e,t){return this.http.post(`${h.d}/workspaces/${t}/import-data/import`,{importDataId:e}).pipe(Object(c.a)(e=>{},e=>{var t,i,n;"REQUEST_TIMEOUT"===(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)?this.toaster.pop("warning",this.translateService.instant("SERVICES.FILE.IN_PROGRESS_MESSAGE")):400==(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.importResponseCode)?this.toaster.pop("error",this.translateService.instant("SERVICES.FILE.IN_PROGRESS_MESSAGE")):this.toaster.pop("error",(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message)||this.translateService.instant("SERVICES.FILE.IMPORT.ERROR_MESSAGE"))}))}checkMissingUsers(e,t){return this.http.get(`${h.d}/workspaces/${t}/import-data/${e}/check-users`).pipe(Object(a.a)(e=>e.workspaceNonMembers||[]),Object(c.a)(e=>{},e=>{var t;this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.VALIDATE.ERROR_MESSAGE"))}))}isImportInProgress(e){return this.http.get(`${h.d}/workspaces/${e}/import-data/in-progress`).pipe(Object(l.a)(e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||"Validation failed"),Object(s.a)(e)}))}}return e.\u0275fac=function(t){return new(t||e)(p.fc(b.c),p.fc(r.a),p.fc(n.a),p.fc(u.a),p.fc(f.f))},e.\u0275prov=p.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},dRxX:function(e,t,i){"use strict";i.d(t,"b",(function(){return R})),i.d(t,"a",(function(){return L}));var n=i("fXoL"),s=i("rsZi"),r=i("EcM4"),o=i("ofXK"),a=i("3Pt+"),c=i("sYmb");function l(e,t){1&e&&n.uc(0,0,["*ngTemplateOutlet","selectAllDivTemplate"])}function u(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",17),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.changeSort(t.SortColumn.DATE)})),n.Zc(1),n.oc(2,"translate"),n.Wb()}if(2&e){const e=n.nc(2);n.Hb("cl-up",e.sortColumn===e.SortColumn.DATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DATE&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.bd(" ",n.pc(2,5,"GLOBAL.DATE_LABEL")," ")}}function d(e,t){1&e&&n.uc(0,1,["*ngTemplateOutlet","bulkButtons"])}function h(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"th",4),n.Xb(2,"div",5),n.Xc(3,l,1,0,void 0,6),n.Xc(4,u,3,7,"a",7),n.Xc(5,d,1,0,void 0,6),n.Wb(),n.Wb(),n.Xb(6,"th",8),n.Xb(7,"div",9),n.Xb(8,"a",10),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.PROJECT)})),n.Xb(9,"span"),n.Zc(10),n.oc(11,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(12,"th",8),n.Xb(13,"div",9),n.Xb(14,"a",11),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.CATEGORY)})),n.Zc(15),n.oc(16,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Xb(17,"th",8),n.Xb(18,"div",9),n.Xb(19,"a",11),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.USER)})),n.Zc(20),n.oc(21,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Xb(22,"th",12),n.Xb(23,"div",9),n.Xb(24,"div",13),n.Zc(25),n.oc(26,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Sb(27,"th"),n.Sb(28,"th"),n.Sb(29,"th"),n.Xb(30,"th",14),n.Xb(31,"a",15),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.AMOUNT)})),n.Zc(32),n.oc(33,"translate"),n.Wb(),n.Wb(),n.Xb(34,"th",12),n.Xb(35,"div",16),n.Zc(36),n.oc(37,"translate"),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc(),t=n.Lc(2),i=n.Lc(6);n.Cb(2),n.Hb("cl-flex-wrap",e.bulkEditDataService.isSelectedAllGlobally),n.Cb(1),n.wc("ngTemplateOutlet",t),n.Cb(1),n.wc("ngIf",!e.numberOfSelected||0===e.numberOfSelected),n.Cb(1),n.wc("ngTemplateOutlet",i),n.Cb(3),n.Hb("cl-sort-by",!e.numberOfSelected||0===e.numberOfSelected)("pointerevent",e.numberOfSelected||0!=e.numberOfSelected)("cl-up",e.sortColumn===e.SortColumn.PROJECT&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.PROJECT&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.Hb("cl-invisible",e.numberOfSelected||0!=e.numberOfSelected),n.Cb(1),n.bd(" ",n.pc(11,33,"GLOBAL.PROJECT_LABEL")," "),n.Cb(4),n.Hb("cl-up",e.sortColumn===e.SortColumn.CATEGORY&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.CATEGORY&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.bd(" ",n.pc(16,35,"WORKSPACE.SETTINGS.CATEGORY_LABEL")," "),n.Cb(4),n.Hb("cl-up",e.sortColumn===e.SortColumn.USER&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.USER&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.bd(" ",n.pc(21,37,"GLOBAL.USER_LABEL")," "),n.Cb(5),n.ad(n.pc(26,39,"GLOBAL.NOTE_LABEL")),n.Cb(6),n.Hb("cl-up",e.sortColumn===e.SortColumn.AMOUNT&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.AMOUNT&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.ad(n.pc(33,41,"GLOBAL.AMOUNT_LABEL")),n.Cb(4),n.ad(n.pc(37,43,"GLOBAL.EDIT_LABEL"))}}function p(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",19),n.Xb(1,"input",20),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).toggleSelectAll(t)})),n.Wb(),n.Sb(2,"label",21),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("indeterminate",e.numberOfSelected>0&&e.numberOfSelected<e.numberOfAvailableEntries)("ngModel",e.isSelectedAllAvailable)}}function b(e,t){if(1&e&&n.Xc(0,p,3,2,"div",18),2&e){const e=n.nc();n.wc("ngIf",e.numberOfAvailableEntries)}}function f(e,t){1&e&&n.Tb(0)}function m(e,t){1&e&&n.Tb(0)}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"th",22),n.Xb(1,"div",23),n.Xc(2,f,1,0,"ng-container",6),n.Xb(3,"div",24),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xc(6,m,1,0,"ng-container",6),n.Xb(7,"a",25),n.jc("click",(function(){return n.Oc(e),n.nc().expandAll()})),n.Xb(8,"span",26),n.Sb(9,"img",27),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(2),i=n.Lc(6);n.Cb(2),n.wc("ngTemplateOutlet",t),n.Cb(2),n.bd(" ",n.pc(5,4,"GLOBAL.DATE_LABEL"),""),n.Cb(2),n.wc("ngTemplateOutlet",i),n.Cb(3),n.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc)}}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",36),n.jc("click",(function(){return n.Oc(e),n.nc(4).markAs(!1)})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.Cb(1),n.ad(n.pc(2,1,"REPORTS.DETAILED_REPORT.MARK_UNINVOICED_BTN")))}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",36),n.jc("click",(function(){return n.Oc(e),n.nc(4).markAs(!0)})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.Cb(1),n.ad(n.pc(2,1,"REPORTS.DETAILED_REPORT.MARK_INVOICED_BTN")))}function E(e,t){if(1&e&&(n.Xb(0,"span",33),n.Xc(1,v,3,3,"a",34),n.Xc(2,C,3,3,"ng-template",null,35,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",!t.bulkEditDataService.isSelectedAllGlobally&&t.areAllCheckedEntriesInvoiced)("ngIfElse",e)}}const w=function(e){return{value:e}};function S(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.oc(3,"translate"),n.Xb(4,"a",36),n.jc("click",(function(){n.Oc(e);const t=n.nc(4);return t.bulkEditDataService.selectAllGlobally(!1),t.toggleSelectAll(!1)})),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Ub()}if(2&e){const e=n.nc(4);n.Cb(1),n.bd(" ",e.isAdminOrOwner?n.qc(2,2,"REPORTS.EXPENSE_DETAILED_REPORT.ALL_SELECTED_INFO_WITH_COUNT",n.Bc(9,w,e.entriesOnOtherPages+e.numberOfEntries)):n.pc(3,5,"REPORTS.EXPENSE_DETAILED_REPORT.ALL_SELECTED_INFO"),"\xa0 "),n.Cb(4),n.bd(" ",n.pc(6,7,"REPORTS.DETAILED_REPORT.CLEAR_SECTION_LABEL")," ")}}const y=function(e){return{count:e}};function O(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e){const e=n.nc(5);n.Cb(1),n.bd(" ",n.qc(2,1,"REPORTS.EXPENSE_DETAILED_REPORT.SELECT_ALL_WITH_COUNT_TEXT",n.Bc(4,y,e.entriesOnOtherPages+e.numberOfEntries))," ")}}function A(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"REPORTS.EXPENSE_DETAILED_REPORT.SELECT_ALL_ENTRIES_TEXT")," "))}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",36),n.jc("click",(function(){return n.Oc(e),n.nc(4).bulkEditDataService.selectAllGlobally(!0)})),n.Xc(1,O,3,6,"ng-container",28),n.Xc(2,A,3,3,"ng-container",28),n.Wb()}if(2&e){const e=n.nc(4);n.Cb(1),n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner)}}function T(e,t){if(1&e&&(n.Xb(0,"span",37),n.Xc(1,S,7,11,"ng-container",0),n.Xc(2,k,3,2,"ng-template",null,38,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",t.bulkEditDataService.isSelectedAllGlobally)("ngIfElse",e)}}function D(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xc(1,E,4,2,"span",29),n.Xb(2,"span",30),n.Xb(3,"a",31),n.jc("click",(function(){return n.Oc(e),n.nc(2).onBulkDelete()})),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Xc(6,T,4,2,"span",32),n.Ub()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",e.isAdminOrOwner&&e.invoicingEnabled),n.Cb(3),n.ad(n.pc(5,3,"GLOBAL.DELETE_BTN")),n.Cb(2),n.wc("ngIf",e.isSelectedAllAvailable&&e.entriesOnOtherPages||e.bulkEditDataService.isSelectedAllGlobally)}}function I(e,t){if(1&e&&n.Xc(0,D,7,5,"ng-container",28),2&e){const e=n.nc();n.wc("ngIf",e.numberOfSelected>0||e.bulkEditDataService.isSelectedAllGlobally)}}const _=["*","*"];var R=function(e){return e.DATE="DATE",e.PROJECT="PROJECT",e.CATEGORY="CATEGORY",e.USER="USER",e.AMOUNT="AMOUNT",e}({});let L=(()=>{class e{constructor(e,t){this.bulkEditDataService=e,this.cd=t,this.SortOrder=s.a,this.SortColumn=R,this.isExpandAll=!1,this.onChange=new n.n,this.onSelectAllChange=new n.n,this.onExpandAll=new n.n,this.onMarkAs=new n.n,this.bulkDelete=new n.n}set numberOfEntries(e){this._numberOfEntries=e,this.bulkEditDataService.selectAllGlobally(!1)}get numberOfEntries(){return this._numberOfEntries}set numberOfSelected(e){this._numberOfSelected=e,this.bulkEditDataService.selectAllGlobally(!1)}get numberOfSelected(){return this._numberOfSelected}ngOnInit(){}get isSelectedAllAvailable(){return this.numberOfSelected===this.numberOfAvailableEntries&&this.numberOfSelected>0}changeSort(e){e===this.sortColumn?this.sortOrder=this.sortOrder===s.a.ASCENDING?s.a.DESCENDING:s.a.ASCENDING:(this.sortColumn=e,this.sortOrder=s.a.ASCENDING),this.emit()}emit(){this.onChange.emit({sortOrder:this.sortOrder,sortColumn:this.sortColumn})}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}toggleSelectAll(e){this.onSelectAllChange.emit(e)}onBulkComplete(){this.bulkEditDataService.selectAllGlobally(!1),this.cd.detectChanges()}selectAllGlobally(){this.bulkEditDataService.selectAllGlobally(!0),this.cd.detectChanges()}ngOnDestroy(){}markAs(e){this.onMarkAs.emit(e)}onBulkDelete(){this.bulkDelete.emit()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(r.a),n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["expense-detailed-header"],["","expense-detailed-header",""]],inputs:{isDesktop:"isDesktop",sortOrder:"sortOrder",sortColumn:"sortColumn",isAdminOrOwner:"isAdminOrOwner",invoicingEnabled:"invoicingEnabled",totalExpenses:"totalExpenses",entriesOnOtherPages:"entriesOnOtherPages",numberOfEntries:"numberOfEntries",numberOfSelected:"numberOfSelected",numberOfAvailableEntries:"numberOfAvailableEntries",areAllCheckedEntriesInvoiced:"areAllCheckedEntriesInvoiced"},outputs:{onChange:"onChange",onSelectAllChange:"onSelectAllChange",onExpandAll:"onExpandAll",onMarkAs:"onMarkAs",bulkDelete:"bulkDelete"},ngContentSelectors:_,decls:7,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectAllDivTemplate",""],["mobileTemplate",""],["bulkButtons",""],[1,"cl-h6","cl-mb-0","cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[4,"ngTemplateOutlet"],["class","cl-text-gray-6 cl-sort-by d-none cl-d-lg-inline-flex",3,"cl-up","cl-down","click",4,"ngIf"],[1,"cl-d-none","cl-d-lg-table-cell"],[1,"cl-ml-lg-custom-n2"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex","cl-text-break",3,"click"],[1,"cl-text-gray-6","cl-sort-by","cl-d-none","cl-d-lg-inline-flex",3,"click"],[1,"cl-px-0"],[1,"cl-h5","cl-mb-0","cl-text-gray-6-dark-mode","cl-pl-lg-2"],[1,"cl-pl-0","cl-pr-2","cl-text-right"],[1,"cl-text-gray-6","cl-sort-by",3,"click"],[1,"cl-h5","cl-mb-0","cl-d-block","cl-d-lg-custom-none"],[1,"cl-text-gray-6","cl-sort-by","d-none","cl-d-lg-inline-flex",3,"click"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","toggleAll",1,"cl-custom-control-input",3,"indeterminate","ngModel","ngModelChange"],["for","toggleAll",1,"cl-custom-control-label"],[1,"cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center","cl-flex-wrap"],[1,"cl-h5","cl-mb-0"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],[4,"ngIf"],["class","cl-bulk-edit-link cl-ml-0",4,"ngIf"],[1,"cl-bulk-edit-link"],[3,"click"],["class","cl-bulk-edit-link cl-text-nowrap",4,"ngIf"],[1,"cl-bulk-edit-link","cl-ml-0"],["class","cl-text-nowrap",3,"click",4,"ngIf","ngIfElse"],["markAsUninvoiced",""],[1,"cl-text-nowrap",3,"click"],[1,"cl-bulk-edit-link","cl-text-nowrap"],["selectAllGloballyTemplate",""]],template:function(e,t){if(1&e&&(n.vc(_),n.Xc(0,h,38,45,"ng-container",0),n.Xc(1,b,1,1,"ng-template",null,1,n.Yc),n.Xc(3,g,10,6,"ng-template",null,2,n.Yc),n.Xc(5,I,1,1,"ng-template",null,3,n.Yc)),2&e){const e=n.Lc(4);n.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[o.u,o.B,a.a,a.s,a.v],pipes:[c.e],encapsulation:2}),e})()},dlKe:function(e,t,i){"use strict";i.d(t,"a",(function(){return I})),i.d(t,"b",(function(){return _}));var n=i("fXoL"),s=i("LRne"),r=i("xgIS"),o=i("5+tZ"),a=i("lJxs"),c=i("vkgz"),l=i("pLZG"),u=i("7o/Q"),d=i("D0XW");class h{constructor(e,t){this.period=e,this.scheduler=t}call(e,t){return t.subscribe(new p(e,this.period,this.scheduler))}}class p extends u.a{constructor(e,t,i){super(e),this.period=t,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(b,t,{subscriber:this,period:t}))}_next(e){this.lastValue=e,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function b(e){let{subscriber:t,period:i}=e;t.notifyNext(),this.schedule(e,i)}function f(e,t,i,n){const s=window&&!!window.document&&window.document.documentElement;let r=s&&t?window:i;if(e&&(r=e&&s&&"string"==typeof e?function(e,t,i){return(i?window.document:t).querySelector(e)}(e,i.nativeElement,n):e,!r))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return r}function m(e){return e&&!e.firstChange}const g={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},v={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class C{constructor(e=!0){this.vertical=e,this.propsMap=e?g:v}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function E(e){return["Window","global"].some(t=>Object.prototype.toString.call(e).includes(t))}function w(e,t){return e?t.document.documentElement:null}function S(e,t){const i=function({container:e,isWindow:t,axis:i}){const{offsetHeightKey:n,clientHeightKey:s}=y(i);return O(e,t,n,s)}(t);return t.isWindow?function(e,t,i){const{axis:n,container:s,isWindow:r}=i,{offsetHeightKey:o,clientHeightKey:a}=y(n),c=e+A(w(r,s),n,r),l=O(t.nativeElement,r,o,a);return{height:e,scrolled:c,totalToScroll:function(e,t,i){const n=t.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[n]+A(e,t,i)}(t.nativeElement,n,r)+l,isWindow:r}}(i,e,t):function(e,t,i){const{axis:n,container:s}=i;return{height:e,scrolled:s[n.scrollTopKey()],totalToScroll:s[n.scrollHeightKey()],isWindow:!1}}(i,0,t)}function y(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function O(e,t,i,n){if(isNaN(e[i])){const i=w(t,e);return i?i[n]:0}return e[i]}function A(e,t,i){const n=t.pageYOffsetKey(),s=t.scrollTopKey(),r=t.offsetTopKey();return isNaN(window[n])?w(i,e)[s]:e.ownerDocument?e.ownerDocument.defaultView[n]:e[r]}function k(e,t,i){let n,s;if(e.totalToScroll<=0)return!1;const r=e.isWindow?e.scrolled:e.height+e.scrolled;return i?(n=(e.totalToScroll-r)/e.totalToScroll,s=t.down/10):(n=e.scrolled/(e.scrolled+(e.totalToScroll-r)),s=t.up/10),n<=s}class T{constructor({totalToScroll:e}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=e}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,t){this.updateScrollPosition(e),this.updateTotalToScroll(t)}updateTriggeredFlag(e,t){t?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,t){return t?this.triggered.down===e:this.triggered.up===e}}function D(e){const{scrollDown:t,stats:{scrolled:i}}=e;return{type:t?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:i}}}let I=(()=>{class e{constructor(e,t){this.element=e,this.zone=t,this.scrolled=new n.n,this.scrolledUp=new n.n,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:e,infiniteScrollDisabled:t,infiniteScrollDistance:i}){const n=m(e),s=m(t),r=m(i),o=!s&&!this.infiniteScrollDisabled||s&&!t.currentValue||r;(n||s||r)&&(this.destroyScroller(),o&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(e){const{scrollContainer:t,scrollWindow:i,element:n,fromRoot:u}=e,p=function({windowElement:e,axis:t}){return function(e,t){return Object.assign({},e,{container:e.isWindow||t&&!t.nativeElement?t:t.nativeElement})}({axis:t,isWindow:E(e)},e)}({axis:new C(!e.horizontal),windowElement:f(t,i,n,u)}),b=new T({totalToScroll:S(n,p)}),m={up:e.upDistance,down:e.downDistance};return function(e){let t=Object(r.a)(e.container,"scroll");return e.throttle&&(t=t.pipe(function(e,t=d.a){return i=>i.lift(new h(e,t))}(e.throttle))),t}({container:p.container,throttle:e.throttle}).pipe(Object(o.a)(()=>Object(s.a)(S(n,p))),Object(a.a)(e=>function(e,t,i){const{scrollDown:n,fire:s}=function(e,t,i){const n=function(e,t){return e<t.scrolled}(e,t);return{fire:k(t,i,n),scrollDown:n}}(e,t,i);return{scrollDown:n,fire:s,stats:t}}(b.lastScrollPosition,e,m)),Object(c.a)(({stats:e})=>b.updateScroll(e.scrolled,e.totalToScroll)),Object(l.a)(({fire:t,scrollDown:i,stats:{totalToScroll:n}})=>function(e,t,i){return!(!e||!t)||!(i||!t)}(e.alwaysCallback,t,b.isTriggeredScroll(n,i))),Object(c.a)(({scrollDown:e,stats:{totalToScroll:t}})=>{b.updateTriggeredFlag(t,e)}),Object(a.a)(D))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(e=>this.zone.run(()=>this.handleOnScroll(e)))})}handleOnScroll({type:e,payload:t}){switch(e){case"[NGX_ISE] DOWN":return this.scrolled.emit(t);case"[NGX_ISE] UP":return this.scrolledUp.emit(t);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.l),n.Rb(n.z))},e.\u0275dir=n.Mb({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[n.Ab]}),e})(),_=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})()},ds6q:function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=i("Q1FS"),r=i("FWf1"),o=i("zB/H"),a=i("Mxlh"),c=i("FiyT"),l=i("p//D"),u=function(e){function t(t){var i=e.call(this,t)||this;return i.destination=t,i}return n(t,e),t}(r.Subscriber);t.SubjectSubscriber=u;var d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype[l.rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,i=t.length,n=t.slice(),s=0;s<i;s++)n[s].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,i=t.length,n=t.slice(),s=0;s<i;s++)n[s].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,i=e.slice(),n=0;n<t;n++)i[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):this.isStopped?(e.complete(),o.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new s.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(s.Observable);t.Subject=d;var h=function(e){function t(t,i){var n=e.call(this)||this;return n.destination=t,n.source=i,n}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.Subscription.EMPTY},t}(d);t.AnonymousSubject=h},e0xV:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("XNiG"),r=i("Kj3r"),o=i("/uUt"),a=i("pLZG"),c=i("1G5W"),l=i("3Pt+"),u=i("ofXK"),d=i("sYmb");const h=["searchInput"];function p(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",3),n.jc("click",(function(){return n.Oc(e),n.nc().clear()})),n.oc(1,"translate"),n.Sb(2,"img",4),n.Wb()}2&e&&n.xc("title",n.pc(1,1,"SHARED_MODULES.CUSTOM_FIELD.CLEAR_LABEL"))}const b=function(e){return{"cl-input-has-clear":e}};let f=(()=>{class e{constructor(){this.search="",this.placeholder="GLOBAL.SEARCH_PLACEHOLDER",this.autofocus=!0,this.minimumLength=0,this.onSearchChange=new n.n,this.searchChange$=new s.a,this.unsubscribe$=new s.a}ngOnInit(){this.subscribe(),this.backupValue=this.search}ngAfterViewInit(){this.autofocus&&this.setFocus()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}subscribe(){this.debounceTime&&this.searchChange$.pipe(Object(r.a)(this.debounceTime),Object(o.a)(),Object(a.a)(()=>!this.isCleared),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.search=e,this.search&&this.minimumLength&&this.search.length<this.minimumLength||this.emit()})}setFocus(){this.searchInput&&this.searchInput.nativeElement.focus()}onModelChange(){this.debounceTime?this.searchChange$.next(this.search):this.emit(),this.isCleared=!1}clear(){this.search="",this.emit(),this.setFocus(),this.isCleared=!0}emit(){this.backupValue!==this.search&&(this.onSearchChange.emit(this.search),this.backupValue=this.search)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["input-search"]],viewQuery:function(e,t){var i;1&e&&n.gd(h,!0),2&e&&n.Kc(i=n.kc())&&(t.searchInput=i.first)},inputs:{search:"search",placeholder:"placeholder",debounceTime:"debounceTime",autofocus:"autofocus",minimumLength:"minimumLength"},outputs:{onSearchChange:"onSearchChange"},decls:4,vars:8,consts:[["type","text","tabindex","0","autocomplete","off","autofocus","",1,"cl-form-control",3,"ngModel","ngClass","placeholder","ngModelChange"],["searchInput",""],["class","cl-clear-input","doNotCloseDropdown","",3,"title","click",4,"ngIf"],["doNotCloseDropdown","",1,"cl-clear-input",3,"title","click"],["src","assets/images/ui-icons/close.svg","doNotCloseDropdown",""]],template:function(e,t){1&e&&(n.Xb(0,"input",0,1),n.jc("ngModelChange",(function(e){return t.search=e}))("ngModelChange",(function(){return t.onModelChange()})),n.oc(2,"translate"),n.Wb(),n.Xc(3,p,3,3,"a",2)),2&e&&(n.wc("ngModel",t.search)("ngClass",n.Bc(6,b,t.search))("placeholder",n.pc(2,4,t.placeholder)),n.Cb(3),n.wc("ngIf",t.search))},directives:[l.c,l.s,l.v,u.r,u.u],pipes:[d.e],encapsulation:2,changeDetection:0}),e})()},eBys:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("wd/R"),s=i("hV/V"),r=i("fXoL"),o=i("sYmb");let a=(()=>{class e{constructor(e,t){this.translate=e,this.translationStore=t}transform(e,t,i,s=!1){let r=n(e);r.locale(this.translationStore.getCurrentLang()),t&&(r=n.tz(r,t));const o=n();if(!s&&r.isSame(o,"day"))return this.translate.instant("GLOBAL.TODAY_LABEL");const a=n().subtract(1,"day");return!s&&r.isSame(a,"day")?this.translate.instant("GLOBAL.YESTERDAY_LABEL"):r.format("ddd, MMM D")}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(o.f),r.Rb(s.a))},e.\u0275pipe=r.Qb({name:"dateFormat",type:e,pure:!0}),e})()},eGqU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("QKuU"),s=i("fXoL");let r=(()=>{class e{constructor(e,t,i){this.templateRef=e,this.viewContainer=t,this.dropdownWrapper=i,this.subscribtion=this.dropdownWrapper.clicked$.subscribe(e=>{e?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}ngOnDestroy(){this.subscribtion&&this.subscribtion.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.M),s.Rb(s.P),s.Rb(n.a))},e.\u0275dir=s.Mb({type:e,selectors:[["","dropdownContent",""]]}),e})()},eHjp:function(e,t,i){var n,s;n=[i("wd/R"),i("EVdn")],void 0===(s=(function(e,t){return t.fn||(t.fn={}),"function"!=typeof e&&e.default&&(e=e.default),function(e,t){var i=function(i,n,s){var r,o,a;if(this.parentEl="body",this.element=t(i),this.startDate=e().startOf("day"),this.endDate=e().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=e().subtract(100,"year").format("YYYY"),this.maxYear=e().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:e.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e.weekdaysMin(),monthNames:e.monthsShort(),firstDay:e.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof n&&null!==n||(n={}),"string"==typeof(n=t.extend(this.element.data(),n)).template||n.template instanceof t||(n.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div></div>'),this.parentEl=n.parentEl&&t(n.parentEl).length?t(n.parentEl):t(this.parentEl),this.container=t(n.template).appendTo(this.parentEl),"object"==typeof n.locale&&("string"==typeof n.locale.direction&&(this.locale.direction=n.locale.direction),"string"==typeof n.locale.format&&(this.locale.format=n.locale.format),"string"==typeof n.locale.separator&&(this.locale.separator=n.locale.separator),"object"==typeof n.locale.daysOfWeek&&(this.locale.daysOfWeek=n.locale.daysOfWeek.slice()),"object"==typeof n.locale.monthNames&&(this.locale.monthNames=n.locale.monthNames.slice()),"number"==typeof n.locale.firstDay&&(this.locale.firstDay=n.locale.firstDay),"string"==typeof n.locale.applyLabel&&(this.locale.applyLabel=n.locale.applyLabel),"string"==typeof n.locale.cancelLabel&&(this.locale.cancelLabel=n.locale.cancelLabel),"string"==typeof n.locale.weekLabel&&(this.locale.weekLabel=n.locale.weekLabel),"string"==typeof n.locale.customRangeLabel&&((d=document.createElement("textarea")).innerHTML=n.locale.customRangeLabel,this.locale.customRangeLabel=d.value)),this.container.addClass(this.locale.direction),"string"==typeof n.startDate&&(this.startDate=e(n.startDate,this.locale.format)),"string"==typeof n.endDate&&(this.endDate=e(n.endDate,this.locale.format)),"string"==typeof n.minDate&&(this.minDate=e(n.minDate,this.locale.format)),"string"==typeof n.maxDate&&(this.maxDate=e(n.maxDate,this.locale.format)),"object"==typeof n.startDate&&(this.startDate=e(n.startDate)),"object"==typeof n.endDate&&(this.endDate=e(n.endDate)),"object"==typeof n.minDate&&(this.minDate=e(n.minDate)),"object"==typeof n.maxDate&&(this.maxDate=e(n.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof n.applyButtonClasses&&(this.applyButtonClasses=n.applyButtonClasses),"string"==typeof n.applyClass&&(this.applyButtonClasses=n.applyClass),"string"==typeof n.cancelButtonClasses&&(this.cancelButtonClasses=n.cancelButtonClasses),"string"==typeof n.cancelClass&&(this.cancelButtonClasses=n.cancelClass),"object"==typeof n.maxSpan&&(this.maxSpan=n.maxSpan),"object"==typeof n.dateLimit&&(this.maxSpan=n.dateLimit),"string"==typeof n.opens&&(this.opens=n.opens),"string"==typeof n.drops&&(this.drops=n.drops),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"boolean"==typeof n.showISOWeekNumbers&&(this.showISOWeekNumbers=n.showISOWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses.join(" ")),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns),"number"==typeof n.minYear&&(this.minYear=n.minYear),"number"==typeof n.maxYear&&(this.maxYear=n.maxYear),"boolean"==typeof n.showCustomRangeLabel&&(this.showCustomRangeLabel=n.showCustomRangeLabel),"boolean"==typeof n.singleDatePicker&&(this.singleDatePicker=n.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof n.timePicker&&(this.timePicker=n.timePicker),"boolean"==typeof n.timePickerSeconds&&(this.timePickerSeconds=n.timePickerSeconds),"number"==typeof n.timePickerIncrement&&(this.timePickerIncrement=n.timePickerIncrement),"boolean"==typeof n.timePicker24Hour&&(this.timePicker24Hour=n.timePicker24Hour),"boolean"==typeof n.autoApply&&(this.autoApply=n.autoApply),"boolean"==typeof n.autoUpdateInput&&(this.autoUpdateInput=n.autoUpdateInput),"boolean"==typeof n.linkedCalendars&&(this.linkedCalendars=n.linkedCalendars),"function"==typeof n.isInvalidDate&&(this.isInvalidDate=n.isInvalidDate),"function"==typeof n.isCustomDate&&(this.isCustomDate=n.isCustomDate),"boolean"==typeof n.alwaysShowCalendars&&(this.alwaysShowCalendars=n.alwaysShowCalendars),0!=this.locale.firstDay)for(var c=this.locale.firstDay;c>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),c--;if(void 0===n.startDate&&void 0===n.endDate&&t(this.element).is(":text")){var l=t(this.element).val(),u=l.split(this.locale.separator);r=o=null,2==u.length?(r=e(u[0],this.locale.format),o=e(u[1],this.locale.format)):this.singleDatePicker&&""!==l&&(r=e(l,this.locale.format),o=e(l,this.locale.format)),null!==r&&null!==o&&(this.setStartDate(r),this.setEndDate(o))}if("object"==typeof n.ranges){for(a in n.ranges){r="string"==typeof n.ranges[a][0]?e(n.ranges[a][0],this.locale.format):e(n.ranges[a][0]),o="string"==typeof n.ranges[a][1]?e(n.ranges[a][1],this.locale.format):e(n.ranges[a][1]),this.minDate&&r.isBefore(this.minDate)&&(r=this.minDate.clone());var d,h=this.maxDate;this.maxSpan&&h&&r.clone().add(this.maxSpan).isAfter(h)&&(h=r.clone().add(this.maxSpan)),h&&o.isAfter(h)&&(o=h.clone()),this.minDate&&o.isBefore(this.minDate,this.timepicker?"minute":"day")||h&&r.isAfter(h,this.timepicker?"minute":"day")||((d=document.createElement("textarea")).innerHTML=a,this.ranges[d.value]=[r,o])}var p="<ul>";for(a in this.ranges)p+='<li data-range-key="'+a+'">'+a+"</li>";this.showCustomRangeLabel&&(p+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),p+="</ul>",this.container.find(".ranges").prepend(p)}"function"==typeof s&&(this.callback=s),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),"object"==typeof n.ranges&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),this.timePicker||this.container.addClass("auto-apply")),(void 0===n.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",t.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",t.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.elementChanged,this),"keydown.daterangepicker":t.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",t.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",t.proxy(this.toggle,this))),this.updateElement()};return i.prototype={constructor:i,setStartDate:function(t){"string"==typeof t&&(this.startDate=e(t,this.locale.format)),"object"==typeof t&&(this.startDate=e(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(t){"string"==typeof t&&(this.endDate=e(t,this.locale.format)),"object"==typeof t&&(this.endDate=e(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.startDate.clone().date(2).add(1,"month"):this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){var e,t,i,n;this.timePicker&&(this.endDate?(e=parseInt(this.container.find(".left .hourselect").val(),10),t=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(t)&&(t=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(n=this.container.find(".left .ampmselect").val())&&e<12&&(e+=12),"AM"===n&&12===e&&(e=0))):(e=parseInt(this.container.find(".right .hourselect").val(),10),t=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(t)&&(t=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(n=this.container.find(".right .ampmselect").val())&&e<12&&(e+=12),"AM"===n&&12===e&&(e=0))),this.leftCalendar.month.hour(e).minute(t).second(i),this.rightCalendar.month.hour(e).minute(t).second(i)),this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(i){var n,s=(n="left"==i?this.leftCalendar:this.rightCalendar).month.month(),r=n.month.year(),o=n.month.hour(),a=n.month.minute(),c=n.month.second(),l=e([r,s]).daysInMonth(),u=e([r,s,1]),d=e([r,s,l]),h=e(u).subtract(1,"month").month(),p=e(u).subtract(1,"month").year(),b=e([p,h]).daysInMonth(),f=u.day();(n=[]).firstDay=u,n.lastDay=d;for(var m=0;m<6;m++)n[m]=[];var g=b-f+this.locale.firstDay+1;g>b&&(g-=7),f==this.locale.firstDay&&(g=b-6);for(var v=e([p,h,g,12,a,c]),C=(m=0,0),E=0;m<42;m++,C++,v=e(v).add(24,"hour"))m>0&&C%7==0&&(C=0,E++),n[E][C]=v.clone().hour(o).minute(a).second(c),v.hour(12),this.minDate&&n[E][C].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&n[E][C].isBefore(this.minDate)&&"left"==i&&(n[E][C]=this.minDate.clone()),this.maxDate&&n[E][C].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&n[E][C].isAfter(this.maxDate)&&"right"==i&&(n[E][C]=this.maxDate.clone());"left"==i?this.leftCalendar.calendar=n:this.rightCalendar.calendar=n;var w="left"==i?this.minDate:this.startDate,S=this.maxDate,y='<table class="table-condensed">';y+="<thead>",y+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(y+="<th></th>"),w&&!w.isBefore(n.firstDay)||this.linkedCalendars&&"left"!=i?y+="<th></th>":y+='<th class="prev available"><span></span></th>';var O=this.locale.monthNames[n[1][1].month()]+n[1][1].format(" YYYY");if(this.showDropdowns){for(var A=n[1][1].month(),k=n[1][1].year(),T=S&&S.year()||this.maxYear,D=w&&w.year()||this.minYear,I=k==D,_=k==T,R='<select class="monthselect">',L=0;L<12;L++)(!I||w&&L>=w.month())&&(!_||S&&L<=S.month())?R+="<option value='"+L+"'"+(L===A?" selected='selected'":"")+">"+this.locale.monthNames[L]+"</option>":R+="<option value='"+L+"'"+(L===A?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[L]+"</option>";R+="</select>";for(var x='<select class="yearselect">',P=D;P<=T;P++)x+='<option value="'+P+'"'+(P===k?' selected="selected"':"")+">"+P+"</option>";O=R+(x+="</select>")}if(y+='<th colspan="5" class="month">'+O+"</th>",S&&!S.isAfter(n.lastDay)||this.linkedCalendars&&"right"!=i&&!this.singleDatePicker?y+="<th></th>":y+='<th class="next available"><span></span></th>',y+="</tr>",y+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(y+='<th class="week">'+this.locale.weekLabel+"</th>"),t.each(this.locale.daysOfWeek,(function(e,t){y+="<th>"+t+"</th>"})),y+="</tr>",y+="</thead>",y+="<tbody>",null==this.endDate&&this.maxSpan){var j=this.startDate.clone().add(this.maxSpan).endOf("day");S&&!j.isBefore(S)||(S=j)}for(E=0;E<6;E++){for(y+="<tr>",this.showWeekNumbers?y+='<td class="week">'+n[E][0].week()+"</td>":this.showISOWeekNumbers&&(y+='<td class="week">'+n[E][0].isoWeek()+"</td>"),C=0;C<7;C++){var M=[];n[E][C].isSame(new Date,"day")&&M.push("today"),n[E][C].isoWeekday()>5&&M.push("weekend"),n[E][C].month()!=n[1][1].month()&&M.push("off","ends"),this.minDate&&n[E][C].isBefore(this.minDate,"day")&&M.push("off","disabled"),S&&n[E][C].isAfter(S,"day")&&M.push("off","disabled"),this.isInvalidDate(n[E][C])&&M.push("off","disabled"),n[E][C].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&M.push("active","start-date"),null!=this.endDate&&n[E][C].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&M.push("active","end-date"),null!=this.endDate&&n[E][C]>this.startDate&&n[E][C]<this.endDate&&M.push("in-range");var X=this.isCustomDate(n[E][C]);!1!==X&&("string"==typeof X?M.push(X):Array.prototype.push.apply(M,X));var F="",W=!1;for(m=0;m<M.length;m++)F+=M[m]+" ","disabled"==M[m]&&(W=!0);W||(F+="available"),y+='<td class="'+F.replace(/^\s+|\s+$/g,"")+'" data-title="r'+E+"c"+C+'">'+n[E][C].date()+"</td>"}y+="</tr>"}y+="</tbody>",y+="</table>",this.container.find(".drp-calendar."+i+" .calendar-table").html(y)},renderTimePicker:function(e){if("right"!=e||this.endDate){var t,i,n,s=this.maxDate;if(!this.maxSpan||this.maxDate&&!this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate)||(s=this.startDate.clone().add(this.maxSpan)),"left"==e)i=this.startDate.clone(),n=this.minDate;else if("right"==e){i=this.endDate.clone(),n=this.startDate;var r=this.container.find(".drp-calendar.right .calendar-time");if(""!=r.html()&&(i.hour(isNaN(i.hour())?r.find(".hourselect option:selected").val():i.hour()),i.minute(isNaN(i.minute())?r.find(".minuteselect option:selected").val():i.minute()),i.second(isNaN(i.second())?r.find(".secondselect option:selected").val():i.second()),!this.timePicker24Hour)){var o=r.find(".ampmselect option:selected").val();"PM"===o&&i.hour()<12&&i.hour(i.hour()+12),"AM"===o&&12===i.hour()&&i.hour(0)}i.isBefore(this.startDate)&&(i=this.startDate.clone()),s&&i.isAfter(s)&&(i=s.clone())}t='<select class="hourselect">';for(var a=this.timePicker24Hour?23:12,c=this.timePicker24Hour?0:1;c<=a;c++){var l=c;this.timePicker24Hour||(l=i.hour()>=12?12==c?12:c+12:12==c?0:c);var u=i.clone().hour(l),d=!1;n&&u.minute(59).isBefore(n)&&(d=!0),s&&u.minute(0).isAfter(s)&&(d=!0),l!=i.hour()||d?t+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":t+='<option value="'+c+'" selected="selected">'+c+"</option>"}for(t+="</select> ",t+=': <select class="minuteselect">',c=0;c<60;c+=this.timePickerIncrement){var h=c<10?"0"+c:c;u=i.clone().minute(c),d=!1,n&&u.second(59).isBefore(n)&&(d=!0),s&&u.second(0).isAfter(s)&&(d=!0),i.minute()!=c||d?t+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+c+'">'+h+"</option>":t+='<option value="'+c+'" selected="selected">'+h+"</option>"}if(t+="</select> ",this.timePickerSeconds){for(t+=': <select class="secondselect">',c=0;c<60;c++)h=c<10?"0"+c:c,u=i.clone().second(c),d=!1,n&&u.isBefore(n)&&(d=!0),s&&u.isAfter(s)&&(d=!0),i.second()!=c||d?t+=d?'<option value="'+c+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+c+'">'+h+"</option>":t+='<option value="'+c+'" selected="selected">'+h+"</option>";t+="</select> "}if(!this.timePicker24Hour){t+='<select class="ampmselect">';var p="",b="";n&&i.clone().hour(12).minute(0).second(0).isBefore(n)&&(p=' disabled="disabled" class="disabled"'),s&&i.clone().hour(0).minute(0).second(0).isAfter(s)&&(b=' disabled="disabled" class="disabled"'),i.hour()>=12?t+='<option value="AM"'+p+'>AM</option><option value="PM" selected="selected"'+b+">PM</option>":t+='<option value="AM" selected="selected"'+p+'>AM</option><option value="PM"'+b+">PM</option>",t+="</select>"}this.container.find(".drp-calendar."+e+" .calendar-time").html(t)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},move:function(){var e,i={top:0,left:0},n=t(window).width();this.parentEl.is("body")||(i={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},n=this.parentEl[0].clientWidth+this.parentEl.offset().left),e="up"==this.drops?this.element.offset().top-this.container.outerHeight()-i.top:this.element.offset().top+this.element.outerHeight()-i.top,this.container.css({top:0,left:0,right:"auto"});var s=this.container.outerWidth();if(this.container["up"==this.drops?"addClass":"removeClass"]("drop-up"),"left"==this.opens){var r=n-this.element.offset().left-this.element.outerWidth();s+r>t(window).width()?this.container.css({top:e,right:"auto",left:9}):this.container.css({top:e,right:r,left:"auto"})}else if("center"==this.opens)(o=this.element.offset().left-i.left+this.element.outerWidth()/2-s/2)<0?this.container.css({top:e,right:"auto",left:9}):o+s>t(window).width()?this.container.css({top:e,left:"auto",right:0}):this.container.css({top:e,left:o,right:"auto"});else{var o;(o=this.element.offset().left-i.left)+s>t(window).width()?this.container.css({top:e,left:"auto",right:0}):this.container.css({top:e,left:o,right:"auto"})}},show:function(e){this.isShowing||(this._outsideClickProxy=t.proxy((function(e){this.outsideClick(e)}),this),t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),t(window).on("resize.daterangepicker",t.proxy((function(e){this.move(e)}),this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(e){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),t(document).off(".daterangepicker"),t(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(e){this.isShowing?this.hide():this.show()},outsideClick:function(e){var i=t(e.target);"focusin"==e.type||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(e){var t=e.target.getAttribute("data-range-key");if(this.chosenLabel=t,t==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[t];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(e){t(e.target).parents(".drp-calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){t(e.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(e){if(t(e.target).hasClass("available")){var i=t(e.target).attr("data-title"),n=i.substr(1,1),s=i.substr(3,1),r=t(e.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][s]:this.rightCalendar.calendar[n][s],o=this.leftCalendar,a=this.rightCalendar,c=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each((function(e,i){if(!t(i).hasClass("week")){var n=t(i).attr("data-title"),s=n.substr(1,1),l=n.substr(3,1),u=t(i).parents(".drp-calendar").hasClass("left")?o.calendar[s][l]:a.calendar[s][l];u.isAfter(c)&&u.isBefore(r)||u.isSame(r,"day")?t(i).addClass("in-range"):t(i).removeClass("in-range")}}))}},clickDate:function(e){if(t(e.target).hasClass("available")){var i=t(e.target).attr("data-title"),n=i.substr(1,1),s=i.substr(3,1),r=t(e.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[n][s]:this.rightCalendar.calendar[n][s];if(this.endDate||r.isBefore(this.startDate,"day")){if(this.timePicker){var o=parseInt(this.container.find(".left .hourselect").val(),10);this.timePicker24Hour||("PM"===(l=this.container.find(".left .ampmselect").val())&&o<12&&(o+=12),"AM"===l&&12===o&&(o=0));var a=parseInt(this.container.find(".left .minuteselect").val(),10);isNaN(a)&&(a=parseInt(this.container.find(".left .minuteselect option:last").val(),10));var c=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;r=r.clone().hour(o).minute(a).second(c)}this.endDate=null,this.setStartDate(r.clone())}else if(!this.endDate&&r.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{var l;this.timePicker&&(o=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||("PM"===(l=this.container.find(".right .ampmselect").val())&&o<12&&(o+=12),"AM"===l&&12===o&&(o=0)),a=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(a)&&(a=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),c=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,r=r.clone().hour(o).minute(a).second(c)),this.setEndDate(r.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),e.stopPropagation()}},calculateChosenLabel:function(){var e=!0,t=0;for(var i in this.ranges){if(this.timePicker){var n=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm";if(this.startDate.format(n)==this.ranges[i][0].format(n)&&this.endDate.format(n)==this.ranges[i][1].format(n)){e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")){e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").attr("data-range-key");break}t++}e&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):null,this.showCalendars())},clickApply:function(e){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(e){var i=t(e.target).closest(".drp-calendar").hasClass("left"),n=this.container.find(".drp-calendar."+(i?"left":"right")),s=parseInt(n.find(".monthselect").val(),10),r=n.find(".yearselect").val();i||(r<this.startDate.year()||r==this.startDate.year()&&s<this.startDate.month())&&(s=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&s<this.minDate.month())&&(s=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&s>this.maxDate.month())&&(s=this.maxDate.month(),r=this.maxDate.year()),i?(this.leftCalendar.month.month(s).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(s).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(e){var i=t(e.target).closest(".drp-calendar"),n=i.hasClass("left"),s=parseInt(i.find(".hourselect").val(),10),r=parseInt(i.find(".minuteselect").val(),10);isNaN(r)&&(r=parseInt(i.find(".minuteselect option:last").val(),10));var o=this.timePickerSeconds?parseInt(i.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var a=i.find(".ampmselect").val();"PM"===a&&s<12&&(s+=12),"AM"===a&&12===s&&(s=0)}if(n){var c=this.startDate.clone();c.hour(s),c.minute(r),c.second(o),this.setStartDate(c),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==c.format("YYYY-MM-DD")&&this.endDate.isBefore(c)&&this.setEndDate(c.clone())}else if(this.endDate){var l=this.endDate.clone();l.hour(s),l.minute(r),l.second(o),this.setEndDate(l)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.locale.separator),i=null,n=null;2===t.length&&(i=e(t[0],this.locale.format),n=e(t[1],this.locale.format)),(this.singleDatePicker||null===i||null===n)&&(n=i=e(this.element.val(),this.locale.format)),i.isValid()&&n.isValid()&&(this.setStartDate(i),this.setEndDate(n),this.updateView())}},keydown:function(e){9!==e.keyCode&&13!==e.keyCode||this.hide(),27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var e=this.startDate.format(this.locale.format);this.singleDatePicker||(e+=this.locale.separator+this.endDate.format(this.locale.format)),e!==this.element.val()&&this.element.val(e).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},t.fn.daterangepicker=function(e,n){var s=t.extend(!0,{},t.fn.daterangepicker.defaultOptions,e);return this.each((function(){var e=t(this);e.data("daterangepicker")&&e.data("daterangepicker").remove(),e.data("daterangepicker",new i(e,s,n))})),this},i}(e,t)}).apply(t,n))||(e.exports=s)},eLiO:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i){return e&&0!==e.length?(i||(i=e=>e),e.sort((e,n)=>{if(e.isNewlyAdded&&!n.isNewlyAdded)return-1;if(!e.isNewlyAdded&&n.isNewlyAdded)return 1;if("number"==typeof i(e)){if(i(e)>i(n))return"asc"===t?1:-1;if(i(e)<i(n))return"asc"===t?-1:1}else{if(i(e).toLowerCase()>i(n).toLowerCase())return"asc"===t?1:-1;if(i(e).toLowerCase()<i(n).toLowerCase())return"asc"===t?-1:1}return 0})):[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"sort",type:e,pure:!0}),e})()},ePBx:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("XNiG"),s=i("LRne"),r=i("lGQG"),o=i("Oieg"),a=i("Ymxs"),c=i("tk/3"),l=i("1Tmk"),u=i("lJxs"),d=i("vkgz"),h=i("xoOP"),p=i("fXoL"),b=i("tyNb"),f=i("sYmb");let m=(()=>{class e{constructor(e,t,i,s,r,o){this.http=e,this.router=t,this.authService=i,this.workspaceService=s,this.toaster=r,this.translateService=o,this.error=new n.a,this.userGroups=new n.a,this.userGroups$=new n.a,this.updatedUserGroups=new n.a,this.deletedUserFromUserGroup=new n.a}getAllUserGroups(e){const t=e||this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${t}/userGroups/`).subscribe(e=>{this.userGroups.next(e)},e=>{this.error.next(e)})}getAllUserGroupByIds(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${i}/userGroups/userGroupIds`,{userGroupIds:e}).pipe(Object(u.a)(e=>e.map(e=>new o.a(e))))}getAllUserGroupsV1(e,t){const i=e||this.workspaceService.getDefaultWorkspaceId(),n=Object.assign({},t);return Object(h.D)(n,"page-size","pageSize"),this.http.get(`/v1/workspaces/${i}/user-groups/`,{params:n}).pipe(Object(u.a)(e=>e.map(e=>new o.a(e))))}create(e,t){const i=e.trim();if(!i)return this.toaster.pop("error",this.translateService.instant("SERVICES.USER.GROUP.EMPTY_NAME_ERROR_MESSAGE")),Object(s.a)();const n=JSON.stringify({name:i});return this.http.post(`/workspaces/${t}/userGroups/`,n).pipe(Object(u.a)(e=>new o.a(e)),Object(d.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.USER.GROUP.CREATE.SUCCESS_MESSAGE",{groupName:i}))},e=>{this.error.next(e),this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.USER.GROUP.NAME_EXISTS_ERROR_MESSAGE",{groupName:i}))}))}addUserToUserGroup(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n=JSON.stringify({userGroupIds:e,userIds:t});this.http.post(`/workspaces/${i}/userGroups/users/`,n).subscribe(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.USER.GROUP.ADD_TO.SUCCESS_MESSAGE")),this.updatedUserGroups.next(e)},e=>{this.error.next(e)})}removeUserFromUserGroup(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),n={headers:null,body:JSON.stringify({userGroupIds:e,userIds:t})};this.http.delete(`/workspaces/${i}/userGroups/users/`,n).subscribe(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.USER.GROUP.ADD_TO.SUCCESS_MESSAGE")),this.deletedUserFromUserGroup.next(e)},e=>{this.error.next(e)})}update(e){const t=e.name,i=JSON.stringify({name:t});return this.http.put(`/workspaces/${e.workspaceId}/userGroups/${e.id}`,i).pipe(Object(u.a)(e=>new o.a(e)),Object(d.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.USER.GROUP.UPDATE.SUCCESS_MESSAGE",{groupName:t}))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.USER.GROUP.NAME_EXISTS_ERROR_MESSAGE",{groupName:t})),this.error.next(e)}))}delete(e){return this.http.delete(`/workspaces/${e.workspaceId}/userGroups/${e.id}`).pipe(Object(u.a)(e=>new o.a(e)),Object(d.a)(t=>{this.toaster.pop("success",this.translateService.instant("SERVICES.USER.GROUP.DELETE.SUCCESS_MESSAGE",{groupName:e.name}))},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("GLOBAL.DELETE_ERROR_MESSAGE")),this.error.next(e)}))}getUserGroups(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),s=(new n.a,(new c.h).append("projectId",e.projectId||"").append("name",e.name||"").append("sort-column",e.sortColumn||"").append("sort-order",e.sortOrder||"").append("page",e.page||"").append("page-size",e.limit||""));return this.http.get(`/workspaces/${i}/userGroups/full`,{params:s}).pipe(Object(u.a)(e=>(e.groups=e.groups.map(e=>new o.a(e)),this.userGroups$.next(e),e),e=>{this.error.next(e)}))}getUserGroupIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new c.h).append("name",e.name);return this.http.get(`/workspaces/${t}/userGroups/report-filters/ids`,{params:i}).pipe(Object(u.a)(e=>e),Object(d.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.USER.GROUP.GET_IDS.ERROR_MESSAGE"))))}getGroupNamesForUsers(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/userGroups/names`,{ids:e}).pipe(Object(u.a)(e=>e.map(e=>new o.a(e))))}}return e.\u0275fac=function(t){return new(t||e)(p.fc(c.c),p.fc(b.d),p.fc(r.a),p.fc(l.a),p.fc(a.a),p.fc(f.f))},e.\u0275prov=p.Nb({token:e,factory:e.\u0275fac}),e})()},enr5:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("WQ+v"),r=i("qfBg"),o=i("f0Wu"),a=i("5Ra6"),c=i("wd/R"),l=i("XNiG"),u=i("gcYM"),d=i("1G5W"),h=i("B4wx"),p=i("3Pt+");const b=["inputField"];let f=(()=>{class e{constructor(e,t,i){this.timeInputConverterService=e,this.timeZoneConverterService=t,this.userService=i,this.focusOnInput=!1,this.debouncer$=new l.a,this.unsubscribe$=new l.a,this.timeChanged=new n.n,this.focus=new n.n,this.blur=new n.n}set dateTime(e){this._dateTime=e,this._dateTime&&this.initialized&&this.initDateTime()}get dateTime(){return this._dateTime}ngOnInit(){this.timeZone=this.timeZone||this.userService.getTimeZone(),this.formatIs24Hour=(this.timeFormat||this.userService.getTimeFormatForUser())===h.a.HOUR24,this.initDateTime(),this.debouncer$.pipe(Object(u.a)(100),Object(d.a)(this.unsubscribe$)).subscribe(this.arrowPressed.bind(this))}initDateTime(){this.dateTime&&(this.momentTimeDate=o.tz(this.dateTime,this.timeZone).clone(),this.totalTime=o(this.momentTimeDate).format("h:mmA").toString(),this.formatIs24Hour&&(this.totalTime=this.formatTo24Hour(this.totalTime)),this.totalTimeBackup=this.totalTime,this.initialized=!0)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}setFocus(e){this.disableEdit||(this.focus.emit(),this.focusOnInput&&(setTimeout(()=>e.focus(),0),setTimeout(()=>e.select(),0)),this.totalTime=this.totalTime.split(":").join(""))}focusToInput(){this.setFocus(this.inputField.nativeElement)}setTime(e=!0){let t=this.timeInputConverterService.parseInput(this.totalTime.trim().replace(/ /g,""));if(!t||!this.totalTime.trim())return this.totalTime=this.totalTimeBackup,void(e&&this.blur.emit());t.indexOf(":")<0&&(t=t.substring(0,2).concat(":").concat(t.substring(2,4)));const i=o.tz(this.momentTimeDate,this.timeZone).clone();if(i.isValid()){const n=Number(t.split(":")[0]),s=Number(t.split(":")[1]);i.hours(n),i.minutes(s);const r=this.momentTimeDate.minutes(),a=this.momentTimeDate.hours();r===s&&a===n||i.set({second:0,millisecond:0}),this.momentTimeDate=i.clone();let c=o.tz(this.momentTimeDate,this.timeZone).format("h:mmA").toString();this.formatIs24Hour&&(c=this.formatTo24Hour(c)),c!==this.totalTimeBackup&&(this.totalTimeBackup=c,e&&this.emit()),this.totalTime=c}else this.totalTime=this.totalTimeBackup;e&&this.blur.emit()}arrowPressDebounce(e){this.debouncer$.next(e)}arrowPressed(e){let t=this.timeInputConverterService.parseInput(this.totalTime.trim().replace(/ /g,""));if(!t||!this.totalTime.trim())return void(this.totalTime=this.totalTimeBackup);t.indexOf(":")<0&&(t=t.substring(0,2).concat(":").concat(t.substring(2,4)));const i=o.tz(this.momentTimeDate,this.timeZone).clone();i.isValid()&&(i.hours(Number(t.split(":")[0])),i.minutes(Number(t.split(":")[1])),e?i.add(1,"minute"):i.subtract(1,"minute"),this.totalTime=o(i).format("h:mmA").toString(),this.formatIs24Hour&&(this.totalTime=this.formatTo24Hour(this.totalTime)))}emit(){const e=Object(c.utc)(this.momentTimeDate.clone());this.timeChanged.emit(e.toISOString())}formatTo24Hour(e){return o(e,["h:mmA"]).format("HH:mm").toString()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(s.a),n.Rb(a.a),n.Rb(r.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["input-time-ampm"]],viewQuery:function(e,t){var i;1&e&&n.Uc(b,!0),2&e&&n.Kc(i=n.kc())&&(t.inputField=i.first)},inputs:{disableEdit:"disableEdit",focusOnInput:"focusOnInput",removeOpacity:"removeOpacity",timeZone:"timeZone",timeFormat:"timeFormat",dateTime:"dateTime"},outputs:{timeChanged:"timeChanged",focus:"focus",blur:"blur"},decls:2,vars:3,consts:[["autocomplete","off","type","text","tabindex","0","spellcheck","false",1,"cl-form-control","cl-input-time-picker",3,"ngModel","disabled","readOnly","ngModelChange","focus","blur","keydown.arrowup","keydown.arrowdown","keyup.enter"],["inputField",""]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"input",0,1),n.jc("ngModelChange",(function(e){return t.totalTime=e}))("focus",(function(){n.Oc(e);const i=n.Lc(1);return t.setFocus(i)}))("blur",(function(){return t.setTime()}))("keydown.arrowup",(function(){return t.arrowPressDebounce(!0)}))("keydown.arrowdown",(function(){return t.arrowPressDebounce(!1)}))("keyup.enter",(function(){return n.Oc(e),n.Lc(1).blur()})),n.Wb()}2&e&&n.wc("ngModel",t.totalTime)("disabled",!t.removeOpacity&&t.disableEdit)("readOnly",t.removeOpacity)},directives:[p.c,p.s,p.v],styles:[""],changeDetection:0}),e})()},f1uh:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("3Pt+"),r=i("sYmb"),o=function(e){return e.YES="YES",e.NO="NO",e.BOTH="BOTH",e}({});let a=(()=>{class e{constructor(e){this.cd=e,this.value=o.BOTH,this.onChange=new n.n,this.SwitchValue=o}ngOnInit(){this.valueBackup=this.value}ngOnDestroy(){this.emit()}emit(){this.valueBackup!==this.value&&this.onChange.emit(this.value)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-switch"]],inputs:{value:"value"},outputs:{onChange:"onChange"},decls:24,vars:15,consts:[[1,"cl-dropdown-menu"],[1,"cl-scroll-area"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-radio"],["id","switchBoth","name","switchBoth","type","radio",1,"cl-custom-control-input",3,"ngModel","value","ngModelChange"],["for","switchBoth",1,"cl-custom-control-label"],[1,"cl-cut-text"],["id","switchYes","name","switchYes","type","radio",1,"cl-custom-control-input",3,"ngModel","value","ngModelChange"],["for","switchYes",1,"cl-custom-control-label"],["id","switchNo","name","switchNo","type","radio",1,"cl-custom-control-input",3,"ngModel","value","ngModelChange"],["for","switchNo",1,"cl-custom-control-label"],["dropdownClose","","tabindex","0"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xb(4,"input",4),n.jc("ngModelChange",(function(e){return t.value=e})),n.Wb(),n.Xb(5,"label",5),n.Xb(6,"div",6),n.Zc(7),n.oc(8,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(9,"div",2),n.Xb(10,"div",3),n.Xb(11,"input",7),n.jc("ngModelChange",(function(e){return t.value=e})),n.Wb(),n.Xb(12,"label",8),n.Xb(13,"div",6),n.Zc(14),n.oc(15,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(16,"div",2),n.Xb(17,"div",3),n.Xb(18,"input",9),n.jc("ngModelChange",(function(e){return t.value=e})),n.Wb(),n.Xb(19,"label",10),n.Xb(20,"div",6),n.Zc(21),n.oc(22,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Sb(23,"span",11),n.Wb()),2&e&&(n.Cb(4),n.wc("ngModel",t.value)("value",t.SwitchValue.BOTH),n.Cb(3),n.ad(n.pc(8,9,"GLOBAL.DROPDOWN_SWITCH_BOTH")),n.Cb(4),n.wc("ngModel",t.value)("value",t.SwitchValue.YES),n.Cb(3),n.ad(n.pc(15,11,"GLOBAL.CONFIRM_LABEL")),n.Cb(4),n.wc("ngModel",t.value)("value",t.SwitchValue.NO),n.Cb(3),n.ad(n.pc(22,13,"GLOBAL.NO_LABEL")))},directives:[s.A,s.c,s.s,s.v],pipes:[r.e],encapsulation:2,changeDetection:0}),e})()},fFwQ:function(e,t,i){!function(e){"use strict";function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var r=/[&<>"']/,o=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,c=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(e){return l[e]};function d(e,t){if(t){if(r.test(e))return e.replace(o,u)}else if(a.test(e))return e.replace(c,u);return e}var h=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function p(e){return e.replace(h,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var b=/(^|[^\[])\^/g;function f(e,t){e=e.source||e,t=t||"";var i={replace:function(t,n){return n=(n=n.source||n).replace(b,"$1"),e=e.replace(t,n),i},getRegex:function(){return new RegExp(e,t)}};return i}var m=/[^\w:]/g,g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function v(e,t,i){if(e){var n;try{n=decodeURIComponent(p(i)).replace(m,"").toLowerCase()}catch(s){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!g.test(i)&&(i=function(e,t){C[" "+e]||(C[" "+e]=E.test(e)?e+"/":k(e,"/",!0));var i=-1===(e=C[" "+e]).indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(w,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(S,"$1")+t:e+t}(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(s){return null}return i}var C={},E=/^[^:]+:\/*[^/]*$/,w=/^([^:]+:)[\s\S]*$/,S=/^([^:]+:\/*[^/]*)[\s\S]*$/,y={exec:function(){}};function O(e){for(var t,i,n=1;n<arguments.length;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function A(e,t){var i=e.replace(/\|/g,(function(e,t,i){for(var n=!1,s=t;--s>=0&&"\\"===i[s];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(i[0].trim()||i.shift(),i[i.length-1].trim()||i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function k(e,t,i){var n=e.length;if(0===n)return"";for(var s=0;s<n;){var r=e.charAt(n-s-1);if(r!==t||i){if(r===t||!i)break;s++}else s++}return e.substr(0,n-s)}function T(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function D(e,t){if(t<1)return"";for(var i="";t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}function I(e,t,i,n){var s=t.href,r=t.title?d(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;var a={type:"link",raw:i,href:s,title:r,text:o,tokens:n.inlineTokens(o,[])};return n.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:r,text:d(o)}}var _=function(){function t(t){this.options=t||e.defaults}var i=t.prototype;return i.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},i.code=function(e){var t=this.rules.block.code.exec(e);if(t){var i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:k(i,"\n")}}},i.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var i=t[0],n=function(e,t){var i=e.match(/^(\s+)(?:```)/);if(null===i)return t;var n=i[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e})).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:n}}},i.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var i=t[2].trim();if(/#$/.test(i)){var n=k(i,"#");this.options.pedantic?i=n.trim():n&&!/ $/.test(n)||(i=n.trim())}var s={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}},i.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},i.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}},i.list=function(e){var t=this.rules.block.list.exec(e);if(t){var i,n,s,r,o,a,c,l,u,d,h,p,b=t[1].trim(),f=b.length>1,m={type:"list",raw:"",ordered:f,start:f?+b.slice(0,-1):"",loose:!1,items:[]};b=f?"\\d{1,9}\\"+b.slice(-1):"\\"+b,this.options.pedantic&&(b=f?b:"[*+-]");for(var g=new RegExp("^( {0,3}"+b+")((?: [^\\n]*)?(?:\\n|$))");e&&(p=!1,t=g.exec(e))&&!this.rules.block.hr.test(e);){if(e=e.substring((i=t[0]).length),l=t[2].split("\n",1)[0],u=e.split("\n",1)[0],this.options.pedantic?(r=2,h=l.trimLeft()):(r=t[2].search(/[^ ]/),h=l.slice(r=r>4?1:r),r+=t[1].length),a=!1,!l&&/^ *$/.test(u)&&(i+=u+"\n",e=e.substring(u.length+1),p=!0),!p)for(var v=new RegExp("^ {0,"+Math.min(3,r-1)+"}(?:[*+-]|\\d{1,9}[.)])");e&&(l=d=e.split("\n",1)[0],this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!v.test(l));){if(l.search(/[^ ]/)>=r||!l.trim())h+="\n"+l.slice(r);else{if(a)break;h+="\n"+l}a||l.trim()||(a=!0),i+=d+"\n",e=e.substring(d.length+1)}m.loose||(c?m.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(h))&&(s="[ ] "!==n[0],h=h.replace(/^\[[ xX]\] +/,"")),m.items.push({type:"list_item",raw:i,task:!!n,checked:s,loose:!1,text:h}),m.raw+=i}m.items[m.items.length-1].raw=i.trimRight(),m.items[m.items.length-1].text=h.trimRight(),m.raw=m.raw.trimRight();var C=m.items.length;for(o=0;o<C;o++)this.lexer.state.top=!1,m.items[o].tokens=this.lexer.blockTokens(m.items[o].text,[]),!m.loose&&m.items[o].tokens.some((function(e){return"space"===e.type}))&&(m.loose=!0,m.items[o].loose=!0);return m}},i.html=function(e){var t=this.rules.block.html.exec(e);if(t){var i={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):d(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}},i.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},i.table=function(e){var t=this.rules.block.table.exec(e);if(t){var i={type:"table",header:A(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];var n,s,r,o,a=i.align.length;for(n=0;n<a;n++)i.align[n]=/^ *-+: *$/.test(i.align[n])?"right":/^ *:-+: *$/.test(i.align[n])?"center":/^ *:-+ *$/.test(i.align[n])?"left":null;for(a=i.rows.length,n=0;n<a;n++)i.rows[n]=A(i.rows[n],i.header.length).map((function(e){return{text:e}}));for(a=i.header.length,s=0;s<a;s++)i.header[s].tokens=[],this.lexer.inlineTokens(i.header[s].text,i.header[s].tokens);for(a=i.rows.length,s=0;s<a;s++)for(o=i.rows[s],r=0;r<o.length;r++)o[r].tokens=[],this.lexer.inlineTokens(o[r].text,o[r].tokens);return i}}},i.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t){var i={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}},i.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var i={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}},i.text=function(e){var t=this.rules.block.text.exec(e);if(t){var i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}},i.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:d(t[1])}},i.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):d(t[0]):t[0]}},i.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;var n=k(i.slice(0,-1),"\\");if((i.length-n.length)%2==0)return}else{var s=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var i=e.length,n=0,s=0;s<i;s++)if("\\"===e[s])s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&--n<0)return s;return-1}(t[2],"()");if(s>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,r).trim(),t[3]=""}}var o=t[2],a="";if(this.options.pedantic){var c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);c&&(o=c[1],a=c[3])}else a=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(i)?o.slice(1):o.slice(1,-1)),I(t,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:a?a.replace(this.rules.inline._escapes,"$1"):a},t[0],this.lexer)}},i.reflink=function(e,t){var i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){var n=(i[2]||i[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])||!n.href){var s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return I(i,n,i[0],this.lexer)}},i.emStrong=function(e,t,i){void 0===i&&(i="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&(!n[3]||!i.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var s=n[1]||n[2]||"";if(!s||s&&(""===i||this.rules.inline.punctuation.exec(i))){var r,o,a=n[0].length-1,c=a,l=0,u="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(n=u.exec(t));)if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6])if(o=r.length,n[3]||n[4])c+=o;else if(!((n[5]||n[6])&&a%3)||(a+o)%3){if(!((c-=o)>0)){if(o=Math.min(o,o+c+l),Math.min(a,o)%2){var d=e.slice(1,a+n.index+o);return{type:"em",raw:e.slice(0,a+n.index+o+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}var h=e.slice(2,a+n.index+o-1);return{type:"strong",raw:e.slice(0,a+n.index+o+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}else l+=o}}},i.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var i=t[2].replace(/\n/g," "),n=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return n&&s&&(i=i.substring(1,i.length-1)),i=d(i,!0),{type:"codespan",raw:t[0],text:i}}},i.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},i.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}},i.autolink=function(e,t){var i,n,s=this.rules.inline.autolink.exec(e);if(s)return n="@"===s[2]?"mailto:"+(i=d(this.options.mangle?t(s[1]):s[1])):i=d(s[1]),{type:"link",raw:s[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}},i.url=function(e,t){var i;if(i=this.rules.inline.url.exec(e)){var n,s;if("@"===i[2])s="mailto:"+(n=d(this.options.mangle?t(i[0]):i[0]));else{var r;do{r=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(r!==i[0]);n=d(i[0]),s="www."===i[1]?"http://"+n:n}return{type:"link",raw:i[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}},i.inlineText=function(e,t){var i,n=this.rules.inline.text.exec(e);if(n)return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):d(n[0]):n[0]:d(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:i}},t}(),R={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:y,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};R.def=f(R.def).replace("label",R._label).replace("title",R._title).getRegex(),R.bullet=/(?:[*+-]|\d{1,9}[.)])/,R.listItemStart=f(/^( *)(bull) */).replace("bull",R.bullet).getRegex(),R.list=f(R.list).replace(/bull/g,R.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+R.def.source+")").getRegex(),R._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",R._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,R.html=f(R.html,"i").replace("comment",R._comment).replace("tag",R._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),R.paragraph=f(R._paragraph).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.blockquote=f(R.blockquote).replace("paragraph",R.paragraph).getRegex(),R.normal=O({},R),R.gfm=O({},R.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),R.gfm.table=f(R.gfm.table).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.gfm.paragraph=f(R._paragraph).replace("hr",R.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",R.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",R._tag).getRegex(),R.pedantic=O({},R.normal,{html:f("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",R._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:y,paragraph:f(R.normal._paragraph).replace("hr",R.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",R.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var L={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:y,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function x(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function P(e){var t,i,n="",s=e.length;for(t=0;t<s;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}L._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",L.punctuation=f(L.punctuation).replace(/punctuation/g,L._punctuation).getRegex(),L.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,L.escapedEmSt=/\\\*|\\_/g,L._comment=f(R._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),L.emStrong.lDelim=f(L.emStrong.lDelim).replace(/punct/g,L._punctuation).getRegex(),L.emStrong.rDelimAst=f(L.emStrong.rDelimAst,"g").replace(/punct/g,L._punctuation).getRegex(),L.emStrong.rDelimUnd=f(L.emStrong.rDelimUnd,"g").replace(/punct/g,L._punctuation).getRegex(),L._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,L._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,L._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,L.autolink=f(L.autolink).replace("scheme",L._scheme).replace("email",L._email).getRegex(),L._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,L.tag=f(L.tag).replace("comment",L._comment).replace("attribute",L._attribute).getRegex(),L._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,L._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,L._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,L.link=f(L.link).replace("label",L._label).replace("href",L._href).replace("title",L._title).getRegex(),L.reflink=f(L.reflink).replace("label",L._label).getRegex(),L.reflinkSearch=f(L.reflinkSearch,"g").replace("reflink",L.reflink).replace("nolink",L.nolink).getRegex(),L.normal=O({},L),L.pedantic=O({},L.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:f(/^!?\[(label)\]\((.*?)\)/).replace("label",L._label).getRegex(),reflink:f(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",L._label).getRegex()}),L.gfm=O({},L.normal,{escape:f(L.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),L.gfm.url=f(L.gfm.url,"i").replace("email",L.gfm._extended_email).getRegex(),L.breaks=O({},L.gfm,{br:f(L.br).replace("{2,}","*").getRegex(),text:f(L.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var j=function(){function i(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new _,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:R.normal,inline:L.normal};this.options.pedantic?(i.block=R.pedantic,i.inline=L.pedantic):this.options.gfm&&(i.block=R.gfm,i.inline=this.options.breaks?L.breaks:L.gfm),this.tokenizer.rules=i}i.lex=function(e,t){return new i(t).lex(e)},i.lexInline=function(e,t){return new i(t).inlineTokens(e)};var n,s,r=i.prototype;return r.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},r.blockTokens=function(e,t){var i,n,s,r,o=this;for(void 0===t&&(t=[]),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(n){return!!(i=n.call({lexer:o},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?t.push(i):(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.list(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.def(e))e=e.substring(i.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else if(s=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,i=e.slice(1),n=void 0;o.options.extensions.startBlock.forEach((function(e){"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}(),this.state.top&&(i=this.tokenizer.paragraph(s)))n=t[t.length-1],r&&"paragraph"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return this.state.top=!0,t},r.inline=function(e,t){this.inlineQueue.push({src:e,tokens:t})},r.inlineTokens=function(e,t){var i,n,s,r=this;void 0===t&&(t=[]);var o,a,c,l=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+D("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+D("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(n){return!!(i=n.call({lexer:r},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e))e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.emStrong(e,l,c))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.autolink(e,P))e=e.substring(i.raw.length),t.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(e,P))){if(s=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,i=e.slice(1),n=void 0;r.options.extensions.startInline.forEach((function(e){"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}(),i=this.tokenizer.inlineText(s,x))e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(c=i.raw.slice(-1)),a=!0,(n=t[t.length-1])&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}else e=e.substring(i.raw.length),t.push(i);return t},n=i,(s=[{key:"rules",get:function(){return{block:R,inline:L}}}])&&t(n,s),i}(),M=function(){function t(t){this.options=t||e.defaults}var i=t.prototype;return i.code=function(e,t,i){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,n);null!=s&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+d(n,!0)+'">'+(i?e:d(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:d(e,!0))+"</code></pre>\n"},i.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.html=function(e){return e},i.heading=function(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},i.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.list=function(e,t,i){var n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"},i.listitem=function(e){return"<li>"+e+"</li>\n"},i.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.paragraph=function(e){return"<p>"+e+"</p>\n"},i.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},i.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},i.strong=function(e){return"<strong>"+e+"</strong>"},i.em=function(e){return"<em>"+e+"</em>"},i.codespan=function(e){return"<code>"+e+"</code>"},i.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.del=function(e){return"<del>"+e+"</del>"},i.link=function(e,t,i){if(null===(e=v(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<a href="'+d(e)+'"';return t&&(n+=' title="'+t+'"'),n+">"+i+"</a>"},i.image=function(e,t,i){if(null===(e=v(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+(this.options.xhtml?"/>":">")},i.text=function(e){return e},t}(),X=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,i){return""+i},t.image=function(e,t,i){return""+i},t.br=function(){return""},e}(),F=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do{i=e+"-"+ ++n}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i},t.slug=function(e,t){void 0===t&&(t={});var i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)},e}(),W=function(){function t(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new M,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new X,this.slugger=new F}t.parse=function(e,i){return new t(i).parse(e)},t.parseInline=function(e,i){return new t(i).parseInline(e)};var i=t.prototype;return i.parse=function(e,t){void 0===t&&(t=!0);var i,n,s,r,o,a,c,l,u,d,h,b,f,m,g,v,C,E,w,S="",y=e.length;for(i=0;i<y;i++)if(d=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(w=this.options.extensions.renderers[d.type].call({parser:this},d))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type))switch(d.type){case"space":continue;case"hr":S+=this.renderer.hr();continue;case"heading":S+=this.renderer.heading(this.parseInline(d.tokens),d.depth,p(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":S+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(l="",c="",r=d.header.length,n=0;n<r;n++)c+=this.renderer.tablecell(this.parseInline(d.header[n].tokens),{header:!0,align:d.align[n]});for(l+=this.renderer.tablerow(c),u="",r=d.rows.length,n=0;n<r;n++){for(c="",o=(a=d.rows[n]).length,s=0;s<o;s++)c+=this.renderer.tablecell(this.parseInline(a[s].tokens),{header:!1,align:d.align[s]});u+=this.renderer.tablerow(c)}S+=this.renderer.table(l,u);continue;case"blockquote":u=this.parse(d.tokens),S+=this.renderer.blockquote(u);continue;case"list":for(h=d.ordered,b=d.start,f=d.loose,r=d.items.length,u="",n=0;n<r;n++)v=(g=d.items[n]).checked,C=g.task,m="",g.task&&(E=this.renderer.checkbox(v),f?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=E+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=E+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:E}):m+=E),m+=this.parse(g.tokens,f),u+=this.renderer.listitem(m,C,v);S+=this.renderer.list(u,h,b);continue;case"html":S+=this.renderer.html(d.text);continue;case"paragraph":S+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;i+1<y&&"text"===e[i+1].type;)u+="\n"+((d=e[++i]).tokens?this.parseInline(d.tokens):d.text);S+=t?this.renderer.paragraph(u):u;continue;default:var O='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(O);throw new Error(O)}else S+=w||"";return S},i.parseInline=function(e,t){t=t||this.renderer;var i,n,s,r="",o=e.length;for(i=0;i<o;i++)if(n=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type])||!1===(s=this.options.extensions.renderers[n.type].call({parser:this},n))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))switch(n.type){case"escape":r+=t.text(n.text);break;case"html":r+=t.html(n.text);break;case"link":r+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":r+=t.image(n.href,n.title,n.text);break;case"strong":r+=t.strong(this.parseInline(n.tokens,t));break;case"em":r+=t.em(this.parseInline(n.tokens,t));break;case"codespan":r+=t.codespan(n.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(n.tokens,t));break;case"text":r+=t.text(n.text);break;default:var a='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}else r+=s||"";return r},t}();function B(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(i=t,t=null),T(t=O({},B.defaults,t||{})),i){var n,s=t.highlight;try{n=j.lex(e,t)}catch(c){return i(c)}var r=function(e){var r;if(!e)try{t.walkTokens&&B.walkTokens(n,t.walkTokens),r=W.parse(n,t)}catch(c){e=c}return t.highlight=s,e?i(e):i(null,r)};if(!s||s.length<3)return r();if(delete t.highlight,!n.length)return r();var o=0;return B.walkTokens(n,(function(e){"code"===e.type&&(o++,setTimeout((function(){s(e.text,e.lang,(function(t,i){if(t)return r(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),0==--o&&r()}))}),0))})),void(0===o&&r())}try{var a=j.lex(e,t);return t.walkTokens&&B.walkTokens(a,t.walkTokens),W.parse(a,t)}catch(c){if(c.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+d(c.message+"",!0)+"</pre>";throw c}}B.options=B.setOptions=function(t){return O(B.defaults,t),e.defaults=B.defaults,B},B.getDefaults=s,B.defaults=e.defaults,B.use=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n,s=O.apply(void 0,[{}].concat(t)),r=B.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((function(e){if(e.extensions&&(n=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=r.renderers?r.renderers[e.name]:null;r.renderers[e.name]=t?function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];var r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");r[e.level]?r[e.level].unshift(e.tokenizer):r[e.level]=[e.tokenizer],e.start&&("block"===e.level?r.startBlock?r.startBlock.push(e.start):r.startBlock=[e.start]:"inline"===e.level&&(r.startInline?r.startInline.push(e.start):r.startInline=[e.start]))}e.childTokens&&(r.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var t=B.defaults.renderer||new M,i=function(i){var n=t[i];t[i]=function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];var a=e.renderer[i].apply(t,r);return!1===a&&(a=n.apply(t,r)),a}};for(var n in e.renderer)i(n);s.renderer=t}(),e.tokenizer&&function(){var t=B.defaults.tokenizer||new _,i=function(i){var n=t[i];t[i]=function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];var a=e.tokenizer[i].apply(t,r);return!1===a&&(a=n.apply(t,r)),a}};for(var n in e.tokenizer)i(n);s.tokenizer=t}(),e.walkTokens){var t=B.defaults.walkTokens;s.walkTokens=function(i){e.walkTokens.call(this,i),t&&t.call(this,i)}}n&&(s.extensions=r),B.setOptions(s)}))},B.walkTokens=function(e,t){for(var i,s=function(){var e=i.value;switch(t.call(B,e),e.type){case"table":for(var s,r=n(e.header);!(s=r()).done;)B.walkTokens(s.value.tokens,t);for(var o,a=n(e.rows);!(o=a()).done;)for(var c,l=n(o.value);!(c=l()).done;)B.walkTokens(c.value.tokens,t);break;case"list":B.walkTokens(e.items,t);break;default:B.defaults.extensions&&B.defaults.extensions.childTokens&&B.defaults.extensions.childTokens[e.type]?B.defaults.extensions.childTokens[e.type].forEach((function(i){B.walkTokens(e[i],t)})):e.tokens&&B.walkTokens(e.tokens,t)}},r=n(e);!(i=r()).done;)s()},B.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");T(t=O({},B.defaults,t||{}));try{var i=j.lexInline(e,t);return t.walkTokens&&B.walkTokens(i,t.walkTokens),W.parseInline(i,t)}catch(n){if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+d(n.message+"",!0)+"</pre>";throw n}},B.Parser=W,B.parser=W.parse,B.Renderer=M,B.TextRenderer=X,B.Lexer=j,B.lexer=j.lex,B.Tokenizer=_,B.Slugger=F,B.parse=B;var N=B.options,G=B.setOptions,U=B.use,V=B.walkTokens,H=B.parseInline,Y=B,$=W.parse,z=j.lex;e.Lexer=j,e.Parser=W,e.Renderer=M,e.Slugger=F,e.TextRenderer=X,e.Tokenizer=_,e.getDefaults=s,e.lexer=z,e.marked=B,e.options=N,e.parse=Y,e.parseInline=H,e.parser=$,e.setOptions=G,e.use=U,e.walkTokens=V,Object.defineProperty(e,"__esModule",{value:!0})}(t)},fV9S:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Hf8F");class s{constructor(e){this.id=e.id||e.approvalRequestId,this.status=e.status,this.total=e.total,this.dateRange=e.dateRange,this.startDayOfWeek=e.startDayOfWeek,this.entriesCount=e.entriesCount||0,this.approvedCount=e.approvedCount||0,this.submitterName=e.submitterName||null,this.isApprovedAllOnOtherPages=e.isApprovedAllOnOtherPages,e.startDayOfWeek||console.warn("startDayOfWeek missing in new ApprovalWeekStatus()")}initIsApprovedOnOtherPages(e,t){this.isApprovedAllOnOtherPages=e>=this.entriesCount||this.entriesCount-e==this.approvedCount-t}addTotalDuration(e){this.total=new n.a(this.total).add(e).asString()}subtractTotalDuration(e){this.total=new n.a(this.total).subtract(e).asString()}}},gZP9:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Rgaw");class s{constructor(e){this._id=null==e?void 0:e._id,this._amount=null==e?void 0:e.amount,this._billable=null==e?void 0:e.billable,this._categoryId=null==e?void 0:e.categoryId,this._categoryName=null==e?void 0:e.categoryName,this._categoryUnit=null==e?void 0:e.categoryUnit,this._categoryHasUnitPrice=null==e?void 0:e.categoryHasUnitPrice,this._date=null==e?void 0:e.date,this._notes=null==e?void 0:e.notes,this._projectColor=null==e?void 0:e.projectColor,this._projectId=null==e?void 0:e.projectId,this._projectName=null==e?void 0:e.projectName,this._clientName=null==e?void 0:e.clientName,this._userId=null==e?void 0:e.userId,this._userName=null==e?void 0:e.userName,this._userEmail=null==e?void 0:e.userEmail,this._workspaceId=null==e?void 0:e.workspaceId,this._bulkEdit=null==e?void 0:e.bulkEdit,this._isLocked=null==e?void 0:e.isLocked,this._quantity=null==e?void 0:e.quantity,this._fileId=null==e?void 0:e.fileId,this._fileName=null==e?void 0:e.fileName,this._invoicingInfo=new n.a(null==e?void 0:e.invoicingInfo)}get id(){return this._id}get amount(){return this._amount}get billable(){return this._billable}get categoryId(){return this._categoryId}get categoryName(){return this._categoryName}get date(){return this._date}get notes(){return this._notes}get projectColor(){return this._projectColor}get projectId(){return this._projectId}get projectName(){return this._projectName}get clientName(){return this._clientName}get userId(){return this._userId}get userName(){return this._userName}get workspaceId(){return this._workspaceId}get bulkEdit(){return this._bulkEdit}set bulkEdit(e){this._bulkEdit=e}get isLocked(){return this._isLocked}get categoryUnit(){return this._categoryUnit}get quantity(){return this._quantity}get fileId(){return this._fileId}get fileName(){return this._fileName}get invoicingInfo(){return this._invoicingInfo}get categoryHasUnitPrice(){return this._categoryHasUnitPrice}get userEmail(){return this._userEmail}get hasInvoice(){return!!this.invoicingInfo.invoiceId||this.invoicingInfo.manuallyInvoiced}}},gZQK:function(e,t,i){"use strict";i.d(t,"a",(function(){return Ft}));var n=i("ofXK"),s=i("C+R2"),r=i("sk7z"),o=i("ktZA"),a=i("G7Sd"),c=i("uX6w"),l=i("t2hA"),u=i("RkOr"),d=i("EBvn"),h=i("iTUp"),p=i("txdI"),b=i("1kSV"),f=i("Dfhc"),m=i("EONh"),g=i("NDhe"),v=i("9Trn"),C=i("3Pt+"),E=i("VucA"),w=i("jJjg"),S=i("mMUe"),y=i("6Dzi"),O=i("vqWo"),A=i("AIwn"),k=i("1+qu"),T=i("E10L"),D=i("MtJD"),I=i("dlKe"),_=i("hT48"),R=i("LNDd"),L=i("sYmb"),x=i("fXoL");let P=(()=>{class e{}return e.\u0275mod=x.Pb({type:e}),e.\u0275inj=x.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,C.m,h.a,I.b,_.a,R.a,L.d]]}),e})(),j=(()=>{class e{}return e.\u0275mod=x.Pb({type:e}),e.\u0275inj=x.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,C.m,L.d]]}),e})(),M=(()=>{class e{}return e.\u0275mod=x.Pb({type:e}),e.\u0275inj=x.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,C.m,_.a]]}),e})();var X=i("tZA+");let F=(()=>{class e{}return e.\u0275mod=x.Pb({type:e}),e.\u0275inj=x.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,C.m,X.a,L.d]]}),e})();var W=i("Jmk/"),B=i("QG2T");let N=(()=>{class e{}return e.\u0275mod=x.Pb({type:e}),e.\u0275inj=x.Ob({factory:function(t){return new(t||e)},providers:[W.a],imports:[[n.c,C.m,F,C.C,v.a,m.a,D.a,P,j,_.a,M,b.db,L.d,B.a]]}),e})();var G=i("/pT+"),U=i("+Two"),V=i("l1Fo"),H=i("vwXn"),Y=i("s4Bo"),$=i("0Gvx"),z=i("gr2/"),Z=i("tyNb"),K=i("qvXw"),q=i("1ROj"),J=i("Qd9e"),Q=i("Gajk"),ee=i("QAEb"),te=i("EcM4"),ie=i("QeEd"),ne=i("Vpr3"),se=i("lWAS"),re=i("wBNX"),oe=i("LM6y"),ae=i("UnIm"),ce=i("lp//"),le=i("lBcp"),ue=i("QTph"),de=i("ePBx"),he=i("c+i4"),pe=i("dRxX"),be=i("gtca"),fe=i("RH5C"),me=i("Zco2"),ge=i("liYL"),ve=i("kRDX"),Ce=i("aDua"),Ee=i("kKK/"),we=i("wlsK"),Se=i("QKuU"),ye=i("eGqU"),Oe=i("sbmM"),Ae=i("TmxI"),ke=i("qUN8"),Te=i("2rWG"),De=i("9Gc3"),Ie=i("pOhx"),_e=i("AHy6"),Re=i("/DYx"),Le=i("VHTb"),xe=i("r5nx"),Pe=i("8IBD"),je=i("1Y3z"),Me=i("KnX9"),Xe=i("5SNR"),Fe=i("4Seb"),We=i("AHJ+"),Be=i("62PR"),Ne=i("D0uv"),Ge=i("rf9C"),Ue=i("bW5g"),Ve=i("6GAr"),He=i("FfKB"),Ye=i("MPSC"),$e=i("Nu56"),ze=i("GAki"),Ze=i("pCWH"),Ke=i("IS9F"),qe=i("kojQ"),Je=i("BhhM"),Qe=i("okBH"),et=i("ps2d"),tt=i("xShd"),it=i("nqu1"),nt=i("n0VX"),st=i("Fnfa"),rt=i("4jLH"),ot=i("6yyQ"),at=i("eLiO"),ct=i("tF8r"),lt=i("liXT"),ut=i("rg2B"),dt=i("xJiw"),ht=i("0b3Z"),pt=i("4500"),bt=i("DCUz"),ft=i("9G2T"),mt=i("N2Ql"),gt=i("soCN"),vt=i("bzkB"),Ct=i("l4Lo"),Et=i("GsAO"),wt=i("XuQk"),St=i("MXpx"),yt=i("yUBi"),Ot=i("87RK"),At=i("Kdc/"),kt=i("614J"),Tt=i("Lwft"),Dt=i("eBys"),It=i("znhS"),_t=i("a+PT"),Rt=i("r21O"),Lt=i("psuR"),xt=i("9Eqt"),Pt=i("HNWp"),jt=i("RZdV"),Mt=i("TxvX"),Xt=i("3eYs");let Ft=(()=>{class e{}return e.\u0275mod=x.Pb({type:e}),e.\u0275inj=x.Ob({factory:function(t){return new(t||e)},providers:[ie.a,ne.a,se.a,re.a,te.a,ae.a,ce.a,le.a,ue.a,de.a],imports:[[n.c,C.m,C.C,h.a,p.a,b.O,E.a,w.a,m.a,g.a,v.a,S.a,T.a,f.a,N,U.a,b.s,V.a,H.a,Y.a,$.a,z.a,D.a,Z.h,K.a,q.a,J.a,Q.a,ee.a,oe.a,L.d,fe.a,me.ExpensesModule,ge.a]]}),e})();x.Rc(u.b,[n.r,n.s,n.t,n.u,n.B,n.x,n.y,n.z,n.A,n.v,n.w,C.I,C.x,C.H,C.c,C.y,C.B,C.a,C.E,C.F,C.A,C.s,C.t,C.D,C.o,C.n,C.z,C.b,C.d,C.v,C.w,C.u,C.h,C.k,C.i,C.l,C.e,b.M,ve.a,Ce.a,Ee.a,we.a,Se.a,ye.a,Oe.a,Ae.a,ke.a,Te.a,De.a,Ie.a,_e.a,Re.a,Le.a,xe.a,b.a,b.H,b.K,b.I,b.J,b.L,b.b,b.c,b.e,b.R,b.Q,b.d,b.T,b.f,b.g,b.h,b.p,b.i,b.j,b.k,b.n,b.m,b.l,b.z,b.u,b.t,b.v,b.w,b.y,b.A,b.B,b.C,b.D,b.E,b.F,b.G,b.P,b.S,b.Y,b.Z,b.ab,b.bb,b.eb,b.o,b.X,b.U,b.V,b.W,Pe.a,je.a,Me.a,Xe.a,Fe.a,We.a,Be.a,Ne.a,Ge.a,Ue.a,Z.i,Z.e,Z.g,Z.f,Z.k,Ve.a,He.a,Ye.a,$e.a,ze.a,Ze.a,L.b,Ke.a,qe.a,s.a,r.a,o.a,a.a,c.a,he.a,l.a,u.b,d.a,y.a,O.a,pe.a,A.a,be.a,k.a,G.a],[n.b,n.I,n.q,n.l,n.F,n.g,n.D,n.G,n.d,n.f,n.j,n.k,n.m,Je.a,Qe.a,et.a,tt.a,it.a,nt.a,st.a,rt.a,ot.a,at.a,ct.a,lt.a,ut.a,dt.a,ht.a,pt.a,bt.a,ft.a,mt.a,gt.a,vt.a,Ct.a,Et.a,wt.a,St.a,yt.a,Ot.a,At.a,kt.a,Tt.a,Dt.a,It.a,_t.a,Rt.a,Lt.a,xt.a,Pt.a,L.e,jt.a,Mt.a,Xt.a])},gcYM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7o/Q"),s=i("D0XW");i("l7GE"),i("ZUHj");const r={leading:!0,trailing:!1};function o(e,t=s.a,i=r){return n=>n.lift(new a(e,t,i.leading,i.trailing))}class a{constructor(e,t,i,n){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=n}call(e,t){return t.subscribe(new c(e,this.duration,this.scheduler,this.leading,this.trailing))}}class c extends n.a{constructor(e,t,i,n,s){super(e),this.duration=t,this.scheduler=i,this.leading=n,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function l(e){const{subscriber:t}=e;t.clearThrottle()}},ggBK:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("ofXK"),s=i("3Pt+"),r=i("9Trn"),o=i("hT48"),a=i("iTUp"),c=i("dlKe"),l=i("LNDd"),u=i("1kSV"),d=i("sYmb"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275mod=h.Pb({type:e}),e.\u0275inj=h.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.a,o.a,a.a,c.b,l.a,u.O,d.d]]}),e})()},"gr2/":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("ofXK"),s=i("3Pt+"),r=i("qfBg"),o=i("WQ+v"),a=i("Ww9u"),c=i("ogL9"),l=i("RH5C"),u=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[r.a,o.a],imports:[[n.c,s.m,c.a,l.a,l.a,a.a]]}),e})()},gtca:function(e,t,i){"use strict";i.d(t,"a",(function(){return J}));var n=i("fXoL"),s=(i("gZP9"),i("lGQG")),r=i("AYje"),o=i("hN73"),a=i("X2fY"),c=i("SvJf"),l=i("Y9WU"),u=i("1kSV"),d=i("sYmb"),h=i("ofXK"),p=i("5SNR"),b=i("3Pt+"),f=i("FfKB"),m=i("2rWG"),g=i("sbmM"),v=i("qUN8"),C=i("6GAr"),E=i("kojQ"),w=i("bzkB"),S=i("TxvX"),y=i("rg2B"),O=i("Lwft");function A(e,t){1&e&&n.Tb(0)}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",16),n.Xb(1,"input",17),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).expenseEntry.bulkEdit=t}))("ngModelChange",(function(){n.Oc(e);const t=n.nc(2);return t.selectChange(t.expenseEntry.bulkEdit)})),n.Wb(),n.Sb(2,"label",18),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("id",e.expenseEntry.id)("ngModel",e.expenseEntry.bulkEdit),n.Cb(1),n.wc("for",e.expenseEntry.id)}}function T(e,t){if(1&e&&(n.Xb(0,"div",14),n.Xc(1,k,3,3,"div",15),n.Xb(2,"div"),n.Zc(3),n.oc(4,"formatDateSimple"),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",!e.disableEdit),n.Cb(2),n.ad(n.pc(4,2,e.expenseEntry.date))}}function D(e,t){if(1&e&&(n.Xb(0,"div",26),n.Xb(1,"span"),n.Zc(2),n.Wb(),n.Xb(3,"span",27),n.Zc(4),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.wc("title","Project: "+e.expenseEntry.projectName+"\n"+(e.expenseEntry.clientName?"Client: "+e.expenseEntry.clientName:"")),n.Cb(1),n.Wc("color",e.expenseEntry.projectColor),n.Cb(1),n.bd(" ",e.expenseEntry.projectName," "),n.Cb(2),n.bd(" ",e.expenseEntry.clientName?" - "+e.expenseEntry.clientName:""," ")}}function I(e,t){1&e&&(n.Xb(0,"div",28),n.Xb(1,"span"),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.bd(" (",n.pc(3,1,"GLOBAL.NO_PROJECT_LABEL"),") "))}function _(e,t){if(1&e&&(n.Xb(0,"div",19),n.Xb(1,"div",20),n.Xb(2,"div",21),n.Xb(3,"span",22),n.Xb(4,"div",23),n.Xc(5,D,5,5,"div",24),n.Xc(6,I,4,3,"ng-template",null,25,n.Yc),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.Lc(7),t=n.nc();n.Cb(5),n.wc("ngIf",t.expenseEntry.projectName)("ngIfElse",e)}}function R(e,t){if(1&e&&(n.Xb(0,"div",35),n.Zc(1),n.oc(2,"roundIfWholeNumber"),n.Wb()),2&e){const e=n.nc(3);n.Cb(1),n.cd(" ",n.pc(2,2,e.expenseEntry.quantity)," ",e.expenseEntry.categoryUnit," ")}}function L(e,t){if(1&e&&(n.Xb(0,"div",32),n.Xb(1,"div",33),n.Zc(2),n.Wb(),n.Xc(3,R,3,4,"div",34),n.Wb()),2&e){const e=n.nc(2);n.wc("title",e.expenseEntry.categoryName),n.Cb(2),n.ad(e.expenseEntry.categoryName),n.Cb(1),n.wc("ngIf",e.expenseEntry.categoryHasUnitPrice)}}function x(e,t){1&e&&(n.Xb(0,"div",36),n.Xb(1,"div",37),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.bd("(",n.pc(3,1,"EXPENSES.TABLE.NO_CATEGORY"),")"))}function P(e,t){if(1&e&&(n.Xb(0,"div",29),n.Xc(1,L,4,3,"div",30),n.Xc(2,x,4,3,"ng-template",null,31,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc();n.Cb(1),n.wc("ngIf",t.expenseEntry.categoryName)("ngIfElse",e)}}function j(e,t){if(1&e&&(n.Xb(0,"div",38),n.Xb(1,"span",37),n.Zc(2),n.Wb(),n.Wb()),2&e){const e=n.nc();n.wc("title",e.expenseEntry.userName||e.expenseEntry.userEmail),n.Cb(2),n.bd(" ",e.expenseEntry.userName||e.expenseEntry.userEmail," ")}}function M(e,t){if(1&e&&(n.Xb(0,"div",39),n.Xb(1,"span",37),n.Zc(2),n.Wb(),n.Wb()),2&e){const e=n.nc();n.wc("title",e.expenseEntry.notes),n.Cb(2),n.ad(e.expenseEntry.notes)}}function X(e,t){if(1&e&&(n.Xb(0,"div",41),n.Xb(1,"span",42),n.oc(2,"translate"),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(1),n.xc("title",null!=e.expenseEntry.invoicingInfo&&e.expenseEntry.invoicingInfo.invoiceNumber?e.expenseEntry.invoicingInfo.invoiceNumber:n.pc(2,2,"INVOICES.MANUALLY.TOOLTIP")),n.Cb(2),n.bd(" ",n.pc(4,4,"GLOBAL.INVOICED_LABEL")," ")}}function F(e,t){if(1&e&&n.Xc(0,X,5,6,"div",40),2&e){const e=n.nc();n.wc("ngIf",e.invoicingEnabled&&e.expenseEntry.hasInvoice)}}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",44),n.Xb(1,"div",45,46),n.jc("click",(function(){n.Oc(e);const t=n.Lc(2),i=n.nc(2);return i.downloadReceipt(i.expenseEntry),t.blur()}))("keyup.space",(function(){n.Oc(e);const t=n.nc(2);return t.downloadReceipt(t.expenseEntry)}))("keyup.enter",(function(){n.Oc(e);const t=n.nc(2);return t.downloadReceipt(t.expenseEntry)})),n.Xb(3,"span",47),n.Sb(4,"img",48),n.Wb(),n.Wb(),n.Wb()}}function B(e,t){if(1&e&&n.Xc(0,W,5,0,"div",43),2&e){const e=n.nc();n.wc("ngIf",e.expenseEntry.fileId)}}function N(e,t){if(1&e&&(n.Xb(0,"div",49),n.Xb(1,"div",50),n.Sb(2,"billable-icon",51),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(2),n.wc("disableEdit",!0)("billable",e.expenseEntry.billable)}}function G(e,t){if(1&e&&(n.Xb(0,"div",52),n.Xb(1,"span",53),n.Zc(2),n.oc(3,"roundIfWholeNumber"),n.oc(4,"centsToDollars"),n.Wb(),n.Wb()),2&e){const e=n.nc();n.Cb(2),n.ad(n.pc(3,1,n.pc(4,3,e.expenseEntry.amount)))}}function U(e,t){1&e&&(n.Sb(0,"img",59),n.oc(1,"translate")),2&e&&n.wc("title",n.pc(1,1,"REPORTS.DETAILED_REPORT.APPROVED_ENTRIE_TOOLTIP"))}function V(e,t){1&e&&(n.Sb(0,"img",60),n.oc(1,"translate")),2&e&&n.wc("title",n.pc(1,1,"GLOBAL.ENTRIES_LOCKED_ERROR_MESSAGE"))}function H(e,t){if(1&e&&(n.Xb(0,"div",56),n.Xc(1,U,2,3,"img",57),n.Xc(2,V,2,3,"ng-template",null,58,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(2);n.Cb(1),n.wc("ngIf",!t.disableEdit)("ngIfElse",e)}}function Y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",65),n.Xb(1,"list-items"),n.Xb(2,"a",66),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc(3).edit()}))("keyup.space",(function(){return n.Oc(e),n.nc(3).edit()}))("click",(function(){return n.Oc(e),n.nc(3).edit()})),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Xb(5,"a",66),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(25);return t.openDeleteModal(i,t.expenseEntry)}))("keyup.space",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(25);return t.openDeleteModal(i,t.expenseEntry)}))("click",(function(){n.Oc(e);const t=n.nc(3),i=n.Lc(25);return t.openDeleteModal(i,t.expenseEntry)})),n.Zc(6),n.oc(7,"translate"),n.Wb(),n.Wb(),n.Wb()}2&e&&(n.Cb(3),n.bd(" ",n.pc(4,2,"GLOBAL.EDIT_LABEL")," "),n.Cb(3),n.bd(" ",n.pc(7,4,"GLOBAL.DELETE_BTN")," "))}function $(e,t){1&e&&(n.Xb(0,"div",61),n.Xb(1,"div",62),n.Sb(2,"img",63),n.Wb(),n.Xc(3,Y,8,6,"div",64),n.Wb())}function z(e,t){if(1&e&&(n.Xc(0,H,4,2,"div",54),n.Xc(1,$,4,0,"ng-template",null,55,n.Yc)),2&e){const e=n.Lc(2),t=n.nc();n.wc("ngIf",t.disableEdit)("ngIfElse",e)}}function Z(e,t){if(1&e){const e=n.Yb();n.Xb(0,"delete-confirm-modal",67),n.jc("onClose",(function(){return t.$implicit.close()}))("onDelete",(function(){n.Oc(e);const i=t.$implicit;return n.nc().delete(),i.close()})),n.oc(1,"translate"),n.oc(2,"translate"),n.Xb(3,"p",68),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb()}2&e&&(n.wc("title",n.pc(1,4,"GLOBAL.DELETE_BTN"))("btnText",n.pc(2,6,"GLOBAL.DELETE_BTN"))("showConfirmation",!1),n.Cb(4),n.bd(" ",n.pc(5,8,"EXPENSES.DELETE.MODAL_MESSAGE")," "))}const K=function(e){return{labels:e}},q=function(e,t,i,n,s,r,o,a,c,l,u){return[e,t,i,n,s,r,o,a,c,l,u]};let J=(()=>{class e{constructor(e,t,i,s,r,o){this.cd=e,this.modalService=t,this.authService=i,this.expenseService=s,this.translate=r,this.analyticsService=o,this.labels=[],this.onSelectChange=new n.n,this.deleteExpense=new n.n,this.editExpense=new n.n,this.columns=[]}ngOnInit(){this.user=this.authService.getUser(),this.generateLabels()}generateLabels(){this.labels=["",this.translate.instant("GLOBAL.PROJECT_LABEL"),this.translate.instant("GLOBAL.CATEGORY_LABEL"),this.translate.instant("GLOBAL.USER_LABEL"),this.translate.instant("GLOBAL.NOTE_LABEL"),this.translate.instant("GLOBAL.INVOICED_LABEL"),this.translate.instant("GLOBAL.ATTACHMENT_LABEL"),this.translate.instant("GLOBAL.BILLABLE_LABEL"),this.translate.instant("GLOBAL.AMOUNT_LABEL"),this.translate.instant("GLOBAL.EDIT_LABEL")],this.isDesktop?this.columns=["col1","col2","col3","col4","col5","col6","col7","col8","col9","col10"]:(this.columns=["col1","col2","col3","col4"],this.expenseEntry.notes&&this.columns.push("col5"),this.expenseEntry.hasInvoice&&this.columns.push("col6"),this.expenseEntry.fileId&&this.columns.push("col7"),this.expenseEntry.billable&&this.columns.push("col8"),this.columns.push("col9"),this.columns.push("col10")),this.expenseEntry.notes||(this.labels=this.labels.filter(e=>e!==this.translate.instant("GLOBAL.NOTE_LABEL"))),this.expenseEntry.hasInvoice||(this.labels=this.labels.filter(e=>e!==this.translate.instant("GLOBAL.INVOICED_LABEL"))),this.expenseEntry.fileId||(this.labels=this.labels.filter(e=>e!==this.translate.instant("GLOBAL.ATTACHMENT_LABEL"))),this.expenseEntry.billable||(this.labels=this.labels.filter(e=>e!==this.translate.instant("GLOBAL.BILLABLE_LABEL")))}selectChange(e){this.onSelectChange.emit(e)}openDeleteModal(e,t){this.expenseToDelete=t,this.modalService.open(e,{centered:!0})}setIsSelected(e){this.disableEdit||(this.expenseEntry.bulkEdit=e,this.cd.markForCheck())}ngOnDestroy(){}delete(){this.deleteExpense.emit(this.expenseToDelete),this.analyticsService.addEvent(new c.a({event:"Submit",value:"Delete",section:"Expenses",section2:"Delete expense"}))}downloadReceipt(e){this.expenseService.downloadReceipt(e.id,e.fileId,this.getFileType(e.fileName),e.fileName).subscribe()}getFileType(e){const t=e.split(".")[e.split(".").length-1];return o.b.filter(e=>e.split("/")[1]===t)[0]}edit(){const e=this.expenseEntry.userName?this.expenseEntry.userName:this.expenseEntry.userEmail,t=new a.a(this.expenseEntry);t.userName=e,this.editExpense.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(u.q),n.Rb(s.a),n.Rb(r.a),n.Rb(d.f),n.Rb(l.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["expense-detailed-row"],["","expense-detailed-row",""]],inputs:{isDesktop:"isDesktop",expandAll:"expandAll",disableEdit:"disableEdit",expenseEntry:"expenseEntry",isAdminOrOwner:"isAdminOrOwner",invoicingEnabled:"invoicingEnabled"},outputs:{onSelectChange:"onSelectChange",deleteExpense:"deleteExpense",editExpense:"editExpense"},decls:26,vars:31,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cl-d-none",3,"isDesktop","isExpanded","templates"],["responsive",""],["col1",""],["col2",""],["col3",""],["col4",""],["col5",""],["col6",""],["col7",""],["col8",""],["col9",""],["col10",""],["deleteModal",""],[1,"cl-d-inline-flex","cl-cut-text-wrapper","cl-w-100","cl-py-0","cl-py-lg-custom-2","cl-pr-3"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"id","ngModel","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-component-divided-left","cl-d-flex","cl-text-dark","cl-text-decoration-none"],[1,"cl-cut-text-wrapper","cl-w-100","cl-d-flex","cl-justify-content-center","cl-justify-content-lg-start"],[1,"cl-col-responsive","cl-name-col"],[1,"cl-d-flex","cl-align-items-center","cl-mr-2"],[1,"cl-w-100","cl-text-center","cl-text-lg-left"],["class","cl-cut-text","data-toggle","tooltip","data-placement","bottom","title","",3,"title",4,"ngIf","ngIfElse"],["noProject",""],["data-toggle","tooltip","data-placement","bottom","title","",1,"cl-cut-text",3,"title"],[1,"cl-listing-client"],["data-toggle","tooltip","data-placement","bottom","title","",1,"cl-cut-text"],[1,"cl-component-divided-left","cl-w-100","cl-text-decoration-none","cl-d-flex","cl-align-items-center"],["class","cl-d-flex cl-flex-column cl-cut-text-wrapper cl-align-items-center cl-align-items-lg-start",3,"title",4,"ngIf","ngIfElse"],["noCategory",""],[1,"cl-d-flex","cl-flex-column","cl-cut-text-wrapper","cl-align-items-center","cl-align-items-lg-start",3,"title"],[1,"cl-cut-text","cl-w-100"],["class","cl-cut-text cl-h6 cl-mb-0",4,"ngIf"],[1,"cl-cut-text","cl-h6","cl-mb-0"],[1,"cl-d-flex","cl-flex-column","cl-cut-text"],[1,"cl-cut-text"],[1,"cl-component-divided-left","cl-w-100","cl-text-decoration-none","cl-d-flex","cl-align-items-center",3,"title"],[1,"cl-component-divided-left","cl-w-100",3,"title"],["class","cl-component-divided-left cl-no-divider-border-up-lg-custom",4,"ngIf"],[1,"cl-component-divided-left","cl-no-divider-border-up-lg-custom"],[1,"cl-badge-status-green","cl-badge-approve","cl-text-capitalize","cl-mr-custom-lg-2","cl-justify-content-center",3,"title"],["class","cl-component-divided-left cl-w-100 cl-justify-content-center cl-justify-content-lg-start cl-justify-content-xl-center",4,"ngIf"],[1,"cl-component-divided-left","cl-w-100","cl-justify-content-center","cl-justify-content-lg-start","cl-justify-content-xl-center"],["tabindex","0",1,"pointer","cl-non-selectable","cl-w-100","cl-text-center","cl-text-lg-left","cl-text-lg-custom-center",3,"click","keyup.space","keyup.enter"],["icon",""],[1,"currency"],["src","assets/ui-icons/attach.svg"],[1,"cl-component-divided-left","cl-w-100","cl-justify-content-center"],[1,"cl-w-100","cl-text-center","cl-text-lg-left","cl-text-lg-custom-center"],[1,"cl-mr-lg-auto",3,"disableEdit","billable"],[1,"cl-component-divided-left","cl-w-100","cl-pr-0"],[1,"cl-ml-0","cl-ml-lg-custom-auto","cl-text-font-weight-500","cl-input-time-picker-sum","cl-text-right"],["class","cl-text-center",4,"ngIf","ngIfElse"],["optionsTemplate",""],[1,"cl-text-center"],["src","assets/ui-icons/checkmark-green-circle.svg",3,"title",4,"ngIf","ngIfElse"],["lockIconTemplate",""],["src","assets/ui-icons/checkmark-green-circle.svg",3,"title"],["src","assets/images/ui-icons/locked.svg",3,"title"],["dropdownKey","","tabCell","",1,"cl-dropdown"],["dropdownKeyButton","","tabindex","0",1,"pointer","cl-non-selectable","cl-component-divided-left","cl-d-flex","cl-dropdown-toggle","cl-no-arrow"],["src","assets/images/ui-icons/menu-dots-vertical.svg"],["openUpAtBottom","","class","cl-dropdown-menu cl-dropdown-menu-right",4,"dropdownKeyContent"],["openUpAtBottom","",1,"cl-dropdown-menu","cl-dropdown-menu-right"],["tabindex","-1","clickCloseDropdown","",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],[3,"title","btnText","showConfirmation","onClose","onDelete"],[1,"cl-text-muted","cl-mb-0"]],template:function(e,t){if(1&e&&(n.Xc(0,A,1,0,"ng-container",0),n.Sb(1,"responsive-row",1,2),n.oc(3,"columnDecider"),n.Xc(4,T,5,4,"ng-template",null,3,n.Yc),n.Xc(6,_,8,2,"ng-template",null,4,n.Yc),n.Xc(8,P,4,2,"ng-template",null,5,n.Yc),n.Xc(10,j,3,2,"ng-template",null,6,n.Yc),n.Xc(12,M,3,2,"ng-template",null,7,n.Yc),n.Xc(14,F,1,1,"ng-template",null,8,n.Yc),n.Xc(16,B,1,1,"ng-template",null,9,n.Yc),n.Xc(18,N,3,2,"ng-template",null,10,n.Yc),n.Xc(20,G,5,5,"ng-template",null,11,n.Yc),n.Xc(22,z,3,2,"ng-template",null,12,n.Yc),n.Xc(24,Z,6,10,"ng-template",null,13,n.Yc)),2&e){const e=n.Lc(2),i=n.Lc(5),s=n.Lc(7),r=n.Lc(9),o=n.Lc(11),a=n.Lc(13),c=n.Lc(15),l=n.Lc(17),u=n.Lc(19),d=n.Lc(21),h=n.Lc(23);n.wc("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n.Bc(17,K,t.labels)),n.Cb(1),n.wc("isDesktop",t.isDesktop)("isExpanded",t.expandAll)("templates",n.tc(3,5,n.Jc(19,q,[t.columns,i,s,r,o,a,c,l,u,d,h])))}},directives:[h.B,p.a,h.u,b.a,b.s,b.v,f.a,m.a,g.a,v.a,C.a,E.a],pipes:[w.a,S.a,d.e,y.a,O.a],encapsulation:2}),e})()},gzhl:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("BO2n"),s=i("f0Wu"),r=i("sNAh"),o=i("IP1A"),a=i("Y9WU"),c=i("SvJf"),l=i("fXoL"),u=i("ofXK"),d=i("3Pt+"),h=i("+dED"),p=i("1kSV"),b=i("62PR"),f=i("sYmb");function m(e,t){1&e&&(l.Xb(0,"span"),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e&&(l.Cb(1),l.bd(" ",l.pc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_RATE_TO_WORKSPACE")," "))}const g=function(e){return{userName:e}};function v(e,t){if(1&e&&(l.Xb(0,"span"),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e){const e=l.nc();l.Cb(1),l.bd(" ",l.qc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_WORKSPACE_MEMBER",l.Bc(4,g,e.user.name))," ")}}function C(e,t){1&e&&(l.Xb(0,"span"),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e&&(l.Cb(1),l.bd(" ",l.pc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_PROJECT")," "))}function E(e,t){1&e&&(l.Xb(0,"span"),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e&&(l.Cb(1),l.bd(" ",l.pc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_TASK")," "))}function w(e,t){if(1&e&&(l.Xb(0,"span"),l.Zc(1),l.oc(2,"translate"),l.Wb()),2&e){const e=l.nc();l.Cb(1),l.bd(" ",l.qc(2,1,"SHARED_MODULES.HOURLY_RATE.APPLY_TO_ALL_CREATED_BY",l.Bc(4,g,e.user.name))," ")}}function S(e,t){1&e&&(l.Zc(0),l.oc(1,"translate"),l.Xb(2,"a",30),l.Zc(3),l.oc(4,"translate"),l.Wb(),l.Zc(5,".\n")),2&e&&(l.bd(" ",l.pc(1,2,"SHARED_MODULES.HOURLY_RATE.UPGRADE_TEXT_PART_1")," "),l.Cb(3),l.ad(l.pc(4,4,"SHARED_MODULES.HOURLY_RATE.UPGRADE_TEXT_PART_2")))}const y=function(){return[""]},O=function(e){return{start:e}};let A=(()=>{class e extends o.a{constructor(e){super(),this.analyticsService=e,this._hourlyRate=new r.a}set hourlyRate(e){e&&(this._hourlyRate=new r.a(e),this.hourlyRate.amount=e.amount)}get hourlyRate(){return this._hourlyRate}ngOnInit(){super.ngOnInit(),this.hourlyRate.since=s().startOf("day").toISOString(),this.responseBackup=this.hourlyRate.generateReponse(this.updateSince)}get isModelChanged(){const e=this.hourlyRate.generateReponse(this.updateSince);return!r.a.areResponsesEqual(e,this.responseBackup)}showUnset(){return this.type!==n.a.WORKSPACE&&this.hourlyRate&&null!==this.hourlyRate.amount}save(){if(!this.isModelChanged)return;const e=this.hourlyRate.generateReponse(this.updateSince);this.saveRate.emit(e)}pickedDate({start:e}){this.hourlyRate.since=e}addEventOnUpdateSinceChange(e){this.analyticsService.addEvent(new c.a({event:"select",uevent:"select",value:e?"Time entries from "+this.hourlyRate.since:"All past and future",amount:"",Section:"Projects",section2:"Settings",section3:"Project billable rate",section4:"Apply billable rate to"}))}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(a.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["hourly-rate"]],inputs:{hourlyRate:"hourlyRate"},features:[l.zb],decls:53,vars:53,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],["role","alert",1,"cl-alert","cl-alert-info","cl-fade","cl-show","cl-text-break",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"cl-form-row"],[1,"cl-form-group","cl-col-md-6"],["for","hourlyRate"],["ngbAutofocus","","type","text","inputNumber","","id","hourlyRate","spellcheck","false","autocomplete","off",1,"cl-form-control",3,"placeholder","allowedValues","decimal","ngModel","keyup.enter","inputChange","inputCharacterChange"],["hourlyRateInput",""],["triggers","manual","placement","top","container","body",1,"cl-form-row","cl-position-relative",3,"ngbPopover","click"],["featurePopover","ngbPopover"],[1,"cl-form-group","cl-col-12"],[1,"cl-col-12"],[1,"cl-d-flex","cl-align-items-start","cl-align-items-md-center","cl-flex-column","cl-flex-md-row"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","id","recursiveHourlyRate","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","disabled","ngModelChange","change"],["for","recursiveHourlyRate",1,"cl-custom-control-label","cl-text-dark"],[1,"cl-d-flex","cl-align-items-center","cl-my-2","cl-my-md-0","cl-ml-n4","cl-ml-md-0"],["placement","right",1,"cl-d-inline-flex","cl-align-items-center",2,"position","relative",3,"maxDate","debounce","mode","textualDate","showNowInsteadToday","dateTime","disableEdit","pickedDate"],[1,"cl-form-group","cl-col-12","cl-mt-lg-2"],["type","radio","id","allEntries","name","updateSince",1,"cl-custom-control-input",3,"value","ngModel","disabled","ngModelChange","change"],["for","allEntries",1,"cl-custom-control-label","cl-text-dark"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button",1,"cl-btn","cl-btn-primary",3,"disabled","click"],["popContent",""],["href","https://clockify.me/help/reports/hourly-rates#historic-rates","target","_blank"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"h1",1),l.Zc(2),l.oc(3,"translate"),l.Wb(),l.Xb(4,"button",2),l.jc("click",(function(){return t.close()})),l.Xb(5,"span"),l.Sb(6,"img",3),l.Wb(),l.Wb(),l.Wb(),l.Xb(7,"div",4),l.Xb(8,"div",5),l.Xc(9,m,3,3,"span",6),l.Xc(10,v,3,6,"span",6),l.Xc(11,C,3,3,"span",6),l.Xc(12,E,3,3,"span",6),l.Xc(13,w,3,6,"span",7),l.Wb(),l.Xb(14,"div",8),l.Xb(15,"div",9),l.Xb(16,"label",10),l.Zc(17),l.oc(18,"translate"),l.Wb(),l.Xb(19,"input",11,12),l.jc("keyup.enter",(function(){return l.Oc(e),l.Lc(20).blur(),t.save()}))("inputChange",(function(e){return t.hourlyRate.amount=e}))("inputCharacterChange",(function(e){return t.hourlyRate.amount=e})),l.oc(21,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Xb(22,"div",13,14),l.jc("click",(function(){l.Oc(e);const i=l.Lc(23);return t.togglePopover(i)})),l.Xb(24,"label",15),l.Zc(25),l.oc(26,"translate"),l.Wb(),l.Xb(27,"div",16),l.Xb(28,"div",17),l.Xb(29,"div",18),l.Xb(30,"input",19),l.jc("ngModelChange",(function(e){return t.updateSince=e}))("change",(function(){return t.addEventOnUpdateSinceChange(!0)})),l.Wb(),l.Xb(31,"label",20),l.Zc(32),l.oc(33,"translate"),l.Wb(),l.Wb(),l.Xb(34,"div",21),l.Xb(35,"single-date-picker2",22),l.jc("pickedDate",(function(e){return t.pickedDate(e)})),l.Wb(),l.Zc(36),l.oc(37,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Xb(38,"div",23),l.Xb(39,"div",18),l.Xb(40,"input",24),l.jc("ngModelChange",(function(e){return t.updateSince=e}))("change",(function(){return t.addEventOnUpdateSinceChange(!1)})),l.Wb(),l.Xb(41,"label",25),l.Zc(42),l.oc(43,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(44,"div",26),l.Xb(45,"a",27),l.jc("click",(function(){return t.close()})),l.Zc(46),l.oc(47,"translate"),l.Wb(),l.Xb(48,"button",28),l.jc("click",(function(){return t.save()})),l.Zc(49),l.oc(50,"translate"),l.Wb(),l.Wb(),l.Xc(51,S,6,6,"ng-template",null,29,l.Yc)}if(2&e){const e=l.Lc(52);l.Cb(2),l.ad(l.pc(3,32,0===t.hourlyRate.amount?"GLOBAL.SET_RATE_LABEL":"SHARED_MODULES.SHARED.EDIT_RATE_BTN")),l.Cb(6),l.wc("ngSwitch",t.type),l.Cb(1),l.wc("ngSwitchCase",t.rateType.WORKSPACE),l.Cb(1),l.wc("ngSwitchCase",t.rateType.WORKSPACE_MEMBER),l.Cb(1),l.wc("ngSwitchCase",t.rateType.PROJECT),l.Cb(1),l.wc("ngSwitchCase",t.rateType.TASK),l.Cb(5),l.ad(l.pc(18,34,"SHARED_MODULES.HOURLY_RATE.NEW_BILLABLE_RATE_LABEL")),l.Cb(2),l.xc("placeholder",l.pc(21,36,"SHARED_MODULES.COST_RATE.NEW_COST_RATE_LABEL")),l.wc("allowedValues",l.Ac(50,y))("decimal",!0)("ngModel",t.hourlyRate.amount),l.Cb(3),l.wc("ngbPopover",e),l.Cb(3),l.ad(l.pc(26,38,"SHARED_MODULES.HOURLY_RATE.APPLY_RATE_TO_LABEL")),l.Cb(5),l.wc("value",!0)("ngModel",t.updateSince)("disabled",!t.hasHistoricRateFeature),l.Cb(2),l.bd(" ",l.pc(33,40,"SHARED_MODULES.SHARED.ENTRIES_FROM_PART_1")," "),l.Cb(3),l.wc("maxDate",t.maxDate)("debounce",!1)("mode","date_only")("textualDate",!0)("showNowInsteadToday",!t.hasHistoricRateFeature)("dateTime",l.Bc(51,O,t.hourlyRate.since))("disableEdit",!t.hasHistoricRateFeature),l.Cb(1),l.bd(" ",l.pc(37,42,"SHARED_MODULES.SHARED.ENTRIES_FROM_PART_2")," "),l.Cb(4),l.wc("value",!1)("ngModel",t.updateSince)("disabled",!t.hasHistoricRateFeature),l.Cb(2),l.bd(" ",l.pc(43,44,"SHARED_MODULES.SHARED.ENTRIES_PAST_FUTURE_INFO")," "),l.Cb(4),l.ad(l.pc(47,46,"GLOBAL.CANCEL_BTN")),l.Cb(2),l.wc("disabled",!t.isModelChanged),l.Cb(1),l.ad(l.pc(50,48,"GLOBAL.SAVE_LABEL"))}},directives:[u.y,u.z,u.A,d.c,h.a,d.s,d.v,p.M,d.A,b.a],pipes:[f.e],encapsulation:2,changeDetection:0}),e})()},hN73:function(e,t,i){"use strict";i.d(t,"b",(function(){return k})),i.d(t,"a",(function(){return T}));var n=i("lGQG"),s=i("IzEk"),r=i("1G5W"),o=i("1Tmk"),a=i("NHP+"),c=i("AYje"),l=i("T9nA"),u=i("jtSf"),d=i("wd/R");class h{constructor(e){this._date=null==e?void 0:e.date,this._total=null==e?void 0:e.total,this._expenses=null==e?void 0:e.expenses}get date(){return this._date}get total(){return this._total}get expenses(){return this._expenses}}var p=i("i/9y"),b=i("Y9WU"),f=i("SvJf"),m=i("fXoL"),g=i("1kSV"),v=i("sYmb");const C=["createExpense"];function E(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",18),m.Xb(1,"teammate-picker2",19),m.jc("userSelected",(function(t){return m.Oc(e),m.nc().selectUser(t)})),m.Wb(),m.Wb()}if(2&e){const e=m.nc();m.Cb(1),m.wc("hasAddTimeForOthersFeature",e.workspace.hasFeature(e.Features.ADD_TIME_FOR_OTHERS))("selectedUser",e.selectedUser)("workspace",e.workspace)}}function w(e,t){1&e&&(m.Xb(0,"div",20),m.Xb(1,"a",21),m.oc(2,"translate"),m.Sb(3,"img",22),m.Wb(),m.Wb()),2&e&&(m.Cb(1),m.wc("title",m.pc(2,1,"EXPENSES.MANAGE_CATEGORIES")))}function S(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",24),m.Xb(1,"app-weekly-expenses",25),m.jc("deleteExpense",(function(t){return m.Oc(e),m.nc(2).deleteExpense(t)}))("editExpense",(function(t){return m.Oc(e),m.nc(2).editExpense(t)})),m.Wb(),m.Wb()}if(2&e){const e=t.$implicit,i=m.nc(2);m.Cb(1),m.wc("weeklyTotal",e)("minWidth",i.minWidth)("canEdit",i.selectedUser.id===i.user.id||i.isAdminOrOwner||i.workspace.canManagerEditUsersTime&&i.isTeamManager)("isAdminOrOwner",i.isAdminOrOwner)}}function y(e,t){if(1&e&&(m.Xb(0,"div"),m.Xc(1,S,2,4,"div",23),m.Wb()),2&e){const e=m.nc();m.Cb(1),m.wc("ngForOf",e.weeklyTotals)}}function O(e,t){1&e&&(m.Sb(0,"message-entries",26),m.oc(1,"translate"),m.oc(2,"translate")),2&e&&m.wc("title",m.pc(1,4,"EXPENSES.TABLE.EMPTY_TITLE"))("subtitle",m.pc(2,6,"EXPENSES.TABLE.INFO_MESSAGE"))("imagePath","assets/images/expense_illustration.svg")("isError",!1)}function A(e,t){if(1&e){const e=m.Yb();m.Xb(0,"app-create-expense",27),m.jc("close",(function(){return t.$implicit.close()}))("selectedUser",(function(t){return m.Oc(e),m.nc().selectUser(t)})),m.Wb()}if(2&e){const e=m.nc();m.wc("user",e.selectedUser)("expense",e.expense)}}const k=["image/jpeg","image/jpg","image/png","image/gif","application/pdf"];let T=(()=>{class e{constructor(e,t,i,n,s,r){this.authService=e,this.workspaceService=t,this.modal=i,this.expenseService=n,this.analyticsService=s,this.translateService=r,this.Features=p.a,this.expensesQuery={page:1,pageSize:50,userId:null},this.unsubscribe$=new a.a,this.LIMIT=50}ngOnInit(){this.isAdminOrOwner=this.authService.isAdminOrOwner(),this.workspace=this.workspaceService.getLocalDefaultWorkspace(),this.user=this.authService.getUser(),this.selectedUser=this.user,this.checkIfTeamManager(),this.fetchExpenses()}checkIfTeamManager(){this.authService.isUserAdminOnWorkspace(this.workspace.id).pipe(Object(s.a)(1),Object(r.a)(this.unsubscribe$)).subscribe(e=>{this.isTeamManager=e.isTeamManager})}selectUser(e){this.expensesQuery.userId=e.id,this.selectedUser=e,this.fetchExpenses()}openModal(e){this.modal.open(e,{centered:!0})}fetchExpenses(){this.expenseService.getExpenses(this.expensesQuery).subscribe(({expenses:e,dailyTotals:t,weeklyTotals:i})=>{this.minWidth=this.getMinWidth(e.expenses),this.weeklyTotals=this.getWeeklyTotals(i,t,e),this.expensesCount=e.count})}getWeeklyTotals(e,t,i){return e.map(e=>{const n=this.getDateRange(e);return new l.a({date:e.date,total:e.total,dateRange:n,dailyTotals:this.getDailyTotals(t,i,n)})})}getDateRange(e){let t="";const i=Object(u.h)(d(),this.user.settings.weekStart);t=i.format("YYYY-MM-DD")===d(e.date).format("YYYY-MM-DD")?this.translateService.instant("TRACKER.APPROVAL.THIS_WEEK"):i.subtract(7,"days").format("YYYY-MM-DD")===d(e.date).format("YYYY-MM-DD")?this.translateService.instant("TRACKER.APPROVAL.LAST_WEEK"):"";const n=d(e.date).startOf("day"),s=d(e.date).add(6,"day").endOf("day"),r=n.tz(this.user.settings.timeZone).utcOffset(),o=s.tz(this.user.settings.timeZone).utcOffset();return{label:t,start:n.add(r,"minutes").toISOString(),end:s.add(o,"minutes").toISOString()}}getDailyTotals(e,t,i){return e.filter(e=>d(e.dateAsInstant).isSameOrAfter(i.start)&&d(e.dateAsInstant).isSameOrBefore(i.end)).reverse().map(e=>new h({date:e.date,total:e.total,expenses:this.getExpenses(t,e.date)}))}getExpenses(e,t){return e.expenses.filter(e=>d(e.date.substring(0,10)).isSame(t,"day"))}deleteExpense(e){this.expenseService.delete(e.id).subscribe(()=>{this.analyticsService.addEvent(new f.a({event:"Submit",value:"deleteExpense",section:"Expenses",section2:"Delete expense"})),this.fetchExpenses()})}editExpense(e){this.expense=e,this.openModal(this.createModal)}pageChanged(e){this.expensesQuery.page=e.page,this.fetchExpenses()}limitChanged(e){this.expensesQuery.pageSize=e.limit,this.expensesQuery.page=1,window.scrollTo(0,0),this.fetchExpenses()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}createExp(e){this.expense=null,this.openModal(e)}getMinWidth(e){return 0}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(n.a),m.Rb(o.a),m.Rb(g.q),m.Rb(c.a),m.Rb(b.a),m.Rb(v.f))},e.\u0275cmp=m.Lb({type:e,selectors:[["app-expenses-home"]],viewQuery:function(e,t){var i;1&e&&m.gd(C,!0),2&e&&m.Kc(i=m.kc())&&(t.createModal=i.first)},decls:24,vars:15,consts:[[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-flex-column","cl-flex-md-row"],[1,"cl-col-3"],[1,"cl-py-1"],[1,"cl-col","cl-d-print-none"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-start","cl-justify-content-md-end"],[1,"cl-dropdown"],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-start","cl-justify-content-md-end","cl-flex-wrap"],["class","cl-dropdown cl-mr-1 cl-py-1",4,"ngIf"],["class","cl-page-header-action cl-d-print-none cl-position-relative",4,"ngIf"],[1,"cl-btn","cl-btn-primary",3,"click"],[4,"ngIf","ngIfElse"],["noExpensesYet",""],["createExpense",""],[1,"cl-d-flex","cl-justify-content-center"],[3,"visible","page","limit","total","itemsPerPage","pageChanged","limitChanged"],[1,"cl-dropdown","cl-mr-1","cl-py-1"],[1,"cl-m-auto",3,"hasAddTimeForOthersFeature","selectedUser","workspace","userSelected"],[1,"cl-page-header-action","cl-d-print-none","cl-position-relative"],["type","button","role","button","routerLink","/expenses/categories",1,"cl-btn","cl-btn-outline-light","cl-btn-fixed-40","cl-dropdown-toggle","cl-no-arrow",3,"title"],["src","../../../../../assets/ui-icons/settings.svg"],["class","cl-expense-entry",4,"ngFor","ngForOf"],[1,"cl-expense-entry"],[3,"weeklyTotal","minWidth","canEdit","isAdminOrOwner","deleteExpense","editExpense"],[3,"title","subtitle","imagePath","isError"],[3,"user","expense","close","selectedUser"]],template:function(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"div",3),m.Xb(4,"div",4),m.Xb(5,"h1",5),m.Zc(6),m.oc(7,"translate"),m.Wb(),m.Wb(),m.Xb(8,"div",6),m.Xb(9,"div",7),m.Xb(10,"div",8),m.Xb(11,"div",9),m.Xc(12,E,2,3,"div",10),m.Xc(13,w,4,3,"div",11),m.Xb(14,"a",12),m.jc("click",(function(){m.Oc(e);const i=m.Lc(21);return t.createExp(i)})),m.Zc(15),m.oc(16,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Xc(17,y,2,1,"div",13),m.Xc(18,O,3,8,"ng-template",null,14,m.Yc),m.Wb(),m.Xc(20,A,1,2,"ng-template",null,15,m.Yc),m.Xb(22,"div",16),m.Xb(23,"pager",17),m.jc("pageChanged",(function(e){return t.pageChanged(e)}))("limitChanged",(function(e){return t.limitChanged(e)})),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&e){const e=m.Lc(19);m.Cb(6),m.ad(m.pc(7,11,"EXPENSES.TITLE")),m.Cb(6),m.wc("ngIf",t.isAdminOrOwner||t.isTeamManager),m.Cb(1),m.wc("ngIf",t.isAdminOrOwner),m.Cb(2),m.bd(" ",m.pc(16,13,"EXPENSES.ADD_BTN")," "),m.Cb(2),m.wc("ngIf",null==t.weeklyTotals?null:t.weeklyTotals.length)("ngIfElse",e),m.Cb(6),m.wc("visible",t.LIMIT<t.expensesCount)("page",t.expensesQuery.page)("limit",t.expensesQuery.pageSize)("total",t.expensesCount)("itemsPerPage",!0)}},encapsulation:2}),e})()},hT48:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.d]]}),e})()},i6c7:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("XNiG"),s=i("tnjF"),r=i("Ymxs"),o=i("tk/3"),a=i("lJxs"),c=i("vkgz"),l=i("1Tmk"),u=i("OG4e"),d=i("fXoL"),h=i("sYmb");let p=(()=>{class e{constructor(e,t,i,s,r){this.http=e,this.workspaceService=t,this.centUSDConverter=i,this.toaster=s,this.translateService=r,this.error=new n.a,this.tasks=new n.a,this.task=new n.a,this.deletedTask=new n.a,this.updatedTask=new n.a,this.allTasks=new n.a,this.activeTasks=new n.a,this.taskForProject=new n.a,this.taskNotUpdated=new n.a}getTasksForProjects(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),r=(new o.h).append("search",t&&t.searchTerm||"").append("page",t&&t.page.toString()||"1"),a=new n.a;return this.http.post(`/workspaces/${i}/projects/tasks-pagination`,e,{params:r}).subscribe(e=>{a.next(e.map(e=>new s.a(e))),this.allTasks.next(e)},e=>{a.error(e)}),a}getTasksNew(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/tasks/report-filters`,{name:e.name||"",status:e.status||"",page:e.page||1,pageSize:e.pageSize,clients:t||void 0,projects:i||void 0}).pipe(Object(a.a)(e=>(e.forEach(e=>e.tasks=e.tasks.map(e=>new s.a(e))),e)))}getTasksIds(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/projects/tasks/report-filters/ids`,{status:e.status,name:e.name,clients:e.clients,projects:e.projects}).pipe(Object(a.a)(e=>e),Object(c.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.PROJECT.TASK.GET_IDS.ERROR_MESSAGE"))))}getAllTasks(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${i}/projects/${e}/tasks/`).subscribe(e=>{this.tasks.next(e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))))},e=>{this.error.next(e)})}create(e,t,i){const n=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/${t}/tasks/`,{name:e,projectId:t,assigneeIds:i}).pipe(Object(c.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.CREATE.SUCCESS_MESSAGE",{taskName:e}))},t=>{400==t.status&&(this.error.next(t),this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.TASK.CREATE.ERROR_MESSAGE"),t&&t.error&&t.error.message||this.translateService.instant("SERVICES.PROJECT.TASK.NAME_EXISTS_ERROR_MESSAGE",{taskName:e})))}))}createTask(e,t,i){const n=i||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${n}/projects/${t}/tasks/`,{name:e,projectId:t}).pipe(Object(a.a)(e=>new s.a(e)),Object(c.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.CREATE.SUCCESS_MESSAGE",{taskName:e}))},t=>{this.toaster.pop("error",t&&t.error&&t.error.message||this.translateService.instant("SERVICES.PROJECT.TASK.NAME_EXISTS_ERROR_MESSAGE",{taskName:e}))}))}update(e,t=!0,i=""){const n=this.workspaceService.getDefaultWorkspaceId(),r=JSON.stringify({name:e.name,estimate:e.estimate,budgetEstimate:100*e.budgetEstimate,assigneeIds:e.assigneeIds,userGroupIds:e.userGroupIds,status:e.status,billable:e.billable}),l=(new o.h).append("contains-assignee",t.toString()).append("membership-status",i);return this.http.put(`/workspaces/${n}/projects/${e.projectId}/tasks/${e.id}`,r,{params:l}).pipe(Object(a.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(c.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.SUCESS_MESSAGE_WITH_NAME",{taskName:e.name}))},t=>{400==t.status&&(this.error.next(t),this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.ERROR_MESSAGE"),t&&t.error&&t.error.message||this.translateService.instant("SERVICES.PROJECT.TASK.NAME_EXISTS_ERROR_MESSAGE",{taskName:e.name})))}))}updateHourlyRate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={amount:Math.round(100*e.hourlyRate.amount),currency:e.hourlyRate.currency,since:e.hourlyRate.since};return this.http.put(`/workspaces/${t}/projects/${e.projectId}/tasks/${e.id}/hourly-rate`,i).pipe(Object(a.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(c.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.ERROR_MESSAGE"),e&&e.error&&e.error.message)}))}updateCostRate(e){const t=this.workspaceService.getDefaultWorkspaceId(),i={amount:null!=e.costRate.amount?Math.round(100*e.costRate.amount):null,currency:e.costRate.currency,since:e.costRate.since};return this.http.put(`/workspaces/${t}/projects/${e.projectId}/tasks/${e.id}/cost-rate`,i).pipe(Object(a.a)(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))),Object(c.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.ERROR_MESSAGE"),e&&e.error&&e.error.message)}))}delete(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`/workspaces/${t}/projects/${e.projectId}/tasks/${e.id}`).pipe(Object(c.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.DELETE.SUCESS_MESSAGE_WITH_NAME",{taskName:e.name}))},e=>{this.error.next(e)}))}changeStatus(e,t){const i=this.workspaceService.getDefaultWorkspaceId();this.http.get(`/workspaces/${i}/projects/task/${e}/${t}`).subscribe(e=>{this.updatedTask.next(e),this.toaster.pop("success",this.translateService.instant("SERVICES.PROJECT.TASK.UPDATE.SUCESS_MESSAGE_WITH_NAME",{taskName:new s.a(e).name}))},e=>{this.error.next(e)})}ofTaskIds(e){const t=this.workspaceService.getDefaultWorkspaceId();this.http.post(`/workspaces/${t}/projects/taskIds`,{ids:e}).subscribe(e=>{this.allTasks.next(e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e))))},e=>{this.error.next(e)})}ofProjectIds(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${t}/projects/tasks`,e).pipe(Object(a.a)(e=>e.map(e=>new s.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e)))))}}return e.\u0275fac=function(t){return new(t||e)(d.fc(o.c),d.fc(l.a),d.fc(u.a),d.fc(r.a),d.fc(h.f))},e.\u0275prov=d.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},iNpZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("fXoL");class s{constructor(e,t){this._color=e,this._isActive=t}get color(){return this._color}set color(e){this._color=e}get isActive(){return this._isActive}set isActive(e){this._isActive=e}}var r=i("NHP+"),o=i("2rWG"),a=i("sbmM"),c=i("9Gc3");let l=(()=>{class e{constructor(){this.isSelectItem=new n.n}ngOnInit(){}clickedItem(){this.isSelectItem.emit(this.color)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["color-item"]],inputs:{color:"color"},outputs:{isSelectItem:"isSelectItem"},decls:1,vars:4,consts:[[1,"cl-color-picker-item","pointer",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"span",0),n.jc("click",(function(){return t.clickedItem()})),n.Wb()),2&e&&(n.Wc("background",t.color.color,n.Kb),n.Hb("cl-active",t.color.isActive))},encapsulation:2}),e})();var u=i("qUN8"),d=i("ofXK"),h=i("R9Cn"),p=i("sYmb");const b=["dropdown"];function f(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"color-item",15),n.jc("isSelectItem",(function(t){return n.Oc(e),n.nc(2).updateColorItems(t)})),n.Wb(),n.Ub()}if(2&e){const e=t.$implicit;n.Cb(1),n.wc("color",e)}}function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"span",16),n.jc("colorPickerChange",(function(t){return n.Oc(e),n.nc(2).defaultColorItem.color=t}))("colorPickerChange",(function(t){return n.Oc(e),n.nc(2).setDefaultColor(t)})),n.Wb()}if(2&e){const e=n.nc(2);n.Wc("color",e.defaultColorItem.color),n.wc("colorPicker",e.defaultColorItem.color)("cpSaveClickOutside",!0)("cpWidth","180px")("cpAlphaChannel","disabled")("cpToggle",!0)}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",17),n.jc("click",(function(){return n.Oc(e),n.nc(2).toggleColorPicker()})),n.Wb()}}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"div",7),n.Xc(2,f,2,1,"ng-container",8),n.Wb(),n.Sb(3,"div",9),n.Xb(4,"div",10),n.Xb(5,"color-item",11),n.jc("click",(function(){return n.Oc(e),n.nc().toggleColorPicker()})),n.Wb(),n.Xb(6,"span",12),n.jc("click",(function(){return n.Oc(e),n.nc().toggleColorPicker()})),n.Zc(7),n.oc(8,"translate"),n.Wb(),n.Xc(9,m,1,7,"span",13),n.Xc(10,g,1,0,"div",14),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.wc("ngForOf",e.colorItems),n.Cb(3),n.wc("color",e.defaultColorItemCustom),n.Cb(2),n.bd(" ",n.pc(8,5,"PROJECTS.NEW_PROJECT.CUSTOM_COLOR_LABEL")," "),n.Cb(2),n.wc("ngIf",e.isCustomPickerOpen),n.Cb(1),n.wc("ngIf",e.isCustomPickerOpen)}}let C=(()=>{class e{constructor(e){this.cd=e,this.unsubscribe$=new r.a,this.color=new n.n,this.closeCreateProject=new n.n,this.editPermission=!0,this.colorPicked=new n.n}ngOnInit(){this.colorItems=[new s("#F44336",!1),new s("#E91E63",!1),new s("#FF5722",!1),new s("#FF9800",!1),new s("#FFC107",!1),new s("#8BC34A",!1),new s("#4CAF50",!1),new s("#00BCD4",!1),new s("#009688",!1),new s("#03A9F4",!1),new s("#3F51B5",!1),new s("#673AB7",!1),new s("#9C27B0",!1),new s("#607D8B",!1),new s("#795548",!1)];const e=this.colorItems[Math.floor(Math.random()*this.colorItems.length)];this.defaultColorItem=this.getRandomColorItem(e),this.defaultColorItemCustom=this.getRandomColorItem(e),this.setPickerColorFromProjectColor(),this.updateColorItems(this.defaultColorItem)}setPickerColorFromProjectColor(){this.colorEditProject&&(this.defaultColorItem.color!==this.colorEditProject&&(this.defaultColorItem.color=this.colorEditProject),this.defaultColorItemCustom.color!==this.colorEditProject&&(this.defaultColorItemCustom.color=this.colorEditProject,this.defaultColorItemCustom.isActive=!0))}getRandomColorItem(e){return new s(e.color,e.isActive)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}updateColorItems(e){for(const t of this.colorItems)t.isActive=t.color===e.color;this.defaultColorItem.color=e.color,this.defaultColorItem.color!==this.defaultColorItemCustom.color&&(this.defaultColorItemCustom.isActive=!1),this.color.emit(this.defaultColorItem.color),this.colorPicked.emit(this.defaultColorItem),this.dropdown&&this.dropdown.closeDropdown()}setDefaultColor(e){this.defaultColorItem.color=e,this.defaultColorItemCustom.color=e,this.defaultColorItemCustom.isActive=!0}toggleColorPicker(){this.isCustomPickerOpen&&this.updateColorItems(this.defaultColorItemCustom),this.isCustomPickerOpen=!this.isCustomPickerOpen,setTimeout(()=>{this.disableDropdownKey=this.isCustomPickerOpen,this.cd.detectChanges()})}closePicker(){this.isSelect=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h))},e.\u0275cmp=n.Lb({type:e,selectors:[["color-chooser"]],viewQuery:function(e,t){var i;1&e&&n.gd(b,!0),2&e&&n.Kc(i=n.kc())&&(t.dropdown=i.first)},inputs:{colorEditProject:"colorEditProject",editPermission:"editPermission"},outputs:{color:"color",closeCreateProject:"closeCreateProject"},decls:6,vars:4,consts:[[3,"dropdownKey"],["dropdown","dropdownKey"],[1,"cl-w-100"],["dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle","cl-btn-color-picker",3,"disableCloseDropdownKey","disabled"],[3,"color"],["class","cl-dropdown-menu cl-color-picker-dropdown cl-show",4,"dropdownKeyContent"],[1,"cl-dropdown-menu","cl-color-picker-dropdown","cl-show"],[1,"cl-d-flex",2,"flex-wrap","wrap"],[4,"ngFor","ngForOf"],[1,"cl-dropdown-divider","cl-my-1"],[1,"cl-d-flex","cl-align-items-center"],["doNotCloseDropdown","",3,"color","click"],[1,"cl-small","cl-d-inline-block","cl-ml-1",3,"click"],[3,"colorPicker","color","cpSaveClickOutside","cpWidth","cpAlphaChannel","cpToggle","colorPickerChange",4,"ngIf"],["class","cl-color-chooser-custom-blocker",3,"click",4,"ngIf"],[3,"color","isSelectItem"],[3,"colorPicker","cpSaveClickOutside","cpWidth","cpAlphaChannel","cpToggle","colorPickerChange"],[1,"cl-color-chooser-custom-blocker",3,"click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0,1),n.Xb(2,"div",2),n.Xb(3,"button",3),n.Sb(4,"color-item",4),n.Wb(),n.Wb(),n.Xc(5,v,11,7,"div",5),n.Wb()),2&e&&(n.wc("dropdownKey",!t.editPermission),n.Cb(3),n.wc("disableCloseDropdownKey",t.disableDropdownKey)("disabled",!t.editPermission),n.Cb(1),n.wc("color",t.defaultColorItem))},directives:[o.a,a.a,c.a,l,u.a,d.t,d.u,h.a],pipes:[p.e],encapsulation:2}),e})()},iO9P:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t){if(!e||!t)return this.label="GLOBAL.PROJECT_LABEL",void(this.required=!1);const i=e.forceTasks||e.forceProjects;this.label=t.settings.projectPickerSpecialFilter?"TIMESHEET2.SHARED.TASK_PROJECT_PLACEHOLDER":e.forceTasks?"GLOBAL.TASK_LABEL":"GLOBAL.PROJECT_LABEL",this.required=i}}},iTUp:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},jJjg:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("9Trn"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a,r.d]]}),e})()},jtSf:function(e,t,i){"use strict";i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"g",(function(){return m})),i.d(t,"d",(function(){return g})),i.d(t,"c",(function(){return v})),i.d(t,"b",(function(){return C})),i.d(t,"f",(function(){return E})),i.d(t,"a",(function(){return w})),i.d(t,"e",(function(){return S}));var n=i("wd/R"),s=i("ZHjv"),r=i("eBys"),o=i("RWlN"),a=i("5Ra6"),c=i("eDxF"),l=i("rnVd"),u=i("6t6a"),d=i("bGsH");function h(e,t){e=e.clone();const i=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];for(;e.weekday()!==i.indexOf(t);)e=e.subtract(1,"day").startOf("day");return e}function p(e){const t=n().startOf("day");return e.isSame(t,"d")}function b(e){const t=n().subtract(1,"days").startOf("day");return e.isSame(t,"d")}function f(e,t,i){const s=(e&&e.clone()||n()).add(i,"days").startOf("day");return t.isSame(s,"d")}function m(e){const t=n.utc(e.start),i=n().set({date:t.date(),month:t.month(),year:t.year()}).startOf("day"),s=n.utc(e.end);return{start:i,end:n().set({date:s.date(),month:s.month(),year:s.year()}).startOf("day")}}function g(e,t,i,a,c){t=t||"MONDAY";const u=e.start.clone(),d=e.end.clone(),h=new r.a(i,a),f=a.getCurrentLang(),m=c?`${u.locale(f).format("MMM D, YYYY")} -\n              ${d.locale(f).format("MMM D, YYYY")}`:`${u.locale(f).format("MMM D")} -\n              ${d.locale(f).format("MMM D")}`,g={labelPrint:m,zoomLevel:null,dateRangeType:l.a.ABSOLUTE,label:m};return u.isSame(d,"day")?(g.zoomLevel=null,p(u)?(g.label=i.instant("GLOBAL.TODAY_LABEL"),g.dateRangeType=l.a.TODAY,g):b(u)?(g.label=i.instant("GLOBAL.YESTERDAY_LABEL"),g.dateRangeType=l.a.YESTERDAY,g):(g.label=""+h.transform(u),g)):function(e,t,i){const r=Object(s.f)(i),o=r,a=n(r).add(6,"days").endOf("day");return o.isSame(e,"d")&&a.isSame(t,"d")}(u,d,t)?(g.label=i.instant("TRACKER.APPROVAL.THIS_WEEK"),g.zoomLevel=o.a.WEEK,g.dateRangeType=l.a.THIS_WEEK,g):function(e,t,i){const r=Object(s.f)(i),o=n(r).subtract(1,"week"),a=n(r).subtract(1,"day").endOf("day");return o.isSame(e,"d")&&a.isSame(t,"d")}(u,d,t)?(g.label=i.instant("TRACKER.APPROVAL.LAST_WEEK"),g.zoomLevel=o.a.WEEK,g.dateRangeType=l.a.LAST_WEEK,g):function(e,t,i){const r=Object(s.f)(i),o=n(r).subtract(2,"week"),a=n(r).subtract(1,"day").endOf("day");return o.isSame(e,"d")&&a.isSame(t,"d")}(u,d,t)?(g.label=i.instant("GLOBAL.PAST_2_WEEKS_LABEL"),g.zoomLevel=o.a.WEEK,g.dateRangeType=l.a.PAST_TWO_WEEKS,g):function(e,t){const i=n().startOf("month"),s=n().endOf("month");return i.isSame(e,"d")&&s.isSame(t,"d")}(u,d)?(g.label=i.instant("GLOBAL.THIS_MONTH_LABEL"),g.zoomLevel=o.a.MONTH,g.dateRangeType=l.a.THIS_MONTH,g):function(e,t){const i=n().subtract(1,"month").startOf("month"),s=n().subtract(1,"month").endOf("month");return i.isSame(e,"d")&&s.isSame(t,"d")}(u,d)?(g.label=i.instant("GLOBAL.LAST_MONTH_LABEL"),g.zoomLevel=o.a.MONTH,g.dateRangeType=l.a.LAST_MONTH,g):function(e,t){const i=n().startOf("year"),s=n().endOf("year");return i.isSame(e,"d")&&s.isSame(t,"d")}(u,d)?(g.label=i.instant("GLOBAL.THIS_YEAR_LABEL"),g.zoomLevel=o.a.YEAR,g.dateRangeType=l.a.THIS_YEAR,g):function(e,t){const i=n().subtract(1,"year").startOf("year"),s=n().subtract(1,"year").endOf("year");return i.isSame(e,"d")&&s.isSame(t,"d")}(u,d)?(g.label=i.instant("GLOBAL.LAST_YEAR_LABEL"),g.zoomLevel=o.a.YEAR,g.dateRangeType=l.a.LAST_YEAR,g):u.isSame(n(u).startOf("year"),"day")&&d.isSame(n(d).endOf("year"),"day")?(g.zoomLevel=o.a.YEAR,g.label=u.isSame(d,"year")?""+u.format("YYYY"):`${u.format("YYYY")} - ${d.format("YYYY")}`,g):1===u.date()&&d.daysInMonth()===d.date()?(g.zoomLevel=o.a.MONTH,g.label=u.isSame(d,"month")?""+u.format("MMMM, YYYY"):`${u.format("MMMM, YYYY")} - ${d.format("MMMM, YYYY")}`,g):(g.zoomLevel=!g.zoomLevel&&d.diff(u,"day")>1?o.a.WEEK:null,g)}function v(e,t){return p(e)?{label:t.instant("GLOBAL.TODAY_LABEL")}:b(e)?{label:t.instant("GLOBAL.YESTERDAY_LABEL")}:{label:u.a.NONE}}function C(e,t){const i=e.clone(),n={label:u.a.NONE};return f(t,i,0)?(n.label=u.a.UPON_RECEIPT,n):f(t,i,10)?(n.label=u.a.AFTER_10,n):f(t,i,15)?(n.label=u.a.AFTER_15,n):f(t,i,30)?(n.label=u.a.AFTER_30,n):f(t,i,60)?(n.label=u.a.AFTER_60,n):f(t,i,90)?(n.label=u.a.AFTER_90,n):n}function E(e,t){if(!e)return null;if(t=t||d.b.MONDAY,e===c.a.TODAY)return{start:n.utc().startOf("day"),end:n.utc().endOf("day")};if(e===c.a.YESTERDAY)return{start:n.utc().subtract(1,"day").startOf("day"),end:n.utc().subtract(1,"day").endOf("day")};if(e===c.a.THIS_WEEK)return Object(s.d)(t,new a.a);if(e===c.a.LAST_WEEK){const e=Object(s.d)(t,new a.a);return{start:e.start.subtract(1,"week"),end:e.end.subtract(1,"week")}}if(e===c.a.PAST_TWO_WEEKS){const e=Object(s.d)(t,new a.a);return{start:e.start.subtract(2,"week"),end:e.end.subtract(1,"week")}}return e===c.a.THIS_MONTH?{start:n.utc().startOf("month"),end:n.utc().endOf("month")}:e===c.a.LAST_MONTH?{start:n.utc().subtract(1,"month").startOf("month"),end:n.utc().subtract(1,"month").endOf("month")}:null}function w(e,t,i){const n=null==t?void 0:t.map(e=>e.toString());return!(!n||n.includes(e.format("dddd").toUpperCase()))||(null==i?void 0:i.some(t=>e.format(t.occursAnnually?"MM-DD":"YYYY-MM-DD")===t.day.format(t.occursAnnually?"MM-DD":"YYYY-MM-DD")))}function S(e,t){return Array.apply(null,Array(7)).map((function(i,s){return n(s,"e").locale(e).format(t)}))}},"jy+1":function(e,t,i){"use strict";function n(e,t){return(i,n)=>{const s=e?1:-1,r=e?-1:1,o=t(i),a=t(n);return o>a?r:o<a?s:0}}function s(e,t){return(i,n)=>{const s=t?1:-1,r=t?-1:1,o=e(i),a=e(n);return o>a?r:o<a?s:0}}function r(e,t){return(i,n)=>{const s=t?1:-1,r=t?-1:1,o=e(i),a=e(n);return o>a?r:o<a?s:0}}function o(e,t,i){return(n,s)=>{const r=i?1:-1,o=i?-1:1;let a=e(n),c=e(s);return a!=c||(a=t(n),c=t(s)),a>c?o:a<c?r:0}}i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return o}))},"kKK/":function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n=i("fXoL"),s=i("XNiG"),r=i("OmiP"),o=i("xoOP"),a=i("tyNb"),c=i("ofXK"),l=i("2rWG"),u=i("sbmM"),d=i("TmxI"),h=i("qUN8"),p=i("dlKe"),b=i("e0xV"),f=i("1kSV"),m=i("sYmb");function g(e,t){if(1&e&&(n.Xb(0,"label"),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.ad(n.pc(2,1,e.title))}}function v(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12),n.Xb(1,"div",13),n.Xb(2,"input-search",14),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc(2);return i.search=t,!i.offlineSearch&&i.onSearchChange()})),n.oc(3,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("debounceTime",e.debounceTime)("search",e.search)("placeholder",n.pc(3,3,e.placeholder))}}function C(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",26),n.jc("click",(function(){n.Oc(e);const i=t.$implicit,s=n.nc(2).$implicit,r=n.nc(2);return r.selectFilter(s,i.value),r.isFilterOptionsExpanded=!1})),n.Xb(1,"div",27),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(2).$implicit,s=n.nc(2);n.Hb("cl-active",e.value===s.filterQuery[i.key]),n.Cb(2),n.ad(n.pc(3,3,e.label))}}function E(e,t){if(1&e&&(n.Xb(0,"div",23),n.Xb(1,"div",24),n.Xc(2,C,4,5,"a",25),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit;n.Cb(2),n.wc("ngForOf",e.options)}}function w(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"div",15),n.Xb(2,"div",16),n.Xb(3,"div",17),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xb(6,"div",18),n.Xb(7,"a",19),n.jc("click",(function(){n.Oc(e);const t=n.nc(2);return t.isFilterOptionsExpanded=!t.isFilterOptionsExpanded})),n.Xb(8,"span",20),n.Zc(9),n.oc(10,"translate"),n.Wb(),n.Sb(11,"img",21),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xc(12,E,3,1,"div",22),n.Ub()}if(2&e){const e=t.$implicit,i=n.nc(2);n.Cb(4),n.ad(n.pc(5,3,"GLOBAL.SHOW_LABEL")),n.Cb(5),n.bd(" ",n.pc(10,5,e.getLabelOf(i.filterQuery[e.key])||e.key)," "),n.Cb(3),n.wc("ngIf",i.isFilterOptionsExpanded)}}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",31,32),n.jc("click",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!1,i.label)}))("keyup.enter",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!1)})),n.Zc(2),n.oc(3,"translate"),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.Lc(3),i=n.nc(2);n.Hb("cl-active",e.value===i.value),n.wc("ngbPopover",t),n.Cb(2),n.bd(" ",n.pc(3,4,e.label)," ")}}function y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",34),n.jc("click",(function(){return n.Oc(e),n.nc(4).navigateToUpgrade()})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.Cb(1),n.ad(n.pc(2,1,"GLOBAL.UPGRADE_BTN")))}function O(e,t){if(1&e&&(n.Xc(0,y,3,3,"a",33),n.Zc(1)),2&e){const e=n.nc().$implicit;n.wc("ngIf",e.showUpgradeLink),n.Cb(1),n.bd(" ",e.popUpText," ")}}function A(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",35,32),n.jc("click",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!0)}))("keyup.enter",(function(){n.Oc(e);const t=n.Lc(1),i=n.nc().$implicit;return n.nc(2).setValue(i.value,t,!0)})),n.Zc(2),n.oc(3,"translate"),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.Lc(3);n.Hb("cl-dropdown-item-disabled",!0),n.wc("ngbPopover",t),n.Cb(2),n.bd(" ",n.pc(3,4,e.label)," ")}}function k(e,t){if(1&e&&(n.Xb(0,"div"),n.Xc(1,S,4,6,"a",28),n.Xc(2,O,2,2,"ng-template",null,29,n.Yc),n.Xc(4,A,4,6,"a",30),n.Wb()),2&e){const e=t.$implicit;n.Cb(1),n.wc("ngIf",!e.popUpText),n.Cb(3),n.wc("ngIf",e.popUpText)}}function T(e,t){1&e&&(n.Xb(0,"span",37),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.NO_RESULTS_LABEL")," "))}function D(e,t){if(1&e&&(n.Vb(0),n.Xc(1,T,3,3,"span",36),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.wc("ngIf",e.search&&!e.filteredList.length)}}const I=function(e){return{width:e}};function _(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",5),n.Xc(1,v,4,5,"div",6),n.Xb(2,"div",7,8),n.jc("scrolled",(function(){return n.Oc(e),n.nc().onScroll()})),n.Xc(4,w,13,7,"ng-container",9),n.Xc(5,k,5,2,"div",10),n.Xc(6,D,2,1,"ng-container",0),n.Sb(7,"span",11),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Hb("cl-dropdown-menu-right",e.positionRight),n.wc("ngStyle",n.Bc(11,I,e.setFixedWidth?"300px":"auto")),n.Cb(1),n.wc("ngIf",e.enableSearch),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngForOf",e.filterOptions),n.Cb(1),n.wc("ngForOf",e.filteredList)("ngForTrackBy",e.trackByFn),n.Cb(1),n.wc("ngIf",e.enableSearch)}}var R=function(e){return e.STANDARD="STANDARD",e.SMALL="SMALL",e.TEXT="TEXT",e.DROPDOWN="DROPDOWN",e}({});let L=(()=>{class e{constructor(e,t,i){this.cd=e,this.router=t,this.activatedRoute=i,this.enableSearch=!1,this.type=R.STANDARD,this.placeholder="GLOBAL.SEARCH_PLACEHOLDER",this.positionRight=!1,this.labelProp="name",this.debounceTime=300,this.debounceTimeHover=100,this.isDisabled=!1,this.offlineSearch=!0,this.search="",this.isHoverEnabled=!1,this.setFixedWidth=!1,this.onChanged=new n.n,this.onSelected=new n.n,this.onChangedDropdown=new n.n,this.onOpen=new n.n,this.onClose=new n.n,this.loadMore=new n.n,this.onFilterOptionChange=new n.n,this.unsubscribe$=new s.a,this.triggerPipeDetection=0,this.configClasses={[R.STANDARD]:"cl-btn cl-btn-outline-light cl-w-100 cl-text-left cl-dropdown-toggle cl-cut-text pointer",[R.SMALL]:"cl-btn cl-btn-sm cl-btn-outline-light cl-dropdown-toggle pointer",[R.TEXT]:"cl-dropdown-link-text",[R.DROPDOWN]:"cl-w-100 cl-text-left pointer cl-dropdown-toggle cl-cut-text"}}set list(e){this._list=e,this.isInitialized&&this.setSelectedLabel()}get list(){return this._list}set value(e){this._value=e,this.isInitialized&&this.setSelectedLabel()}get value(){return this._value}set filterQuery(e){this._filterQuery=Object(o.f)(e)}get filterQuery(){return this._filterQuery}ngOnInit(){this.initLabel?this.selectedLabel=this.initLabel:this.setSelectedLabel(),this.classes=this.configClasses[this.type]||"",this.isInitialized=!0,this.isUserGroupEmpty&&(this.isDisabled=!0)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}onScroll(){this.loadMore.emit()}triggerDetection(){this.triggerPipeDetection++,this.setSelectedLabel(),this.cd.markForCheck()}onSearchChange(){this.emitFilters()}selectFilter(e,t){const i=e.key;this.filterQuery[i]!==t&&(this.filterQuery[i]=t,this.emitFilters())}emitFilters(){const e={searchTerm:this.offlineSearch?"":this.search};this.filterOptions&&this.filterOptions.forEach(t=>{e[t.key]=this.filterQuery[t.key]}),this.onFilterOptionChange.emit(e)}opened(){this.onOpen.emit()}closed(){this.onClose.emit()}setSelectedLabel(){const e=this.list&&this.list.filter(e=>e.value===this.value)[0];this.selectedLabel=e?e.label:this.itemLabel||this.overrideSelectedLabel||this.value}setValue(e,t,i,n){if(i)t.isOpen()?t.close():t.open();else{if(e===this.value)return;this.value=e,this.setSelectedLabel(),this.onChanged.emit(e),this.onSelected.emit(n);const t=r.a.getDropdownOf(this.filteredList,e);this.onChangedDropdown.emit(t)}}get filteredList(){if(!this.offlineSearch)return this.list;const e=this.search&&this.search.trim().toLowerCase();return this.enableSearch&&e?this.list.filter(t=>t.label.toLowerCase().indexOf(e)>-1):this.list}trackByFn(e,t){return t.value}navigateToUpgrade(){this.activatedRoute.snapshot.routeConfig.path.includes("workspaces")?this.router.navigate(["/upgrade"],{queryParams:{plan:"basic"}}):this.activatedRoute.snapshot.routeConfig.path.includes("projects")&&this.router.navigate(["/upgrade"],{queryParams:{plan:"pro"}})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(a.d),n.Rb(a.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-items"]],inputs:{title:"title",initLabel:"initLabel",overrideLabel:"overrideLabel",itemLabel:"itemLabel",enableSearch:"enableSearch",type:"type",placeholder:"placeholder",positionRight:"positionRight",filterOptions:"filterOptions",labelProp:"labelProp",debounceTime:"debounceTime",debounceTimeHover:"debounceTimeHover",isDisabled:"isDisabled",labelPrefix:"labelPrefix",offlineSearch:"offlineSearch",search:"search",isHoverEnabled:"isHoverEnabled",overrideSelectedLabel:"overrideSelectedLabel",isUserGroupEmpty:"isUserGroupEmpty",setFixedWidth:"setFixedWidth",list:"list",value:"value",filterQuery:"filterQuery"},outputs:{onChanged:"onChanged",onSelected:"onSelected",onChangedDropdown:"onChangedDropdown",onOpen:"onOpen",onClose:"onClose",loadMore:"loadMore",onFilterOptionChange:"onFilterOptionChange"},decls:10,vars:16,consts:[[4,"ngIf"],["data-cy","group-by",1,"cl-dropdown",3,"dropdownKey","isHoverEnabled","onOpen","onClose"],["tabindex","0","dropdownKeyButton","","dropdownKeyButtonHover","",1,"cl-dropdown-item-label",3,"ngClass","isHoverEnabled","debounceTime"],[1,"cl-dropdown-prefix","cl-d-none","cl-d-sm-inline"],["class","cl-dropdown-menu","openUpAtBottom","",3,"cl-dropdown-menu-right","ngStyle",4,"dropdownKeyContent"],["openUpAtBottom","",1,"cl-dropdown-menu",3,"ngStyle"],["class","cl-dropdown-menu-header",4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["scrollArea",""],[4,"ngFor","ngForOf"],[4,"ngFor","ngForOf","ngForTrackBy"],["dropdownClose","","tabindex","0"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","search","placeholder","onSearchChange"],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[1,"cl-dropdown-item-expand","cl-cut-text"],["src","assets/images/ui-icons/chevron-down.svg"],["class","cl-collapse cl-show",4,"ngIf"],[1,"cl-collapse","cl-show"],[1,"cl-collapse-content"],["doNotCloseDropdown","","class","cl-dropdown-item cl-cut-text-wrapper",3,"cl-active","click",4,"ngFor","ngForOf"],["doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],["doNotCloseDropdown","",1,"cl-cut-text"],["class","cl-dropdown-item cl-cut-text","tabindex","0","triggers","manual","placement","right","container","body","clickCloseDropdown","",3,"cl-active","ngbPopover","click","keyup.enter",4,"ngIf"],["popContent",""],["class","cl-dropdown-item cl-cut-text cl-no-outline","tabindex","0","triggers","manual","placement","right","container","body","doNotCloseDropdown","",3,"cl-dropdown-item-disabled","ngbPopover","click","keyup.enter",4,"ngIf"],["tabindex","0","triggers","manual","placement","right","container","body","clickCloseDropdown","",1,"cl-dropdown-item","cl-cut-text",3,"ngbPopover","click","keyup.enter"],["featurePopover","ngbPopover"],[3,"click",4,"ngIf"],[3,"click"],["tabindex","0","triggers","manual","placement","right","container","body","doNotCloseDropdown","",1,"cl-dropdown-item","cl-cut-text","cl-no-outline",3,"ngbPopover","click","keyup.enter"],["class","cl-dropdown-item",4,"ngIf"],[1,"cl-dropdown-item"]],template:function(e,t){1&e&&(n.Xc(0,g,3,3,"label",0),n.Xb(1,"div",1),n.jc("onOpen",(function(){return t.opened()}))("onClose",(function(){return t.closed()})),n.Xb(2,"span",2),n.Xb(3,"span",3),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Zc(6),n.oc(7,"translate"),n.oc(8,"translate"),n.Wb(),n.Xc(9,_,8,13,"div",4),n.Wb()),2&e&&(n.wc("ngIf",t.title),n.Cb(1),n.Hb("cl-disabled",t.isDisabled),n.wc("dropdownKey",t.isDisabled)("isHoverEnabled",t.isHoverEnabled),n.Cb(1),n.wc("ngClass",t.classes)("isHoverEnabled",t.isHoverEnabled)("debounceTime",t.debounceTimeHover),n.Cb(2),n.ad(n.pc(5,10,t.labelPrefix)),n.Cb(2),n.bd(" ",t.isUserGroupEmpty?n.pc(7,12,"REPORTS.SHARE_REPORT.USER_GROUPS_LABELS.NO_MEMBERS"):n.pc(8,14,t.overrideLabel||t.selectedLabel||t.initLabel)," "))},directives:[c.u,l.a,u.a,d.a,c.r,h.a,c.x,p.a,c.t,b.a,f.M],pipes:[m.e],encapsulation:2,changeDetection:0}),e})()},kRDX:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("fXoL"),s=i("MO+k"),r=i("Y4HG"),o=i("+EM1"),a=i("wd/R"),c=i("jy+1"),l=i("xoOP"),u=i("znhS"),d=i("ofXK"),h=i("F2Zd"),p=i("YnOA"),b=i("VMis"),f=i("sYmb"),m=i("LPYB");let g=(()=>{class e{constructor(e){this.translateService=e,this.chartDataDurationUnit="hours",this.updateDataOnChartChange=!1,this.currencySign="",this.showAllBarValues=new n.n,this.barChartType="bar",this.barChartLegend=!1,this.barChartOptions={responsive:!0,maintainAspectRatio:!1,title:{display:!0},defaultFontSize:14,defaultFontFamily:"'Roboto', sans-serif",scales:{xAxes:[{stacked:!0,gridLines:{display:!1,drawBorder:!0,lineWidth:4,color:h.e[Object(h.b)()].baseLineX},ticks:{fontSize:"12",fontColor:h.e[Object(h.b)()].dates}}],yAxes:[{stacked:!0,gridLines:{drawBorder:!1,borderDash:[1],borderDashOffset:2,color:h.e[Object(h.b)()].dotLines,zeroLineColor:h.e[Object(h.b)()].zeroLineColor},ticks:{beginAtZero:!0,min:0,fontColor:h.e[Object(h.b)()].durationY,callback:e=>0===e?"":("seconds"===this.chartDataDurationUnit&&(e/=3600),e.toFixed(e<1?2:1)+"h ")}}]},onClick:(e,t)=>{t&&t[0]&&this.showAllBarValues.emit(t[0]._index)},onHover:(e,t)=>{e.target.style.cursor=t[0]?"pointer":"default"},tooltips:{enabled:!1,custom:e=>{let t=0;e.dataPoints&&e.dataPoints.length>0&&(t=e.dataPoints[0].index);const i=[],n=[],s=this.totalDurationByDate[t];this.barChartData.forEach((e,n)=>{const r=Object(a.duration)(e.data[t],this.chartDataDurationUnit);i.push({time:r,label:e.label,percentage:(r.asSeconds()/s*100).toFixed(2),color:this.barChartColors&&this.barChartColors[n].backgroundColor||e.backgroundColor})}),i.sort(Object(c.b)(!0,e=>Object(a.duration)(e.time).asSeconds())).slice(0,10).forEach(e=>{0!==e.time.asSeconds()&&n.push({time:Object(p.a)(e.time,this.format),label:e.label,percentage:e.percentage,color:e.color})});const r=this.projectCountByDate&&this.projectCountByDate.length>0?this.projectCountByDate[t]-i.length:0;let o=document.getElementById("chartjs-tooltip");if(!o){o=document.createElement("div"),o.id="chartjs-tooltip";const e=Object(l.g)("table",null,"margin: 10px");o.appendChild(e),o.style.background=h.g[Object(h.b)()].bg,o.style.border="0",o.style.color=h.g[Object(h.b)()].color,o.style.margin="0",document.body.appendChild(o)}if(0===e.opacity)return void(o.style.opacity="0");o.classList.remove("above","below","no-transform"),o.classList.add(e.yAlign?e.yAlign:"no-transform");const u=this.barChartAllLabels||this.barChartLabels,d=u[t];if(e.body){const e=this.barChartEarnings&&1==this.barChartEarnings[t].length?Number(this.barChartEarnings[t][0].value/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" "+this.currency:null,i=this.createContent({label:d,earnedPerBar:e,totalTimeInSeconds:s,sortedItemsPerBar:n,itemsLeftCount:r,index:t}),a=o.querySelector("table");a.innerHTML="",a.appendChild(i),a.style.margin="0",a.style.fontSize="14px"}const b=document.getElementById("barChart").getBoundingClientRect();let f=0;u.length/2<t&&(f=o.offsetWidth),o.style.opacity="1",o.style.position="absolute",o.style.left=b.left-f+window.pageXOffset+e.caretX+"px",o.style.top=b.top+window.pageYOffset+e.caretY+"px",o.style.fontFamily=e._bodyFontFamily,o.style.fontSize=e.bodyFontSize+"px",o.style.fontStyle=e._bodyFontStyle,o.style.padding=e.yPadding+"px "+e.xPadding+"px",o.style.pointerEvents="none"}}},this.plugin={afterDatasetsDraw:e=>{"bar"===e.config.type&&(this.chart=e),Object(r.b)(e,this.billableTimes,this.currencySign,this.isBillabilityType)}}}set barChartData(e){this._barChartData=e,this.isInitialized&&this.initData()}get barChartData(){return this._barChartData}set currency(e){e=e||"";const t=Object(d.L)(e.toUpperCase(),"narrow"),i=t!==e.toUpperCase();this._currency=e,this.currencySign=i?t:e}get currency(){return this._currency}ngOnInit(){this.initData(),s.plugins.register(this.plugin)}ngOnChanges(){const e=this.barChartData.filter(e=>e.data.filter(e=>e>0).length>0).length>0;this.chart&&(this.chart.config.data.datasets=this.barChartData,this.barChartColors&&this.chart.config.data.datasets.forEach((e,t)=>{e.backgroundColor=this.barChartColors[t].backgroundColor,e.hoverBackgroundColor=this.barChartColors[t].backgroundColor}),this.chart.config.data.labels=this.barChartLabels,this.chart.options.scales.yAxes[0].display=e,this.chart.update())}ngOnDestroy(){s.plugins.unregister(this.plugin)}initData(){this.updateDataOnChartChange&&(this.initTimeLabels(),this.initColors(),this.isInitialized=!0)}initTimeLabels(){const e=new u.a;this.billableTimes=this.totalDurationByDate.map(t=>e.transform(t,this.format))}initColors(){this.barChartColors=this.barChartData.map(e=>new o.a(e.backgroundColor))}createContent({label:e,earnedPerBar:t,totalTimeInSeconds:i,sortedItemsPerBar:n,itemsLeftCount:s,index:r}){const o=Object(l.g)("tbody","chart-tooltip-tbody"),c=Object(l.g)("tr","chart-tooltip-header-tr"),u=Object(l.g)("th","chart-tooltip-header-th1");u.innerText=e;const d=Object(l.g)("th","chart-tooltip-header-th2");if(d.innerText=Object(p.a)(Object(a.duration)(i,"s"),this.format),c.appendChild(u),c.appendChild(d),this.canSeeRates&&this.isBillabilityType){const e=Object(l.g)("th","chart-tooltip-header-th3");e.innerText=t||"",c.appendChild(e)}if(o.appendChild(c),n.forEach((e,t)=>{if(this.tooltipConfig&&this.tooltipConfig.hideTableBody)return;let i;t===n.length-1&&s>0&&!this.isBillabilityType&&(i="border-bottom:1px dotted;padding: 0 0 10px 0;");const r=Object(l.g)("tr","chart-tooltip-tr",i),a=Object(l.g)("td","chart-tooltip-long-text"),c=Object(l.g)("span");if(!this.isBillabilityType){const t=Object(l.g)("i","chart-tooltip-circle","background:"+e.color);c.appendChild(t)}const u=Object(l.g)("span");u.innerText=e.label,c.appendChild(u),a.appendChild(c);const d=Object(l.g)("td",null,"padding: 0 20px; text-align: right");d.innerText=e.time;const h=Object(l.g)("td","chart-tooltip-td3");h.innerText=e.percentage+"%",r.appendChild(a),r.appendChild(d),r.appendChild(h),o.appendChild(r)}),this.barChartEarnings&&this.barChartEarnings[r].length>1&&this.barChartEarnings[r].forEach(e=>{const t=Object(l.g)("tr","chart-tooltip-tr"),i=Object(l.g)("td","chart-tooltip-long-text");i.innerText=b.a.getLabelName(e.type);const n=Object(l.g)("td",null,"padding: 0 20px; text-align: right"),s=Object(l.g)("td","chart-tooltip-td3");s.innerText=Number(e.value/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})+" "+this.currency,t.appendChild(i),t.appendChild(n),t.appendChild(s),o.appendChild(t)}),s>0){const e=Object(l.g)("tr","chart-tooltip-footer"),t=Object(l.g)("td",null,"margin: 0; width: 100%;padding:5px 0 0 0;");t.innerText=this.translateService.instant("GLOBAL.CLICK_TO_SEE_ALL"),t.setAttribute("colSpan","3"),e.appendChild(t),o.appendChild(e)}return o}chartClicked(e){}chartHovered(e){}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(f.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["bar-chart"]],inputs:{chartDataDurationUnit:"chartDataDurationUnit",tooltipConfig:"tooltipConfig",barChartLabels:"barChartLabels",barChartAllLabels:"barChartAllLabels",barChartData:"barChartData",updateDataOnChartChange:"updateDataOnChartChange",barChartColors:"barChartColors",barChartEarnings:"barChartEarnings",totalDurationByDate:"totalDurationByDate",billableTimes:"billableTimes",format:"format",currency:"currency",isBillabilityType:"isBillabilityType",canSeeRates:"canSeeRates",projectCountByDate:"projectCountByDate"},outputs:{showAllBarValues:"showAllBarValues"},features:[n.Ab],decls:2,vars:6,consts:[["id","barChart","baseChart","",1,"dashboard__bar-chart__canvas",3,"datasets","labels","options","legend","chartType","colors","chartHover","chartClick"]],template:function(e,t){1&e&&(n.Xb(0,"div"),n.Xb(1,"canvas",0),n.jc("chartHover",(function(e){return t.chartHovered(e)}))("chartClick",(function(e){return t.chartClicked(e)})),n.Wb(),n.Wb()),2&e&&(n.Cb(1),n.wc("datasets",t.barChartData)("labels",t.barChartLabels)("options",t.barChartOptions)("legend",t.barChartLegend)("chartType",t.barChartType)("colors",t.barChartColors))},directives:[m.a],encapsulation:2}),e})()},kZ14:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("yK97"),s=i("VYrk");class r{constructor(e){this._id=e&&e.id,this._description=e&&e.description,this._tagIds=e&&e.tagIds,this._userId=e&&e.userId,this._userName=e&&e.userName,this._billable=e&&e.billable||!1,this._taskId=e&&e.taskId,this._projectId=e&&e.projectId,this._timeInterval=new n.a(e&&e.timeInterval),this._workspaceId=e&&e.workspaceId,this._isLocked=e&&e.isLocked,this._hourlyRate=e&&e.hourlyRate&&e.hourlyRate.amount||0,this._costRate=e&&e.costRate&&e.costRate.amount||0,this._customFieldValues=e&&e.customFieldValues?e.customFieldValues.map(e=>new s.a(e)):[]}get id(){return this._id}get description(){return this._description}get tagIds(){return this._tagIds}get userId(){return this._userId}get userName(){return this._userName}get billable(){return this._billable}get taskId(){return this._taskId}get projectId(){return this._projectId}get timeInterval(){return this._timeInterval}get workspaceId(){return this._workspaceId}get isLocked(){return this._isLocked}get hourlyRate(){return this._hourlyRate}get costRate(){return this._costRate}get customFieldValues(){return this._customFieldValues}set id(e){this._id=e}set description(e){this._description=e}set tagIds(e){this._tagIds=e}set userId(e){this._userId=e}set userName(e){this._userName=e}set billable(e){this._billable=e}set taskId(e){this._taskId=e}set projectId(e){this._projectId=e}set timeInterval(e){this._timeInterval=e}set workspaceId(e){this._workspaceId=e}set isLocked(e){this._isLocked=e}set hourlyRate(e){this._hourlyRate=e}set costRate(e){this._costRate=e}set customFieldValues(e){this._customFieldValues=e}static fromFulls(e){return e.map(e=>this.from(e))}static fromSummary(e){return new r({id:e.id,description:e.description,tagIds:e.tags&&e.tags.map(e=>e.id),userId:e.user.id,userName:e.user.name,billable:e.billable,taskId:e.task&&e.task.id,projectId:e.project?e.project.id:null,timeInterval:e.timeInterval,isLocked:e.isLocked})}static fromSummaries(e){return e.map(e=>this.fromSummary(e))}static ofTimeEntries(e){return e?e.map(e=>({id:e.id,description:e.description,tagIds:e.tagIds,userId:e.userId,userName:e.userName,billable:e.billable,taskId:e.taskId,projectId:e.projectId,timeInterval:e.timeInterval.toObject(),workspaceId:e.workspaceId,isLocked:e.isLocked,customFieldValues:e.customFieldValues})):[]}static from(e){return new r({id:e.id,description:e.description,tagIds:e.tags&&e.tags.map(e=>e.id),userId:e.user&&e.user.id||e.userId,userName:e.user&&e.user.name,billable:e.billable,taskId:e.task&&e.task.id,projectId:e.project&&e.project.id,timeInterval:e.timeInterval,workspaceId:e.workspaceId,isLocked:e.isLocked,customFieldValues:e.customFieldValues})}}},kojQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("fXoL"),s=i("ofXK"),r=i("3Pt+"),o=i("sYmb");function a(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",6),n.Xb(1,"h1",7),n.Zc(2),n.Wb(),n.Xb(3,"button",8),n.jc("click",(function(){return n.Oc(e),n.nc().onClose.emit()})),n.Xb(4,"span",9),n.Sb(5,"img",10),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(2),n.ad(e.title)}}function c(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Sb(1,"hr",11),n.Xb(2,"div",12),n.Xb(3,"label"),n.Zc(4),n.oc(5,"translate"),n.Xb(6,"span",13),n.Zc(7),n.Wb(),n.Zc(8),n.oc(9,"translate"),n.Wb(),n.Xb(10,"input",14),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().confirm()}))("ngModelChange",(function(t){return n.Oc(e),n.nc().confirmationModel=t})),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc();n.Cb(4),n.bd("",n.pc(5,4,"GLOBAL.TYPE_TO_ACTION_PART")," "),n.Cb(3),n.ad(e.confirmationText),n.Cb(1),n.ad(n.pc(9,6,"SHARED_MODULES.DELETE_MODAL.DELETE_CONFIRM_TEXT_PART_2")),n.Cb(2),n.wc("ngModel",e.confirmationModel)}}const l=["*"];let u=(()=>{class e{constructor(){this.btnText="GLOBAL.DELETE_BTN",this.showConfirmation=!0,this.confirmationText="DELETE",this.onClose=new n.n,this.onDelete=new n.n,this.confirmationModel=""}confirm(){!this.inProgress&&this.isValid&&this.onDelete.emit(!0)}get isValid(){return!this.showConfirmation||this.confirmationModel.trim().toLowerCase()===this.confirmationText.toLowerCase()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Lb({type:e,selectors:[["delete-confirm-modal"]],inputs:{title:"title",btnText:"btnText",inProgress:"inProgress",showConfirmation:"showConfirmation",confirmationText:"confirmationText"},outputs:{onClose:"onClose",onDelete:"onDelete"},ngContentSelectors:l,decls:11,vars:9,consts:[["class","cl-modal-header",4,"ngIf"],[1,"cl-modal-body"],[4,"ngIf"],[1,"cl-modal-footer"],[3,"click"],["ngbAutofocus","","type","button",1,"cl-btn","cl-btn-danger",3,"disabled","click"],[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"],[1,"cl-my-3"],[1,"cl-form-group","cl-text-left","cl-mb-0"],[1,"cl-text-uppercase"],["type","text","ngbAutofocus","",1,"cl-form-control",3,"ngModel","keyup.enter","ngModelChange"]],template:function(e,t){1&e&&(n.vc(),n.Xc(0,a,6,1,"div",0),n.Xb(1,"div",1),n.uc(2),n.Xc(3,c,11,8,"ng-container",2),n.Wb(),n.Xb(4,"div",3),n.Xb(5,"a",4),n.jc("click",(function(){return t.onClose.emit()})),n.Zc(6),n.oc(7,"translate"),n.Wb(),n.Xb(8,"button",5),n.jc("click",(function(){return t.confirm()})),n.Zc(9),n.oc(10,"translate"),n.Wb(),n.Wb()),2&e&&(n.wc("ngIf",t.title),n.Cb(3),n.wc("ngIf",t.showConfirmation),n.Cb(3),n.ad(n.pc(7,5,"GLOBAL.CANCEL_BTN")),n.Cb(2),n.wc("disabled",t.inProgress||!t.isValid),n.Cb(1),n.ad(n.pc(10,7,t.btnText)))},directives:[s.u,r.c,r.s,r.v],pipes:[o.e],encapsulation:2}),e})()},ksGH:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},ktZA:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var n=i("fXoL"),s=(i("NTZZ"),i("qrIO")),r=i("XLnJ"),o=i("kGbF"),a=i("wd/R"),c=i("OmiP"),l=function(e){return e.PROJECT="PROJECT",e.CLIENT="CLIENT",e.USER="USER",e.TASK="TASK",e.TIME_ENTRY="TIME_ENTRY",e.USER_GROUP="USER_GROUP",e.TIME="TIME",e.EARNINGS="EARNINGS",e.TAG="TAG",e.DATE="DATE",e}({});new c.a(l.PROJECT,"Project"),new c.a(l.CLIENT,"Client"),new c.a(l.USER,"User"),new c.a(l.TASK,"Task"),new c.a(l.TIME_ENTRY,"Time Entry"),new c.a(l.USER_GROUP,"User Group"),new c.a(l.TAG,"Tag"),new c.a(l.DATE,"Date"),new c.a(l.TIME,"Time"),new c.a(l.EARNINGS,"Earnings");var u=i("hV/V"),d=i("sYmb"),h=i("uX6w"),p=i("6Dzi"),b=i("ofXK"),f=i("1+qu");function m(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",6),n.Sb(2,"tr",9),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.nc(3);n.Cb(2),n.wc("lang",i.currentLang)("group",e)("format",i.format)("currency",i.report.workspace.currency)("showCurrency",i.report.filters.amountOptions.length)("isProject",!i.isGroupByProject)("showTime",!i.report.filters.amountOptions.length)("isExpandedMobileView",i.isExpandedMobileView)("isDesktop",i.isDesktop)}}function g(e,t){if(1&e&&(n.Vb(0),n.Xc(1,m,3,9,"ng-container",4),n.Ub()),2&e){const e=n.nc().$implicit;n.Cb(1),n.wc("ngForOf",e.children)}}function v(e,t){if(1&e&&(n.Vb(0),n.Xb(1,"div",6),n.Sb(2,"tr",7),n.Wb(),n.Xc(3,g,2,1,"ng-container",8),n.Ub()),2&e){const e=t.$implicit,i=n.nc();n.Cb(2),n.wc("lang",i.currentLang)("group",e)("format",i.format)("isProject",i.isGroupByProject)("showTime",!i.report.filters.amountOptions.length)("currency",i.report.workspace.currency)("showCurrency",i.report.filters.amountOptions.length)("isDesktop",i.isDesktop)("isExpandedMobileView",i.isExpandedMobileView)("isExpanded",i.isExpanded),n.Cb(1),n.wc("ngIf",e.isExpanded)}}function C(e,t){if(1&e&&n.Sb(0,"tr",10),2&e){const e=n.nc();n.wc("lang",e.currentLang)("group",e.weeklyResponse.totalsByDay)("currency",e.report.workspace.currency)("showCurrency",e.report.filters.amountOptions.length)("format",e.format)("isProject",!1)("showTime",!e.report.filters.amountOptions.length)("isExpandedMobileView",e.isExpandedMobileView)("isDesktop",e.isDesktop)}}let E=(()=>{class e{constructor(e,t){this.translateService=e,this.translationStore=t,this.amountOptions=s.a,this.export=new n.n}set weeklyResponse(e){e&&(this._weeklyResponse=e,this.initData())}get weeklyResponse(){return this._weeklyResponse}initData(){this.currentLang=this.translationStore.getCurrentLang();const e={start:a(this.report.filters.dateRangeStart).clone(),end:a(this.report.filters.dateRangeEnd).clone()};this.weeklyResponse.totalsByDay.name=this.translateService.instant("APPROVAL.GROUPS.TOTAL_TIME")+":",this.week=Object(o.d)(e.start,this.report.user.timeZone),this.isGroupByProject=this.report.filters.weeklyGroup===l.PROJECT}exportAsPdf(){this.export.emit(r.a.PDF)}exportAsCsv(){this.export.emit(r.a.CSV)}exportAsXlsx(){this.export.emit(r.a.XLSX)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(d.f),n.Rb(u.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["shared-report-weekly"]],inputs:{hasEnterpriseFeatures:"hasEnterpriseFeatures",report:"report",isDesktop:"isDesktop",format:"format",weeklyResponse:"weeklyResponse"},outputs:{export:"export"},decls:9,vars:19,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0",3,"amountOptions","totalNumberOfEntries","format","isCostRateActive","isRounding","totalInfo","isAdminOrOwner","canSeeRates","workspaceInfo","isShared","exportAsPdf","exportAsCsv","exportAsExcel"],[1,"cl-page-component-wrapper"],[1,"cl-table","cl-table-bordered","cl-remove-cell-borders","cl-text-gray-6","cl-table-weekly-report"],["weekly-group-header","",3,"mainLabel","isDesktop","isExpanded","isExpandedMobileView","week","onExpandMobileView","onExpand"],[4,"ngFor","ngForOf"],["weekly-group","","class","cl-bg-light cl-table-footer",3,"lang","group","currency","showCurrency","format","isProject","showTime","isExpandedMobileView","isDesktop",4,"ngIf"],[1,"cl-row-hover-shadow"],["weekly-group","",3,"lang","group","format","isProject","showTime","currency","showCurrency","isDesktop","isExpandedMobileView","isExpanded"],[4,"ngIf"],["weekly-group","",1,"cl-component-row-colored",3,"lang","group","format","currency","showCurrency","isProject","showTime","isExpandedMobileView","isDesktop"],["weekly-group","",1,"cl-bg-light","cl-table-footer",3,"lang","group","currency","showCurrency","format","isProject","showTime","isExpandedMobileView","isDesktop"]],template:function(e,t){1&e&&(n.Xb(0,"table-info",0),n.jc("exportAsPdf",(function(){return t.exportAsPdf()}))("exportAsCsv",(function(){return t.exportAsCsv()}))("exportAsExcel",(function(){return t.exportAsXlsx()})),n.Wb(),n.Xb(1,"div",1),n.Xb(2,"table",2),n.Xb(3,"thead"),n.Xb(4,"tr",3),n.jc("onExpandMobileView",(function(e){return t.isExpandedMobileView=e}))("onExpand",(function(e){return t.isExpanded=e})),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Xb(6,"tbody"),n.Xc(7,v,4,11,"ng-container",4),n.Xc(8,C,1,9,"tr",5),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.wc("amountOptions",t.report.filters.amountOptions)("totalNumberOfEntries",t.weeklyResponse.totals.entriesCount)("format",t.format)("isCostRateActive",t.report.workspace.costRateActive)("isRounding",t.report.filters.rounding)("totalInfo",t.weeklyResponse.totals)("isAdminOrOwner",t.report.isAdminOrOwner)("canSeeRates",t.report.filters.amountOptions.length>0)("workspaceInfo",t.report.workspace)("isShared",!0),n.Cb(4),n.wc("mainLabel",n.pc(5,17,t.isGroupByProject?"GLOBAL.PROJECT_LABEL":"GLOBAL.USER_LABEL"))("isDesktop",t.isDesktop)("isExpanded",t.isExpanded)("isExpandedMobileView",t.isExpandedMobileView)("week",t.week),n.Cb(3),n.wc("ngForOf",t.weeklyResponse.groups),n.Cb(1),n.wc("ngIf",t.weeklyResponse.totalsByDay))},directives:[h.a,p.a,b.t,b.u,f.a],pipes:[d.e],encapsulation:2}),e})()},kwab:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=e&&e.id,this._name=e&&e.name,this._currency=e&&e.currency,this._imageUrl=e&&e.imageUrl,this._onlyAdminsSeeAllTimeEntries=e&&e.workspaceSettings.onlyAdminsSeeAllTimeEntries,this._onlyAdminsSeePublicProjectEntries=e&&e.workspaceSettings.onlyAdminsSeePublicProjectEntries,this._onlyAdminsSeeBillableRates=e&&e.onlyAdminsSeeBillableRates,this._trackTimeDownToSeconds=e&&e.trackTimeDownToSeconds,this._projectGroupingLabel=e&&e.workspaceSettings.projectGroupingLabel,this._costRateActive=e&&e.workspaceSettings.costRateActive,this._lockDate=e&&e.workspaceSettings.lockDate,this._decimalFormat=e&&e.workspaceSettings.decimalFormat,this._activeBillableHours=e&&e.workspaceSettings.activeBillableHours,this._onlyAdminsCanChangeBillableStatus=e&&e.workspaceSettings.onlyAdminsCanChangeBillableStatus}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get currency(){return this._currency}set currency(e){this._currency=e}get imageUrl(){return this._imageUrl}set imageUrl(e){this._imageUrl=e}get onlyAdminsSeeBillableRates(){return this._onlyAdminsSeeBillableRates}set onlyAdminsSeeBillableRates(e){this._onlyAdminsSeeBillableRates=e}get trackTimeDownToSeconds(){return this._trackTimeDownToSeconds}set trackTimeDownToSeconds(e){this._trackTimeDownToSeconds=e}get onlyAdminsSeeAllTimeEntries(){return this._onlyAdminsSeeAllTimeEntries}set onlyAdminsSeeAllTimeEntries(e){this._onlyAdminsSeeAllTimeEntries=e}get onlyAdminsSeePublicProjectEntries(){return this._onlyAdminsSeePublicProjectEntries}set onlyAdminsSeePublicProjectEntries(e){this._onlyAdminsSeePublicProjectEntries=e}get projectGroupingLabel(){return this._projectGroupingLabel}set projectGroupingLabel(e){this._projectGroupingLabel=e}get costRateActive(){return this._costRateActive}set costRateActive(e){this._costRateActive=e}get lockDate(){return this._lockDate}set lockDate(e){this._lockDate=e}get decimalFormat(){return this._decimalFormat}set activeBillableHours(e){this._activeBillableHours=e}get activeBillableHours(){return this._activeBillableHours}get onlyAdminsCanChangeBillableStatus(){return this._onlyAdminsCanChangeBillableStatus}getTimeFormat(){return this.decimalFormat?"h.hh":this.trackTimeDownToSeconds?"HH:mm:ss":"h:mm"}}},l1Fo:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("ofXK"),s=i("3Pt+"),r=i("jJjg"),o=i("E10L"),a=i("1kSV"),c=i("9Trn"),l=i("xuKB"),u=i("vwXn"),d=i("brRw"),h=i("Nqck"),p=i("uepX"),b=i("tZA+"),f=i("MtJD"),m=i("sYmb"),g=i("fXoL");let v=(()=>{class e{}return e.\u0275mod=g.Pb({type:e}),e.\u0275inj=g.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,c.a,h.a,f.a,p.a,b.a,m.d]]}),e})();var C=i("tyNb"),E=i("iTUp"),w=i("NDhe"),S=i("8XW9"),y=i("0Gvx"),O=i("liYL"),A=i("s07H"),k=i("9lpP"),T=i("DeEi"),D=i("zJCG"),I=i("1Mzi"),_=i("49HY"),R=i("AEYL"),L=i("EONh");let x=(()=>{class e{}return e.\u0275mod=g.Pb({type:e}),e.\u0275inj=g.Ob({factory:function(t){return new(t||e)},providers:[R.a],imports:[[n.c,s.m,r.a,o.a,a.r,c.a,l.a,d.a,u.a,v,C.h,E.a,h.a,a.s,w.a,p.a,S.a,y.a,O.a,b.a,O.a,A.a,k.a,T.a,D.a,I.a,_.a,L.a,m.d]]}),e})()},l4Lo:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s,r,o,a,c){const l=[];return e.includes("col1")&&l.push(t),e.includes("col2")&&l.push(i),e.includes("col3")&&l.push(n),e.includes("col4")&&l.push(s),e.includes("col5")&&l.push(r),e.includes("col6")&&l.push(o),e.includes("col7")&&l.push(a),e.includes("col8")&&l.push(c),l}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"projectColumnDecider",type:e,pure:!0}),e})()},lBcp:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("XNiG"),s=i("2Vo4"),r=i("IgG/"),o=i("Ymxs"),a=i("tk/3"),c=i("1Tmk"),l=i("lJxs"),u=i("vkgz"),d=i("LfE4"),h=i("fXoL"),p=i("sYmb");let b=(()=>{class e{constructor(e,t,i,r){this.http=e,this.workspaceService=t,this.toaster=i,this.translateService=r,this.tags=new n.a,this.tagsBehavior$=new s.a(null),this.workspaceService.defaultWorkspace$.subscribe(()=>{this.clearTagsSubject()})}getAllTags(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new a.h).append("archived",e!==d.a.ALL?(e===d.a.ARCHIVED).toString():"");this.http.get(`/workspaces/${i}/tags`,{params:n}).pipe(Object(l.a)(e=>e.map(e=>new r.a(e)))).subscribe(e=>{this.tagsBehavior$.next(e),this.tags.next(e)},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.TAG.GET.ERROR_MESSAGE")),this.tagsBehavior$.next(null)})}clearTagsSubject(){this.tagsBehavior$.next(null)}getAllTagsV1(e,t,i){const n=t||this.workspaceService.getDefaultWorkspaceId(),s=(new a.h).append("archived",e!==d.a.ALL?(e===d.a.ARCHIVED).toString():"").append("name",i&&i.name||"").append("page",i.page).append("page-size",i.pageSize);return this.http.get(`/v1/workspaces/${n}/tags`,{params:s}).pipe(Object(l.a)(e=>e.map(e=>new r.a(e))))}getTagIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new a.h).append("status",e.status).append("name",e.name);return this.http.get(`/workspaces/${t}/tags/report-filters/ids`,{params:i}).pipe(Object(l.a)(e=>e),Object(u.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.TAG.GET_IDS.ERROR_MESSAGE"))))}create(e,t){const i=e.trim(),n=JSON.stringify({name:i}),s=t||this.workspaceService.getDefaultWorkspaceId();return this.http.post(`/workspaces/${s}/tags`,n).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.TAG.CREATE.SUCCESS_MESSAGE",{tagName:i}))},e=>{403!==e.status&&this.toaster.pop("error",e&&e.error&&e.error.message||this.translateService.instant("SERVICES.TAG.CREATE.ERROR_MESSAGE",{tagName:i}))}))}update(e){const t=e.name.trim();return this.http.put(`/workspaces/${e.workspaceId}/tags/${e.id}`,{name:t,archived:e.archived}).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.TAG.UPDATE.SUCCESS_MESSAGE",{tagName:t}))},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.TAG.NAME_EXISTS_ERROR_MESSAGE",{tagName:t}))}))}delete(e){return this.http.delete(`/workspaces/${e.workspaceId}/tags/${e.id}`).pipe(Object(l.a)(e=>new r.a(e)),Object(u.a)(e=>{this.toaster.pop("success",this.translateService.instant("SERVICES.TAG.DELETE.SUCCESS_MESSAGE",{tagName:e.name}))},e=>{this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.TAG.DELETE.ERROR_MESSAGE"))}))}sortTags(e){return e.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))}}return e.\u0275fac=function(t){return new(t||e)(h.fc(a.c),h.fc(c.a),h.fc(o.a),h.fc(p.f))},e.\u0275prov=h.Nb({token:e,factory:e.\u0275fac}),e})()},lWAS:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("1G5W"),s=i("pLZG"),r=i("IzEk"),o=i("XNiG"),a=i("Vpr3"),c=i("kGbF"),l=i("f0Wu"),u=i("hl/z"),d=i("qfBg"),h=i("BuEj"),p=i("fXoL"),b=i("sYmb");let f=(()=>{class e{constructor(e,t,i,n){this.loader=e,this.reportService=t,this.userService=i,this.translateService=n,this.unsubscribe$=new o.a}exportAsPdf(e,t,i,o){const a=this.getLoadingText(i);this.loader.show(this.translateService.instant("REPORTS.SHARE_REPORT.EXPORT_IN_PROGRESS",{type:"PDF"}),a,{enableClose:!0}).pipe(Object(n.a)(this.unsubscribe$),Object(s.a)(e=>e)).subscribe(()=>window.stop()),this.reportService.pdfResponse.pipe(Object(r.a)(1)).subscribe(i=>{const n=new Blob([i],{type:"application/pdf"}),s=(o||this.setReportTitle(t,e.dateRange))+".pdf";this.loader.hide(),Object(c.b)(n,s)},e=>{this.loader.hide()}),this.reportService.downloadPdf(e,t)}exportAsCsv(e,t,i,o){const a=this.getLoadingText(i);this.loader.show(this.translateService.instant("REPORTS.SHARE_REPORT.EXPORT_IN_PROGRESS",{type:"CSV"}),a,{enableClose:!0}).pipe(Object(n.a)(this.unsubscribe$),Object(s.a)(e=>e)).subscribe(()=>window.stop()),this.reportService.csvResponse.pipe(Object(r.a)(1)).subscribe(i=>{const n=new Blob([i],{type:"application/csv"}),s=(o||this.setReportTitle(t,e.dateRange))+".csv";this.loader.hide(),Object(c.b)(n,s)},e=>{this.loader.hide()}),t!==h.a.EXPENSE_DETAILED?this.reportService.downloadCsv(e,t):this.reportService.downloadCsvExpenses(e)}exportAsExcel(e,t,i,o){const a=this.getLoadingText(i);this.loader.show(this.translateService.instant("REPORTS.SHARE_REPORT.EXPORT_IN_PROGRESS",{type:"XLSX"}),a,{enableClose:!0}).pipe(Object(n.a)(this.unsubscribe$),Object(s.a)(e=>e)).subscribe(()=>window.stop()),this.reportService.excelResponse.pipe(Object(r.a)(1)).subscribe(i=>{const n=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=(o||this.setReportTitle(t,e.dateRange))+".xlsx";this.loader.hide(),Object(c.b)(n,s)},e=>{this.loader.hide()}),t!==h.a.EXPENSE_DETAILED?this.reportService.downloadExcel(e,t):this.reportService.downloadExcelExpenses(e)}setReportTitle(e,t){const i={[h.a.SUMMARY]:"Clockify_Time_Report_Summary",[h.a.DETAILED]:"Clockify_Time_Report_Detailed",[h.a.WEEKLY]:"Clockify_Time_Report_Weekly",[h.a.EXPENSE_DETAILED]:"Clockify_Expense_Report_Detailed"},n=this.userService.getDateFormatForUser(),s=l.utc(t.start).clone().format(n),r=l.utc(t.end).clone().format(n);return`${i[e]}_${s+"-"+r}`}getLoadingText(e){return this.translateService.instant(e&&e>1e4?"REPORTS.SHARE_REPORT.EXPORT_LONGER_THAN_INFO":"GLOBAL.LOADER_WAIT_MOMENT")}downloadReceiptsAsync(e){this.loader.show(this.translateService.instant("REPORTS.TABLE_INFO.DOWNLOADING_RECEIPTS",{type:"CSV"}),"",{enableClose:!0}),this.reportService.receipts.pipe(Object(r.a)(1)).subscribe(e=>{const t=new Blob([e],{type:"application/zip"});this.loader.hide(),Object(c.b)(t,"expense_receipts.zip")},e=>{this.loader.hide()}),this.reportService.downloadReceipts(e)}}return e.\u0275fac=function(t){return new(t||e)(p.fc(u.a),p.fc(a.a),p.fc(d.a),p.fc(b.f))},e.\u0275prov=p.Nb({token:e,factory:e.\u0275fac}),e})()},liXT:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e?Math.floor(e)+"h":"0h"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"toHours",type:e,pure:!0}),e})()},liYL:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.d]]}),e})()},"lp//":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("tk/3"),s=i("ydbL"),r=i("1Tmk"),o=i("vkgz"),a=i("lJxs"),c=i("Ymxs"),l=i("fXoL"),u=i("sYmb");let d=(()=>{class e{constructor(e,t,i,n){this.http=e,this.workspaceService=t,this.toaster=i,this.translateService=n}create(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.post(`workspaces/${t}/custom-field`,{id:e.id,workspaceId:e.workspaceId,name:e.name,description:e.description,type:e.type,placeholder:e.placeholder,allowedValues:e.allowedValues,workspaceDefaultValue:e.workspaceDefaultValue,onlyAdminCanEdit:e.onlyAdminCanEdit,required:e.required,status:e.status,projectDefaultValues:e.projectDefaultValues}).pipe(Object(o.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CUSTOM_FIELD.CREATE.SUCCESS_MESSAGE",{fieldName:e.name}))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.CUSTOM_FIELD.CREATE.ERROR_MESSAGE"),e.error.message)}))}update(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`workspaces/${t}/custom-field/${e.id}`,{id:e.id,workspaceId:e.workspaceId,name:e.name,description:e.description,type:e.type,placeholder:e.placeholder,allowedValues:e.allowedValues,workspaceDefaultValue:e.workspaceDefaultValue,onlyAdminCanEdit:e.onlyAdminCanEdit,required:e.required,status:e.status,projectDefaultValues:e.projectDefaultValues}).pipe(Object(o.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CUSTOM_FIELD.UPDATE.SUCCESS_MESSAGE_WITH_NAME",{fieldName:e.name}))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.CUSTOM_FIELD.UPDATE.ERROR_MESSAGE"),e.error.message)}))}delete(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`workspaces/${t}/custom-field/${e}`).pipe(Object(o.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CUSTOM_FIELD.DELETE.SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.DELETE.ERROR_MESSAGE"),e.error.message)}))}get(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),r=(new n.h).append("name",t||"").append("status",e?e.toString():"");return this.http.get(`workspaces/${i}/custom-field/`,{params:r}).pipe(Object(a.a)(e=>e.map(e=>new s.a(e))))}editProjectDefaultValue(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.put(`workspaces/${i}/custom-field/${e}/default/${t.projectId}`,{defaultValue:t.value,status:t.status}).pipe(Object(o.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CUSTOM_FIELD.UPDATE.SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.CUSTOM_FIELD.UPDATE.ERROR_MESSAGE"),e.error.message)}))}removeProjectDefaultValue(e,t){const i=this.workspaceService.getDefaultWorkspaceId();return this.http.delete(`workspaces/${i}/custom-field/${e}/default/${t}`).pipe(Object(o.a)(()=>{this.toaster.pop("success",this.translateService.instant("SERVICES.CUSTOM_FIELD.UPDATE.SUCCESS_MESSAGE"))},e=>{this.toaster.pop("error",this.translateService.instant("SERVICES.CUSTOM_FIELD.UPDATE.ERROR_MESSAGE"),e.error.message)}))}getOfProject(e){const t=this.workspaceService.getDefaultWorkspaceId();return this.http.get(`workspaces/${t}/custom-field/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(l.fc(n.c),l.fc(r.a),l.fc(c.a),l.fc(u.f))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},mMUe:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("zJCG"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.a]]}),e})()},mXn0:function(e,t,i){"use strict";i.d(t,"a",(function(){return F}));var n=i("1G5W"),s=i("fXoL"),r=i("VTb6"),o=i("UMzN"),a=i("NHP+"),c=i("1Tmk"),l=i("Jmk/"),u=i("i/9y"),d=i("Ymxs"),h=i("sNAh"),p=i("ZaaN");class b{constructor(e){this._id=e?e.id:"",this._workspaceId=e&&e.workspaceId,this._billable=!!e&&e.billable,this._hourlyRate=e?new h.a(e.hourlyRate):new h.a,this._memberships=e?e.memberships:[],this._estimate=e?e.estimate:new p.a,this._tasks=e?e.tasks:[],this._name=null==e?void 0:e.name,this._clientName=e&&e.client?e.client.name:""}get id(){return this._id}set id(e){this._id=e}get workspaceId(){return this._workspaceId}set workspaceId(e){this._workspaceId=e}get billable(){return this._billable}set billable(e){this._billable=e}get hourlyRate(){return this._hourlyRate}set hourlyRate(e){this._hourlyRate=e}get memberships(){return this._memberships}set memberships(e){this._memberships=e}get estimate(){return this._estimate}set estimate(e){this._estimate=e}get tasks(){return this._tasks}set tasks(e){this._tasks=e}get name(){return this._name}set name(e){this._name=e}get clientName(){return this._clientName}set clientName(e){this._clientName=e}}var f=i("i6c7"),m=(i("j4ir"),i("aLCL")),g=i("2rWG"),v=i("xoOP"),C=i("Y9WU"),E=i("SvJf"),w=i("tyNb"),S=i("sYmb"),y=i("3Pt+"),O=i("vrD5"),A=i("sbmM"),k=i("qUN8"),T=i("ofXK"),D=i("iNpZ"),I=i("Q+u6"),_=i("1kSV"),R=i("Tg7i");const L=["clientDropdown"];function x(e,t){if(1&e){const e=s.Yb();s.Xb(0,"select-client-dropdown",28),s.jc("choosenItem",(function(t){return s.Oc(e),s.nc().showItem(t)}))("withoutClient",(function(t){return s.Oc(e),s.nc().noClient(t)})),s.Wb()}if(2&e){const e=s.nc();s.wc("selectedId",e.selectedItem&&e.selectedItem.id)("projectGroupingLabel",e.projectGroupingLabel)("workspaceId",e.workspace.id)}}function P(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",29),s.Xb(1,"input",30),s.jc("ngModelChange",(function(t){return s.Oc(e),s.nc().taskName=t}))("keyup.enter",(function(){return s.Oc(e),s.nc().createNewProject()})),s.Wb(),s.Wb()}if(2&e){const e=s.nc();s.Cb(1),s.wc("ngModel",e.taskName)}}function j(e,t){if(1&e){const e=s.Yb();s.Xb(0,"a",36),s.jc("click",(function(){return s.Oc(e),s.nc(2).navigateToUpgrade()})),s.Zc(1),s.oc(2,"translate"),s.Wb(),s.Zc(3),s.oc(4,"translate")}2&e&&(s.Cb(1),s.bd(" ",s.pc(2,2,"GLOBAL.UPGRADE_BTN")," "),s.Cb(2),s.bd(" ",s.pc(4,4,"PROJECTS.SHARED.UPGRADE_MESSAGE.PART_2")," "))}function M(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",37),s.Xb(1,"filter-dropdown",38),s.jc("emitSelected",(function(t){return s.Oc(e),s.nc(2).selectTemplate(t)}))("loadMore",(function(t){return s.Oc(e),s.nc(2).loadMoreTemplates(t)}))("nameFilterChanged",(function(t){return s.Oc(e),s.nc(2).templateFilterChanged(t)})),s.Wb(),s.Wb()}if(2&e){const e=s.nc(2);s.Cb(1),s.wc("entity","templates")("entities",e.projectTemplates)("hideWithoutValue",!0)}}function X(e,t){if(1&e){const e=s.Yb();s.Xb(0,"div",6),s.Xb(1,"div",31),s.Xb(2,"button",32,33),s.jc("click",(function(){s.Oc(e);const t=s.Lc(3);return s.nc().showPopoverIfNeeded(t)})),s.Zc(4),s.oc(5,"translate"),s.Wb(),s.Xc(6,j,5,6,"ng-template",null,34,s.Yc),s.Xc(8,M,2,3,"div",35),s.Wb(),s.Wb()}if(2&e){const e=s.Lc(7),t=s.nc();s.Cb(1),s.wc("dropdownKey",!(t.projectTemplates&&t.projectTemplates.length>0)),s.Cb(1),s.wc("ngbPopover",e),s.Cb(2),s.bd(" ",t.selectedTemplate&&t.selectedTemplate.name?t.selectedTemplate.name:s.pc(5,3,"NO_TEMPLATE"),"")}}let F=(()=>{class e{constructor(e,t,i,n,r,o,c,l,u){this.projectService=e,this.projectServiceV1=t,this.workspaceService=i,this.clientService=n,this.taskService=r,this.toaster=o,this.router=c,this.translate=l,this.analyticsService=u,this.showTemplate=!0,this.projectName="",this.close=new s.n,this.projectCreated=new s.n,this.onProjectAndTaskDataCreated=new s.n,this.projectTemplates=[],this.projectGroupingLabel="",this.selectedTemplate=new b,this.unsubscribe$=new a.a,this.templateQuery={page:1,limit:50,name:""}}ngOnInit(){this.workspace||(this.workspace=this.workspaceService.getLocalDefaultWorkspace()),this.projectName=Object(v.H)(this.projectName),this.showTaskInput=!!Object(v.H)(this.taskName),this.workspace.hasFeature(u.a.PROJECT_TEMPLATES)&&this.getProjectTemplates(!0),this.isPublic=this.workspace.isProjectPublicByDefault,this.billable=this.workspace.defaultBillableProjects,this.projectGroupingLabel=this.workspace.projectGroupingLabel,this.defaultPlaceholder=this.setDefaultPlaceholder(this.workspace.projectGroupingLabel),this.clientService.client.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.selectedItem=e,this.showItem(e)}),this.clientService.createdClient.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.selectedItem=e,this.showItem(e)}),this.taskService.tasks.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.addTasksToTemplate(e)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get isProjectInvalid(){const e=Object(v.H)(this.projectName);return!e||e.length<2||e.length>250}getProjectTemplates(e){this.projectServiceV1.getProjectTemplates(this.templateQuery).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.projectTemplates=e?t.map(e=>new b(e)):[...this.projectTemplates,...t.map(e=>new b(e))]})}closeNewProjectModalWindow(){this.close.emit(null)}showItem(e){this.selectedItem=e,this.clientDropdown&&this.clientDropdown.closeDropdown()}noClient(e){this.selectedItem=new o.a,this.selectedItem.name=e}addColor(e){this.color=e}createNewProject(){if(this.isProjectInvalid)return void this.toaster.error(this.translate.instant("PROJECTS.MESSAGES.PROJECT_NAME_LENGTH_ERROR"));let e;this.analyticsService.addEvent(new E.a({event:"switch",value:this.isPublic?"Public":"Private",section:"Projects",section2:"Create New Project",section3:"Public"})),this.inProgress=!0,e=this.selectedTemplate&&""!=this.selectedTemplate.id?this.projectService.createFromTemplate(this.selectedTemplate.id,this.projectName,this.isPublic,this.selectedItem?this.selectedItem.id:"",this.color,this.workspace.id):this.projectService.create(this.projectName,this.isPublic,this.selectedItem?this.selectedItem.id:"",this.billable,this.color,this.workspace.id),e.pipe(Object(n.a)(this.unsubscribe$)).subscribe(e=>{this.inProgress=!1,this.projectCreated.emit(e),this.projectService.project.next(e),this.projectService.newlyAddedProject.next(e);const t=Object(v.H)(this.taskName)||"";t?(this.taskService.createTask(t,e.id,this.workspace.id).pipe(Object(n.a)(this.unsubscribe$)).subscribe(t=>{this.onProjectAndTaskDataCreated.emit({project:e,task:t,workspace:this.workspace})}),this.taskName=null):this.onProjectAndTaskDataCreated.emit({project:e,task:null,workspace:this.workspace})},()=>{this.inProgress=!1})}addTasksToTemplate(e){this.selectedTemplate.tasks=e}selectTemplate(e){this.selectedTemplate=e,e.id&&this.taskService.getAllTasks(e.id,this.workspace.id)}showPopoverIfNeeded(e){this.workspace.hasFeature(u.a.PROJECT_TEMPLATES)||(e.isOpen()?e.close():e.open())}loadMoreTemplates(e){this.templateQuery.page=e.page,this.templateQuery.name=e.name,this.getProjectTemplates(!1)}templateFilterChanged(e){this.templateQuery.page=e.page,this.templateQuery.name=e.name,this.getProjectTemplates(!0)}setDefaultPlaceholder(e){let t;switch(e){case"client":t=this.translate.instant("PROJECTS.SHARED.SELECT_CLIENT_PLACEHOLDER");break;case"category":t=this.translate.instant("PROJECTS.SHARED.SELECT_CATEGORY_PLACEHOLDER");break;case"department":t=this.translate.instant("PROJECTS.SHARED.SELECT_DEPARTMENT_PLACEHOLDER");break;default:t=this.translate.instant("GLOBAL.SELECT_LABEL",{label:e})}return t}navigateToUpgrade(){this.router.navigate(["/upgrade"],{queryParams:{plan:"basic"}}),this.closeNewProjectModalWindow()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(r.a),s.Rb(m.a),s.Rb(c.a),s.Rb(l.a),s.Rb(f.a),s.Rb(d.a),s.Rb(w.d),s.Rb(S.f),s.Rb(C.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["new-project"]],viewQuery:function(e,t){var i;1&e&&s.gd(L,!0),2&e&&s.Kc(i=s.kc())&&(t.clientDropdown=i.first)},inputs:{showTemplate:"showTemplate",isAdminOrOwner:"isAdminOrOwner",projectName:["name","projectName"],taskName:"taskName",workspace:"workspace"},outputs:{close:"close",projectCreated:"projectCreated",onProjectAndTaskDataCreated:"onProjectAndTaskDataCreated"},decls:44,vars:24,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/images/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-form-row"],[1,"cl-col-md-6"],[1,"cl-form-group"],["type","text","data-cy","project-name","preventMultipleSpaces","","ngbAutofocus","","autocomplete","off",1,"cl-form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex"],["clientDropdown","dropdownKey"],["dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text"],["class","cl-dropdown-menu",3,"selectedId","projectGroupingLabel","workspaceId","choosenItem","withoutClient",4,"dropdownKeyContent"],["class","cl-mb-2",4,"ngIf"],[1,"cl-form-row","cl-align-items-center"],[1,"cl-col-auto"],[1,"cl-form-group","cl-mb-0"],[3,"color","closeCreateProject"],[1,"cl-col"],[1,"cl-form-group","cl-mb-0","cl-ml-2"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","customCheckPublic",1,"cl-custom-control-input",3,"ngModel","ngModelChange"],["for","customCheckPublic",1,"cl-custom-control-label"],["src","assets/images/ui-icons/info-9.svg",1,"cl-ml-1",3,"title"],["class","cl-col-md-6",4,"ngIf"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","button","data-cy","create-project",1,"cl-btn","cl-btn-primary",3,"disabled","click"],[1,"cl-dropdown-menu",3,"selectedId","projectGroupingLabel","workspaceId","choosenItem","withoutClient"],[1,"cl-mb-2"],["type","text","preventMultipleSpaces","","autocomplete","off","placeholder","Enter task name",1,"cl-form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"cl-form-group","cl-mb-0","cl-mt-2","cl-mt-md-0",3,"dropdownKey"],["type","button","dropdownKeyButton","","triggers","manual","placement","left","container","body",1,"cl-btn","cl-btn-outline-light","cl-dropdown-toggle","cl-w-100","cl-text-left","cl-cut-text",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["popContent",""],["class","cl-dropdown-menu",4,"dropdownKeyContent"],[3,"click"],[1,"cl-dropdown-menu"],[3,"entity","entities","hideWithoutValue","emitSelected","loadMore","nameFilterChanged"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Xb(1,"h1",1),s.Zc(2),s.oc(3,"translate"),s.Wb(),s.Xb(4,"button",2),s.jc("click",(function(){return t.closeNewProjectModalWindow()})),s.Xb(5,"span"),s.Sb(6,"img",3),s.Wb(),s.Wb(),s.Wb(),s.Xb(7,"div",4),s.Xb(8,"div",5),s.Xb(9,"div",6),s.Xb(10,"div",7),s.Xb(11,"input",8),s.jc("ngModelChange",(function(e){return t.projectName=e}))("keyup.enter",(function(){return t.createNewProject()})),s.oc(12,"translate"),s.Wb(),s.Wb(),s.Wb(),s.Xb(13,"div",6),s.Xb(14,"div",7),s.Xb(15,"div",9,10),s.Xb(17,"button",11),s.Zc(18),s.Wb(),s.Xc(19,x,1,3,"select-client-dropdown",12),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(20,"div",5),s.Xb(21,"div",6),s.Xc(22,P,2,1,"div",13),s.Xb(23,"div",14),s.Xb(24,"div",15),s.Xb(25,"div",16),s.Xb(26,"color-chooser",17),s.jc("color",(function(e){return t.addColor(e)}))("closeCreateProject",(function(){return t.closeNewProjectModalWindow()})),s.Wb(),s.Wb(),s.Wb(),s.Xb(27,"div",18),s.Xb(28,"div",19),s.Xb(29,"div",20),s.Xb(30,"input",21),s.jc("ngModelChange",(function(e){return t.isPublic=e})),s.Wb(),s.Xb(31,"label",22),s.Zc(32),s.oc(33,"translate"),s.Wb(),s.Sb(34,"img",23),s.oc(35,"translate"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xc(36,X,9,5,"div",24),s.Wb(),s.Wb(),s.Xb(37,"div",25),s.Xb(38,"a",26),s.jc("click",(function(){return t.closeNewProjectModalWindow()})),s.Zc(39),s.oc(40,"translate"),s.Wb(),s.Xb(41,"button",27),s.jc("click",(function(){return t.createNewProject()})),s.Zc(42),s.oc(43,"translate"),s.Wb(),s.Wb()),2&e&&(s.Cb(2),s.bd(" ",s.pc(3,12,"GLOBAL.CREATE_NEW_PROJECT_TITLE")," "),s.Cb(9),s.wc("placeholder",s.pc(12,14,"PROJECTS.SHARED.ENTER_PROJECT_NAME_PLACEHOLDER"))("ngModel",t.projectName),s.Cb(7),s.bd(" ",t.selectedItem?t.selectedItem.name:t.defaultPlaceholder," "),s.Cb(4),s.wc("ngIf",t.showTaskInput),s.Cb(8),s.wc("ngModel",t.isPublic),s.Cb(2),s.bd(" ",s.pc(33,16,"GLOBAL.PUBLIC_LABEL")," "),s.Cb(2),s.xc("title",s.pc(35,18,"PROJECTS.NEW_PROJECT.VISIBLE_TO_ALL")),s.Cb(2),s.wc("ngIf",t.showTemplate),s.Cb(3),s.bd(" ",s.pc(40,20,"GLOBAL.CANCEL_BTN")," "),s.Cb(2),s.wc("disabled",t.inProgress),s.Cb(1),s.bd(" ",s.pc(43,22,"GLOBAL.CREATE_LABEL")," "))},directives:[y.c,O.a,y.s,y.v,g.a,A.a,k.a,T.u,D.a,y.a,I.a,_.M,R.a],pipes:[S.e],encapsulation:2}),e})()},mlxB:function(e,t,i){"use strict";function n(e){return e instanceof Date&&!isNaN(+e)}i.d(t,"a",(function(){return n}))},n0VX:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("YnOA"),r=i("fXoL");let o=(()=>{class e{transform(e,t){const i=Object(n.duration)(e,"seconds");return Object(s.a)(i,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"stringDurationToTime",type:e,pure:!0}),e})()},nAmH:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=i("AY7I"),r=i("xoOP"),o=i("3Pt+"),a=i("sYmb");let c=(()=>{class e{constructor(e,t){this.formBuilder=e,this.translateService=t,this.inputValue="",this.label=this.translateService.instant("GLOBAL.CHANGE_NAME_LABEL"),this.editedValue=new n.n,this.isOpen=new n.n}ngOnInit(){this.initialValue=this.inputValue,this.form=this.formBuilder.group({name:[this.initialValue,[s.a.required,s.a.differentThan(this.initialValue)]]})}editValue(){this.trimName();const e=this.form.value.name;this.initialValue!==e&&this.editedValue.emit(e)}closeEditModalWindow(){this.isOpen.emit(!1)}trimName(){const e=Object(r.H)(this.form.value.name);this.setName(e)}setName(e){this.form.patchValue({name:e})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(o.f),n.Rb(a.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["rename-modal"]],inputs:{title:"title",inputValue:"inputValue",label:"label"},outputs:{editedValue:"editedValue",isOpen:"isOpen"},decls:20,vars:10,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["aria-hidden","true"],["src","assets/images/ui-icons/close.svg"],[3,"formGroup","ngSubmit"],[1,"cl-modal-body"],[1,"cl-form-group","cl-row","cl-mb-0"],["for","editModalInput",1,"cl-col-sm-3","cl-col-form-label","cl-mb-0"],[1,"cl-col-sm-9"],["ngbAutofocus","","id","editModalInput","preventMultipleSpaces","","autocomplete","off","formControlName","name",1,"cl-form-control",3,"blur"],[1,"cl-modal-footer"],[1,"cl-color-blue",3,"click"],["type","submit",1,"cl-btn","cl-btn-primary",3,"disabled"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"h1",1),n.Zc(2),n.Wb(),n.Xb(3,"button",2),n.jc("click",(function(){return t.closeEditModalWindow()})),n.Xb(4,"span",3),n.Sb(5,"img",4),n.Wb(),n.Wb(),n.Wb(),n.Xb(6,"form",5),n.jc("ngSubmit",(function(){return t.editValue()})),n.Xb(7,"div",6),n.Xb(8,"div",7),n.Xb(9,"label",8),n.Zc(10),n.Wb(),n.Xb(11,"div",9),n.Xb(12,"input",10),n.jc("blur",(function(){return t.trimName()})),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(13,"div",11),n.Xb(14,"a",12),n.jc("click",(function(){return t.closeEditModalWindow()})),n.Zc(15),n.oc(16,"translate"),n.Wb(),n.Xb(17,"button",13),n.Zc(18),n.oc(19,"translate"),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.Cb(2),n.ad(t.title),n.Cb(4),n.wc("formGroup",t.form),n.Cb(4),n.ad(t.label),n.Cb(5),n.ad(n.pc(16,6,"GLOBAL.CANCEL_BTN")),n.Cb(2),n.wc("disabled",t.form.invalid),n.Cb(1),n.ad(n.pc(19,8,"GLOBAL.SAVE_LABEL")))},directives:[o.I,o.t,o.k,o.c,o.s,o.i],pipes:[a.e],encapsulation:2}),e})()},nLfN:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return b})),i.d(t,"d",(function(){return p})),i.d(t,"e",(function(){return d})),i.d(t,"f",(function(){return h}));var n=i("fXoL"),s=i("ofXK");let r;try{r="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(f){r=!1}let o,a,c,l=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Object(s.P)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!r)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(n.fc(n.B,8))},e.\u0275prov=Object(n.Nb)({factory:function(){return new e(Object(n.fc)(n.B,8))},token:e,providedIn:"root"}),e})(),u=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})();function d(e){return function(){if(null==o&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>o=!0}))}finally{o=o||!1}return o}()?e:!!e.capture}function h(){return!("object"!=typeof document||!("scrollBehavior"in document.documentElement.style))}function p(){if("object"!=typeof document||!document)return 0;if(null==a){const e=document.createElement("div"),t=e.style;e.dir="rtl",t.height="1px",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const i=document.createElement("div"),n=i.style;n.width="2px",n.height="1px",e.appendChild(i),document.body.appendChild(e),a=0,0===e.scrollLeft&&(e.scrollLeft=1,a=0===e.scrollLeft?1:2),e.parentNode.removeChild(e)}return a}function b(e){if(function(){if(null==c){const e="undefined"!=typeof document?document.head:null;c=!(!e||!e.createShadowRoot&&!e.attachShadow)}return c}()){const t=e.getRootNode?e.getRootNode():null;if(t instanceof ShadowRoot)return t}return null}},nLyk:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.NAME="NAME",e.CLIENT_NAME="CLIENT_NAME",e.DURATION="DURATION",e.BUDGET="BUDGET",e.PROGRESS="PROGRESS",e}({})},nQ1P:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.DAILY="DAILY",e.WEEKLY="WEEKLY",e.MONTHLY="MONTHLY",e}({})},npmQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t,i,n,s){this._project=e,this._task=t,this._durationsByDay=i,this._entries=n,this._isApproved=s}resetIsApproved(){return this.isApproved=this.entries.length&&this.entries.some(e=>e.some(e=>!!e.approvalRequestId)),this.isApproved}get isApproved(){return this._isApproved}set isApproved(e){this._isApproved=e}get project(){return this._project}set project(e){this._project=e}get task(){return this._task}set task(e){this._task=e}get durationsByDay(){return this._durationsByDay}set durationsByDay(e){this._durationsByDay=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get entries(){return this._entries}set entries(e){this._entries=e}static clone(e){return new n(e&&e.project,e&&e.task,e&&e.durationsByDay,e&&e.entries)}static getSelectedProjectsData(e){const t={},i=[],n=[];return(e||[]).filter(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.id}).forEach(e=>{var s,r;t[e.project.id]=t[e.project.id]||{isSelctedWithoutTask:!1,taskIds:[]},e.project.id&&!(null===(s=e.task)||void 0===s?void 0:s.id)&&(t[e.project.id].isSelctedWithoutTask=!0,i.push(e.project.id)),(null===(r=e.task)||void 0===r?void 0:r.id)&&(t[e.project.id].taskIds.push(e.task.id),n.push(e.task.id))}),{forbiddenProjectMap:t,allForbiddenProjectIds:i,allForbiddenTaskIds:n}}}},nqu1:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){return e&&e.sort((function(e,t){return!e.project.name&&t.project.name?1:!t.project.name&&e.project.name?-1:e.project.name<t.project.name||e.project.name>t.project.name?e.project.name<t.project.name?-1:1:e.task?t.task?!e.task.name&&t.task.name?1:!t.task.name&&e.task.name||e.task.name<t.task.name?-1:1:-1:1})),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"sortByTaskAndProject",type:e,pure:!0}),e})()},nss9:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.DESCRIPTION="DESCRIPTION",e.PROJECT="PROJECT",e.TASK="TASK",e.BILLABLE="BILLABLE",e.TAG="TAG",e.TAG_ADD="TAG_ADD",e.TIME="TIME",e.DATE="DATE",e.USER="USER",e.CUSTOM_FIELDS="CUSTOM_FIELDS",e.VISIBILITY="VISIBILITY",e.ESTIMATE="ESTIMATE",e.MEMBERS="MEMBERS",e.MEMBERS_ADD="MEMBERS_ADD",e.CLIENT="CLIENT",e.COLOR="COLOR",e.HOURLY_RATE="HOURLY_RATE",e.TIMEINTERVAL="TIMEINTERVAL",e}({})},oTlO:function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var n=i("fXoL"),s=i("XNiG"),r=i("pLZG"),o=i("1G5W"),a=i("Tj/N"),c=i("lvCY"),l=i("qfBg"),u=i("lGQG"),d=i("1Tmk"),h=i("Y9WU"),p=(i("j4ir"),i("tyNb")),b=i("2rWG"),f=i("sbmM"),m=i("ofXK"),g=i("qUN8"),v=i("e0xV"),C=i("dlKe"),E=i("1kSV"),w=i("sYmb"),S=i("BhhM");const y=["featurePopover"];function O(e,t){if(1&e&&(n.Xb(0,"span",6),n.Zc(1),n.oc(2,"translate"),n.oc(3,"translate"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.overrideTitle?n.pc(2,1,"GLOBAL.TEAMMATES_DROPDOWN"):(null==e.selectedUser?null:e.selectedUser.name)||(null==e.selectedUser?null:e.selectedUser.email)||n.pc(3,3,"SHARED_MODULES.CUSTOM_FIELD.TYPE_SELECT_LABEL")," ")}}function A(e,t){if(1&e&&(n.Xb(0,"span",7),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.selectedUser?e.selectedUser.name||e.selectedUser.email:n.pc(2,1,"GLOBAL.USER_LABEL")," ")}}function k(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",30),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.bd(" ",n.pc(3,1,"GLOBAL.ACTIVE_LABEL")," "))}function T(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",30),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.bd(" ",n.pc(3,1,"GLOBAL.INACTIVE_LABEL")," "))}function D(e,t){1&e&&(n.Vb(0),n.Xb(1,"span",30),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Ub()),2&e&&(n.Cb(2),n.bd(" ",n.pc(3,1,"GLOBAL.ALL_LABEL")," "))}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",24),n.Xb(1,"a",25),n.jc("click",(function(){return n.Oc(e),n.nc(2).toggleStatusFilter()})),n.Vb(2,26),n.Xc(3,k,4,3,"ng-container",27),n.Xc(4,T,4,3,"ng-container",27),n.Xc(5,D,4,3,"ng-container",28),n.Ub(),n.Sb(6,"img",29),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(2),n.wc("ngSwitch",e.usersQuery.status),n.Cb(1),n.wc("ngSwitchCase","ACTIVE"),n.Cb(1),n.wc("ngSwitchCase","INACTIVE")}}function _(e,t){if(1&e&&(n.Xb(0,"div",31,32),n.Xb(2,"div",33),n.Xb(3,"div",34),n.Xb(4,"span",6),n.Zc(5),n.Wb(),n.Wb(),n.Xb(6,"div",35),n.Sb(7,"img",36),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(2),t=n.Lc(7);n.wc("ngbPopover",t),n.Cb(5),n.ad(e.selectedUser.name||e.selectedUser.email)}}function R(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",40),n.jc("click",(function(){n.Oc(e);const t=n.nc().$implicit;return n.nc(3).selectUser(t)}))("keyup.enter",(function(){n.Oc(e);const t=n.nc().$implicit;return n.nc(3).selectUser(t)})),n.Zc(1),n.Wb()}if(2&e){const e=n.nc().$implicit,t=n.nc(3);n.Db("clickCloseDropdown",!(!t.hasAddTimeForOthersFeature&&e.id!==t.loggedInUser.id)||null),n.Cb(1),n.bd(" ",e.name||e.email," ")}}function L(e,t){if(1&e&&(n.Vb(0),n.Xc(1,R,2,2,"div",39),n.Ub()),2&e){const e=t.$implicit,i=n.nc(3);n.Cb(1),n.wc("ngIf",(null==i.selectedUser?null:i.selectedUser.id)!==e.id)}}function x(e,t){1&e&&(n.Xb(0,"span",41),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.NO_RESULTS_LABEL")," "))}function P(e,t){if(1&e&&(n.Vb(0),n.Xc(1,L,2,1,"ng-container",37),n.Xc(2,x,3,3,"span",38),n.Ub()),2&e){const e=t.ngIf,i=n.nc(2);n.Cb(1),n.wc("ngForOf",e),n.Cb(1),n.wc("ngIf",i.search&&!(null!=e&&e.length))}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",8),n.Xb(1,"div",9),n.Xb(2,"div",10),n.Xb(3,"input-search",11),n.jc("onSearchChange",(function(t){n.Oc(e);const i=n.nc();return i.search=t,i.onSearchChange()})),n.oc(4,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Vb(5),n.Xb(6,"div",12),n.Xb(7,"div",13),n.Xb(8,"div",14),n.Zc(9),n.oc(10,"translate"),n.Wb(),n.Xc(11,I,7,3,"div",15),n.Wb(),n.Wb(),n.Xb(12,"div",16),n.Xb(13,"div",17),n.Xb(14,"a",18),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus("ACTIVE")})),n.Xb(15,"div",6),n.Zc(16),n.oc(17,"translate"),n.Wb(),n.Wb(),n.Xb(18,"a",18),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus("INACTIVE")})),n.Xb(19,"div",6),n.Zc(20),n.oc(21,"translate"),n.Wb(),n.Wb(),n.Xb(22,"a",18),n.jc("click",(function(){return n.Oc(e),n.nc().filterByStatus(null)})),n.Xb(23,"div",6),n.Zc(24),n.oc(25,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Ub(),n.Xc(26,_,8,2,"div",19),n.Xb(27,"div",20,21),n.jc("scrolled",(function(){return n.Oc(e),n.nc().onScroll()})),n.Xc(29,P,3,2,"ng-container",22),n.oc(30,"filter"),n.Sb(31,"span",23),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(3),n.wc("debounceTime",e.debounceTime)("search",e.search)("placeholder",n.pc(4,20,e.placeholder)),n.Cb(6),n.bd(" ",n.pc(10,22,"GLOBAL.SHOW_LABEL")," "),n.Cb(2),n.wc("ngIf",e.usersQuery),n.Cb(1),n.wc("hidden",e.filterHidden),n.Cb(2),n.Hb("cl-active",e.usersQuery&&"ACTIVE"==e.usersQuery.status),n.Cb(2),n.ad(n.pc(17,24,"GLOBAL.ACTIVE_LABEL")),n.Cb(2),n.Hb("cl-active",e.usersQuery&&"INACTIVE"==e.usersQuery.status),n.Cb(2),n.ad(n.pc(21,26,"GLOBAL.INACTIVE_LABEL")),n.Cb(2),n.Hb("cl-active",!e.usersQuery.status||"ALL"==e.usersQuery.status),n.Cb(2),n.ad(n.pc(25,28,"GLOBAL.ALL_LABEL")),n.Cb(2),n.wc("ngIf",e.showSelectedUser()),n.Cb(1),n.wc("infiniteScrollDistance",3)("infiniteScrollThrottle",150)("scrollWindow",!1),n.Cb(2),n.wc("ngIf",n.rc(30,30,e.users,e.areAllUsersLoaded&&e.search,e.nameMapper))}}const M=function(){return["/upgrade"]},X=function(){return{plan:"basic"}};function F(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",43),n.jc("click",(function(){return n.Oc(e),n.nc(2).analyticsService.addEventOnSettingsChanged("Basic","Upgrade","Reports","Summary","Add time for others")})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.wc("routerLink",n.Ac(5,M))("queryParams",n.Ac(6,X)),n.Cb(1),n.ad(n.pc(2,3,"GLOBAL.UPGRADE_BTN")))}function W(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.ad(n.pc(2,1,"GLOBAL.UPGRADE_BTN")))}function B(e,t){if(1&e&&(n.Xb(0,"div"),n.Xc(1,F,3,7,"a",42),n.Xc(2,W,3,3,"ng-container",22),n.Zc(3),n.oc(4,"translate"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner),n.Cb(1),n.bd(" ",n.pc(4,3,"GLOBAL.ADD_TIME_OTHERS_TEXT_PART")," ")}}let N=(()=>{class e{constructor(e,t,i,r,o,a){this.analyticsService=e,this.cd=t,this.router=i,this.userService=r,this.authService=o,this.wsService=a,this.userSelected=new n.n,this.placeholder="ACTIVITY_TABS.SCREENSHOTS.SEARCH_TEAMMATES_PLACEHOLDER",this.debounceTime=300,this.search="",this.users=[],this.usersQuery={page:1,name:"",limit:c.j,status:"ACTIVE",statuses:"ACTIVE",forceFilter:!0},this.unsubscribe$=new s.a,this.filterHidden=!0}ngOnInit(){this.loggedInUser=this.authService.getUser(),this.authService.permissionData$.pipe(Object(r.a)(e=>null!==e),Object(o.a)(this.unsubscribe$)).subscribe(e=>{this.isAdminOrOwner=e.isAdminOrOwner,this.isManager=e.isTeamManager,this.isSelfManaged=!!e.teamManagerUsers.filter(e=>e.entityId===this.loggedInUser.id).length})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}filterByStatus(e){this.usersQuery.changedStatus=!0,this.usersQuery.name="",this.usersQuery.statuses=e,this.usersQuery.status=e,this.usersQuery.page=1,this.toggleStatusFilter(),this.getUsers()}toggleStatusFilter(){this.filterHidden=!this.filterHidden}get overrideTitle(){var e;return this.showLoggedInUser?"":(null===(e=this.selectedUser)||void 0===e?void 0:e.id)===this.loggedInUser.id?"Teammates":""}onScroll(){this.usersQuery.page++,this.getUsers()}showSelectedUser(){var e;return(null===(e=this.workspace.memberships.filter(e=>{var t,i,n;return e.userId==(null===(t=this.selectedUser)||void 0===t?void 0:t.id)&&((null===(i=this.usersQuery)||void 0===i?void 0:i.status)==e.membershipStatus||!this.usersQuery.status||"PENDING"==e.membershipStatus&&"ACTIVE"==(null===(n=this.usersQuery)||void 0===n?void 0:n.status))}))||void 0===e?void 0:e.length)>0}onSearchChange(){this.usersQuery.name=this.search,this.usersQuery.page=1,this.getUsers()}onDropdownOpen(){this.isGetUsersTriggered||this.getUsers()}getManagedUsers(){const{name:e,page:t}=this.usersQuery;this.wsService.getReportsFilterTeamMembers(this.usersQuery).pipe(Object(o.a)(this.unsubscribe$)).subscribe(({users:i})=>{this.areAllUsersLoaded=!e&&i.length<this.usersQuery.limit;const n=i.map(e=>new a.a(e));this.users=1===t?n:[...this.users,...n],this.excludeLoggedInUser&&!this.isSelfManaged&&(this.users=this.users.filter(e=>e.id!==this.loggedInUser.id)),this.cd.detectChanges()})}getUsers(){if(this.isManager&&!this.isAdminOrOwner&&this.getManagedUsers(),!this.isAdminOrOwner)return;this.isGetUsersTriggered=!0;const{name:e,page:t}=this.usersQuery;this.usersQuery.emailAsName=!0,this.wsService.getUsers(this.usersQuery).pipe(Object(o.a)(this.unsubscribe$)).subscribe(i=>{this.areAllUsersLoaded=!e&&i.users.length<this.usersQuery.limit;const n=i.users.map(e=>new a.a(e));this.users=1===t?n:[...this.users,...n],this.cd.detectChanges()})}selectUser(e){var t;e.id!==(null===(t=this.selectedUser)||void 0===t?void 0:t.id)&&(this.hasAddTimeForOthersFeature?(this.selectedUser=e,this.userSelected.emit(this.selectedUser)):this.togglePopover())}nameMapper(e){return e.name}togglePopover(){this.featurePopover.isOpen()?this.featurePopover.close():this.featurePopover.open()}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(h.a),n.Rb(n.h),n.Rb(p.d),n.Rb(l.a),n.Rb(u.a),n.Rb(d.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["teammate-picker2"]],viewQuery:function(e,t){var i;1&e&&n.gd(y,!0),2&e&&n.Kc(i=n.kc())&&(t.featurePopover=i.first)},inputs:{selectedUser:"selectedUser",hasAddTimeForOthersFeature:"hasAddTimeForOthersFeature",showLoggedInUser:"showLoggedInUser",workspace:"workspace",excludeLoggedInUser:"excludeLoggedInUser",userTitle:"userTitle"},outputs:{userSelected:"userSelected"},decls:8,vars:5,consts:[["data-cy","teammate-dropdown",1,"cl-dropdown",3,"dropdownKey","onOpen"],["tabindex","0","dropdownKeyButton","",1,"cl-btn","cl-btn-outline-light","cl-text-left","cl-dropdown-toggle","pointer","cl-d-flex"],["class","cl-cut-text",4,"ngIf","ngIfElse"],["userTitleTemplate",""],["class","cl-dropdown-menu","style","width: 300px;","openUpAtBottom","",4,"dropdownKeyContent"],["popContent",""],[1,"cl-cut-text"],[1,"cl-cut-text","cl-mr-3","cl-mt-1"],["openUpAtBottom","",1,"cl-dropdown-menu",2,"width","300px"],[1,"cl-dropdown-menu-header"],[1,"cl-input-group"],[1,"cl-w-100",3,"debounceTime","search","placeholder","onSearchChange"],[1,"cl-dropdown-item","cl-border-bottom","cl-border-light"],[1,"cl-item-between"],[1,"cl-dropdown-header","cl-h5","cl-p-0"],["class","cl-cut-text-wrapper",4,"ngIf"],["id","active-inactive-1",1,"cl-collapse",3,"hidden"],[1,"cl-collapse-content"],[1,"cl-dropdown-item","cl-cut-text-wrapper",3,"click"],["triggers","manual","container","body","placement","left","class","cl-dropdown-item cl-px-3 cl-dropdown-menu-sub-header",3,"ngbPopover",4,"ngIf"],["infiniteScroll","",1,"cl-scroll-area",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["scrollArea",""],[4,"ngIf"],["dropdownClose","","tabindex","0"],[1,"cl-cut-text-wrapper"],[1,"cl-text-gray-6","cl-d-flex","cl-justify-content-end",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["src","assets/ui-icons/chevron-down.svg"],[1,"cl-dropdown-item-expand","cl-cut-text"],["triggers","manual","container","body","placement","left",1,"cl-dropdown-item","cl-px-3","cl-dropdown-menu-sub-header",3,"ngbPopover"],["featurePopover","ngbPopover"],[1,"cl-item-between","cl-d-flex","cl-justify-content-between","cl-w-100"],[1,"cl-d-flex","cl-cut-text-wrapper"],[1,"cl-d-flex","cl-ml-1","cl-dropdown-item-workspace-right"],["src","assets/ui-icons/checkmark-green.svg",1,"cl-ml-1"],[4,"ngFor","ngForOf"],["class","cl-dropdown-item",4,"ngIf"],["class","cl-dropdown-item cl-px-3 cl-hover-pointer cl-cut-text-wrapper","tabindex","0",3,"click","keyup.enter",4,"ngIf"],["tabindex","0",1,"cl-dropdown-item","cl-px-3","cl-hover-pointer","cl-cut-text-wrapper",3,"click","keyup.enter"],[1,"cl-dropdown-item"],["doNotCloseDropdown","",3,"routerLink","queryParams","click",4,"ngIf"],["doNotCloseDropdown","",3,"routerLink","queryParams","click"]],template:function(e,t){if(1&e&&(n.Xb(0,"div",0),n.jc("onOpen",(function(){return t.onDropdownOpen()})),n.Xb(1,"div",1),n.Xc(2,O,4,5,"span",2),n.Xc(3,A,3,3,"ng-template",null,3,n.Yc),n.Wb(),n.Xc(5,j,32,34,"div",4),n.Wb(),n.Xc(6,B,5,5,"ng-template",null,5,n.Yc)),2&e){const e=n.Lc(4);n.wc("dropdownKey",!1),n.Cb(1),n.Hb("cl-border-0",t.userTitle),n.Cb(1),n.wc("ngIf",!t.userTitle)("ngIfElse",e)}},directives:[b.a,f.a,m.u,g.a,v.a,C.a,m.y,m.z,m.A,E.M,m.t,p.g],pipes:[w.e,S.a],encapsulation:2,changeDetection:0}),e})()},ogL9:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},okBH:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n,s){if(s)return e;if(t||(t=e=>e),!e)return e;const r=e.filter(e=>e.isNew),o=e.filter(e=>!e.isNew);return o.sort((function(e,i){var n,s;const r=null===(n=t(e))||void 0===n?void 0:n.toLowerCase(),o=null===(s=t(i))||void 0===s?void 0:s.toLowerCase();return r<o?-1:r>o?1:0})),[...r,...o]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"sortBy",type:e,pure:!0}),e})()},p0l5:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this._id=null==e?void 0:e.id,this._name=null==e?void 0:e.name,this._hasUnitPrice=null==e?void 0:e.hasUnitPrice,this._priceInCents=null==e?void 0:e.priceInCents,this._unit=null==e?void 0:e.unit,this._workspaceId=null==e?void 0:e.workspaceId,this._archived=null==e?void 0:e.archived}get priceInCents(){return this._priceInCents}get workspaceId(){return this._workspaceId}get archived(){return this._archived}get hasUnitPrice(){return this._hasUnitPrice}get unit(){return this._unit}get id(){return this._id}get name(){return this._name}}},pCWH:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i("tnjF"),i("O3o7"),i("iO9P");var n=i("xoOP"),s=(i("j4ir"),i("fXoL")),r=i("sYmb"),o=i("ofXK"),a=i("sbmM");function c(e,t){1&e&&s.Sb(0,"span",6)}function l(e,t){if(1&e&&(s.Xb(0,"a",2),s.Xb(1,"span"),s.Sb(2,"i",3),s.Xb(3,"span"),s.Zc(4),s.Wb(),s.Wb(),s.Xc(5,c,1,0,"span",4),s.Xb(6,"span",5),s.Zc(7),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Db("title",e.projectAttributeTitle),s.Cb(1),s.Wc("color",e.project.color),s.Cb(1),s.Wc("background-color",e.project.color),s.Cb(2),s.cd("",e.project.name,"",e.task?": "+e.task.name:"",""),s.Cb(1),s.wc("ngIf",e.project.clientName),s.Cb(2),s.ad(null==e.project?null:e.project.clientName)}}function u(e,t){if(1&e&&(s.Xb(0,"div",7),s.Xb(1,"div",8),s.Xb(2,"a",9),s.Sb(3,"img",10),s.Xb(4,"span",11),s.Zc(5),s.oc(6,"translate"),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e){const e=s.nc();s.Cb(3),s.wc("src",e.projectData.required?"assets/images/ui-icons/plus-blue-req.svg":"assets/images/ui-icons/plus-blue.svg",s.Qc),s.Cb(2),s.ad(s.pc(6,2,e.projectData.label))}}let d=(()=>{class e{constructor(e){this.translate=e,this.isDisabled=!1}set project(e){this._project=e,this.isInitiazlied&&this.setLabel()}get project(){return this._project}ngOnInit(){this.setLabel(),this.isInitiazlied=!0}setLabel(){var e;this.projectAttributeTitle=Object(n.o)({project:this.project,task:this.task},this.translate.instant("GLOBAL.PROJECT_LABEL"),this.translate.instant("GLOBAL.TASK_LABEL"),null===(e=this.workspace)||void 0===e?void 0:e.projectGroupingLabel)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(r.f))},e.\u0275cmp=s.Lb({type:e,selectors:[["project-picker-label"],["","project-picker-label",""]],inputs:{project:"project",task:"task",workspace:"workspace",projectData:"projectData",isDisabled:"isDisabled"},decls:2,vars:2,consts:[["dropdownKeyButton","","tabindex","0","class","cl-project-name cl-project-name-colored cl-dropdown-toggle cl-no-arrow cl-listing-project-client",4,"ngIf"],["dropdownKeyButton","","tabindex","0","class","cl-dropdown cl-dropdown-large cl-d-lg-custom-flex",4,"ngIf"],["dropdownKeyButton","","tabindex","0",1,"cl-project-name","cl-project-name-colored","cl-dropdown-toggle","cl-no-arrow","cl-listing-project-client"],[1,"cl-entry__project__dot"],["class","cl-h-line-divider",4,"ngIf"],[1,"cl-listing-client"],[1,"cl-h-line-divider"],["dropdownKeyButton","","tabindex","0",1,"cl-dropdown","cl-dropdown-large","cl-d-lg-custom-flex"],[1,"cl-component-divided-left","cl-no-divider-border","cl-pl-0","cl-dropdown-toggle","cl-no-arrow"],[1,"cl-d-flex","cl-color-blue"],[3,"src"],[1,"cl-ml-2"]],template:function(e,t){1&e&&(s.Xc(0,l,8,9,"a",0),s.Xc(1,u,7,4,"div",1)),2&e&&(s.wc("ngIf",t.project),s.Cb(1),s.wc("ngIf",!t.project&&!t.isDisabled))},directives:[o.u,a.a],pipes:[r.e],encapsulation:2,changeDetection:0}),e})()},pCw1:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));class n{constructor(e){this._requiresApproval=null==e?void 0:e.requiresApproval,this._teamManagers=null==e?void 0:e.teamManagers,this._specificMembers=null==e?void 0:e.specificMembers,this._userIds=null==e?void 0:e.userIds}get requiresApproval(){return this._requiresApproval}get teamManagers(){return this._teamManagers}get specificMembers(){return this._specificMembers}get userIds(){return this._userIds}set requiresApproval(e){this._requiresApproval=e}set teamManagers(e){this._teamManagers=e}set specificMembers(e){this._specificMembers=e}set userIds(e){this._userIds=e}}class s{constructor(e){this._amount=null==e?void 0:e.amount,this._period=null==e?void 0:e.period,this._timeUnit=null==e?void 0:e.timeUnit}set amount(e){this._amount=e}get amount(){return this._amount}set period(e){this._period=e}get period(){return this._period}set timeUnit(e){this._timeUnit=e}get timeUnit(){return this._timeUnit}}class r{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._name=null==e?void 0:e.name,this._allowNegativeBalance=null==e?void 0:e.allowNegativeBalance,this._allowHalfDay=null==e?void 0:e.allowHalfDay,this._archived=null==e?void 0:e.archived,this._timeUnit=null==e?void 0:e.timeUnit,this._userIds=null==e?void 0:e.userIds,this._userGroupIds=null==e?void 0:e.userGroupIds,this._approve=new n(null==e?void 0:e.approve),this._everyoneIncludingNew=null==e?void 0:e.everyoneIncludingNew,this._automaticAccrual=new s(null==e?void 0:e.automaticAccrual)}get id(){return this._id}get workspaceId(){return this._workspaceId}get name(){return this._name}get allowNegativeBalance(){return this._allowNegativeBalance}get allowHalfDay(){return this._allowHalfDay}get archived(){return this._archived}get timeUnit(){return this._timeUnit}get userIds(){return this._userIds}get userGroupIds(){return this._userGroupIds}get approve(){return this._approve}set name(e){this._name=e}set allowHalfDay(e){this._allowHalfDay=e}set userIds(e){this._userIds=e}set userGroupIds(e){this._userGroupIds=e}set approve(e){this._approve=e}set allowNegativeBalance(e){this._allowNegativeBalance=e}set timeUnit(e){this._timeUnit=e}get everyoneIncludingNew(){return this._everyoneIncludingNew}set everyoneIncludingNew(e){this._everyoneIncludingNew=e}get automaticAccrual(){return this._automaticAccrual}set automaticAccrual(e){this._automaticAccrual=e}}},pOhx:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("ydbL"),r=i("VYrk"),o=i("lGQG"),a=i("4olG"),c=i("GS88"),l=i("ofXK"),u=i("JO38");function d(e,t){1&e&&n.Sb(0,"div",6)}function h(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",10),n.Xb(1,"div",11),n.Xb(2,"custom-field-value",12),n.jc("valueChanged",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(4).valueChanged(i,s)}))("manyChanged",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(4).manyChanged.emit({value:i,customFieldId:s.customFieldId})})),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit,i=n.nc(4);n.Cb(2),n.wc("disabled",i.isLocked&&!i.isAdmin||i.disableEdit)("timeEntryId",i.timeEntryId)("customField",e)}}function p(e,t){if(1&e&&(n.Xb(0,"div",7),n.Xb(1,"div",8),n.Xc(2,h,3,3,"div",9),n.Wb(),n.Wb()),2&e){const e=n.nc().$implicit,t=n.nc(2);n.Cb(2),n.wc("ngForOf",t.customFieldValuesModified.slice(e.start,e.end))}}function b(e,t){if(1&e&&(n.Xb(0,"div",2),n.Xc(1,d,1,0,"div",3),n.Sb(2,"hr",4),n.Xc(3,p,3,1,"div",5),n.Wb()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.wc("ngIf",i.isLocked&&!i.isAdmin||i.disableEdit),n.Cb(2),n.wc("ngIf",i.customFields&&i.customFieldValuesModified.length>e.start)}}function f(e,t){if(1&e&&(n.Xb(0,"div"),n.Xc(1,b,4,2,"div",1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",e.rows)}}let m=(()=>{class e{constructor(e,t){this.cd=e,this.authService=t,this.customFieldValuesModified=[],this.entryChanged=new n.n,this.manyChanged=new n.n,this.rows=[{start:0,end:5}]}set customFields(e){this._customFields=e.map(e=>new s.a(e))}get customFields(){return this._customFields}set customFieldValues(e){this._customFieldValues=e||[],this.createList()}set projectId(e){this.hasProjectInfo=!0,this._projectId=e,this.createList()}get projectId(){return this._projectId}get customFieldValues(){return this._customFieldValues}ngOnInit(){this.isAdmin=this.authService.isAdminOrOwner(),this.cd.detectChanges()}createList(){this.hasProjectInfo&&this.customFieldValues&&(this.customFieldValuesModified=this.modifyCustomFieldValues(),this.rows=[{start:0,end:5}],this.customFieldValuesModified.length>5&&this.rows.push({start:5,end:10}),this.cd.detectChanges())}modifyCustomFieldValues(){return this.projectId?this.customFields.filter(e=>{const t=e.projectDefaultValues.filter(e=>e.projectId===this.projectId);return 0===t.length&&e.status==a.a.VISIBLE||t.filter(e=>e.status===a.a.VISIBLE).length>0}).map(e=>this.getValue(e)):this.customFields.filter(e=>e.status===a.a.VISIBLE).map(e=>this.getValue(e))}valueChanged(e,t){this.customFieldValuesModified.filter(e=>e.customFieldId===t.customFieldId)[0].sourceType=c.a.TIMEENTRY,this.customFieldValuesModified.filter(e=>e.customFieldId===t.customFieldId)[0].value=e,this.entryChanged.emit(this.customFieldValuesModified)}getValue(e){const t=this.customFieldValues.filter(t=>t.customFieldId===e.id);return t&&t[0]?(t[0].customField=e,t[0].sourceType=c.a.TIMEENTRY,t[0]):new r.a(this.timeEntryId?{customFieldId:e.id,value:null,defaultValue:this.getDefaultValue(e).value,customField:e,sourceType:c.a.TIMEENTRY}:{customFieldId:e.id,value:this.getDefaultValue(e).value,customField:e,sourceType:this.getDefaultValue(e).sourceType})}getDefaultValue(e){const t=e.projectDefaultValues.filter(e=>e.projectId===this.projectId);return t.length>0&&null!=t[0].value&&""!=t[0].value?{value:t[0].value,sourceType:c.a.PROJECT}:{value:e.workspaceDefaultValue,sourceType:c.a.WORKSPACE}}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(o.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["custom-fields-values"]],inputs:{customFields:"customFields",timeEntryId:"timeEntryId",isLocked:"isLocked",customFieldValues:"customFieldValues",projectId:"projectId",disableEdit:"disableEdit"},outputs:{entryChanged:"entryChanged",manyChanged:"manyChanged"},decls:1,vars:1,consts:[[4,"ngIf"],["class","cl-relative",4,"ngFor","ngForOf"],[1,"cl-relative"],["class","cl-blocker",4,"ngIf"],[1,"cl-my-0","cl-mx-lg-custom-3"],["class","cl-component-row cl-p-0 cl-my-n2",4,"ngIf"],[1,"cl-blocker"],[1,"cl-component-row","cl-p-0","cl-my-n2"],[1,"cl-row","cl-w-100","cl-align-items-center","cl-pl-3","cl-py-2","cl-py-lg-0"],["class","cl-col cl-cf-col",4,"ngFor","ngForOf"],[1,"cl-col","cl-cf-col"],[1,"cl-cut-text-wrapper"],[3,"disabled","timeEntryId","customField","valueChanged","manyChanged"]],template:function(e,t){1&e&&n.Xc(0,f,2,1,"div",0),2&e&&n.wc("ngIf",t.customFieldValuesModified&&t.customFieldValuesModified.length>0)},directives:[l.u,l.t,u.a],encapsulation:2,changeDetection:0}),e})()},ps2d:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t,i,n){if(t||(t=e=>e),!e)return e;const s=e.map(e=>e);return s.sort((function(e,i){const n=t(e),s=t(i);return n<s?-1:n>s?1:0})),s}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"sortByNumber",type:e,pure:!0}),e})()},psuR:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("Tj/N"),s=i("wd/R"),r=i("fXoL");let o=(()=>{class e{constructor(){var e;try{this.dateFormat=(null===(e=new n.a(JSON.parse(localStorage.getItem("user"))).settings)||void 0===e?void 0:e.dateFormat)||"MM/DD/YYYY"}catch(t){this.dateFormat="MM/DD/YYYY"}}transform(e,t,i){return(i?s.tz(e,i):s(e)).format(t||this.dateFormat)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"momentFormat",type:e,pure:!0}),e})()},q92s:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("VRyK");function s(...e){return t=>t.lift.call(Object(n.a)(t,...e))}},qUN8:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("2rWG"),s=i("fXoL");let r=(()=>{class e{constructor(e,t,i){this.templateRef=e,this.viewContainer=t,this.parent=i,this.clickSub=this.parent.click$.subscribe(e=>{e?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()})}forceClose(){this.parent&&this.parent.forceClose()}ngOnDestroy(){this.clickSub&&this.clickSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.M),s.Rb(s.P),s.Rb(n.a))},e.\u0275dir=s.Mb({type:e,selectors:[["","dropdownKeyContent",""]]}),e})()},qb1n:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qcnj:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},qfBg:function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));var n=i("XNiG"),s=i("z6cu"),r=i("lGQG"),o=i("Tj/N"),a=i("Ymxs"),c=i("TuVw"),l=i("OG4e"),u=i("OC8m"),d=i("f0Wu"),h=i("tk/3"),p=i("+NYR"),b=i("vkgz"),f=i("lJxs"),m=i("JIr8"),g=i("1Tmk"),v=i("B4wx"),C=i("huA5"),E=i("xoOP"),w=i("lvCY"),S=i("FwEu"),y=i("hl/z"),O=i("fXoL"),A=i("tyNb"),k=i("sYmb");let T=(()=>{class e{constructor(e,t,i,s,r,o,a,c,l,u,d){this.http=e,this.authService=t,this.toaster=i,this.router=s,this.centUSDConverter=r,this.workspaceService=o,this.notifications=a,this.navigationService=c,this.subdomainService=l,this.translateService=u,this.loader=d,this.onTimeZoneChange$=new n.a,this.error=new n.a,this.membershipForUser=new n.a}setDefaultUserWorkspace(e,t){const i=new n.a,s=this.authService.getUser();return this.http.post(`/users/${s.id}/defaultWorkspace/${e}`,"").subscribe(e=>{this.saveUser(e),this.workspaceService.defaultWorkspaceChanged(t),this.toaster.pop("success",this.translateService.instant("SERVICES.USER.SETTINGS.WORKSPACE.DEFAULT.SUCCESS_MESSAGE")),i.next(e)},e=>{this.navigationService.setRedirectToUpgrade(!1),this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.USER.SETTINGS.WORKSPACE.DEFAULT.ERROR_MESSAGE")),this.error.next(e),i.error(e)}),i}updateSettings(e){e=new o.a(this.centUSDConverter.setAllHourlyRatesFromUSDToCent(e));const t=new n.a;return this.http.put(`/users/${e.id}/settings`,e.toJson()).pipe(Object(b.a)(e=>{this.saveUser(e),this.toaster.pop("success",this.translateService.instant("SERVICES.USER.SETTINGS.SAVE.SUCCESS_MESSAGE"))},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.USER.SETTINGS.SAVE.ERROR_MESSAGE"))})).subscribe(()=>t.next(),e=>t.error(e)),t}updateEmailPreferencesSettings(e){e=new o.a(this.centUSDConverter.setAllHourlyRatesFromUSDToCent(e));const t=new n.a;return this.http.put(`/users/${e.id}/settings`,e.toJson()).pipe(Object(b.a)(e=>{this.saveUser(e),this.toaster.pop("success",this.translateService.instant("SERVICES.USER.EMAIL_PREFERENCES.UPDATE_SUCCESS"))},e=>{var t;return this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.USER.EMAIL_PREFERENCES.UPDATE_ERROR"))})).subscribe(()=>t.next(),e=>t.error(e)),t}changeWorkspaceStatus(e,t){const i=this.workspaceService.getDefaultWorkspaceId(),s=new n.a;return this.http.put(`/invitations/workspaces/${i}/users/${e.id}/status`,t).subscribe(t=>{const i=new c.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(t));this.membershipForUser.next(i),this.toaster.pop("success",this.translateService.instant("SERVICES.USER.WORKSPACE.UPDATE_SUCCESS",{name:e.name,membershipStatus:new c.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(t)).membershipStatus})),this.subdomainService.isSubdomainNotSelfhosted()||(this.navigationService.setWorkspaceIsAccepted(),this.setDefaultUserWorkspace(i.targetId)),s.next(!0)},e=>{this.error.next(e),s.next(!1)}),s}removeDeclinedUserFromWorkspace(e,t){const i=t,n=this.workspaceService.getDefaultWorkspaceId();this.http.put(`/invitations/workspaces/${n}/users/${e.id}`,i).subscribe(t=>{this.notifications.getNotification(),this.toaster.pop("success",this.translateService.instant("SERVICES.USER.INVITATION_DECLINED_MESSAGE",{name:e.name}))},e=>{this.error.next(e)})}updateSummaryReportSettings(e,t,i){this.http.put(`/users/${e.id}/summaryReportSettings`,{group:t,subgroup:i}).subscribe(e=>this.saveUser(e))}updateTimeTrackingSettings(e,t){this.http.put(`/users/${e.id}/timeTrackingSettings`,{timeTrackingManual:t}).subscribe(e=>this.saveUser(e))}updateCompactViewSettings(e){const t=this.authService.getUser();this.http.put(`/users/${t.id}/compactView`,{isCompactViewOn:e}).subscribe(e=>this.saveUser(e))}updateDashboardMeSelection(e){const t=this.authService.getUser();this.http.put(`/users/${t.id}/dashboardMe`,{dashboardSelection:e}).subscribe(e=>this.saveUser(e))}updateSettingsWithoutToast(e){e=new o.a(this.centUSDConverter.setAllHourlyRatesFromUSDToCent(e)),this.http.put(`/users/${e.id}/settings`,e.toJson()).subscribe(e=>this.saveUser(e))}getTimeZone(){const e=this.authService.getUser();return e&&e.settings?e.settings.timeZone:d.tz.guess()}checkNewsletterSubscription(e){return this.http.get("/users/newsletter/"+e).pipe(Object(b.a)(e=>{},e=>{this.error.next(e)}))}checkEmailPreferences(e){return this.http.get("/users/email-preferences/"+e).pipe(Object(b.a)(e=>{},e=>{this.error.next(e)}))}deleteUser(e,t,i){const n=JSON.stringify({emailForm:t,authentication:i});return this.http.post(`/users/${e}/delete`,n).pipe(Object(b.a)(()=>{Object(E.h)(!1),window.location.replace("account-deleted")},e=>{this.toaster.pop("error",e&&e.error&&e.error.message||this.translateService.instant("SERVICES.USER.SETTINGS.DELETE_ACCOUNT.ERROR_MESSAGE")),this.error.next(e)}))}getUserIds(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new h.h).append("name",e.name).append("status","ALL"===e.status?"":e.status);return this.http.get(`/users/workspaces/${t}/report-filters/ids`,{params:i}).pipe(Object(f.a)(e=>e),Object(b.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.USER.GET_IDS.ERROR_MESSAGE"))))}getUsersCount(e,t){const i=t||this.workspaceService.getDefaultWorkspaceId(),n=(new h.h).append("status",e);return this.http.get(`/users/workspaces/${i}/users/count`,{params:n}).pipe(Object(f.a)(e=>e))}getTimeFormatForUser(){return this.authService.getUser()?this.authService.getUser().settings.timeFormat:v.a.HOUR12}getDateFormatForUser(){return this.authService.getUser()?this.authService.getUser().settings.dateFormat:"MM/DD/YYYY"}updateTimeZone(e,t){return this.http.put(`/users/${t}/timezone`,{timezone:e}).pipe(Object(b.a)(e=>{this.saveUser(e),this.onTimeZoneChange$.next(),this.toaster.pop("success",this.translateService.instant("SERVICES.USER.SETTINGS.TIMEZONE.UPDATE.SUCCESS_MESSAGE"))},e=>{var t;4007===e.error.code||this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.USER.SETTINGS.TIMEZONE.UPDATE.ERROR_MESSAGE"))}))}getUserNames(e){const t=this.workspaceService.getDefaultWorkspaceId(),i=(new h.h).append("name",e.name||"").append("sort-column",e.sortColumn||"name").append("sort-order",e.sortOrder||"").append("page",e.page||"0").append("page-size",e.limit||w.j).append("status",e.status||S.a.ACTIVE);return this.http.post(`/users/workspaces/${t}/names`,e.ids?{ids:e.ids}:{},{params:i}).pipe(Object(f.a)(e=>e),Object(b.a)(null,e=>this.toaster.pop("error",e.error&&e.error.message||this.translateService.instant("SERVICES.USER.GET_IDS.ERROR_MESSAGE"))))}saveUser(e){const t=new o.a(this.centUSDConverter.setAllHourlyRatesFromCentToUSD(e));this.authService.saveUserAndEmit(t)}setLanguage(e){const t=this.authService.getUser();return this.http.put(`/users/${t.id}/lang`,{lang:e.toUpperCase()}).pipe(Object(b.a)(i=>{t.settings.lang=e.toUpperCase(),this.authService.saveUserAndEmit(t)}),Object(m.a)(e=>{var t;return this.loader.hide(),this.toaster.pop("error",(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)||this.translateService.instant("SERVICES.USER.SETTINGS.SAVE.ERROR_MESSAGE")),Object(s.a)(e)}))}}return e.\u0275fac=function(t){return new(t||e)(O.fc(h.c),O.fc(r.a),O.fc(a.a),O.fc(A.d),O.fc(l.a),O.fc(g.a),O.fc(u.a),O.fc(p.a),O.fc(C.a),O.fc(k.f),O.fc(y.a))},e.\u0275prov=O.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qvXw:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("ksGH"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},imports:[[n.c,s.a]]}),e})()},r21O:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wd/R"),s=i("YnOA"),r=i("fXoL");let o=(()=>{class e{transform(e,t){const i=Object(n.duration)(e);return i.asMilliseconds()?Object(s.a)(i,t):"\u2014"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"timeFormatOrDash",type:e,pure:!0}),e})()},r5nx:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("6FRn"),s=i("fXoL"),r=i("sYmb");const o=["button"],a=["*"];let c=(()=>{class e{constructor(e){this.copyService=e,this.readonly=!0,this.autofocus=!0}ngOnInit(){this.button&&this.autofocus&&this.button.nativeElement.focus()}copyToClipboard(e){this.copyService.copyToClipboard(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(n.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["text-copy"]],viewQuery:function(e,t){var i;1&e&&s.Uc(o,!0),2&e&&s.Kc(i=s.kc())&&(t.button=i.first)},inputs:{text:"text",readonly:"readonly",autofocus:"autofocus"},ngContentSelectors:a,decls:9,vars:5,consts:[[1,"cl-input-group","cl-mb-2"],["type","text",1,"cl-form-control",3,"readonly","value"],["input",""],[1,"cl-input-group-append"],["tabindex","0","type","button",1,"cl-btn","cl-btn-outline-light",3,"click","keyup.enter","keyup.space"],["button",""]],template:function(e,t){if(1&e){const e=s.Yb();s.vc(),s.Xb(0,"div",0),s.Sb(1,"input",1,2),s.Xb(3,"div",3),s.Xb(4,"button",4,5),s.jc("click",(function(){s.Oc(e);const i=s.Lc(2);return t.copyToClipboard(i)}))("keyup.enter",(function(){s.Oc(e);const i=s.Lc(2);return t.copyToClipboard(i)}))("keyup.space",(function(){s.Oc(e);const i=s.Lc(2);return t.copyToClipboard(i)})),s.Zc(6),s.oc(7,"translate"),s.Wb(),s.Wb(),s.Wb(),s.uc(8)}2&e&&(s.Cb(1),s.wc("readonly",t.readonly)("value",t.text),s.Cb(5),s.ad(s.pc(7,3,"GLOBAL.COPY_LABEL")))},pipes:[r.e],encapsulation:2}),e})()},rf9C:function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("fXoL"),s=i("1G5W"),r=i("XNiG"),o=i("1uah"),a=i("JBiw"),c=i("8+Zx"),l=i("cGux"),u=i("hkzH"),d=i("y+xF"),h=i("lvCY"),p=i("qfBg"),b=i("Qyj8"),f=i("VTb6"),m=i("jpmO"),g=i("nLyk"),v=i("LfE4"),C=i("sYmb"),E=i("2rWG"),w=i("ofXK"),S=i("sbmM"),y=i("1kSV"),O=i("qUN8"),A=i("D0uv");function k(e,t){if(1&e&&(n.Xb(0,"span",6),n.Zc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.numberOfSelected," ")}}function T(e,t){if(1&e&&(n.Xb(0,"span"),n.Zc(1),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e.labels," ")}}function D(e,t){if(1&e&&(n.Xb(0,"span"),n.Zc(1),n.oc(2,"translate"),n.Wb()),2&e){const e=n.nc();n.Cb(1),n.bd(" ",e._title?e._title:n.pc(2,1,"REPORTS.SHARE_REPORT.MAIL.SELECT_USERS_TOOLTIP")," ")}}function I(e,t){if(1&e){const e=n.Yb();n.Xb(0,"dropdown-checkbox",7),n.jc("loadMore",(function(){return n.Oc(e),n.nc().loadMore()}))("onSelectAllWithTextInput",(function(t){return n.Oc(e),n.nc().selectAllIds(t)}))("onSearchChange",(function(t){n.Oc(e);const i=n.nc();return i.onSearchChange(t),i.fetchData()}))("onFilterOptionChange",(function(t){n.Oc(e);const i=n.nc();return i.clearOptionFilter(t),i.fetchData()}))("onCloseFilter",(function(t){return n.Oc(e),n.nc().generateIndicatorOf(t)}))("onChange",(function(t){n.Oc(e);const i=n.nc();return i.valueChanged(t),i.generateIndicatorOf(t)})),n.Wb()}if(2&e){const e=n.nc();n.wc("placeholder",e.placeholder)("filterName",e.filterName)("showSelectAll",!0)("showTitles",!0)("checkboxValues",e.valuesData)("singleMapProperty",e.singleMapProperty)("selectableMaps",e.selectableMaps)("searchValue",e.query.name)("countMap",e.countMap)("filterOptions",e.filterOptions)("countNumber",e.counts)("inProgressSelectAll",e.inProgressSelectAll)("inProgressLoading",e.inProgressLoading)}}let _=(()=>{class e{constructor(e,t,i,s,o){this.cd=e,this.userService=t,this.userV1Service=i,this.projectService=s,this.translate=o,this.ReportFilter=u.i,this.labels=null,this.numberOfSelected=null,this.reachedLimit={},this.isLink=!1,this.placeholder=this.translate.instant("SHARED_MODULES.DROPDOWN_CHECKBOX_WRAPPER.FIND_USER_PLACEHOLDER"),this.filterName="users",this.onChange=new n.n,this.selectableMaps=new a.a([]),this.countMap=new l.a,this.unsubscribe$=new r.a}set valuesData(e){e&&(e=e||new c.a({options:{status:v.a.ACTIVE}}),this._valuesData=e,c.a.updateMapFromValuesData(this.valuesData,this.selectableMaps),this.generateIndicatorOf())}get valuesData(){return this._valuesData}set constrainContainsFilter(e){const t=c.a.isContainsFiltersSame(this.constrainContainsFilter,e);this._constrainContainsFilter=e,t||(this.resetQuery(),this.selectableMaps.clearAllMaps())}get constrainContainsFilter(){return this._constrainContainsFilter}set title(e){e&&(this._title=e)}ngOnDestroy(){}ngOnInit(){let e;this.type===u.i.USERS_AND_GROUP?e=[new d.a(u.k)]:(e=[new d.a(this.type)],this.singleMapProperty=this.type),this.selectableMaps=new a.a(e),this.resetQuery()}loadMore(){this.fetchData()}fetchData(){this.type===u.i.USERS_AND_GROUP?this.getUsers():this.type===u.i.PROJECTS?this.getProjects():console.error("Dropdown checkbox wrapper: missing type")}resetQuery(){this.query={page:1,limit:h.f,name:""},this.type===u.i.PROJECTS&&(this.query.billable=m.a.BOTH,this.query.sortColumn=g.a.CLIENT_NAME),this.reachedLimit={},this.labels=null}valueChanged(e){this.valuesData=e.checkboxValues,this.selectableMaps=e.selectableMaps,this.onChange.emit(this.valuesData)}generateIndicatorOf(e){if(e)return this.numberOfSelected=e.numberOfSelected||e.numberOfSelectedApproximately,this.labels=e.label,void this.cd.markForCheck();const t=this.valuesData.getSelectedData(this.selectableMaps);this.numberOfSelected=t.numberOfSelected||t.numberOfSelectedApproximately,this.labels=t.label,this.cd.markForCheck()}selectAllIds(e){this.type===u.i.USERS_AND_GROUP?this.selectAllUserIds(e):this.type===u.i.PROJECTS&&this.selectAllProjectIds(e)}onSearchChange(e){this.clearOptionFilter({searchTerm:e},!1)}clearOptionFilter(e,t=!0){this.query.page=1,this.query.name=e.searchTerm,this.reachedLimit[u.k]=!1,this.reachedLimit[this.type]=!1,t&&(this.countMap.reset(),this.counts=null)}setInProgressLoading(e){this.inProgressLoading=e,this.cd.markForCheck()}setInProgress(e){this.inProgressSelectAll=e,this.cd.markForCheck()}setFilterIds(e,t){let i=e.isSelected;this.valuesData.exclude&&(i=!i),this.valuesData.toggleMultipleIds(this.type,t,i),this.isOpenedMap||this.generateIndicatorOf(),this.setInProgress(!1)}getUsers(e=this.query){var t;this.reachedLimit[u.k]||(e.statuses=this.valuesData.options.status,e.userGroupId=null===(t=this.constrainContainsFilter)||void 0===t?void 0:t.ids[0],this.setInProgressLoading(!0),this.getUsersEndpoint(e).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.selectableMaps.resetAll(),this.query.page++,this.selectableMaps.pushToMap(u.k,t);const i=t.length<e.limit;this.reachedLimit[u.k]=i,i&&!e.name&&(this.counts=this.selectableMaps.count()),this.setInProgressLoading(!1)},()=>this.setInProgressLoading(!1)))}getUsersEndpoint(e){return null!=e.userGroupId?this.userV1Service.getActiveUsersInGroup(e):this.userV1Service.getTeamMembers(e)}selectAllUserIds(e){const t=this.userService.getUserIds({status:this.valuesData.options.status,name:e.searchTerm});this.setInProgress(!0),Object(o.a)(t).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{let i=e.isSelected;this.valuesData.exclude&&(i=!i),this.valuesData.toggleMultipleIds(u.k,t[0],i),this.isOpenedMap||this.generateIndicatorOf(),this.setInProgress(!1)},e=>{this.setInProgress(!1)})}getProjects(e=this.query){if(this.reachedLimit[this.type])return;const t=Object.assign({},e);t.status=this.valuesData.options.status;const i=this.constrainContainsFilter||null;this.setInProgressLoading(!0),this.projectService.getProjects(t,i).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>{1===e.page&&this.selectableMaps.resetAll(),this.query.page++;const i=this.transformResponse(t,"clientName",this.translate.instant("GLOBAL.NO_CLIENT_LABEL"));for(const e in i)this.selectableMaps.pushToMap(e,i[e]);const n=t.length<e.limit;this.reachedLimit[this.type]=n,n&&!e.name&&(this.counts=this.selectableMaps.count()),this.setInProgressLoading(!1)},()=>this.setInProgressLoading(!1))}transformResponse(e,t,i){const n={};return e.forEach(e=>{const s=e[t]||i;n[s]||(n[s]=[]),n[s].push(e)}),n}selectAllProjectIds(e){const t={status:this.valuesData.options.status,name:e.searchTerm,clients:this.constrainContainsFilter||null};this.setInProgress(!0),this.projectService.getProjectIds(t).pipe(Object(s.a)(this.unsubscribe$)).subscribe(t=>this.setFilterIds(e,t),()=>this.setInProgress(!1))}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(n.h),n.Rb(p.a),n.Rb(b.a),n.Rb(f.a),n.Rb(C.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["dropdown-checkbox-wrapper"]],inputs:{isLink:"isLink",type:"type",filterOptions:"filterOptions",valuesData:"valuesData",constrainContainsFilter:"constrainContainsFilter",title:"title",placeholder:"placeholder",filterName:"filterName"},outputs:{onChange:"onChange"},decls:7,vars:4,consts:[["dropdownKey","",1,"cl-dropdown","cl-dropdown-large","cl-d-flex",3,"onClose","onOpen"],["class","cl-badge cl-badge-filter","style","z-index: 1;",4,"ngIf"],["dropdownKeyButton","","tabindex","0","placement","bottom",1,"cl-dropdown-item-label","cl-btn","cl-btn-outline-light","cl-w-100","cl-text-left","cl-dropdown-toggle","cl-cut-text","pointer",3,"ngbTooltip"],[4,"ngIf","ngIfElse"],["title",""],[3,"placeholder","filterName","showSelectAll","showTitles","checkboxValues","singleMapProperty","selectableMaps","searchValue","countMap","filterOptions","countNumber","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange",4,"dropdownKeyContent"],[1,"cl-badge","cl-badge-filter",2,"z-index","1"],[3,"placeholder","filterName","showSelectAll","showTitles","checkboxValues","singleMapProperty","selectableMaps","searchValue","countMap","filterOptions","countNumber","inProgressSelectAll","inProgressLoading","loadMore","onSelectAllWithTextInput","onSearchChange","onFilterOptionChange","onCloseFilter","onChange"]],template:function(e,t){if(1&e&&(n.Xb(0,"div",0),n.jc("onClose",(function(){return t.isOpenedMap=!1}))("onOpen",(function(){return 1===t.query.page&&t.fetchData(),t.isOpenedMap=!0})),n.Xc(1,k,2,1,"span",1),n.Xb(2,"div",2),n.Xc(3,T,2,1,"span",3),n.Xc(4,D,3,3,"ng-template",null,4,n.Yc),n.Wb(),n.Xc(6,I,1,13,"dropdown-checkbox",5),n.Wb()),2&e){const e=n.Lc(5);n.Cb(1),n.wc("ngIf",t.numberOfSelected),n.Cb(1),n.wc("ngbTooltip",t.labels?t.labels+" ("+t.numberOfSelected+")":""),n.Cb(1),n.wc("ngIf",!!t.labels)("ngIfElse",e)}},directives:[E.a,w.u,S.a,y.bb,O.a,A.a],pipes:[C.e],encapsulation:2,changeDetection:0}),e})()},rg2B:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("xoOP"),s=i("fXoL");let r=(()=>{class e{transform(e,t=2,i=2){return Object(n.u)(e)?Number(e).toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:i}):""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Qb({name:"roundIfWholeNumber",type:e,pure:!0}),e})()},rnVd:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("eDxF");let s=(()=>{class e{constructor(e,t){this._type=e,this._label=t}get type(){return this._type}get label(){return this._label}}return e.ABSOLUTE=new e("ABSOLUTE",""),e.TODAY=new e("TODAY",n.a.TODAY),e.YESTERDAY=new e("YESTERDAY",n.a.YESTERDAY),e.THIS_WEEK=new e("THIS_WEEK",n.a.THIS_WEEK),e.LAST_WEEK=new e("LAST_WEEK",n.a.LAST_WEEK),e.THIS_MONTH=new e("THIS_MONTH",n.a.THIS_MONTH),e.LAST_MONTH=new e("LAST_MONTH",n.a.LAST_MONTH),e.THIS_YEAR=new e("THIS_YEAR",n.a.THIS_YEAR),e.LAST_YEAR=new e("LAST_YEAR",n.a.LAST_YEAR),e.PAST_TWO_WEEKS=new e("PAST_TWO_WEEKS",n.a.PAST_TWO_WEEKS),e})()},s07H:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},s4Bo:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),s=i("3Pt+"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m]]}),e})()},saCy:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.PENDING="PENDING",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e.ALL="ALL",e}({})},sbmM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("2rWG"),s=i("DoKE"),r=i("fXoL");let o=(()=>{class e{constructor(e,t){this.parent=e,this.el=t,this.state={visible:null,focused:null}}focus(){this.state.visible=this.parent.visible,this.parent.visible||this.parent.showDropdown()}click(){this.parent.visible?this.state.visible&&this.parent.closeDropdown():this.parent.showDropdown(),this.el.nativeElement.blur()}keyup(e){const t=e.keyCode?e.keyCode:e.which;t===s.i&&e.shiftKey?this.parent.closeDropdown():t!==s.h&&(t!==s.d||e.ctrlKey)||this.parent.toggleDropdown()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(n.a),r.Rb(r.l))},e.\u0275dir=r.Mb({type:e,selectors:[["","dropdownKeyButton",""]],hostBindings:function(e,t){1&e&&r.jc("focus",(function(e){return t.focus(e.target)}))("click",(function(e){return t.click(e.target)}))("keydown",(function(e){return t.keyup(e)}))}}),e})()},sk7z:function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("fXoL"),s=(i("NTZZ"),i("kGbF")),r=i("qrIO"),o=i("wd/R"),a=i("RkOr"),c=i("ZHjv"),l=i("lvCY"),u=i("XLnJ"),d=i("5x7/"),h=i("RWlN"),p=i("hV/V"),b=i("sYmb"),f=i("uX6w"),m=i("ofXK"),g=i("t2hA"),v=i("kRDX"),C=i("EBvn"),E=i("wlsK");const w=function(){return[]};function S(e,t){if(1&e&&n.Sb(0,"bar-chart",13),2&e){const e=n.nc();n.wc("barChartLabels",e.chartData.dates)("barChartAllLabels",e.chartData.barChartAllLabels)("projectCountByDate",n.Ac(14,w))("canSeeRates",e.report.filters.amountOptions!=e.amountOptions.HIDE_AMOUNT)("isBillabilityType",e.isBillabilityType)("currency",e.report.workspace.currency)("format",e.format)("chartDataDurationUnit","seconds")("tooltipConfig",e.tooltipConfig)("billableTimes",e.chartData.durationLabel)("barChartColors",e.chartData.colors)("barChartData",e.chartData.chartData)("barChartEarnings",e.chartData.earnings)("totalDurationByDate",e.chartData.totalDurationByDate)}}function y(e,t){if(1&e&&n.Sb(0,"summary-group",14),2&e){const e=t.$implicit,i=n.nc();n.wc("currency",i.report.workspace.currency)("format",i.format)("hideAmount",i.report.filters.amountOptions===i.amountOptions.HIDE_AMOUNT)("filterGroups",i.report.filters.groups)("isExpanded",i.isExpanded)("userFormat",i.report.filters.dateFormat||i.report.user.dateFormat)("group",e)("activeBillableHours",i.report.workspace.activeBillableHours)("onlyAdminCanSeeAndChangeBillable",i.report.workspace.onlyAdminsCanChangeBillableStatus)("showEstimate",i.report.filters.showEstimate)}}function O(e,t){if(1&e&&n.Sb(0,"doughnut-chart",15),2&e){const e=n.nc();n.wc("doughnutChart",e.doughnutChart)("doughnutChartColors",e.doughnutChartColors)("doughnutChartData",e.doughnutChartData)("totalTime",e.summaryResponse.totals.totalTime)("doughnutChartLabels",e.doughnutChartLabels)("format",e.format)("canSeeRates",e.report.filters.amountOptions!=e.amountOptions.HIDE_AMOUNT)("isBillabilityType",!1)("tooltipToLeft",!0)}}let A=(()=>{class e{constructor(e,t){this.translate=e,this.translationStore=t,this.export=new n.n,this.sortingUpdated=new n.n,this.amountOptions=r.a,this.isExpanded=!1}set summaryResponse(e){e&&(this._summaryResponse=e,this.initData())}get summaryResponse(){return this._summaryResponse}initData(){this.tooltipConfig={hideTableBody:this.report.filters.amountOptions[0]!==r.a.EARNED||this.report.onlyAdminsCanChangeBillableStatus&&!this.report.isAdminOrOwner};const e={start:o(this.report.filters.dateRangeStart).clone(),end:o(this.report.filters.dateRangeEnd).clone()},t=h.a[this.report.filters.zoomLevel];this.isBillabilityType=this.summaryResponse.chart[0]&&(!!this.summaryResponse.chart[0].totalAmount||0===this.summaryResponse.chart[0].totalAmount)&&(!this.report.onlyAdminsCanChangeBillableStatus||this.report.isAdminOrOwner);const i=Object(s.h)(this.summaryResponse.chart.map(e=>new d.a(e)),e,t);let n;this.report.filters.groups[0]!==a.a.PROJECT&&this.summaryResponse.groups.forEach(e=>{const t=Object(c.e)(n);n=t.lastRandom,e.color=e.name?t.randomRgba:l.p}),this.rowsCount=Object(s.a)(this.summaryResponse.groups),this.chartData=Object(s.i)(i,t,this.report.filters.amountOptions,this.format,this.translate,this.translationStore);const u=this.report.filters.groups[0],p=Object(s.c)(this.summaryResponse.groups,this.summaryResponse.totals.totalTime,u,this.report.filters.dateFormat||this.report.user.dateFormat);this.doughnutChart=p.doughnutChart,this.doughnutChartColors=p.doughnutChartColors,this.doughnutChartData=p.doughnutChartData,this.doughnutChartLabels=p.doughnutChartLabels}exportAsPdf(){this.export.emit(u.a.PDF)}exportAsCsv(){this.export.emit(u.a.CSV)}exportAsXlsx(){this.export.emit(u.a.XLSX)}columnOrderChanged(e){this.sortingUpdated.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(b.f),n.Rb(p.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["shared-report-summary"]],inputs:{report:"report",activeBillableHours:"activeBillableHours",onlyAdminsCanChangeBillableStatus:"onlyAdminsCanChangeBillableStatus",isAdminOrOwner:"isAdminOrOwner",summaryResponse:"summaryResponse",format:"format"},outputs:{export:"export",sortingUpdated:"sortingUpdated"},decls:14,vars:25,consts:[[1,"cl-card","cl-border-bottom-0","cl-mb-0",3,"amountOptions","totalNumberOfEntries","format","limitLabel","isCostRateActive","isRounding","totalInfo","isAdminOrOwner","canSeeRates","workspaceInfo","isShared","onlyAdminCanSeeAndChangeBillable","exportAsPdf","exportAsCsv","exportAsExcel"],[1,"cl-card"],[1,"cl-card-body","cl-p-0"],[1,"cl-main-chart-container"],[3,"barChartLabels","barChartAllLabels","projectCountByDate","canSeeRates","isBillabilityType","currency","format","chartDataDurationUnit","tooltipConfig","billableTimes","barChartColors","barChartData","barChartEarnings","totalDurationByDate",4,"ngIf"],[1,"cl-card","cl-reset-component-row-last-child"],[1,"cl-card-header","cl-pl-2","cl-pl-lg-3","cl-pr-0",3,"filterGroups","projectGroupingLabel","isGroupDisabled"],[1,"cl-row","cl-m-0"],[1,"cl-col-lg-custom-8","cl-p-0","cl-reports-summary-table-col"],[1,"cl-card-header","cl-bg-white","cl-d-lg-flex","small","cl-px-2","cl-px-lg-3",3,"isExpanded","sortOrder","sortColumn","summaryFilterGroups","amountOptions","showEstimate","onChange","onExpand"],[3,"currency","format","hideAmount","filterGroups","isExpanded","userFormat","group","activeBillableHours","onlyAdminCanSeeAndChangeBillable","showEstimate",4,"ngFor","ngForOf"],[1,"cl-col-lg-custom-4","p-0"],[3,"doughnutChart","doughnutChartColors","doughnutChartData","totalTime","doughnutChartLabels","currency","format","canSeeRates","isBillabilityType","tooltipToLeft",4,"ngIf"],[3,"barChartLabels","barChartAllLabels","projectCountByDate","canSeeRates","isBillabilityType","currency","format","chartDataDurationUnit","tooltipConfig","billableTimes","barChartColors","barChartData","barChartEarnings","totalDurationByDate"],[3,"currency","format","hideAmount","filterGroups","isExpanded","userFormat","group","activeBillableHours","onlyAdminCanSeeAndChangeBillable","showEstimate"],[3,"doughnutChart","doughnutChartColors","doughnutChartData","totalTime","doughnutChartLabels","currency","format","canSeeRates","isBillabilityType","tooltipToLeft"]],template:function(e,t){1&e&&(n.Xb(0,"table-info",0),n.jc("exportAsPdf",(function(){return t.exportAsPdf()}))("exportAsCsv",(function(){return t.exportAsCsv()}))("exportAsExcel",(function(){return t.exportAsXlsx()})),n.Wb(),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xc(4,S,1,15,"bar-chart",4),n.Wb(),n.Wb(),n.Wb(),n.Xb(5,"div",5),n.Sb(6,"summary-group-header",6),n.Xb(7,"div",7),n.Xb(8,"div",8),n.Xb(9,"summary-group-title",9),n.jc("onChange",(function(e){return t.columnOrderChanged(e)}))("onExpand",(function(e){return t.isExpanded=e})),n.Wb(),n.Xc(10,y,1,10,"summary-group",10),n.Wb(),n.Xb(11,"div",11),n.Xb(12,"div",3),n.Xc(13,O,1,9,"doughnut-chart",12),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&e&&(n.wc("amountOptions",t.report.filters.amountOptions)("totalNumberOfEntries",t.rowsCount)("format",t.format)("limitLabel","Max 3,000 rows per PDF")("isCostRateActive",t.report.workspace.costRateActive)("isRounding",t.report.filters.rounding)("totalInfo",t.summaryResponse.totals)("isAdminOrOwner",t.report.isAdminOrOwner)("canSeeRates",t.report.filters.amountOptions.length>0)("workspaceInfo",t.report.workspace)("isShared",!0)("onlyAdminCanSeeAndChangeBillable",t.report.onlyAdminsCanChangeBillableStatus)("isAdminOrOwner",t.report.isAdminOrOwner),n.Cb(4),n.wc("ngIf",t.chartData),n.Cb(2),n.wc("filterGroups",t.report.filters.groups)("projectGroupingLabel",t.report.workspace.projectGroupingLabel)("isGroupDisabled",!0),n.Cb(3),n.wc("isExpanded",t.isExpanded)("sortOrder",t.report.filters.sortOrder)("sortColumn",t.report.filters.sortColumn)("summaryFilterGroups",t.report.filters.groups)("amountOptions",t.report.filters.amountOptions)("showEstimate",t.report.filters.showEstimate),n.Cb(1),n.wc("ngForOf",t.summaryResponse.groups),n.Cb(3),n.wc("ngIf",t.doughnutChart))},directives:[f.a,m.u,g.a,a.b,m.t,v.a,C.a,E.a],encapsulation:2}),e})()},soCN:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("f0Wu"),s=i("YnOA"),r=i("fXoL");let o=(()=>{class e{transform(e,t){const i=e.slice(1).reduce((e,t)=>n.duration(t).add(e),n.duration(e[0]));return Object(s.a)(i,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Qb({name:"sumDurations",type:e,pure:!0}),e})()},t2hA:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("fXoL"),s=i("OmiP"),r=i("RkOr"),o=i("xoOP"),a=i("kGbF"),c=i("1Tmk"),l=i("Y9WU"),u=i("sYmb"),d=i("kKK/"),h=i("ofXK"),p=i("1kSV"),b=i("tyNb");const f=["estimatePopover"];function m(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",11),n.Xb(1,"dropdown-items",5),n.jc("onChanged",(function(t){return n.Oc(e),n.nc().setValue(t,2)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(1),n.wc("isDisabled",e.isGroupDisabled)("list",e.thirdGroup)("value",e.filterGroups[2])("type","SMALL")}}function g(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",12,13),n.jc("click",(function(){n.Oc(e);const t=n.Lc(1);return n.nc().togglePopover(t)})),n.Xb(2,"input",14),n.jc("change",(function(){return n.Oc(e),n.nc().changeShowEstimate()})),n.Wb(),n.Xb(3,"label",15),n.Xb(4,"span",16),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(13);n.wc("ngbPopover",t),n.Cb(2),n.wc("disabled",!e.hasEstimateFeature)("checked",e.showEstimate),n.Cb(3),n.ad(n.pc(6,4,"REPORTS.SUMMARY.SHOW_EST_LABEL"))}}const v=function(){return["/upgrade"]},C=function(){return{plan:"pro"}};function E(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"a",18),n.jc("click",(function(){return n.Oc(e),n.nc(2).analyticsService.addEventOnSettingsChanged("Pro","Upgrade","Reports","Summary","Estimate")})),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Zc(4),n.oc(5,"translate"),n.Ub()}2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(8,v))("queryParams",n.Ac(9,C)),n.Cb(1),n.ad(n.pc(3,4,"GLOBAL.UPGRADE_BTN")),n.Cb(2),n.bd(" ",n.pc(5,6,"REPORTS.SUMMARY.UPGRADE_TO_SHOW_EST_PART_2")," "))}function w(e,t){if(1&e&&n.Xc(0,E,6,10,"ng-container",17),2&e){const e=n.nc();n.wc("ngIf",!e.hasEstimateFeature)}}let S=(()=>{class e{constructor(e,t,i,s){this.worksapceService=e,this.analyticsService=t,this.translateService=i,this.workspaceService=s,this._filterGroups=[],this.onGroupByChanged=new n.n,this.onShowEstimateChanged=new n.n,this.onHideEstimateChanged=new n.n,this.SummaryGroupColumn=r.a}set filterGroups(e){e&&(this._filterGroups=e.slice())}get filterGroups(){return this._filterGroups}set showEstimate(e){this._showEstimate=e}get showEstimate(){return this._showEstimate}ngOnInit(){this.workspace=this.worksapceService.getLocalDefaultWorkspace();const e=Object(o.k)(this.workspaceService.generateClientLabel(this.projectGroupingLabel));this.optionList=[new s.a(r.a.NONE,`(${this.translateService.instant("GLOBAL.NONE_LABEL")})`),new s.a(r.a.PROJECT,this.translateService.instant("GLOBAL.PROJECT_LABEL")),new s.a(r.a.TASK,this.translateService.instant("GLOBAL.TASK_LABEL")),new s.a(r.a.CLIENT,e),new s.a(r.a.USER,this.translateService.instant("GLOBAL.USER_LABEL")),new s.a(r.a.USER_GROUP,this.translateService.instant("GLOBAL.GROUP_LABEL")),new s.a(r.a.TAG,this.translateService.instant("GLOBAL.TAG_LABEL")),new s.a(r.a.TIMEENTRY,this.translateService.instant("GLOBAL.DESCRIPTION_LABEL")),new s.a(r.a.MONTH,this.translateService.instant("GLOBAL.MONTH_LABEL")),new s.a(r.a.WEEK,this.translateService.instant("TEAMS.REMINDERS.DATE_RANGE.WEEK_LABEL")),new s.a(r.a.DATE,this.translateService.instant("GLOBAL.DATE_LABEL"))],this.setShowEstimateOption(),this.onShowEstimateChanged.emit(this.showEstimate&&this.hasEstimateFeature)}setValue(e,t){this.filterGroups[t]=e,this.isAllowed(this.filterGroups[1],1)||(this.filterGroups[1]=r.a.TIMEENTRY),this.isAllowed(this.filterGroups[2],2)||(this.filterGroups[2]=r.a.NONE),this.onGroupByChanged.emit(this.filterGroups),this.setShowEstimateOption()}get primaryGroup(){return this.optionList.filter(e=>this.isAllowed(e.value,0))}get secondaryGroup(){return this.optionList.filter(e=>this.isAllowed(e.value,1))}get thirdGroup(){return this.optionList.filter(e=>this.isAllowed(e.value,2))}isAllowed(e,t){return Object(a.f)(e,t,this.filterGroups)}changeShowEstimate(){this.hasEstimateFeature?this.onShowEstimateChanged.emit(!this.showEstimate):this.estimatePopover.open()}togglePopover(e){this.isAdminOrOwner&&e.toggle()}setShowEstimateOption(){this.showEstimateOption=this.isAdminOrOwner&&this.workspace.activeBillableHours&&(this.filterGroups.includes(r.a.PROJECT)||this.filterGroups.includes(r.a.TASK)),this.onHideEstimateChanged.emit(this.showEstimateOption)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(c.a),n.Rb(l.a),n.Rb(u.f),n.Rb(c.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["summary-group-header"]],viewQuery:function(e,t){var i;1&e&&n.gd(f,!0),2&e&&n.Kc(i=n.kc())&&(t.estimatePopover=i.first)},inputs:{filterGroups:"filterGroups",projectGroupingLabel:"projectGroupingLabel",showEstimate:"showEstimate",hasEstimateFeature:"hasEstimateFeature",isAdminOrOwner:"isAdminOrOwner",isGroupDisabled:"isGroupDisabled"},outputs:{onGroupByChanged:"onGroupByChanged",onShowEstimateChanged:"onShowEstimateChanged",onHideEstimateChanged:"onHideEstimateChanged"},decls:14,vars:13,consts:[[1,"cl-d-inline-block","cl-d-sm-flex","cl-mt-1","cl-mt-sm-0","cl-w-100","cl-align-items-center","cl-justify-content-start"],[1,"cl-d-flex"],[1,"cl-pl-0","cl-d-flex","cl-align-items-center"],[1,"cl-small","cl-text-gray-9","cl-mr-3"],[1,"cl-d-flex","cl-w-lg-auto","cl-show","cl-small","cl-mr-2","cl-dropdown-disabled-reset-padding"],[3,"isDisabled","list","value","type","onChanged"],[1,"cl-d-flex","cl-w-lg-auto","cl-show","cl-small","cl-mr-2"],[1,"cl-dropdown-large-max-height",3,"isDisabled","list","value","type","onChanged"],["class","cl-d-flex cl-w-lg-auto cl-show cl-small",4,"ngIf"],["class","cl-custom-control cl-custom-switch cl-my-1 cl-my-sm-0 cl-ml-sm-2","triggers","manual","placement","right","container","body",3,"ngbPopover","click",4,"ngIf"],["estimatePopover",""],[1,"cl-d-flex","cl-w-lg-auto","cl-show","cl-small"],["triggers","manual","placement","right","container","body",1,"cl-custom-control","cl-custom-switch","cl-my-1","cl-my-sm-0","cl-ml-sm-2",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["type","checkbox","id","estimate",1,"cl-custom-control-input",3,"disabled","checked","change"],["for","estimate",1,"cl-custom-control-label","cl-d-report-rounding","cl-text-break"],[1,"cl-small"],[4,"ngIf"],[3,"routerLink","queryParams","click"]],template:function(e,t){1&e&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"span",3),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Wb(),n.Xb(6,"div",4),n.Xb(7,"dropdown-items",5),n.jc("onChanged",(function(e){return t.setValue(e,0)})),n.Wb(),n.Wb(),n.Xb(8,"div",6),n.Xb(9,"dropdown-items",7),n.jc("onChanged",(function(e){return t.setValue(e,1)})),n.Wb(),n.Wb(),n.Xc(10,m,2,4,"div",8),n.Wb(),n.Xc(11,g,7,6,"div",9),n.Wb(),n.Xc(12,w,1,1,"ng-template",null,10,n.Yc)),2&e&&(n.Cb(4),n.ad(n.pc(5,11,"REPORTS.SHARED.GROUP_BY_LABEL")),n.Cb(3),n.wc("isDisabled",t.isGroupDisabled)("list",t.primaryGroup)("value",t.filterGroups[0])("type","SMALL"),n.Cb(2),n.wc("isDisabled",t.isGroupDisabled)("list",t.secondaryGroup)("value",t.filterGroups[1])("type","SMALL"),n.Cb(1),n.wc("ngIf",t.filterGroups[1]!==t.SummaryGroupColumn.TIMEENTRY&&t.filterGroups[1]!==t.SummaryGroupColumn.NONE),n.Cb(1),n.wc("ngIf",t.showEstimateOption))},directives:[d.a,h.u,p.M,b.g],pipes:[u.e],encapsulation:2,changeDetection:0}),e})()},tF8r:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return e&&0!==e.length&&t?e.length<=t?e.slice():e.slice(0,t):[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"showN",type:e,pure:!0}),e})()},tQGB:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("2Vo4"),s=i("XNiG"),r=i("xgIS"),o=i("/uUt"),a=i("Kj3r"),c=i("1G5W"),l=i("lvCY"),u=i("fXoL");let d=(()=>{class e{constructor(){this.breakpointLgCustomSubject$=new n.a(null),this.isBreakpointLgCustom$=this.breakpointLgCustomSubject$.asObservable().pipe(Object(o.a)()),this.breakpointLgSubject$=new n.a(null),this.isBreakpointLg$=this.breakpointLgSubject$.asObservable().pipe(Object(o.a)()),this.onHeightResizeSubject$=new n.a(null),this.onHeightResize$=this.onHeightResizeSubject$.asObservable().pipe(Object(o.a)()),this.unsubscribe$=new s.a,this.checkBreakpoints=e=>{e=e||window.innerWidth,this.breakpointLgCustomSubject$.next(e>=l.i),this.breakpointLgSubject$.next(e>=l.h)},this.checkBreakpoints(),Object(r.a)(window,"resize").pipe(Object(a.a)(200),Object(c.a)(this.unsubscribe$)).subscribe(e=>{const t=window.innerWidth,i=window.innerHeight;this.onHeightResizeSubject$.next(i),this.checkBreakpoints(t)})}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}scrollToTop(){try{const e=document.getElementsByTagName("html")[0];e&&e.scroll(0,0);const t=document.body;t&&t.scroll(0,0)}catch(e){}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"tZA+":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},txdI:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{}return e.\u0275mod=n.Pb({type:e}),e.\u0275inj=n.Ob({factory:function(t){return new(t||e)}}),e})()},uHlu:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("xoOP");class s{constructor(e){this.id=e._id||e.id,this.duration=Object(n.q)(e.duration),this.amount=e.amount||0,this.name=e.name,this.clientName=e.clientName,this.color=e.color,e.children&&(this.children=e.children.map(e=>new s(e))),this.days=e.days.map(e=>({date:e.date,duration:Object(n.q)(e.duration),amount:e.amount||0}))}}},uI7B:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.id=e.id,this.name=e.name,this.email=e.email,this.count=e.count,this.additionalInfo=e.additionalInfo}}},uNKk:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.id=e.id,this.name=e.name||"",this.importedClients=e.importedClients,this.importedProjects=e.importedProjects,this.importedTags=e.importedTags,this.importedTasks=e.importedTasks,this.importedTimeEntries=e.importedTimeEntries,this.importWarnings=e.importWarnings||{}}}},uX6w:function(e,t,i){"use strict";i.d(t,"a",(function(){return Q}));var n=i("fXoL"),s=i("XNiG"),r=i("OmiP"),o=i("pLZG"),a=i("IzEk"),c=i("1G5W"),l=i("1Tmk"),u=(i("IQK1"),i("PW4C")),d=i("qrIO"),h=i("kKK/"),p=(i("kwab"),i("i/9y")),b=i("Fcjm"),f=i("Y9WU"),m=i("SvJf"),g=i("VMis"),v=i("sYmb"),C=i("ofXK"),E=i("2rWG"),w=i("sbmM"),S=i("TmxI"),y=i("qUN8"),O=i("1kSV"),A=i("3Pt+"),k=i("tyNb"),T=i("znhS"),D=i("rg2B"),I=i("Lwft");const _=["featureLaborCostPopover"],R=["dropdownItemAmount"];function L(e,t){if(1&e&&(n.Vb(0),n.Sb(1,"div",25),n.Xb(2,"div",26),n.Xb(3,"div",3),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xb(6,"div",4),n.Zc(7),n.oc(8,"timeFormat"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=n.nc(3);n.Cb(4),n.ad(n.pc(5,2,"REPORTS.TABLE_INFO.BILLABLE_LABEL")),n.Cb(3),n.ad(n.qc(8,4,null==e.totalInfo?null:e.totalInfo.totalBillableTime,e.format))}}function x(e,t){if(1&e&&(n.Vb(0),n.Xc(1,L,9,7,"ng-container",5),n.Sb(2,"div",25),n.Xb(3,"div",26),n.Xb(4,"div",3),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Xb(7,"div",4),n.Zc(8),n.oc(9,"roundIfWholeNumber"),n.oc(10,"centsToDollars"),n.Wb(),n.Wb(),n.Ub()),2&e){const e=t.$implicit,i=n.nc(2);n.Cb(1),n.wc("ngIf","EARNED"===e.type&&(!i.onlyAdminCanSeeAndChangeBillable||i.isAdminOrOwner)),n.Cb(4),n.bd("",n.pc(6,4,i.amountLabel(e.type)),":"),n.Cb(3),n.cd(" ",n.pc(9,6,n.pc(10,8,e.value))," ",i.workspace?i.workspace.hourlyRate.currency:null==i.workspaceInfo?null:i.workspaceInfo.currency," ")}}function P(e,t){if(1&e&&(n.Vb(0),n.Xc(1,x,11,10,"ng-container",24),n.Ub()),2&e){const e=n.nc();n.Cb(1),n.wc("ngForOf",null==e.totalInfo?null:e.totalInfo.amounts)}}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",33),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc(2).customizeReport.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc(2).customizeReport.emit()}))("click",(function(){return n.Oc(e),n.nc(2).customizeReport.emit()})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"REPORTS.TABLE_INFO.CUSTOMIZE_EXPORT_BTN"),""))}function M(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",27),n.Xb(1,"div",28),n.Xb(2,"a",29),n.jc("keyup.enter",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(19);return t.downloadPdf(i)}))("keyup.space",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(19);return t.downloadPdf(i)}))("click",(function(){n.Oc(e);const t=n.nc(),i=n.Lc(19);return t.downloadPdf(i)})),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Xb(5,"a",29),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()}))("click",(function(){return n.Oc(e),n.nc().exportAsCsv.emit()})),n.Zc(6),n.oc(7,"translate"),n.Wb(),n.Xb(8,"a",29,30),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()}))("click",(function(){return n.Oc(e),n.nc().exportAsExcel.emit()})),n.Zc(10),n.oc(11,"translate"),n.Wb(),n.Xc(12,j,3,3,"a",31),n.Sb(13,"span",32),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Cb(3),n.ad(n.pc(4,4,"REPORTS.TABLE_INFO.SAVE_AS_PDF_BTN")),n.Cb(3),n.ad(n.pc(7,6,"REPORTS.TABLE_INFO.SAVE_AS_CSV_BTN")),n.Cb(4),n.bd(" ",n.pc(11,8,"REPORTS.TABLE_INFO.SAVE_AS_EXCEL_BTN"),""),n.Cb(2),n.wc("ngIf",!e.isShared)}}function X(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",14),n.Xb(1,"a",34,35),n.jc("keyup.enter",(function(){return n.Oc(e),n.nc().shareReports.emit()}))("keyup.space",(function(){return n.Oc(e),n.nc().shareReports.emit()}))("click",(function(){n.Oc(e);const t=n.Lc(2),i=n.nc();return t.blur(),i.shareReports.emit()})),n.Sb(3,"img",36),n.Wb(),n.Wb()}}function F(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",46),n.Xb(1,"dropdown-items",47),n.jc("onChanged",(function(t){return n.Oc(e),n.nc(2).weeklyGroupChanged(t)})),n.oc(2,"translate"),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("list",e.weeklyGroupOptions)("value",e.weeklyGroup)("labelPrefix",n.pc(2,4,"REPORTS.SHARED.GROUP_BY_LABEL")+" ")("type","DROPDOWN")}}function W(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",48,49),n.Xb(2,"dropdown-items",50,51),n.jc("onChanged",(function(t){return n.Oc(e),n.nc(2).optionChanged(t)})),n.Wb(),n.Wb()}if(2&e){const e=n.nc(2),t=n.Lc(30);n.wc("ngbPopover",t),n.Cb(2),n.wc("list",e.filterDropdowns)("value",e.amountShowLabel())("type","DROPDOWN")}}function B(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",59),n.Xb(1,"div",60),n.Xb(2,"input",61),n.jc("ngModelChange",(function(i){return n.Oc(e),t.$implicit.value=i}))("click",(function(i){n.Oc(e);const s=t.$implicit;return n.nc(4).summaryOptionChanged(s.placeholder,i)})),n.Wb(),n.Xb(3,"label",62),n.Xb(4,"div",63),n.Zc(5),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=t.$implicit;n.Cb(2),n.wc("ngModel",e.value)("id",e.placeholder),n.Cb(1),n.wc("for",e.placeholder),n.Cb(2),n.ad(e.label)}}function N(e,t){if(1&e&&(n.Xb(0,"div",56),n.Xb(1,"div",57,49),n.Xc(3,B,6,4,"div",58),n.Wb(),n.Wb()),2&e){const e=n.nc(3),t=n.Lc(30);n.Cb(1),n.wc("ngbPopover",t),n.Cb(2),n.wc("ngForOf",e.summaryAmountOptions)}}function G(e,t){if(1&e&&(n.Xb(0,"div"),n.Xb(1,"div",52),n.Xb(2,"div",53),n.Xb(3,"span",54),n.Zc(4),n.Wb(),n.Wb(),n.Xc(5,N,4,2,"div",55),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(4),n.bd(" ",e.summaryAmountLabel()," ")}}function U(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",37),n.Xb(1,"div",38),n.Xb(2,"div",39,40),n.jc("click",(function(){n.Oc(e);const t=n.Lc(3);return n.nc().togglePopover(t)})),n.Xb(4,"input",41),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc().isRounding=t}))("ngModelChange",(function(){return n.Oc(e),n.nc().roundingChanged()})),n.Wb(),n.Xb(5,"label",42),n.Xb(6,"span",43),n.Zc(7),n.oc(8,"translate"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xc(9,F,3,6,"div",44),n.Xc(10,W,4,4,"div",45),n.Xc(11,G,6,1,"div",5),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(28);n.Hb("cl-flex-column",e.isWeekly),n.Cb(1),n.wc("ngbTooltip",e.tooltip),n.Cb(1),n.wc("ngbPopover",t),n.Cb(2),n.wc("ngModel",e.isRounding)("disabled",e.isRoundingDisabled),n.Cb(3),n.ad(n.pc(8,10,"REPORTS.SHARED.ROUNDING_LABEL")),n.Cb(2),n.wc("ngIf",e.isWeekly),n.Cb(1),n.wc("ngIf",e.canSeeRates&&e.activeBillable&&!e.isSummary),n.Cb(1),n.wc("ngIf",e.canSeeRates&&e.activeBillable&&e.isSummary)}}const V=function(){return["/upgrade"]},H=function(){return{plan:"standard"}};function Y(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",64),n.jc("click",(function(){return n.Oc(e),n.nc().analyticsService.addEventOnSettingsChanged("Standard","Upgrade","Reports","Summary","Rounding")})),n.Zc(1),n.oc(2,"translate"),n.Wb(),n.Zc(3),n.oc(4,"translate")}2&e&&(n.wc("routerLink",n.Ac(8,V))("queryParams",n.Ac(9,H)),n.Cb(1),n.ad(n.pc(2,4,"GLOBAL.UPGRADE_BTN")),n.Cb(2),n.bd(" ",n.pc(4,6,"REPORTS.TABLE_INFO.UPGRADE_TO_USE_ROUNDING_PART_2"),"\n"))}const $=function(){return{plan:"pro"}};function z(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"a",64),n.jc("click",(function(){return n.Oc(e),n.nc(2).analyticsService.addEventOnSettingsChanged("Pro","Upgrade","Reports","Summary","Labor cost")})),n.Zc(2),n.oc(3,"translate"),n.Wb(),n.Zc(4),n.oc(5,"translate"),n.Ub()}2&e&&(n.Cb(1),n.wc("routerLink",n.Ac(8,V))("queryParams",n.Ac(9,$)),n.Cb(1),n.ad(n.pc(3,4,"GLOBAL.UPGRADE_BTN")),n.Cb(2),n.bd(" ",n.pc(5,6,"REPORTS.TABLE_INFO.UPGRADE_TO_SEE_LABOR_COST_PART_2")," "))}const Z=function(e){return["/workspaces",e,"settings"]};function K(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Xb(3,"a",65),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Zc(6),n.oc(7,"translate"),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.bd(" ",n.pc(2,4,"REPORTS.TABLE_INFO.ENABLE_COST_RATE.INFO_TEXT_1")," "),n.Cb(2),n.wc("routerLink",n.Bc(10,Z,e.workspace.id)),n.Cb(1),n.bd(" ",n.pc(5,6,"REPORTS.TABLE_INFO.ENABLE_COST_RATE.INFO_TEXT_2"),""),n.Cb(2),n.bd(" ",n.pc(7,8,"REPORTS.TABLE_INFO.ENABLE_COST_RATE.INFO_TEXT_3")," ")}}function q(e,t){if(1&e&&(n.Xc(0,z,6,10,"ng-container",5),n.Xc(1,K,8,12,"ng-container",5)),2&e){const e=n.nc();n.wc("ngIf",!e.hasLaborCostFeature),n.Cb(1),n.wc("ngIf",e.hasLaborCostFeature)}}function J(e,t){if(1&e&&n.Zc(0),2&e){const e=n.nc();n.bd(" ",e.limitLabel,"\n")}}let Q=(()=>{class e{constructor(e,t,i,o,a){this.analyticsService=e,this.workspaceService=t,this.uiSettingsService=i,this.cd=o,this.translateService=a,this.isShared=!1,this.limitLabel=this.translateService.instant("REPORTS.TABLE_INFO.MAX_ENTRIES_PER_PDF_MESSAGE"),this.onAmountOptionChange=new n.n,this.onWeeklyGroupChange=new n.n,this.onRoundingChange=new n.n,this.reduceTableChange=new n.n,this.exportAsPdf=new n.n,this.exportAsCsv=new n.n,this.exportAsExcel=new n.n,this.shareReports=new n.n,this.customizeReport=new n.n,this.filterDropdowns=[],this.weeklyGroupOptions=[new r.a("PROJECT",this.translateService.instant("GLOBAL.PROJECT_LABEL")),new r.a("USER",this.translateService.instant("GLOBAL.USER_LABEL"))],this.unsubscribe$=new s.a,this.AmountOptions=[]}set totalInfo(e){this._totalInfo=e,this.subscribeToInfoChanges()}get totalInfo(){return this._totalInfo}set isAdminOrOwner(e){this._isAdminOrOwner=e,this.isInitialized&&this.initFilterDropdown()}get isAdminOrOwner(){return this._isAdminOrOwner}ngOnInit(){this.workspaceService.defaultWorkspace$.pipe(Object(o.a)(e=>!!e),Object(a.a)(1),Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.hasLaborCostFeature=e.hasFeature(p.a.LABOR_COST),this.hasRoundigFeature=e.hasFeature(p.a.WORKSPACE_TIME_ROUNDING),this.workspace=e,this.activeBillable=this.workspace.activeBillableHours,this.onlyAdminCanSeeAndChangeBillable=this.workspace.onlyAdminsCanChangeBillableStatus,this.format=e.getTimeFormat()}),this.initFilterDropdown(),this.isInitialized=!0}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete(),this.subscription&&this.subscription.unsubscribe()}get isRoundingDisabled(){return!this.hasRoundigFeature&&!this.isRounding}get tooltip(){if(!this.hasRoundigFeature)return"";if(!this.isRounding)return this.translateService.instant("REPORTS.TABLE_INFO.TIME_ROUNDING_TOOLTIP");const e=Number(this.workspace.round.minutes),t=this.translateService.instant(e>=60?"INVOICES.DROPDOWNVALUES.HOURS":"INVOICES.DROPDOWNVALUES.MINUTES",{count:e>=60?e/60:e});return this.translateService.instant(b.a[this.workspace.round.round])+" "+t}downloadPdf(e){this.totalNumberOfEntries&&this.totalNumberOfEntries>3e3?e.open():this.exportAsPdf.emit()}initFilterDropdown(){if(void 0===this.isAdminOrOwner)return;const e=[new r.a(d.a.EARNED,this.translateService.instant("REPORTS.TABLE_INFO.SHOW_AMOUNT_LABEL"))];(this.isAdminOrOwner||this.hasLaborCostFeature&&this.isCostRateActive)&&(e.push(new r.a(d.a.COST,this.translateService.instant("REPORTS.TABLE_INFO.SHOW_COST_LABEL"))),e.push(new r.a(d.a.PROFIT,this.translateService.instant("REPORTS.TABLE_INFO.SHOW_PROFIT_LABEL")))),this.isWeekly?e.unshift(new r.a(d.a.HIDE_AMOUNT,this.translateService.instant("REPORTS.TABLE_INFO.SHOW_TIME_LABEL"))):e.push(new r.a(d.a.HIDE_AMOUNT,this.translateService.instant("REPORTS.TABLE_INFO.HIDE_AMOUNT_LABEL"))),this.filterDropdowns=e,this.isSummary&&(this.summaryAmountOptions=[new r.a(this.amountOptions&&this.amountOptions.includes(d.a.EARNED),this.translateService.instant("REPORTS.TABLE_INFO.SHOW_AMOUNT_LABEL"),d.a.EARNED),new r.a(this.amountOptions&&this.amountOptions.includes(d.a.COST),this.translateService.instant("REPORTS.TABLE_INFO.SHOW_COST_LABEL"),d.a.COST),new r.a(this.amountOptions&&this.amountOptions.includes(d.a.PROFIT),this.translateService.instant("REPORTS.TABLE_INFO.SHOW_PROFIT_LABEL"),d.a.PROFIT)])}weeklyGroupChanged(e){this.weeklyGroup=e,this.onWeeklyGroupChange.emit(e)}optionChanged(e){if(!this.checkIsAmountOptionAvailable(e))return this.dropdownItemAmount.setValue(this.amountOptions[0],null,!1),void this.featureLaborCostPopover.open();e===this.amountOptions[0]||(this.amountOptions=e===d.a.HIDE_AMOUNT?[]:[e],this.onAmountOptionChange.emit(this.amountOptions))}summaryOptionChanged(e,t){if(!this.checkIsAmountOptionAvailable(e))return t.preventDefault(),void this.featureLaborCostPopover.open();this.amountOptions=this.amountOptions.includes(e)?this.amountOptions.filter(t=>t!==e):g.a.sortAmounts([...this.amountOptions,e]),this.reduceTableChange.emit(this.amountOptions.length>1),this.onAmountOptionChange.emit(this.amountOptions)}checkIsAmountOptionAvailable(e){return!(e===d.a.COST||e===d.a.PROFIT)||!!this.hasLaborCostFeature&&!!this.isCostRateActive}roundingChanged(){this.uiSettingsService.setWorkspaceRounding(this.workspace.id,this.isRounding),this.onRoundingChange.emit(this.isRounding),this.analyticsService.addEvent(new m.a({event:"switch",value:this.isRounding,section:"Reports",section2:"Summary/Detailed/Weekly",section3:"Rounding"}))}subscribeToInfoChanges(){this.totalInfo&&(this.subscription&&this.subscription.unsubscribe(),this.subscription=this.totalInfo.onChange$.pipe(Object(c.a)(this.unsubscribe$)).subscribe(()=>this.cd.markForCheck()))}togglePopover(e){this.isRoundingDisabled&&this.isAdminOrOwner&&(e.isOpen()?e.close():e.open())}amountLabel(e){switch(e){case d.a.PROFIT:return"GLOBAL.PROFIT_LABEL";case d.a.COST:return"GLOBAL.COST_LABEL";default:return"GLOBAL.AMOUNT_LABEL"}}singleAmountLabel(){switch(this.amountOptions[0]){case d.a.PROFIT:return"GLOBAL.PROFIT_LABEL";case d.a.COST:return"GLOBAL.COST_LABEL";default:return"GLOBAL.AMOUNT_LABEL"}}amountShowLabel(){var e;return(null===(e=this.amountOptions)||void 0===e?void 0:e.length)?this.amountOptions[0]:this.translateService.instant(this.isWeekly?"REPORTS.TABLE_INFO.SHOW_TIME_LABEL":"REPORTS.TABLE_INFO.HIDE_AMOUNT_LABEL")}summaryAmountLabel(){var e;if(!this.amountOptions)return this.translateService.instant("REPORTS.TABLE_INFO.SHOW_AMOUNT_LABEL");if(!(null===(e=this.amountOptions)||void 0===e?void 0:e.length))return this.translateService.instant("REPORTS.TABLE_INFO.HIDE_AMOUNT_LABEL");if(3==this.amountOptions.length)return this.translateService.instant("REPORTS.TABLE_INFO.SHOW_ALL_LABEL");let t=this.translateService.instant("GLOBAL.SHOW_LABEL")+" ";return this.amountOptions.forEach(e=>{switch(e){case d.a.EARNED:t+=this.translateService.instant("GLOBAL.AMOUNT_LABEL_SM")+", ";break;case d.a.PROFIT:t+=this.translateService.instant("GLOBAL.PROFIT_LABEL_SM")+", ";break;case d.a.COST:t+=this.translateService.instant("GLOBAL.COST_LABEL_SM")+", "}}),t.substring(0,t.length-2)}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(f.a),n.Rb(l.a),n.Rb(u.a),n.Rb(n.h),n.Rb(v.f))},e.\u0275cmp=n.Lb({type:e,selectors:[["table-info"]],viewQuery:function(e,t){var i;1&e&&(n.gd(_,!0),n.gd(R,!0)),2&e&&(n.Kc(i=n.kc())&&(t.featureLaborCostPopover=i.first),n.Kc(i=n.kc())&&(t.dropdownItemAmount=i.first))},inputs:{amountOptions:"amountOptions",isShared:"isShared",totalInfo:"totalInfo",isCostRateActive:"isCostRateActive",isWeekly:"isWeekly",isSummary:"isSummary",weeklyGroup:"weeklyGroup",isRounding:"isRounding",isAdminOrOwner:"isAdminOrOwner",canSeeRates:"canSeeRates",onlyAdminsCanChangeBillableStatus:"onlyAdminsCanChangeBillableStatus",format:"format",showCustomize:"showCustomize",workspaceInfo:"workspaceInfo",totalNumberOfEntries:"totalNumberOfEntries",onlyAdminCanSeeAndChangeBillable:"onlyAdminCanSeeAndChangeBillable",limitLabel:"limitLabel"},outputs:{onAmountOptionChange:"onAmountOptionChange",onWeeklyGroupChange:"onWeeklyGroupChange",onRoundingChange:"onRoundingChange",reduceTableChange:"reduceTableChange",exportAsPdf:"exportAsPdf",exportAsCsv:"exportAsCsv",exportAsExcel:"exportAsExcel",shareReports:"shareReports",customizeReport:"customizeReport"},decls:33,vars:14,consts:[[1,"cl-card-header","cl-border-bottom-0","cl-pl-2","cl-pl-lg-3","cl-pr-0","cl-pt-2","cl-pt-lg-custom-0","cl-d-block","cl-d-lg-custom-flex"],[1,"cl-d-flex","cl-d-flex","cl-flex-column","cl-flex-sm-row"],[1,"cl-d-flex","cl-align-items-end"],[1,"cl-h6","cl-mb-0","cl-lh-1"],[1,"cl-h2","cl-mb-0","cl-ml-1","cl-lh-1"],[4,"ngIf"],[1,"cl-border-bottom","cl-mr-2","cl-mr-lg-3","cl-mt-2"],[1,"cl-d-flex","cl-flex-column","cl-flex-sm-row"],[1,"cl-d-flex","cl-min-height-40"],["dropdownKey","",1,"cl-dropdown","cl-d-flex","cl-w-100","cl-w-lg-auto","cl-ml-n2","cl-ml-lg-n3"],["dropdownKeyButton","","dropdownKeyButtonHover","","tabindex","0",1,"cl-component-divided-left","pointer","cl-remove-divider-mob","cl-dropdown-toggle","cl-small"],["class","cl-dropdown-menu","openUpAtBottom","",4,"dropdownKeyContent"],["triggers","manual","placement","bottom",3,"ngbPopover"],["pdfLimitPopover","ngbPopover"],[1,"cl-component-divided-left"],["tabindex","0",3,"keyup.enter","keyup.space","click"],["printLink",""],["src","assets/images/ui-icons/print.svg"],["class","cl-component-divided-left",4,"ngIf"],[1,"cl-border-bottom","cl-mr-2","cl-d-block","cl-d-sm-none"],["class","cl-d-flex cl-min-height-40 cl-flex-sm-row",3,"cl-flex-column",4,"ngIf"],["popContent",""],["popContentLaborCost",""],["popContentPdf",""],[4,"ngFor","ngForOf"],[1,"cl-border-bottom","cl-mr-2","cl-mr-lg-3","cl-mt-2","cl-d-block","cl-d-sm-none"],[1,"cl-d-flex","cl-align-items-end","cl-ml-sm-2","cl-mt-2","cl-mt-sm-0"],["openUpAtBottom","",1,"cl-dropdown-menu"],[1,"cl-scroll-area"],["clickCloseDropdown","","tabindex","0",1,"cl-dropdown-item",3,"keyup.enter","keyup.space","click"],["excelLink",""],["clickCloseDropdown","","class","cl-dropdown-item cl-border-top","tabindex","0",3,"keyup.enter","keyup.space","click",4,"ngIf"],["dropdownClose","","tabindex","0"],["clickCloseDropdown","","tabindex","0",1,"cl-dropdown-item","cl-border-top",3,"keyup.enter","keyup.space","click"],["tabindex","0","data-share-btn","",3,"keyup.enter","keyup.space","click"],["shareLink",""],["src","assets/images/ui-icons/share.svg"],[1,"cl-d-flex","cl-min-height-40","cl-flex-sm-row"],["placement","left",1,"cl-component-divided-left","cl-remove-divider-xs","cl-min-height-40",3,"ngbTooltip"],["triggers","manual","placement","left","container","body",1,"cl-custom-control","cl-custom-switch",3,"ngbPopover","click"],["featurePopover","ngbPopover"],["type","checkbox","id","rounding",1,"cl-custom-control-input",3,"ngModel","disabled","ngModelChange"],["for","rounding",1,"cl-custom-control-label","cl-d-report-rounding"],[1,"cl-small"],["class","cl-d-flex cl-w-lg-auto cl-component-divided-left cl-small cl-mr-n3",4,"ngIf"],["class","cl-d-flex cl-w-lg-auto cl-component-divided-left cl-small cl-mr-n3","triggers","manual","placement","left","container","body",3,"ngbPopover",4,"ngIf"],[1,"cl-d-flex","cl-w-lg-auto","cl-component-divided-left","cl-small","cl-mr-n3"],[1,"cl-d-report-amount-dropdown","cl-xl-down-r-0-wrapper",3,"list","value","labelPrefix","type","onChanged"],["triggers","manual","placement","left","container","body",1,"cl-d-flex","cl-w-lg-auto","cl-component-divided-left","cl-small","cl-mr-n3",3,"ngbPopover"],["featureLaborCostPopover","ngbPopover"],[1,"cl-d-report-amount-dropdown","cl-xl-down-r-0-wrapper",3,"list","value","type","onChanged"],["dropdownItemAmount",""],["dropdownKey","",1,"cl-dropdown","cl-d-inline-block"],["dropdownKeyButton","","tabindex","0","placement","bottom",1,"cl-dropdown-item-label","cl-py-2","cl-text-left","cl-dropdown-toggle","pointer","cl-mr-2","cl-transform-none"],[1,"cl-dropdown-prefix","cl-d-inline","cl-ml-3","cl-small"],["class","cl-dropdown-menu cl-dropdown-menu-right cl-prevent-close","style","width: 200px",4,"dropdownKeyContent"],[1,"cl-dropdown-menu","cl-dropdown-menu-right","cl-prevent-close",2,"width","200px"],["triggers","manual","placement","left","container","body",1,"cl-scroll-area",3,"ngbPopover"],["class","cl-dropdown-item cl-dropdown-item-checkbox cl-cut-text-wrapper",4,"ngFor","ngForOf"],[1,"cl-dropdown-item","cl-dropdown-item-checkbox","cl-cut-text-wrapper"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","ngModelChange","click"],[1,"cl-custom-control-label",3,"for"],[1,"cl-cut-text"],[3,"routerLink","queryParams","click"],[3,"routerLink"]],template:function(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xb(6,"div",4),n.Zc(7),n.oc(8,"timeFormat"),n.Wb(),n.Wb(),n.Xc(9,P,2,1,"ng-container",5),n.Wb(),n.Sb(10,"div",6),n.Xb(11,"div",7),n.Xb(12,"div",8),n.Xb(13,"div",9),n.Xb(14,"div",10),n.Zc(15),n.oc(16,"translate"),n.Wb(),n.Xc(17,M,14,10,"div",11),n.Wb(),n.Sb(18,"div",12,13),n.Xb(20,"div",14),n.Xb(21,"a",15,16),n.jc("keyup.enter",(function(){n.Oc(e);const i=n.Lc(19);return t.downloadPdf(i)}))("keyup.space",(function(){n.Oc(e);const i=n.Lc(19);return t.downloadPdf(i)}))("click",(function(){n.Oc(e);const i=n.Lc(22),s=n.Lc(19);return i.blur(),t.downloadPdf(s)})),n.Sb(23,"img",17),n.Wb(),n.Wb(),n.Xc(24,X,4,0,"div",18),n.Wb(),n.Sb(25,"div",19),n.Xc(26,U,12,12,"div",20),n.Wb(),n.Wb(),n.Xc(27,Y,5,10,"ng-template",null,21,n.Yc),n.Xc(29,q,2,2,"ng-template",null,22,n.Yc),n.Xc(31,J,1,1,"ng-template",null,23,n.Yc)}if(2&e){const e=n.Lc(32);n.Cb(4),n.ad(n.pc(5,7,"GLOBAL.TOTAL_TIME")),n.Cb(3),n.ad(n.qc(8,9,null==t.totalInfo?null:t.totalInfo.totalTime,t.format)),n.Cb(2),n.wc("ngIf",t.canSeeRates&&(null==t.totalInfo?null:t.totalInfo.amounts)),n.Cb(6),n.bd(" ",n.pc(16,12,"REPORTS.SHARED.EXPORT_LABEL")," "),n.Cb(3),n.wc("ngbPopover",e),n.Cb(6),n.wc("ngIf",!t.workspaceInfo||!t.workspaceInfo.id),n.Cb(2),n.wc("ngIf",!t.workspaceInfo||!t.workspaceInfo.id)}},directives:[C.u,E.a,w.a,S.a,y.a,O.M,C.t,O.bb,A.a,A.s,A.v,h.a,k.g],pipes:[v.e,T.a,D.a,I.a],encapsulation:2,changeDetection:0}),e})()},uepX:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ofXK"),s=i("3Pt+"),r=i("iTUp"),o=i("sYmb"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.a,o.d]]}),e})()},ujiw:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("ds6q"),s=i("j4ir"),r=i("1Tmk"),o=i("pLZG"),a=i("1G5W"),c=i("zP0r"),l=i("IzEk"),u=i("qfBg"),d=i("FwEu"),h=i("Jzhb"),p=i("HApq"),b=i("SvJf"),f=i("Y9WU"),m=i("fXoL"),g=i("tyNb"),v=i("1kSV");function C(e,t){if(1&e){const e=m.Yb();m.Xb(0,"div",12),m.Xb(1,"a",13),m.jc("keyup.enter",(function(){m.Oc(e);const t=m.nc(),i=m.Lc(19);return t.openCreateModal(i)}))("keyup.space",(function(){m.Oc(e);const t=m.nc(),i=m.Lc(19);return t.openCreateModal(i)}))("click",(function(){m.Oc(e);const t=m.nc(),i=m.Lc(19);return t.openCreateModal(i)})),m.Zc(2),m.oc(3,"translate"),m.Xb(4,"span",14),m.Zc(5),m.oc(6,"lowercase"),m.oc(7,"translate"),m.Wb(),m.Wb(),m.Wb()}2&e&&(m.Cb(2),m.bd(" ",m.pc(3,2,"GLOBAL.CREATE_NEW_TITLE")," "),m.Cb(3),m.ad(m.pc(6,4,m.pc(7,6,"GLOBAL.WORKSPACE_LABEL"))))}function E(e,t){if(1&e){const e=m.Yb();m.Xb(0,"workspace-row",15),m.jc("setAsDefault",(function(){m.Oc(e);const i=t.$implicit;return m.nc().setAsDefault(i)}))("openSettings",(function(){m.Oc(e);const i=t.$implicit;return m.nc().openSettingsPage(i)}))("onLeave",(function(){m.Oc(e);const i=t.$implicit,n=m.nc(),s=m.Lc(17);return n.openDeleteModal(i,s)})),m.Wb()}if(2&e){const e=t.$implicit,i=m.nc();m.wc("defaultWorkspaceId",i.defaultWorkspace.id)("workspace",e)("hasSettingsPermision",i.settingsPermissionMap[e.id])("hasOnlyOneWorkspace",i.workspaces.lenght<=1)("isOwner",i.ownerMap[e.id])("canLeave",e.id!==i.defaultWorkspace.id&&e.isOwnerAllowedToLeave)}}function w(e,t){if(1&e){const e=m.Yb();m.Xb(0,"delete-workspace-modal",16),m.jc("onClose",(function(i){return m.Oc(e),t.$implicit.close(i)})),m.Wb()}if(2&e){const e=m.nc();m.wc("workspaceData",e.deleteWorkspaceData)}}function S(e,t){if(1&e){const e=m.Yb();m.Xb(0,"modal-header",17),m.jc("onClose",(function(i){return m.Oc(e),t.$implicit.close(i)})),m.oc(1,"translate"),m.Wb(),m.Xb(2,"create-workspace-modal",18),m.jc("onClose",(function(i){return m.Oc(e),t.$implicit.close(i)})),m.Wb()}2&e&&m.wc("title",m.pc(1,1,"WORKSPACE.NEW.MODAL_TITLE"))}let y=(()=>{class e{constructor(e,t,i,s,r,o,a){this.userService=e,this.router=t,this.modalService=i,this.systemSettingsService=s,this.workspaceService=r,this.cd=o,this.analyticsService=a,this.unsubscribe$=new n.Subject}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}ngOnInit(){this.settingsPermissionMap=new Map,this.leaveWorkspacePermissionMap=new Map,this.ownerMap=new Map,this.workspaceService.defaultWorkspace$.pipe(Object(o.a)(e=>!!e),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.defaultWorkspace=e,this.cd.detectChanges()}),this.workspaceService.workspaces$.pipe(Object(o.a)(e=>null!==e),Object(c.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{const t=!this.workspaces;this.workspaces=e.map(e=>s.a.clone(e)),t&&this.getPermissions(),this.cd.detectChanges()}),this.systemSettingsService.systemSettings.pipe(Object(l.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{this.hasPermissionToCreateWorkspace=!e.createWorkspaceForbidden,this.cd.detectChanges()}),this.systemSettingsService.getSystemSettings(),this.workspaceService.getAllWorkspaces()}openSettingsPage(e){e.id===this.defaultWorkspace.id?this.router.navigate(["workspaces",e.id,"settings"]):this.setAsDefault(e,!0)}openDeleteModal(e,t){if(this.isModalOpen)return;this.isModalOpen=!0;const i=e.id;this.deleteWorkspaceData={id:i,name:e.name,subscription:e.featureSubscriptionType,type:this.ownerMap[i]?"delete":"leave"},this.cd.detectChanges(),this.modalService.open(t,{centered:!0}).result.then(e=>{this.analyticsService.addEvent(new b.a({event:"submit",value:this.ownerMap[i]?"delete":"leave",section:"Main",section2:"Workspaces"})),this.setIsOwnerAllowedToLeave(this.workspaces),this.cd.detectChanges(),setTimeout(()=>this.isModalOpen=!1,100)},()=>setTimeout(()=>this.isModalOpen=!1,100))}openCreateModal(e){this.isModalOpen||(this.isModalOpen=!0,this.modalService.open(e,{centered:!0,size:"lg"}).result.then(e=>{e&&(this.leaveWorkspacePermissionMap[e.id]=!0,this.settingsPermissionMap[e.id]=!0,this.ownerMap[e.id]=!0,this.setIsOwnerAllowedToLeave(this.workspaces),this.cd.detectChanges()),setTimeout(()=>this.isModalOpen=!1,100)},()=>setTimeout(()=>this.isModalOpen=!1,100)))}setAsDefault(e,t){this.workspaceInProgress!==e.id&&(this.workspaceInProgress=e.id,this.userService.setDefaultUserWorkspace(e.id,e).subscribe(i=>{this.analyticsService.addEvent(new b.a({event:"submit",uevent:"submit",value:"Change workspace",section:"Main",section2:"Workspaces"})),this.workspaceInProgress=null,t&&this.router.navigate(["workspaces",e.id,"settings"])},e=>{this.workspaceInProgress=null}))}getPermissions(){this.workspaceService.workspacesPermissionsForUser.pipe(Object(l.a)(1),Object(a.a)(this.unsubscribe$)).subscribe(e=>{const t=e.filter(e=>e.name===h.a.OWNER).map(e=>e.objectId);t.forEach(e=>this.ownerMap[e]=!0);const i=e.filter(e=>e.name===h.a.OWNER||e.name===h.a.ADMIN).map(e=>e.objectId);this.workspaces.forEach(e=>{t.indexOf(e.id)>-1&&(this.leaveWorkspacePermissionMap[e.id]=!0),i.indexOf(e.id)>-1&&(this.settingsPermissionMap[e.id]=!0)}),this.setIsOwnerAllowedToLeave(this.workspaces),this.cd.detectChanges()}),this.workspaceService.getPermissionsForUserOnWorkspaces(this.workspaces.map(e=>e.id))}setIsOwnerAllowedToLeave(e){e=e.map(e=>(e.isOwnerAllowedToLeave=!this.leaveWorkspacePermissionMap[e.id]||!this.isMoreThanOneMemberIn(e),e))}isMoreThanOneMemberIn(e){return e.memberships.filter(e=>e.membershipStatus===d.a.ACTIVE).length>1}}return e.\u0275fac=function(t){return new(t||e)(m.Rb(u.a),m.Rb(g.d),m.Rb(v.q),m.Rb(p.a),m.Rb(r.a),m.Rb(m.h),m.Rb(f.a))},e.\u0275cmp=m.Lb({type:e,selectors:[["workspaces"]],decls:20,vars:8,consts:[[1,"cl-page-wrapper"],[1,"cl-container-fluid"],[1,"cl-page-header-wrapper"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],["class","cl-d-flex cl-align-items-center cl-justify-content-end",4,"ngIf"],[1,"cl-card"],[1,"cl-card-header","cl-px-2","cl-px-lg-3"],[1,"cl-h6","cl-mb-0"],["class","cl-component-row cl-component-row-divide-md cl-px-0",3,"defaultWorkspaceId","workspace","hasSettingsPermision","hasOnlyOneWorkspace","isOwner","canLeave","setAsDefault","openSettings","onLeave",4,"ngFor","ngForOf"],["deleteModal",""],["createModal",""],[1,"cl-d-flex","cl-align-items-center","cl-justify-content-end"],["tabindex","0",1,"cl-btn","cl-btn-outline-primary",3,"keyup.enter","keyup.space","click"],[1,"cl-d-none","cl-d-md-inline"],[1,"cl-component-row","cl-component-row-divide-md","cl-px-0",3,"defaultWorkspaceId","workspace","hasSettingsPermision","hasOnlyOneWorkspace","isOwner","canLeave","setAsDefault","openSettings","onLeave"],[3,"workspaceData","onClose"],[3,"title","onClose"],[3,"onClose"]],template:function(e,t){1&e&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Xb(3,"div",3),m.Xb(4,"div",4),m.Xb(5,"h1"),m.Zc(6),m.oc(7,"translate"),m.Wb(),m.Wb(),m.Xb(8,"div",4),m.Xc(9,C,8,8,"div",5),m.Wb(),m.Wb(),m.Wb(),m.Xb(10,"div",6),m.Xb(11,"div",7),m.Xb(12,"span",8),m.Zc(13),m.oc(14,"translate"),m.Wb(),m.Wb(),m.Xc(15,E,1,6,"workspace-row",9),m.Wb(),m.Wb(),m.Wb(),m.Xc(16,w,1,1,"ng-template",null,10,m.Yc),m.Xc(18,S,3,3,"ng-template",null,11,m.Yc)),2&e&&(m.Cb(6),m.ad(m.pc(7,4,"GLOBAL.WORKSPACES_LABEL")),m.Cb(3),m.wc("ngIf",t.hasPermissionToCreateWorkspace),m.Cb(4),m.ad(m.pc(14,6,"GLOBAL.WORKSPACES_LABEL")),m.Cb(2),m.wc("ngForOf",t.workspaces))},encapsulation:2,changeDetection:0}),e})()},unEv:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.CREATE="CREATE",e.EDIT="EDIT",e}({})},v95T:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ofXK"),s=i("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Pb({type:e}),e.\u0275inj=s.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})()},vqWo:function(e,t,i){"use strict";i.d(t,"b",(function(){return V})),i.d(t,"a",(function(){return H}));var n=i("fXoL"),s=i("XNiG"),r=i("rsZi"),o=i("EcM4"),a=i("1Tmk"),c=i("i/9y"),l=i("lGQG"),u=i("Y9WU"),d=i("qrIO"),h=i("ofXK"),p=i("3Pt+"),b=i("1kSV"),f=i("tyNb"),m=i("sYmb");function g(e,t){1&e&&n.Tb(0)}function v(e,t){1&e&&n.Tb(0)}function C(e,t){if(1&e&&(n.Xb(0,"th",13),n.Xb(1,"div",16),n.Xb(2,"div",17),n.Zc(3),n.oc(4,"translate"),n.Wb(),n.Wb(),n.Wb()),2&e){const e=n.nc(2);n.Cb(3),n.ad(n.pc(4,1,e.amountLabel))}}function E(e,t){1&e&&(n.Xb(0,"th",11),n.Sb(1,"div",18),n.Wb())}function w(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"th",5),n.Xb(2,"div",6),n.Xc(3,g,1,0,"ng-container",7),n.Xb(4,"a",8),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.DESCRIPTION)})),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Xc(7,v,1,0,"ng-container",7),n.Wb(),n.Wb(),n.Xc(8,C,5,3,"th",9),n.Xc(9,E,2,0,"th",10),n.Xb(10,"th",11),n.Xb(11,"a",12),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.USER)})),n.Zc(12),n.oc(13,"translate"),n.Wb(),n.Wb(),n.Xb(14,"th",11),n.Xb(15,"a",8),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.DATE)})),n.Zc(16),n.oc(17,"translate"),n.Wb(),n.Wb(),n.Xb(18,"th",13),n.Xb(19,"a",14),n.jc("click",(function(){n.Oc(e);const t=n.nc();return t.changeSort(t.SortColumn.DURATION)})),n.Zc(20),n.oc(21,"translate"),n.Wb(),n.Wb(),n.Xb(22,"th",11),n.Xb(23,"div",15),n.Zc(24),n.oc(25,"translate"),n.Wb(),n.Wb(),n.Ub()}if(2&e){const e=n.nc(),t=n.Lc(2),i=n.Lc(6);n.Cb(3),n.wc("ngTemplateOutlet",t),n.Cb(1),n.Hb("cl-up",e.sortColumn===e.SortColumn.DESCRIPTION&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DESCRIPTION&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.bd(" ",n.pc(6,25,"REPORTS.DETAILED_REPORT.TIME_ENTRY_LABEL")," "),n.Cb(2),n.wc("ngTemplateOutlet",i),n.Cb(1),n.wc("ngIf",e.activeBillableHours),n.Cb(1),n.wc("ngIf",e.activeBillableHours&&(!e.onlyAdminCanSeeAndChangeBillable||e.isAdminOrOwner)),n.Cb(2),n.Hb("cl-up",e.sortColumn===e.SortColumn.USER&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.USER&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.ad(n.pc(13,27,"GLOBAL.USER_LABEL")),n.Cb(3),n.Hb("cl-up",e.sortColumn===e.SortColumn.DATE&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DATE&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.ad(n.pc(17,29,"GLOBAL.TIME_LABEL")),n.Cb(3),n.Hb("cl-up",e.sortColumn===e.SortColumn.DURATION&&e.sortOrder===e.SortOrder.ASCENDING)("cl-down",e.sortColumn===e.SortColumn.DURATION&&e.sortOrder===e.SortOrder.DESCENDING),n.Cb(1),n.ad(n.pc(21,31,"REPORTS.SHARED.DURATION_LABEL")),n.Cb(4),n.ad(n.pc(25,33,"GLOBAL.EDIT_LABEL"))}}function S(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",20),n.Xb(1,"input",21),n.jc("ngModelChange",(function(t){return n.Oc(e),n.nc(2).toggleSelectAll(t)})),n.Wb(),n.Sb(2,"label",22),n.Wb()}if(2&e){const e=n.nc(2);n.Cb(1),n.wc("indeterminate",e.numberOfSelected>0&&e.numberOfSelected<e.numberOfAvailableEntries)("ngModel",e.isSelectedAllAvailable)}}function y(e,t){if(1&e&&n.Xc(0,S,3,2,"div",19),2&e){const e=n.nc();n.wc("ngIf",e.numberOfAvailableEntries)}}function O(e,t){1&e&&n.Tb(0)}function A(e,t){1&e&&n.Tb(0)}function k(e,t){if(1&e){const e=n.Yb();n.Xb(0,"th",5),n.Xb(1,"div",6),n.Xc(2,O,1,0,"ng-container",7),n.Xb(3,"div",23),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Xc(6,A,1,0,"ng-container",7),n.Xb(7,"a",24),n.jc("click",(function(){return n.Oc(e),n.nc().expandAll()})),n.Xb(8,"span",25),n.Sb(9,"img",26),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc(),t=n.Lc(2),i=n.Lc(6);n.Cb(2),n.wc("ngTemplateOutlet",t),n.Cb(2),n.ad(n.pc(5,4,"REPORTS.DETAILED_REPORT.TIME_ENTRY_LABEL")),n.Cb(2),n.wc("ngTemplateOutlet",i),n.Cb(3),n.wc("src",e.isExpandAll?"assets/images/ui-icons/chevron-up.svg":"/assets/images/ui-icons/chevron-down.svg",n.Qc)}}function T(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",31),n.jc("click",(function(){return n.Oc(e),n.nc(4).markAs(!1)})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.Cb(1),n.ad(n.pc(2,1,"REPORTS.DETAILED_REPORT.MARK_UNINVOICED_BTN")))}function D(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",31),n.jc("click",(function(){return n.Oc(e),n.nc(4).markAs(!0)})),n.Zc(1),n.oc(2,"translate"),n.Wb()}2&e&&(n.Cb(1),n.ad(n.pc(2,1,"REPORTS.DETAILED_REPORT.MARK_INVOICED_BTN")))}function I(e,t){if(1&e&&(n.Xb(0,"span",32),n.Xc(1,T,3,3,"a",34),n.Xc(2,D,3,3,"ng-template",null,35,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",!t.bulkEditDataService.isSelectedAllGlobally&&t.areAllCheckedEntriesInvoiced)("ngIfElse",e)}}const _=function(e){return{value:e}};function R(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.oc(3,"translate"),n.Xb(4,"a",31),n.jc("click",(function(){n.Oc(e);const t=n.nc(4);return t.bulkEditDataService.selectAllGlobally(!1),t.toggleSelectAll(!1)})),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Ub()}if(2&e){const e=n.nc(4);n.Cb(1),n.bd(" ",e.isAdminOrOwner?n.qc(2,2,"REPORTS.DETAILED_REPORT.ALL_SELECTED_INFO_WITH_COUNT",n.Bc(9,_,e.entriesOnOtherPages+e.numberOfEntries)):n.pc(3,5,"REPORTS.DETAILED_REPORT.ALL_SELECTED_INFO"),"\xa0 "),n.Cb(4),n.bd(" ",n.pc(6,7,"REPORTS.DETAILED_REPORT.CLEAR_SECTION_LABEL")," ")}}const L=function(e){return{count:e}};function x(e,t){if(1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e){const e=n.nc(5);n.Cb(1),n.bd(" ",n.qc(2,1,"REPORTS.DETAILED_REPORT.SELECT_ALL_WITH_COUNT_TEXT",n.Bc(4,L,e.entriesOnOtherPages+e.numberOfEntries))," ")}}function P(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"REPORTS.DETAILED_REPORT.SELECT_ALL_ENTRIES_TEXT")," "))}function j(e,t){if(1&e){const e=n.Yb();n.Xb(0,"a",31),n.jc("click",(function(){return n.Oc(e),n.nc(4).bulkEditDataService.selectAllGlobally(!0)})),n.Xc(1,x,3,6,"ng-container",27),n.Xc(2,P,3,3,"ng-container",27),n.Wb()}if(2&e){const e=n.nc(4);n.Cb(1),n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner)}}function M(e,t){if(1&e&&(n.Xb(0,"span",32),n.Xc(1,R,7,11,"ng-container",0),n.Xc(2,j,3,2,"ng-template",null,36,n.Yc),n.Wb()),2&e){const e=n.Lc(3),t=n.nc(3);n.Cb(1),n.wc("ngIf",t.bulkEditDataService.isSelectedAllGlobally)("ngIfElse",e)}}function X(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Xb(1,"span",28,29),n.Xb(3,"span",30),n.Xb(4,"a",31),n.jc("click",(function(){n.Oc(e);const t=n.Lc(2);return n.nc(2).onBulkEdit(t)})),n.Zc(5),n.oc(6,"translate"),n.Wb(),n.Wb(),n.Xb(7,"span",32),n.Xb(8,"a",31),n.jc("click",(function(){n.Oc(e);const t=n.Lc(2);return n.nc(2).onBulkDelete(t)})),n.Zc(9),n.oc(10,"translate"),n.Wb(),n.Wb(),n.Xc(11,I,4,2,"span",33),n.Xc(12,M,4,2,"span",33),n.Wb(),n.Ub()}if(2&e){const e=n.nc(2),t=n.Lc(8);n.Cb(1),n.wc("ngbPopover",t),n.Cb(4),n.ad(n.pc(6,5,"GLOBAL.BULK_EDIT_LABEL")),n.Cb(4),n.ad(n.pc(10,7,"GLOBAL.DELETE_BTN")),n.Cb(2),n.wc("ngIf",e.isAdminOrOwner&&e.invoicingEnabled),n.Cb(1),n.wc("ngIf",e.isSelectedAllAvailable&&e.entriesOnOtherPages||e.bulkEditDataService.isSelectedAllGlobally)}}function F(e,t){if(1&e&&n.Xc(0,X,13,9,"ng-container",27),2&e){const e=n.nc();n.wc("ngIf",e.numberOfSelected||e.bulkEditDataService.isSelectedAllGlobally)}}const W=function(){return["/upgrade"]},B=function(){return{plan:"basic"}};function N(e,t){if(1&e){const e=n.Yb();n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Xb(3,"a",37),n.jc("click",(function(){return n.Oc(e),n.nc(2).analyticsService.addEventOnSettingsChanged("Basic","Upgrade","Reports","Detailed","Bulk edit")})),n.Zc(4),n.oc(5,"translate"),n.Wb(),n.Ub()}2&e&&(n.Cb(1),n.bd(" ",n.pc(2,4,"GLOBAL.BASIC_FEATURE_LABEL")," "),n.Cb(2),n.wc("routerLink",n.Ac(8,W))("queryParams",n.Ac(9,B)),n.Cb(1),n.ad(n.pc(5,6,"GLOBAL.UPGRADE_BTN")))}function G(e,t){1&e&&(n.Vb(0),n.Zc(1),n.oc(2,"translate"),n.Ub()),2&e&&(n.Cb(1),n.bd(" ",n.pc(2,1,"GLOBAL.BASIC_FEATURE_LABEL")," "))}function U(e,t){if(1&e&&(n.Xc(0,N,6,10,"ng-container",27),n.Xc(1,G,3,3,"ng-container",27)),2&e){const e=n.nc();n.wc("ngIf",e.isAdminOrOwner),n.Cb(1),n.wc("ngIf",!e.isAdminOrOwner)}}var V=function(e){return e.ID="ID",e.DESCRIPTION="DESCRIPTION",e.USER="USER",e.DATE="DATE",e.DURATION="DURATION",e}({});let H=(()=>{class e{constructor(e,t,i,o,a){this.analiyticsService=e,this.bulkEditDataService=t,this.cd=i,this.authService=o,this.workspaceService=a,this.bulkEdit=new n.n,this.bulkDelete=new n.n,this.onChange=new n.n,this.onSelectAllChange=new n.n,this.onExpandAll=new n.n,this.onMarkAs=new n.n,this.SortOrder=r.a,this.SortColumn=V,this.isExpandAll=!1,this.unsubscribe$=new s.a}set numberOfEntries(e){this._numberOfEntries=e,this.bulkEditDataService.selectAllGlobally(!1)}get numberOfEntries(){return this._numberOfEntries}set numberOfSelected(e){this._numberOfSelected=e,this.bulkEditDataService.selectAllGlobally(!1)}get numberOfSelected(){return this._numberOfSelected}ngOnInit(){this.isAdminOrOwner=this.authService.isAdminOrOwner();const e=this.workspaceService.getLocalDefaultWorkspace();this.hasBulkEditFeature=e&&e.hasFeature(c.a.BULK_EDIT)}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}get amountLabel(){return this.amountOptions[0]===d.a.COST?"GLOBAL.COST_LABEL":this.amountOptions[0]===d.a.PROFIT?"GLOBAL.PROFIT_LABEL":"GLOBAL.AMOUNT_LABEL"}get isSelectedAllAvailable(){return this.numberOfSelected===this.numberOfAvailableEntries&&this.numberOfSelected>0}expandAll(){this.isExpandAll=!this.isExpandAll,this.onExpandAll.emit(this.isExpandAll)}toggleSelectAll(e){this.onSelectAllChange.emit(e)}changeSort(e){e===this.sortColumn?this.sortOrder=this.sortOrder===r.a.ASCENDING?r.a.DESCENDING:r.a.ASCENDING:(this.sortColumn=e,this.sortOrder=r.a.ASCENDING),this.emit()}onBulkEdit(e){this.hasBulkEditFeature?this.bulkEdit.emit():e.isOpen()?e.close():e.open()}onBulkDelete(e){this.hasBulkEditFeature?this.bulkDelete.emit():e.isOpen()?e.close():e.open()}markAs(e){this.onMarkAs.emit(e)}onBulkComplete(){this.bulkEditDataService.selectAllGlobally(!1),this.cd.detectChanges()}selectAllGlobally(){this.bulkEditDataService.selectAllGlobally(!0),this.cd.detectChanges()}emit(){this.onChange.emit({sortOrder:this.sortOrder,sortColumn:this.sortColumn})}}return e.\u0275fac=function(t){return new(t||e)(n.Rb(u.a),n.Rb(o.a),n.Rb(n.h),n.Rb(l.a),n.Rb(a.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["detailed-header"],["","detailed-header",""]],inputs:{isDesktop:"isDesktop",sortOrder:"sortOrder",sortColumn:"sortColumn",amountOptions:"amountOptions",entriesOnOtherPages:"entriesOnOtherPages",isAdminOrOwner:"isAdminOrOwner",invoicingEnabled:"invoicingEnabled",activeBillableHours:"activeBillableHours",onlyAdminCanSeeAndChangeBillable:"onlyAdminCanSeeAndChangeBillable",areAllCheckedEntriesInvoiced:"areAllCheckedEntriesInvoiced",numberOfEntries:"numberOfEntries",numberOfSelected:"numberOfSelected",numberOfAvailableEntries:"numberOfAvailableEntries"},outputs:{bulkEdit:"bulkEdit",bulkDelete:"bulkDelete",onChange:"onChange",onSelectAllChange:"onSelectAllChange",onExpandAll:"onExpandAll",onMarkAs:"onMarkAs"},decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["selectAllDivTemplate",""],["mobileTemplate",""],["bulkButtons",""],["popContent",""],[1,"cl-pl-lg-3"],[1,"cl-d-flex","cl-align-items-center"],[4,"ngTemplateOutlet"],[1,"cl-text-gray-6","cl-sort-by",3,"click"],["class","cl-px-0 cl-text-right",4,"ngIf"],["class","cl-px-0",4,"ngIf"],[1,"cl-px-0"],[1,"cl-text-gray-6","cl-sort-by","cl-pl-lg-3",3,"click"],[1,"cl-px-0","cl-text-right"],[1,"cl-text-gray-6","cl-sort-by","cl-text-nowrap",3,"click"],[1,"cl-h5","cl-mb-0","cl-d-block","cl-d-lg-custom-none"],[1,"cl-ml-lg-custom-n2"],[1,"cl-h5","cl-mb-0","cl-text-gray-6-dark-mode"],[1,"cl-h5","mb-0","d-block","d-lg-custom-none"],["class","cl-custom-control cl-custom-checkbox",4,"ngIf"],[1,"cl-custom-control","cl-custom-checkbox"],["type","checkbox","id","toggleAll",1,"cl-custom-control-input",3,"indeterminate","ngModel","ngModelChange"],["for","toggleAll",1,"cl-custom-control-label"],[1,"cl-h5","cl-mb-0"],[1,"cl-ml-auto",3,"click"],[1,"cl-badge","cl-badge-same-entries","cl-mx-0"],[3,"src"],[4,"ngIf"],["triggers","manual","placement","left","container","body",3,"ngbPopover"],["featurePopover","ngbPopover"],[1,"cl-bulk-edit-link","cl-text-capitalize"],[3,"click"],[1,"cl-bulk-edit-link"],["class","cl-bulk-edit-link",4,"ngIf"],[3,"click",4,"ngIf","ngIfElse"],["markAsUninvoiced",""],["selectAllGloballyTemplate",""],[3,"routerLink","queryParams","click"]],template:function(e,t){if(1&e&&(n.Xc(0,w,26,35,"ng-container",0),n.Xc(1,y,1,1,"ng-template",null,1,n.Yc),n.Xc(3,k,10,6,"ng-template",null,2,n.Yc),n.Xc(5,F,1,1,"ng-template",null,3,n.Yc),n.Xc(7,U,2,2,"ng-template",null,4,n.Yc)),2&e){const e=n.Lc(4);n.wc("ngIf",t.isDesktop)("ngIfElse",e)}},directives:[h.u,h.B,p.a,p.s,p.v,b.M,f.g],pipes:[m.e],encapsulation:2,changeDetection:0}),e})()},vrD5:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("DoKE"),s=i("fXoL");let r=(()=>{class e{constructor(e){this.element=e}onKeyUp(e){const t=this.element.nativeElement.value;" "===t[t.length-1]&&(e.keyCode?e.keyCode:e.which)===n.h&&e.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(s.Rb(s.l))},e.\u0275dir=s.Mb({type:e,selectors:[["","preventMultipleSpaces",""]],hostBindings:function(e,t){1&e&&s.jc("keydown",(function(e){return t.onKeyUp(e)}))}}),e})()},vwXn:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("3Pt+"),r=i("sYmb"),o=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,s.C,r.d]]}),e})()},w5QO:function(e,t,i){"use strict";t.noop=function(){}},wBNX:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},wHJU:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("yK97");class s{constructor(e){this._startDate=e&&e.startDate,this._endDate=e&&e.endDate}get startDate(){return this._startDate}get endDate(){return this._endDate}}var r=i("wd/R");class o{constructor(e){this._id=null==e?void 0:e.id,this._workspaceId=null==e?void 0:e.workspaceId,this._name=null==e?void 0:e.name,this._userIds=(null==e?void 0:e.userIds)||[],this._userGroupIds=(null==e?void 0:e.userGroupIds)||[],this._period=new n.a({start:r(null==e?void 0:e.datePeriod.startDate).toISOString(),end:r(null==e?void 0:e.datePeriod.endDate).toISOString()}),this._datePeriod=new s(null==e?void 0:e.datePeriod),this._occursAnnually=null==e?void 0:e.occursAnnually,this._everyoneIncludingNew=null==e?void 0:e.everyoneIncludingNew}get id(){return this._id}get workspaceId(){return this._workspaceId}get name(){return this._name}get userIds(){return this._userIds}get userGroupIds(){return this._userGroupIds}get period(){return this._period}get occursAnnually(){return this._occursAnnually}set name(e){this._name=e}set period(e){this._period=e}set occursAnnually(e){this._occursAnnually=e}set userIds(e){this._userIds=e}set userGroupIds(e){this._userGroupIds=e}get everyoneIncludingNew(){return this._everyoneIncludingNew}set everyoneIncludingNew(e){this._everyoneIncludingNew=e}get datePeriod(){return this._datePeriod}}},wMS7:function(e,t,i){e.exports=function(){"use strict";var e=Object.hasOwnProperty,t=Object.setPrototypeOf,i=Object.isFrozen,n=Object.getPrototypeOf,s=Object.getOwnPropertyDescriptor,r=Object.freeze,o=Object.seal,a=Object.create,c="undefined"!=typeof Reflect&&Reflect,l=c.apply,u=c.construct;l||(l=function(e,t,i){return e.apply(t,i)}),r||(r=function(e){return e}),o||(o=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))))});var d,h=S(Array.prototype.forEach),p=S(Array.prototype.pop),b=S(Array.prototype.push),f=S(String.prototype.toLowerCase),m=S(String.prototype.match),g=S(String.prototype.replace),v=S(String.prototype.indexOf),C=S(String.prototype.trim),E=S(RegExp.prototype.test),w=(d=TypeError,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return u(d,t)});function S(e){return function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return l(e,t,n)}}function y(e,n){t&&t(e,null);for(var s=n.length;s--;){var r=n[s];if("string"==typeof r){var o=f(r);o!==r&&(i(n)||(n[s]=o),r=o)}e[r]=!0}return e}function O(t){var i=a(null),n=void 0;for(n in t)l(e,t,[n])&&(i[n]=t[n]);return i}function A(e,t){for(;null!==e;){var i=s(e,t);if(i){if(i.get)return S(i.get);if("function"==typeof i.value)return S(i.value)}e=n(e)}return function(e){return console.warn("fallback value for",e),null}}var k=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=r(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),R=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=r(["#text"]),x=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),P=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),X=o(/\{\{[\s\S]*|[\s\S]*\}\}/gm),F=o(/<%[\s\S]*|[\s\S]*%>/gm),W=o(/^data-[\-\w.\u00B7-\uFFFF]/),B=o(/^aria-[\-\w]+$/),N=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=o(/^(?:\w+script|data):/i),U=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var Y=function(){return"undefined"==typeof window?null:window},$=function(e,t){if("object"!==(void 0===e?"undefined":V(e))||"function"!=typeof e.createPolicy)return null;var i=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(i=t.currentScript.getAttribute("data-tt-policy-suffix"));var n="dompurify"+(i?"#"+i:"");try{return e.createPolicy(n,{createHTML:function(e){return e}})}catch(s){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y(),i=function(t){return e(t)};if(i.version="2.3.4",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;var n=t.document,s=t.document,o=t.DocumentFragment,a=t.HTMLTemplateElement,c=t.Node,l=t.Element,u=t.NodeFilter,d=t.NamedNodeMap,S=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,z=t.HTMLFormElement,Z=t.DOMParser,K=t.trustedTypes,q=l.prototype,J=A(q,"cloneNode"),Q=A(q,"nextSibling"),ee=A(q,"childNodes"),te=A(q,"parentNode");if("function"==typeof a){var ie=s.createElement("template");ie.content&&ie.content.ownerDocument&&(s=ie.content.ownerDocument)}var ne=$(K,n),se=ne&&Me?ne.createHTML(""):"",re=s,oe=re.implementation,ae=re.createNodeIterator,ce=re.createDocumentFragment,le=re.getElementsByTagName,ue=n.importNode,de={};try{de=O(s).documentMode?s.documentMode:{}}catch(yt){}var he={};i.isSupported="function"==typeof te&&oe&&void 0!==oe.createHTMLDocument&&9!==de;var pe=X,be=F,fe=W,me=B,ge=G,ve=U,Ce=N,Ee=null,we=y({},[].concat(H(k),H(T),H(D),H(_),H(L))),Se=null,ye=y({},[].concat(H(x),H(P),H(j),H(M))),Oe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ae=null,ke=null,Te=!0,De=!0,Ie=!1,_e=!1,Re=!1,Le=!1,xe=!1,Pe=!1,je=!1,Me=!1,Xe=!0,Fe=!0,We=!1,Be={},Ne=null,Ge=y({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ue=null,Ve=y({},["audio","video","img","source","image","track"]),He=null,Ye=y({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$e="http://www.w3.org/1998/Math/MathML",ze="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",Ke=Ze,qe=!1,Je=void 0,Qe=["application/xhtml+xml","text/html"],et="text/html",tt=void 0,it=null,nt=s.createElement("form"),st=function(e){return e instanceof RegExp||e instanceof Function},rt=function(e){it&&it===e||(e&&"object"===(void 0===e?"undefined":V(e))||(e={}),e=O(e),Ee="ALLOWED_TAGS"in e?y({},e.ALLOWED_TAGS):we,Se="ALLOWED_ATTR"in e?y({},e.ALLOWED_ATTR):ye,He="ADD_URI_SAFE_ATTR"in e?y(O(Ye),e.ADD_URI_SAFE_ATTR):Ye,Ue="ADD_DATA_URI_TAGS"in e?y(O(Ve),e.ADD_DATA_URI_TAGS):Ve,Ne="FORBID_CONTENTS"in e?y({},e.FORBID_CONTENTS):Ge,Ae="FORBID_TAGS"in e?y({},e.FORBID_TAGS):{},ke="FORBID_ATTR"in e?y({},e.FORBID_ATTR):{},Be="USE_PROFILES"in e&&e.USE_PROFILES,Te=!1!==e.ALLOW_ARIA_ATTR,De=!1!==e.ALLOW_DATA_ATTR,Ie=e.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=e.SAFE_FOR_TEMPLATES||!1,Re=e.WHOLE_DOCUMENT||!1,Pe=e.RETURN_DOM||!1,je=e.RETURN_DOM_FRAGMENT||!1,Me=e.RETURN_TRUSTED_TYPE||!1,xe=e.FORCE_BODY||!1,Xe=!1!==e.SANITIZE_DOM,Fe=!1!==e.KEEP_CONTENT,We=e.IN_PLACE||!1,Ce=e.ALLOWED_URI_REGEXP||Ce,Ke=e.NAMESPACE||Ze,e.CUSTOM_ELEMENT_HANDLING&&st(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Oe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&st(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Oe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Oe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Je=Je=-1===Qe.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Je?function(e){return e}:f,_e&&(De=!1),je&&(Pe=!0),Be&&(Ee=y({},[].concat(H(L))),Se=[],!0===Be.html&&(y(Ee,k),y(Se,x)),!0===Be.svg&&(y(Ee,T),y(Se,P),y(Se,M)),!0===Be.svgFilters&&(y(Ee,D),y(Se,P),y(Se,M)),!0===Be.mathMl&&(y(Ee,_),y(Se,j),y(Se,M))),e.ADD_TAGS&&(Ee===we&&(Ee=O(Ee)),y(Ee,e.ADD_TAGS)),e.ADD_ATTR&&(Se===ye&&(Se=O(Se)),y(Se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&y(He,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Ne===Ge&&(Ne=O(Ne)),y(Ne,e.FORBID_CONTENTS)),Fe&&(Ee["#text"]=!0),Re&&y(Ee,["html","head","body"]),Ee.table&&(y(Ee,["tbody"]),delete Ae.tbody),r&&r(e),it=e)},ot=y({},["mi","mo","mn","ms","mtext"]),at=y({},["foreignobject","desc","title","annotation-xml"]),ct=y({},T);y(ct,D),y(ct,I);var lt=y({},_);y(lt,R);var ut=function(e){var t=te(e);t&&t.tagName||(t={namespaceURI:Ze,tagName:"template"});var i=f(e.tagName),n=f(t.tagName);if(e.namespaceURI===ze)return t.namespaceURI===Ze?"svg"===i:t.namespaceURI===$e?"svg"===i&&("annotation-xml"===n||ot[n]):Boolean(ct[i]);if(e.namespaceURI===$e)return t.namespaceURI===Ze?"math"===i:t.namespaceURI===ze?"math"===i&&at[n]:Boolean(lt[i]);if(e.namespaceURI===Ze){if(t.namespaceURI===ze&&!at[n])return!1;if(t.namespaceURI===$e&&!ot[n])return!1;var s=y({},["title","style","font","a","script"]);return!lt[i]&&(s[i]||!ct[i])}return!1},dt=function(e){b(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(yt){try{e.outerHTML=se}catch(yt){e.remove()}}},ht=function(e,t){try{b(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(yt){b(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Se[e])if(Pe||je)try{dt(t)}catch(yt){}else try{t.setAttribute(e,"")}catch(yt){}},pt=function(e){var t=void 0,i=void 0;if(xe)e="<remove></remove>"+e;else{var n=m(e,/^[\r\n\t ]+/);i=n&&n[0]}"application/xhtml+xml"===Je&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var r=ne?ne.createHTML(e):e;if(Ke===Ze)try{t=(new Z).parseFromString(r,Je)}catch(yt){}if(!t||!t.documentElement){t=oe.createDocument(Ke,"template",null);try{t.documentElement.innerHTML=qe?"":r}catch(yt){}}var o=t.body||t.documentElement;return e&&i&&o.insertBefore(s.createTextNode(i),o.childNodes[0]||null),Ke===Ze?le.call(t,Re?"html":"body")[0]:Re?t.documentElement:o},bt=function(e){return ae.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},ft=function(e){return e instanceof z&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof S)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},mt=function(e){return"object"===(void 0===c?"undefined":V(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":V(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},gt=function(e,t,n){he[e]&&h(he[e],(function(e){e.call(i,t,n,it)}))},vt=function(e){var t=void 0;if(gt("beforeSanitizeElements",e,null),ft(e))return dt(e),!0;if(m(e.nodeName,/[\u0080-\uFFFF]/))return dt(e),!0;var n=tt(e.nodeName);if(gt("uponSanitizeElement",e,{tagName:n,allowedTags:Ee}),!mt(e.firstElementChild)&&(!mt(e.content)||!mt(e.content.firstElementChild))&&E(/<[/\w]/g,e.innerHTML)&&E(/<[/\w]/g,e.textContent))return dt(e),!0;if("select"===n&&E(/<template/i,e.innerHTML))return dt(e),!0;if(!Ee[n]||Ae[n]){if(Fe&&!Ne[n]){var s=te(e)||e.parentNode,r=ee(e)||e.childNodes;if(r&&s)for(var o=r.length-1;o>=0;--o)s.insertBefore(J(r[o],!0),Q(e))}if(!Ae[n]&&Et(n)){if(Oe.tagNameCheck instanceof RegExp&&E(Oe.tagNameCheck,n))return!1;if(Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(n))return!1}return dt(e),!0}return e instanceof l&&!ut(e)?(dt(e),!0):"noscript"!==n&&"noembed"!==n||!E(/<\/no(script|embed)/i,e.innerHTML)?(_e&&3===e.nodeType&&(t=g(t=e.textContent,pe," "),t=g(t,be," "),e.textContent!==t&&(b(i.removed,{element:e.cloneNode()}),e.textContent=t)),gt("afterSanitizeElements",e,null),!1):(dt(e),!0)},Ct=function(e,t,i){if(Xe&&("id"===t||"name"===t)&&(i in s||i in nt))return!1;if(De&&!ke[t]&&E(fe,t));else if(Te&&E(me,t));else if(!Se[t]||ke[t]){if(!(Et(e)&&(Oe.tagNameCheck instanceof RegExp&&E(Oe.tagNameCheck,e)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(e))&&(Oe.attributeNameCheck instanceof RegExp&&E(Oe.attributeNameCheck,t)||Oe.attributeNameCheck instanceof Function&&Oe.attributeNameCheck(t))||"is"===t&&Oe.allowCustomizedBuiltInElements&&(Oe.tagNameCheck instanceof RegExp&&E(Oe.tagNameCheck,i)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(i))))return!1}else if(He[t]);else if(E(Ce,g(i,ve,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(i,"data:")||!Ue[e])if(Ie&&!E(ge,g(i,ve,"")));else if(i)return!1;return!0},Et=function(e){return e.indexOf("-")>0},wt=function(e){var t=void 0,n=void 0,s=void 0,r=void 0;gt("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};for(r=o.length;r--;){var c=(t=o[r]).name,l=t.namespaceURI;if(n=C(t.value),s=tt(c),a.attrName=s,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,gt("uponSanitizeAttribute",e,a),n=a.attrValue,!a.forceKeepAttr&&(ht(c,e),a.keepAttr))if(E(/\/>/i,n))ht(c,e);else{_e&&(n=g(n,pe," "),n=g(n,be," "));var u=tt(e.nodeName);if(Ct(u,s,n))try{l?e.setAttributeNS(l,c,n):e.setAttribute(c,n),p(i.removed)}catch(yt){}}}gt("afterSanitizeAttributes",e,null)}},St=function e(t){var i=void 0,n=bt(t);for(gt("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)gt("uponSanitizeShadowNode",i,null),vt(i)||(i.content instanceof o&&e(i.content),wt(i));gt("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e,s){var r=void 0,a=void 0,l=void 0,u=void 0,d=void 0;if((qe=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!mt(e)){if("function"!=typeof e.toString)throw w("toString is not a function");if("string"!=typeof(e=e.toString()))throw w("dirty is not a string, aborting")}if(!i.isSupported){if("object"===V(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(mt(e))return t.toStaticHTML(e.outerHTML)}return e}if(Le||rt(s),i.removed=[],"string"==typeof e&&(We=!1),We);else if(e instanceof c)1===(a=(r=pt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!Pe&&!_e&&!Re&&-1===e.indexOf("<"))return ne&&Me?ne.createHTML(e):e;if(!(r=pt(e)))return Pe?null:se}r&&xe&&dt(r.firstChild);for(var h=bt(We?e:r);l=h.nextNode();)3===l.nodeType&&l===u||vt(l)||(l.content instanceof o&&St(l.content),wt(l),u=l);if(u=null,We)return e;if(Pe){if(je)for(d=ce.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return Se.shadowroot&&(d=ue.call(n,d,!0)),d}var p=Re?r.outerHTML:r.innerHTML;return _e&&(p=g(p,pe," "),p=g(p,be," ")),ne&&Me?ne.createHTML(p):p},i.setConfig=function(e){rt(e),Le=!0},i.clearConfig=function(){it=null,Le=!1},i.isValidAttribute=function(e,t,i){it||rt({});var n=tt(e),s=tt(t);return Ct(n,s,i)},i.addHook=function(e,t){"function"==typeof t&&(he[e]=he[e]||[],b(he[e],t))},i.removeHook=function(e){he[e]&&p(he[e])},i.removeHooks=function(e){he[e]&&(he[e]=[])},i.removeAllHooks=function(){he={}},i}()}()},wkZx:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("f0Wu");function s(e){return e.slice(1).reduce((e,t)=>n.duration(t).add(e),n.duration(e[0]))}},wlsK:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("MO+k"),s=i("wd/R"),r=i("Y4HG"),o=i("xoOP"),a=i("Hf8F"),c=i("YnOA"),l=i("fXoL"),u=i("sYmb"),d=i("LPYB");let h=(()=>{class e{constructor(e){this.translate=e,this.updateDataOnChartChange=!1,this.doughnutChartType="doughnut",this.doughnutOptions={elements:{},segmentShowStroke:!1,responsive:!0,aspectRatio:1,legend:{display:!1},onHover:(e,t)=>{e.target.style.cursor=t[0]?"pointer":"default"},tooltips:{enabled:!1,custom:e=>{const t=document.getElementById("chartjs-tooltip-doughnut");t&&t.parentNode.removeChild(t);let i=0;e.dataPoints&&e.dataPoints.length>0&&(i=e.dataPoints[0].index);const n=this.translate.instant(this.doughnutChart[i].label),r=this.doughnutChart[i].clientName,a=Object(c.a)(Object(s.duration)(this.doughnutChart[i].duration),this.format),l=this.doughnutChart[i].percentage,u=(this.doughnutChart[i].earned/100).toLocaleString()+" "+this.currency,d=this.doughnutChart[i].color||this.doughnutChart[i].backgroundColor;let h=document.getElementById("chartjs-tooltip-doughnut");if(!h&&(h=Object(o.g)("div","doughnut-tooltip"),h.id="chartjs-tooltip-doughnut",!this.noTooltip)){const e=this.createTooltip({label:n,itemDuration:a,percentage:l,earned:u,color:d,clientName:r});h.appendChild(e),document.body.appendChild(h)}if(0===e.opacity)return h.style.opacity="0",h.style.width="0",h.style.height="0",h.style.position="absolute",void(h.style.top="0");h.classList.remove("above","below","no-transform"),h.classList.add(e.yAlign?e.yAlign:"no-transform");const p=document.getElementsByClassName("dashboard__doughnut-chart__canvas")[0].getBoundingClientRect();let b=0;this.tooltipToLeft&&(b=h.offsetWidth),h.style.opacity="1",h.style.zIndex="101",h.style.position="absolute",h.style.left=p.left-b+window.pageXOffset+e.caretX+"px",h.style.top=p.top+window.pageYOffset+e.caretY+"px",h.style.fontFamily=e._bodyFontFamily,h.style.fontSize=e.bodyFontSize+"px",h.style.fontStyle=e._bodyFontStyle,h.style.padding=e.yPadding+"px "+e.xPadding+"px",h.style.pointerEvents="none"}}},this.plugin={afterDatasetsDraw:e=>{"doughnut"==e.config.type&&(this.chart=e),Object(r.a)(e,this.format,this.totalTime,this.asString)}}}set doughnutChart(e){e&&(this._doughnutChart=e,this.isInitialized&&this.reinitData())}get doughnutChart(){return this._doughnutChart}createTooltip({label:e,itemDuration:t,earned:i,percentage:n,color:s,clientName:r}){const a=Object(o.g)("div","chart-tooltip-wrapper"),c=Object(o.g)("span","chart-tooltip-long-text");if(!this.isBillabilityType){const e=Object(o.g)("i","chart-tooltip-circle","background: "+s);c.appendChild(e)}const l=Object(o.g)("span");if(l.innerText=e,r&&(l.innerText+=" - "+r),c.appendChild(l),a.appendChild(c),!this.hideDuration){const e=Object(o.g)("span","doughnut-tooltip-duration");e.innerText=t,a.appendChild(e)}if(this.isBillabilityType){if(this.canSeeRates){const e=Object(o.g)("span","chart-tooltip-gray");e.innerText=i,a.appendChild(e)}}else{const e=Object(o.g)("span","chart-tooltip-gray"),t=(""+n).replace(/%/gi,"");e.innerText=t+"%",a.appendChild(e)}return a}chartClicked(e){}chartHovered(e){}ngOnInit(){this.reinitData(),this.isInitialized=!0,n.plugins.register(this.plugin)}ngOnChanges(){this.chart&&(this.chart.config.data.labels=this.doughnutChartLabels,this.chart.config.data.datasets[0].backgroundColor=this.doughnutChartColors[0].backgroundColor,this.chart.config.data.datasets[0].hoverBackgroundColor=this.doughnutChartColors[0].hoverBackgroundColor,this.chart.update())}ngOnDestroy(){n.plugins.unregister(this.plugin)}reinitData(){this.updateDataOnChartChange&&(this.doughnutChartData=this.doughnutChart.map(e=>+(""+e.percentage).replace(/%/gi,"")),this.doughnutChartColors=[{backgroundColor:this.doughnutChart.map(e=>e.backgroundColor||e.color)}],this.doughnutChartLabels=this.doughnutChart.map(e=>e.label))}calculatePercentage(e){const t=(new a.a(e).asSeconds()/new a.a(this.totalTime).asSeconds()*100).toFixed(2);return Number(t)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(u.f))},e.\u0275cmp=l.Lb({type:e,selectors:[["doughnut-chart"]],inputs:{doughnutChartLabels:"doughnutChartLabels",doughnutChartData:"doughnutChartData",doughnutChartColors:"doughnutChartColors",doughnutChart:"doughnutChart",updateDataOnChartChange:"updateDataOnChartChange",currency:"currency",isBillabilityType:"isBillabilityType",tooltipToLeft:"tooltipToLeft",canSeeRates:"canSeeRates",hideDuration:"hideDuration",noTooltip:"noTooltip",format:"format",totalTime:"totalTime",asString:"asString"},features:[l.Ab],decls:2,vars:5,consts:[["baseChart","","aspectRatio","1",1,"dashboard__doughnut-chart__canvas",2,"max-width","300px","margin","0 auto",3,"data","labels","chartType","options","colors","chartHover","chartClick"]],template:function(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"canvas",0),l.jc("chartHover",(function(e){return t.chartHovered(e)}))("chartClick",(function(e){return t.chartClicked(e)})),l.Wb(),l.Wb()),2&e&&(l.Cb(1),l.wc("data",t.doughnutChartData)("labels",t.doughnutChartLabels)("chartType",t.doughnutChartType)("options",t.doughnutOptions)("colors",t.doughnutChartColors))},directives:[d.a],encapsulation:2}),e})()},wxL3:function(e,t,i){"use strict";i.d(t,"a",(function(){return ae}));var n=i("5+WD"),s=i("lvCY"),r=i("ydbL"),o=i("4olG"),a=i("NHP+"),c=i("1G5W"),l=i("lp//"),u=i("Y9WU"),d=i("fXoL"),h=i("1kSV"),p=i("ofXK"),b=i("FsCY"),f=i("tyNb"),m=i("fANO"),g=i("7EHt"),v=i("VYrk"),C=i("xoOP"),E=i("sYmb"),w=i("3Pt+"),S=i("JO38");function y(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",2),d.Xb(2,"label"),d.Zc(3),d.oc(4,"translate"),d.Wb(),d.Xb(5,"input",14),d.jc("change",(function(){return d.Oc(e),d.nc().refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc().customField.placeholder=t})),d.Wb(),d.Wb(),d.Xb(6,"div",2),d.Xb(7,"div",15),d.Xb(8,"input",16),d.jc("ngModelChange",(function(t){return d.Oc(e),d.nc().customField.workspaceDefaultValue=t}))("change",(function(){return d.Oc(e),d.nc().refreshPreview()})),d.Wb(),d.Xb(9,"label",11),d.Zc(10),d.oc(11,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc();d.Cb(3),d.ad(d.pc(4,7,"GLOBAL.LABEL_TEXT")),d.Cb(2),d.wc("ngModel",e.customField.placeholder),d.Cb(3),d.wc("id","default"+e.customField.id)("name","default"+e.customField.name)("ngModel",e.customField.workspaceDefaultValue),d.Cb(1),d.wc("for","default"+e.customField.id),d.Cb(1),d.ad(d.pc(11,9,"SHARED_MODULES.CUSTOM_FIELD.LABEL_DEFAULT_VALUE_INFO"))}}function O(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",2),d.Xb(1,"div",20),d.Xb(2,"input",21),d.jc("change",(function(){return d.Oc(e),d.nc(3).singleOptionChanged()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(3).customField.workspaceDefaultValue=t})),d.Wb(),d.Xb(3,"label",11),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(3);d.Cb(2),d.wc("id","defaultOption0"+e.customField.name)("value",null)("ngModel",e.customField.workspaceDefaultValue),d.Cb(1),d.wc("for","defaultOption0"+e.customField.name),d.Cb(1),d.ad(d.pc(5,5,"GLOBAL.NONE_LABEL"))}}function A(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",28),d.Xb(1,"div",20),d.Xb(2,"input",29),d.jc("change",(function(){return d.Oc(e),d.nc(4).singleOptionChanged()}))("ngModelChange",(function(){return d.Oc(e),d.nc(4).checklistChanged()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(4).customField.workspaceDefaultValue=t})),d.Wb(),d.Xb(3,"label",11),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(),t=e.index,i=e.$implicit,n=d.nc(3);d.Cb(2),d.wc("id","defaultOption1"+t+n.customField.name)("value",i.title)("ngModel",n.customField.workspaceDefaultValue),d.Cb(1),d.wc("for","defaultOption1"+t+n.customField.name),d.Cb(1),d.ad(d.pc(5,5,"SHARED_MODULES.CUSTOM_FIELD.ON_LABEL"))}}function k(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",28),d.Xb(1,"div",30),d.Xb(2,"input",31),d.jc("ngModelChange",(function(t){return d.Oc(e),d.nc().$implicit.selected=t}))("ngModelChange",(function(){return d.Oc(e),d.nc(4).checklistChanged()}))("change",(function(){return d.Oc(e),d.nc(4).refreshPreview()})),d.Wb(),d.Xb(3,"label",11),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(),t=e.$implicit,i=e.index,n=d.nc(3);d.Cb(2),d.wc("ngModel",t.selected)("id","defaultOption"+i+n.customField.name)("name","checkbox"+i),d.Cb(1),d.wc("for","defaultOption"+i+n.customField.name),d.Cb(1),d.ad(d.pc(5,5,"SHARED_MODULES.CUSTOM_FIELD.ON_LABEL"))}}function T(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",2),d.Xb(1,"div",22),d.Xc(2,A,6,7,"div",23),d.Xc(3,k,6,7,"div",23),d.Xb(4,"input",24),d.jc("ngModelChange",(function(i){return d.Oc(e),t.$implicit.title=i}))("change",(function(){return d.Oc(e),d.nc(3).refreshPreview()}))("ngModelChange",(function(){return d.Oc(e),d.nc(3).allowedValuesChanged()})),d.Wb(),d.Xb(5,"div",25),d.Xb(6,"button",26),d.jc("click",(function(){d.Oc(e);const i=t.$implicit;return d.nc(3).removeOption(i)})),d.Sb(7,"img",27),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=t.$implicit,i=t.index,n=d.nc(3);d.Cb(2),d.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_SINGLE.value),d.Cb(1),d.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_MULTIPLE.value),d.Cb(1),d.wc("name","option"+i)("ngModel",e.title)}}function D(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",2),d.Xb(2,"label"),d.Zc(3),d.oc(4,"translate"),d.Wb(),d.Xb(5,"input",14),d.jc("change",(function(){return d.Oc(e),d.nc(2).refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(2).customField.placeholder=t})),d.Wb(),d.Wb(),d.Xb(6,"div",2),d.Xb(7,"label"),d.Zc(8),d.oc(9,"translate"),d.Wb(),d.Xc(10,O,6,7,"div",17),d.Xc(11,T,8,4,"div",18),d.Wb(),d.Xb(12,"div",2),d.Xb(13,"button",19),d.jc("click",(function(){return d.Oc(e),d.nc(2).addAllowedValue()})),d.Zc(14),d.oc(15,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(2);d.Cb(3),d.ad(d.pc(4,6,"SHARED_MODULES.CUSTOM_FIELD.ENTER_TEXT_LABEL")),d.Cb(2),d.wc("ngModel",e.customField.placeholder),d.Cb(3),d.ad(d.pc(9,8,"SHARED_MODULES.CUSTOM_FIELD.DROPDOWN_DEFAULT_VALUE_INFO")),d.Cb(2),d.wc("ngIf",e.customField.type===e.customFieldType.DROPDOWN_SINGLE.value),d.Cb(1),d.wc("ngForOf",e.customField.allowedValuesFull),d.Cb(3),d.ad(d.pc(15,10,"SHARED_MODULES.CUSTOM_FIELD.ADD_OPTION_LABEL"))}}function I(e,t){if(1&e&&d.Xc(0,D,16,12,"div",6),2&e){const e=d.nc(),t=d.Lc(20);d.wc("ngIf",e.customField.type===e.customFieldType.DROPDOWN_MULTIPLE.value||e.customField.type===e.customFieldType.DROPDOWN_SINGLE.value)("ngIfElse",t)}}function _(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",2),d.Xb(1,"label"),d.Zc(2),d.oc(3,"translate"),d.Wb(),d.Xb(4,"input",14),d.jc("change",(function(){return d.Oc(e),d.nc().refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc().customField.placeholder=t})),d.Wb(),d.Wb(),d.Xb(5,"div",2),d.Xb(6,"label"),d.Zc(7),d.oc(8,"translate"),d.Wb(),d.Xb(9,"input",32),d.jc("change",(function(){return d.Oc(e),d.nc().refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc().customField.workspaceDefaultValue=t})),d.oc(10,"translate"),d.Wb(),d.Wb()}if(2&e){const e=d.nc();d.Cb(2),d.ad(d.pc(3,6,"SHARED_MODULES.CUSTOM_FIELD.PLACEHOLDER_LABEL")),d.Cb(2),d.wc("ngModel",e.customField.placeholder),d.Cb(3),d.ad(d.pc(8,8,"SHARED_MODULES.CUSTOM_FIELD.VALUE_LABEL")),d.Cb(2),d.wc("type",e.customFieldType[e.customField.type].label.toLowerCase())("placeholder",d.pc(10,10,"INVOICES.SHARED.NONE"))("ngModel",e.customField.workspaceDefaultValue)}}function R(e,t){if(1&e&&(d.Xb(0,"div",33),d.Xb(1,"div",34),d.Xb(2,"div",35),d.Sb(3,"custom-field-value",36),d.Wb(),d.Wb(),d.Wb()),2&e){const e=d.nc();d.Cb(3),d.wc("fromEdit",!0)("customField",e.customFieldValue)}}let L=(()=>{class e{constructor(e,t){this.translate=e,this.cd=t,this.customFieldType=m.a,this.optionCounter=1,this.customFieldValue=new v.a}set customField(e){this._customField=e,this._customField&&this.initialize()}get customField(){return this._customField}ngOnInit(){this.initialize()}initialize(){this.customField&&this.customField.allowedValues&&(this.optionCounter=this.customField.allowedValues.length+1),this.customFieldValue.customField=Object(C.f)(this.customField),this.getCheckList(),this.refreshPreview()}choseType(e){this.customField.type=e,this.customField.placeholder=this.customField.placeholder?this.customField.placeholder:this.createPlaceHolder(e),this.refreshPreview()}addAllowedValue(){const e=this.translate.instant("SHARED_MODULES.CUSTOM_FIELD.OPTION_PART_LABEL");this.customField.allowedValues.push(e+" "+this.optionCounter++),this.getCheckList(),this.refreshPreview()}getCheckList(){this.customField.allowedValuesFull=this.customField.allowedValues&&this.customField.allowedValues.map(e=>({title:e,selected:this.customField.workspaceDefaultValue&&this.customField.workspaceDefaultValue.indexOf(e)>-1})),this.cd.detectChanges()}checklistChanged(){this.customField.workspaceDefaultValue=this.customField.allowedValuesFull.filter(e=>e.selected).map(e=>e.title),this.customField.type===m.b.DROPDOWN_SINGLE&&(this.customField.workspaceDefaultValue=this.customField.workspaceDefaultValue.length?this.customField.workspaceDefaultValue[0]:null),this.refreshPreview()}allowedValuesChanged(){this.customField.allowedValues=this.customField.allowedValuesFull.map(e=>e.title),this.checklistChanged()}removeOption(e){this.customField.allowedValues.splice(this.customField.allowedValues.indexOf(e.title),1),this.getCheckList(),this.checklistChanged()}refreshPreview(){this.customField.placeholder=this.createPlaceHolder(this.customField.type),this.customFieldValue.customField=Object(C.f)(this.customField),this.customFieldValue=Object(C.f)(this.customFieldValue),this.customFieldValue.value=this.customField.workspaceDefaultValue?this.customField.workspaceDefaultValue:"",this.cd.detectChanges()}createPlaceHolder(e){if(null==e||""===this.customFieldType[e].placeholder)return this.customField.name||"";const t=this.translate.instant(this.customFieldType[e].placeholder);return this.customField.name?t+" "+this.customField.name+"...":t+"..."}singleOptionChanged(){this.customField.workspaceDefaultValue&&(this.customField.allowedValuesFull=this.customField.allowedValuesFull.map(e=>(e.selected=e.title===this.customField.workspaceDefaultValue,e))),this.refreshPreview()}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(E.f),d.Rb(d.h))},e.\u0275cmp=d.Lb({type:e,selectors:[["custom-field"]],inputs:{customField:"customField",projectId:"projectId"},decls:41,vars:33,consts:[[1,"cl-row"],[1,"cl-col-lg-6"],[1,"cl-form-group"],[1,"cl-text-danger","cl-ml-1"],["type","text","name","name",1,"cl-form-control","cl-form-control-sm",3,"ngModel","change","ngModelChange"],["type","text","name","description",1,"cl-form-control","cl-form-control-sm",3,"ngModel","change","ngModelChange"],[4,"ngIf","ngIfElse"],["dropdown",""],["regular",""],[1,"cl-custom-control","cl-custom-radio"],["type","radio",1,"cl-custom-control-input",3,"id","name","value","ngModel","change","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-d-flex","cl-justify-content-between"],["class","cl-cf-preview",4,"ngIf"],["type","text","name","placeholder",1,"cl-form-control","cl-form-control-sm",3,"ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox",1,"cl-custom-control-input",3,"id","name","ngModel","ngModelChange","change"],["class","cl-form-group",4,"ngIf"],["class","cl-form-group",4,"ngFor","ngForOf"],["type","button",1,"cl-btn","cl-btn-sm","cl-btn-block","cl-btn-outline-light",3,"click"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","name","default-option",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-input-group","cl-input-group-sm"],["class","cl-input-group-prepend cl-d-flex cl-align-items-center",4,"ngIf"],["type","text",1,"cl-form-control","cl-form-control-sm",3,"name","ngModel","ngModelChange","change"],[1,"cl-input-group-append"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-d-flex","cl-align-items-center",3,"click"],["src","assets/ui-icons/cross.svg"],[1,"cl-input-group-prepend","cl-d-flex","cl-align-items-center"],["type","radio","name","defaultOption1",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-checkbox","cl-custom-control-inline"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","name","ngModelChange","change"],["name","value",1,"cl-form-control","cl-form-control-sm",3,"type","placeholder","ngModel","change","ngModelChange"],[1,"cl-cf-preview"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[3,"fromEdit","customField"]],template:function(e,t){if(1&e&&(d.Xb(0,"form"),d.Xb(1,"div",0),d.Xb(2,"div",1),d.Xb(3,"div",2),d.Xb(4,"label"),d.Zc(5),d.oc(6,"translate"),d.Xb(7,"span",3),d.Zc(8,"*"),d.Wb(),d.Wb(),d.Xb(9,"input",4),d.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.name=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(10,"div",1),d.Xb(11,"div",2),d.Xb(12,"label"),d.Zc(13),d.oc(14,"translate"),d.Wb(),d.Xb(15,"input",5),d.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.description=e})),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xc(16,y,12,11,"div",6),d.Xc(17,I,1,2,"ng-template",null,7,d.Yc),d.Xc(19,_,11,12,"ng-template",null,8,d.Yc),d.Xb(21,"div",2),d.Xb(22,"label"),d.Zc(23),d.oc(24,"translate"),d.Wb(),d.Xb(25,"div",9),d.Xb(26,"input",10),d.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.onlyAdminCanEdit=e})),d.Wb(),d.Xb(27,"label",11),d.Zc(28),d.oc(29,"translate"),d.Wb(),d.Wb(),d.Xb(30,"div",9),d.Xb(31,"input",10),d.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.onlyAdminCanEdit=e})),d.Wb(),d.Xb(32,"label",11),d.Zc(33),d.oc(34,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Sb(35,"hr"),d.Xb(36,"div",12),d.Xb(37,"label"),d.Zc(38),d.oc(39,"translate"),d.Wb(),d.Wb(),d.Xc(40,R,4,2,"div",13),d.Wb()),2&e){const e=d.Lc(18);d.Cb(5),d.ad(d.pc(6,21,"GLOBAL.NAME_LABEL")),d.Cb(4),d.wc("ngModel",t.customField.name),d.Cb(4),d.ad(d.pc(14,23,"GLOBAL.DESCRIPTION_LABEL")),d.Cb(2),d.wc("ngModel",t.customField.description),d.Cb(1),d.wc("ngIf",t.customField.type===t.customFieldType.CHECKBOX.value)("ngIfElse",e),d.Cb(7),d.ad(d.pc(24,25,"SHARED_MODULES.CUSTOM_FIELD.PERMISSION_TO_EDIT_LABEL")),d.Cb(3),d.wc("id","allowedit"+t.customField.name)("name","allowedit"+t.customField.name)("value",!0)("ngModel",t.customField.onlyAdminCanEdit),d.Cb(1),d.wc("for","allowedit"+t.customField.name),d.Cb(1),d.ad(d.pc(29,27,"GLOBAL.ADMINS_LABEL")),d.Cb(3),d.wc("id","allowedit2"+t.customField.name)("name","allowedit2"+t.customField.name)("value",!1)("ngModel",t.customField.onlyAdminCanEdit),d.Cb(1),d.wc("for","allowedit2"+t.customField.name),d.Cb(1),d.ad(d.pc(34,29,"GLOBAL.EVERYONE_LABEL")),d.Cb(5),d.ad(d.pc(39,31,"SHARED_MODULES.CUSTOM_FIELD.PREVIEW_LABEL")),d.Cb(2),d.wc("ngIf",t.customFieldValue)}},directives:[w.I,w.t,w.u,w.c,w.s,w.v,p.u,w.A,w.a,p.t,S.a],pipes:[E.e],encapsulation:2,changeDetection:0}),e})();var x=i("kojQ");const P=["matExpansionPanel"],j=function(e){return{name:e}};function M(e,t){if(1&e){const e=d.Yb();d.Xb(0,"delete-confirm-modal",18),d.jc("onDelete",(function(){d.Oc(e);const i=t.$implicit;return d.nc().delete(),i.close()}))("onClose",(function(){return t.$implicit.close()})),d.oc(1,"translate"),d.oc(2,"translate"),d.Xb(3,"p",19),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Xb(6,"p",19),d.Zc(7),d.oc(8,"translate"),d.Wb(),d.Wb()}if(2&e){const e=d.nc();d.wc("title",d.pc(1,4,"GLOBAL.DELETE_BTN"))("btnText",d.pc(2,6,"GLOBAL.DELETE_BTN")),d.Cb(4),d.bd(" ",d.qc(5,8,"SHARED_MODULES.CUSTOM_FIELD.DELETE_CUSTOM_FIELD_WITH_PARAMETER",d.Bc(14,j,e.customField.name))," "),d.Cb(3),d.bd(" ",d.qc(8,11,"SHARED_MODULES.CUSTOM_FIELD.DELETE_CUSTOM_FIELD_INFO_WITH_PARAMETER",d.Bc(16,j,e.customField.name))," ")}}let X=(()=>{class e{constructor(e,t,i){this.customFieldService=e,this.modal=t,this.cd=i,this.unsubscribe$=new a.a,this.customFieldDeleted=new d.n,this.allowedValues=[],this.inProgress=!1}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}toggle(){this.matExpansionPanel.expanded=!this.matExpansionPanel.expanded}save(){this.inProgress=!0,this.customFieldService.update(this.customField).pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.customField=new r.a(e),this.inProgress=!1,this.cd.detectChanges()},e=>{this.inProgress=!1,this.cd.detectChanges()})}openDeleteModal(e){this.modal.open(e,{centered:!0})}delete(){this.customFieldService.delete(this.customField.id).pipe(Object(c.a)(this.unsubscribe$)).subscribe(()=>{this.customFieldDeleted.emit(this.customField)})}getDefaultValue(){return this.customField.type===m.b.DROPDOWN_MULTIPLE?this.customField.workspaceDefaultValue?this.customField.workspaceDefaultValue.toString().replace("[","").replace("]",""):"":this.customField.type===m.b.CHECKBOX||this.customField.workspaceDefaultValue?this.customField.workspaceDefaultValue:""}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(l.a),d.Rb(h.q),d.Rb(d.h))},e.\u0275cmp=d.Lb({type:e,selectors:[["custom-field-edit"]],viewQuery:function(e,t){var i;1&e&&d.gd(P,!0),2&e&&d.Kc(i=d.kc())&&(t.matExpansionPanel=i.first)},inputs:{customField:"customField",projectId:"projectId"},outputs:{customFieldDeleted:"customFieldDeleted"},decls:28,vars:13,consts:[[1,"cl-card","cl-mb-0"],[3,"disabled"],["matExpansionPanel",""],[1,"cl-card-header","cl-bg-white","cl-px-2","cl-border-0"],[1,"cl-cut-text-wrapper","cl-pr-2"],[1,"cl-h3","cl-mb-0","cl-cut-text"],[1,"cl-h6","cl-mb-0","cl-lh-1","cl-cut-text"],[1,"cl-badge-same-entries-wrapper"],[1,"cl-badge","cl-badge-same-entries","cl-mr-0",3,"click"],["src","assets/ui-icons/chevron-down.svg"],[1,"cl-collapse","cl-border-top"],[1,"cl-card-body","cl-p-2"],[1,"cl-position-relative"],[3,"customField"],[1,"cl-d-flex","cl-justify-content-between","cl-align-items-center"],["type","submit",1,"cl-btn","cl-btn-sm","cl-btn-primary",3,"disabled","click"],[1,"cl-text-danger","cl-small","cl-mx-2",3,"click"],["deleteModal",""],[3,"title","btnText","onDelete","onClose"],[1,"cl-text-muted","cl-cut-text-wrap","cl-mb-0"]],template:function(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",0),d.Xb(1,"mat-expansion-panel",1,2),d.Xb(3,"mat-expansion-panel-header"),d.Xb(4,"div",3),d.Xb(5,"div",4),d.Xb(6,"div",5),d.Zc(7),d.Wb(),d.Xb(8,"div",6),d.Zc(9),d.oc(10,"translate"),d.Wb(),d.Wb(),d.Xb(11,"a",7),d.Xb(12,"span",8),d.jc("click",(function(){return t.toggle()})),d.Sb(13,"img",9),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(14,"div",10),d.Xb(15,"div",11),d.Xb(16,"div",12),d.Sb(17,"custom-field",13),d.Wb(),d.Sb(18,"hr"),d.Xb(19,"div",14),d.Xb(20,"button",15),d.jc("click",(function(){return t.save()})),d.Zc(21),d.oc(22,"translate"),d.Wb(),d.Xb(23,"a",16),d.jc("click",(function(){d.Oc(e);const i=d.Lc(27);return t.openDeleteModal(i)})),d.Zc(24),d.oc(25,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xc(26,M,9,18,"ng-template",null,17,d.Yc)}2&e&&(d.Cb(1),d.wc("disabled",!0),d.Cb(6),d.ad(t.customField.name),d.Cb(2),d.ad(d.pc(10,7,"SHARED_MODULES.CUSTOM_FIELD.DEFAULT_LABEL")+t.getDefaultValue()),d.Cb(8),d.wc("customField",t.customField),d.Cb(3),d.wc("disabled",t.inProgress),d.Cb(1),d.bd(" ",d.pc(22,9,"GLOBAL.SAVE_LABEL")," "),d.Cb(3),d.ad(d.pc(25,11,"GLOBAL.DELETE_BTN")))},directives:[g.b,g.c,L,x.a],pipes:[E.e],encapsulation:2,changeDetection:0}),e})();var F=i("Ymxs");function W(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",7),d.Xb(2,"label"),d.Zc(3),d.oc(4,"translate"),d.Wb(),d.Xb(5,"input",41),d.jc("change",(function(){return d.Oc(e),d.nc(2).refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(2).customField.placeholder=t})),d.Wb(),d.Wb(),d.Xb(6,"div",7),d.Xb(7,"div",42),d.Xb(8,"input",43),d.jc("ngModelChange",(function(t){return d.Oc(e),d.nc(2).customField.workspaceDefaultValue=t}))("change",(function(){return d.Oc(e),d.nc(2).refreshPreview()})),d.Wb(),d.Xb(9,"label",44),d.Zc(10),d.oc(11,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(2);d.Cb(3),d.ad(d.pc(4,4,"GLOBAL.LABEL_TEXT")),d.Cb(2),d.wc("ngModel",e.customField.placeholder),d.Cb(3),d.wc("ngModel",e.customField.workspaceDefaultValue),d.Cb(2),d.ad(d.pc(11,6,"SHARED_MODULES.CUSTOM_FIELD.LABEL_DEFAULT_VALUE_INFO"))}}function B(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",7),d.Xb(1,"div",48),d.Xb(2,"input",49),d.jc("change",(function(){return d.Oc(e),d.nc(4).singleOptionChanged()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(4).customField.workspaceDefaultValue=t})),d.Wb(),d.Xb(3,"label",32),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(4);d.Cb(2),d.wc("id","defaultOption0"+e.customField.name)("value",null)("ngModel",e.customField.workspaceDefaultValue),d.Cb(1),d.wc("for","defaultOption0"+e.customField.name),d.Cb(1),d.ad(d.pc(5,5,"GLOBAL.NONE_LABEL"))}}function N(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",56),d.Xb(1,"div",48),d.Xb(2,"input",57),d.jc("change",(function(){return d.Oc(e),d.nc(5).singleOptionChanged()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(5).customField.workspaceDefaultValue=t})),d.Wb(),d.Xb(3,"label",32),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(),t=e.index,i=e.$implicit,n=d.nc(4);d.Cb(2),d.wc("id","defaultOption1"+t+n.customField.name)("value",i.title)("ngModel",n.customField.workspaceDefaultValue),d.Cb(1),d.wc("for","defaultOption1"+t+n.customField.name),d.Cb(1),d.ad(d.pc(5,5,"SHARED_MODULES.CUSTOM_FIELD.ON_LABEL"))}}function G(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",56),d.Xb(1,"div",58),d.Xb(2,"input",59),d.jc("ngModelChange",(function(t){return d.Oc(e),d.nc().$implicit.selected=t}))("ngModelChange",(function(){return d.Oc(e),d.nc(5).checklistChanged()}))("change",(function(){return d.Oc(e),d.nc(5).refreshPreview()})),d.Wb(),d.Xb(3,"label",32),d.Zc(4),d.oc(5,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(),t=e.$implicit,i=e.index,n=d.nc(4);d.Cb(2),d.wc("ngModel",t.selected)("id","defaultOption"+i+n.customField.name)("name","checkbox"+i),d.Cb(1),d.wc("for","defaultOption"+i+n.customField.name),d.Cb(1),d.ad(d.pc(5,5,"SHARED_MODULES.CUSTOM_FIELD.ON_LABEL"))}}function U(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",7),d.Xb(1,"div",50),d.Xc(2,N,6,7,"div",51),d.Xc(3,G,6,7,"div",51),d.Xb(4,"input",52),d.jc("ngModelChange",(function(i){return d.Oc(e),t.$implicit.title=i}))("change",(function(){return d.Oc(e),d.nc(4).refreshPreview()}))("ngModelChange",(function(){return d.Oc(e),d.nc(4).allowedValuesChanged()})),d.Wb(),d.Xb(5,"div",53),d.Xb(6,"button",54),d.jc("click",(function(){d.Oc(e);const i=t.$implicit;return d.nc(4).removeOption(i)})),d.Sb(7,"img",55),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=t.$implicit,i=t.index,n=d.nc(4);d.Cb(2),d.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_SINGLE.value),d.Cb(1),d.wc("ngIf",n.customField.type===n.customFieldType.DROPDOWN_MULTIPLE.value),d.Cb(1),d.wc("name","option"+i)("ngModel",e.title)}}function V(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",7),d.Xb(2,"label"),d.Zc(3),d.oc(4,"translate"),d.Wb(),d.Xb(5,"input",41),d.jc("change",(function(){return d.Oc(e),d.nc(3).refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(3).customField.placeholder=t})),d.Wb(),d.Wb(),d.Xb(6,"div",7),d.Xb(7,"label"),d.Zc(8),d.oc(9,"translate"),d.Wb(),d.Xc(10,B,6,7,"div",45),d.Xc(11,U,8,4,"div",46),d.Wb(),d.Xb(12,"div",7),d.Xb(13,"button",47),d.jc("click",(function(){return d.Oc(e),d.nc(3).addAllowedValue()})),d.Zc(14),d.oc(15,"translate"),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.nc(3);d.Cb(3),d.ad(d.pc(4,6,"SHARED_MODULES.CUSTOM_FIELD.ENTER_TEXT_LABEL")),d.Cb(2),d.wc("ngModel",e.customField.placeholder),d.Cb(3),d.ad(d.pc(9,8,"SHARED_MODULES.CUSTOM_FIELD.DROPDOWN_DEFAULT_VALUE_INFO")),d.Cb(2),d.wc("ngIf",e.customField.type===e.customFieldType.DROPDOWN_SINGLE.value),d.Cb(1),d.wc("ngForOf",e.customField.allowedValuesFull),d.Cb(3),d.bd("",d.pc(15,10,"SHARED_MODULES.CUSTOM_FIELD.ADD_OPTION_LABEL")," ")}}function H(e,t){if(1&e&&d.Xc(0,V,16,12,"div",27),2&e){d.nc();const e=d.Lc(8),t=d.nc();d.wc("ngIf",t.customField.type===t.customFieldType.DROPDOWN_MULTIPLE.value||t.customField.type===t.customFieldType.DROPDOWN_SINGLE.value)("ngIfElse",e)}}function Y(e,t){if(1&e){const e=d.Yb();d.Xb(0,"a",62),d.jc("click",(function(){return d.Oc(e),d.nc(3).customField.workspaceDefaultValue=void 0})),d.Zc(1),d.oc(2,"translate"),d.Wb()}2&e&&(d.Cb(1),d.bd(" ",d.pc(2,1,"SHARED_MODULES.CUSTOM_FIELD.CLEAR_LABEL")," "))}function $(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",7),d.Xb(1,"label"),d.Zc(2),d.oc(3,"translate"),d.Wb(),d.Xb(4,"input",41),d.jc("change",(function(){return d.Oc(e),d.nc(2).refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(2).customField.placeholder=t})),d.Wb(),d.Wb(),d.Xb(5,"div",7),d.Xb(6,"label"),d.Zc(7),d.oc(8,"translate"),d.Wb(),d.Xb(9,"input",60),d.jc("change",(function(){return d.Oc(e),d.nc(2).refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc(2).customField.workspaceDefaultValue=t})),d.oc(10,"translate"),d.Wb(),d.Xc(11,Y,3,3,"a",61),d.Wb()}if(2&e){const e=d.nc(2);d.Cb(2),d.ad(d.pc(3,7,"SHARED_MODULES.CUSTOM_FIELD.PLACEHOLDER_LABEL")),d.Cb(2),d.wc("ngModel",e.customField.placeholder),d.Cb(3),d.ad(d.pc(8,9,"SHARED_MODULES.CUSTOM_FIELD.VALUE_LABEL")),d.Cb(2),d.wc("type",e.customFieldType[e.customField.type].label.toLowerCase())("placeholder",d.pc(10,11,"INVOICES.SHARED.NONE"))("ngModel",e.customField.workspaceDefaultValue),d.Cb(2),d.wc("ngIf",e.customField.type===e.customFieldType.NUMBER.value&&e.customField.workspaceDefaultValue)}}function z(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div"),d.Sb(1,"hr"),d.Xb(2,"div",26),d.Xb(3,"div",6),d.Xc(4,W,12,8,"div",27),d.Xc(5,H,1,2,"ng-template",null,28,d.Yc),d.Xc(7,$,12,13,"ng-template",null,29,d.Yc),d.Xb(9,"div",7),d.Xb(10,"label"),d.Zc(11),d.oc(12,"translate"),d.Wb(),d.Xb(13,"div",30),d.Xb(14,"input",31),d.jc("change",(function(){return d.Oc(e),d.nc().refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc().customField.onlyAdminCanEdit=t})),d.Wb(),d.Xb(15,"label",32),d.Zc(16),d.oc(17,"translate"),d.Wb(),d.Wb(),d.Xb(18,"div",30),d.Xb(19,"input",31),d.jc("change",(function(){return d.Oc(e),d.nc().refreshPreview()}))("ngModelChange",(function(t){return d.Oc(e),d.nc().customField.onlyAdminCanEdit=t})),d.Wb(),d.Xb(20,"label",32),d.Zc(21),d.oc(22,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(23,"div",33),d.Xb(24,"div",34),d.Xb(25,"div",35),d.Xb(26,"div",36),d.Xb(27,"label"),d.Zc(28),d.oc(29,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Xb(30,"div",37),d.Xb(31,"div",38),d.Xb(32,"div",39),d.Sb(33,"custom-field-value",40),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.Lc(6),t=d.nc();d.Cb(4),d.wc("ngIf",t.customField.type===t.customFieldType.CHECKBOX.value)("ngIfElse",e),d.Cb(7),d.ad(d.pc(12,17,"SHARED_MODULES.CUSTOM_FIELD.PERMISSION_TO_EDIT_LABEL")),d.Cb(3),d.wc("id","allowedit"+t.customField.name)("name","allowedit"+t.customField.name)("value",!0)("ngModel",t.customField.onlyAdminCanEdit),d.Cb(1),d.wc("for","allowedit"+t.customField.name),d.Cb(1),d.ad(d.pc(17,19,"GLOBAL.ADMINS_LABEL")),d.Cb(3),d.wc("id","customRadio2"+t.customField.name)("name","customRadio"+t.customField.name)("value",!1)("ngModel",t.customField.onlyAdminCanEdit),d.Cb(1),d.wc("for","customRadio2"+t.customField.name),d.Cb(1),d.ad(d.pc(22,21,"GLOBAL.EVERYONE_LABEL")),d.Cb(7),d.ad(d.pc(29,23,"SHARED_MODULES.CUSTOM_FIELD.PREVIEW_LABEL")),d.Cb(5),d.wc("customField",t.customFieldValue)}}let Z=(()=>{class e extends L{constructor(e,t,i){super(i,t),this.toaster=e,this.change=t,this.translateService=i,this.customFieldTypeEnum=m.b,this.customFieldType=m.a,this.optionCounter=1,this.created=new d.n,this.closeModal=new d.n}ngOnInit(){this.customField=new r.a,this.customField.onlyAdminCanEdit=!1,this.initialize()}create(){this.isValid()||this.showErrorToast(),this.customField.type===m.b.CHECKBOX&&(this.customField.workspaceDefaultValue=this.customField.workspaceDefaultValue||!1),this.isValid()&&this.created.emit(this.customField)}isValid(){return this.customField.name&&""!==this.customField.name&&!!this.customField.type&&this.customFieldType[this.customField.type]&&("dropdown"!==this.customFieldType[this.customField.type].fieldType||"dropdown"===this.customFieldType[this.customField.type].fieldType&&this.customField.allowedValues.length>0)}close(){this.closeModal.emit()}showErrorToast(){const e=this.translateService.instant("GLOBAL.FIELD_CREATE_ERROR");if((this.customField.type===this.customFieldTypeEnum.DROPDOWN_SINGLE||this.customField.type===this.customFieldTypeEnum.DROPDOWN_MULTIPLE)&&this.customField.allowedValues.length<1){const t=this.translateService.instant("SHARED_MODULES.CUSTOM_FIELD.ENTER_DROPDOWN_VALUES_MSG");this.toaster.pop("error",e,t)}else if(this.customField.name&&""!==this.customField.name){if(!this.customField.type){const t=this.translateService.instant("SHARED_MODULES.CUSTOM_FIELD.CHOOSE_TYPE_ERROR_MSG");this.toaster.pop("error",e,t)}}else{const t=this.translateService.instant("SHARED_MODULES.CUSTOM_FIELD.EMPTY_NAME_ERROR_MSG");this.toaster.pop("error",e,t)}}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(F.a),d.Rb(d.h),d.Rb(E.f))},e.\u0275cmp=d.Lb({type:e,selectors:[["custom-field-create"]],outputs:{created:"created",closeModal:"closeModal"},features:[d.zb],decls:86,vars:69,consts:[[1,"cl-modal-header"],[1,"cl-modal-title"],["type","button",1,"cl-close",3,"click"],["src","assets/ui-icons/close.svg"],[1,"cl-modal-body"],[1,"cl-row"],[1,"cl-col-lg-6"],[1,"cl-form-group"],[1,"cl-text-danger","cl-ml-1"],["type","text","name","name","ngbAutofocus","",1,"cl-form-control",3,"ngModel","change","ngModelChange"],[1,"cl-form-text","cl-text-gray-9"],["type","text","name","description",1,"cl-form-control",3,"ngModel","change","ngModelChange"],[1,"cl-col-12"],[1,"cl-col-6","cl-col-lg-2"],[1,"cl-btn","cl-btn-block","cl-text-capitalize",3,"click"],["src","assets/cf-icons/Text.svg",1,"cl-mt-3"],[1,"cl-small","cl-mt-1"],["src","assets/cf-icons/Number.svg",1,"cl-mt-3"],["src","assets/cf-icons/URL.svg",1,"cl-mt-3"],["src","assets/cf-icons/Switch.svg",1,"cl-mt-3"],["src","assets/cf-icons/Select.svg",1,"cl-mt-3"],["src","assets/cf-icons/Multi-select.svg",1,"cl-mt-3"],[4,"ngIf"],[1,"cl-modal-footer"],["data-dismiss","modal",3,"click"],["type","button","ngbAutofocus","",1,"cl-btn","cl-btn-primary",3,"click"],[1,"cl-row","cl-mt-3"],[4,"ngIf","ngIfElse"],["dropdown",""],["regular",""],[1,"cl-custom-control","cl-custom-radio"],["type","radio",1,"cl-custom-control-input",3,"id","name","value","ngModel","change","ngModelChange"],[1,"cl-custom-control-label",3,"for"],[1,"cl-col-lg-6","cl-order-first","cl-order-lg-last"],[1,"cl-form-group","cl-sticky-top","cl-mt-n2"],[1,"cl-pt-2"],[1,"cl-d-flex","cl-justify-content-between"],[1,"cl-cf-preview","cl-p-5"],[1,"cl-row","cl-align-items-center"],[1,"cl-col"],[3,"customField"],["type","text","name","placeholder",1,"cl-form-control",3,"ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-switch"],["type","checkbox","id","booleanvalue","name","booleanvalue",1,"cl-custom-control-input",3,"ngModel","ngModelChange","change"],["for","booleanvalue",1,"cl-custom-control-label"],["class","cl-form-group",4,"ngIf"],["class","cl-form-group",4,"ngFor","ngForOf"],["type","button",1,"cl-btn","cl-btn-sm","cl-btn-block","cl-btn-outline-light",3,"click"],[1,"cl-custom-control","cl-custom-radio","cl-custom-control-inline"],["type","radio","name","default-option",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-input-group","cl-input-group-sm"],["class","cl-input-group-prepend cl-d-flex cl-align-items-center",4,"ngIf"],["type","text",1,"cl-form-control",3,"name","ngModel","ngModelChange","change"],[1,"cl-input-group-append"],["type","button",1,"cl-btn","cl-btn-outline-light","cl-d-flex","cl-align-items-center",3,"click"],["src","assets/ui-icons/cross.svg"],[1,"cl-input-group-prepend","cl-d-flex","cl-align-items-center"],["type","radio","name","defaultOption1",1,"cl-custom-control-input",3,"id","value","ngModel","change","ngModelChange"],[1,"cl-custom-control","cl-custom-checkbox","cl-custom-control-inline"],["type","checkbox",1,"cl-custom-control-input",3,"ngModel","id","name","ngModelChange","change"],["name","value",1,"cl-form-control",3,"type","placeholder","ngModel","change","ngModelChange"],["class","cl-mt-3",3,"click",4,"ngIf"],[1,"cl-mt-3",3,"click"]],template:function(e,t){1&e&&(d.Xb(0,"div",0),d.Xb(1,"h1",1),d.Zc(2),d.oc(3,"translate"),d.Wb(),d.Xb(4,"button",2),d.jc("click",(function(){return t.close()})),d.Xb(5,"span"),d.Sb(6,"img",3),d.Wb(),d.Wb(),d.Wb(),d.Xb(7,"div",4),d.Xb(8,"div",5),d.Xb(9,"div",6),d.Xb(10,"div",7),d.Xb(11,"label"),d.Zc(12),d.oc(13,"translate"),d.Xb(14,"span",8),d.Zc(15,"*"),d.Wb(),d.Wb(),d.Xb(16,"input",9),d.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.name=e})),d.Wb(),d.Xb(17,"small",10),d.Zc(18),d.oc(19,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Xb(20,"div",6),d.Xb(21,"div",7),d.Xb(22,"label"),d.Zc(23),d.oc(24,"translate"),d.Wb(),d.Xb(25,"input",11),d.jc("change",(function(){return t.refreshPreview()}))("ngModelChange",(function(e){return t.customField.description=e})),d.Wb(),d.Xb(26,"small",10),d.Zc(27),d.oc(28,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(29,"div",5),d.Xb(30,"div",12),d.Xb(31,"label"),d.Zc(32),d.oc(33,"translate"),d.Xb(34,"span",8),d.Zc(35,"*"),d.Wb(),d.Wb(),d.Wb(),d.Xb(36,"div",13),d.Xb(37,"div",7),d.Xb(38,"div",14),d.jc("click",(function(){return t.choseType(t.customFieldType.TXT.value)})),d.Sb(39,"img",15),d.Xb(40,"div",16),d.Zc(41),d.oc(42,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(43,"div",13),d.Xb(44,"div",7),d.Xb(45,"div",14),d.jc("click",(function(){return t.choseType(t.customFieldType.NUMBER.value)})),d.Sb(46,"img",17),d.Xb(47,"div",16),d.Zc(48),d.oc(49,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(50,"div",13),d.Xb(51,"div",7),d.Xb(52,"div",14),d.jc("click",(function(){return t.choseType(t.customFieldType.LINK.value)})),d.Sb(53,"img",18),d.Xb(54,"div",16),d.Zc(55),d.oc(56,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(57,"div",13),d.Xb(58,"div",7),d.Xb(59,"div",14),d.jc("click",(function(){return t.choseType(t.customFieldType.CHECKBOX.value)})),d.Sb(60,"img",19),d.Xb(61,"div",16),d.Zc(62),d.oc(63,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(64,"div",13),d.Xb(65,"div",7),d.Xb(66,"div",14),d.jc("click",(function(){return t.choseType(t.customFieldType.DROPDOWN_SINGLE.value),t.checklistChanged(),t.refreshPreview()})),d.Sb(67,"img",20),d.Xb(68,"div",16),d.Zc(69),d.oc(70,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(71,"div",13),d.Xb(72,"div",7),d.Xb(73,"div",14),d.jc("click",(function(){return t.choseType(t.customFieldType.DROPDOWN_MULTIPLE.value),t.checklistChanged(),t.refreshPreview()})),d.Sb(74,"img",21),d.Xb(75,"div",16),d.Zc(76),d.oc(77,"translate"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xc(78,z,34,25,"div",22),d.Wb(),d.Xb(79,"div",23),d.Xb(80,"a",24),d.jc("click",(function(){return t.close()})),d.Zc(81),d.oc(82,"translate"),d.Wb(),d.Xb(83,"button",25),d.jc("click",(function(){return t.create()})),d.Zc(84),d.oc(85,"translate"),d.Wb(),d.Wb()),2&e&&(d.Cb(2),d.ad(d.pc(3,41,"SHARED_MODULES.CUSTOM_FIELD.CREATE_CUSTOM_FIELD_TITLE")),d.Cb(10),d.ad(d.pc(13,43,"GLOBAL.NAME_LABEL")),d.Cb(4),d.wc("ngModel",t.customField.name),d.Cb(2),d.ad(d.pc(19,45,"SHARED_MODULES.CUSTOM_FIELD.NAME_INFO_TEXT")),d.Cb(5),d.ad(d.pc(24,47,"GLOBAL.DESCRIPTION_LABEL")),d.Cb(2),d.wc("ngModel",t.customField.description),d.Cb(2),d.ad(d.pc(28,49,"SHARED_MODULES.CUSTOM_FIELD.DESCRIPTION_INFO_TEXT")),d.Cb(5),d.ad(d.pc(33,51,"GLOBAL.TYPE_NAME")),d.Cb(6),d.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.TXT.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.TXT.value),d.Cb(3),d.ad(d.pc(42,53,"SHARED_MODULES.CUSTOM_FIELD.TYPE_TEXT_LABEL")),d.Cb(4),d.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.NUMBER.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.NUMBER.value),d.Cb(3),d.ad(d.pc(49,55,"SHARED_MODULES.CUSTOM_FIELD.TYPE_NUMBER_LABEL")),d.Cb(4),d.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.LINK.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.LINK.value),d.Cb(3),d.ad(d.pc(56,57,"SHARED_MODULES.CUSTOM_FIELD.TYPE_LINK_LABEL")),d.Cb(4),d.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.CHECKBOX.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.CHECKBOX.value),d.Cb(3),d.ad(d.pc(63,59,"SHARED_MODULES.CUSTOM_FIELD.TYPE_SWITCH_LABEL")),d.Cb(4),d.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.DROPDOWN_SINGLE.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.DROPDOWN_SINGLE.value),d.Cb(3),d.ad(d.pc(70,61,"SHARED_MODULES.CUSTOM_FIELD.TYPE_SELECT_LABEL")),d.Cb(4),d.Hb("cl-btn-outline-primary",t.customField.type===t.customFieldType.DROPDOWN_MULTIPLE.value)("cl-btn-outline-light",t.customField.type!==t.customFieldType.DROPDOWN_MULTIPLE.value),d.Cb(3),d.ad(d.pc(77,63,"SHARED_MODULES.CUSTOM_FIELD.TYPE_SELECT_MULTIPLE_LABEL")),d.Cb(2),d.wc("ngIf",null==t.customField?null:t.customField.type),d.Cb(3),d.ad(d.pc(82,65,"GLOBAL.CANCEL_BTN")),d.Cb(3),d.ad(d.pc(85,67,"GLOBAL.CREATE_LABEL")))},directives:[w.c,w.s,w.v,p.u,w.A,S.a,w.a,p.t],pipes:[E.e],encapsulation:2,changeDetection:0}),e})();const K=function(){return["/upgrade"]},q=function(){return{plan:"pro"}};function J(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",3),d.Xb(1,"info"),d.Zc(2),d.oc(3,"translate"),d.Xb(4,"a",4),d.jc("click",(function(){return d.Oc(e),d.nc().analyticsService.addEventOnSettingsChanged("Pro","Upgrade","Workspace settings","Custom fields")})),d.Zc(5),d.oc(6,"translate"),d.Wb(),d.Wb(),d.Wb()}2&e&&(d.Cb(2),d.bd(" ",d.pc(3,4,"SHARED_MODULES.CUSTOM_FIELD.PRO_FEATURE_LABEL_PART_1"),""),d.Cb(2),d.wc("routerLink",d.Ac(8,K))("queryParams",d.Ac(9,q)),d.Cb(1),d.ad(d.pc(6,6,"GLOBAL.UPGRADE_BTN")))}function Q(e,t){1&e&&d.Sb(0,"div",26)}function ee(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",27),d.Xb(1,"custom-field-edit",28),d.jc("customFieldDeleted",(function(t){return d.Oc(e),d.nc(2).customFieldDeleted(t)})),d.Wb(),d.Wb()}if(2&e){const e=t.$implicit;d.Cb(1),d.wc("customField",e)}}function te(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",29),d.Xb(1,"custom-field-edit",28),d.jc("customFieldDeleted",(function(t){return d.Oc(e),d.nc(2).customFieldDeleted(t)})),d.Wb(),d.Wb()}if(2&e){const e=t.$implicit;d.Cb(1),d.wc("customField",e)}}function ie(e,t){1&e&&(d.Xb(0,"span",30),d.Xb(1,"div",17),d.Zc(2),d.oc(3,"translate"),d.Wb(),d.Wb()),2&e&&(d.Cb(2),d.ad(d.pc(3,1,"SHARED_MODULES.CUSTOM_FIELD.DROP_HERE_LABEL")))}function ne(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",27),d.Xb(1,"custom-field-edit",28),d.jc("customFieldDeleted",(function(t){return d.Oc(e),d.nc(2).customFieldDeleted(t)})),d.Wb(),d.Wb()}if(2&e){const e=t.$implicit;d.Cb(1),d.wc("customField",e)}}const se=function(e,t){return[e,t]};function re(e,t){if(1&e){const e=d.Yb();d.Xb(0,"div",5),d.Xc(1,Q,1,0,"div",6),d.Xb(2,"div",7),d.Xb(3,"div"),d.Xb(4,"div",8),d.Zc(5),d.oc(6,"translate"),d.Wb(),d.Xb(7,"div",9),d.Zc(8),d.oc(9,"translate"),d.Wb(),d.Wb(),d.Xb(10,"div",10),d.Xb(11,"div",11),d.Xb(12,"div",12,13),d.jc("cdkDropListDropped",(function(t){d.Oc(e);const i=d.nc();return i.drop(t,i.customFieldStatus.INACTIVE)})),d.Xb(14,"div",14),d.Xb(15,"a",15),d.jc("click",(function(){d.Oc(e);const t=d.nc(),i=d.Lc(3);return t.openModal(i)})),d.Zc(16),d.oc(17,"translate"),d.Wb(),d.Wb(),d.Xb(18,"span",16),d.Xb(19,"div",17),d.Zc(20),d.oc(21,"translate"),d.Wb(),d.Wb(),d.Xc(22,ee,2,1,"div",18),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(23,"div",7),d.Xb(24,"div"),d.Xb(25,"div",8),d.Zc(26),d.oc(27,"translate"),d.Wb(),d.Xb(28,"div",9),d.Zc(29),d.oc(30,"translate"),d.Wb(),d.Wb(),d.Xb(31,"div",10),d.Xb(32,"div",11),d.Xb(33,"div",19,20),d.jc("cdkDropListDropped",(function(t){d.Oc(e);const i=d.nc();return i.drop(t,i.customFieldStatus.VISIBLE)})),d.Xb(35,"h5",21),d.Zc(36),d.oc(37,"translate"),d.Wb(),d.Xb(38,"h6",9),d.Zc(39),d.oc(40,"translate"),d.Wb(),d.Xc(41,te,2,1,"div",22),d.Xc(42,ie,4,3,"span",23),d.Wb(),d.Xb(43,"div",19,24),d.jc("cdkDropListDropped",(function(t){d.Oc(e);const i=d.nc();return i.drop(t,i.customFieldStatus.INVISIBLE)})),d.Xb(45,"h5",25),d.Zc(46),d.oc(47,"translate"),d.Wb(),d.Xb(48,"h6",9),d.Zc(49),d.oc(50,"translate"),d.Wb(),d.Xb(51,"span",16),d.Xb(52,"div",17),d.Zc(53),d.oc(54,"translate"),d.Wb(),d.Wb(),d.Xc(55,ne,2,1,"div",18),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){const e=d.Lc(13),t=d.Lc(34),i=d.Lc(44),n=d.nc();d.Cb(1),d.wc("ngIf",!n.hasCustomFieldsFeature),d.Cb(4),d.ad(d.pc(6,22,"SHARED_MODULES.CUSTOM_FIELD.AVAILABLE_FIELD_INFO_HEADER")),d.Cb(3),d.ad(d.pc(9,24,"SHARED_MODULES.CUSTOM_FIELD.AVAILABLE_FIELD_INFO_BODY")),d.Cb(4),d.wc("cdkDropListConnectedTo",d.Cc(44,se,t,i))("cdkDropListData",n.filterOfStatus(n.customFields,n.customFieldStatus.INACTIVE)),d.Cb(4),d.ad(d.pc(17,26,"GLOBAL.CREATE_LABEL")),d.Cb(4),d.ad(d.pc(21,28,"SHARED_MODULES.CUSTOM_FIELD.DROP_HERE_LABEL")),d.Cb(2),d.wc("ngForOf",n.filterOfStatus(n.customFields,n.customFieldStatus.INACTIVE)),d.Cb(4),d.ad(d.pc(27,30,"SHARED_MODULES.CUSTOM_FIELD.ACTIVE_FIELDS_LABEL")),d.Cb(3),d.ad(d.pc(30,32,"SHARED_MODULES.CUSTOM_FIELD.FIELDS_IN_ALL_ENTRIES_LABEL")),d.Cb(4),d.wc("cdkDropListData",n.filterOfStatus(n.customFields,n.customFieldStatus.VISIBLE))("cdkDropListConnectedTo",d.Cc(47,se,i,e)),d.Cb(3),d.ad(d.pc(37,34,"GLOBAL.VISIBLE_LABEL")),d.Cb(3),d.ad(d.pc(40,36,"SHARED_MODULES.CUSTOM_FIELD.FIELDS_USERS_CAN_SEE_LABEL")),d.Cb(2),d.wc("ngForOf",n.filterOfStatus(n.customFields,n.customFieldStatus.VISIBLE)),d.Cb(1),d.wc("ngForOf",n.dropList),d.Cb(1),d.wc("cdkDropListData",n.filterOfStatus(n.customFields,n.customFieldStatus.INVISIBLE))("cdkDropListConnectedTo",d.Cc(50,se,t,e)),d.Cb(3),d.ad(d.pc(47,38,"SHARED_MODULES.CUSTOM_FIELD.FIELDS_INVISIBLE_LABEL")),d.Cb(3),d.ad(d.pc(50,40,"SHARED_MODULES.CUSTOM_FIELD.FIELDS_INVISIBLE_BUT_THERE_LABEL")),d.Cb(4),d.ad(d.pc(54,42,"SHARED_MODULES.CUSTOM_FIELD.DROP_HERE_LABEL")),d.Cb(2),d.wc("ngForOf",n.filterOfStatus(n.customFields,n.customFieldStatus.INVISIBLE))}}function oe(e,t){if(1&e){const e=d.Yb();d.Xb(0,"custom-field-create",31),d.jc("created",(function(t){return d.Oc(e),d.nc().create(t)}))("closeModal",(function(){return t.$implicit.close()})),d.Wb()}}let ae=(()=>{class e{constructor(e,t,i,n){this.modalService=e,this.cd=t,this.customFieldService=i,this.analyticsService=n,this.customFields=[],this.filterOfStatus=r.a.filterByStatus,this.maxActive=s.l,this.dropList=[],this.customFieldStatus=o.a,this.unsubscribe$=new a.a}set hasCustomFieldsFeature(e){this._hasCustomFieldsFeature=e,this.hasCustomFieldsFeature&&!this.isInitialized&&this.getCustomFields()}get hasCustomFieldsFeature(){return this._hasCustomFieldsFeature}ngOnInit(){this.hasCustomFieldsFeature&&this.getCustomFields()}ngOnDestroy(){this.unsubscribe$.next(!0),this.unsubscribe$.complete()}drop(e,t){e.previousContainer===e.container?Object(n.h)(e.container.data,e.previousIndex,e.currentIndex):(Object(n.i)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.edit(t,e.container.data[e.currentIndex]))}openModal(e){this.modalService.open(e,{centered:!0,size:"lg"})}customFieldDeleted(e){this.customFields=this.customFields.filter(t=>t.id!=e.id),this.dropList=new Array(this.maxActive-this.filterOfStatus(this.customFields,o.a.VISIBLE).length),this.cd.detectChanges()}edit(e,t){t.status=e,this.customFieldService.update(t).pipe(Object(c.a)(this.unsubscribe$)).subscribe(()=>{this.dropList=new Array(this.maxActive-this.filterOfStatus(this.customFields,o.a.VISIBLE).length),this.analyticsService.addEventOnSettingsChanged(e,"statusCustomField","Workspace settings")},e=>{this.getCustomFields()})}create(e){this.customFieldService.create(e).pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.modalService.dismissAll(),this.customFields.push(new r.a(e)),this.analyticsService.addEventOnSettingsChanged(e.type,"createCustomField","Workspace settings"),this.cd.detectChanges()})}getCustomFields(){this.isInitialized=!0,this.customFieldService.get().pipe(Object(c.a)(this.unsubscribe$)).subscribe(e=>{this.customFields=e.map(e=>new r.a(e)),this.dropList=new Array(this.maxActive-this.filterOfStatus(this.customFields,o.a.VISIBLE).length),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(d.Rb(h.q),d.Rb(d.h),d.Rb(l.a),d.Rb(u.a))},e.\u0275cmp=d.Lb({type:e,selectors:[["custom-field-card"]],inputs:{hasCustomFieldsFeature:"hasCustomFieldsFeature"},decls:4,vars:2,consts:[["class","cl-form-group cl-mt-2 cl-mt-lg-0",4,"ngIf"],["class","cl-row cl-relative",4,"ngIf"],["createModal",""],[1,"cl-form-group","cl-mt-2","cl-mt-lg-0"],[1,"cl-btn",3,"routerLink","queryParams","click"],[1,"cl-row","cl-relative"],["class","cl-blocker",4,"ngIf"],[1,"cl-col-lg-6","cl-col-lg-custom-3"],[1,"cl-h2","cl-mb-0"],[1,"cl-h6"],[1,"cl-card","cl-border-bottom"],[1,"cl-card-body"],["cdkDropList","",3,"cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],["inactive","cdkDropList"],[1,"cl-cf-holder"],[1,"cl-btn","cl-btn-primary",3,"click"],[1,"cl-cf-holder","cl-cf-holder-empty"],[1,"cl-cf-holder-drop-here"],["class","cl-cf-holder","cdkDrag","",4,"ngFor","ngForOf"],["cdkDropList","",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["visible","cdkDropList"],[1,"cl-card-title"],["class","cl-cf-holder cl-cf-holder-visible","cdkDrag","",4,"ngFor","ngForOf"],["class","cl-cf-holder cl-cf-holder-empty cl-cf-holder-visible",4,"ngFor","ngForOf"],["invisible","cdkDropList"],[1,"cl-card-title","cl-pt-1"],[1,"cl-blocker"],["cdkDrag","",1,"cl-cf-holder"],[3,"customField","customFieldDeleted"],["cdkDrag","",1,"cl-cf-holder","cl-cf-holder-visible"],[1,"cl-cf-holder","cl-cf-holder-empty","cl-cf-holder-visible"],[3,"created","closeModal"]],template:function(e,t){1&e&&(d.Xc(0,J,7,10,"div",0),d.Xc(1,re,56,53,"div",1),d.Xc(2,oe,1,0,"ng-template",null,2,d.Yc)),2&e&&(d.wc("ngIf",!t.hasCustomFieldsFeature),d.Cb(1),d.wc("ngIf",t.customFields))},directives:[p.u,b.a,f.g,n.e,p.t,n.a,X,Z],pipes:[E.e],encapsulation:2,changeDetection:0}),e})()},xDdU:function(e,t,i){var n,s,r=i("4fRq"),o=i("I2ZF"),a=0,c=0;e.exports=function(e,t,i){var l=t&&i||0,u=t||[],d=(e=e||{}).node||n,h=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==h){var p=r();null==d&&(d=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=s=16383&(p[6]<<8|p[7]))}var b=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:c+1,m=b-a+(f-c)/1e4;if(m<0&&void 0===e.clockseq&&(h=h+1&16383),(m<0||b>a)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=b,c=f,s=h;var g=(1e4*(268435455&(b+=122192928e5))+f)%4294967296;u[l++]=g>>>24&255,u[l++]=g>>>16&255,u[l++]=g>>>8&255,u[l++]=255&g;var v=b/4294967296*1e4&268435455;u[l++]=v>>>8&255,u[l++]=255&v,u[l++]=v>>>24&15|16,u[l++]=v>>>16&255,u[l++]=h>>>8|128,u[l++]=255&h;for(var C=0;C<6;++C)u[l+C]=d[C];return t||o(u)}},xJiw:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){let t="";if(e)return t=e.length>0&&"everyone"===e[0].id?"GLOBAL.EVERYONE_LABEL":e.map(e=>e.name).join(", "),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"displayUserName",type:e,pure:!0}),e})()},xShd:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e,t){return e?t?e.sort((e,t)=>e.favorite>t.favorite?-1:e.favorite<t.favorite||e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:void 0):e:[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"sortTasks",type:e,pure:!0}),e})()},xgIS:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("HDdC"),s=i("DH7j"),r=i("n6bG"),o=i("lJxs");function a(e,t,i,c){return Object(r.a)(i)&&(c=i,i=void 0),c?a(e,t,i).pipe(Object(o.a)(e=>Object(s.a)(e)?c(...e):c(e))):new n.a(n=>{!function e(t,i,n,s,r){let o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(i,n,r),o=()=>e.removeEventListener(i,n,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(i,n),o=()=>e.off(i,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(i,n),o=()=>e.removeListener(i,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)e(t[o],i,n,s,r)}s.add(o)}(e,t,(function(e){n.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),n,i)})}},xk4V:function(e,t,i){var n=i("4fRq"),s=i("I2ZF");e.exports=function(e,t,i){var r=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[r+a]=o[a];return t||s(o)}},xuKB:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ofXK"),s=i("3Pt+"),r=i("dlKe"),o=i("sYmb"),a=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.m,r.b,o.d]]}),e})()},xutz:function(e,t,i){"use strict";(function(e){var n=i("XqMk"),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=s&&"object"==typeof e&&e&&!e.nodeType&&e,o=r&&r.exports===s&&n.a.process,a=function(){try{return r&&r.require&&r.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();t.a=a}).call(this,i("3UD+")(e))},xzCI:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("xoOP");class s{constructor(e){this.id=e.id,this.label=e.name,this.placeholder=e.placeholder,this.type=e.type}setIndicator(){}getApiParamsIfChanged(){return null}getApiParams(){return null}setValuesFromParams(e){if(!e)return;const t=e.find(e=>e.id===this.id);this.setValuesFromParam(t),this.setIndicator()}setValuesFromParam(e){}checkIsDisabled(e){this.isFilterDisabled=!e.includes(this.id)}clear(){this.tooltip="",this.indicator=0}isClean(){}static areParamsEqaul(e,t){return Array.isArray(e.value)&&Array.isArray(t.value)?Object(n.c)(e.value,t.value):e.value===t.value}}},yUBi:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class e{transform(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,4)}catch(t){}return e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Qb({name:"prettyJson",type:e,pure:!0}),e})()},yvyG:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("1Tmk"),s=i("fXoL"),r=i("tyNb");let o=(()=>{class e{constructor(e,t){this.workspaceService=e,this.router=t}canActivate(e){const t=this.workspaceService.getLocalDefaultWorkspace(),i=e.data.feature;if(i||console.warn("FeatureGuard: missing feature parameter!"),null==t?void 0:t.hasFeature(i))return!0;this.router.navigate(["tracker"])}}return e.\u0275fac=function(t){return new(t||e)(s.fc(n.a),s.fc(r.d))},e.\u0275prov=s.Nb({token:e,factory:e.\u0275fac}),e})()},yx2s:function(e,t,i){"use strict";var n=i("FWf1");t.canReportError=function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof n.Subscriber?t:null}return!0}},z1wq:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("6qRu"),s=i("kZ14");class r{constructor(e){this._id=e&&e.id,this._name=e&&e.name,this._userId=e&&e.userId,this._projectsAndTasks=e&&e.projectsAndTasks.map(e=>new n.a(e.task,e.project)),this._isActive=!1,this._entries=e&&e.entries.map(e=>new s.a(e))}get id(){return this._id}set id(e){this._id=e}get name(){return this._name}set name(e){this._name=e}get userId(){return this._userId}set userId(e){this._userId=e}get projectsAndTasks(){return this._projectsAndTasks}get entries(){return this._entries}set projectsAndTasks(e){this._projectsAndTasks=e}set entries(e){this._entries=e}get isActive(){return this._isActive}set isActive(e){this._isActive=e}}},zDGq:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("XNiG"),s=i("DoKE"),r=i("xoOP"),o=i("fXoL");let a=(()=>{class e{constructor(){this.keyboardRecorder$=new n.a,this.keyboardCtrlEnter$=new n.a,this.listenSingleKeyup=!0,this.onKeyUp=e=>{const t=e.keyCode?e.keyCode:e.which;t===s.d&&e.ctrlKey&&this.keyboardCtrlEnter$.next(),Object(r.s)(e)||!this.listenSingleKeyup||e.ctrlKey||e.shiftKey||e.altKey||t!==s.g&&t!==s.e&&t!==s.f&&t!==s.c||this.keyboardRecorder$.next(t)},window.addEventListener("keyup",this.onKeyUp)}ngOnDestroy(){window.removeEventListener("keyup",this.onKeyUp)}addListener(){this.listenSingleKeyup=!0}removeListener(){this.listenSingleKeyup=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},zJCG:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("3Pt+"),s=i("ofXK"),r=i("9Trn"),o=i("1kSV"),a=i("C1xe"),c=i("sYmb"),l=i("fXoL");let u=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},providers:[],imports:[[n.m,s.c,r.a,o.db,a.a,c.d]]}),e})()},zfKp:function(e,t,i){"use strict";t.observable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},znhS:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("wd/R"),s=i("Hf8F"),r=i("YnOA"),o=i("fXoL");let a=(()=>{class e{transform(e,t){return"number"==typeof e&&(e=new s.a(1e3*e).asString()),Object(r.a)(Object(n.duration)(e),t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Qb({name:"timeFormat",type:e,pure:!0}),e})()}}]);